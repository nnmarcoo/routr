var Jz=Object.defineProperty;var Qz=(e,t,i)=>t in e?Jz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var zd=(e,t,i)=>Qz(e,typeof t!="symbol"?t+"":t,i);function ak(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();var eD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lk={exports:{}},Hg={},uk={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf=Symbol.for("react.element"),tD=Symbol.for("react.portal"),nD=Symbol.for("react.fragment"),rD=Symbol.for("react.strict_mode"),iD=Symbol.for("react.profiler"),sD=Symbol.for("react.provider"),oD=Symbol.for("react.context"),aD=Symbol.for("react.forward_ref"),lD=Symbol.for("react.suspense"),uD=Symbol.for("react.memo"),cD=Symbol.for("react.lazy"),AS=Symbol.iterator;function hD(e){return e===null||typeof e!="object"?null:(e=AS&&e[AS]||e["@@iterator"],typeof e=="function"?e:null)}var ck={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hk=Object.assign,dk={};function mh(e,t,i){this.props=e,this.context=t,this.refs=dk,this.updater=i||ck}mh.prototype.isReactComponent={};mh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fk(){}fk.prototype=mh.prototype;function qx(e,t,i){this.props=e,this.context=t,this.refs=dk,this.updater=i||ck}var Gx=qx.prototype=new fk;Gx.constructor=qx;hk(Gx,mh.prototype);Gx.isPureReactComponent=!0;var zS=Array.isArray,pk=Object.prototype.hasOwnProperty,Hx={current:null},mk={key:!0,ref:!0,__self:!0,__source:!0};function gk(e,t,i){var a,c={},d=null,f=null;if(t!=null)for(a in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(d=""+t.key),t)pk.call(t,a)&&!mk.hasOwnProperty(a)&&(c[a]=t[a]);var u=arguments.length-2;if(u===1)c.children=i;else if(1<u){for(var w=Array(u),k=0;k<u;k++)w[k]=arguments[k+2];c.children=w}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)c[a]===void 0&&(c[a]=u[a]);return{$$typeof:Xf,type:e,key:d,ref:f,props:c,_owner:Hx.current}}function dD(e,t){return{$$typeof:Xf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xf}function fD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var DS=/\/+/g;function dv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fD(""+e.key):t.toString(36)}function Um(e,t,i,a,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Xf:case tD:f=!0}}if(f)return f=e,c=c(f),e=a===""?"."+dv(f,0):a,zS(c)?(i="",e!=null&&(i=e.replace(DS,"$&/")+"/"),Um(c,t,i,"",function(k){return k})):c!=null&&(Zx(c)&&(c=dD(c,i+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(DS,"$&/")+"/")+e)),t.push(c)),1;if(f=0,a=a===""?".":a+":",zS(e))for(var u=0;u<e.length;u++){d=e[u];var w=a+dv(d,u);f+=Um(d,t,i,w,c)}else if(w=hD(e),typeof w=="function")for(e=w.call(e),u=0;!(d=e.next()).done;)d=d.value,w=a+dv(d,u++),f+=Um(d,t,i,w,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function pm(e,t,i){if(e==null)return e;var a=[],c=0;return Um(e,a,"","",function(d){return t.call(i,d,c++)}),a}function pD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bi={current:null},Wm={transition:null},mD={ReactCurrentDispatcher:bi,ReactCurrentBatchConfig:Wm,ReactCurrentOwner:Hx};function yk(){throw Error("act(...) is not supported in production builds of React.")}$t.Children={map:pm,forEach:function(e,t,i){pm(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return pm(e,function(){t++}),t},toArray:function(e){return pm(e,function(t){return t})||[]},only:function(e){if(!Zx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$t.Component=mh;$t.Fragment=nD;$t.Profiler=iD;$t.PureComponent=qx;$t.StrictMode=rD;$t.Suspense=lD;$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mD;$t.act=yk;$t.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=hk({},e.props),c=e.key,d=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,f=Hx.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(w in t)pk.call(t,w)&&!mk.hasOwnProperty(w)&&(a[w]=t[w]===void 0&&u!==void 0?u[w]:t[w])}var w=arguments.length-2;if(w===1)a.children=i;else if(1<w){u=Array(w);for(var k=0;k<w;k++)u[k]=arguments[k+2];a.children=u}return{$$typeof:Xf,type:e.type,key:c,ref:d,props:a,_owner:f}};$t.createContext=function(e){return e={$$typeof:oD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sD,_context:e},e.Consumer=e};$t.createElement=gk;$t.createFactory=function(e){var t=gk.bind(null,e);return t.type=e,t};$t.createRef=function(){return{current:null}};$t.forwardRef=function(e){return{$$typeof:aD,render:e}};$t.isValidElement=Zx;$t.lazy=function(e){return{$$typeof:cD,_payload:{_status:-1,_result:e},_init:pD}};$t.memo=function(e,t){return{$$typeof:uD,type:e,compare:t===void 0?null:t}};$t.startTransition=function(e){var t=Wm.transition;Wm.transition={};try{e()}finally{Wm.transition=t}};$t.unstable_act=yk;$t.useCallback=function(e,t){return bi.current.useCallback(e,t)};$t.useContext=function(e){return bi.current.useContext(e)};$t.useDebugValue=function(){};$t.useDeferredValue=function(e){return bi.current.useDeferredValue(e)};$t.useEffect=function(e,t){return bi.current.useEffect(e,t)};$t.useId=function(){return bi.current.useId()};$t.useImperativeHandle=function(e,t,i){return bi.current.useImperativeHandle(e,t,i)};$t.useInsertionEffect=function(e,t){return bi.current.useInsertionEffect(e,t)};$t.useLayoutEffect=function(e,t){return bi.current.useLayoutEffect(e,t)};$t.useMemo=function(e,t){return bi.current.useMemo(e,t)};$t.useReducer=function(e,t,i){return bi.current.useReducer(e,t,i)};$t.useRef=function(e){return bi.current.useRef(e)};$t.useState=function(e){return bi.current.useState(e)};$t.useSyncExternalStore=function(e,t,i){return bi.current.useSyncExternalStore(e,t,i)};$t.useTransition=function(){return bi.current.useTransition()};$t.version="18.3.1";uk.exports=$t;var ne=uk.exports;const po=Wx(ne),l0=ak({__proto__:null,default:po},[ne]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gD=ne,yD=Symbol.for("react.element"),_D=Symbol.for("react.fragment"),vD=Object.prototype.hasOwnProperty,xD=gD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bD={key:!0,ref:!0,__self:!0,__source:!0};function _k(e,t,i){var a,c={},d=null,f=null;i!==void 0&&(d=""+i),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(f=t.ref);for(a in t)vD.call(t,a)&&!bD.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:yD,type:e,key:d,ref:f,props:c,_owner:xD.current}}Hg.Fragment=_D;Hg.jsx=_k;Hg.jsxs=_k;lk.exports=Hg;var Ae=lk.exports,vk={exports:{}},hs={},xk={exports:{}},bk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ne,$e){var at=Ne.length;Ne.push($e);e:for(;0<at;){var St=at-1>>>1,Mt=Ne[St];if(0<c(Mt,$e))Ne[St]=$e,Ne[at]=Mt,at=St;else break e}}function i(Ne){return Ne.length===0?null:Ne[0]}function a(Ne){if(Ne.length===0)return null;var $e=Ne[0],at=Ne.pop();if(at!==$e){Ne[0]=at;e:for(var St=0,Mt=Ne.length,Nn=Mt>>>1;St<Nn;){var Zt=2*(St+1)-1,Yt=Ne[Zt],_n=Zt+1,Jt=Ne[_n];if(0>c(Yt,at))_n<Mt&&0>c(Jt,Yt)?(Ne[St]=Jt,Ne[_n]=at,St=_n):(Ne[St]=Yt,Ne[Zt]=at,St=Zt);else if(_n<Mt&&0>c(Jt,at))Ne[St]=Jt,Ne[_n]=at,St=_n;else break e}}return $e}function c(Ne,$e){var at=Ne.sortIndex-$e.sortIndex;return at!==0?at:Ne.id-$e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,u=f.now();e.unstable_now=function(){return f.now()-u}}var w=[],k=[],I=1,A=null,M=3,$=!1,H=!1,Y=!1,ae=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Ne){for(var $e=i(k);$e!==null;){if($e.callback===null)a(k);else if($e.startTime<=Ne)a(k),$e.sortIndex=$e.expirationTime,t(w,$e);else break;$e=i(k)}}function ee(Ne){if(Y=!1,G(Ne),!H)if(i(w)!==null)H=!0,it(de);else{var $e=i(k);$e!==null&&Je(ee,$e.startTime-Ne)}}function de(Ne,$e){H=!1,Y&&(Y=!1,j(Ce),Ce=-1),$=!0;var at=M;try{for(G($e),A=i(w);A!==null&&(!(A.expirationTime>$e)||Ne&&!Re());){var St=A.callback;if(typeof St=="function"){A.callback=null,M=A.priorityLevel;var Mt=St(A.expirationTime<=$e);$e=e.unstable_now(),typeof Mt=="function"?A.callback=Mt:A===i(w)&&a(w),G($e)}else a(w);A=i(w)}if(A!==null)var Nn=!0;else{var Zt=i(k);Zt!==null&&Je(ee,Zt.startTime-$e),Nn=!1}return Nn}finally{A=null,M=at,$=!1}}var he=!1,ye=null,Ce=-1,Me=5,ze=-1;function Re(){return!(e.unstable_now()-ze<Me)}function te(){if(ye!==null){var Ne=e.unstable_now();ze=Ne;var $e=!0;try{$e=ye(!0,Ne)}finally{$e?Fe():(he=!1,ye=null)}}else he=!1}var Fe;if(typeof W=="function")Fe=function(){W(te)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,Ge=Be.port2;Be.port1.onmessage=te,Fe=function(){Ge.postMessage(null)}}else Fe=function(){ae(te,0)};function it(Ne){ye=Ne,he||(he=!0,Fe())}function Je(Ne,$e){Ce=ae(function(){Ne(e.unstable_now())},$e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){H||$||(H=!0,it(de))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return i(w)},e.unstable_next=function(Ne){switch(M){case 1:case 2:case 3:var $e=3;break;default:$e=M}var at=M;M=$e;try{return Ne()}finally{M=at}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,$e){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var at=M;M=Ne;try{return $e()}finally{M=at}},e.unstable_scheduleCallback=function(Ne,$e,at){var St=e.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?St+at:St):at=St,Ne){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=at+Mt,Ne={id:I++,callback:$e,priorityLevel:Ne,startTime:at,expirationTime:Mt,sortIndex:-1},at>St?(Ne.sortIndex=at,t(k,Ne),i(w)===null&&Ne===i(k)&&(Y?(j(Ce),Ce=-1):Y=!0,Je(ee,at-St))):(Ne.sortIndex=Mt,t(w,Ne),H||$||(H=!0,it(de))),Ne},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(Ne){var $e=M;return function(){var at=M;M=$e;try{return Ne.apply(this,arguments)}finally{M=at}}}})(bk);xk.exports=bk;var wD=xk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SD=ne,us=wD;function He(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wk=new Set,vf={};function gu(e,t){Qc(e,t),Qc(e+"Capture",t)}function Qc(e,t){for(vf[e]=t,e=0;e<t.length;e++)wk.add(t[e])}var Zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u0=Object.prototype.hasOwnProperty,TD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RS={},LS={};function CD(e){return u0.call(LS,e)?!0:u0.call(RS,e)?!1:TD.test(e)?LS[e]=!0:(RS[e]=!0,!1)}function kD(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function PD(e,t,i,a){if(t===null||typeof t>"u"||kD(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wi(e,t,i,a,c,d,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=f}var qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qr[e]=new wi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qr[t]=new wi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qr[e]=new wi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qr[e]=new wi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qr[e]=new wi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qr[e]=new wi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qr[e]=new wi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qr[e]=new wi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qr[e]=new wi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xx=/[\-:]([a-z])/g;function Kx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xx,Kx);qr[t]=new wi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xx,Kx);qr[t]=new wi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xx,Kx);qr[t]=new wi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qr[e]=new wi(e,1,!1,e.toLowerCase(),null,!1,!1)});qr.xlinkHref=new wi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qr[e]=new wi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yx(e,t,i,a){var c=qr.hasOwnProperty(t)?qr[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(PD(t,i,c,a)&&(i=null),a||c===null?CD(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var ra=SD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mm=Symbol.for("react.element"),Cc=Symbol.for("react.portal"),kc=Symbol.for("react.fragment"),Jx=Symbol.for("react.strict_mode"),c0=Symbol.for("react.profiler"),Sk=Symbol.for("react.provider"),Tk=Symbol.for("react.context"),Qx=Symbol.for("react.forward_ref"),h0=Symbol.for("react.suspense"),d0=Symbol.for("react.suspense_list"),e1=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),Ck=Symbol.for("react.offscreen"),FS=Symbol.iterator;function Dd(e){return e===null||typeof e!="object"?null:(e=FS&&e[FS]||e["@@iterator"],typeof e=="function"?e:null)}var Vn=Object.assign,fv;function Hd(e){if(fv===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);fv=t&&t[1]||""}return`
`+fv+e}var pv=!1;function mv(e,t){if(!e||pv)return"";pv=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(k){var a=k}Reflect.construct(e,[],t)}else{try{t.call()}catch(k){a=k}e.call(t.prototype)}else{try{throw Error()}catch(k){a=k}e()}}catch(k){if(k&&a&&typeof k.stack=="string"){for(var c=k.stack.split(`
`),d=a.stack.split(`
`),f=c.length-1,u=d.length-1;1<=f&&0<=u&&c[f]!==d[u];)u--;for(;1<=f&&0<=u;f--,u--)if(c[f]!==d[u]){if(f!==1||u!==1)do if(f--,u--,0>u||c[f]!==d[u]){var w=`
`+c[f].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=f&&0<=u);break}}}finally{pv=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Hd(e):""}function ED(e){switch(e.tag){case 5:return Hd(e.type);case 16:return Hd("Lazy");case 13:return Hd("Suspense");case 19:return Hd("SuspenseList");case 0:case 2:case 15:return e=mv(e.type,!1),e;case 11:return e=mv(e.type.render,!1),e;case 1:return e=mv(e.type,!0),e;default:return""}}function f0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kc:return"Fragment";case Cc:return"Portal";case c0:return"Profiler";case Jx:return"StrictMode";case h0:return"Suspense";case d0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Tk:return(e.displayName||"Context")+".Consumer";case Sk:return(e._context.displayName||"Context")+".Provider";case Qx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case e1:return t=e.displayName||null,t!==null?t:f0(e.type)||"Memo";case $a:t=e._payload,e=e._init;try{return f0(e(t))}catch{}}return null}function ID(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return f0(t);case 8:return t===Jx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MD(e){var t=kk(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(f){a=""+f,d.call(this,f)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gm(e){e._valueTracker||(e._valueTracker=MD(e))}function Pk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=kk(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function cg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function p0(e,t){var i=t.checked;return Vn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function OS(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=nl(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ek(e,t){t=t.checked,t!=null&&Yx(e,"checked",t,!1)}function m0(e,t){Ek(e,t);var i=nl(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?g0(e,t.type,i):t.hasOwnProperty("defaultValue")&&g0(e,t.type,nl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function BS(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function g0(e,t,i){(t!=="number"||cg(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Zd=Array.isArray;function Uc(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+nl(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function y0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(He(91));return Vn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function VS(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(He(92));if(Zd(i)){if(1<i.length)throw Error(He(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:nl(i)}}function Ik(e,t){var i=nl(t.value),a=nl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function NS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ym,Ak=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ym=ym||document.createElement("div"),ym.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ym.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var tf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AD=["Webkit","ms","Moz","O"];Object.keys(tf).forEach(function(e){AD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tf[t]=tf[e]})});function zk(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||tf.hasOwnProperty(e)&&tf[e]?(""+t).trim():t+"px"}function Dk(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=zk(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var zD=Vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v0(e,t){if(t){if(zD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(He(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(He(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(He(61))}if(t.style!=null&&typeof t.style!="object")throw Error(He(62))}}function x0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var b0=null;function t1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var w0=null,Wc=null,qc=null;function jS(e){if(e=Jf(e)){if(typeof w0!="function")throw Error(He(280));var t=e.stateNode;t&&(t=Jg(t),w0(e.stateNode,e.type,t))}}function Rk(e){Wc?qc?qc.push(e):qc=[e]:Wc=e}function Lk(){if(Wc){var e=Wc,t=qc;if(qc=Wc=null,jS(e),t)for(e=0;e<t.length;e++)jS(t[e])}}function Fk(e,t){return e(t)}function Ok(){}var gv=!1;function Bk(e,t,i){if(gv)return e(t,i);gv=!0;try{return Fk(e,t,i)}finally{gv=!1,(Wc!==null||qc!==null)&&(Ok(),Lk())}}function bf(e,t){var i=e.stateNode;if(i===null)return null;var a=Jg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(He(231,t,typeof i));return i}var S0=!1;if(Zo)try{var Rd={};Object.defineProperty(Rd,"passive",{get:function(){S0=!0}}),window.addEventListener("test",Rd,Rd),window.removeEventListener("test",Rd,Rd)}catch{S0=!1}function DD(e,t,i,a,c,d,f,u,w){var k=Array.prototype.slice.call(arguments,3);try{t.apply(i,k)}catch(I){this.onError(I)}}var nf=!1,hg=null,dg=!1,T0=null,RD={onError:function(e){nf=!0,hg=e}};function LD(e,t,i,a,c,d,f,u,w){nf=!1,hg=null,DD.apply(RD,arguments)}function FD(e,t,i,a,c,d,f,u,w){if(LD.apply(this,arguments),nf){if(nf){var k=hg;nf=!1,hg=null}else throw Error(He(198));dg||(dg=!0,T0=k)}}function yu(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Vk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $S(e){if(yu(e)!==e)throw Error(He(188))}function OD(e){var t=e.alternate;if(!t){if(t=yu(e),t===null)throw Error(He(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return $S(c),e;if(d===a)return $S(c),t;d=d.sibling}throw Error(He(188))}if(i.return!==a.return)i=c,a=d;else{for(var f=!1,u=c.child;u;){if(u===i){f=!0,i=c,a=d;break}if(u===a){f=!0,a=c,i=d;break}u=u.sibling}if(!f){for(u=d.child;u;){if(u===i){f=!0,i=d,a=c;break}if(u===a){f=!0,a=d,i=c;break}u=u.sibling}if(!f)throw Error(He(189))}}if(i.alternate!==a)throw Error(He(190))}if(i.tag!==3)throw Error(He(188));return i.stateNode.current===i?e:t}function Nk(e){return e=OD(e),e!==null?jk(e):null}function jk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jk(e);if(t!==null)return t;e=e.sibling}return null}var $k=us.unstable_scheduleCallback,US=us.unstable_cancelCallback,BD=us.unstable_shouldYield,VD=us.unstable_requestPaint,er=us.unstable_now,ND=us.unstable_getCurrentPriorityLevel,n1=us.unstable_ImmediatePriority,Uk=us.unstable_UserBlockingPriority,fg=us.unstable_NormalPriority,jD=us.unstable_LowPriority,Wk=us.unstable_IdlePriority,Zg=null,mo=null;function $D(e){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(Zg,e,void 0,(e.current.flags&128)===128)}catch{}}var Xs=Math.clz32?Math.clz32:qD,UD=Math.log,WD=Math.LN2;function qD(e){return e>>>=0,e===0?32:31-(UD(e)/WD|0)|0}var _m=64,vm=4194304;function Xd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pg(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,d=e.pingedLanes,f=i&268435455;if(f!==0){var u=f&~c;u!==0?a=Xd(u):(d&=f,d!==0&&(a=Xd(d)))}else f=i&~c,f!==0?a=Xd(f):d!==0&&(a=Xd(d));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Xs(t),c=1<<i,a|=e[i],t&=~c;return a}function GD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HD(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-Xs(d),u=1<<f,w=c[f];w===-1?(!(u&i)||u&a)&&(c[f]=GD(u,t)):w<=t&&(e.expiredLanes|=u),d&=~u}}function C0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qk(){var e=_m;return _m<<=1,!(_m&4194240)&&(_m=64),e}function yv(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Kf(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xs(t),e[t]=i}function ZD(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Xs(i),d=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~d}}function r1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Xs(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var cn=0;function Gk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hk,i1,Zk,Xk,Kk,k0=!1,xm=[],Za=null,Xa=null,Ka=null,wf=new Map,Sf=new Map,Wa=[],XD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WS(e,t){switch(e){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":wf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sf.delete(t.pointerId)}}function Ld(e,t,i,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Jf(t),t!==null&&i1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function KD(e,t,i,a,c){switch(t){case"focusin":return Za=Ld(Za,e,t,i,a,c),!0;case"dragenter":return Xa=Ld(Xa,e,t,i,a,c),!0;case"mouseover":return Ka=Ld(Ka,e,t,i,a,c),!0;case"pointerover":var d=c.pointerId;return wf.set(d,Ld(wf.get(d)||null,e,t,i,a,c)),!0;case"gotpointercapture":return d=c.pointerId,Sf.set(d,Ld(Sf.get(d)||null,e,t,i,a,c)),!0}return!1}function Yk(e){var t=Xl(e.target);if(t!==null){var i=yu(t);if(i!==null){if(t=i.tag,t===13){if(t=Vk(i),t!==null){e.blockedOn=t,Kk(e.priority,function(){Zk(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=P0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);b0=a,i.target.dispatchEvent(a),b0=null}else return t=Jf(i),t!==null&&i1(t),e.blockedOn=i,!1;t.shift()}return!0}function qS(e,t,i){qm(e)&&i.delete(t)}function YD(){k0=!1,Za!==null&&qm(Za)&&(Za=null),Xa!==null&&qm(Xa)&&(Xa=null),Ka!==null&&qm(Ka)&&(Ka=null),wf.forEach(qS),Sf.forEach(qS)}function Fd(e,t){e.blockedOn===t&&(e.blockedOn=null,k0||(k0=!0,us.unstable_scheduleCallback(us.unstable_NormalPriority,YD)))}function Tf(e){function t(c){return Fd(c,e)}if(0<xm.length){Fd(xm[0],e);for(var i=1;i<xm.length;i++){var a=xm[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Za!==null&&Fd(Za,e),Xa!==null&&Fd(Xa,e),Ka!==null&&Fd(Ka,e),wf.forEach(t),Sf.forEach(t),i=0;i<Wa.length;i++)a=Wa[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Wa.length&&(i=Wa[0],i.blockedOn===null);)Yk(i),i.blockedOn===null&&Wa.shift()}var Gc=ra.ReactCurrentBatchConfig,mg=!0;function JD(e,t,i,a){var c=cn,d=Gc.transition;Gc.transition=null;try{cn=1,s1(e,t,i,a)}finally{cn=c,Gc.transition=d}}function QD(e,t,i,a){var c=cn,d=Gc.transition;Gc.transition=null;try{cn=4,s1(e,t,i,a)}finally{cn=c,Gc.transition=d}}function s1(e,t,i,a){if(mg){var c=P0(e,t,i,a);if(c===null)Pv(e,t,a,gg,i),WS(e,a);else if(KD(c,e,t,i,a))a.stopPropagation();else if(WS(e,a),t&4&&-1<XD.indexOf(e)){for(;c!==null;){var d=Jf(c);if(d!==null&&Hk(d),d=P0(e,t,i,a),d===null&&Pv(e,t,a,gg,i),d===c)break;c=d}c!==null&&a.stopPropagation()}else Pv(e,t,a,null,i)}}var gg=null;function P0(e,t,i,a){if(gg=null,e=t1(a),e=Xl(e),e!==null)if(t=yu(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Vk(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gg=e,null}function Jk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ND()){case n1:return 1;case Uk:return 4;case fg:case jD:return 16;case Wk:return 536870912;default:return 16}default:return 16}}var Ga=null,o1=null,Gm=null;function Qk(){if(Gm)return Gm;var e,t=o1,i=t.length,a,c="value"in Ga?Ga.value:Ga.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var f=i-e;for(a=1;a<=f&&t[i-a]===c[d-a];a++);return Gm=c.slice(e,1<a?1-a:void 0)}function Hm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bm(){return!0}function GS(){return!1}function ds(e){function t(i,a,c,d,f){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(d):d[u]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?bm:GS,this.isPropagationStopped=GS,this}return Vn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=bm)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=bm)},persist:function(){},isPersistent:bm}),t}var gh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},a1=ds(gh),Yf=Vn({},gh,{view:0,detail:0}),eR=ds(Yf),_v,vv,Od,Xg=Vn({},Yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Od&&(Od&&e.type==="mousemove"?(_v=e.screenX-Od.screenX,vv=e.screenY-Od.screenY):vv=_v=0,Od=e),_v)},movementY:function(e){return"movementY"in e?e.movementY:vv}}),HS=ds(Xg),tR=Vn({},Xg,{dataTransfer:0}),nR=ds(tR),rR=Vn({},Yf,{relatedTarget:0}),xv=ds(rR),iR=Vn({},gh,{animationName:0,elapsedTime:0,pseudoElement:0}),sR=ds(iR),oR=Vn({},gh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aR=ds(oR),lR=Vn({},gh,{data:0}),ZS=ds(lR),uR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hR[e])?!!t[e]:!1}function l1(){return dR}var fR=Vn({},Yf,{key:function(e){if(e.key){var t=uR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l1,charCode:function(e){return e.type==="keypress"?Hm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pR=ds(fR),mR=Vn({},Xg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XS=ds(mR),gR=Vn({},Yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l1}),yR=ds(gR),_R=Vn({},gh,{propertyName:0,elapsedTime:0,pseudoElement:0}),vR=ds(_R),xR=Vn({},Xg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bR=ds(xR),wR=[9,13,27,32],u1=Zo&&"CompositionEvent"in window,rf=null;Zo&&"documentMode"in document&&(rf=document.documentMode);var SR=Zo&&"TextEvent"in window&&!rf,eP=Zo&&(!u1||rf&&8<rf&&11>=rf),KS=" ",YS=!1;function tP(e,t){switch(e){case"keyup":return wR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pc=!1;function TR(e,t){switch(e){case"compositionend":return nP(t);case"keypress":return t.which!==32?null:(YS=!0,KS);case"textInput":return e=t.data,e===KS&&YS?null:e;default:return null}}function CR(e,t){if(Pc)return e==="compositionend"||!u1&&tP(e,t)?(e=Qk(),Gm=o1=Ga=null,Pc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eP&&t.locale!=="ko"?null:t.data;default:return null}}var kR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kR[e.type]:t==="textarea"}function rP(e,t,i,a){Rk(a),t=yg(t,"onChange"),0<t.length&&(i=new a1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var sf=null,Cf=null;function PR(e){pP(e,0)}function Kg(e){var t=Mc(e);if(Pk(t))return e}function ER(e,t){if(e==="change")return t}var iP=!1;if(Zo){var bv;if(Zo){var wv="oninput"in document;if(!wv){var QS=document.createElement("div");QS.setAttribute("oninput","return;"),wv=typeof QS.oninput=="function"}bv=wv}else bv=!1;iP=bv&&(!document.documentMode||9<document.documentMode)}function e2(){sf&&(sf.detachEvent("onpropertychange",sP),Cf=sf=null)}function sP(e){if(e.propertyName==="value"&&Kg(Cf)){var t=[];rP(t,Cf,e,t1(e)),Bk(PR,t)}}function IR(e,t,i){e==="focusin"?(e2(),sf=t,Cf=i,sf.attachEvent("onpropertychange",sP)):e==="focusout"&&e2()}function MR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kg(Cf)}function AR(e,t){if(e==="click")return Kg(t)}function zR(e,t){if(e==="input"||e==="change")return Kg(t)}function DR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ys=typeof Object.is=="function"?Object.is:DR;function kf(e,t){if(Ys(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!u0.call(t,c)||!Ys(e[c],t[c]))return!1}return!0}function t2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function n2(e,t){var i=t2(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=t2(i)}}function oP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function aP(){for(var e=window,t=cg();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=cg(e.document)}return t}function c1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function RR(e){var t=aP(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&oP(i.ownerDocument.documentElement,i)){if(a!==null&&c1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,d=Math.min(a.start,c);a=a.end===void 0?d:Math.min(a.end,c),!e.extend&&d>a&&(c=a,a=d,d=c),c=n2(i,d);var f=n2(i,a);c&&f&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var LR=Zo&&"documentMode"in document&&11>=document.documentMode,Ec=null,E0=null,of=null,I0=!1;function r2(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;I0||Ec==null||Ec!==cg(a)||(a=Ec,"selectionStart"in a&&c1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),of&&kf(of,a)||(of=a,a=yg(E0,"onSelect"),0<a.length&&(t=new a1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Ec)))}function wm(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ic={animationend:wm("Animation","AnimationEnd"),animationiteration:wm("Animation","AnimationIteration"),animationstart:wm("Animation","AnimationStart"),transitionend:wm("Transition","TransitionEnd")},Sv={},lP={};Zo&&(lP=document.createElement("div").style,"AnimationEvent"in window||(delete Ic.animationend.animation,delete Ic.animationiteration.animation,delete Ic.animationstart.animation),"TransitionEvent"in window||delete Ic.transitionend.transition);function Yg(e){if(Sv[e])return Sv[e];if(!Ic[e])return e;var t=Ic[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in lP)return Sv[e]=t[i];return e}var uP=Yg("animationend"),cP=Yg("animationiteration"),hP=Yg("animationstart"),dP=Yg("transitionend"),fP=new Map,i2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ll(e,t){fP.set(e,t),gu(t,[e])}for(var Tv=0;Tv<i2.length;Tv++){var Cv=i2[Tv],FR=Cv.toLowerCase(),OR=Cv[0].toUpperCase()+Cv.slice(1);ll(FR,"on"+OR)}ll(uP,"onAnimationEnd");ll(cP,"onAnimationIteration");ll(hP,"onAnimationStart");ll("dblclick","onDoubleClick");ll("focusin","onFocus");ll("focusout","onBlur");ll(dP,"onTransitionEnd");Qc("onMouseEnter",["mouseout","mouseover"]);Qc("onMouseLeave",["mouseout","mouseover"]);Qc("onPointerEnter",["pointerout","pointerover"]);Qc("onPointerLeave",["pointerout","pointerover"]);gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kd));function s2(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,FD(a,t,void 0,e),e.currentTarget=null}function pP(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var f=a.length-1;0<=f;f--){var u=a[f],w=u.instance,k=u.currentTarget;if(u=u.listener,w!==d&&c.isPropagationStopped())break e;s2(c,u,k),d=w}else for(f=0;f<a.length;f++){if(u=a[f],w=u.instance,k=u.currentTarget,u=u.listener,w!==d&&c.isPropagationStopped())break e;s2(c,u,k),d=w}}}if(dg)throw e=T0,dg=!1,T0=null,e}function Cn(e,t){var i=t[R0];i===void 0&&(i=t[R0]=new Set);var a=e+"__bubble";i.has(a)||(mP(t,e,2,!1),i.add(a))}function kv(e,t,i){var a=0;t&&(a|=4),mP(i,e,a,t)}var Sm="_reactListening"+Math.random().toString(36).slice(2);function Pf(e){if(!e[Sm]){e[Sm]=!0,wk.forEach(function(i){i!=="selectionchange"&&(BR.has(i)||kv(i,!1,e),kv(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sm]||(t[Sm]=!0,kv("selectionchange",!1,t))}}function mP(e,t,i,a){switch(Jk(t)){case 1:var c=JD;break;case 4:c=QD;break;default:c=s1}i=c.bind(null,t,i,e),c=void 0,!S0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Pv(e,t,i,a,c){var d=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var u=a.stateNode.containerInfo;if(u===c||u.nodeType===8&&u.parentNode===c)break;if(f===4)for(f=a.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;f=f.return}for(;u!==null;){if(f=Xl(u),f===null)return;if(w=f.tag,w===5||w===6){a=d=f;continue e}u=u.parentNode}}a=a.return}Bk(function(){var k=d,I=t1(i),A=[];e:{var M=fP.get(e);if(M!==void 0){var $=a1,H=e;switch(e){case"keypress":if(Hm(i)===0)break e;case"keydown":case"keyup":$=pR;break;case"focusin":H="focus",$=xv;break;case"focusout":H="blur",$=xv;break;case"beforeblur":case"afterblur":$=xv;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=HS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=nR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=yR;break;case uP:case cP:case hP:$=sR;break;case dP:$=vR;break;case"scroll":$=eR;break;case"wheel":$=bR;break;case"copy":case"cut":case"paste":$=aR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=XS}var Y=(t&4)!==0,ae=!Y&&e==="scroll",j=Y?M!==null?M+"Capture":null:M;Y=[];for(var W=k,G;W!==null;){G=W;var ee=G.stateNode;if(G.tag===5&&ee!==null&&(G=ee,j!==null&&(ee=bf(W,j),ee!=null&&Y.push(Ef(W,ee,G)))),ae)break;W=W.return}0<Y.length&&(M=new $(M,H,null,i,I),A.push({event:M,listeners:Y}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",M&&i!==b0&&(H=i.relatedTarget||i.fromElement)&&(Xl(H)||H[Xo]))break e;if(($||M)&&(M=I.window===I?I:(M=I.ownerDocument)?M.defaultView||M.parentWindow:window,$?(H=i.relatedTarget||i.toElement,$=k,H=H?Xl(H):null,H!==null&&(ae=yu(H),H!==ae||H.tag!==5&&H.tag!==6)&&(H=null)):($=null,H=k),$!==H)){if(Y=HS,ee="onMouseLeave",j="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(Y=XS,ee="onPointerLeave",j="onPointerEnter",W="pointer"),ae=$==null?M:Mc($),G=H==null?M:Mc(H),M=new Y(ee,W+"leave",$,i,I),M.target=ae,M.relatedTarget=G,ee=null,Xl(I)===k&&(Y=new Y(j,W+"enter",H,i,I),Y.target=G,Y.relatedTarget=ae,ee=Y),ae=ee,$&&H)t:{for(Y=$,j=H,W=0,G=Y;G;G=gc(G))W++;for(G=0,ee=j;ee;ee=gc(ee))G++;for(;0<W-G;)Y=gc(Y),W--;for(;0<G-W;)j=gc(j),G--;for(;W--;){if(Y===j||j!==null&&Y===j.alternate)break t;Y=gc(Y),j=gc(j)}Y=null}else Y=null;$!==null&&o2(A,M,$,Y,!1),H!==null&&ae!==null&&o2(A,ae,H,Y,!0)}}e:{if(M=k?Mc(k):window,$=M.nodeName&&M.nodeName.toLowerCase(),$==="select"||$==="input"&&M.type==="file")var de=ER;else if(JS(M))if(iP)de=zR;else{de=MR;var he=IR}else($=M.nodeName)&&$.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(de=AR);if(de&&(de=de(e,k))){rP(A,de,i,I);break e}he&&he(e,M,k),e==="focusout"&&(he=M._wrapperState)&&he.controlled&&M.type==="number"&&g0(M,"number",M.value)}switch(he=k?Mc(k):window,e){case"focusin":(JS(he)||he.contentEditable==="true")&&(Ec=he,E0=k,of=null);break;case"focusout":of=E0=Ec=null;break;case"mousedown":I0=!0;break;case"contextmenu":case"mouseup":case"dragend":I0=!1,r2(A,i,I);break;case"selectionchange":if(LR)break;case"keydown":case"keyup":r2(A,i,I)}var ye;if(u1)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Pc?tP(e,i)&&(Ce="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ce="onCompositionStart");Ce&&(eP&&i.locale!=="ko"&&(Pc||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Pc&&(ye=Qk()):(Ga=I,o1="value"in Ga?Ga.value:Ga.textContent,Pc=!0)),he=yg(k,Ce),0<he.length&&(Ce=new ZS(Ce,e,null,i,I),A.push({event:Ce,listeners:he}),ye?Ce.data=ye:(ye=nP(i),ye!==null&&(Ce.data=ye)))),(ye=SR?TR(e,i):CR(e,i))&&(k=yg(k,"onBeforeInput"),0<k.length&&(I=new ZS("onBeforeInput","beforeinput",null,i,I),A.push({event:I,listeners:k}),I.data=ye))}pP(A,t)})}function Ef(e,t,i){return{instance:e,listener:t,currentTarget:i}}function yg(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=bf(e,i),d!=null&&a.unshift(Ef(e,d,c)),d=bf(e,t),d!=null&&a.push(Ef(e,d,c))),e=e.return}return a}function gc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function o2(e,t,i,a,c){for(var d=t._reactName,f=[];i!==null&&i!==a;){var u=i,w=u.alternate,k=u.stateNode;if(w!==null&&w===a)break;u.tag===5&&k!==null&&(u=k,c?(w=bf(i,d),w!=null&&f.unshift(Ef(i,w,u))):c||(w=bf(i,d),w!=null&&f.push(Ef(i,w,u)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var VR=/\r\n?/g,NR=/\u0000|\uFFFD/g;function a2(e){return(typeof e=="string"?e:""+e).replace(VR,`
`).replace(NR,"")}function Tm(e,t,i){if(t=a2(t),a2(e)!==t&&i)throw Error(He(425))}function _g(){}var M0=null,A0=null;function z0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var D0=typeof setTimeout=="function"?setTimeout:void 0,jR=typeof clearTimeout=="function"?clearTimeout:void 0,l2=typeof Promise=="function"?Promise:void 0,$R=typeof queueMicrotask=="function"?queueMicrotask:typeof l2<"u"?function(e){return l2.resolve(null).then(e).catch(UR)}:D0;function UR(e){setTimeout(function(){throw e})}function Ev(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),Tf(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);Tf(t)}function Ya(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function u2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var yh=Math.random().toString(36).slice(2),fo="__reactFiber$"+yh,If="__reactProps$"+yh,Xo="__reactContainer$"+yh,R0="__reactEvents$"+yh,WR="__reactListeners$"+yh,qR="__reactHandles$"+yh;function Xl(e){var t=e[fo];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Xo]||i[fo]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=u2(e);e!==null;){if(i=e[fo])return i;e=u2(e)}return t}e=i,i=e.parentNode}return null}function Jf(e){return e=e[fo]||e[Xo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(He(33))}function Jg(e){return e[If]||null}var L0=[],Ac=-1;function ul(e){return{current:e}}function kn(e){0>Ac||(e.current=L0[Ac],L0[Ac]=null,Ac--)}function bn(e,t){Ac++,L0[Ac]=e.current,e.current=t}var rl={},ai=ul(rl),Bi=ul(!1),uu=rl;function eh(e,t){var i=e.type.contextTypes;if(!i)return rl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in i)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Vi(e){return e=e.childContextTypes,e!=null}function vg(){kn(Bi),kn(ai)}function c2(e,t,i){if(ai.current!==rl)throw Error(He(168));bn(ai,t),bn(Bi,i)}function gP(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(He(108,ID(e)||"Unknown",c));return Vn({},i,a)}function xg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rl,uu=ai.current,bn(ai,e),bn(Bi,Bi.current),!0}function h2(e,t,i){var a=e.stateNode;if(!a)throw Error(He(169));i?(e=gP(e,t,uu),a.__reactInternalMemoizedMergedChildContext=e,kn(Bi),kn(ai),bn(ai,e)):kn(Bi),bn(Bi,i)}var Uo=null,Qg=!1,Iv=!1;function yP(e){Uo===null?Uo=[e]:Uo.push(e)}function GR(e){Qg=!0,yP(e)}function cl(){if(!Iv&&Uo!==null){Iv=!0;var e=0,t=cn;try{var i=Uo;for(cn=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Uo=null,Qg=!1}catch(c){throw Uo!==null&&(Uo=Uo.slice(e+1)),$k(n1,cl),c}finally{cn=t,Iv=!1}}return null}var zc=[],Dc=0,bg=null,wg=0,ks=[],Ps=0,cu=null,qo=1,Go="";function Wl(e,t){zc[Dc++]=wg,zc[Dc++]=bg,bg=e,wg=t}function _P(e,t,i){ks[Ps++]=qo,ks[Ps++]=Go,ks[Ps++]=cu,cu=e;var a=qo;e=Go;var c=32-Xs(a)-1;a&=~(1<<c),i+=1;var d=32-Xs(t)+c;if(30<d){var f=c-c%5;d=(a&(1<<f)-1).toString(32),a>>=f,c-=f,qo=1<<32-Xs(t)+c|i<<c|a,Go=d+e}else qo=1<<d|i<<c|a,Go=e}function h1(e){e.return!==null&&(Wl(e,1),_P(e,1,0))}function d1(e){for(;e===bg;)bg=zc[--Dc],zc[Dc]=null,wg=zc[--Dc],zc[Dc]=null;for(;e===cu;)cu=ks[--Ps],ks[Ps]=null,Go=ks[--Ps],ks[Ps]=null,qo=ks[--Ps],ks[Ps]=null}var os=null,ss=null,zn=!1,Zs=null;function vP(e,t){var i=Is(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function d2(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,os=e,ss=Ya(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,os=e,ss=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=cu!==null?{id:qo,overflow:Go}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Is(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,os=e,ss=null,!0):!1;default:return!1}}function F0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function O0(e){if(zn){var t=ss;if(t){var i=t;if(!d2(e,t)){if(F0(e))throw Error(He(418));t=Ya(i.nextSibling);var a=os;t&&d2(e,t)?vP(a,i):(e.flags=e.flags&-4097|2,zn=!1,os=e)}}else{if(F0(e))throw Error(He(418));e.flags=e.flags&-4097|2,zn=!1,os=e}}}function f2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;os=e}function Cm(e){if(e!==os)return!1;if(!zn)return f2(e),zn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!z0(e.type,e.memoizedProps)),t&&(t=ss)){if(F0(e))throw xP(),Error(He(418));for(;t;)vP(e,t),t=Ya(t.nextSibling)}if(f2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(He(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ss=Ya(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ss=null}}else ss=os?Ya(e.stateNode.nextSibling):null;return!0}function xP(){for(var e=ss;e;)e=Ya(e.nextSibling)}function th(){ss=os=null,zn=!1}function f1(e){Zs===null?Zs=[e]:Zs.push(e)}var HR=ra.ReactCurrentBatchConfig;function Bd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(He(309));var a=i.stateNode}if(!a)throw Error(He(147,e));var c=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(f){var u=c.refs;f===null?delete u[d]:u[d]=f},t._stringRef=d,t)}if(typeof e!="string")throw Error(He(284));if(!i._owner)throw Error(He(290,e))}return e}function km(e,t){throw e=Object.prototype.toString.call(t),Error(He(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function p2(e){var t=e._init;return t(e._payload)}function bP(e){function t(j,W){if(e){var G=j.deletions;G===null?(j.deletions=[W],j.flags|=16):G.push(W)}}function i(j,W){if(!e)return null;for(;W!==null;)t(j,W),W=W.sibling;return null}function a(j,W){for(j=new Map;W!==null;)W.key!==null?j.set(W.key,W):j.set(W.index,W),W=W.sibling;return j}function c(j,W){return j=tl(j,W),j.index=0,j.sibling=null,j}function d(j,W,G){return j.index=G,e?(G=j.alternate,G!==null?(G=G.index,G<W?(j.flags|=2,W):G):(j.flags|=2,W)):(j.flags|=1048576,W)}function f(j){return e&&j.alternate===null&&(j.flags|=2),j}function u(j,W,G,ee){return W===null||W.tag!==6?(W=Fv(G,j.mode,ee),W.return=j,W):(W=c(W,G),W.return=j,W)}function w(j,W,G,ee){var de=G.type;return de===kc?I(j,W,G.props.children,ee,G.key):W!==null&&(W.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===$a&&p2(de)===W.type)?(ee=c(W,G.props),ee.ref=Bd(j,W,G),ee.return=j,ee):(ee=eg(G.type,G.key,G.props,null,j.mode,ee),ee.ref=Bd(j,W,G),ee.return=j,ee)}function k(j,W,G,ee){return W===null||W.tag!==4||W.stateNode.containerInfo!==G.containerInfo||W.stateNode.implementation!==G.implementation?(W=Ov(G,j.mode,ee),W.return=j,W):(W=c(W,G.children||[]),W.return=j,W)}function I(j,W,G,ee,de){return W===null||W.tag!==7?(W=iu(G,j.mode,ee,de),W.return=j,W):(W=c(W,G),W.return=j,W)}function A(j,W,G){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Fv(""+W,j.mode,G),W.return=j,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case mm:return G=eg(W.type,W.key,W.props,null,j.mode,G),G.ref=Bd(j,null,W),G.return=j,G;case Cc:return W=Ov(W,j.mode,G),W.return=j,W;case $a:var ee=W._init;return A(j,ee(W._payload),G)}if(Zd(W)||Dd(W))return W=iu(W,j.mode,G,null),W.return=j,W;km(j,W)}return null}function M(j,W,G,ee){var de=W!==null?W.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return de!==null?null:u(j,W,""+G,ee);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case mm:return G.key===de?w(j,W,G,ee):null;case Cc:return G.key===de?k(j,W,G,ee):null;case $a:return de=G._init,M(j,W,de(G._payload),ee)}if(Zd(G)||Dd(G))return de!==null?null:I(j,W,G,ee,null);km(j,G)}return null}function $(j,W,G,ee,de){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return j=j.get(G)||null,u(W,j,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case mm:return j=j.get(ee.key===null?G:ee.key)||null,w(W,j,ee,de);case Cc:return j=j.get(ee.key===null?G:ee.key)||null,k(W,j,ee,de);case $a:var he=ee._init;return $(j,W,G,he(ee._payload),de)}if(Zd(ee)||Dd(ee))return j=j.get(G)||null,I(W,j,ee,de,null);km(W,ee)}return null}function H(j,W,G,ee){for(var de=null,he=null,ye=W,Ce=W=0,Me=null;ye!==null&&Ce<G.length;Ce++){ye.index>Ce?(Me=ye,ye=null):Me=ye.sibling;var ze=M(j,ye,G[Ce],ee);if(ze===null){ye===null&&(ye=Me);break}e&&ye&&ze.alternate===null&&t(j,ye),W=d(ze,W,Ce),he===null?de=ze:he.sibling=ze,he=ze,ye=Me}if(Ce===G.length)return i(j,ye),zn&&Wl(j,Ce),de;if(ye===null){for(;Ce<G.length;Ce++)ye=A(j,G[Ce],ee),ye!==null&&(W=d(ye,W,Ce),he===null?de=ye:he.sibling=ye,he=ye);return zn&&Wl(j,Ce),de}for(ye=a(j,ye);Ce<G.length;Ce++)Me=$(ye,j,Ce,G[Ce],ee),Me!==null&&(e&&Me.alternate!==null&&ye.delete(Me.key===null?Ce:Me.key),W=d(Me,W,Ce),he===null?de=Me:he.sibling=Me,he=Me);return e&&ye.forEach(function(Re){return t(j,Re)}),zn&&Wl(j,Ce),de}function Y(j,W,G,ee){var de=Dd(G);if(typeof de!="function")throw Error(He(150));if(G=de.call(G),G==null)throw Error(He(151));for(var he=de=null,ye=W,Ce=W=0,Me=null,ze=G.next();ye!==null&&!ze.done;Ce++,ze=G.next()){ye.index>Ce?(Me=ye,ye=null):Me=ye.sibling;var Re=M(j,ye,ze.value,ee);if(Re===null){ye===null&&(ye=Me);break}e&&ye&&Re.alternate===null&&t(j,ye),W=d(Re,W,Ce),he===null?de=Re:he.sibling=Re,he=Re,ye=Me}if(ze.done)return i(j,ye),zn&&Wl(j,Ce),de;if(ye===null){for(;!ze.done;Ce++,ze=G.next())ze=A(j,ze.value,ee),ze!==null&&(W=d(ze,W,Ce),he===null?de=ze:he.sibling=ze,he=ze);return zn&&Wl(j,Ce),de}for(ye=a(j,ye);!ze.done;Ce++,ze=G.next())ze=$(ye,j,Ce,ze.value,ee),ze!==null&&(e&&ze.alternate!==null&&ye.delete(ze.key===null?Ce:ze.key),W=d(ze,W,Ce),he===null?de=ze:he.sibling=ze,he=ze);return e&&ye.forEach(function(te){return t(j,te)}),zn&&Wl(j,Ce),de}function ae(j,W,G,ee){if(typeof G=="object"&&G!==null&&G.type===kc&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case mm:e:{for(var de=G.key,he=W;he!==null;){if(he.key===de){if(de=G.type,de===kc){if(he.tag===7){i(j,he.sibling),W=c(he,G.props.children),W.return=j,j=W;break e}}else if(he.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===$a&&p2(de)===he.type){i(j,he.sibling),W=c(he,G.props),W.ref=Bd(j,he,G),W.return=j,j=W;break e}i(j,he);break}else t(j,he);he=he.sibling}G.type===kc?(W=iu(G.props.children,j.mode,ee,G.key),W.return=j,j=W):(ee=eg(G.type,G.key,G.props,null,j.mode,ee),ee.ref=Bd(j,W,G),ee.return=j,j=ee)}return f(j);case Cc:e:{for(he=G.key;W!==null;){if(W.key===he)if(W.tag===4&&W.stateNode.containerInfo===G.containerInfo&&W.stateNode.implementation===G.implementation){i(j,W.sibling),W=c(W,G.children||[]),W.return=j,j=W;break e}else{i(j,W);break}else t(j,W);W=W.sibling}W=Ov(G,j.mode,ee),W.return=j,j=W}return f(j);case $a:return he=G._init,ae(j,W,he(G._payload),ee)}if(Zd(G))return H(j,W,G,ee);if(Dd(G))return Y(j,W,G,ee);km(j,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,W!==null&&W.tag===6?(i(j,W.sibling),W=c(W,G),W.return=j,j=W):(i(j,W),W=Fv(G,j.mode,ee),W.return=j,j=W),f(j)):i(j,W)}return ae}var nh=bP(!0),wP=bP(!1),Sg=ul(null),Tg=null,Rc=null,p1=null;function m1(){p1=Rc=Tg=null}function g1(e){var t=Sg.current;kn(Sg),e._currentValue=t}function B0(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function Hc(e,t){Tg=e,p1=Rc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fi=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(p1!==e)if(e={context:e,memoizedValue:t,next:null},Rc===null){if(Tg===null)throw Error(He(308));Rc=e,Tg.dependencies={lanes:0,firstContext:e}}else Rc=Rc.next=e;return t}var Kl=null;function y1(e){Kl===null?Kl=[e]:Kl.push(e)}function SP(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,y1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Ko(e,a)}function Ko(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Ua=!1;function _1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ho(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ja(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Ht&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Ko(e,i)}return c=a.interleaved,c===null?(t.next=t,y1(a)):(t.next=c.next,c.next=t),a.interleaved=t,Ko(e,i)}function Zm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,r1(e,i)}}function m2(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var f={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?c=d=f:d=d.next=f,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Cg(e,t,i,a){var c=e.updateQueue;Ua=!1;var d=c.firstBaseUpdate,f=c.lastBaseUpdate,u=c.shared.pending;if(u!==null){c.shared.pending=null;var w=u,k=w.next;w.next=null,f===null?d=k:f.next=k,f=w;var I=e.alternate;I!==null&&(I=I.updateQueue,u=I.lastBaseUpdate,u!==f&&(u===null?I.firstBaseUpdate=k:u.next=k,I.lastBaseUpdate=w))}if(d!==null){var A=c.baseState;f=0,I=k=w=null,u=d;do{var M=u.lane,$=u.eventTime;if((a&M)===M){I!==null&&(I=I.next={eventTime:$,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var H=e,Y=u;switch(M=t,$=i,Y.tag){case 1:if(H=Y.payload,typeof H=="function"){A=H.call($,A,M);break e}A=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=Y.payload,M=typeof H=="function"?H.call($,A,M):H,M==null)break e;A=Vn({},A,M);break e;case 2:Ua=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,M=c.effects,M===null?c.effects=[u]:M.push(u))}else $={eventTime:$,lane:M,tag:u.tag,payload:u.payload,callback:u.callback,next:null},I===null?(k=I=$,w=A):I=I.next=$,f|=M;if(u=u.next,u===null){if(u=c.shared.pending,u===null)break;M=u,u=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(!0);if(I===null&&(w=A),c.baseState=w,c.firstBaseUpdate=k,c.lastBaseUpdate=I,t=c.shared.interleaved,t!==null){c=t;do f|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);du|=f,e.lanes=f,e.memoizedState=A}}function g2(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(He(191,c));c.call(a)}}}var Qf={},go=ul(Qf),Mf=ul(Qf),Af=ul(Qf);function Yl(e){if(e===Qf)throw Error(He(174));return e}function v1(e,t){switch(bn(Af,t),bn(Mf,e),bn(go,Qf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_0(t,e)}kn(go),bn(go,t)}function rh(){kn(go),kn(Mf),kn(Af)}function CP(e){Yl(Af.current);var t=Yl(go.current),i=_0(t,e.type);t!==i&&(bn(Mf,e),bn(go,i))}function x1(e){Mf.current===e&&(kn(go),kn(Mf))}var Fn=ul(0);function kg(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mv=[];function b1(){for(var e=0;e<Mv.length;e++)Mv[e]._workInProgressVersionPrimary=null;Mv.length=0}var Xm=ra.ReactCurrentDispatcher,Av=ra.ReactCurrentBatchConfig,hu=0,Bn=null,gr=null,Er=null,Pg=!1,af=!1,zf=0,ZR=0;function ni(){throw Error(He(321))}function w1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ys(e[i],t[i]))return!1;return!0}function S1(e,t,i,a,c,d){if(hu=d,Bn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xm.current=e===null||e.memoizedState===null?JR:QR,e=i(a,c),af){d=0;do{if(af=!1,zf=0,25<=d)throw Error(He(301));d+=1,Er=gr=null,t.updateQueue=null,Xm.current=eL,e=i(a,c)}while(af)}if(Xm.current=Eg,t=gr!==null&&gr.next!==null,hu=0,Er=gr=Bn=null,Pg=!1,t)throw Error(He(300));return e}function T1(){var e=zf!==0;return zf=0,e}function lo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Bn.memoizedState=Er=e:Er=Er.next=e,Er}function Rs(){if(gr===null){var e=Bn.alternate;e=e!==null?e.memoizedState:null}else e=gr.next;var t=Er===null?Bn.memoizedState:Er.next;if(t!==null)Er=t,gr=e;else{if(e===null)throw Error(He(310));gr=e,e={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Er===null?Bn.memoizedState=Er=e:Er=Er.next=e}return Er}function Df(e,t){return typeof t=="function"?t(e):t}function zv(e){var t=Rs(),i=t.queue;if(i===null)throw Error(He(311));i.lastRenderedReducer=e;var a=gr,c=a.baseQueue,d=i.pending;if(d!==null){if(c!==null){var f=c.next;c.next=d.next,d.next=f}a.baseQueue=c=d,i.pending=null}if(c!==null){d=c.next,a=a.baseState;var u=f=null,w=null,k=d;do{var I=k.lane;if((hu&I)===I)w!==null&&(w=w.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),a=k.hasEagerState?k.eagerState:e(a,k.action);else{var A={lane:I,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};w===null?(u=w=A,f=a):w=w.next=A,Bn.lanes|=I,du|=I}k=k.next}while(k!==null&&k!==d);w===null?f=a:w.next=u,Ys(a,t.memoizedState)||(Fi=!0),t.memoizedState=a,t.baseState=f,t.baseQueue=w,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do d=c.lane,Bn.lanes|=d,du|=d,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Dv(e){var t=Rs(),i=t.queue;if(i===null)throw Error(He(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var f=c=c.next;do d=e(d,f.action),f=f.next;while(f!==c);Ys(d,t.memoizedState)||(Fi=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,a]}function kP(){}function PP(e,t){var i=Bn,a=Rs(),c=t(),d=!Ys(a.memoizedState,c);if(d&&(a.memoizedState=c,Fi=!0),a=a.queue,C1(MP.bind(null,i,a,e),[e]),a.getSnapshot!==t||d||Er!==null&&Er.memoizedState.tag&1){if(i.flags|=2048,Rf(9,IP.bind(null,i,a,c,t),void 0,null),Mr===null)throw Error(He(349));hu&30||EP(i,t,c)}return c}function EP(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function IP(e,t,i,a){t.value=i,t.getSnapshot=a,AP(t)&&zP(e)}function MP(e,t,i){return i(function(){AP(t)&&zP(e)})}function AP(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ys(e,i)}catch{return!0}}function zP(e){var t=Ko(e,1);t!==null&&Ks(t,e,1,-1)}function y2(e){var t=lo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Df,lastRenderedState:e},t.queue=e,e=e.dispatch=YR.bind(null,Bn,e),[t.memoizedState,e]}function Rf(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function DP(){return Rs().memoizedState}function Km(e,t,i,a){var c=lo();Bn.flags|=e,c.memoizedState=Rf(1|t,i,void 0,a===void 0?null:a)}function ey(e,t,i,a){var c=Rs();a=a===void 0?null:a;var d=void 0;if(gr!==null){var f=gr.memoizedState;if(d=f.destroy,a!==null&&w1(a,f.deps)){c.memoizedState=Rf(t,i,d,a);return}}Bn.flags|=e,c.memoizedState=Rf(1|t,i,d,a)}function _2(e,t){return Km(8390656,8,e,t)}function C1(e,t){return ey(2048,8,e,t)}function RP(e,t){return ey(4,2,e,t)}function LP(e,t){return ey(4,4,e,t)}function FP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function OP(e,t,i){return i=i!=null?i.concat([e]):null,ey(4,4,FP.bind(null,t,e),i)}function k1(){}function BP(e,t){var i=Rs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&w1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function VP(e,t){var i=Rs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&w1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function NP(e,t,i){return hu&21?(Ys(i,t)||(i=qk(),Bn.lanes|=i,du|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fi=!0),e.memoizedState=i)}function XR(e,t){var i=cn;cn=i!==0&&4>i?i:4,e(!0);var a=Av.transition;Av.transition={};try{e(!1),t()}finally{cn=i,Av.transition=a}}function jP(){return Rs().memoizedState}function KR(e,t,i){var a=el(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},$P(e))UP(t,i);else if(i=SP(e,t,i,a),i!==null){var c=xi();Ks(i,e,a,c),WP(i,t,a)}}function YR(e,t,i){var a=el(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if($P(e))UP(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var f=t.lastRenderedState,u=d(f,i);if(c.hasEagerState=!0,c.eagerState=u,Ys(u,f)){var w=t.interleaved;w===null?(c.next=c,y1(t)):(c.next=w.next,w.next=c),t.interleaved=c;return}}catch{}finally{}i=SP(e,t,c,a),i!==null&&(c=xi(),Ks(i,e,a,c),WP(i,t,a))}}function $P(e){var t=e.alternate;return e===Bn||t!==null&&t===Bn}function UP(e,t){af=Pg=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function WP(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,r1(e,i)}}var Eg={readContext:Ds,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useInsertionEffect:ni,useLayoutEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useMutableSource:ni,useSyncExternalStore:ni,useId:ni,unstable_isNewReconciler:!1},JR={readContext:Ds,useCallback:function(e,t){return lo().memoizedState=[e,t===void 0?null:t],e},useContext:Ds,useEffect:_2,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Km(4194308,4,FP.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Km(4194308,4,e,t)},useInsertionEffect:function(e,t){return Km(4,2,e,t)},useMemo:function(e,t){var i=lo();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=lo();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=KR.bind(null,Bn,e),[a.memoizedState,e]},useRef:function(e){var t=lo();return e={current:e},t.memoizedState=e},useState:y2,useDebugValue:k1,useDeferredValue:function(e){return lo().memoizedState=e},useTransition:function(){var e=y2(!1),t=e[0];return e=XR.bind(null,e[1]),lo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Bn,c=lo();if(zn){if(i===void 0)throw Error(He(407));i=i()}else{if(i=t(),Mr===null)throw Error(He(349));hu&30||EP(a,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,_2(MP.bind(null,a,d,e),[e]),a.flags|=2048,Rf(9,IP.bind(null,a,d,i,t),void 0,null),i},useId:function(){var e=lo(),t=Mr.identifierPrefix;if(zn){var i=Go,a=qo;i=(a&~(1<<32-Xs(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=zf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=ZR++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},QR={readContext:Ds,useCallback:BP,useContext:Ds,useEffect:C1,useImperativeHandle:OP,useInsertionEffect:RP,useLayoutEffect:LP,useMemo:VP,useReducer:zv,useRef:DP,useState:function(){return zv(Df)},useDebugValue:k1,useDeferredValue:function(e){var t=Rs();return NP(t,gr.memoizedState,e)},useTransition:function(){var e=zv(Df)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:kP,useSyncExternalStore:PP,useId:jP,unstable_isNewReconciler:!1},eL={readContext:Ds,useCallback:BP,useContext:Ds,useEffect:C1,useImperativeHandle:OP,useInsertionEffect:RP,useLayoutEffect:LP,useMemo:VP,useReducer:Dv,useRef:DP,useState:function(){return Dv(Df)},useDebugValue:k1,useDeferredValue:function(e){var t=Rs();return gr===null?t.memoizedState=e:NP(t,gr.memoizedState,e)},useTransition:function(){var e=Dv(Df)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:kP,useSyncExternalStore:PP,useId:jP,unstable_isNewReconciler:!1};function Gs(e,t){if(e&&e.defaultProps){t=Vn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function V0(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Vn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ty={isMounted:function(e){return(e=e._reactInternals)?yu(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=xi(),c=el(e),d=Ho(a,c);d.payload=t,i!=null&&(d.callback=i),t=Ja(e,d,c),t!==null&&(Ks(t,e,c,a),Zm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=xi(),c=el(e),d=Ho(a,c);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=Ja(e,d,c),t!==null&&(Ks(t,e,c,a),Zm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=xi(),a=el(e),c=Ho(i,a);c.tag=2,t!=null&&(c.callback=t),t=Ja(e,c,a),t!==null&&(Ks(t,e,a,i),Zm(t,e,a))}};function v2(e,t,i,a,c,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,f):t.prototype&&t.prototype.isPureReactComponent?!kf(i,a)||!kf(c,d):!0}function qP(e,t,i){var a=!1,c=rl,d=t.contextType;return typeof d=="object"&&d!==null?d=Ds(d):(c=Vi(t)?uu:ai.current,a=t.contextTypes,d=(a=a!=null)?eh(e,c):rl),t=new t(i,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ty,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function x2(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&ty.enqueueReplaceState(t,t.state,null)}function N0(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs={},_1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=Ds(d):(d=Vi(t)?uu:ai.current,c.context=eh(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(V0(e,t,d,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&ty.enqueueReplaceState(c,c.state,null),Cg(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function ih(e,t){try{var i="",a=t;do i+=ED(a),a=a.return;while(a);var c=i}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function Rv(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function j0(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var tL=typeof WeakMap=="function"?WeakMap:Map;function GP(e,t,i){i=Ho(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Mg||(Mg=!0,Y0=a),j0(e,t)},i}function HP(e,t,i){i=Ho(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){j0(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){j0(e,t),typeof a!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),i}function b2(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new tL;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=mL.bind(null,e,t,i),t.then(e,e))}function w2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function S2(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ho(-1,1),t.tag=2,Ja(i,t,1))),i.lanes|=1),e)}var nL=ra.ReactCurrentOwner,Fi=!1;function _i(e,t,i,a){t.child=e===null?wP(t,null,i,a):nh(t,e.child,i,a)}function T2(e,t,i,a,c){i=i.render;var d=t.ref;return Hc(t,c),a=S1(e,t,i,a,d,c),i=T1(),e!==null&&!Fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Yo(e,t,c)):(zn&&i&&h1(t),t.flags|=1,_i(e,t,a,c),t.child)}function C2(e,t,i,a,c){if(e===null){var d=i.type;return typeof d=="function"&&!R1(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=d,ZP(e,t,d,a,c)):(e=eg(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var f=d.memoizedProps;if(i=i.compare,i=i!==null?i:kf,i(f,a)&&e.ref===t.ref)return Yo(e,t,c)}return t.flags|=1,e=tl(d,a),e.ref=t.ref,e.return=t,t.child=e}function ZP(e,t,i,a,c){if(e!==null){var d=e.memoizedProps;if(kf(d,a)&&e.ref===t.ref)if(Fi=!1,t.pendingProps=a=d,(e.lanes&c)!==0)e.flags&131072&&(Fi=!0);else return t.lanes=e.lanes,Yo(e,t,c)}return $0(e,t,i,a,c)}function XP(e,t,i){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn(Fc,rs),rs|=i;else{if(!(i&1073741824))return e=d!==null?d.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bn(Fc,rs),rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:i,bn(Fc,rs),rs|=a}else d!==null?(a=d.baseLanes|i,t.memoizedState=null):a=i,bn(Fc,rs),rs|=a;return _i(e,t,c,i),t.child}function KP(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function $0(e,t,i,a,c){var d=Vi(i)?uu:ai.current;return d=eh(t,d),Hc(t,c),i=S1(e,t,i,a,d,c),a=T1(),e!==null&&!Fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Yo(e,t,c)):(zn&&a&&h1(t),t.flags|=1,_i(e,t,i,c),t.child)}function k2(e,t,i,a,c){if(Vi(i)){var d=!0;xg(t)}else d=!1;if(Hc(t,c),t.stateNode===null)Ym(e,t),qP(t,i,a),N0(t,i,a,c),a=!0;else if(e===null){var f=t.stateNode,u=t.memoizedProps;f.props=u;var w=f.context,k=i.contextType;typeof k=="object"&&k!==null?k=Ds(k):(k=Vi(i)?uu:ai.current,k=eh(t,k));var I=i.getDerivedStateFromProps,A=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function";A||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==a||w!==k)&&x2(t,f,a,k),Ua=!1;var M=t.memoizedState;f.state=M,Cg(t,a,f,c),w=t.memoizedState,u!==a||M!==w||Bi.current||Ua?(typeof I=="function"&&(V0(t,i,I,a),w=t.memoizedState),(u=Ua||v2(t,i,u,a,M,w,k))?(A||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),f.props=a,f.state=w,f.context=k,a=u):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,TP(e,t),u=t.memoizedProps,k=t.type===t.elementType?u:Gs(t.type,u),f.props=k,A=t.pendingProps,M=f.context,w=i.contextType,typeof w=="object"&&w!==null?w=Ds(w):(w=Vi(i)?uu:ai.current,w=eh(t,w));var $=i.getDerivedStateFromProps;(I=typeof $=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==A||M!==w)&&x2(t,f,a,w),Ua=!1,M=t.memoizedState,f.state=M,Cg(t,a,f,c);var H=t.memoizedState;u!==A||M!==H||Bi.current||Ua?(typeof $=="function"&&(V0(t,i,$,a),H=t.memoizedState),(k=Ua||v2(t,i,k,a,M,H,w)||!1)?(I||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,H,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,H,w)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=H),f.props=a,f.state=H,f.context=w,a=k):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),a=!1)}return U0(e,t,i,a,d,c)}function U0(e,t,i,a,c,d){KP(e,t);var f=(t.flags&128)!==0;if(!a&&!f)return c&&h2(t,i,!1),Yo(e,t,d);a=t.stateNode,nL.current=t;var u=f&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&f?(t.child=nh(t,e.child,null,d),t.child=nh(t,null,u,d)):_i(e,t,u,d),t.memoizedState=a.state,c&&h2(t,i,!0),t.child}function YP(e){var t=e.stateNode;t.pendingContext?c2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&c2(e,t.context,!1),v1(e,t.containerInfo)}function P2(e,t,i,a,c){return th(),f1(c),t.flags|=256,_i(e,t,i,a),t.child}var W0={dehydrated:null,treeContext:null,retryLane:0};function q0(e){return{baseLanes:e,cachePool:null,transitions:null}}function JP(e,t,i){var a=t.pendingProps,c=Fn.current,d=!1,f=(t.flags&128)!==0,u;if((u=f)||(u=e!==null&&e.memoizedState===null?!1:(c&2)!==0),u?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),bn(Fn,c&1),e===null)return O0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=a.children,e=a.fallback,d?(a=t.mode,d=t.child,f={mode:"hidden",children:f},!(a&1)&&d!==null?(d.childLanes=0,d.pendingProps=f):d=iy(f,a,0,null),e=iu(e,a,i,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=q0(i),t.memoizedState=W0,e):P1(t,f));if(c=e.memoizedState,c!==null&&(u=c.dehydrated,u!==null))return rL(e,t,f,a,u,c,i);if(d){d=a.fallback,f=t.mode,c=e.child,u=c.sibling;var w={mode:"hidden",children:a.children};return!(f&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=w,t.deletions=null):(a=tl(c,w),a.subtreeFlags=c.subtreeFlags&14680064),u!==null?d=tl(u,d):(d=iu(d,f,i,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,f=e.child.memoizedState,f=f===null?q0(i):{baseLanes:f.baseLanes|i,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~i,t.memoizedState=W0,a}return d=e.child,e=d.sibling,a=tl(d,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function P1(e,t){return t=iy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pm(e,t,i,a){return a!==null&&f1(a),nh(t,e.child,null,i),e=P1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rL(e,t,i,a,c,d,f){if(i)return t.flags&256?(t.flags&=-257,a=Rv(Error(He(422))),Pm(e,t,f,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,c=t.mode,a=iy({mode:"visible",children:a.children},c,0,null),d=iu(d,c,f,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,t.mode&1&&nh(t,e.child,null,f),t.child.memoizedState=q0(f),t.memoizedState=W0,d);if(!(t.mode&1))return Pm(e,t,f,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var u=a.dgst;return a=u,d=Error(He(419)),a=Rv(d,a,void 0),Pm(e,t,f,a)}if(u=(f&e.childLanes)!==0,Fi||u){if(a=Mr,a!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|f)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Ko(e,c),Ks(a,e,c,-1))}return D1(),a=Rv(Error(He(421))),Pm(e,t,f,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=gL.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,ss=Ya(c.nextSibling),os=t,zn=!0,Zs=null,e!==null&&(ks[Ps++]=qo,ks[Ps++]=Go,ks[Ps++]=cu,qo=e.id,Go=e.overflow,cu=t),t=P1(t,a.children),t.flags|=4096,t)}function E2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),B0(e.return,t,i)}function Lv(e,t,i,a,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=c)}function QP(e,t,i){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(_i(e,t,a.children,i),a=Fn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&E2(e,i,t);else if(e.tag===19)E2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(bn(Fn,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&kg(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Lv(t,!1,c,i,d);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&kg(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Lv(t,!0,i,null,d);break;case"together":Lv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ym(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yo(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),du|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(He(153));if(t.child!==null){for(e=t.child,i=tl(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=tl(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function iL(e,t,i){switch(t.tag){case 3:YP(t),th();break;case 5:CP(t);break;case 1:Vi(t.type)&&xg(t);break;case 4:v1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;bn(Sg,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(bn(Fn,Fn.current&1),t.flags|=128,null):i&t.child.childLanes?JP(e,t,i):(bn(Fn,Fn.current&1),e=Yo(e,t,i),e!==null?e.sibling:null);bn(Fn,Fn.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return QP(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),bn(Fn,Fn.current),a)break;return null;case 22:case 23:return t.lanes=0,XP(e,t,i)}return Yo(e,t,i)}var eE,G0,tE,nE;eE=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};G0=function(){};tE=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Yl(go.current);var d=null;switch(i){case"input":c=p0(e,c),a=p0(e,a),d=[];break;case"select":c=Vn({},c,{value:void 0}),a=Vn({},a,{value:void 0}),d=[];break;case"textarea":c=y0(e,c),a=y0(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=_g)}v0(i,a);var f;i=null;for(k in c)if(!a.hasOwnProperty(k)&&c.hasOwnProperty(k)&&c[k]!=null)if(k==="style"){var u=c[k];for(f in u)u.hasOwnProperty(f)&&(i||(i={}),i[f]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(vf.hasOwnProperty(k)?d||(d=[]):(d=d||[]).push(k,null));for(k in a){var w=a[k];if(u=c!=null?c[k]:void 0,a.hasOwnProperty(k)&&w!==u&&(w!=null||u!=null))if(k==="style")if(u){for(f in u)!u.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(i||(i={}),i[f]="");for(f in w)w.hasOwnProperty(f)&&u[f]!==w[f]&&(i||(i={}),i[f]=w[f])}else i||(d||(d=[]),d.push(k,i)),i=w;else k==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,u=u?u.__html:void 0,w!=null&&u!==w&&(d=d||[]).push(k,w)):k==="children"?typeof w!="string"&&typeof w!="number"||(d=d||[]).push(k,""+w):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(vf.hasOwnProperty(k)?(w!=null&&k==="onScroll"&&Cn("scroll",e),d||u===w||(d=[])):(d=d||[]).push(k,w))}i&&(d=d||[]).push("style",i);var k=d;(t.updateQueue=k)&&(t.flags|=4)}};nE=function(e,t,i,a){i!==a&&(t.flags|=4)};function Vd(e,t){if(!zn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ri(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function sL(e,t,i){var a=t.pendingProps;switch(d1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(t),null;case 1:return Vi(t.type)&&vg(),ri(t),null;case 3:return a=t.stateNode,rh(),kn(Bi),kn(ai),b1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Cm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zs!==null&&(ex(Zs),Zs=null))),G0(e,t),ri(t),null;case 5:x1(t);var c=Yl(Af.current);if(i=t.type,e!==null&&t.stateNode!=null)tE(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(He(166));return ri(t),null}if(e=Yl(go.current),Cm(t)){a=t.stateNode,i=t.type;var d=t.memoizedProps;switch(a[fo]=t,a[If]=d,e=(t.mode&1)!==0,i){case"dialog":Cn("cancel",a),Cn("close",a);break;case"iframe":case"object":case"embed":Cn("load",a);break;case"video":case"audio":for(c=0;c<Kd.length;c++)Cn(Kd[c],a);break;case"source":Cn("error",a);break;case"img":case"image":case"link":Cn("error",a),Cn("load",a);break;case"details":Cn("toggle",a);break;case"input":OS(a,d),Cn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},Cn("invalid",a);break;case"textarea":VS(a,d),Cn("invalid",a)}v0(i,d),c=null;for(var f in d)if(d.hasOwnProperty(f)){var u=d[f];f==="children"?typeof u=="string"?a.textContent!==u&&(d.suppressHydrationWarning!==!0&&Tm(a.textContent,u,e),c=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(d.suppressHydrationWarning!==!0&&Tm(a.textContent,u,e),c=["children",""+u]):vf.hasOwnProperty(f)&&u!=null&&f==="onScroll"&&Cn("scroll",a)}switch(i){case"input":gm(a),BS(a,d,!0);break;case"textarea":gm(a),NS(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=_g)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mk(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=f.createElement(i,{is:a.is}):(e=f.createElement(i),i==="select"&&(f=e,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):e=f.createElementNS(e,i),e[fo]=t,e[If]=a,eE(e,t,!1,!1),t.stateNode=e;e:{switch(f=x0(i,a),i){case"dialog":Cn("cancel",e),Cn("close",e),c=a;break;case"iframe":case"object":case"embed":Cn("load",e),c=a;break;case"video":case"audio":for(c=0;c<Kd.length;c++)Cn(Kd[c],e);c=a;break;case"source":Cn("error",e),c=a;break;case"img":case"image":case"link":Cn("error",e),Cn("load",e),c=a;break;case"details":Cn("toggle",e),c=a;break;case"input":OS(e,a),c=p0(e,a),Cn("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Vn({},a,{value:void 0}),Cn("invalid",e);break;case"textarea":VS(e,a),c=y0(e,a),Cn("invalid",e);break;default:c=a}v0(i,c),u=c;for(d in u)if(u.hasOwnProperty(d)){var w=u[d];d==="style"?Dk(e,w):d==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&Ak(e,w)):d==="children"?typeof w=="string"?(i!=="textarea"||w!=="")&&xf(e,w):typeof w=="number"&&xf(e,""+w):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vf.hasOwnProperty(d)?w!=null&&d==="onScroll"&&Cn("scroll",e):w!=null&&Yx(e,d,w,f))}switch(i){case"input":gm(e),BS(e,a,!1);break;case"textarea":gm(e),NS(e);break;case"option":a.value!=null&&e.setAttribute("value",""+nl(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?Uc(e,!!a.multiple,d,!1):a.defaultValue!=null&&Uc(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=_g)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ri(t),null;case 6:if(e&&t.stateNode!=null)nE(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(He(166));if(i=Yl(Af.current),Yl(go.current),Cm(t)){if(a=t.stateNode,i=t.memoizedProps,a[fo]=t,(d=a.nodeValue!==i)&&(e=os,e!==null))switch(e.tag){case 3:Tm(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tm(a.nodeValue,i,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[fo]=t,t.stateNode=a}return ri(t),null;case 13:if(kn(Fn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(zn&&ss!==null&&t.mode&1&&!(t.flags&128))xP(),th(),t.flags|=98560,d=!1;else if(d=Cm(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(He(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(He(317));d[fo]=t}else th(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ri(t),d=!1}else Zs!==null&&(ex(Zs),Zs=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Fn.current&1?yr===0&&(yr=3):D1())),t.updateQueue!==null&&(t.flags|=4),ri(t),null);case 4:return rh(),G0(e,t),e===null&&Pf(t.stateNode.containerInfo),ri(t),null;case 10:return g1(t.type._context),ri(t),null;case 17:return Vi(t.type)&&vg(),ri(t),null;case 19:if(kn(Fn),d=t.memoizedState,d===null)return ri(t),null;if(a=(t.flags&128)!==0,f=d.rendering,f===null)if(a)Vd(d,!1);else{if(yr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=kg(e),f!==null){for(t.flags|=128,Vd(d,!1),a=f.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)d=i,e=a,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return bn(Fn,Fn.current&1|2),t.child}e=e.sibling}d.tail!==null&&er()>sh&&(t.flags|=128,a=!0,Vd(d,!1),t.lanes=4194304)}else{if(!a)if(e=kg(f),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Vd(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!zn)return ri(t),null}else 2*er()-d.renderingStartTime>sh&&i!==1073741824&&(t.flags|=128,a=!0,Vd(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(i=d.last,i!==null?i.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=er(),t.sibling=null,i=Fn.current,bn(Fn,a?i&1|2:i&1),t):(ri(t),null);case 22:case 23:return z1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?rs&1073741824&&(ri(t),t.subtreeFlags&6&&(t.flags|=8192)):ri(t),null;case 24:return null;case 25:return null}throw Error(He(156,t.tag))}function oL(e,t){switch(d1(t),t.tag){case 1:return Vi(t.type)&&vg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rh(),kn(Bi),kn(ai),b1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return x1(t),null;case 13:if(kn(Fn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(He(340));th()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return kn(Fn),null;case 4:return rh(),null;case 10:return g1(t.type._context),null;case 22:case 23:return z1(),null;case 24:return null;default:return null}}var Em=!1,si=!1,aL=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Lc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Kn(e,t,a)}else i.current=null}function H0(e,t,i){try{i()}catch(a){Kn(e,t,a)}}var I2=!1;function lL(e,t){if(M0=mg,e=aP(),c1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var f=0,u=-1,w=-1,k=0,I=0,A=e,M=null;t:for(;;){for(var $;A!==i||c!==0&&A.nodeType!==3||(u=f+c),A!==d||a!==0&&A.nodeType!==3||(w=f+a),A.nodeType===3&&(f+=A.nodeValue.length),($=A.firstChild)!==null;)M=A,A=$;for(;;){if(A===e)break t;if(M===i&&++k===c&&(u=f),M===d&&++I===a&&(w=f),($=A.nextSibling)!==null)break;A=M,M=A.parentNode}A=$}i=u===-1||w===-1?null:{start:u,end:w}}else i=null}i=i||{start:0,end:0}}else i=null;for(A0={focusedElem:e,selectionRange:i},mg=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){t=gt;try{var H=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var Y=H.memoizedProps,ae=H.memoizedState,j=t.stateNode,W=j.getSnapshotBeforeUpdate(t.elementType===t.type?Y:Gs(t.type,Y),ae);j.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(ee){Kn(t,t.return,ee)}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}return H=I2,I2=!1,H}function lf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&H0(t,i,d)}c=c.next}while(c!==a)}}function ny(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Z0(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function rE(e){var t=e.alternate;t!==null&&(e.alternate=null,rE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fo],delete t[If],delete t[R0],delete t[WR],delete t[qR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iE(e){return e.tag===5||e.tag===3||e.tag===4}function M2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function X0(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=_g));else if(a!==4&&(e=e.child,e!==null))for(X0(e,t,i),e=e.sibling;e!==null;)X0(e,t,i),e=e.sibling}function K0(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(K0(e,t,i),e=e.sibling;e!==null;)K0(e,t,i),e=e.sibling}var jr=null,Hs=!1;function Va(e,t,i){for(i=i.child;i!==null;)sE(e,t,i),i=i.sibling}function sE(e,t,i){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(Zg,i)}catch{}switch(i.tag){case 5:si||Lc(i,t);case 6:var a=jr,c=Hs;jr=null,Va(e,t,i),jr=a,Hs=c,jr!==null&&(Hs?(e=jr,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):jr.removeChild(i.stateNode));break;case 18:jr!==null&&(Hs?(e=jr,i=i.stateNode,e.nodeType===8?Ev(e.parentNode,i):e.nodeType===1&&Ev(e,i),Tf(e)):Ev(jr,i.stateNode));break;case 4:a=jr,c=Hs,jr=i.stateNode.containerInfo,Hs=!0,Va(e,t,i),jr=a,Hs=c;break;case 0:case 11:case 14:case 15:if(!si&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var d=c,f=d.destroy;d=d.tag,f!==void 0&&(d&2||d&4)&&H0(i,t,f),c=c.next}while(c!==a)}Va(e,t,i);break;case 1:if(!si&&(Lc(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(u){Kn(i,t,u)}Va(e,t,i);break;case 21:Va(e,t,i);break;case 22:i.mode&1?(si=(a=si)||i.memoizedState!==null,Va(e,t,i),si=a):Va(e,t,i);break;default:Va(e,t,i)}}function A2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new aL),t.forEach(function(a){var c=yL.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Ws(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var d=e,f=t,u=f;e:for(;u!==null;){switch(u.tag){case 5:jr=u.stateNode,Hs=!1;break e;case 3:jr=u.stateNode.containerInfo,Hs=!0;break e;case 4:jr=u.stateNode.containerInfo,Hs=!0;break e}u=u.return}if(jr===null)throw Error(He(160));sE(d,f,c),jr=null,Hs=!1;var w=c.alternate;w!==null&&(w.return=null),c.return=null}catch(k){Kn(c,t,k)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oE(t,e),t=t.sibling}function oE(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ws(t,e),oo(e),a&4){try{lf(3,e,e.return),ny(3,e)}catch(Y){Kn(e,e.return,Y)}try{lf(5,e,e.return)}catch(Y){Kn(e,e.return,Y)}}break;case 1:Ws(t,e),oo(e),a&512&&i!==null&&Lc(i,i.return);break;case 5:if(Ws(t,e),oo(e),a&512&&i!==null&&Lc(i,i.return),e.flags&32){var c=e.stateNode;try{xf(c,"")}catch(Y){Kn(e,e.return,Y)}}if(a&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,f=i!==null?i.memoizedProps:d,u=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{u==="input"&&d.type==="radio"&&d.name!=null&&Ek(c,d),x0(u,f);var k=x0(u,d);for(f=0;f<w.length;f+=2){var I=w[f],A=w[f+1];I==="style"?Dk(c,A):I==="dangerouslySetInnerHTML"?Ak(c,A):I==="children"?xf(c,A):Yx(c,I,A,k)}switch(u){case"input":m0(c,d);break;case"textarea":Ik(c,d);break;case"select":var M=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var $=d.value;$!=null?Uc(c,!!d.multiple,$,!1):M!==!!d.multiple&&(d.defaultValue!=null?Uc(c,!!d.multiple,d.defaultValue,!0):Uc(c,!!d.multiple,d.multiple?[]:"",!1))}c[If]=d}catch(Y){Kn(e,e.return,Y)}}break;case 6:if(Ws(t,e),oo(e),a&4){if(e.stateNode===null)throw Error(He(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(Y){Kn(e,e.return,Y)}}break;case 3:if(Ws(t,e),oo(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{Tf(t.containerInfo)}catch(Y){Kn(e,e.return,Y)}break;case 4:Ws(t,e),oo(e);break;case 13:Ws(t,e),oo(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(M1=er())),a&4&&A2(e);break;case 22:if(I=i!==null&&i.memoizedState!==null,e.mode&1?(si=(k=si)||I,Ws(t,e),si=k):Ws(t,e),oo(e),a&8192){if(k=e.memoizedState!==null,(e.stateNode.isHidden=k)&&!I&&e.mode&1)for(gt=e,I=e.child;I!==null;){for(A=gt=I;gt!==null;){switch(M=gt,$=M.child,M.tag){case 0:case 11:case 14:case 15:lf(4,M,M.return);break;case 1:Lc(M,M.return);var H=M.stateNode;if(typeof H.componentWillUnmount=="function"){a=M,i=M.return;try{t=a,H.props=t.memoizedProps,H.state=t.memoizedState,H.componentWillUnmount()}catch(Y){Kn(a,i,Y)}}break;case 5:Lc(M,M.return);break;case 22:if(M.memoizedState!==null){D2(A);continue}}$!==null?($.return=M,gt=$):D2(A)}I=I.sibling}e:for(I=null,A=e;;){if(A.tag===5){if(I===null){I=A;try{c=A.stateNode,k?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(u=A.stateNode,w=A.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,u.style.display=zk("display",f))}catch(Y){Kn(e,e.return,Y)}}}else if(A.tag===6){if(I===null)try{A.stateNode.nodeValue=k?"":A.memoizedProps}catch(Y){Kn(e,e.return,Y)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;I===A&&(I=null),A=A.return}I===A&&(I=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:Ws(t,e),oo(e),a&4&&A2(e);break;case 21:break;default:Ws(t,e),oo(e)}}function oo(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(iE(i)){var a=i;break e}i=i.return}throw Error(He(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(xf(c,""),a.flags&=-33);var d=M2(e);K0(e,d,c);break;case 3:case 4:var f=a.stateNode.containerInfo,u=M2(e);X0(e,u,f);break;default:throw Error(He(161))}}catch(w){Kn(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uL(e,t,i){gt=e,aE(e)}function aE(e,t,i){for(var a=(e.mode&1)!==0;gt!==null;){var c=gt,d=c.child;if(c.tag===22&&a){var f=c.memoizedState!==null||Em;if(!f){var u=c.alternate,w=u!==null&&u.memoizedState!==null||si;u=Em;var k=si;if(Em=f,(si=w)&&!k)for(gt=c;gt!==null;)f=gt,w=f.child,f.tag===22&&f.memoizedState!==null?R2(c):w!==null?(w.return=f,gt=w):R2(c);for(;d!==null;)gt=d,aE(d),d=d.sibling;gt=c,Em=u,si=k}z2(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,gt=d):z2(e)}}function z2(e){for(;gt!==null;){var t=gt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:si||ny(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!si)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Gs(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&g2(t,d,a);break;case 3:var f=t.updateQueue;if(f!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}g2(t,f,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&i.focus();break;case"img":w.src&&(i.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var k=t.alternate;if(k!==null){var I=k.memoizedState;if(I!==null){var A=I.dehydrated;A!==null&&Tf(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}si||t.flags&512&&Z0(t)}catch(M){Kn(t,t.return,M)}}if(t===e){gt=null;break}if(i=t.sibling,i!==null){i.return=t.return,gt=i;break}gt=t.return}}function D2(e){for(;gt!==null;){var t=gt;if(t===e){gt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,gt=i;break}gt=t.return}}function R2(e){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{ny(4,t)}catch(w){Kn(t,i,w)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(w){Kn(t,c,w)}}var d=t.return;try{Z0(t)}catch(w){Kn(t,d,w)}break;case 5:var f=t.return;try{Z0(t)}catch(w){Kn(t,f,w)}}}catch(w){Kn(t,t.return,w)}if(t===e){gt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,gt=u;break}gt=t.return}}var cL=Math.ceil,Ig=ra.ReactCurrentDispatcher,E1=ra.ReactCurrentOwner,Ms=ra.ReactCurrentBatchConfig,Ht=0,Mr=null,cr=null,Wr=0,rs=0,Fc=ul(0),yr=0,Lf=null,du=0,ry=0,I1=0,uf=null,Li=null,M1=0,sh=1/0,$o=null,Mg=!1,Y0=null,Qa=null,Im=!1,Ha=null,Ag=0,cf=0,J0=null,Jm=-1,Qm=0;function xi(){return Ht&6?er():Jm!==-1?Jm:Jm=er()}function el(e){return e.mode&1?Ht&2&&Wr!==0?Wr&-Wr:HR.transition!==null?(Qm===0&&(Qm=qk()),Qm):(e=cn,e!==0||(e=window.event,e=e===void 0?16:Jk(e.type)),e):1}function Ks(e,t,i,a){if(50<cf)throw cf=0,J0=null,Error(He(185));Kf(e,i,a),(!(Ht&2)||e!==Mr)&&(e===Mr&&(!(Ht&2)&&(ry|=i),yr===4&&qa(e,Wr)),Ni(e,a),i===1&&Ht===0&&!(t.mode&1)&&(sh=er()+500,Qg&&cl()))}function Ni(e,t){var i=e.callbackNode;HD(e,t);var a=pg(e,e===Mr?Wr:0);if(a===0)i!==null&&US(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&US(i),t===1)e.tag===0?GR(L2.bind(null,e)):yP(L2.bind(null,e)),$R(function(){!(Ht&6)&&cl()}),i=null;else{switch(Gk(a)){case 1:i=n1;break;case 4:i=Uk;break;case 16:i=fg;break;case 536870912:i=Wk;break;default:i=fg}i=mE(i,lE.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function lE(e,t){if(Jm=-1,Qm=0,Ht&6)throw Error(He(327));var i=e.callbackNode;if(Zc()&&e.callbackNode!==i)return null;var a=pg(e,e===Mr?Wr:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=zg(e,a);else{t=a;var c=Ht;Ht|=2;var d=cE();(Mr!==e||Wr!==t)&&($o=null,sh=er()+500,ru(e,t));do try{fL();break}catch(u){uE(e,u)}while(!0);m1(),Ig.current=d,Ht=c,cr!==null?t=0:(Mr=null,Wr=0,t=yr)}if(t!==0){if(t===2&&(c=C0(e),c!==0&&(a=c,t=Q0(e,c))),t===1)throw i=Lf,ru(e,0),qa(e,a),Ni(e,er()),i;if(t===6)qa(e,a);else{if(c=e.current.alternate,!(a&30)&&!hL(c)&&(t=zg(e,a),t===2&&(d=C0(e),d!==0&&(a=d,t=Q0(e,d))),t===1))throw i=Lf,ru(e,0),qa(e,a),Ni(e,er()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(He(345));case 2:ql(e,Li,$o);break;case 3:if(qa(e,a),(a&130023424)===a&&(t=M1+500-er(),10<t)){if(pg(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){xi(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=D0(ql.bind(null,e,Li,$o),t);break}ql(e,Li,$o);break;case 4:if(qa(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var f=31-Xs(a);d=1<<f,f=t[f],f>c&&(c=f),a&=~d}if(a=c,a=er()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*cL(a/1960))-a,10<a){e.timeoutHandle=D0(ql.bind(null,e,Li,$o),a);break}ql(e,Li,$o);break;case 5:ql(e,Li,$o);break;default:throw Error(He(329))}}}return Ni(e,er()),e.callbackNode===i?lE.bind(null,e):null}function Q0(e,t){var i=uf;return e.current.memoizedState.isDehydrated&&(ru(e,t).flags|=256),e=zg(e,t),e!==2&&(t=Li,Li=i,t!==null&&ex(t)),e}function ex(e){Li===null?Li=e:Li.push.apply(Li,e)}function hL(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],d=c.getSnapshot;c=c.value;try{if(!Ys(d(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qa(e,t){for(t&=~I1,t&=~ry,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Xs(t),a=1<<i;e[i]=-1,t&=~a}}function L2(e){if(Ht&6)throw Error(He(327));Zc();var t=pg(e,0);if(!(t&1))return Ni(e,er()),null;var i=zg(e,t);if(e.tag!==0&&i===2){var a=C0(e);a!==0&&(t=a,i=Q0(e,a))}if(i===1)throw i=Lf,ru(e,0),qa(e,t),Ni(e,er()),i;if(i===6)throw Error(He(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ql(e,Li,$o),Ni(e,er()),null}function A1(e,t){var i=Ht;Ht|=1;try{return e(t)}finally{Ht=i,Ht===0&&(sh=er()+500,Qg&&cl())}}function fu(e){Ha!==null&&Ha.tag===0&&!(Ht&6)&&Zc();var t=Ht;Ht|=1;var i=Ms.transition,a=cn;try{if(Ms.transition=null,cn=1,e)return e()}finally{cn=a,Ms.transition=i,Ht=t,!(Ht&6)&&cl()}}function z1(){rs=Fc.current,kn(Fc)}function ru(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,jR(i)),cr!==null)for(i=cr.return;i!==null;){var a=i;switch(d1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&vg();break;case 3:rh(),kn(Bi),kn(ai),b1();break;case 5:x1(a);break;case 4:rh();break;case 13:kn(Fn);break;case 19:kn(Fn);break;case 10:g1(a.type._context);break;case 22:case 23:z1()}i=i.return}if(Mr=e,cr=e=tl(e.current,null),Wr=rs=t,yr=0,Lf=null,I1=ry=du=0,Li=uf=null,Kl!==null){for(t=0;t<Kl.length;t++)if(i=Kl[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,d=i.pending;if(d!==null){var f=d.next;d.next=c,a.next=f}i.pending=a}Kl=null}return e}function uE(e,t){do{var i=cr;try{if(m1(),Xm.current=Eg,Pg){for(var a=Bn.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Pg=!1}if(hu=0,Er=gr=Bn=null,af=!1,zf=0,E1.current=null,i===null||i.return===null){yr=1,Lf=t,cr=null;break}e:{var d=e,f=i.return,u=i,w=t;if(t=Wr,u.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var k=w,I=u,A=I.tag;if(!(I.mode&1)&&(A===0||A===11||A===15)){var M=I.alternate;M?(I.updateQueue=M.updateQueue,I.memoizedState=M.memoizedState,I.lanes=M.lanes):(I.updateQueue=null,I.memoizedState=null)}var $=w2(f);if($!==null){$.flags&=-257,S2($,f,u,d,t),$.mode&1&&b2(d,k,t),t=$,w=k;var H=t.updateQueue;if(H===null){var Y=new Set;Y.add(w),t.updateQueue=Y}else H.add(w);break e}else{if(!(t&1)){b2(d,k,t),D1();break e}w=Error(He(426))}}else if(zn&&u.mode&1){var ae=w2(f);if(ae!==null){!(ae.flags&65536)&&(ae.flags|=256),S2(ae,f,u,d,t),f1(ih(w,u));break e}}d=w=ih(w,u),yr!==4&&(yr=2),uf===null?uf=[d]:uf.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var j=GP(d,w,t);m2(d,j);break e;case 1:u=w;var W=d.type,G=d.stateNode;if(!(d.flags&128)&&(typeof W.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Qa===null||!Qa.has(G)))){d.flags|=65536,t&=-t,d.lanes|=t;var ee=HP(d,u,t);m2(d,ee);break e}}d=d.return}while(d!==null)}dE(i)}catch(de){t=de,cr===i&&i!==null&&(cr=i=i.return);continue}break}while(!0)}function cE(){var e=Ig.current;return Ig.current=Eg,e===null?Eg:e}function D1(){(yr===0||yr===3||yr===2)&&(yr=4),Mr===null||!(du&268435455)&&!(ry&268435455)||qa(Mr,Wr)}function zg(e,t){var i=Ht;Ht|=2;var a=cE();(Mr!==e||Wr!==t)&&($o=null,ru(e,t));do try{dL();break}catch(c){uE(e,c)}while(!0);if(m1(),Ht=i,Ig.current=a,cr!==null)throw Error(He(261));return Mr=null,Wr=0,yr}function dL(){for(;cr!==null;)hE(cr)}function fL(){for(;cr!==null&&!BD();)hE(cr)}function hE(e){var t=pE(e.alternate,e,rs);e.memoizedProps=e.pendingProps,t===null?dE(e):cr=t,E1.current=null}function dE(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=oL(i,t),i!==null){i.flags&=32767,cr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yr=6,cr=null;return}}else if(i=sL(i,t,rs),i!==null){cr=i;return}if(t=t.sibling,t!==null){cr=t;return}cr=t=e}while(t!==null);yr===0&&(yr=5)}function ql(e,t,i){var a=cn,c=Ms.transition;try{Ms.transition=null,cn=1,pL(e,t,i,a)}finally{Ms.transition=c,cn=a}return null}function pL(e,t,i,a){do Zc();while(Ha!==null);if(Ht&6)throw Error(He(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(He(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(ZD(e,d),e===Mr&&(cr=Mr=null,Wr=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Im||(Im=!0,mE(fg,function(){return Zc(),null})),d=(i.flags&15990)!==0,i.subtreeFlags&15990||d){d=Ms.transition,Ms.transition=null;var f=cn;cn=1;var u=Ht;Ht|=4,E1.current=null,lL(e,i),oE(i,e),RR(A0),mg=!!M0,A0=M0=null,e.current=i,uL(i),VD(),Ht=u,cn=f,Ms.transition=d}else e.current=i;if(Im&&(Im=!1,Ha=e,Ag=c),d=e.pendingLanes,d===0&&(Qa=null),$D(i.stateNode),Ni(e,er()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(Mg)throw Mg=!1,e=Y0,Y0=null,e;return Ag&1&&e.tag!==0&&Zc(),d=e.pendingLanes,d&1?e===J0?cf++:(cf=0,J0=e):cf=0,cl(),null}function Zc(){if(Ha!==null){var e=Gk(Ag),t=Ms.transition,i=cn;try{if(Ms.transition=null,cn=16>e?16:e,Ha===null)var a=!1;else{if(e=Ha,Ha=null,Ag=0,Ht&6)throw Error(He(331));var c=Ht;for(Ht|=4,gt=e.current;gt!==null;){var d=gt,f=d.child;if(gt.flags&16){var u=d.deletions;if(u!==null){for(var w=0;w<u.length;w++){var k=u[w];for(gt=k;gt!==null;){var I=gt;switch(I.tag){case 0:case 11:case 15:lf(8,I,d)}var A=I.child;if(A!==null)A.return=I,gt=A;else for(;gt!==null;){I=gt;var M=I.sibling,$=I.return;if(rE(I),I===k){gt=null;break}if(M!==null){M.return=$,gt=M;break}gt=$}}}var H=d.alternate;if(H!==null){var Y=H.child;if(Y!==null){H.child=null;do{var ae=Y.sibling;Y.sibling=null,Y=ae}while(Y!==null)}}gt=d}}if(d.subtreeFlags&2064&&f!==null)f.return=d,gt=f;else e:for(;gt!==null;){if(d=gt,d.flags&2048)switch(d.tag){case 0:case 11:case 15:lf(9,d,d.return)}var j=d.sibling;if(j!==null){j.return=d.return,gt=j;break e}gt=d.return}}var W=e.current;for(gt=W;gt!==null;){f=gt;var G=f.child;if(f.subtreeFlags&2064&&G!==null)G.return=f,gt=G;else e:for(f=W;gt!==null;){if(u=gt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ny(9,u)}}catch(de){Kn(u,u.return,de)}if(u===f){gt=null;break e}var ee=u.sibling;if(ee!==null){ee.return=u.return,gt=ee;break e}gt=u.return}}if(Ht=c,cl(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(Zg,e)}catch{}a=!0}return a}finally{cn=i,Ms.transition=t}}return!1}function F2(e,t,i){t=ih(i,t),t=GP(e,t,1),e=Ja(e,t,1),t=xi(),e!==null&&(Kf(e,1,t),Ni(e,t))}function Kn(e,t,i){if(e.tag===3)F2(e,e,i);else for(;t!==null;){if(t.tag===3){F2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Qa===null||!Qa.has(a))){e=ih(i,e),e=HP(t,e,1),t=Ja(t,e,1),e=xi(),t!==null&&(Kf(t,1,e),Ni(t,e));break}}t=t.return}}function mL(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=xi(),e.pingedLanes|=e.suspendedLanes&i,Mr===e&&(Wr&i)===i&&(yr===4||yr===3&&(Wr&130023424)===Wr&&500>er()-M1?ru(e,0):I1|=i),Ni(e,t)}function fE(e,t){t===0&&(e.mode&1?(t=vm,vm<<=1,!(vm&130023424)&&(vm=4194304)):t=1);var i=xi();e=Ko(e,t),e!==null&&(Kf(e,t,i),Ni(e,i))}function gL(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),fE(e,i)}function yL(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(He(314))}a!==null&&a.delete(t),fE(e,i)}var pE;pE=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bi.current)Fi=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Fi=!1,iL(e,t,i);Fi=!!(e.flags&131072)}else Fi=!1,zn&&t.flags&1048576&&_P(t,wg,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ym(e,t),e=t.pendingProps;var c=eh(t,ai.current);Hc(t,i),c=S1(null,t,a,e,c,i);var d=T1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vi(a)?(d=!0,xg(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,_1(t),c.updater=ty,t.stateNode=c,c._reactInternals=t,N0(t,a,e,i),t=U0(null,t,a,!0,d,i)):(t.tag=0,zn&&d&&h1(t),_i(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Ym(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=vL(a),e=Gs(a,e),c){case 0:t=$0(null,t,a,e,i);break e;case 1:t=k2(null,t,a,e,i);break e;case 11:t=T2(null,t,a,e,i);break e;case 14:t=C2(null,t,a,Gs(a.type,e),i);break e}throw Error(He(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Gs(a,c),$0(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Gs(a,c),k2(e,t,a,c,i);case 3:e:{if(YP(t),e===null)throw Error(He(387));a=t.pendingProps,d=t.memoizedState,c=d.element,TP(e,t),Cg(t,a,null,i);var f=t.memoizedState;if(a=f.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=ih(Error(He(423)),t),t=P2(e,t,a,i,c);break e}else if(a!==c){c=ih(Error(He(424)),t),t=P2(e,t,a,i,c);break e}else for(ss=Ya(t.stateNode.containerInfo.firstChild),os=t,zn=!0,Zs=null,i=wP(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(th(),a===c){t=Yo(e,t,i);break e}_i(e,t,a,i)}t=t.child}return t;case 5:return CP(t),e===null&&O0(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,f=c.children,z0(a,c)?f=null:d!==null&&z0(a,d)&&(t.flags|=32),KP(e,t),_i(e,t,f,i),t.child;case 6:return e===null&&O0(t),null;case 13:return JP(e,t,i);case 4:return v1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=nh(t,null,a,i):_i(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Gs(a,c),T2(e,t,a,c,i);case 7:return _i(e,t,t.pendingProps,i),t.child;case 8:return _i(e,t,t.pendingProps.children,i),t.child;case 12:return _i(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,d=t.memoizedProps,f=c.value,bn(Sg,a._currentValue),a._currentValue=f,d!==null)if(Ys(d.value,f)){if(d.children===c.children&&!Bi.current){t=Yo(e,t,i);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var u=d.dependencies;if(u!==null){f=d.child;for(var w=u.firstContext;w!==null;){if(w.context===a){if(d.tag===1){w=Ho(-1,i&-i),w.tag=2;var k=d.updateQueue;if(k!==null){k=k.shared;var I=k.pending;I===null?w.next=w:(w.next=I.next,I.next=w),k.pending=w}}d.lanes|=i,w=d.alternate,w!==null&&(w.lanes|=i),B0(d.return,i,t),u.lanes|=i;break}w=w.next}}else if(d.tag===10)f=d.type===t.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(He(341));f.lanes|=i,u=f.alternate,u!==null&&(u.lanes|=i),B0(f,i,t),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===t){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}_i(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,Hc(t,i),c=Ds(c),a=a(c),t.flags|=1,_i(e,t,a,i),t.child;case 14:return a=t.type,c=Gs(a,t.pendingProps),c=Gs(a.type,c),C2(e,t,a,c,i);case 15:return ZP(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Gs(a,c),Ym(e,t),t.tag=1,Vi(a)?(e=!0,xg(t)):e=!1,Hc(t,i),qP(t,a,c),N0(t,a,c,i),U0(null,t,a,!0,e,i);case 19:return QP(e,t,i);case 22:return XP(e,t,i)}throw Error(He(156,t.tag))};function mE(e,t){return $k(e,t)}function _L(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(e,t,i,a){return new _L(e,t,i,a)}function R1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vL(e){if(typeof e=="function")return R1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Qx)return 11;if(e===e1)return 14}return 2}function tl(e,t){var i=e.alternate;return i===null?(i=Is(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function eg(e,t,i,a,c,d){var f=2;if(a=e,typeof e=="function")R1(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case kc:return iu(i.children,c,d,t);case Jx:f=8,c|=8;break;case c0:return e=Is(12,i,t,c|2),e.elementType=c0,e.lanes=d,e;case h0:return e=Is(13,i,t,c),e.elementType=h0,e.lanes=d,e;case d0:return e=Is(19,i,t,c),e.elementType=d0,e.lanes=d,e;case Ck:return iy(i,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sk:f=10;break e;case Tk:f=9;break e;case Qx:f=11;break e;case e1:f=14;break e;case $a:f=16,a=null;break e}throw Error(He(130,e==null?e:typeof e,""))}return t=Is(f,i,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function iu(e,t,i,a){return e=Is(7,e,a,t),e.lanes=i,e}function iy(e,t,i,a){return e=Is(22,e,a,t),e.elementType=Ck,e.lanes=i,e.stateNode={isHidden:!1},e}function Fv(e,t,i){return e=Is(6,e,null,t),e.lanes=i,e}function Ov(e,t,i){return t=Is(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xL(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yv(0),this.expirationTimes=yv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yv(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function L1(e,t,i,a,c,d,f,u,w){return e=new xL(e,t,i,u,w),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Is(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},_1(d),e}function bL(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function gE(e){if(!e)return rl;e=e._reactInternals;e:{if(yu(e)!==e||e.tag!==1)throw Error(He(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(He(171))}if(e.tag===1){var i=e.type;if(Vi(i))return gP(e,i,t)}return t}function yE(e,t,i,a,c,d,f,u,w){return e=L1(i,a,!0,e,c,d,f,u,w),e.context=gE(null),i=e.current,a=xi(),c=el(i),d=Ho(a,c),d.callback=t??null,Ja(i,d,c),e.current.lanes=c,Kf(e,c,a),Ni(e,a),e}function sy(e,t,i,a){var c=t.current,d=xi(),f=el(c);return i=gE(i),t.context===null?t.context=i:t.pendingContext=i,t=Ho(d,f),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Ja(c,t,f),e!==null&&(Ks(e,c,f,d),Zm(e,c,f)),f}function Dg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function O2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function F1(e,t){O2(e,t),(e=e.alternate)&&O2(e,t)}function wL(){return null}var _E=typeof reportError=="function"?reportError:function(e){console.error(e)};function O1(e){this._internalRoot=e}oy.prototype.render=O1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(He(409));sy(e,t,null,null)};oy.prototype.unmount=O1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fu(function(){sy(null,e,null,null)}),t[Xo]=null}};function oy(e){this._internalRoot=e}oy.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xk();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Wa.length&&t!==0&&t<Wa[i].priority;i++);Wa.splice(i,0,e),i===0&&Yk(e)}};function B1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ay(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function B2(){}function SL(e,t,i,a,c){if(c){if(typeof a=="function"){var d=a;a=function(){var k=Dg(f);d.call(k)}}var f=yE(t,a,e,0,null,!1,!1,"",B2);return e._reactRootContainer=f,e[Xo]=f.current,Pf(e.nodeType===8?e.parentNode:e),fu(),f}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var u=a;a=function(){var k=Dg(w);u.call(k)}}var w=L1(e,0,!1,null,null,!1,!1,"",B2);return e._reactRootContainer=w,e[Xo]=w.current,Pf(e.nodeType===8?e.parentNode:e),fu(function(){sy(t,w,i,a)}),w}function ly(e,t,i,a,c){var d=i._reactRootContainer;if(d){var f=d;if(typeof c=="function"){var u=c;c=function(){var w=Dg(f);u.call(w)}}sy(t,f,e,c)}else f=SL(i,t,e,c,a);return Dg(f)}Hk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Xd(t.pendingLanes);i!==0&&(r1(t,i|1),Ni(t,er()),!(Ht&6)&&(sh=er()+500,cl()))}break;case 13:fu(function(){var a=Ko(e,1);if(a!==null){var c=xi();Ks(a,e,1,c)}}),F1(e,1)}};i1=function(e){if(e.tag===13){var t=Ko(e,134217728);if(t!==null){var i=xi();Ks(t,e,134217728,i)}F1(e,134217728)}};Zk=function(e){if(e.tag===13){var t=el(e),i=Ko(e,t);if(i!==null){var a=xi();Ks(i,e,t,a)}F1(e,t)}};Xk=function(){return cn};Kk=function(e,t){var i=cn;try{return cn=e,t()}finally{cn=i}};w0=function(e,t,i){switch(t){case"input":if(m0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Jg(a);if(!c)throw Error(He(90));Pk(a),m0(a,c)}}}break;case"textarea":Ik(e,i);break;case"select":t=i.value,t!=null&&Uc(e,!!i.multiple,t,!1)}};Fk=A1;Ok=fu;var TL={usingClientEntryPoint:!1,Events:[Jf,Mc,Jg,Rk,Lk,A1]},Nd={findFiberByHostInstance:Xl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CL={bundleType:Nd.bundleType,version:Nd.version,rendererPackageName:Nd.rendererPackageName,rendererConfig:Nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Nk(e),e===null?null:e.stateNode},findFiberByHostInstance:Nd.findFiberByHostInstance||wL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mm.isDisabled&&Mm.supportsFiber)try{Zg=Mm.inject(CL),mo=Mm}catch{}}hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TL;hs.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B1(t))throw Error(He(200));return bL(e,t,null,i)};hs.createRoot=function(e,t){if(!B1(e))throw Error(He(299));var i=!1,a="",c=_E;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=L1(e,1,!1,null,null,i,!1,a,c),e[Xo]=t.current,Pf(e.nodeType===8?e.parentNode:e),new O1(t)};hs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(He(188)):(e=Object.keys(e).join(","),Error(He(268,e)));return e=Nk(t),e=e===null?null:e.stateNode,e};hs.flushSync=function(e){return fu(e)};hs.hydrate=function(e,t,i){if(!ay(t))throw Error(He(200));return ly(null,e,t,!0,i)};hs.hydrateRoot=function(e,t,i){if(!B1(e))throw Error(He(405));var a=i!=null&&i.hydratedSources||null,c=!1,d="",f=_E;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),t=yE(t,null,e,1,i??null,c,!1,d,f),e[Xo]=t.current,Pf(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new oy(t)};hs.render=function(e,t,i){if(!ay(t))throw Error(He(200));return ly(null,e,t,!1,i)};hs.unmountComponentAtNode=function(e){if(!ay(e))throw Error(He(40));return e._reactRootContainer?(fu(function(){ly(null,null,e,!1,function(){e._reactRootContainer=null,e[Xo]=null})}),!0):!1};hs.unstable_batchedUpdates=A1;hs.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!ay(i))throw Error(He(200));if(e==null||e._reactInternals===void 0)throw Error(He(38));return ly(e,t,i,!1,a)};hs.version="18.3.1-next-f1338f8080-20240426";function vE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vE)}catch(e){console.error(e)}}vE(),vk.exports=hs;var _h=vk.exports;const Am=Wx(_h);var xE,V2=_h;xE=V2.createRoot,V2.hydrateRoot;const kL="modulepreload",PL=function(e){return"/routr/"+e},N2={},EL=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),u=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));c=Promise.allSettled(i.map(w=>{if(w=PL(w),w in N2)return;N2[w]=!0;const k=w.endsWith(".css"),I=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${I}`))return;const A=document.createElement("link");if(A.rel=k?"stylesheet":kL,k||(A.as="script"),A.crossOrigin="",A.href=w,u&&A.setAttribute("nonce",u),document.head.appendChild(A),k)return new Promise((M,$)=>{A.addEventListener("load",M),A.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${w}`)))})}))}function d(f){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=f,window.dispatchEvent(u),!u.defaultPrevented)throw f}return c.then(f=>{for(const u of f||[])u.status==="rejected"&&d(u.reason);return t().catch(d)})},bE=ne.createContext(null);function ep(){var a;const e=(a=ne.useContext(bE))==null?void 0:a.maps,t=ne.useContext(tp);return ne.useMemo(()=>({...e,current:t==null?void 0:t.map}),[e,t])}function IL(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===d}function uo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!uo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!uo(e[c],t[c]))return!1;return!0}return!1}function j2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function $2(e,t){const i=t.viewState||t,a={};if("longitude"in i&&"latitude"in i&&(i.longitude!==e.center.lng||i.latitude!==e.center.lat)){const c=e.center.constructor;a.center=new c(i.longitude,i.latitude)}return"zoom"in i&&i.zoom!==e.zoom&&(a.zoom=i.zoom),"bearing"in i&&i.bearing!==e.bearing&&(a.bearing=i.bearing),"pitch"in i&&i.pitch!==e.pitch&&(a.pitch=i.pitch),i.padding&&e.padding&&!uo(i.padding,e.padding)&&(a.padding=i.padding),a}const ML=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function U2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const d=t[a.ref];if(d){c=c||Object.assign({},a),delete c.ref;for(const f of ML)f in d&&(c[f]=d[f])}return c||a});return{...e,layers:i}}const W2={version:8,sources:{},layers:[]},q2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},G2={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},H2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},AL=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],zL=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class oh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=c=>{const d=this.props[H2[c.type]];d?d(c):c.type==="error"&&console.error(c.error)},this._onCameraEvent=c=>{if(this._internalUpdate)return;c.viewState=this._propsedCameraUpdate||j2(this._map.transform);const d=this.props[G2[c.type]];d&&d(c)},this._onCameraUpdate=c=>this._internalUpdate?c:(this._propsedCameraUpdate=j2(c),$2(c,this.props)),this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[q2[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i),c=this._updateSize(t),d=this._updateViewState(t);this._updateStyle(t,i),this._updateStyleComponents(t),this._updateHandlers(t,i),(a||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=oh.savedMaps.pop();if(!a)return null;const c=a.map,d=c.getContainer();for(i.className=d.className;d.childNodes.length>0;)i.appendChild(d.childNodes[0]);c._container=i;const f=c._resizeObserver;f&&(f.disconnect(),f.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:u}=t;return u&&(u.bounds?c.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u)),c.isStyleLoaded()?c.fire("load"):c.once("style.load",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=W2}=i,c={...i,...i.initialViewState,container:t,style:U2(a)},d=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),i.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,i.gl)}const f=new this._MapClass(c);d.padding&&f.setPadding(d.padding),i.cursor&&(f.getCanvas().style.cursor=i.cursor),f.transformCameraUpdate=this._onCameraUpdate,f.on("style.load",()=>{var u;this._styleComponents={light:f.getLight(),sky:f.getSky(),projection:(u=f.getProjection)==null?void 0:u.call(f),terrain:f.getTerrain()},this._updateStyleComponents(this.props)}),f.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const u in q2)f.on(u,this._onPointerEvent);for(const u in G2)f.on(u,this._onCameraEvent);for(const u in H2)f.on(u,this._onEvent);this._map=f}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),oh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t){const i=this._map,a=i.transform;if(!i.isMoving()){const d=$2(a,t);if(Object.keys(d).length>0)return this._internalUpdate=!0,i.jumpTo(d),this._internalUpdate=!1,!0}return!1}_updateSettings(t,i){const a=this._map;let c=!1;for(const d of AL)if(d in t&&!uo(t[d],i[d])){c=!0;const f=a[`set${d[0].toUpperCase()}${d.slice(1)}`];f==null||f.call(a,t[d])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=W2,styleDiffing:c=!0}=t,d={diff:c};"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(U2(a),d)}}_updateStyleComponents({light:t,projection:i,sky:a,terrain:c}){var u,w;const d=this._map,f=this._styleComponents;d.style._loaded&&(t&&!uo(t,f.light)&&(f.light=t,d.setLight(t)),i&&!uo(i,f.projection)&&i!==((u=f.projection)==null?void 0:u.type)&&(f.projection=i,(w=d.setProjection)==null||w.call(d,typeof i=="string"?{type:i}:i)),a&&!uo(a,f.sky)&&(f.sky=a,d.setSky(a)),c!==void 0&&!uo(c,f.terrain)&&(!c||d.getSource(c.source))&&(f.terrain=c,d.setTerrain(c)))}_updateHandlers(t,i){const a=this._map;for(const c of zL){const d=t[c]??!0,f=i[c]??!0;uo(d,f)||(d?a[c].enable(d):a[c].disable())}}_queryRenderedFeatures(t){const i=this._map,{interactiveLayerIds:a=[]}=this.props;try{return i.queryRenderedFeatures(t,{layers:a.filter(i.getLayer.bind(i))})}catch{return[]}}_updateHover(t){var c;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const d=t.type,f=((c=this._hoveredFeatures)==null?void 0:c.length)>0,u=this._queryRenderedFeatures(t.point),w=u.length>0;!w&&f&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,w&&!f&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}}oh.savedMaps=[];const DL=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function RL(e){if(!e)return null;const t=e.map,i={getMap:()=>t};for(const a of LL(t))!(a in i)&&!DL.includes(a)&&(i[a]=t[a].bind(t));return i}function LL(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const FL=typeof document<"u"?ne.useLayoutEffect:ne.useEffect;function OL(e,t){const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",maxParallelImageRequests:a,workerCount:c,workerUrl:d}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,f=>{f&&console.error(f)},!0),a!==void 0&&e.setMaxParallelImageRequests(a),c!==void 0&&e.setWorkerCount(c),d!==void 0&&e.setWorkerUrl(d)}const tp=ne.createContext(null);function BL(e,t){const i=ne.useContext(bE),[a,c]=ne.useState(null),d=ne.useRef(),{current:f}=ne.useRef({mapLib:null,map:null});ne.useEffect(()=>{const k=e.mapLib;let I=!0,A;return Promise.resolve(k||EL(()=>Promise.resolve().then(()=>JO),void 0)).then(M=>{if(!I)return;if(!M)throw new Error("Invalid mapLib");const $="Map"in M?M:M.default;if(!$.Map)throw new Error("Invalid mapLib");if(OL($,e),!$.supported||$.supported(e))e.reuseMaps&&(A=oh.reuse(e,d.current)),A||(A=new oh($.Map,e,d.current)),f.map=RL(A),f.mapLib=$,c(A),i==null||i.onMapMount(f.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(M=>{const{onError:$}=e;$?$({type:"error",target:null,originalEvent:null,error:M}):console.error(M)}),()=>{I=!1,A&&(i==null||i.onMapUnmount(e.id),e.reuseMaps?A.recycle():A.destroy())}},[]),FL(()=>{a&&a.setProps(e)}),ne.useImperativeHandle(t,()=>f.map,[a]);const u=ne.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return ne.createElement("div",{id:e.id,ref:d,style:u},a&&ne.createElement(tp.Provider,{value:f},ne.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const VL=ne.forwardRef(BL),NL=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ia(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!NL.test(a)?i[a]=`${c}px`:i[a]=c}}ne.memo(ne.forwardRef((e,t)=>{const{map:i,mapLib:a}=ne.useContext(tp),c=ne.useRef({props:e});c.current.props=e;const d=ne.useMemo(()=>{let Y=!1;ne.Children.forEach(e.children,W=>{W&&(Y=!0)});const ae={...e,element:Y?document.createElement("div"):null},j=new a.Marker(ae);return j.setLngLat([e.longitude,e.latitude]),j.getElement().addEventListener("click",W=>{var G,ee;(ee=(G=c.current.props).onClick)==null||ee.call(G,{type:"click",target:j,originalEvent:W})}),j.on("dragstart",W=>{var ee,de;const G=W;G.lngLat=d.getLngLat(),(de=(ee=c.current.props).onDragStart)==null||de.call(ee,G)}),j.on("drag",W=>{var ee,de;const G=W;G.lngLat=d.getLngLat(),(de=(ee=c.current.props).onDrag)==null||de.call(ee,G)}),j.on("dragend",W=>{var ee,de;const G=W;G.lngLat=d.getLngLat(),(de=(ee=c.current.props).onDragEnd)==null||de.call(ee,G)}),j},[]);ne.useEffect(()=>(d.addTo(i.getMap()),()=>{d.remove()}),[]);const{longitude:f,latitude:u,offset:w,style:k,draggable:I=!1,popup:A=null,rotation:M=0,rotationAlignment:$="auto",pitchAlignment:H="auto"}=e;return ne.useEffect(()=>{ia(d.getElement(),k)},[k]),ne.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==f||d.getLngLat().lat!==u)&&d.setLngLat([f,u]),w&&!IL(d.getOffset(),w)&&d.setOffset(w),d.isDraggable()!==I&&d.setDraggable(I),d.getRotation()!==M&&d.setRotation(M),d.getRotationAlignment()!==$&&d.setRotationAlignment($),d.getPitchAlignment()!==H&&d.setPitchAlignment(H),d.getPopup()!==A&&d.setPopup(A),_h.createPortal(e.children,d.getElement())}));function Z2(e){return new Set(e?e.trim().split(/\s+/):[])}ne.memo(ne.forwardRef((e,t)=>{const{map:i,mapLib:a}=ne.useContext(tp),c=ne.useMemo(()=>document.createElement("div"),[]),d=ne.useRef({props:e});d.current.props=e;const f=ne.useMemo(()=>{const u={...e},w=new a.Popup(u);return w.setLngLat([e.longitude,e.latitude]),w.once("open",k=>{var I,A;(A=(I=d.current.props).onOpen)==null||A.call(I,k)}),w},[]);if(ne.useEffect(()=>{const u=w=>{var k,I;(I=(k=d.current.props).onClose)==null||I.call(k,w)};return f.on("close",u),f.setDOMContent(c).addTo(i.getMap()),()=>{f.off("close",u),f.isOpen()&&f.remove()}},[]),ne.useEffect(()=>{ia(f.getElement(),e.style)},[e.style]),ne.useImperativeHandle(t,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!uo(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const u=Z2(f.options.className),w=Z2(e.className);for(const k of u)w.has(k)||f.removeClassName(k);for(const k of w)u.has(k)||f.addClassName(k);f.options.className=e.className}return _h.createPortal(e.children,c)}));function _u(e,t,i,a){const c=ne.useContext(tp),d=ne.useMemo(()=>e(c),[]);return ne.useEffect(()=>{const f=t,u=null,w=typeof t=="function"?t:null,{map:k}=c;return k.hasControl(d)||(k.addControl(d,f==null?void 0:f.position),u&&u(c)),()=>{w&&w(c),k.hasControl(d)&&k.removeControl(d)}},[]),d}function jL(e){const t=_u(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return ne.useEffect(()=>{ia(t._container,e.style)},[e.style]),null}ne.memo(jL);function $L(e){const t=_u(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return ne.useEffect(()=>{ia(t._controlContainer,e.style)},[e.style]),null}ne.memo($L);function UL(e,t){const i=ne.useRef({props:e}),a=_u(({mapLib:c})=>{const d=new c.GeolocateControl(e),f=d._setupUI;return d._setupUI=()=>{d._container.hasChildNodes()||f()},d.on("geolocate",u=>{var w,k;(k=(w=i.current.props).onGeolocate)==null||k.call(w,u)}),d.on("error",u=>{var w,k;(k=(w=i.current.props).onError)==null||k.call(w,u)}),d.on("outofmaxbounds",u=>{var w,k;(k=(w=i.current.props).onOutOfMaxBounds)==null||k.call(w,u)}),d.on("trackuserlocationstart",u=>{var w,k;(k=(w=i.current.props).onTrackUserLocationStart)==null||k.call(w,u)}),d.on("trackuserlocationend",u=>{var w,k;(k=(w=i.current.props).onTrackUserLocationEnd)==null||k.call(w,u)}),d},{position:e.position});return i.current.props=e,ne.useImperativeHandle(t,()=>a,[]),ne.useEffect(()=>{ia(a._container,e.style)},[e.style]),null}ne.memo(ne.forwardRef(UL));function WL(e){const t=_u(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return ne.useEffect(()=>{ia(t._container,e.style)},[e.style]),null}ne.memo(WL);function qL(e){const t=_u(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),i=ne.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),ne.useEffect(()=>{ia(t._container,c)},[c]),null}ne.memo(qL);function GL(e){const t=_u(({mapLib:i})=>new i.TerrainControl(e),{position:e.position});return ne.useEffect(()=>{ia(t._container,e.style)},[e.style]),null}ne.memo(GL);function HL(e){const t=_u(({mapLib:i})=>new i.LogoControl(e),{position:e.position});return ne.useEffect(()=>{ia(t._container,e.style)},[e.style]),null}ne.memo(HL);const Rg=[-100,40],ZL=.5,XL=26.2;function KL(e){const t=e.properties,i=[];return t.housenumber&&i.push(t.housenumber),t.street&&i.push(t.street),!t.street&&t.locality&&i.push(t.locality),!t.street&&!t.locality&&t.district&&i.push(t.district),t.city&&i.push(t.city),t.county&&!t.city&&i.push(t.county),t.state&&i.push(t.state),t.country&&i.push(t.country),i.join(", ")||t.name||"Unknown location"}function wE(e,t){const[i,a]=e;let c=!1;for(let d=0,f=t.length-1;d<t.length;f=d++){const[u,w]=t[d],[k,I]=t[f];w>a!=I>a&&i<(k-u)*(a-w)/(I-w)+u&&(c=!c)}return c}async function YL(){try{const t=await(await fetch("https://ipwho.is/")).json();if(typeof t.latitude=="number"&&typeof t.longitude=="number")return[t.longitude,t.latitude]}catch{}return Rg}function JL(e,t=6){const i=Math.pow(10,t),a=[];let c=0,d=0,f=0;for(;c<e.length;){let u=0,w=0,k;do k=e.charCodeAt(c++)-63,u|=(k&31)<<w,w+=5;while(k>=32);d+=u&1?~(u>>1):u>>1,u=0,w=0;do k=e.charCodeAt(c++)-63,u|=(k&31)<<w,w+=5;while(k>=32);f+=u&1?~(u>>1):u>>1,a.push([f/i,d/i])}return a}function tx(e){const t=e==null?void 0:e.trip;if(!(t!=null&&t.legs))return null;const i=t.legs,a=t.summary,c=[];for(const d of i)c.push(...JL(d.shape,6));return{coordinates:c,distanceMiles:a.length,durationMinutes:a.time/60}}function QL(e,t,i,a,c,d,f,u){const w=i-e,k=a-t,I=f-c,A=u-d,M=w*A-k*I;if(Math.abs(M)<1e-12)return!1;const $=((c-e)*A-(d-t)*I)/M,H=((c-e)*k-(d-t)*w)/M;return $>0&&$<1&&H>0&&H<1}function e5(e,t,i){const[a,c]=e,[d,f]=t;for(const u of i)for(let w=0;w<u.length-1;w++){const[k,I]=u[w],[A,M]=u[w+1];if(QL(a,c,d,f,k,I,A,M))return!0}return!1}async function t5(e,t,i){try{const c=`[out:json][timeout:8];(way["highway"~"^(motorway|trunk|motorway_link|trunk_link|primary|primary_link)$"](around:${Math.round(i)},${e},${t}););out geom;`,d=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:c});return d.ok?((await d.json()).elements??[]).filter(w=>{var k;return((k=w.geometry)==null?void 0:k.length)>=2}).map(w=>w.geometry.map(({lat:k,lon:I})=>[I,k])):[]}catch{return[]}}const SE={pedestrian:{walkway_factor:.3,sidewalk_factor:.6,alley_factor:8,driveway_factor:20,use_living_streets:.5,use_tracks:.4,use_hills:.5,use_ferry:0,step_penalty:60,service_penalty:30,shortest:!1}},n5=(e,t,i,a,c)=>Array.from({length:7},(d,f)=>{const u=c+f*2*Math.PI/7;return[e+i*Math.cos(u),t+a*Math.sin(u)]}),r5=(e,t,i,a,c)=>{const d=[];for(let f=0;f<8;f++){const u=f/8*2*Math.PI,w=.55+.45*Math.cos(u/2),k=c+u;d.push([e+i*w*Math.cos(k),t+a*w*Math.sin(k)])}return d},i5=(e,t,i,a,c)=>{const d=[];for(let f=0;f<7;f++){const u=c+f*2*Math.PI/7,w=e+i*.35*Math.cos(c+Math.PI/2),k=t+a*.35*Math.sin(c+Math.PI/2);d.push([w+i*.75*Math.cos(u),k+a*.75*Math.sin(u)])}return d},s5=(e,t,i,a,c)=>{const d=[];for(let f=0;f<6;f++){const u=c+f*2*Math.PI/6;d.push([e+i*.55*Math.cos(u),t+a*.55*Math.sin(u)+a*.45])}for(let f=0;f<4;f++){const u=c-f*2*Math.PI/4;d.push([e+i*.45*Math.cos(u),t+a*.45*Math.sin(u)-a*.45])}return d},X2=[n5,r5,i5,s5];function K2(e,t,i,a){const c=!a||a.length<3||wE(e,a),d=i.length===0||!e5(t,e,i);return c&&d}function o5(e,t,i,a,c,d){const[f,u]=e,w=t/111320,k=t/(111320*Math.cos(u*(Math.PI/180)));return i(f,u,k,w,a).map(A=>{if(K2(A,e,c,d))return A;const[M,$]=A,H=M-f,Y=$-u,ae=Math.atan2(Y/w,H/k);for(let j=1;j<=24;j++){const W=ae+j*Math.PI/12,G=[f+k*Math.cos(W),u+w*Math.sin(W)];if(K2(G,e,c,d))return G}return A})}function a5(e,t){return e.length===0?1:e.filter(i=>wE(i,t)).length/e.length}function l5(e){if(e.length<10)return 0;const t=Math.max(1,Math.floor(e.length/60)),i=e.filter((f,u)=>u%t===0),a=7e-4,c=new Set;let d=0;for(const[f,u]of i){const w=`${Math.round(f/a)},${Math.round(u/a)}`;c.has(w)&&d++,c.add(w)}return d/i.length}async function Y2(e,t,i,a,c,d){try{const f=o5(e,t,i,a,c,d),u={locations:[{lon:e[0],lat:e[1],type:"break"},...f.map(([I,A])=>({lon:I,lat:A,type:"through"})),{lon:e[0],lat:e[1],type:"break"}],costing:"pedestrian",costing_options:SE,directions_options:{units:"miles"}},w=await fetch("https://valhalla1.openstreetmap.de/route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!w.ok)return null;const k=tx(await w.json());return!k||d&&d.length>=3&&a5(k.coordinates,d)<.8?null:(k._backtrack=l5(k.coordinates),k)}catch{return null}}function u5(e){const t=new Set,i=.0015;for(const[a,c]of e)t.add(`${Math.round(a/i)},${Math.round(c/i)}`);return t}function c5(e,t){let i=0;for(const a of e)t.has(a)&&i++;return i/(e.size+t.size-i)}function h5(e){const t=[],i=[];for(const a of e){const c=u5(a.coordinates);i.some(f=>c5(c,f)>.45)||(t.push(a),i.push(c))}return t}async function d5(e,t,i){const c=t*1609.34/(2*Math.PI*1.8),d=await t5(e[1],e[0],c*1.6),f=Array.from({length:6},(A,M)=>M*Math.PI/3),u=[.8,1,1.25],w=[];for(const A of X2)for(const M of f)for(const $ of u)w.push(Y2(e,c*$,A,M,d,i));let I=(await Promise.all(w)).filter(A=>A!==null);return I.length===0&&i&&i.length>=3&&(I=(await Promise.all(X2.flatMap(M=>f.flatMap($=>u.map(H=>Y2(e,c*H,M,$,d)))))).filter(M=>M!==null)),I.sort((A,M)=>{const $=Math.abs(A.distanceMiles-t)-Math.abs(M.distanceMiles-t);if(Math.abs($)>.3)return $;const H=A._backtrack??0,Y=M._backtrack??0;return H-Y}),h5(I)}async function f5(e,t){return p5(e,t)}async function p5(e,t){try{const i={locations:[{lon:e[0],lat:e[1]},{lon:t[0],lat:t[1]}],costing:"pedestrian",costing_options:SE,directions_options:{units:"miles"},alternates:2},a=await fetch("https://valhalla1.openstreetmap.de/route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!a.ok)return[];const c=await a.json(),d=[],f=tx(c);f&&d.push(f);const u=c.alternates??[];for(const w of u){const k=tx(w);k&&d.push(k)}return d}catch{return[]}}async function m5(e){try{const i=await(await fetch(`https://photon.komoot.io/api/?q=${encodeURIComponent(e)}&limit=3`)).json();if(!i.features)return[];const a=i.features.map(c=>({id:c.properties.osm_id,coordinates:c.geometry.coordinates,name:KL(c)}));return Array.from(new Map(a.map(c=>[c.id,c])).values())}catch{return[]}}function g5(){const{current:e}=ep();return ne.useEffect(()=>{e&&(async()=>{const t=await YL();t!==Rg&&e.flyTo({center:t,zoom:8})})()},[e]),e?Ae.jsx(Ae.Fragment,{}):null}const V1=ne.createContext({});function N1(e){const t=ne.useRef(null);return t.current===null&&(t.current=e()),t.current}const j1=typeof window<"u",TE=j1?ne.useLayoutEffect:ne.useEffect,uy=ne.createContext(null);function $1(e,t){e.indexOf(t)===-1&&e.push(t)}function U1(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}const Jo=(e,t,i)=>i>t?t:i<e?e:i;let W1=()=>{};const Qo={},CE=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function kE(e){return typeof e=="object"&&e!==null}const PE=e=>/^0[^.\s]+$/u.test(e);function q1(e){let t;return()=>(t===void 0&&(t=e()),t)}const As=e=>e,y5=(e,t)=>i=>t(e(i)),np=(...e)=>e.reduce(y5),Ff=(e,t,i)=>{const a=t-e;return a===0?1:(i-e)/a};class G1{constructor(){this.subscriptions=[]}add(t){return $1(this.subscriptions,t),()=>U1(this.subscriptions,t)}notify(t,i,a){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,i,a);else for(let d=0;d<c;d++){const f=this.subscriptions[d];f&&f(t,i,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yo=e=>e*1e3,_o=e=>e/1e3;function EE(e,t){return t?e*(1e3/t):0}const IE=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,_5=1e-7,v5=12;function x5(e,t,i,a,c){let d,f,u=0;do f=t+(i-t)/2,d=IE(f,a,c)-e,d>0?i=f:t=f;while(Math.abs(d)>_5&&++u<v5);return f}function rp(e,t,i,a){if(e===t&&i===a)return As;const c=d=>x5(d,0,1,e,i);return d=>d===0||d===1?d:IE(c(d),t,a)}const ME=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,AE=e=>t=>1-e(1-t),zE=rp(.33,1.53,.69,.99),H1=AE(zE),DE=ME(H1),RE=e=>(e*=2)<1?.5*H1(e):.5*(2-Math.pow(2,-10*(e-1))),Z1=e=>1-Math.sin(Math.acos(e)),LE=AE(Z1),FE=ME(Z1),b5=rp(.42,0,1,1),w5=rp(0,0,.58,1),OE=rp(.42,0,.58,1),S5=e=>Array.isArray(e)&&typeof e[0]!="number",BE=e=>Array.isArray(e)&&typeof e[0]=="number",T5={linear:As,easeIn:b5,easeInOut:OE,easeOut:w5,circIn:Z1,circInOut:FE,circOut:LE,backIn:H1,backInOut:DE,backOut:zE,anticipate:RE},C5=e=>typeof e=="string",J2=e=>{if(BE(e)){W1(e.length===4);const[t,i,a,c]=e;return rp(t,i,a,c)}else if(C5(e))return T5[e];return e},zm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function k5(e,t){let i=new Set,a=new Set,c=!1,d=!1;const f=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function w(I){f.has(I)&&(k.schedule(I),e()),I(u)}const k={schedule:(I,A=!1,M=!1)=>{const H=M&&c?i:a;return A&&f.add(I),H.has(I)||H.add(I),I},cancel:I=>{a.delete(I),f.delete(I)},process:I=>{if(u=I,c){d=!0;return}c=!0,[i,a]=[a,i],i.forEach(w),i.clear(),c=!1,d&&(d=!1,k.process(I))}};return k}const P5=40;function VE(e,t){let i=!1,a=!0;const c={delta:0,timestamp:0,isProcessing:!1},d=()=>i=!0,f=zm.reduce((G,ee)=>(G[ee]=k5(d),G),{}),{setup:u,read:w,resolveKeyframes:k,preUpdate:I,update:A,preRender:M,render:$,postRender:H}=f,Y=()=>{const G=Qo.useManualTiming?c.timestamp:performance.now();i=!1,Qo.useManualTiming||(c.delta=a?1e3/60:Math.max(Math.min(G-c.timestamp,P5),1)),c.timestamp=G,c.isProcessing=!0,u.process(c),w.process(c),k.process(c),I.process(c),A.process(c),M.process(c),$.process(c),H.process(c),c.isProcessing=!1,i&&t&&(a=!1,e(Y))},ae=()=>{i=!0,a=!0,c.isProcessing||e(Y)};return{schedule:zm.reduce((G,ee)=>{const de=f[ee];return G[ee]=(he,ye=!1,Ce=!1)=>(i||ae(),de.schedule(he,ye,Ce)),G},{}),cancel:G=>{for(let ee=0;ee<zm.length;ee++)f[zm[ee]].cancel(G)},state:c,steps:f}}const{schedule:Dn,cancel:il,state:$r,steps:Bv}=VE(typeof requestAnimationFrame<"u"?requestAnimationFrame:As,!0);let tg;function E5(){tg=void 0}const Oi={now:()=>(tg===void 0&&Oi.set($r.isProcessing||Qo.useManualTiming?$r.timestamp:performance.now()),tg),set:e=>{tg=e,queueMicrotask(E5)}},NE=e=>t=>typeof t=="string"&&t.startsWith(e),X1=NE("--"),I5=NE("var(--"),K1=e=>I5(e)?M5.test(e.split("/*")[0].trim()):!1,M5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,vh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Of={...vh,transform:e=>Jo(0,1,e)},Dm={...vh,default:1},hf=e=>Math.round(e*1e5)/1e5,Y1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function A5(e){return e==null}const z5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,J1=(e,t)=>i=>!!(typeof i=="string"&&z5.test(i)&&i.startsWith(e)||t&&!A5(i)&&Object.prototype.hasOwnProperty.call(i,t)),jE=(e,t,i)=>a=>{if(typeof a!="string")return a;const[c,d,f,u]=a.match(Y1);return{[e]:parseFloat(c),[t]:parseFloat(d),[i]:parseFloat(f),alpha:u!==void 0?parseFloat(u):1}},D5=e=>Jo(0,255,e),Vv={...vh,transform:e=>Math.round(D5(e))},Jl={test:J1("rgb","red"),parse:jE("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:a=1})=>"rgba("+Vv.transform(e)+", "+Vv.transform(t)+", "+Vv.transform(i)+", "+hf(Of.transform(a))+")"};function R5(e){let t="",i="",a="",c="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),a=e.substring(5,7),c=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),a=e.substring(3,4),c=e.substring(4,5),t+=t,i+=i,a+=a,c+=c),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(a,16),alpha:c?parseInt(c,16)/255:1}}const nx={test:J1("#"),parse:R5,transform:Jl.transform},ip=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ja=ip("deg"),vo=ip("%"),It=ip("px"),L5=ip("vh"),F5=ip("vw"),Q2={...vo,parse:e=>vo.parse(e)/100,transform:e=>vo.transform(e*100)},Oc={test:J1("hsl","hue"),parse:jE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:a=1})=>"hsla("+Math.round(e)+", "+vo.transform(hf(t))+", "+vo.transform(hf(i))+", "+hf(Of.transform(a))+")"},lr={test:e=>Jl.test(e)||nx.test(e)||Oc.test(e),parse:e=>Jl.test(e)?Jl.parse(e):Oc.test(e)?Oc.parse(e):nx.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Jl.transform(e):Oc.transform(e),getAnimatableNone:e=>{const t=lr.parse(e);return t.alpha=0,lr.transform(t)}},O5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function B5(e){var t,i;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Y1))==null?void 0:t.length)||0)+(((i=e.match(O5))==null?void 0:i.length)||0)>0}const $E="number",UE="color",V5="var",N5="var(",eT="${}",j5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bf(e){const t=e.toString(),i=[],a={color:[],number:[],var:[]},c=[];let d=0;const u=t.replace(j5,w=>(lr.test(w)?(a.color.push(d),c.push(UE),i.push(lr.parse(w))):w.startsWith(N5)?(a.var.push(d),c.push(V5),i.push(w)):(a.number.push(d),c.push($E),i.push(parseFloat(w))),++d,eT)).split(eT);return{values:i,split:u,indexes:a,types:c}}function WE(e){return Bf(e).values}function qE(e){const{split:t,types:i}=Bf(e),a=t.length;return c=>{let d="";for(let f=0;f<a;f++)if(d+=t[f],c[f]!==void 0){const u=i[f];u===$E?d+=hf(c[f]):u===UE?d+=lr.transform(c[f]):d+=c[f]}return d}}const $5=e=>typeof e=="number"?0:lr.test(e)?lr.getAnimatableNone(e):e;function U5(e){const t=WE(e);return qE(e)(t.map($5))}const sl={test:B5,parse:WE,createTransformer:qE,getAnimatableNone:U5};function Nv(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function W5({hue:e,saturation:t,lightness:i,alpha:a}){e/=360,t/=100,i/=100;let c=0,d=0,f=0;if(!t)c=d=f=i;else{const u=i<.5?i*(1+t):i+t-i*t,w=2*i-u;c=Nv(w,u,e+1/3),d=Nv(w,u,e),f=Nv(w,u,e-1/3)}return{red:Math.round(c*255),green:Math.round(d*255),blue:Math.round(f*255),alpha:a}}function Lg(e,t){return i=>i>0?t:e}const On=(e,t,i)=>e+(t-e)*i,jv=(e,t,i)=>{const a=e*e,c=i*(t*t-a)+a;return c<0?0:Math.sqrt(c)},q5=[nx,Jl,Oc],G5=e=>q5.find(t=>t.test(e));function tT(e){const t=G5(e);if(!t)return!1;let i=t.parse(e);return t===Oc&&(i=W5(i)),i}const nT=(e,t)=>{const i=tT(e),a=tT(t);if(!i||!a)return Lg(e,t);const c={...i};return d=>(c.red=jv(i.red,a.red,d),c.green=jv(i.green,a.green,d),c.blue=jv(i.blue,a.blue,d),c.alpha=On(i.alpha,a.alpha,d),Jl.transform(c))},rx=new Set(["none","hidden"]);function H5(e,t){return rx.has(e)?i=>i<=0?e:t:i=>i>=1?t:e}function Z5(e,t){return i=>On(e,t,i)}function Q1(e){return typeof e=="number"?Z5:typeof e=="string"?K1(e)?Lg:lr.test(e)?nT:Y5:Array.isArray(e)?GE:typeof e=="object"?lr.test(e)?nT:X5:Lg}function GE(e,t){const i=[...e],a=i.length,c=e.map((d,f)=>Q1(d)(d,t[f]));return d=>{for(let f=0;f<a;f++)i[f]=c[f](d);return i}}function X5(e,t){const i={...e,...t},a={};for(const c in i)e[c]!==void 0&&t[c]!==void 0&&(a[c]=Q1(e[c])(e[c],t[c]));return c=>{for(const d in a)i[d]=a[d](c);return i}}function K5(e,t){const i=[],a={color:0,var:0,number:0};for(let c=0;c<t.values.length;c++){const d=t.types[c],f=e.indexes[d][a[d]],u=e.values[f]??0;i[c]=u,a[d]++}return i}const Y5=(e,t)=>{const i=sl.createTransformer(t),a=Bf(e),c=Bf(t);return a.indexes.var.length===c.indexes.var.length&&a.indexes.color.length===c.indexes.color.length&&a.indexes.number.length>=c.indexes.number.length?rx.has(e)&&!c.values.length||rx.has(t)&&!a.values.length?H5(e,t):np(GE(K5(a,c),c.values),i):Lg(e,t)};function HE(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?On(e,t,i):Q1(e)(e,t)}const J5=e=>{const t=({timestamp:i})=>e(i);return{start:(i=!0)=>Dn.update(t,i),stop:()=>il(t),now:()=>$r.isProcessing?$r.timestamp:Oi.now()}},ZE=(e,t,i=10)=>{let a="";const c=Math.max(Math.round(t/i),2);for(let d=0;d<c;d++)a+=Math.round(e(d/(c-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},Fg=2e4;function eb(e){let t=0;const i=50;let a=e.next(t);for(;!a.done&&t<Fg;)t+=i,a=e.next(t);return t>=Fg?1/0:t}function Q5(e,t=100,i){const a=i({...e,keyframes:[0,t]}),c=Math.min(eb(a),Fg);return{type:"keyframes",ease:d=>a.next(c*d).value/t,duration:_o(c)}}const e3=5;function XE(e,t,i){const a=Math.max(t-e3,0);return EE(i-e(a),t-a)}const Xn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$v=.001;function t3({duration:e=Xn.duration,bounce:t=Xn.bounce,velocity:i=Xn.velocity,mass:a=Xn.mass}){let c,d,f=1-t;f=Jo(Xn.minDamping,Xn.maxDamping,f),e=Jo(Xn.minDuration,Xn.maxDuration,_o(e)),f<1?(c=k=>{const I=k*f,A=I*e,M=I-i,$=ix(k,f),H=Math.exp(-A);return $v-M/$*H},d=k=>{const A=k*f*e,M=A*i+i,$=Math.pow(f,2)*Math.pow(k,2)*e,H=Math.exp(-A),Y=ix(Math.pow(k,2),f);return(-c(k)+$v>0?-1:1)*((M-$)*H)/Y}):(c=k=>{const I=Math.exp(-k*e),A=(k-i)*e+1;return-$v+I*A},d=k=>{const I=Math.exp(-k*e),A=(i-k)*(e*e);return I*A});const u=5/e,w=r3(c,d,u);if(e=yo(e),isNaN(w))return{stiffness:Xn.stiffness,damping:Xn.damping,duration:e};{const k=Math.pow(w,2)*a;return{stiffness:k,damping:f*2*Math.sqrt(a*k),duration:e}}}const n3=12;function r3(e,t,i){let a=i;for(let c=1;c<n3;c++)a=a-e(a)/t(a);return a}function ix(e,t){return e*Math.sqrt(1-t*t)}const i3=["duration","bounce"],s3=["stiffness","damping","mass"];function rT(e,t){return t.some(i=>e[i]!==void 0)}function o3(e){let t={velocity:Xn.velocity,stiffness:Xn.stiffness,damping:Xn.damping,mass:Xn.mass,isResolvedFromDuration:!1,...e};if(!rT(e,s3)&&rT(e,i3))if(e.visualDuration){const i=e.visualDuration,a=2*Math.PI/(i*1.2),c=a*a,d=2*Jo(.05,1,1-(e.bounce||0))*Math.sqrt(c);t={...t,mass:Xn.mass,stiffness:c,damping:d}}else{const i=t3(e);t={...t,...i,mass:Xn.mass},t.isResolvedFromDuration=!0}return t}function Og(e=Xn.visualDuration,t=Xn.bounce){const i=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:a,restDelta:c}=i;const d=i.keyframes[0],f=i.keyframes[i.keyframes.length-1],u={done:!1,value:d},{stiffness:w,damping:k,mass:I,duration:A,velocity:M,isResolvedFromDuration:$}=o3({...i,velocity:-_o(i.velocity||0)}),H=M||0,Y=k/(2*Math.sqrt(w*I)),ae=f-d,j=_o(Math.sqrt(w/I)),W=Math.abs(ae)<5;a||(a=W?Xn.restSpeed.granular:Xn.restSpeed.default),c||(c=W?Xn.restDelta.granular:Xn.restDelta.default);let G;if(Y<1){const de=ix(j,Y);G=he=>{const ye=Math.exp(-Y*j*he);return f-ye*((H+Y*j*ae)/de*Math.sin(de*he)+ae*Math.cos(de*he))}}else if(Y===1)G=de=>f-Math.exp(-j*de)*(ae+(H+j*ae)*de);else{const de=j*Math.sqrt(Y*Y-1);G=he=>{const ye=Math.exp(-Y*j*he),Ce=Math.min(de*he,300);return f-ye*((H+Y*j*ae)*Math.sinh(Ce)+de*ae*Math.cosh(Ce))/de}}const ee={calculatedDuration:$&&A||null,next:de=>{const he=G(de);if($)u.done=de>=A;else{let ye=de===0?H:0;Y<1&&(ye=de===0?yo(H):XE(G,de,he));const Ce=Math.abs(ye)<=a,Me=Math.abs(f-he)<=c;u.done=Ce&&Me}return u.value=u.done?f:he,u},toString:()=>{const de=Math.min(eb(ee),Fg),he=ZE(ye=>ee.next(de*ye).value,de,30);return de+"ms "+he},toTransition:()=>{}};return ee}Og.applyToOptions=e=>{const t=Q5(e,100,Og);return e.ease=t.ease,e.duration=yo(t.duration),e.type="keyframes",e};function sx({keyframes:e,velocity:t=0,power:i=.8,timeConstant:a=325,bounceDamping:c=10,bounceStiffness:d=500,modifyTarget:f,min:u,max:w,restDelta:k=.5,restSpeed:I}){const A=e[0],M={done:!1,value:A},$=Ce=>u!==void 0&&Ce<u||w!==void 0&&Ce>w,H=Ce=>u===void 0?w:w===void 0||Math.abs(u-Ce)<Math.abs(w-Ce)?u:w;let Y=i*t;const ae=A+Y,j=f===void 0?ae:f(ae);j!==ae&&(Y=j-A);const W=Ce=>-Y*Math.exp(-Ce/a),G=Ce=>j+W(Ce),ee=Ce=>{const Me=W(Ce),ze=G(Ce);M.done=Math.abs(Me)<=k,M.value=M.done?j:ze};let de,he;const ye=Ce=>{$(M.value)&&(de=Ce,he=Og({keyframes:[M.value,H(M.value)],velocity:XE(G,Ce,M.value),damping:c,stiffness:d,restDelta:k,restSpeed:I}))};return ye(0),{calculatedDuration:null,next:Ce=>{let Me=!1;return!he&&de===void 0&&(Me=!0,ee(Ce),ye(Ce)),de!==void 0&&Ce>=de?he.next(Ce-de):(!Me&&ee(Ce),M)}}}function a3(e,t,i){const a=[],c=i||Qo.mix||HE,d=e.length-1;for(let f=0;f<d;f++){let u=c(e[f],e[f+1]);if(t){const w=Array.isArray(t)?t[f]||As:t;u=np(w,u)}a.push(u)}return a}function l3(e,t,{clamp:i=!0,ease:a,mixer:c}={}){const d=e.length;if(W1(d===t.length),d===1)return()=>t[0];if(d===2&&t[0]===t[1])return()=>t[1];const f=e[0]===e[1];e[0]>e[d-1]&&(e=[...e].reverse(),t=[...t].reverse());const u=a3(t,a,c),w=u.length,k=I=>{if(f&&I<e[0])return t[0];let A=0;if(w>1)for(;A<e.length-2&&!(I<e[A+1]);A++);const M=Ff(e[A],e[A+1],I);return u[A](M)};return i?I=>k(Jo(e[0],e[d-1],I)):k}function u3(e,t){const i=e[e.length-1];for(let a=1;a<=t;a++){const c=Ff(0,t,a);e.push(On(i,1,c))}}function c3(e){const t=[0];return u3(t,e.length-1),t}function h3(e,t){return e.map(i=>i*t)}function d3(e,t){return e.map(()=>t||OE).splice(0,e.length-1)}function df({duration:e=300,keyframes:t,times:i,ease:a="easeInOut"}){const c=S5(a)?a.map(J2):J2(a),d={done:!1,value:t[0]},f=h3(i&&i.length===t.length?i:c3(t),e),u=l3(f,t,{ease:Array.isArray(c)?c:d3(t,c)});return{calculatedDuration:e,next:w=>(d.value=u(w),d.done=w>=e,d)}}const f3=e=>e!==null;function tb(e,{repeat:t,repeatType:i="loop"},a,c=1){const d=e.filter(f3),u=c<0||t&&i!=="loop"&&t%2===1?0:d.length-1;return!u||a===void 0?d[u]:a}const p3={decay:sx,inertia:sx,tween:df,keyframes:df,spring:Og};function KE(e){typeof e.type=="string"&&(e.type=p3[e.type])}class nb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,i){return this.finished.then(t,i)}}const m3=e=>e/100;class rb extends nb{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,c;const{motionValue:i}=this.options;i&&i.updatedAt!==Oi.now()&&this.tick(Oi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(c=(a=this.options).onStop)==null||c.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;KE(t);const{type:i=df,repeat:a=0,repeatDelay:c=0,repeatType:d,velocity:f=0}=t;let{keyframes:u}=t;const w=i||df;w!==df&&typeof u[0]!="number"&&(this.mixKeyframes=np(m3,HE(u[0],u[1])),u=[0,100]);const k=w({...t,keyframes:u});d==="mirror"&&(this.mirroredGenerator=w({...t,keyframes:[...u].reverse(),velocity:-f})),k.calculatedDuration===null&&(k.calculatedDuration=eb(k));const{calculatedDuration:I}=k;this.calculatedDuration=I,this.resolvedDuration=I+c,this.totalDuration=this.resolvedDuration*(a+1)-c,this.generator=k}updateTime(t){const i=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(t,i=!1){const{generator:a,totalDuration:c,mixKeyframes:d,mirroredGenerator:f,resolvedDuration:u,calculatedDuration:w}=this;if(this.startTime===null)return a.next(0);const{delay:k=0,keyframes:I,repeat:A,repeatType:M,repeatDelay:$,type:H,onUpdate:Y,finalKeyframe:ae}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),i?this.currentTime=t:this.updateTime(t);const j=this.currentTime-k*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?j<0:j>c;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let G=this.currentTime,ee=a;if(A){const Ce=Math.min(this.currentTime,c)/u;let Me=Math.floor(Ce),ze=Ce%1;!ze&&Ce>=1&&(ze=1),ze===1&&Me--,Me=Math.min(Me,A+1),!!(Me%2)&&(M==="reverse"?(ze=1-ze,$&&(ze-=$/u)):M==="mirror"&&(ee=f)),G=Jo(0,1,ze)*u}const de=W?{done:!1,value:I[0]}:ee.next(G);d&&(de.value=d(de.value));let{done:he}=de;!W&&w!==null&&(he=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const ye=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&he);return ye&&H!==sx&&(de.value=tb(I,this.options,ae,this.speed)),Y&&Y(de.value),ye&&this.finish(),de}then(t,i){return this.finished.then(t,i)}get duration(){return _o(this.calculatedDuration)}get time(){return _o(this.currentTime)}set time(t){var i;t=yo(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(i=this.driver)==null||i.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Oi.now());const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=_o(this.currentTime))}play(){var c,d;if(this.isStopped)return;const{driver:t=J5,startTime:i}=this.options;this.driver||(this.driver=t(f=>this.tick(f))),(d=(c=this.options).onPlay)==null||d.call(c);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=i??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Oi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,i;this.notifyFinished(),this.teardown(),this.state="finished",(i=(t=this.options).onComplete)==null||i.call(t)}cancel(){var t,i;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(i=(t=this.options).onCancel)==null||i.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var i;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(i=this.driver)==null||i.stop(),t.observe(this)}}function g3(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ql=e=>e*180/Math.PI,ox=e=>{const t=Ql(Math.atan2(e[1],e[0]));return ax(t)},y3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ox,rotateZ:ox,skewX:e=>Ql(Math.atan(e[1])),skewY:e=>Ql(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ax=e=>(e=e%360,e<0&&(e+=360),e),iT=ox,sT=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),oT=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),_3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sT,scaleY:oT,scale:e=>(sT(e)+oT(e))/2,rotateX:e=>ax(Ql(Math.atan2(e[6],e[5]))),rotateY:e=>ax(Ql(Math.atan2(-e[2],e[0]))),rotateZ:iT,rotate:iT,skewX:e=>Ql(Math.atan(e[4])),skewY:e=>Ql(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function lx(e){return e.includes("scale")?1:0}function ux(e,t){if(!e||e==="none")return lx(t);const i=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,c;if(i)a=_3,c=i;else{const u=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=y3,c=u}if(!c)return lx(t);const d=a[t],f=c[1].split(",").map(x3);return typeof d=="function"?d(f):f[d]}const v3=(e,t)=>{const{transform:i="none"}=getComputedStyle(e);return ux(i,t)};function x3(e){return parseFloat(e.trim())}const xh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bh=new Set(xh),aT=e=>e===vh||e===It,b3=new Set(["x","y","z"]),w3=xh.filter(e=>!b3.has(e));function S3(e){const t=[];return w3.forEach(i=>{const a=e.getValue(i);a!==void 0&&(t.push([i,a.get()]),a.set(i.startsWith("scale")?1:0))}),t}const su={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ux(t,"x"),y:(e,{transform:t})=>ux(t,"y")};su.translateX=su.x;su.translateY=su.y;const ou=new Set;let cx=!1,hx=!1,dx=!1;function YE(){if(hx){const e=Array.from(ou).filter(a=>a.needsMeasurement),t=new Set(e.map(a=>a.element)),i=new Map;t.forEach(a=>{const c=S3(a);c.length&&(i.set(a,c),a.render())}),e.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const c=i.get(a);c&&c.forEach(([d,f])=>{var u;(u=a.getValue(d))==null||u.set(f)})}),e.forEach(a=>a.measureEndState()),e.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}hx=!1,cx=!1,ou.forEach(e=>e.complete(dx)),ou.clear()}function JE(){ou.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(hx=!0)})}function T3(){dx=!0,JE(),YE(),dx=!1}class ib{constructor(t,i,a,c,d,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=a,this.motionValue=c,this.element=d,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(ou.add(this),cx||(cx=!0,Dn.read(JE),Dn.resolveKeyframes(YE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:a,motionValue:c}=this;if(t[0]===null){const d=c==null?void 0:c.get(),f=t[t.length-1];if(d!==void 0)t[0]=d;else if(a&&i){const u=a.readValue(i,f);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=f),c&&d===void 0&&c.set(t[0])}g3(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ou.delete(this)}cancel(){this.state==="scheduled"&&(ou.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const C3=e=>e.startsWith("--");function k3(e,t,i){C3(t)?e.style.setProperty(t,i):e.style[t]=i}const P3=q1(()=>window.ScrollTimeline!==void 0),E3={};function I3(e,t){const i=q1(e);return()=>E3[t]??i()}const QE=I3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yd=([e,t,i,a])=>`cubic-bezier(${e}, ${t}, ${i}, ${a})`,lT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yd([0,.65,.55,1]),circOut:Yd([.55,0,1,.45]),backIn:Yd([.31,.01,.66,-.59]),backOut:Yd([.33,1.53,.69,.99])};function eI(e,t){if(e)return typeof e=="function"?QE()?ZE(e,t):"ease-out":BE(e)?Yd(e):Array.isArray(e)?e.map(i=>eI(i,t)||lT.easeOut):lT[e]}function M3(e,t,i,{delay:a=0,duration:c=300,repeat:d=0,repeatType:f="loop",ease:u="easeOut",times:w}={},k=void 0){const I={[t]:i};w&&(I.offset=w);const A=eI(u,c);Array.isArray(A)&&(I.easing=A);const M={delay:a,duration:c,easing:Array.isArray(A)?"linear":A,fill:"both",iterations:d+1,direction:f==="reverse"?"alternate":"normal"};return k&&(M.pseudoElement=k),e.animate(I,M)}function tI(e){return typeof e=="function"&&"applyToOptions"in e}function A3({type:e,...t}){return tI(e)&&QE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class z3 extends nb{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:i,name:a,keyframes:c,pseudoElement:d,allowFlatten:f=!1,finalKeyframe:u,onComplete:w}=t;this.isPseudoElement=!!d,this.allowFlatten=f,this.options=t,W1(typeof t.type!="string");const k=A3(t);this.animation=M3(i,a,c,k,d),k.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!d){const I=tb(c,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(I):k3(i,a,I),this.animation.cancel()}w==null||w(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,i;(i=(t=this.animation).finish)==null||i.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,i;this.isPseudoElement||(i=(t=this.animation).commitStyles)==null||i.call(t)}get duration(){var i,a;const t=((a=(i=this.animation.effect)==null?void 0:i.getComputedTiming)==null?void 0:a.call(i).duration)||0;return _o(Number(t))}get time(){return _o(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=yo(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:i}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&P3()?(this.animation.timeline=t,As):i(this)}}const nI={anticipate:RE,backInOut:DE,circInOut:FE};function D3(e){return e in nI}function R3(e){typeof e.ease=="string"&&D3(e.ease)&&(e.ease=nI[e.ease])}const uT=10;class L3 extends z3{constructor(t){R3(t),KE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:i,onUpdate:a,onComplete:c,element:d,...f}=this.options;if(!i)return;if(t!==void 0){i.set(t);return}const u=new rb({...f,autoplay:!1}),w=yo(this.finishedTime??this.time);i.setWithVelocity(u.sample(w-uT).value,u.sample(w).value,uT),u.stop()}}const cT=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(sl.test(e)||e==="0")&&!e.startsWith("url("));function F3(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function O3(e,t,i,a){const c=e[0];if(c===null)return!1;if(t==="display"||t==="visibility")return!0;const d=e[e.length-1],f=cT(c,t),u=cT(d,t);return!f||!u?!1:F3(e)||(i==="spring"||tI(i))&&a}function fx(e){e.duration=0,e.type}const B3=new Set(["opacity","clipPath","filter","transform"]),V3=q1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function N3(e){var I;const{motionValue:t,name:i,repeatDelay:a,repeatType:c,damping:d,type:f}=e;if(!(((I=t==null?void 0:t.owner)==null?void 0:I.current)instanceof HTMLElement))return!1;const{onUpdate:w,transformTemplate:k}=t.owner.getProps();return V3()&&i&&B3.has(i)&&(i!=="transform"||!k)&&!w&&!a&&c!=="mirror"&&d!==0&&f!=="inertia"}const j3=40;class $3 extends nb{constructor({autoplay:t=!0,delay:i=0,type:a="keyframes",repeat:c=0,repeatDelay:d=0,repeatType:f="loop",keyframes:u,name:w,motionValue:k,element:I,...A}){var H;super(),this.stop=()=>{var Y,ae;this._animation&&(this._animation.stop(),(Y=this.stopTimeline)==null||Y.call(this)),(ae=this.keyframeResolver)==null||ae.cancel()},this.createdAt=Oi.now();const M={autoplay:t,delay:i,type:a,repeat:c,repeatDelay:d,repeatType:f,name:w,motionValue:k,element:I,...A},$=(I==null?void 0:I.KeyframeResolver)||ib;this.keyframeResolver=new $(u,(Y,ae,j)=>this.onKeyframesResolved(Y,ae,M,!j),w,k,I),(H=this.keyframeResolver)==null||H.scheduleResolve()}onKeyframesResolved(t,i,a,c){this.keyframeResolver=void 0;const{name:d,type:f,velocity:u,delay:w,isHandoff:k,onUpdate:I}=a;this.resolvedAt=Oi.now(),O3(t,d,f,u)||((Qo.instantAnimations||!w)&&(I==null||I(tb(t,a,i))),t[0]=t[t.length-1],fx(a),a.repeat=0);const M={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>j3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...a,keyframes:t},$=!k&&N3(M)?new L3({...M,element:M.motionValue.owner.current}):new rb(M);$.finished.then(()=>this.notifyFinished()).catch(As),this.pendingTimeline&&(this.stopTimeline=$.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=$}get finished(){return this._animation?this.animation.finished:this._finished}then(t,i){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),T3()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const U3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function W3(e){const t=U3.exec(e);if(!t)return[,];const[,i,a,c]=t;return[`--${i??a}`,c]}function rI(e,t,i=1){const[a,c]=W3(e);if(!a)return;const d=window.getComputedStyle(t).getPropertyValue(a);if(d){const f=d.trim();return CE(f)?parseFloat(f):f}return K1(c)?rI(c,t,i+1):c}function sb(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const iI=new Set(["width","height","top","left","right","bottom",...xh]),q3={test:e=>e==="auto",parse:e=>e},sI=e=>t=>t.test(e),oI=[vh,It,vo,ja,F5,L5,q3],hT=e=>oI.find(sI(e));function G3(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||PE(e):!0}const H3=new Set(["brightness","contrast","saturate","opacity"]);function Z3(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[a]=i.match(Y1)||[];if(!a)return e;const c=i.replace(a,"");let d=H3.has(t)?1:0;return a!==i&&(d*=100),t+"("+d+c+")"}const X3=/\b([a-z-]*)\(.*?\)/gu,px={...sl,getAnimatableNone:e=>{const t=e.match(X3);return t?t.map(Z3).join(" "):e}},dT={...vh,transform:Math.round},K3={rotate:ja,rotateX:ja,rotateY:ja,rotateZ:ja,scale:Dm,scaleX:Dm,scaleY:Dm,scaleZ:Dm,skew:ja,skewX:ja,skewY:ja,distance:It,translateX:It,translateY:It,translateZ:It,x:It,y:It,z:It,perspective:It,transformPerspective:It,opacity:Of,originX:Q2,originY:Q2,originZ:It},ob={borderWidth:It,borderTopWidth:It,borderRightWidth:It,borderBottomWidth:It,borderLeftWidth:It,borderRadius:It,radius:It,borderTopLeftRadius:It,borderTopRightRadius:It,borderBottomRightRadius:It,borderBottomLeftRadius:It,width:It,maxWidth:It,height:It,maxHeight:It,top:It,right:It,bottom:It,left:It,padding:It,paddingTop:It,paddingRight:It,paddingBottom:It,paddingLeft:It,margin:It,marginTop:It,marginRight:It,marginBottom:It,marginLeft:It,backgroundPositionX:It,backgroundPositionY:It,...K3,zIndex:dT,fillOpacity:Of,strokeOpacity:Of,numOctaves:dT},Y3={...ob,color:lr,backgroundColor:lr,outlineColor:lr,fill:lr,stroke:lr,borderColor:lr,borderTopColor:lr,borderRightColor:lr,borderBottomColor:lr,borderLeftColor:lr,filter:px,WebkitFilter:px},aI=e=>Y3[e];function lI(e,t){let i=aI(e);return i!==px&&(i=sl),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const J3=new Set(["auto","none","0"]);function Q3(e,t,i){let a=0,c;for(;a<e.length&&!c;){const d=e[a];typeof d=="string"&&!J3.has(d)&&Bf(d).values.length&&(c=e[a]),a++}if(c&&i)for(const d of t)e[d]=lI(i,c)}class e4 extends ib{constructor(t,i,a,c,d){super(t,i,a,c,d,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:a}=this;if(!i||!i.current)return;super.readKeyframes();for(let w=0;w<t.length;w++){let k=t[w];if(typeof k=="string"&&(k=k.trim(),K1(k))){const I=rI(k,i.current);I!==void 0&&(t[w]=I),w===t.length-1&&(this.finalKeyframe=k)}}if(this.resolveNoneKeyframes(),!iI.has(a)||t.length!==2)return;const[c,d]=t,f=hT(c),u=hT(d);if(f!==u)if(aT(f)&&aT(u))for(let w=0;w<t.length;w++){const k=t[w];typeof k=="string"&&(t[w]=parseFloat(k))}else su[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,a=[];for(let c=0;c<t.length;c++)(t[c]===null||G3(t[c]))&&a.push(c);a.length&&Q3(t,a,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=su[a](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const c=i[i.length-1];c!==void 0&&t.getValue(a,c).jump(c,!1)}measureEndState(){var u;const{element:t,name:i,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const c=t.getValue(i);c&&c.jump(this.measuredOrigin,!1);const d=a.length-1,f=a[d];a[d]=su[i](t.measureViewportBox(),window.getComputedStyle(t.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([w,k])=>{t.getValue(w).set(k)}),this.resolveNoneKeyframes()}}function t4(e,t,i){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let a=document;const c=(i==null?void 0:i[e])??a.querySelectorAll(e);return c?Array.from(c):[]}return Array.from(e)}const uI=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function cI(e){return kE(e)&&"offsetHeight"in e}const fT=30,n4=e=>!isNaN(parseFloat(e));class r4{constructor(t,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{var d;const c=Oi.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((d=this.events.change)==null||d.notify(this.current),this.dependents))for(const f of this.dependents)f.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=Oi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=n4(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new G1);const a=this.events[t].add(i);return t==="change"?()=>{a(),Dn.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,i,a){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Oi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>fT)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,fT);return EE(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,i;(t=this.dependents)==null||t.clear(),(i=this.events.destroy)==null||i.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ah(e,t){return new r4(e,t)}const{schedule:ab}=VE(queueMicrotask,!1),qs={x:!1,y:!1};function hI(){return qs.x||qs.y}function i4(e){return e==="x"||e==="y"?qs[e]?null:(qs[e]=!0,()=>{qs[e]=!1}):qs.x||qs.y?null:(qs.x=qs.y=!0,()=>{qs.x=qs.y=!1})}function dI(e,t){const i=t4(e),a=new AbortController,c={passive:!0,...t,signal:a.signal};return[i,c,()=>a.abort()]}function pT(e){return!(e.pointerType==="touch"||hI())}function s4(e,t,i={}){const[a,c,d]=dI(e,i),f=u=>{if(!pT(u))return;const{target:w}=u,k=t(w,u);if(typeof k!="function"||!w)return;const I=A=>{pT(A)&&(k(A),w.removeEventListener("pointerleave",I))};w.addEventListener("pointerleave",I,c)};return a.forEach(u=>{u.addEventListener("pointerenter",f,c)}),d}const fI=(e,t)=>t?e===t?!0:fI(e,t.parentElement):!1,lb=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,o4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function a4(e){return o4.has(e.tagName)||e.tabIndex!==-1}const ng=new WeakSet;function mT(e){return t=>{t.key==="Enter"&&e(t)}}function Uv(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const l4=(e,t)=>{const i=e.currentTarget;if(!i)return;const a=mT(()=>{if(ng.has(i))return;Uv(i,"down");const c=mT(()=>{Uv(i,"up")}),d=()=>Uv(i,"cancel");i.addEventListener("keyup",c,t),i.addEventListener("blur",d,t)});i.addEventListener("keydown",a,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",a),t)};function gT(e){return lb(e)&&!hI()}function u4(e,t,i={}){const[a,c,d]=dI(e,i),f=u=>{const w=u.currentTarget;if(!gT(u))return;ng.add(w);const k=t(w,u),I=($,H)=>{window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",M),ng.has(w)&&ng.delete(w),gT($)&&typeof k=="function"&&k($,{success:H})},A=$=>{I($,w===window||w===document||i.useGlobalTarget||fI(w,$.target))},M=$=>{I($,!1)};window.addEventListener("pointerup",A,c),window.addEventListener("pointercancel",M,c)};return a.forEach(u=>{(i.useGlobalTarget?window:u).addEventListener("pointerdown",f,c),cI(u)&&(u.addEventListener("focus",k=>l4(k,c)),!a4(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),d}function pI(e){return kE(e)&&"ownerSVGElement"in e}function c4(e){return pI(e)&&e.tagName==="svg"}const oi=e=>!!(e&&e.getVelocity),h4=[...oI,lr,sl],d4=e=>h4.find(sI(e)),ub=ne.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class f4 extends ne.Component{getSnapshotBeforeUpdate(t){const i=this.props.childRef.current;if(i&&t.isPresent&&!this.props.isPresent){const a=i.offsetParent,c=cI(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=i.offsetHeight||0,d.width=i.offsetWidth||0,d.top=i.offsetTop,d.left=i.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p4({children:e,isPresent:t,anchorX:i,root:a}){const c=ne.useId(),d=ne.useRef(null),f=ne.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=ne.useContext(ub);return ne.useInsertionEffect(()=>{const{width:w,height:k,top:I,left:A,right:M}=f.current;if(t||!d.current||!w||!k)return;const $=i==="left"?`left: ${A}`:`right: ${M}`;d.current.dataset.motionPopId=c;const H=document.createElement("style");u&&(H.nonce=u);const Y=a??document.head;return Y.appendChild(H),H.sheet&&H.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${k}px !important;
            ${$}px !important;
            top: ${I}px !important;
          }
        `),()=>{Y.contains(H)&&Y.removeChild(H)}},[t]),Ae.jsx(f4,{isPresent:t,childRef:d,sizeRef:f,children:ne.cloneElement(e,{ref:d})})}const m4=({children:e,initial:t,isPresent:i,onExitComplete:a,custom:c,presenceAffectsLayout:d,mode:f,anchorX:u,root:w})=>{const k=N1(g4),I=ne.useId();let A=!0,M=ne.useMemo(()=>(A=!1,{id:I,initial:t,isPresent:i,custom:c,onExitComplete:$=>{k.set($,!0);for(const H of k.values())if(!H)return;a&&a()},register:$=>(k.set($,!1),()=>k.delete($))}),[i,k,a]);return d&&A&&(M={...M}),ne.useMemo(()=>{k.forEach(($,H)=>k.set(H,!1))},[i]),ne.useEffect(()=>{!i&&!k.size&&a&&a()},[i]),f==="popLayout"&&(e=Ae.jsx(p4,{isPresent:i,anchorX:u,root:w,children:e})),Ae.jsx(uy.Provider,{value:M,children:e})};function g4(){return new Map}function mI(e=!0){const t=ne.useContext(uy);if(t===null)return[!0,null];const{isPresent:i,onExitComplete:a,register:c}=t,d=ne.useId();ne.useEffect(()=>{if(e)return c(d)},[e]);const f=ne.useCallback(()=>e&&a&&a(d),[d,a,e]);return!i&&a?[!1,f]:[!0]}const Rm=e=>e.key||"";function yT(e){const t=[];return ne.Children.forEach(e,i=>{ne.isValidElement(i)&&t.push(i)}),t}const gI=({children:e,custom:t,initial:i=!0,onExitComplete:a,presenceAffectsLayout:c=!0,mode:d="sync",propagate:f=!1,anchorX:u="left",root:w})=>{const[k,I]=mI(f),A=ne.useMemo(()=>yT(e),[e]),M=f&&!k?[]:A.map(Rm),$=ne.useRef(!0),H=ne.useRef(A),Y=N1(()=>new Map),[ae,j]=ne.useState(A),[W,G]=ne.useState(A);TE(()=>{$.current=!1,H.current=A;for(let he=0;he<W.length;he++){const ye=Rm(W[he]);M.includes(ye)?Y.delete(ye):Y.get(ye)!==!0&&Y.set(ye,!1)}},[W,M.length,M.join("-")]);const ee=[];if(A!==ae){let he=[...A];for(let ye=0;ye<W.length;ye++){const Ce=W[ye],Me=Rm(Ce);M.includes(Me)||(he.splice(ye,0,Ce),ee.push(Ce))}return d==="wait"&&ee.length&&(he=ee),G(yT(he)),j(A),null}const{forceRender:de}=ne.useContext(V1);return Ae.jsx(Ae.Fragment,{children:W.map(he=>{const ye=Rm(he),Ce=f&&!k?!1:A===W||M.includes(ye),Me=()=>{if(Y.has(ye))Y.set(ye,!0);else return;let ze=!0;Y.forEach(Re=>{Re||(ze=!1)}),ze&&(de==null||de(),G(H.current),f&&(I==null||I()),a&&a())};return Ae.jsx(m4,{isPresent:Ce,initial:!$.current||i?void 0:!1,custom:t,presenceAffectsLayout:c,mode:d,root:w,onExitComplete:Ce?void 0:Me,anchorX:u,children:he},ye)})})},yI=ne.createContext({strict:!1}),_T={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},lh={};for(const e in _T)lh[e]={isEnabled:t=>_T[e].some(i=>!!t[i])};function y4(e){for(const t in e)lh[t]={...lh[t],...e[t]}}const _4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||_4.has(e)}let _I=e=>!Bg(e);function v4(e){typeof e=="function"&&(_I=t=>t.startsWith("on")?!Bg(t):e(t))}try{v4(require("@emotion/is-prop-valid").default)}catch{}function x4(e,t,i){const a={};for(const c in e)c==="values"&&typeof e.values=="object"||(_I(c)||i===!0&&Bg(c)||!t&&!Bg(c)||e.draggable&&c.startsWith("onDrag"))&&(a[c]=e[c]);return a}const cy=ne.createContext({});function hy(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Vf(e){return typeof e=="string"||Array.isArray(e)}const cb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hb=["initial",...cb];function dy(e){return hy(e.animate)||hb.some(t=>Vf(e[t]))}function vI(e){return!!(dy(e)||e.variants)}function b4(e,t){if(dy(e)){const{initial:i,animate:a}=e;return{initial:i===!1||Vf(i)?i:void 0,animate:Vf(a)?a:void 0}}return e.inherit!==!1?t:{}}function w4(e){const{initial:t,animate:i}=b4(e,ne.useContext(cy));return ne.useMemo(()=>({initial:t,animate:i}),[vT(t),vT(i)])}function vT(e){return Array.isArray(e)?e.join(" "):e}const Nf={};function S4(e){for(const t in e)Nf[t]=e[t],X1(t)&&(Nf[t].isCSSVariable=!0)}function xI(e,{layout:t,layoutId:i}){return bh.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!Nf[e]||e==="opacity")}const T4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},C4=xh.length;function k4(e,t,i){let a="",c=!0;for(let d=0;d<C4;d++){const f=xh[d],u=e[f];if(u===void 0)continue;let w=!0;if(typeof u=="number"?w=u===(f.startsWith("scale")?1:0):w=parseFloat(u)===0,!w||i){const k=uI(u,ob[f]);if(!w){c=!1;const I=T4[f]||f;a+=`${I}(${k}) `}i&&(t[f]=k)}}return a=a.trim(),i?a=i(t,c?"":a):c&&(a="none"),a}function db(e,t,i){const{style:a,vars:c,transformOrigin:d}=e;let f=!1,u=!1;for(const w in t){const k=t[w];if(bh.has(w)){f=!0;continue}else if(X1(w)){c[w]=k;continue}else{const I=uI(k,ob[w]);w.startsWith("origin")?(u=!0,d[w]=I):a[w]=I}}if(t.transform||(f||i?a.transform=k4(t,e.transform,i):a.transform&&(a.transform="none")),u){const{originX:w="50%",originY:k="50%",originZ:I=0}=d;a.transformOrigin=`${w} ${k} ${I}`}}const fb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bI(e,t,i){for(const a in t)!oi(t[a])&&!xI(a,i)&&(e[a]=t[a])}function P4({transformTemplate:e},t){return ne.useMemo(()=>{const i=fb();return db(i,t,e),Object.assign({},i.vars,i.style)},[t])}function E4(e,t){const i=e.style||{},a={};return bI(a,i,e),Object.assign(a,P4(e,t)),a}function I4(e,t){const i={},a=E4(e,t);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=a,i}const M4={offset:"stroke-dashoffset",array:"stroke-dasharray"},A4={offset:"strokeDashoffset",array:"strokeDasharray"};function z4(e,t,i=1,a=0,c=!0){e.pathLength=1;const d=c?M4:A4;e[d.offset]=It.transform(-a);const f=It.transform(t),u=It.transform(i);e[d.array]=`${f} ${u}`}function wI(e,{attrX:t,attrY:i,attrScale:a,pathLength:c,pathSpacing:d=1,pathOffset:f=0,...u},w,k,I){if(db(e,u,k),w){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:A,style:M}=e;A.transform&&(M.transform=A.transform,delete A.transform),(M.transform||A.transformOrigin)&&(M.transformOrigin=A.transformOrigin??"50% 50%",delete A.transformOrigin),M.transform&&(M.transformBox=(I==null?void 0:I.transformBox)??"fill-box",delete A.transformBox),t!==void 0&&(A.x=t),i!==void 0&&(A.y=i),a!==void 0&&(A.scale=a),c!==void 0&&z4(A,c,d,f,!1)}const SI=()=>({...fb(),attrs:{}}),TI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function D4(e,t,i,a){const c=ne.useMemo(()=>{const d=SI();return wI(d,t,TI(a),e.transformTemplate,e.style),{...d.attrs,style:{...d.style}}},[t]);if(e.style){const d={};bI(d,e.style,e),c.style={...d,...c.style}}return c}const R4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pb(e){return typeof e!="string"||e.includes("-")?!1:!!(R4.indexOf(e)>-1||/[A-Z]/u.test(e))}function L4(e,t,i,{latestValues:a},c,d=!1){const u=(pb(e)?D4:I4)(t,a,c,e),w=x4(t,typeof e=="string",d),k=e!==ne.Fragment?{...w,...u,ref:i}:{},{children:I}=t,A=ne.useMemo(()=>oi(I)?I.get():I,[I]);return ne.createElement(e,{...k,children:A})}function xT(e){const t=[{},{}];return e==null||e.values.forEach((i,a)=>{t[0][a]=i.get(),t[1][a]=i.getVelocity()}),t}function mb(e,t,i,a){if(typeof t=="function"){const[c,d]=xT(a);t=t(i!==void 0?i:e.custom,c,d)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[c,d]=xT(a);t=t(i!==void 0?i:e.custom,c,d)}return t}function rg(e){return oi(e)?e.get():e}function F4({scrapeMotionValuesFromProps:e,createRenderState:t},i,a,c){return{latestValues:O4(i,a,c,e),renderState:t()}}function O4(e,t,i,a){const c={},d=a(e,{});for(const M in d)c[M]=rg(d[M]);let{initial:f,animate:u}=e;const w=dy(e),k=vI(e);t&&k&&!w&&e.inherit!==!1&&(f===void 0&&(f=t.initial),u===void 0&&(u=t.animate));let I=i?i.initial===!1:!1;I=I||f===!1;const A=I?u:f;if(A&&typeof A!="boolean"&&!hy(A)){const M=Array.isArray(A)?A:[A];for(let $=0;$<M.length;$++){const H=mb(e,M[$]);if(H){const{transitionEnd:Y,transition:ae,...j}=H;for(const W in j){let G=j[W];if(Array.isArray(G)){const ee=I?G.length-1:0;G=G[ee]}G!==null&&(c[W]=G)}for(const W in Y)c[W]=Y[W]}}}return c}const CI=e=>(t,i)=>{const a=ne.useContext(cy),c=ne.useContext(uy),d=()=>F4(e,t,a,c);return i?d():N1(d)};function gb(e,t,i){var d;const{style:a}=e,c={};for(const f in a)(oi(a[f])||t.style&&oi(t.style[f])||xI(f,e)||((d=i==null?void 0:i.getValue(f))==null?void 0:d.liveStyle)!==void 0)&&(c[f]=a[f]);return c}const B4=CI({scrapeMotionValuesFromProps:gb,createRenderState:fb});function kI(e,t,i){const a=gb(e,t,i);for(const c in e)if(oi(e[c])||oi(t[c])){const d=xh.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;a[d]=e[c]}return a}const V4=CI({scrapeMotionValuesFromProps:kI,createRenderState:SI}),N4=Symbol.for("motionComponentSymbol");function Bc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function j4(e,t,i){return ne.useCallback(a=>{a&&e.onMount&&e.onMount(a),t&&(a?t.mount(a):t.unmount()),i&&(typeof i=="function"?i(a):Bc(i)&&(i.current=a))},[t])}const yb=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$4="framerAppearId",PI="data-"+yb($4),EI=ne.createContext({});function U4(e,t,i,a,c){var Y,ae;const{visualElement:d}=ne.useContext(cy),f=ne.useContext(yI),u=ne.useContext(uy),w=ne.useContext(ub).reducedMotion,k=ne.useRef(null);a=a||f.renderer,!k.current&&a&&(k.current=a(e,{visualState:t,parent:d,props:i,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:w}));const I=k.current,A=ne.useContext(EI);I&&!I.projection&&c&&(I.type==="html"||I.type==="svg")&&W4(k.current,i,c,A);const M=ne.useRef(!1);ne.useInsertionEffect(()=>{I&&M.current&&I.update(i,u)});const $=i[PI],H=ne.useRef(!!$&&!((Y=window.MotionHandoffIsComplete)!=null&&Y.call(window,$))&&((ae=window.MotionHasOptimisedAnimation)==null?void 0:ae.call(window,$)));return TE(()=>{I&&(M.current=!0,window.MotionIsMounted=!0,I.updateFeatures(),I.scheduleRenderMicrotask(),H.current&&I.animationState&&I.animationState.animateChanges())}),ne.useEffect(()=>{I&&(!H.current&&I.animationState&&I.animationState.animateChanges(),H.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,$)}),H.current=!1),I.enteringChildren=void 0)}),I}function W4(e,t,i,a){const{layoutId:c,layout:d,drag:f,dragConstraints:u,layoutScroll:w,layoutRoot:k,layoutCrossfade:I}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:II(e.parent)),e.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!f||u&&Bc(u),visualElement:e,animationType:typeof d=="string"?d:"both",initialPromotionConfig:a,crossfade:I,layoutScroll:w,layoutRoot:k})}function II(e){if(e)return e.options.allowProjection!==!1?e.projection:II(e.parent)}function Wv(e,{forwardMotionProps:t=!1}={},i,a){i&&y4(i);const c=pb(e)?V4:B4;function d(u,w){let k;const I={...ne.useContext(ub),...u,layoutId:q4(u)},{isStatic:A}=I,M=w4(u),$=c(u,A);if(!A&&j1){G4();const H=H4(I);k=H.MeasureLayout,M.visualElement=U4(e,$,I,a,H.ProjectionNode)}return Ae.jsxs(cy.Provider,{value:M,children:[k&&M.visualElement?Ae.jsx(k,{visualElement:M.visualElement,...I}):null,L4(e,u,j4($,M.visualElement,w),$,A,t)]})}d.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const f=ne.forwardRef(d);return f[N4]=e,f}function q4({layoutId:e}){const t=ne.useContext(V1).id;return t&&e!==void 0?t+"-"+e:e}function G4(e,t){ne.useContext(yI).strict}function H4(e){const{drag:t,layout:i}=lh;if(!t&&!i)return{};const a={...t,...i};return{MeasureLayout:t!=null&&t.isEnabled(e)||i!=null&&i.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function Z4(e,t){if(typeof Proxy>"u")return Wv;const i=new Map,a=(d,f)=>Wv(d,f,e,t),c=(d,f)=>a(d,f);return new Proxy(c,{get:(d,f)=>f==="create"?a:(i.has(f)||i.set(f,Wv(f,void 0,e,t)),i.get(f))})}function MI({top:e,left:t,right:i,bottom:a}){return{x:{min:t,max:i},y:{min:e,max:a}}}function X4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function K4(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:a.y,right:a.x}}function qv(e){return e===void 0||e===1}function mx({scale:e,scaleX:t,scaleY:i}){return!qv(e)||!qv(t)||!qv(i)}function Gl(e){return mx(e)||AI(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function AI(e){return bT(e.x)||bT(e.y)}function bT(e){return e&&e!=="0%"}function Vg(e,t,i){const a=e-i,c=t*a;return i+c}function wT(e,t,i,a,c){return c!==void 0&&(e=Vg(e,c,a)),Vg(e,i,a)+t}function gx(e,t=0,i=1,a,c){e.min=wT(e.min,t,i,a,c),e.max=wT(e.max,t,i,a,c)}function zI(e,{x:t,y:i}){gx(e.x,t.translate,t.scale,t.originPoint),gx(e.y,i.translate,i.scale,i.originPoint)}const ST=.999999999999,TT=1.0000000000001;function Y4(e,t,i,a=!1){const c=i.length;if(!c)return;t.x=t.y=1;let d,f;for(let u=0;u<c;u++){d=i[u],f=d.projectionDelta;const{visualElement:w}=d.options;w&&w.props.style&&w.props.style.display==="contents"||(a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Nc(e,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,zI(e,f)),a&&Gl(d.latestValues)&&Nc(e,d.latestValues))}t.x<TT&&t.x>ST&&(t.x=1),t.y<TT&&t.y>ST&&(t.y=1)}function Vc(e,t){e.min=e.min+t,e.max=e.max+t}function CT(e,t,i,a,c=.5){const d=On(e.min,e.max,c);gx(e,t,i,d,a)}function Nc(e,t){CT(e.x,t.x,t.scaleX,t.scale,t.originX),CT(e.y,t.y,t.scaleY,t.scale,t.originY)}function DI(e,t){return MI(K4(e.getBoundingClientRect(),t))}function J4(e,t,i){const a=DI(e,i),{scroll:c}=t;return c&&(Vc(a.x,c.offset.x),Vc(a.y,c.offset.y)),a}const kT=()=>({translate:0,scale:1,origin:0,originPoint:0}),jc=()=>({x:kT(),y:kT()}),PT=()=>({min:0,max:0}),Qn=()=>({x:PT(),y:PT()}),yx={current:null},RI={current:!1};function Q4(){if(RI.current=!0,!!j1)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>yx.current=e.matches;e.addEventListener("change",t),t()}else yx.current=!1}const eF=new WeakMap;function tF(e,t,i){for(const a in t){const c=t[a],d=i[a];if(oi(c))e.addValue(a,c);else if(oi(d))e.addValue(a,ah(c,{owner:e}));else if(d!==c)if(e.hasValue(a)){const f=e.getValue(a);f.liveStyle===!0?f.jump(c):f.hasAnimated||f.set(c)}else{const f=e.getStaticValue(a);e.addValue(a,ah(f!==void 0?f:c,{owner:e}))}}for(const a in i)t[a]===void 0&&e.removeValue(a);return t}const ET=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nF{scrapeMotionValuesFromProps(t,i,a){return{}}constructor({parent:t,props:i,presenceContext:a,reducedMotionConfig:c,blockInitialAnimation:d,visualState:f},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ib,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const M=Oi.now();this.renderScheduledAt<M&&(this.renderScheduledAt=M,Dn.render(this.render,!1,!0))};const{latestValues:w,renderState:k}=f;this.latestValues=w,this.baseTarget={...w},this.initialValues=i.initial?{...w}:{},this.renderState=k,this.parent=t,this.props=i,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=u,this.blockInitialAnimation=!!d,this.isControllingVariants=dy(i),this.isVariantNode=vI(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:I,...A}=this.scrapeMotionValuesFromProps(i,{},this);for(const M in A){const $=A[M];w[M]!==void 0&&oi($)&&$.set(w[M])}}mount(t){var i;this.current=t,eF.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,c)=>this.bindToMotionValue(c,a)),RI.current||Q4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yx.current,(i=this.parent)==null||i.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),il(this.notifyUpdate),il(this.render),this.valueSubscriptions.forEach(i=>i()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const i in this.events)this.events[i].clear();for(const i in this.features){const a=this.features[i];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,i){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=bh.has(t);a&&this.onBindTransform&&this.onBindTransform();const c=i.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&Dn.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{c(),d&&d(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in lh){const i=lh[t];if(!i)continue;const{isEnabled:a,Feature:c}=i;if(!this.features[t]&&c&&a(this.props)&&(this.features[t]=new c(this)),this.features[t]){const d=this.features[t];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let a=0;a<ET.length;a++){const c=ET[a];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const d="on"+c,f=t[d];f&&(this.propEventSubscriptions[c]=this.on(c,f))}this.prevMotionValues=tF(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const a=this.values.get(t);i!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&i!==void 0&&(a=ah(i===null?void 0:i,{owner:this}),this.addValue(t,a)),a}readValue(t,i){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(CE(a)||PE(a))?a=parseFloat(a):!d4(a)&&sl.test(i)&&(a=lI(t,i)),this.setBaseTarget(t,oi(a)?a.get():a)),oi(a)?a.get():a}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var d;const{initial:i}=this.props;let a;if(typeof i=="string"||typeof i=="object"){const f=mb(this.props,i,(d=this.presenceContext)==null?void 0:d.custom);f&&(a=f[t])}if(i&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!oi(c)?c:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new G1),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}scheduleRenderMicrotask(){ab.render(this.render)}}class LI extends nF{constructor(){super(...arguments),this.KeyframeResolver=e4}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:a}){delete i[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;oi(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function FI(e,{style:t,vars:i},a,c){const d=e.style;let f;for(f in t)d[f]=t[f];c==null||c.applyProjectionStyles(d,a);for(f in i)d.setProperty(f,i[f])}function rF(e){return window.getComputedStyle(e)}class iF extends LI{constructor(){super(...arguments),this.type="html",this.renderInstance=FI}readValueFromInstance(t,i){var a;if(bh.has(i))return(a=this.projection)!=null&&a.isProjecting?lx(i):v3(t,i);{const c=rF(t),d=(X1(i)?c.getPropertyValue(i):c[i])||0;return typeof d=="string"?d.trim():d}}measureInstanceViewportBox(t,{transformPagePoint:i}){return DI(t,i)}build(t,i,a){db(t,i,a.transformTemplate)}scrapeMotionValuesFromProps(t,i,a){return gb(t,i,a)}}const OI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sF(e,t,i,a){FI(e,t,void 0,a);for(const c in t.attrs)e.setAttribute(OI.has(c)?c:yb(c),t.attrs[c])}class oF extends LI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qn}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(bh.has(i)){const a=aI(i);return a&&a.default||0}return i=OI.has(i)?i:yb(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,a){return kI(t,i,a)}build(t,i,a){wI(t,i,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,i,a,c){sF(t,i,a,c)}mount(t){this.isSVGTag=TI(t.tagName),super.mount(t)}}const aF=(e,t)=>pb(e)?new oF(t):new iF(t,{allowProjection:e!==ne.Fragment});function Xc(e,t,i){const a=e.getProps();return mb(a,t,i!==void 0?i:a.custom,e)}const _x=e=>Array.isArray(e);function lF(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,ah(i))}function uF(e){return _x(e)?e[e.length-1]||0:e}function cF(e,t){const i=Xc(e,t);let{transitionEnd:a={},transition:c={},...d}=i||{};d={...d,...a};for(const f in d){const u=uF(d[f]);lF(e,f,u)}}function hF(e){return!!(oi(e)&&e.add)}function vx(e,t){const i=e.getValue("willChange");if(hF(i))return i.add(t);if(!i&&Qo.WillChange){const a=new Qo.WillChange("auto");e.addValue("willChange",a),a.add(t)}}function BI(e){return e.props[PI]}const dF=e=>e!==null;function fF(e,{repeat:t,repeatType:i="loop"},a){const c=e.filter(dF),d=t&&i!=="loop"&&t%2===1?0:c.length-1;return c[d]}const pF={type:"spring",stiffness:500,damping:25,restSpeed:10},mF=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),gF={type:"keyframes",duration:.8},yF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_F=(e,{keyframes:t})=>t.length>2?gF:bh.has(e)?e.startsWith("scale")?mF(t[1]):pF:yF;function vF({when:e,delay:t,delayChildren:i,staggerChildren:a,staggerDirection:c,repeat:d,repeatType:f,repeatDelay:u,from:w,elapsed:k,...I}){return!!Object.keys(I).length}const _b=(e,t,i,a={},c,d)=>f=>{const u=sb(a,e)||{},w=u.delay||a.delay||0;let{elapsed:k=0}=a;k=k-yo(w);const I={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-k,onUpdate:M=>{t.set(M),u.onUpdate&&u.onUpdate(M)},onComplete:()=>{f(),u.onComplete&&u.onComplete()},name:e,motionValue:t,element:d?void 0:c};vF(u)||Object.assign(I,_F(e,I)),I.duration&&(I.duration=yo(I.duration)),I.repeatDelay&&(I.repeatDelay=yo(I.repeatDelay)),I.from!==void 0&&(I.keyframes[0]=I.from);let A=!1;if((I.type===!1||I.duration===0&&!I.repeatDelay)&&(fx(I),I.delay===0&&(A=!0)),(Qo.instantAnimations||Qo.skipAnimations)&&(A=!0,fx(I),I.delay=0),I.allowFlatten=!u.type&&!u.ease,A&&!d&&t.get()!==void 0){const M=fF(I.keyframes,u);if(M!==void 0){Dn.update(()=>{I.onUpdate(M),I.onComplete()});return}}return u.isSync?new rb(I):new $3(I)};function xF({protectedKeys:e,needsAnimating:t},i){const a=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,a}function VI(e,t,{delay:i=0,transitionOverride:a,type:c}={}){let{transition:d=e.getDefaultTransition(),transitionEnd:f,...u}=t;a&&(d=a);const w=[],k=c&&e.animationState&&e.animationState.getState()[c];for(const I in u){const A=e.getValue(I,e.latestValues[I]??null),M=u[I];if(M===void 0||k&&xF(k,I))continue;const $={delay:i,...sb(d||{},I)},H=A.get();if(H!==void 0&&!A.isAnimating&&!Array.isArray(M)&&M===H&&!$.velocity)continue;let Y=!1;if(window.MotionHandoffAnimation){const j=BI(e);if(j){const W=window.MotionHandoffAnimation(j,I,Dn);W!==null&&($.startTime=W,Y=!0)}}vx(e,I),A.start(_b(I,A,M,e.shouldReduceMotion&&iI.has(I)?{type:!1}:$,e,Y));const ae=A.animation;ae&&w.push(ae)}return f&&Promise.all(w).then(()=>{Dn.update(()=>{f&&cF(e,f)})}),w}function NI(e,t,i,a=0,c=1){const d=Array.from(e).sort((k,I)=>k.sortNodePosition(I)).indexOf(t),f=e.size,u=(f-1)*a;return typeof i=="function"?i(d,f):c===1?d*a:u-d*a}function xx(e,t,i={}){var w;const a=Xc(e,t,i.type==="exit"?(w=e.presenceContext)==null?void 0:w.custom:void 0);let{transition:c=e.getDefaultTransition()||{}}=a||{};i.transitionOverride&&(c=i.transitionOverride);const d=a?()=>Promise.all(VI(e,a,i)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(k=0)=>{const{delayChildren:I=0,staggerChildren:A,staggerDirection:M}=c;return bF(e,t,k,I,A,M,i)}:()=>Promise.resolve(),{when:u}=c;if(u){const[k,I]=u==="beforeChildren"?[d,f]:[f,d];return k().then(()=>I())}else return Promise.all([d(),f(i.delay)])}function bF(e,t,i=0,a=0,c=0,d=1,f){const u=[];for(const w of e.variantChildren)w.notify("AnimationStart",t),u.push(xx(w,t,{...f,delay:i+(typeof a=="function"?0:a)+NI(e.variantChildren,w,a,c,d)}).then(()=>w.notify("AnimationComplete",t)));return Promise.all(u)}function wF(e,t,i={}){e.notify("AnimationStart",t);let a;if(Array.isArray(t)){const c=t.map(d=>xx(e,d,i));a=Promise.all(c)}else if(typeof t=="string")a=xx(e,t,i);else{const c=typeof t=="function"?Xc(e,t,i.custom):t;a=Promise.all(VI(e,c,i))}return a.then(()=>{e.notify("AnimationComplete",t)})}function jI(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let a=0;a<i;a++)if(t[a]!==e[a])return!1;return!0}const SF=hb.length;function $I(e){if(!e)return;if(!e.isControllingVariants){const i=e.parent?$I(e.parent)||{}:{};return e.props.initial!==void 0&&(i.initial=e.props.initial),i}const t={};for(let i=0;i<SF;i++){const a=hb[i],c=e.props[a];(Vf(c)||c===!1)&&(t[a]=c)}return t}const TF=[...cb].reverse(),CF=cb.length;function kF(e){return t=>Promise.all(t.map(({animation:i,options:a})=>wF(e,i,a)))}function PF(e){let t=kF(e),i=IT(),a=!0;const c=w=>(k,I)=>{var M;const A=Xc(e,I,w==="exit"?(M=e.presenceContext)==null?void 0:M.custom:void 0);if(A){const{transition:$,transitionEnd:H,...Y}=A;k={...k,...Y,...H}}return k};function d(w){t=w(e)}function f(w){const{props:k}=e,I=$I(e.parent)||{},A=[],M=new Set;let $={},H=1/0;for(let ae=0;ae<CF;ae++){const j=TF[ae],W=i[j],G=k[j]!==void 0?k[j]:I[j],ee=Vf(G),de=j===w?W.isActive:null;de===!1&&(H=ae);let he=G===I[j]&&G!==k[j]&&ee;if(he&&a&&e.manuallyAnimateOnMount&&(he=!1),W.protectedKeys={...$},!W.isActive&&de===null||!G&&!W.prevProp||hy(G)||typeof G=="boolean")continue;const ye=EF(W.prevProp,G);let Ce=ye||j===w&&W.isActive&&!he&&ee||ae>H&&ee,Me=!1;const ze=Array.isArray(G)?G:[G];let Re=ze.reduce(c(j),{});de===!1&&(Re={});const{prevResolvedValues:te={}}=W,Fe={...te,...Re},Be=Je=>{Ce=!0,M.has(Je)&&(Me=!0,M.delete(Je)),W.needsAnimating[Je]=!0;const Ne=e.getValue(Je);Ne&&(Ne.liveStyle=!1)};for(const Je in Fe){const Ne=Re[Je],$e=te[Je];if($.hasOwnProperty(Je))continue;let at=!1;_x(Ne)&&_x($e)?at=!jI(Ne,$e):at=Ne!==$e,at?Ne!=null?Be(Je):M.add(Je):Ne!==void 0&&M.has(Je)?Be(Je):W.protectedKeys[Je]=!0}W.prevProp=G,W.prevResolvedValues=Re,W.isActive&&($={...$,...Re}),a&&e.blockInitialAnimation&&(Ce=!1);const Ge=he&&ye;Ce&&(!Ge||Me)&&A.push(...ze.map(Je=>{const Ne={type:j};if(typeof Je=="string"&&a&&!Ge&&e.manuallyAnimateOnMount&&e.parent){const{parent:$e}=e,at=Xc($e,Je);if($e.enteringChildren&&at){const{delayChildren:St}=at.transition||{};Ne.delay=NI($e.enteringChildren,e,St)}}return{animation:Je,options:Ne}}))}if(M.size){const ae={};if(typeof k.initial!="boolean"){const j=Xc(e,Array.isArray(k.initial)?k.initial[0]:k.initial);j&&j.transition&&(ae.transition=j.transition)}M.forEach(j=>{const W=e.getBaseTarget(j),G=e.getValue(j);G&&(G.liveStyle=!0),ae[j]=W??null}),A.push({animation:ae})}let Y=!!A.length;return a&&(k.initial===!1||k.initial===k.animate)&&!e.manuallyAnimateOnMount&&(Y=!1),a=!1,Y?t(A):Promise.resolve()}function u(w,k){var A;if(i[w].isActive===k)return Promise.resolve();(A=e.variantChildren)==null||A.forEach(M=>{var $;return($=M.animationState)==null?void 0:$.setActive(w,k)}),i[w].isActive=k;const I=f(w);for(const M in i)i[M].protectedKeys={};return I}return{animateChanges:f,setActive:u,setAnimateFunction:d,getState:()=>i,reset:()=>{i=IT(),a=!0}}}function EF(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!jI(t,e):!1}function Nl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function IT(){return{animate:Nl(!0),whileInView:Nl(),whileHover:Nl(),whileTap:Nl(),whileDrag:Nl(),whileFocus:Nl(),exit:Nl()}}class hl{constructor(t){this.isMounted=!1,this.node=t}update(){}}class IF extends hl{constructor(t){super(t),t.animationState||(t.animationState=PF(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();hy(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let MF=0;class AF extends hl{constructor(){super(...arguments),this.id=MF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const c=this.node.animationState.setActive("exit",!t);i&&!t&&c.then(()=>{i(this.id)})}mount(){const{register:t,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const zF={animation:{Feature:IF},exit:{Feature:AF}};function jf(e,t,i,a={passive:!0}){return e.addEventListener(t,i,a),()=>e.removeEventListener(t,i)}function sp(e){return{point:{x:e.pageX,y:e.pageY}}}const DF=e=>t=>lb(t)&&e(t,sp(t));function ff(e,t,i,a){return jf(e,t,DF(i),a)}const UI=1e-4,RF=1-UI,LF=1+UI,WI=.01,FF=0-WI,OF=0+WI;function vi(e){return e.max-e.min}function BF(e,t,i){return Math.abs(e-t)<=i}function MT(e,t,i,a=.5){e.origin=a,e.originPoint=On(t.min,t.max,e.origin),e.scale=vi(i)/vi(t),e.translate=On(i.min,i.max,e.origin)-e.originPoint,(e.scale>=RF&&e.scale<=LF||isNaN(e.scale))&&(e.scale=1),(e.translate>=FF&&e.translate<=OF||isNaN(e.translate))&&(e.translate=0)}function pf(e,t,i,a){MT(e.x,t.x,i.x,a?a.originX:void 0),MT(e.y,t.y,i.y,a?a.originY:void 0)}function AT(e,t,i){e.min=i.min+t.min,e.max=e.min+vi(t)}function VF(e,t,i){AT(e.x,t.x,i.x),AT(e.y,t.y,i.y)}function zT(e,t,i){e.min=t.min-i.min,e.max=e.min+vi(t)}function mf(e,t,i){zT(e.x,t.x,i.x),zT(e.y,t.y,i.y)}function Ts(e){return[e("x"),e("y")]}const qI=({current:e})=>e?e.ownerDocument.defaultView:null,DT=(e,t)=>Math.abs(e-t);function NF(e,t){const i=DT(e.x,t.x),a=DT(e.y,t.y);return Math.sqrt(i**2+a**2)}class GI{constructor(t,i,{transformPagePoint:a,contextWindow:c=window,dragSnapToOrigin:d=!1,distanceThreshold:f=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Hv(this.lastMoveEventInfo,this.history),$=this.startEvent!==null,H=NF(M.offset,{x:0,y:0})>=this.distanceThreshold;if(!$&&!H)return;const{point:Y}=M,{timestamp:ae}=$r;this.history.push({...Y,timestamp:ae});const{onStart:j,onMove:W}=this.handlers;$||(j&&j(this.lastMoveEvent,M),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,M)},this.handlePointerMove=(M,$)=>{this.lastMoveEvent=M,this.lastMoveEventInfo=Gv($,this.transformPagePoint),Dn.update(this.updatePoint,!0)},this.handlePointerUp=(M,$)=>{this.end();const{onEnd:H,onSessionEnd:Y,resumeAnimation:ae}=this.handlers;if(this.dragSnapToOrigin&&ae&&ae(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Hv(M.type==="pointercancel"?this.lastMoveEventInfo:Gv($,this.transformPagePoint),this.history);this.startEvent&&H&&H(M,j),Y&&Y(M,j)},!lb(t))return;this.dragSnapToOrigin=d,this.handlers=i,this.transformPagePoint=a,this.distanceThreshold=f,this.contextWindow=c||window;const u=sp(t),w=Gv(u,this.transformPagePoint),{point:k}=w,{timestamp:I}=$r;this.history=[{...k,timestamp:I}];const{onSessionStart:A}=i;A&&A(t,Hv(w,this.history)),this.removeListeners=np(ff(this.contextWindow,"pointermove",this.handlePointerMove),ff(this.contextWindow,"pointerup",this.handlePointerUp),ff(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),il(this.updatePoint)}}function Gv(e,t){return t?{point:t(e.point)}:e}function RT(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Hv({point:e},t){return{point:e,delta:RT(e,HI(t)),offset:RT(e,jF(t)),velocity:$F(t,.1)}}function jF(e){return e[0]}function HI(e){return e[e.length-1]}function $F(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,a=null;const c=HI(e);for(;i>=0&&(a=e[i],!(c.timestamp-a.timestamp>yo(t)));)i--;if(!a)return{x:0,y:0};const d=_o(c.timestamp-a.timestamp);if(d===0)return{x:0,y:0};const f={x:(c.x-a.x)/d,y:(c.y-a.y)/d};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function UF(e,{min:t,max:i},a){return t!==void 0&&e<t?e=a?On(t,e,a.min):Math.max(e,t):i!==void 0&&e>i&&(e=a?On(i,e,a.max):Math.min(e,i)),e}function LT(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function WF(e,{top:t,left:i,bottom:a,right:c}){return{x:LT(e.x,i,c),y:LT(e.y,t,a)}}function FT(e,t){let i=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,a]=[a,i]),{min:i,max:a}}function qF(e,t){return{x:FT(e.x,t.x),y:FT(e.y,t.y)}}function GF(e,t){let i=.5;const a=vi(e),c=vi(t);return c>a?i=Ff(t.min,t.max-a,e.min):a>c&&(i=Ff(e.min,e.max-c,t.min)),Jo(0,1,i)}function HF(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const bx=.35;function ZF(e=bx){return e===!1?e=0:e===!0&&(e=bx),{x:OT(e,"left","right"),y:OT(e,"top","bottom")}}function OT(e,t,i){return{min:BT(e,t),max:BT(e,i)}}function BT(e,t){return typeof e=="number"?e:e[t]||0}const XF=new WeakMap;class KF{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:i=!1,distanceThreshold:a}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const d=A=>{const{dragSnapToOrigin:M}=this.getProps();M?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(sp(A).point)},f=(A,M)=>{const{drag:$,dragPropagation:H,onDragStart:Y}=this.getProps();if($&&!H&&(this.openDragLock&&this.openDragLock(),this.openDragLock=i4($),!this.openDragLock))return;this.latestPointerEvent=A,this.latestPanInfo=M,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ts(j=>{let W=this.getAxisMotionValue(j).get()||0;if(vo.test(W)){const{projection:G}=this.visualElement;if(G&&G.layout){const ee=G.layout.layoutBox[j];ee&&(W=vi(ee)*(parseFloat(W)/100))}}this.originPoint[j]=W}),Y&&Dn.postRender(()=>Y(A,M)),vx(this.visualElement,"transform");const{animationState:ae}=this.visualElement;ae&&ae.setActive("whileDrag",!0)},u=(A,M)=>{this.latestPointerEvent=A,this.latestPanInfo=M;const{dragPropagation:$,dragDirectionLock:H,onDirectionLock:Y,onDrag:ae}=this.getProps();if(!$&&!this.openDragLock)return;const{offset:j}=M;if(H&&this.currentDirection===null){this.currentDirection=YF(j),this.currentDirection!==null&&Y&&Y(this.currentDirection);return}this.updateAxis("x",M.point,j),this.updateAxis("y",M.point,j),this.visualElement.render(),ae&&ae(A,M)},w=(A,M)=>{this.latestPointerEvent=A,this.latestPanInfo=M,this.stop(A,M),this.latestPointerEvent=null,this.latestPanInfo=null},k=()=>Ts(A=>{var M;return this.getAnimationState(A)==="paused"&&((M=this.getAxisMotionValue(A).animation)==null?void 0:M.play())}),{dragSnapToOrigin:I}=this.getProps();this.panSession=new GI(t,{onSessionStart:d,onStart:f,onMove:u,onSessionEnd:w,resumeAnimation:k},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:I,distanceThreshold:a,contextWindow:qI(this.visualElement)})}stop(t,i){const a=t||this.latestPointerEvent,c=i||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!c||!a)return;const{velocity:f}=c;this.startAnimation(f);const{onDragEnd:u}=this.getProps();u&&Dn.postRender(()=>u(a,c))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(t,i,a){const{drag:c}=this.getProps();if(!a||!Lm(t,c,this.currentDirection))return;const d=this.getAxisMotionValue(t);let f=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(f=UF(f,this.constraints[t],this.elastic[t])),d.set(f)}resolveConstraints(){var d;const{dragConstraints:t,dragElastic:i}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(d=this.visualElement.projection)==null?void 0:d.layout,c=this.constraints;t&&Bc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=WF(a.layoutBox,t):this.constraints=!1,this.elastic=ZF(i),c!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Ts(f=>{this.constraints!==!1&&this.getAxisMotionValue(f)&&(this.constraints[f]=HF(a.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!Bc(t))return!1;const a=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const d=J4(a,c.root,this.visualElement.getTransformPagePoint());let f=qF(c.layout.layoutBox,d);if(i){const u=i(X4(f));this.hasMutatedConstraints=!!u,u&&(f=MI(u))}return f}startAnimation(t){const{drag:i,dragMomentum:a,dragElastic:c,dragTransition:d,dragSnapToOrigin:f,onDragTransitionEnd:u}=this.getProps(),w=this.constraints||{},k=Ts(I=>{if(!Lm(I,i,this.currentDirection))return;let A=w&&w[I]||{};f&&(A={min:0,max:0});const M=c?200:1e6,$=c?40:1e7,H={type:"inertia",velocity:a?t[I]:0,bounceStiffness:M,bounceDamping:$,timeConstant:750,restDelta:1,restSpeed:10,...d,...A};return this.startAxisValueAnimation(I,H)});return Promise.all(k).then(u)}startAxisValueAnimation(t,i){const a=this.getAxisMotionValue(t);return vx(this.visualElement,t),a.start(_b(t,a,0,i,this.visualElement,!1))}stopAnimation(){Ts(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ts(t=>{var i;return(i=this.getAxisMotionValue(t).animation)==null?void 0:i.pause()})}getAnimationState(t){var i;return(i=this.getAxisMotionValue(t).animation)==null?void 0:i.state}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),c=a[i];return c||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Ts(i=>{const{drag:a}=this.getProps();if(!Lm(i,a,this.currentDirection))return;const{projection:c}=this.visualElement,d=this.getAxisMotionValue(i);if(c&&c.layout){const{min:f,max:u}=c.layout.layoutBox[i];d.set(t[i]-On(f,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:a}=this.visualElement;if(!Bc(i)||!a||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Ts(f=>{const u=this.getAxisMotionValue(f);if(u&&this.constraints!==!1){const w=u.get();c[f]=GF({min:w,max:w},this.constraints[f])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Ts(f=>{if(!Lm(f,t,null))return;const u=this.getAxisMotionValue(f),{min:w,max:k}=this.constraints[f];u.set(On(w,k,c[f]))})}addListeners(){if(!this.visualElement.current)return;XF.set(this.visualElement,this);const t=this.visualElement.current,i=ff(t,"pointerdown",w=>{const{drag:k,dragListener:I=!0}=this.getProps();k&&I&&this.start(w)}),a=()=>{const{dragConstraints:w}=this.getProps();Bc(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,d=c.addEventListener("measure",a);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),Dn.read(a);const f=jf(window,"resize",()=>this.scalePositionWithinConstraints()),u=c.addEventListener("didUpdate",({delta:w,hasLayoutChanged:k})=>{this.isDragging&&k&&(Ts(I=>{const A=this.getAxisMotionValue(I);A&&(this.originPoint[I]+=w[I].translate,A.set(A.get()+w[I].translate))}),this.visualElement.render())});return()=>{f(),i(),d(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:a=!1,dragPropagation:c=!1,dragConstraints:d=!1,dragElastic:f=bx,dragMomentum:u=!0}=t;return{...t,drag:i,dragDirectionLock:a,dragPropagation:c,dragConstraints:d,dragElastic:f,dragMomentum:u}}}function Lm(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function YF(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class JF extends hl{constructor(t){super(t),this.removeGroupControls=As,this.removeListeners=As,this.controls=new KF(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||As}unmount(){this.removeGroupControls(),this.removeListeners()}}const VT=e=>(t,i)=>{e&&Dn.postRender(()=>e(t,i))};class QF extends hl{constructor(){super(...arguments),this.removePointerDownListener=As}onPointerDown(t){this.session=new GI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:a,onPanEnd:c}=this.node.getProps();return{onSessionStart:VT(t),onStart:VT(i),onMove:a,onEnd:(d,f)=>{delete this.session,c&&Dn.postRender(()=>c(d,f))}}}mount(){this.removePointerDownListener=ff(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ig={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function NT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const jd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(It.test(e))e=parseFloat(e);else return e;const i=NT(e,t.target.x),a=NT(e,t.target.y);return`${i}% ${a}%`}},eO={correct:(e,{treeScale:t,projectionDelta:i})=>{const a=e,c=sl.parse(e);if(c.length>5)return a;const d=sl.createTransformer(e),f=typeof c[0]!="number"?1:0,u=i.x.scale*t.x,w=i.y.scale*t.y;c[0+f]/=u,c[1+f]/=w;const k=On(u,w,.5);return typeof c[2+f]=="number"&&(c[2+f]/=k),typeof c[3+f]=="number"&&(c[3+f]/=k),d(c)}};let Zv=!1;class tO extends ne.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:a,layoutId:c}=this.props,{projection:d}=t;S4(nO),d&&(i.group&&i.group.add(d),a&&a.register&&c&&a.register(d),Zv&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),ig.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:a,drag:c,isPresent:d}=this.props,{projection:f}=a;return f&&(f.isPresent=d,Zv=!0,c||t.layoutDependency!==i||i===void 0||t.isPresent!==d?f.willUpdate():this.safeToRemove(),t.isPresent!==d&&(d?f.promote():f.relegate()||Dn.postRender(()=>{const u=f.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ab.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:a}=this.props,{projection:c}=t;Zv=!0,c&&(c.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(c),a&&a.deregister&&a.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ZI(e){const[t,i]=mI(),a=ne.useContext(V1);return Ae.jsx(tO,{...e,layoutGroup:a,switchLayoutGroup:ne.useContext(EI),isPresent:t,safeToRemove:i})}const nO={borderRadius:{...jd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jd,borderTopRightRadius:jd,borderBottomLeftRadius:jd,borderBottomRightRadius:jd,boxShadow:eO};function rO(e,t,i){const a=oi(e)?e:ah(e);return a.start(_b("",a,t,i)),a.animation}const iO=(e,t)=>e.depth-t.depth;class sO{constructor(){this.children=[],this.isDirty=!1}add(t){$1(this.children,t),this.isDirty=!0}remove(t){U1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(iO),this.isDirty=!1,this.children.forEach(t)}}function oO(e,t){const i=Oi.now(),a=({timestamp:c})=>{const d=c-i;d>=t&&(il(a),e(d-t))};return Dn.setup(a,!0),()=>il(a)}const XI=["TopLeft","TopRight","BottomLeft","BottomRight"],aO=XI.length,jT=e=>typeof e=="string"?parseFloat(e):e,$T=e=>typeof e=="number"||It.test(e);function lO(e,t,i,a,c,d){c?(e.opacity=On(0,i.opacity??1,uO(a)),e.opacityExit=On(t.opacity??1,0,cO(a))):d&&(e.opacity=On(t.opacity??1,i.opacity??1,a));for(let f=0;f<aO;f++){const u=`border${XI[f]}Radius`;let w=UT(t,u),k=UT(i,u);if(w===void 0&&k===void 0)continue;w||(w=0),k||(k=0),w===0||k===0||$T(w)===$T(k)?(e[u]=Math.max(On(jT(w),jT(k),a),0),(vo.test(k)||vo.test(w))&&(e[u]+="%")):e[u]=k}(t.rotate||i.rotate)&&(e.rotate=On(t.rotate||0,i.rotate||0,a))}function UT(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const uO=KI(0,.5,LE),cO=KI(.5,.95,As);function KI(e,t,i){return a=>a<e?0:a>t?1:i(Ff(e,t,a))}function WT(e,t){e.min=t.min,e.max=t.max}function Ss(e,t){WT(e.x,t.x),WT(e.y,t.y)}function qT(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function GT(e,t,i,a,c){return e-=t,e=Vg(e,1/i,a),c!==void 0&&(e=Vg(e,1/c,a)),e}function hO(e,t=0,i=1,a=.5,c,d=e,f=e){if(vo.test(t)&&(t=parseFloat(t),t=On(f.min,f.max,t/100)-f.min),typeof t!="number")return;let u=On(d.min,d.max,a);e===d&&(u-=t),e.min=GT(e.min,t,i,u,c),e.max=GT(e.max,t,i,u,c)}function HT(e,t,[i,a,c],d,f){hO(e,t[i],t[a],t[c],t.scale,d,f)}const dO=["x","scaleX","originX"],fO=["y","scaleY","originY"];function ZT(e,t,i,a){HT(e.x,t,dO,i?i.x:void 0,a?a.x:void 0),HT(e.y,t,fO,i?i.y:void 0,a?a.y:void 0)}function XT(e){return e.translate===0&&e.scale===1}function YI(e){return XT(e.x)&&XT(e.y)}function KT(e,t){return e.min===t.min&&e.max===t.max}function pO(e,t){return KT(e.x,t.x)&&KT(e.y,t.y)}function YT(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function JI(e,t){return YT(e.x,t.x)&&YT(e.y,t.y)}function JT(e){return vi(e.x)/vi(e.y)}function QT(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class mO{constructor(){this.members=[]}add(t){$1(this.members,t),t.scheduleRender()}remove(t){if(U1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(c=>t===c);if(i===0)return!1;let a;for(let c=i;c>=0;c--){const d=this.members[c];if(d.isPresent!==!1){a=d;break}}return a?(this.promote(a),!0):!1}promote(t,i){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,i&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:a}=t;i.onExitComplete&&i.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gO(e,t,i){let a="";const c=e.x.translate/t.x,d=e.y.translate/t.y,f=(i==null?void 0:i.z)||0;if((c||d||f)&&(a=`translate3d(${c}px, ${d}px, ${f}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:k,rotate:I,rotateX:A,rotateY:M,skewX:$,skewY:H}=i;k&&(a=`perspective(${k}px) ${a}`),I&&(a+=`rotate(${I}deg) `),A&&(a+=`rotateX(${A}deg) `),M&&(a+=`rotateY(${M}deg) `),$&&(a+=`skewX(${$}deg) `),H&&(a+=`skewY(${H}deg) `)}const u=e.x.scale*t.x,w=e.y.scale*t.y;return(u!==1||w!==1)&&(a+=`scale(${u}, ${w})`),a||"none"}const Xv=["","X","Y","Z"],yO=1e3;let _O=0;function Kv(e,t,i,a){const{latestValues:c}=t;c[e]&&(i[e]=c[e],t.setStaticValue(e,0),a&&(a[e]=0))}function QI(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=BI(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:c,layoutId:d}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",Dn,!(c||d))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&QI(a)}function eM({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:a,resetTransform:c}){return class{constructor(f={},u=t==null?void 0:t()){this.id=_O++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bO),this.nodes.forEach(CO),this.nodes.forEach(kO),this.nodes.forEach(wO)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new sO)}addEventListener(f,u){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new G1),this.eventHandlers.get(f).add(u)}notifyListeners(f,...u){const w=this.eventHandlers.get(f);w&&w.notify(...u)}hasListeners(f){return this.eventHandlers.has(f)}mount(f){if(this.instance)return;this.isSVG=pI(f)&&!c4(f),this.instance=f;const{layoutId:u,layout:w,visualElement:k}=this.options;if(k&&!k.current&&k.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(w||u)&&(this.isLayoutDirty=!0),e){let I,A=0;const M=()=>this.root.updateBlockedByResize=!1;Dn.read(()=>{A=window.innerWidth}),e(f,()=>{const $=window.innerWidth;$!==A&&(A=$,this.root.updateBlockedByResize=!0,I&&I(),I=oO(M,250),ig.hasAnimatedSinceResize&&(ig.hasAnimatedSinceResize=!1,this.nodes.forEach(nC)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&k&&(u||w)&&this.addEventListener("didUpdate",({delta:I,hasLayoutChanged:A,hasRelativeLayoutChanged:M,layout:$})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const H=this.options.transition||k.getDefaultTransition()||AO,{onLayoutAnimationStart:Y,onLayoutAnimationComplete:ae}=k.getProps(),j=!this.targetLayout||!JI(this.targetLayout,$),W=!A&&M;if(this.options.layoutRoot||this.resumeFrom||W||A&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const G={...sb(H,"layout"),onPlay:Y,onComplete:ae};(k.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G),this.setAnimationOrigin(I,W)}else A||nC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=$})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),il(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PO),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let I=0;I<this.path.length;I++){const A=this.path[I];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:u,layout:w}=this.options;if(u===void 0&&!w)return;const k=this.getTransformTemplate();this.prevTransformTemplateValue=k?k(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(tC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(TO),this.nodes.forEach(vO),this.nodes.forEach(xO)):this.nodes.forEach(tC),this.clearAllSnapshots();const u=Oi.now();$r.delta=Jo(0,1e3/60,u-$r.timestamp),$r.timestamp=u,$r.isProcessing=!0,Bv.update.process($r),Bv.preRender.process($r),Bv.render.process($r),$r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ab.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SO),this.sharedNodes.forEach(EO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vi(this.snapshot.measuredBox.x)&&!vi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(u=!1),u&&this.instance){const w=a(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:w,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!c)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!YI(this.projectionDelta),w=this.getTransformTemplate(),k=w?w(this.latestValues,""):void 0,I=k!==this.prevTransformTemplateValue;f&&this.instance&&(u||Gl(this.latestValues)||I)&&(c(this.instance,k),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const u=this.measurePageBox();let w=this.removeElementScroll(u);return f&&(w=this.removeTransform(w)),zO(w),{animationId:this.root.animationId,measuredBox:u,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var k;const{visualElement:f}=this.options;if(!f)return Qn();const u=f.measureViewportBox();if(!(((k=this.scroll)==null?void 0:k.wasRoot)||this.path.some(DO))){const{scroll:I}=this.root;I&&(Vc(u.x,I.offset.x),Vc(u.y,I.offset.y))}return u}removeElementScroll(f){var w;const u=Qn();if(Ss(u,f),(w=this.scroll)!=null&&w.wasRoot)return u;for(let k=0;k<this.path.length;k++){const I=this.path[k],{scroll:A,options:M}=I;I!==this.root&&A&&M.layoutScroll&&(A.wasRoot&&Ss(u,f),Vc(u.x,A.offset.x),Vc(u.y,A.offset.y))}return u}applyTransform(f,u=!1){const w=Qn();Ss(w,f);for(let k=0;k<this.path.length;k++){const I=this.path[k];!u&&I.options.layoutScroll&&I.scroll&&I!==I.root&&Nc(w,{x:-I.scroll.offset.x,y:-I.scroll.offset.y}),Gl(I.latestValues)&&Nc(w,I.latestValues)}return Gl(this.latestValues)&&Nc(w,this.latestValues),w}removeTransform(f){const u=Qn();Ss(u,f);for(let w=0;w<this.path.length;w++){const k=this.path[w];if(!k.instance||!Gl(k.latestValues))continue;mx(k.latestValues)&&k.updateSnapshot();const I=Qn(),A=k.measurePageBox();Ss(I,A),ZT(u,k.latestValues,k.snapshot?k.snapshot.layoutBox:void 0,I)}return Gl(this.latestValues)&&ZT(u,this.latestValues),u}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var M;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==u;if(!(f||w&&this.isSharedProjectionDirty||this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:I,layoutId:A}=this.options;if(!(!this.layout||!(I||A))){if(this.resolvedRelativeTargetAt=$r.timestamp,!this.targetDelta&&!this.relativeTarget){const $=this.getClosestProjectingParent();$&&$.layout&&this.animationProgress!==1?(this.relativeParent=$,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qn(),this.relativeTargetOrigin=Qn(),mf(this.relativeTargetOrigin,this.layout.layoutBox,$.layout.layoutBox),Ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Qn(),this.targetWithTransforms=Qn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),VF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ss(this.target,this.layout.layoutBox),zI(this.target,this.targetDelta)):Ss(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const $=this.getClosestProjectingParent();$&&!!$.resumingFrom==!!this.resumingFrom&&!$.options.layoutScroll&&$.target&&this.animationProgress!==1?(this.relativeParent=$,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qn(),this.relativeTargetOrigin=Qn(),mf(this.relativeTargetOrigin,this.target,$.target),Ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||mx(this.parent.latestValues)||AI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var H;const f=this.getLead(),u=!!this.resumingFrom||this!==f;let w=!0;if((this.isProjectionDirty||(H=this.parent)!=null&&H.isProjectionDirty)&&(w=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===$r.timestamp&&(w=!1),w)return;const{layout:k,layoutId:I}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(k||I))return;Ss(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,M=this.treeScale.y;Y4(this.layoutCorrected,this.treeScale,this.path,u),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=Qn());const{target:$}=f;if(!$){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qT(this.prevProjectionDelta.x,this.projectionDelta.x),qT(this.prevProjectionDelta.y,this.projectionDelta.y)),pf(this.projectionDelta,this.layoutCorrected,$,this.latestValues),(this.treeScale.x!==A||this.treeScale.y!==M||!QT(this.projectionDelta.x,this.prevProjectionDelta.x)||!QT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",$))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),f){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jc(),this.projectionDelta=jc(),this.projectionDeltaWithTransform=jc()}setAnimationOrigin(f,u=!1){const w=this.snapshot,k=w?w.latestValues:{},I={...this.latestValues},A=jc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const M=Qn(),$=w?w.source:void 0,H=this.layout?this.layout.source:void 0,Y=$!==H,ae=this.getStack(),j=!ae||ae.members.length<=1,W=!!(Y&&!j&&this.options.crossfade===!0&&!this.path.some(MO));this.animationProgress=0;let G;this.mixTargetDelta=ee=>{const de=ee/1e3;rC(A.x,f.x,de),rC(A.y,f.y,de),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mf(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),IO(this.relativeTarget,this.relativeTargetOrigin,M,de),G&&pO(this.relativeTarget,G)&&(this.isProjectionDirty=!1),G||(G=Qn()),Ss(G,this.relativeTarget)),Y&&(this.animationValues=I,lO(I,k,this.latestValues,de,W,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=de},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){var u,w,k;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(k=(w=this.resumingFrom)==null?void 0:w.currentAnimation)==null||k.stop(),this.pendingAnimation&&(il(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dn.update(()=>{ig.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ah(0)),this.currentAnimation=rO(this.motionValue,[0,1e3],{...f,velocity:0,isSync:!0,onUpdate:I=>{this.mixTargetDelta(I),f.onUpdate&&f.onUpdate(I)},onStop:()=>{},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:u,target:w,layout:k,latestValues:I}=f;if(!(!u||!w||!k)){if(this!==f&&this.layout&&k&&tM(this.options.animationType,this.layout.layoutBox,k.layoutBox)){w=this.target||Qn();const A=vi(this.layout.layoutBox.x);w.x.min=f.target.x.min,w.x.max=w.x.min+A;const M=vi(this.layout.layoutBox.y);w.y.min=f.target.y.min,w.y.max=w.y.min+M}Ss(u,w),Nc(u,I),pf(this.projectionDeltaWithTransform,this.layoutCorrected,u,I)}}registerSharedNode(f,u){this.sharedNodes.has(f)||this.sharedNodes.set(f,new mO),this.sharedNodes.get(f).add(u);const k=u.options.initialPromotionConfig;u.promote({transition:k?k.transition:void 0,preserveFollowOpacity:k&&k.shouldPreserveFollowOpacity?k.shouldPreserveFollowOpacity(u):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var u;const{layoutId:f}=this.options;return f?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:f}=this.options;return f?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:u,preserveFollowOpacity:w}={}){const k=this.getStack();k&&k.promote(this,w),f&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let u=!1;const{latestValues:w}=f;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(u=!0),!u)return;const k={};w.z&&Kv("z",f,k,this.animationValues);for(let I=0;I<Xv.length;I++)Kv(`rotate${Xv[I]}`,f,k,this.animationValues),Kv(`skew${Xv[I]}`,f,k,this.animationValues);f.render();for(const I in k)f.setStaticValue(I,k[I]),this.animationValues&&(this.animationValues[I]=k[I]);f.scheduleRender()}applyProjectionStyles(f,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){f.visibility="hidden";return}const w=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,f.visibility="",f.opacity="",f.pointerEvents=rg(u==null?void 0:u.pointerEvents)||"",f.transform=w?w(this.latestValues,""):"none";return}const k=this.getLead();if(!this.projectionDelta||!this.layout||!k.target){this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=rg(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Gl(this.latestValues)&&(f.transform=w?w({},""):"none",this.hasProjected=!1);return}f.visibility="";const I=k.animationValues||k.latestValues;this.applyTransformsToTarget();let A=gO(this.projectionDeltaWithTransform,this.treeScale,I);w&&(A=w(I,A)),f.transform=A;const{x:M,y:$}=this.projectionDelta;f.transformOrigin=`${M.origin*100}% ${$.origin*100}% 0`,k.animationValues?f.opacity=k===this?I.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:I.opacityExit:f.opacity=k===this?I.opacity!==void 0?I.opacity:"":I.opacityExit!==void 0?I.opacityExit:0;for(const H in Nf){if(I[H]===void 0)continue;const{correct:Y,applyTo:ae,isCSSVariable:j}=Nf[H],W=A==="none"?I[H]:Y(I[H],k);if(ae){const G=ae.length;for(let ee=0;ee<G;ee++)f[ae[ee]]=W}else j?this.options.visualElement.renderState.vars[H]=W:f[H]=W}this.options.layoutId&&(f.pointerEvents=k===this?rg(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var u;return(u=f.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(eC),this.root.sharedNodes.clear()}}}function vO(e){e.updateLayout()}function xO(e){var i;const t=((i=e.resumeFrom)==null?void 0:i.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:c}=e.layout,{animationType:d}=e.options,f=t.source!==e.layout.source;d==="size"?Ts(A=>{const M=f?t.measuredBox[A]:t.layoutBox[A],$=vi(M);M.min=a[A].min,M.max=M.min+$}):tM(d,t.layoutBox,a)&&Ts(A=>{const M=f?t.measuredBox[A]:t.layoutBox[A],$=vi(a[A]);M.max=M.min+$,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+$)});const u=jc();pf(u,a,t.layoutBox);const w=jc();f?pf(w,e.applyTransform(c,!0),t.measuredBox):pf(w,a,t.layoutBox);const k=!YI(u);let I=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:M,layout:$}=A;if(M&&$){const H=Qn();mf(H,t.layoutBox,M.layoutBox);const Y=Qn();mf(Y,a,$.layoutBox),JI(H,Y)||(I=!0),A.options.layoutRoot&&(e.relativeTarget=Y,e.relativeTargetOrigin=H,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:w,layoutDelta:u,hasLayoutChanged:k,hasRelativeLayoutChanged:I})}else if(e.isLead()){const{onExitComplete:a}=e.options;a&&a()}e.options.transition=void 0}function bO(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function SO(e){e.clearSnapshot()}function eC(e){e.clearMeasurements()}function tC(e){e.isLayoutDirty=!1}function TO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nC(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function CO(e){e.resolveTargetDelta()}function kO(e){e.calcProjection()}function PO(e){e.resetSkewAndRotation()}function EO(e){e.removeLeadSnapshot()}function rC(e,t,i){e.translate=On(t.translate,0,i),e.scale=On(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function iC(e,t,i,a){e.min=On(t.min,i.min,a),e.max=On(t.max,i.max,a)}function IO(e,t,i,a){iC(e.x,t.x,i.x,a),iC(e.y,t.y,i.y,a)}function MO(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const AO={duration:.45,ease:[.4,0,.1,1]},sC=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),oC=sC("applewebkit/")&&!sC("chrome/")?Math.round:As;function aC(e){e.min=oC(e.min),e.max=oC(e.max)}function zO(e){aC(e.x),aC(e.y)}function tM(e,t,i){return e==="position"||e==="preserve-aspect"&&!BF(JT(t),JT(i),.2)}function DO(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const RO=eM({attachResizeListener:(e,t)=>jf(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yv={current:void 0},nM=eM({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Yv.current){const e=new RO({});e.mount(window),e.setOptions({layoutScroll:!0}),Yv.current=e}return Yv.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),LO={pan:{Feature:QF},drag:{Feature:JF,ProjectionNode:nM,MeasureLayout:ZI}};function lC(e,t,i){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",i==="Start");const c="onHover"+i,d=a[c];d&&Dn.postRender(()=>d(t,sp(t)))}class FO extends hl{mount(){const{current:t}=this.node;t&&(this.unmount=s4(t,(i,a)=>(lC(this.node,a,"Start"),c=>lC(this.node,c,"End"))))}unmount(){}}class OO extends hl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=np(jf(this.node.current,"focus",()=>this.onFocus()),jf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uC(e,t,i){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap",i==="Start");const c="onTap"+(i==="End"?"":i),d=a[c];d&&Dn.postRender(()=>d(t,sp(t)))}class BO extends hl{mount(){const{current:t}=this.node;t&&(this.unmount=u4(t,(i,a)=>(uC(this.node,a,"Start"),(c,{success:d})=>uC(this.node,c,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const wx=new WeakMap,Jv=new WeakMap,VO=e=>{const t=wx.get(e.target);t&&t(e)},NO=e=>{e.forEach(VO)};function jO({root:e,...t}){const i=e||document;Jv.has(i)||Jv.set(i,{});const a=Jv.get(i),c=JSON.stringify(t);return a[c]||(a[c]=new IntersectionObserver(NO,{root:e,...t})),a[c]}function $O(e,t,i){const a=jO(t);return wx.set(e,i),a.observe(e),()=>{wx.delete(e),a.unobserve(e)}}const UO={some:0,all:1};class WO extends hl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:a,amount:c="some",once:d}=t,f={root:i?i.current:void 0,rootMargin:a,threshold:typeof c=="number"?c:UO[c]},u=w=>{const{isIntersecting:k}=w;if(this.isInView===k||(this.isInView=k,d&&!k&&this.hasEnteredView))return;k&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",k);const{onViewportEnter:I,onViewportLeave:A}=this.node.getProps(),M=k?I:A;M&&M(w)};return $O(this.node.current,f,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(qO(t,i))&&this.startObserver()}unmount(){}}function qO({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const GO={inView:{Feature:WO},tap:{Feature:BO},focus:{Feature:OO},hover:{Feature:FO}},HO={layout:{ProjectionNode:nM,MeasureLayout:ZI}},ZO={...zF,...GO,...LO,...HO},Sx=Z4(ZO,aF),jl="polygon-region",$d="polygon-vertices",yc="polygon-preview-line",cC="polygon-region-fill",hC="polygon-region-outline",dC="polygon-vertex-circles",fC="polygon-preview";function Qv({active:e,disabled:t,title:i,onClick:a,children:c}){return Ae.jsx("button",{title:i,onClick:a,disabled:t,style:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:7,border:"none",cursor:t?"default":"pointer",background:e?"#3b82f6":"#f1f5f9",color:t?"#cbd5e1":e?"#fff":"#64748b",fontSize:15,transition:"background 0.15s, color 0.15s"},children:c})}function XO({polygonCoords:e,polygonClosed:t,setPolygonCoords:i,setPolygonClosed:a}){var Y;const c=ep(),d=(Y=c==null?void 0:c.current)==null?void 0:Y.getMap(),[f,u]=ne.useState(0),[w,k]=ne.useState(null),I=ne.useRef(null),A=ne.useRef(!1),M=ne.useRef(0);if(ne.useEffect(()=>{if(!d)return;const ae=()=>{d.getSource(jl)||(d.addSource(jl,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[]}}}),d.addLayer({id:cC,type:"fill",source:jl,paint:{"fill-color":"#3b82f6","fill-opacity":.15}}),d.addLayer({id:hC,type:"line",source:jl,paint:{"line-color":"#3b82f6","line-width":1.5}})),d.getSource($d)||(d.addSource($d,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),d.addLayer({id:dC,type:"circle",source:$d,paint:{"circle-radius":5,"circle-color":"#fff","circle-stroke-color":"#3b82f6","circle-stroke-width":2}})),d.getSource(yc)||(d.addSource(yc,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}}}),d.addLayer({id:fC,type:"line",source:yc,paint:{"line-color":"#3b82f6","line-width":1.5,"line-dasharray":[4,3],"line-opacity":.6}}))};return d.isStyleLoaded()?ae():d.once("styledata",ae),()=>{[fC,dC,hC,cC].forEach(j=>{d.getLayer(j)&&d.removeLayer(j)}),[yc,$d,jl].forEach(j=>{d.getSource(j)&&d.removeSource(j)})}},[d]),ne.useEffect(()=>{if(!d||!d.getSource(jl))return;const ae=t&&e.length>=3?[...e,e[0]]:[];d.getSource(jl).setData({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:ae.length?[ae]:[]}}),d.getSource($d).setData({type:"FeatureCollection",features:e.map(([j,W],G)=>({type:"Feature",properties:{index:G},geometry:{type:"Point",coordinates:[j,W]}}))})},[d,e,t]),ne.useEffect(()=>{if(!d||!d.getSource(yc))return;const ae=!t&&e.length>=1&&w!==null;d.getSource(yc).setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:ae?[e[e.length-1],w]:[]}})},[d,w,e,t]),ne.useEffect(()=>{if(!d)return;const ae=300,j=G=>{if(f!==1||t)return;const ee=Date.now();if(ee-M.current<ae){M.current=0;return}M.current=ee,i(de=>[...de,[G.lngLat.lng,G.lngLat.lat]])},W=G=>{f!==1||t||(G.preventDefault(),e.length>=3&&(a(!0),u(0),k(null),M.current=0))};return d.on("click",j),d.on("dblclick",W),()=>{d.off("click",j),d.off("dblclick",W)}},[d,f,t,e.length,i,a]),ne.useEffect(()=>{if(!d)return;const ae=j=>{if(f===1&&!t){k([j.lngLat.lng,j.lngLat.lat]),d.getCanvas().style.cursor="crosshair";return}if(f===0&&t&&e.length>0){const W=d.project(j.lngLat),G=e.some(([ee,de])=>{const he=d.project({lng:ee,lat:de});return(W.x-he.x)**2+(W.y-he.y)**2<100});d.getCanvas().style.cursor=G?"grab":""}else d.getCanvas().style.cursor=""};return d.on("mousemove",ae),()=>{d.off("mousemove",ae),A.current||(d.getCanvas().style.cursor="")}},[d,f,t,e]),ne.useEffect(()=>{if(!d)return;const ae=G=>{if(f!==0||!t||e.length===0)return;const ee=d.project(G.lngLat);let de=-1,he=1/0;e.forEach(([ye,Ce],Me)=>{const ze=d.project({lng:ye,lat:Ce}),Re=(ee.x-ze.x)**2+(ee.y-ze.y)**2;Re<100&&Re<he&&(he=Re,de=Me)}),de>=0&&(I.current=de,A.current=!0,d.dragPan.disable(),d.getCanvas().style.cursor="grabbing",G.preventDefault())},j=G=>{if(!A.current||I.current===null)return;const ee=[G.lngLat.lng,G.lngLat.lat];i(de=>{const he=[...de];return he[I.current]=ee,he})},W=()=>{A.current&&(A.current=!1,I.current=null,d.dragPan.enable(),d.getCanvas().style.cursor="grab")};return d.on("mousedown",ae),d.on("mousemove",j),d.on("mouseup",W),()=>{d.off("mousedown",ae),d.off("mousemove",j),d.off("mouseup",W),d.dragPan.enable()}},[d,f,t,e,i]),!d)return null;const $=()=>{i([]),a(!1),k(null),u(0),d&&(d.getCanvas().style.cursor="")},H=t?"Drag vertices to adjust":f===1?e.length===0?"Click to place points":e.length<3?`${e.length} point${e.length>1?"s":""}  need ${3-e.length} more`:"Double-click to close":"Draw a region to constrain routes";return Ae.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[Ae.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[Ae.jsx(Qv,{title:"Mouse / Edit",active:f===0,onClick:()=>{u(0),k(null),d&&(d.getCanvas().style.cursor="")},children:Ae.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:Ae.jsx("path",{d:"M4 0l16 12-7 2-4 8z"})})}),Ae.jsx(Qv,{title:t?"Reset to redraw":"Draw region",active:f===1,disabled:t,onClick:()=>u(1),children:Ae.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:Ae.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),e.length>0&&Ae.jsx(Qv,{title:"Clear region",onClick:$,children:Ae.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:Ae.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),Ae.jsx("div",{style:{fontSize:11,color:"#94a3b8"},children:H})]})}function KO({value:e,onChange:t}){const[i,a]=ne.useState(String(e)),c=d=>{const f=parseFloat(d);!isNaN(f)&&f>=ZL&&f<=XL?(t(f),a(String(f))):a(String(e))};return Ae.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[Ae.jsx("span",{style:{fontSize:12,color:"#64748b"},children:"Distance"}),Ae.jsxs("div",{style:{position:"relative",width:90},children:[Ae.jsx("input",{value:i,onChange:d=>a(d.target.value),onBlur:d=>c(d.target.value),onKeyDown:d=>{d.key==="Enter"&&c(d.target.value)},inputMode:"decimal",style:{width:"100%",boxSizing:"border-box",background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:"7px 28px 7px 10px",color:"#0f172a",fontSize:13,outline:"none",appearance:"none",MozAppearance:"textfield"}}),Ae.jsx("span",{style:{position:"absolute",right:9,top:"50%",transform:"translateY(-50%)",fontSize:11,color:"#94a3b8",pointerEvents:"none"},children:"mi"})]})]})}var rM={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})(eD,function(){var i={},a={};function c(f,u,w){if(a[f]=w,f==="index"){var k="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([k],{type:"text/javascript"}))),i}}c("shared",["exports"],function(f){function u(s,r,o,h){return new(o||(o=Promise))(function(g,v){function x(E){try{T(h.next(E))}catch(z){v(z)}}function b(E){try{T(h.throw(E))}catch(z){v(z)}}function T(E){var z;E.done?g(E.value):(z=E.value,z instanceof o?z:new o(function(R){R(z)})).then(x,b)}T((h=h.apply(s,r||[])).next())})}function w(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var k=I;function I(s,r){this.x=s,this.y=r}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,r){return this.clone()._rotateAround(s,r)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var r=s.x-this.x,o=s.y-this.y;return r*r+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,r){return Math.atan2(this.x*r-this.y*s,this.x*s+this.y*r)},_matMult:function(s){var r=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=r,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var r=Math.cos(s),o=Math.sin(s),h=o*this.x+r*this.y;return this.x=r*this.x-o*this.y,this.y=h,this},_rotateAround:function(s,r){var o=Math.cos(s),h=Math.sin(s),g=r.y+h*(this.x-r.x)+o*(this.y-r.y);return this.x=r.x+o*(this.x-r.x)-h*(this.y-r.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(s){return s instanceof I?s:Array.isArray(s)?new I(s[0],s[1]):s};var A=w(k),M=$;function $(s,r,o,h){this.cx=3*s,this.bx=3*(o-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=r,this.p2x=o,this.p2y=h}$.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,r){if(r===void 0&&(r=1e-6),s<0)return 0;if(s>1)return 1;for(var o=s,h=0;h<8;h++){var g=this.sampleCurveX(o)-s;if(Math.abs(g)<r)return o;var v=this.sampleCurveDerivativeX(o);if(Math.abs(v)<1e-6)break;o-=g/v}var x=0,b=1;for(o=s,h=0;h<20&&(g=this.sampleCurveX(o),!(Math.abs(g-s)<r));h++)s>g?x=o:b=o,o=.5*(b-x)+x;return o},solve:function(s,r){return this.sampleCurveY(this.solveCurveX(s,r))}};var H=w(M);let Y,ae;function j(){return Y==null&&(Y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function W(){if(ae==null&&(ae=!1,j())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const g=4*h;r.fillStyle=`rgb(${g},${g+1},${g+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const o=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&o[h]!==h){ae=!0;break}}}return ae||!1}function G(s,r,o,h){const g=new H(s,r,o,h);return v=>g.solve(v)}const ee=G(.25,.1,.25,1);function de(s,r,o){return Math.min(o,Math.max(r,s))}function he(s,r,o){const h=o-r,g=((s-r)%h+h)%h+r;return g===r?o:g}function ye(s,...r){for(const o of r)for(const h in o)s[h]=o[h];return s}let Ce=1;function Me(s,r,o){const h={};for(const g in s)h[g]=r.call(this,s[g],g,s);return h}function ze(s,r,o){const h={};for(const g in s)r.call(this,s[g],g,s)&&(h[g]=s[g]);return h}function Re(s){return Array.isArray(s)?s.map(Re):typeof s=="object"&&s?Me(s,Re):s}const te={};function Fe(s){te[s]||(typeof console<"u"&&console.warn(s),te[s]=!0)}function Be(s,r,o){return(o.y-s.y)*(r.x-s.x)>(r.y-s.y)*(o.x-s.x)}function Ge(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let it=null;function Je(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function $e(s,r,o,h,g){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(s,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const b=x.startsWith("BGR"),T=new Uint8ClampedArray(h*g*4);if(yield v.copyTo(T,function(E,z,R,O,N){const q=4*Math.max(-z,0),Z=(Math.max(0,R)-R)*O*4+q,ie=4*O,le=Math.max(0,z),Se=Math.max(0,R);return{rect:{x:le,y:Se,width:Math.min(E.width,z+O)-le,height:Math.min(E.height,R+N)-Se},layout:[{offset:Z,stride:ie}]}}(s,r,o,h,g)),b)for(let E=0;E<T.length;E+=4){const z=T[E];T[E]=T[E+2],T[E+2]=z}return T}finally{v.close()}})}let at,St;const Mt="AbortError";function Nn(){return new Error(Mt)}const Zt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Yt(s){return Zt.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const _n="global-dispatcher";class Jt extends Error{constructor(r,o,h,g){super(`AJAXError: ${o} (${r}): ${h}`),this.status=r,this.statusText=o,this.url=h,this.body=g}}const dn=()=>Ge(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,_r=function(s,r){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const h=Yt(s.url);if(h)return h(s,r);if(Ge(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:_n},r)}if(!(/^file:/.test(o=s.url)||/^file:/.test(dn())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return u(this,void 0,void 0,function*(){const v=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:dn(),signal:g.signal});h.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const E=yield x.blob();throw new Jt(x.status,x.statusText,h.url,E)}let b;b=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const T=yield b;if(g.signal.aborted)throw Nn();return{data:T,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(s,r);if(Ge(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:_n},r)}var o;return function(h,g){return new Promise((v,x)=>{var b;const T=new XMLHttpRequest;T.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(T.responseType="arraybuffer");for(const E in h.headers)T.setRequestHeader(E,h.headers[E]);h.type==="json"&&(T.responseType="text",!((b=h.headers)===null||b===void 0)&&b.Accept||T.setRequestHeader("Accept","application/json")),T.withCredentials=h.credentials==="include",T.onerror=()=>{x(new Error(T.statusText))},T.onload=()=>{if(!g.signal.aborted)if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let E=T.response;if(h.type==="json")try{E=JSON.parse(T.response)}catch(z){return void x(z)}v({data:E,cacheControl:T.getResponseHeader("Cache-Control"),expires:T.getResponseHeader("Expires")})}else{const E=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});x(new Jt(T.status,T.statusText,h.url,E))}},g.signal.addEventListener("abort",()=>{T.abort(),x(Nn())}),T.send(h.body)})}(s,r)};function li(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const r=new URL(s),o=window.location;return r.protocol===o.protocol&&r.host===o.host}function Gr(s,r,o){o[s]&&o[s].indexOf(r)!==-1||(o[s]=o[s]||[],o[s].push(r))}function wn(s,r,o){if(o&&o[s]){const h=o[s].indexOf(r);h!==-1&&o[s].splice(h,1)}}class hr{constructor(r,o={}){ye(this,o),this.type=r}}class jn extends hr{constructor(r,o={}){super("error",ye({error:r},o))}}class Dr{on(r,o){return this._listeners=this._listeners||{},Gr(r,o,this._listeners),this}off(r,o){return wn(r,o,this._listeners),wn(r,o,this._oneTimeListeners),this}once(r,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Gr(r,o,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,o){typeof r=="string"&&(r=new hr(r,o||{}));const h=r.type;if(this.listens(h)){r.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const b of g)b.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const b of v)wn(h,b,this._oneTimeListeners),b.call(this,r);const x=this._eventedParent;x&&(ye(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof jn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,o){return this._eventedParent=r,this._eventedParentData=o,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const $n=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nr(s,r){const o={};for(const h in s)h!=="ref"&&(o[h]=s[h]);return $n.forEach(h=>{h in r&&(o[h]=r[h])}),o}function Dt(s,r){if(Array.isArray(s)){if(!Array.isArray(r)||s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(!Dt(s[o],r[o]))return!1;return!0}if(typeof s=="object"&&s!==null&&r!==null){if(typeof r!="object"||Object.keys(s).length!==Object.keys(r).length)return!1;for(const o in s)if(!Dt(s[o],r[o]))return!1;return!0}return s===r}function Vt(s,r){s.push(r)}function Rr(s,r,o){Vt(o,{command:"addSource",args:[s,r[s]]})}function wt(s,r,o){Vt(r,{command:"removeSource",args:[s]}),o[s]=!0}function Lr(s,r,o,h){wt(s,o,h),Rr(s,r,o)}function Si(s,r,o){let h;for(h in s[o])if(Object.prototype.hasOwnProperty.call(s[o],h)&&h!=="data"&&!Dt(s[o][h],r[o][h]))return!1;for(h in r[o])if(Object.prototype.hasOwnProperty.call(r[o],h)&&h!=="data"&&!Dt(s[o][h],r[o][h]))return!1;return!0}function dr(s,r,o,h,g,v){s=s||{},r=r||{};for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&(Dt(s[x],r[x])||o.push({command:v,args:[h,x,r[x],g]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(Dt(s[x],r[x])||o.push({command:v,args:[h,x,r[x],g]}))}function ms(s){return s.id}function Ti(s,r){return s[r.id]=r,s}class Ue{constructor(r,o,h,g){this.message=(r?`${r}: `:"")+h,g&&(this.identifier=g),o!=null&&o.__line__&&(this.line=o.__line__)}}function vr(s,...r){for(const o of r)for(const h in o)s[h]=o[h];return s}class Yn extends Error{constructor(r,o){super(o),this.message=o,this.key=r}}class Pn{constructor(r,o=[]){this.parent=r,this.bindings={};for(const[h,g]of o)this.bindings[h]=g}concat(r){return new Pn(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Hr={kind:"null"},qe={kind:"number"},xt={kind:"string"},bt={kind:"boolean"},rr={kind:"color"},ui={kind:"object"},Tt={kind:"value"},Ci={kind:"collator"},Wi={kind:"formatted"},gs={kind:"padding"},ki={kind:"resolvedImage"},oe={kind:"variableAnchorOffsetCollection"};function V(s,r){return{kind:"array",itemType:s,N:r}}function B(s){if(s.kind==="array"){const r=B(s.itemType);return typeof s.N=="number"?`array<${r}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${r}>`}return s.kind}const X=[Hr,qe,xt,bt,rr,Wi,ui,V(Tt),gs,ki,oe];function J(s,r){if(r.kind==="error")return null;if(s.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!J(s.itemType,r.itemType))&&(typeof s.N!="number"||s.N===r.N))return null}else{if(s.kind===r.kind)return null;if(s.kind==="value"){for(const o of X)if(!J(o,r))return null}}return`Expected ${B(s)} but found ${B(r)} instead.`}function pe(s,r){return r.some(o=>o.kind===s.kind)}function ve(s,r){return r.some(o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s)}function we(s,r){return s.kind==="array"&&r.kind==="array"?s.itemType.kind===r.itemType.kind&&typeof s.N=="number":s.kind===r.kind}const fe=.96422,Ie=.82521,Ve=4/29,Pe=6/29,Ze=3*Pe*Pe,mt=Pe*Pe*Pe,yt=Math.PI/180,Nt=180/Math.PI;function Et(s){return(s%=360)<0&&(s+=360),s}function jt([s,r,o,h]){let g,v;const x=Un((.2225045*(s=Lt(s))+.7168786*(r=Lt(r))+.0606169*(o=Lt(o)))/1);s===r&&r===o?g=v=x:(g=Un((.4360747*s+.3850649*r+.1430804*o)/fe),v=Un((.0139322*s+.0971045*r+.7141733*o)/Ie));const b=116*x-16;return[b<0?0:b,500*(g-x),200*(x-v),h]}function Lt(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Un(s){return s>mt?Math.pow(s,1/3):s/Ze+Ve}function Sn([s,r,o,h]){let g=(s+16)/116,v=isNaN(r)?g:g+r/500,x=isNaN(o)?g:g-o/200;return g=1*Xt(g),v=fe*Xt(v),x=Ie*Xt(x),[zt(3.1338561*v-1.6168667*g-.4906146*x),zt(-.9787684*v+1.9161415*g+.033454*x),zt(.0719453*v-.2289914*g+1.4052427*x),h]}function zt(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Xt(s){return s>Pe?s*s*s:Ze*(s-Ve)}function vn(s){return parseInt(s.padEnd(2,s),16)/255}function ir(s,r){return fr(r?s/100:s,0,1)}function fr(s,r,o){return Math.min(Math.max(r,s),o)}function Fr(s){return!s.some(Number.isNaN)}const oa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Kt{constructor(r,o,h,g=1,v=!0){this.r=r,this.g=o,this.b=h,this.a=g,v||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[r,o,h,g]))}static parse(r){if(r instanceof Kt)return r;if(typeof r!="string")return;const o=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=oa[h];if(g){const[x,b,T]=g;return[x/255,b/255,T/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let b=1;return[vn(h.slice(b,b+=x)),vn(h.slice(b,b+=x)),vn(h.slice(b,b+=x)),vn(h.slice(b,b+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,T,E,z,R,O,N,q,Z,ie,le,Se]=x,ge=[z||" ",N||" ",ie].join("");if(ge==="  "||ge==="  /"||ge===",,"||ge===",,,"){const be=[E,O,Z].join(""),Ee=be==="%%%"?100:be===""?255:0;if(Ee){const je=[fr(+T/Ee,0,1),fr(+R/Ee,0,1),fr(+q/Ee,0,1),le?ir(+le,Se):1];if(Fr(je))return je}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,b,T,E,z,R,O,N,q]=v,Z=[T||" ",z||" ",O].join("");if(Z==="  "||Z==="  /"||Z===",,"||Z===",,,"){const ie=[+b,fr(+E,0,100),fr(+R,0,100),N?ir(+N,q):1];if(Fr(ie))return function([le,Se,ge,be]){function Ee(je){const rt=(je+le/30)%12,_t=Se*Math.min(ge,1-ge);return ge-_t*Math.max(-1,Math.min(rt-3,9-rt,1))}return le=Et(le),Se/=100,ge/=100,[Ee(0),Ee(8),Ee(4),be]}(ie)}}}(r);return o?new Kt(...o,!1):void 0}get rgb(){const{r,g:o,b:h,a:g}=this,v=g||1/0;return this.overwriteGetter("rgb",[r/v,o/v,h/v,g])}get hcl(){return this.overwriteGetter("hcl",function(r){const[o,h,g,v]=jt(r),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?Et(Math.atan2(g,h)*Nt):NaN,x,o,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",jt(this.rgb))}overwriteGetter(r,o){return Object.defineProperty(this,r,{value:o}),o}toString(){const[r,o,h,g]=this.rgb;return`rgba(${[r,o,h].map(v=>Math.round(255*v)).join(",")},${g})`}}Kt.black=new Kt(0,0,0,1),Kt.white=new Kt(1,1,1,1),Kt.transparent=new Kt(0,0,0,0),Kt.red=new Kt(1,0,0,1);class Th{constructor(r,o,h){this.sensitivity=r?o?"variant":"case":o?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,o){return this.collator.compare(r,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ch{constructor(r,o,h,g,v){this.text=r,this.image=o,this.scale=h,this.fontStack=g,this.textColor=v}}class ci{constructor(r){this.sections=r}static fromString(r){return new ci([new Ch(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof ci?r:ci.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class hi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof hi)return r;if(typeof r=="number")return new hi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const o of r)if(typeof o!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new hi(r)}}toString(){return JSON.stringify(this.values)}}const Yy=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Pi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Pi)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let o=0;o<r.length;o+=2){const h=r[o],g=r[o+1];if(typeof h!="string"||!Yy.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Pi(r)}}toString(){return JSON.stringify(this.values)}}class di{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new di({name:r,available:!1}):null}}function aa(s,r,o,h){return typeof s=="number"&&s>=0&&s<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof o=="number"&&o>=0&&o<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[s,r,o,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[s,r,o,h]:[s,r,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function So(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Kt||s instanceof Th||s instanceof ci||s instanceof hi||s instanceof Pi||s instanceof di)return!0;if(Array.isArray(s)){for(const r of s)if(!So(r))return!1;return!0}if(typeof s=="object"){for(const r in s)if(!So(s[r]))return!1;return!0}return!1}function Wn(s){if(s===null)return Hr;if(typeof s=="string")return xt;if(typeof s=="boolean")return bt;if(typeof s=="number")return qe;if(s instanceof Kt)return rr;if(s instanceof Th)return Ci;if(s instanceof ci)return Wi;if(s instanceof hi)return gs;if(s instanceof Pi)return oe;if(s instanceof di)return ki;if(Array.isArray(s)){const r=s.length;let o;for(const h of s){const g=Wn(h);if(o){if(o===g)continue;o=Tt;break}o=g}return V(o||Tt,r)}return ui}function fl(s){const r=typeof s;return s===null?"":r==="string"||r==="number"||r==="boolean"?String(s):s instanceof Kt||s instanceof ci||s instanceof hi||s instanceof Pi||s instanceof di?s.toString():JSON.stringify(s)}class qi{constructor(r,o){this.type=r,this.value=o}static parse(r,o){if(r.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!So(r[1]))return o.error("invalid value");const h=r[1];let g=Wn(h);const v=o.expectedType;return g.kind!=="array"||g.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(g=v),new qi(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Rn{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const wu={string:xt,number:qe,boolean:bt,object:ui};class Gi{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");let h,g=1;const v=r[0];if(v==="array"){let b,T;if(r.length>2){const E=r[1];if(typeof E!="string"||!(E in wu)||E==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);b=wu[E],g++}else b=Tt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return o.error('The length argument to "array" must be a positive integer literal',2);T=r[2],g++}h=V(b,T)}else{if(!wu[v])throw new Error(`Types doesn't contain name = ${v}`);h=wu[v]}const x=[];for(;g<r.length;g++){const b=o.parse(r[g],g,Tt);if(!b)return null;x.push(b)}return new Gi(h,x)}evaluate(r){for(let o=0;o<this.args.length;o++){const h=this.args[o].evaluate(r);if(!J(this.type,Wn(h)))return h;if(o===this.args.length-1)throw new Rn(`Expected value to be of type ${B(this.type)}, but found ${B(Wn(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const kh={"to-boolean":bt,"to-color":rr,"to-number":qe,"to-string":xt};class Hi{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const h=r[0];if(!kh[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return o.error("Expected one argument.");const g=kh[h],v=[];for(let x=1;x<r.length;x++){const b=o.parse(r[x],x,Tt);if(!b)return null;v.push(b)}return new Hi(g,v)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let o,h;for(const g of this.args){if(o=g.evaluate(r),h=null,o instanceof Kt)return o;if(typeof o=="string"){const v=r.parseColor(o);if(v)return v}else if(Array.isArray(o)&&(h=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:aa(o[0],o[1],o[2],o[3]),!h))return new Kt(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Rn(h||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const h of this.args){o=h.evaluate(r);const g=hi.parse(o);if(g)return g}throw new Rn(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const h of this.args){o=h.evaluate(r);const g=Pi.parse(o);if(g)return g}throw new Rn(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const h of this.args){if(o=h.evaluate(r),o===null)return 0;const g=Number(o);if(!isNaN(g))return g}throw new Rn(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return ci.fromString(fl(this.args[0].evaluate(r)));case"resolvedImage":return di.fromString(fl(this.args[0].evaluate(r)));default:return fl(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Jy=["Unknown","Point","LineString","Polygon"];class Su{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Jy[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let o=this._parseColorCache[r];return o||(o=this._parseColorCache[r]=Kt.parse(r)),o}}class To{constructor(r,o,h=[],g,v=new Pn,x=[]){this.registry=r,this.path=h,this.key=h.map(b=>`[${b}]`).join(""),this.scope=v,this.errors=x,this.expectedType=g,this._isConstant=o}parse(r,o,h,g,v={}){return o?this.concat(o,h,g)._parse(r,v):this._parse(r,v)}_parse(r,o){function h(g,v,x){return x==="assert"?new Gi(v,[g]):x==="coerce"?new Hi(v,[g]):g}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=r[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[g];if(v){let x=v.parse(r,this);if(!x)return null;if(this.expectedType){const b=this.expectedType,T=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||T.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string")if(b.kind!=="padding"||T.kind!=="value"&&T.kind!=="number"&&T.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||T.kind!=="value"&&T.kind!=="array"){if(this.checkSubtype(b,T))return null}else x=h(x,b,o.typeAnnotation||"coerce");else x=h(x,b,o.typeAnnotation||"coerce");else x=h(x,b,o.typeAnnotation||"coerce");else x=h(x,b,o.typeAnnotation||"assert")}if(!(x instanceof qi)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const b=new Su;try{x=new qi(x.type,x.evaluate(b))}catch(T){return this.error(T.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,o,h){const g=typeof r=="number"?this.path.concat(r):this.path,v=h?this.scope.concat(h):this.scope;return new To(this.registry,this._isConstant,g,o||null,v,this.errors)}error(r,...o){const h=`${this.key}${o.map(g=>`[${g}]`).join("")}`;this.errors.push(new Yn(h,r))}checkSubtype(r,o){const h=J(r,o);return h&&this.error(h),h}}class Js{constructor(r,o){this.type=o.type,this.bindings=[].concat(r),this.result=o}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const o of this.bindings)r(o[1]);r(this.result)}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let v=1;v<r.length-1;v+=2){const x=r[v];if(typeof x!="string")return o.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return o.error("Variable names must contain only alphanumeric characters or '_'.",v);const b=o.parse(r[v+1],v+1);if(!b)return null;h.push([x,b])}const g=o.parse(r[r.length-1],r.length-1,o.expectedType,h);return g?new Js(h,g):null}outputDefined(){return this.result.outputDefined()}}class qt{constructor(r,o){this.type=o.type,this.name=r,this.boundExpression=o}static parse(r,o){if(r.length!==2||typeof r[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const h=r[1];return o.scope.has(h)?new qt(h,o.scope.get(h)):o.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Ph{constructor(r,o,h){this.type=r,this.index=o,this.input=h}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=o.parse(r[1],1,qe),g=o.parse(r[2],2,V(o.expectedType||Tt));return h&&g?new Ph(g.type.itemType,h,g):null}evaluate(r){const o=this.index.evaluate(r),h=this.input.evaluate(r);if(o<0)throw new Rn(`Array index out of bounds: ${o} < 0.`);if(o>=h.length)throw new Rn(`Array index out of bounds: ${o} > ${h.length-1}.`);if(o!==Math.floor(o))throw new Rn(`Array index must be an integer, but found ${o} instead.`);return h[o]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Eh{constructor(r,o){this.type=bt,this.needle=r,this.haystack=o}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=o.parse(r[1],1,Tt),g=o.parse(r[2],2,Tt);return h&&g?pe(h.type,[bt,xt,qe,Hr,Tt])?new Eh(h,g):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${B(h.type)} instead`):null}evaluate(r){const o=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!ve(o,["boolean","string","number","null"]))throw new Rn(`Expected first argument to be of type boolean, string, number or null, but found ${B(Wn(o))} instead.`);if(!ve(h,["string","array"]))throw new Rn(`Expected second argument to be of type array or string, but found ${B(Wn(h))} instead.`);return h.indexOf(o)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class la{constructor(r,o,h){this.type=qe,this.needle=r,this.haystack=o,this.fromIndex=h}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=o.parse(r[1],1,Tt),g=o.parse(r[2],2,Tt);if(!h||!g)return null;if(!pe(h.type,[bt,xt,qe,Hr,Tt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${B(h.type)} instead`);if(r.length===4){const v=o.parse(r[3],3,qe);return v?new la(h,g,v):null}return new la(h,g)}evaluate(r){const o=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!ve(o,["boolean","string","number","null"]))throw new Rn(`Expected first argument to be of type boolean, string, number or null, but found ${B(Wn(o))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(r)),ve(h,["string"])){const v=h.indexOf(o,g);return v===-1?-1:[...h.slice(0,v)].length}if(ve(h,["array"]))return h.indexOf(o,g);throw new Rn(`Expected second argument to be of type array or string, but found ${B(Wn(h))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Ih{constructor(r,o,h,g,v,x){this.inputType=r,this.type=o,this.input=h,this.cases=g,this.outputs=v,this.otherwise=x}static parse(r,o){if(r.length<5)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return o.error("Expected an even number of arguments.");let h,g;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);const v={},x=[];for(let E=2;E<r.length-1;E+=2){let z=r[E];const R=r[E+1];Array.isArray(z)||(z=[z]);const O=o.concat(E);if(z.length===0)return O.error("Expected at least one branch label.");for(const q of z){if(typeof q!="number"&&typeof q!="string")return O.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return O.error("Numeric branch labels must be integer values.");if(h){if(O.checkSubtype(h,Wn(q)))return null}else h=Wn(q);if(v[String(q)]!==void 0)return O.error("Branch labels must be unique.");v[String(q)]=x.length}const N=o.parse(R,E,g);if(!N)return null;g=g||N.type,x.push(N)}const b=o.parse(r[1],1,Tt);if(!b)return null;const T=o.parse(r[r.length-1],r.length-1,g);return T?b.type.kind!=="value"&&o.concat(1).checkSubtype(h,b.type)?null:new Ih(h,g,b,v,x,T):null}evaluate(r){const o=this.input.evaluate(r);return(Wn(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Tu{constructor(r,o,h){this.type=r,this.branches=o,this.otherwise=h}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return o.error("Expected an odd number of arguments.");let h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);const g=[];for(let x=1;x<r.length-1;x+=2){const b=o.parse(r[x],x,bt);if(!b)return null;const T=o.parse(r[x+1],x+1,h);if(!T)return null;g.push([b,T]),h=h||T.type}const v=o.parse(r[r.length-1],r.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new Tu(h,g,v)}evaluate(r){for(const[o,h]of this.branches)if(o.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[o,h]of this.branches)r(o),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class pl{constructor(r,o,h,g){this.type=r,this.input=o,this.beginIndex=h,this.endIndex=g}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=o.parse(r[1],1,Tt),g=o.parse(r[2],2,qe);if(!h||!g)return null;if(!pe(h.type,[V(Tt),xt,Tt]))return o.error(`Expected first argument to be of type array or string, but found ${B(h.type)} instead`);if(r.length===4){const v=o.parse(r[3],3,qe);return v?new pl(h.type,h,g,v):null}return new pl(h.type,h,g)}evaluate(r){const o=this.input.evaluate(r),h=this.beginIndex.evaluate(r);let g;if(this.endIndex&&(g=this.endIndex.evaluate(r)),ve(o,["string"]))return[...o].slice(h,g).join("");if(ve(o,["array"]))return o.slice(h,g);throw new Rn(`Expected first argument to be of type array or string, but found ${B(Wn(o))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Cu(s,r){const o=s.length-1;let h,g,v=0,x=o,b=0;for(;v<=x;)if(b=Math.floor((v+x)/2),h=s[b],g=s[b+1],h<=r){if(b===o||r<g)return b;v=b+1}else{if(!(h>r))throw new Rn("Input is not a number.");x=b-1}return 0}class ua{constructor(r,o,h){this.type=r,this.input=o,this.labels=[],this.outputs=[];for(const[g,v]of h)this.labels.push(g),this.outputs.push(v)}static parse(r,o){if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");const h=o.parse(r[1],1,qe);if(!h)return null;const g=[];let v=null;o.expectedType&&o.expectedType.kind!=="value"&&(v=o.expectedType);for(let x=1;x<r.length;x+=2){const b=x===1?-1/0:r[x],T=r[x+1],E=x,z=x+1;if(typeof b!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(g.length&&g[g.length-1][0]>=b)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);const R=o.parse(T,z,v);if(!R)return null;v=v||R.type,g.push([b,R])}return new ua(v,h,g)}evaluate(r){const o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(r);const g=this.input.evaluate(r);if(g<=o[0])return h[0].evaluate(r);const v=o.length;return g>=o[v-1]?h[v-1].evaluate(r):h[Cu(o,g)].evaluate(r)}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function dp(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Qy=fp;function fp(s,r,o,h){this.cx=3*s,this.bx=3*(o-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=r,this.p2x=o,this.p2y=h}fp.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,r){if(r===void 0&&(r=1e-6),s<0)return 0;if(s>1)return 1;for(var o=s,h=0;h<8;h++){var g=this.sampleCurveX(o)-s;if(Math.abs(g)<r)return o;var v=this.sampleCurveDerivativeX(o);if(Math.abs(v)<1e-6)break;o-=g/v}var x=0,b=1;for(o=s,h=0;h<20&&(g=this.sampleCurveX(o),!(Math.abs(g-s)<r));h++)s>g?x=o:b=o,o=.5*(b-x)+x;return o},solve:function(s,r){return this.sampleCurveY(this.solveCurveX(s,r))}};var e_=dp(Qy);function Co(s,r,o){return s+o*(r-s)}function ml(s,r,o){return s.map((h,g)=>Co(h,r[g],o))}const Zr={number:Co,color:function(s,r,o,h="rgb"){switch(h){case"rgb":{const[g,v,x,b]=ml(s.rgb,r.rgb,o);return new Kt(g,v,x,b,!1)}case"hcl":{const[g,v,x,b]=s.hcl,[T,E,z,R]=r.hcl;let O,N;if(isNaN(g)||isNaN(T))isNaN(g)?isNaN(T)?O=NaN:(O=T,x!==1&&x!==0||(N=E)):(O=g,z!==1&&z!==0||(N=v));else{let Se=T-g;T>g&&Se>180?Se-=360:T<g&&g-T>180&&(Se+=360),O=g+o*Se}const[q,Z,ie,le]=function([Se,ge,be,Ee]){return Se=isNaN(Se)?0:Se*yt,Sn([be,Math.cos(Se)*ge,Math.sin(Se)*ge,Ee])}([O,N??Co(v,E,o),Co(x,z,o),Co(b,R,o)]);return new Kt(q,Z,ie,le,!1)}case"lab":{const[g,v,x,b]=Sn(ml(s.lab,r.lab,o));return new Kt(g,v,x,b,!1)}}},array:ml,padding:function(s,r,o){return new hi(ml(s.values,r.values,o))},variableAnchorOffsetCollection:function(s,r,o){const h=s.values,g=r.values;if(h.length!==g.length)throw new Rn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${r.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==g[x])throw new Rn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${g[x]}`);v.push(h[x]);const[b,T]=h[x+1],[E,z]=g[x+1];v.push([Co(b,E,o),Co(T,z,o)])}return new Pi(v)}};class Xr{constructor(r,o,h,g,v){this.type=r,this.operator=o,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,b]of v)this.labels.push(x),this.outputs.push(b)}static interpolationFactor(r,o,h,g){let v=0;if(r.name==="exponential")v=ku(o,r.base,h,g);else if(r.name==="linear")v=ku(o,1,h,g);else if(r.name==="cubic-bezier"){const x=r.controlPoints;v=new e_(x[0],x[1],x[2],x[3]).solve(ku(o,1,h,g))}return v}static parse(r,o){let[h,g,v,...x]=r;if(!Array.isArray(g)||g.length===0)return o.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const E=g[1];if(typeof E!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:E}}else{if(g[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const E=g.slice(1);if(E.length!==4||E.some(z=>typeof z!="number"||z<0||z>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:E}}}if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(v=o.parse(v,2,qe),!v)return null;const b=[];let T=null;h==="interpolate-hcl"||h==="interpolate-lab"?T=rr:o.expectedType&&o.expectedType.kind!=="value"&&(T=o.expectedType);for(let E=0;E<x.length;E+=2){const z=x[E],R=x[E+1],O=E+3,N=E+4;if(typeof z!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(b.length&&b[b.length-1][0]>=z)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const q=o.parse(R,N,T);if(!q)return null;T=T||q.type,b.push([z,q])}return we(T,qe)||we(T,rr)||we(T,gs)||we(T,oe)||we(T,V(qe))?new Xr(T,h,g,v,b):o.error(`Type ${B(T)} is not interpolatable.`)}evaluate(r){const o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(r);const g=this.input.evaluate(r);if(g<=o[0])return h[0].evaluate(r);const v=o.length;if(g>=o[v-1])return h[v-1].evaluate(r);const x=Cu(o,g),b=Xr.interpolationFactor(this.interpolation,g,o[x],o[x+1]),T=h[x].evaluate(r),E=h[x+1].evaluate(r);switch(this.operator){case"interpolate":return Zr[this.type.kind](T,E,b);case"interpolate-hcl":return Zr.color(T,E,b,"hcl");case"interpolate-lab":return Zr.color(T,E,b,"lab")}}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function ku(s,r,o,h){const g=h-o,v=s-o;return g===0?0:r===1?v/g:(Math.pow(r,v)-1)/(Math.pow(r,g)-1)}class Pu{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expectected at least one argument.");let h=null;const g=o.expectedType;g&&g.kind!=="value"&&(h=g);const v=[];for(const b of r.slice(1)){const T=o.parse(b,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!T)return null;h=h||T.type,v.push(T)}if(!h)throw new Error("No output type");const x=g&&v.some(b=>J(g,b.type));return new Pu(x?Tt:h,v)}evaluate(r){let o,h=null,g=0;for(const v of this.args)if(g++,h=v.evaluate(r),h&&h instanceof di&&!h.available&&(o||(o=h.name),h=null,g===this.args.length&&(h=o)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Eu(s,r){return s==="=="||s==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function pp(s,r,o,h){return h.compare(r,o)===0}function ca(s,r,o){const h=s!=="=="&&s!=="!=";return class iM{constructor(v,x,b){this.type=bt,this.lhs=v,this.rhs=x,this.collator=b,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const b=v[0];let T=x.parse(v[1],1,Tt);if(!T)return null;if(!Eu(b,T.type))return x.concat(1).error(`"${b}" comparisons are not supported for type '${B(T.type)}'.`);let E=x.parse(v[2],2,Tt);if(!E)return null;if(!Eu(b,E.type))return x.concat(2).error(`"${b}" comparisons are not supported for type '${B(E.type)}'.`);if(T.type.kind!==E.type.kind&&T.type.kind!=="value"&&E.type.kind!=="value")return x.error(`Cannot compare types '${B(T.type)}' and '${B(E.type)}'.`);h&&(T.type.kind==="value"&&E.type.kind!=="value"?T=new Gi(E.type,[T]):T.type.kind!=="value"&&E.type.kind==="value"&&(E=new Gi(T.type,[E])));let z=null;if(v.length===4){if(T.type.kind!=="string"&&E.type.kind!=="string"&&T.type.kind!=="value"&&E.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(z=x.parse(v[3],3,Ci),!z)return null}return new iM(T,E,z)}evaluate(v){const x=this.lhs.evaluate(v),b=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const T=Wn(x),E=Wn(b);if(T.kind!==E.kind||T.kind!=="string"&&T.kind!=="number")throw new Rn(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${T.kind}, ${E.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const T=Wn(x),E=Wn(b);if(T.kind!=="string"||E.kind!=="string")return r(v,x,b)}return this.collator?o(v,x,b,this.collator.evaluate(v)):r(v,x,b)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const t_=ca("==",function(s,r,o){return r===o},pp),mp=ca("!=",function(s,r,o){return r!==o},function(s,r,o,h){return!pp(0,r,o,h)}),gp=ca("<",function(s,r,o){return r<o},function(s,r,o,h){return h.compare(r,o)<0}),n_=ca(">",function(s,r,o){return r>o},function(s,r,o,h){return h.compare(r,o)>0}),r_=ca("<=",function(s,r,o){return r<=o},function(s,r,o,h){return h.compare(r,o)<=0}),yp=ca(">=",function(s,r,o){return r>=o},function(s,r,o,h){return h.compare(r,o)>=0});class gl{constructor(r,o,h){this.type=Ci,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=o}static parse(r,o){if(r.length!==2)return o.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return o.error("Collator options argument must be an object.");const g=o.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,bt);if(!g)return null;const v=o.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,bt);if(!v)return null;let x=null;return h.locale&&(x=o.parse(h.locale,1,xt),!x)?null:new gl(g,v,x)}evaluate(r){return new Th(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Mh{constructor(r,o,h,g,v){this.type=xt,this.number=r,this.locale=o,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(r,o){if(r.length!==3)return o.error("Expected two arguments.");const h=o.parse(r[1],1,qe);if(!h)return null;const g=r[2];if(typeof g!="object"||Array.isArray(g))return o.error("NumberFormat options argument must be an object.");let v=null;if(g.locale&&(v=o.parse(g.locale,1,xt),!v))return null;let x=null;if(g.currency&&(x=o.parse(g.currency,1,xt),!x))return null;let b=null;if(g["min-fraction-digits"]&&(b=o.parse(g["min-fraction-digits"],1,qe),!b))return null;let T=null;return g["max-fraction-digits"]&&(T=o.parse(g["max-fraction-digits"],1,qe),!T)?null:new Mh(h,v,x,b,T)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Iu{constructor(r){this.type=Wi,this.sections=r}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return o.error("First argument must be an image or text section.");const g=[];let v=!1;for(let x=1;x<=r.length-1;++x){const b=r[x];if(v&&typeof b=="object"&&!Array.isArray(b)){v=!1;let T=null;if(b["font-scale"]&&(T=o.parse(b["font-scale"],1,qe),!T))return null;let E=null;if(b["text-font"]&&(E=o.parse(b["text-font"],1,V(xt)),!E))return null;let z=null;if(b["text-color"]&&(z=o.parse(b["text-color"],1,rr),!z))return null;const R=g[g.length-1];R.scale=T,R.font=E,R.textColor=z}else{const T=o.parse(r[x],1,Tt);if(!T)return null;const E=T.type.kind;if(E!=="string"&&E!=="value"&&E!=="null"&&E!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,g.push({content:T,scale:null,font:null,textColor:null})}}return new Iu(g)}evaluate(r){return new ci(this.sections.map(o=>{const h=o.content.evaluate(r);return Wn(h)===ki?new Ch("",h,null,null,null):new Ch(fl(h),null,o.scale?o.scale.evaluate(r):null,o.font?o.font.evaluate(r).join(","):null,o.textColor?o.textColor.evaluate(r):null)}))}eachChild(r){for(const o of this.sections)r(o.content),o.scale&&r(o.scale),o.font&&r(o.font),o.textColor&&r(o.textColor)}outputDefined(){return!1}}class Ah{constructor(r){this.type=ki,this.input=r}static parse(r,o){if(r.length!==2)return o.error("Expected two arguments.");const h=o.parse(r[1],1,xt);return h?new Ah(h):o.error("No image name provided.")}evaluate(r){const o=this.input.evaluate(r),h=di.fromString(o);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(o)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class zh{constructor(r){this.type=qe,this.input=r}static parse(r,o){if(r.length!==2)return o.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=o.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${B(h.type)} instead.`):new zh(h):null}evaluate(r){const o=this.input.evaluate(r);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new Rn(`Expected value to be of type string or array, but found ${B(Wn(o))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const ys=8192;function i_(s,r){const o=(180+s[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,r.z);return[Math.round(o*g*ys),Math.round(h*g*ys)]}function Dh(s,r){const o=Math.pow(2,r.z);return[(g=(s[0]/ys+r.x)/o,360*g-180),(h=(s[1]/ys+r.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function ko(s,r){s[0]=Math.min(s[0],r[0]),s[1]=Math.min(s[1],r[1]),s[2]=Math.max(s[2],r[0]),s[3]=Math.max(s[3],r[1])}function Qs(s,r){return!(s[0]<=r[0]||s[2]>=r[2]||s[1]<=r[1]||s[3]>=r[3])}function Gt(s,r,o){const h=s[0]-r[0],g=s[1]-r[1],v=s[0]-o[0],x=s[1]-o[1];return h*x-v*g==0&&h*v<=0&&g*x<=0}function Mu(s,r,o,h){return(g=[h[0]-o[0],h[1]-o[1]])[0]*(v=[r[0]-s[0],r[1]-s[1]])[1]-g[1]*v[0]!=0&&!(!vp(s,r,o,h)||!vp(o,h,s,r));var g,v}function s_(s,r,o){for(const h of o)for(let g=0;g<h.length-1;++g)if(Mu(s,r,h[g],h[g+1]))return!0;return!1}function ha(s,r,o=!1){let h=!1;for(const b of r)for(let T=0;T<b.length-1;T++){if(Gt(s,b[T],b[T+1]))return o;(v=b[T])[1]>(g=s)[1]!=(x=b[T+1])[1]>g[1]&&g[0]<(x[0]-v[0])*(g[1]-v[1])/(x[1]-v[1])+v[0]&&(h=!h)}var g,v,x;return h}function o_(s,r){for(const o of r)if(ha(s,o))return!0;return!1}function _p(s,r){for(const o of s)if(!ha(o,r))return!1;for(let o=0;o<s.length-1;++o)if(s_(s[o],s[o+1],r))return!1;return!0}function a_(s,r){for(const o of r)if(_p(s,o))return!0;return!1}function vp(s,r,o,h){const g=h[0]-o[0],v=h[1]-o[1],x=(s[0]-o[0])*v-g*(s[1]-o[1]),b=(r[0]-o[0])*v-g*(r[1]-o[1]);return x>0&&b<0||x<0&&b>0}function Rh(s,r,o){const h=[];for(let g=0;g<s.length;g++){const v=[];for(let x=0;x<s[g].length;x++){const b=i_(s[g][x],o);ko(r,b),v.push(b)}h.push(v)}return h}function xp(s,r,o){const h=[];for(let g=0;g<s.length;g++){const v=Rh(s[g],r,o);h.push(v)}return h}function bp(s,r,o,h){if(s[0]<o[0]||s[0]>o[2]){const g=.5*h;let v=s[0]-o[0]>g?-h:o[0]-s[0]>g?h:0;v===0&&(v=s[0]-o[2]>g?-h:o[2]-s[0]>g?h:0),s[0]+=v}ko(r,s)}function wp(s,r,o,h){const g=Math.pow(2,h.z)*ys,v=[h.x*ys,h.y*ys],x=[];for(const b of s)for(const T of b){const E=[T.x+v[0],T.y+v[1]];bp(E,r,o,g),x.push(E)}return x}function Sp(s,r,o,h){const g=Math.pow(2,h.z)*ys,v=[h.x*ys,h.y*ys],x=[];for(const T of s){const E=[];for(const z of T){const R=[z.x+v[0],z.y+v[1]];ko(r,R),E.push(R)}x.push(E)}if(r[2]-r[0]<=g/2){(b=r)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const T of x)for(const E of T)bp(E,r,o,g)}var b;return x}class Po{constructor(r,o){this.type=bt,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(So(r[1])){const h=r[1];if(h.type==="FeatureCollection"){const g=[];for(const v of h.features){const{type:x,coordinates:b}=v.geometry;x==="Polygon"&&g.push(b),x==="MultiPolygon"&&g.push(...b)}if(g.length)return new Po(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Po(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Po(h,h)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,h){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(h.type==="Polygon"){const b=Rh(h.coordinates,v,x),T=wp(o.geometry(),g,v,x);if(!Qs(g,v))return!1;for(const E of T)if(!ha(E,b))return!1}if(h.type==="MultiPolygon"){const b=xp(h.coordinates,v,x),T=wp(o.geometry(),g,v,x);if(!Qs(g,v))return!1;for(const E of T)if(!o_(E,b))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,h){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(h.type==="Polygon"){const b=Rh(h.coordinates,v,x),T=Sp(o.geometry(),g,v,x);if(!Qs(g,v))return!1;for(const E of T)if(!_p(E,b))return!1}if(h.type==="MultiPolygon"){const b=xp(h.coordinates,v,x),T=Sp(o.geometry(),g,v,x);if(!Qs(g,v))return!1;for(const E of T)if(!a_(E,b))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Tp=class{constructor(s=[],r=(o,h)=>o<h?-1:o>h?1:0){if(this.data=s,this.length=this.data.length,this.compare=r,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:r,compare:o}=this,h=r[s];for(;s>0;){const g=s-1>>1,v=r[g];if(o(h,v)>=0)break;r[s]=v,s=g}r[s]=h}_down(s){const{data:r,compare:o}=this,h=this.length>>1,g=r[s];for(;s<h;){let v=1+(s<<1);const x=v+1;if(x<this.length&&o(r[x],r[v])<0&&(v=x),o(r[v],g)>=0)break;r[s]=r[v],s=v}r[s]=g}};function l_(s,r,o,h,g){Cp(s,r,o,h||s.length-1,g||u_)}function Cp(s,r,o,h,g){for(;h>o;){if(h-o>600){var v=h-o+1,x=r-o+1,b=Math.log(v),T=.5*Math.exp(2*b/3),E=.5*Math.sqrt(b*T*(v-T)/v)*(x-v/2<0?-1:1);Cp(s,r,Math.max(o,Math.floor(r-x*T/v+E)),Math.min(h,Math.floor(r+(v-x)*T/v+E)),g)}var z=s[r],R=o,O=h;for(yl(s,o,r),g(s[h],z)>0&&yl(s,o,h);R<O;){for(yl(s,R,O),R++,O--;g(s[R],z)<0;)R++;for(;g(s[O],z)>0;)O--}g(s[o],z)===0?yl(s,o,O):yl(s,++O,h),O<=r&&(o=O+1),r<=O&&(h=O-1)}}function yl(s,r,o){var h=s[r];s[r]=s[o],s[o]=h}function u_(s,r){return s<r?-1:s>r?1:0}function Au(s,r){if(s.length<=1)return[s];const o=[];let h,g;for(const v of s){const x=h_(v);x!==0&&(v.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(h&&o.push(h),h=[v]):h.push(v))}if(h&&o.push(h),r>1)for(let v=0;v<o.length;v++)o[v].length<=r||(l_(o[v],r,1,o[v].length-1,c_),o[v]=o[v].slice(0,r));return o}function c_(s,r){return r.area-s.area}function h_(s){let r=0;for(let o,h,g=0,v=s.length,x=v-1;g<v;x=g++)o=s[g],h=s[x],r+=(h.x-o.x)*(o.y+h.y);return r}const kp=1/298.257223563,Pp=kp*(2-kp),Ep=Math.PI/180;class Lh{constructor(r){const o=6378.137*Ep*1e3,h=Math.cos(r*Ep),g=1/(1-Pp*(1-h*h)),v=Math.sqrt(g);this.kx=o*v*h,this.ky=o*v*g*(1-Pp)}distance(r,o){const h=this.wrap(r[0]-o[0])*this.kx,g=(r[1]-o[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(r,o){let h,g,v,x,b=1/0;for(let T=0;T<r.length-1;T++){let E=r[T][0],z=r[T][1],R=this.wrap(r[T+1][0]-E)*this.kx,O=(r[T+1][1]-z)*this.ky,N=0;R===0&&O===0||(N=(this.wrap(o[0]-E)*this.kx*R+(o[1]-z)*this.ky*O)/(R*R+O*O),N>1?(E=r[T+1][0],z=r[T+1][1]):N>0&&(E+=R/this.kx*N,z+=O/this.ky*N)),R=this.wrap(o[0]-E)*this.kx,O=(o[1]-z)*this.ky;const q=R*R+O*O;q<b&&(b=q,h=E,g=z,v=T,x=N)}return{point:[h,g],index:v,t:Math.max(0,Math.min(1,x))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Ip(s,r){return r[0]-s[0]}function zu(s){return s[1]-s[0]+1}function Vs(s,r){return s[1]>=s[0]&&s[1]<r}function Fh(s,r){if(s[0]>s[1])return[null,null];const o=zu(s);if(r){if(o===2)return[s,null];const g=Math.floor(o/2);return[[s[0],s[0]+g],[s[0]+g,s[1]]]}if(o===1)return[s,null];const h=Math.floor(o/2)-1;return[[s[0],s[0]+h],[s[0]+h+1,s[1]]]}function Oh(s,r){if(!Vs(r,s.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let h=r[0];h<=r[1];++h)ko(o,s[h]);return o}function Bh(s){const r=[1/0,1/0,-1/0,-1/0];for(const o of s)for(const h of o)ko(r,h);return r}function Du(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Vh(s,r,o){if(!Du(s)||!Du(r))return NaN;let h=0,g=0;return s[2]<r[0]&&(h=r[0]-s[2]),s[0]>r[2]&&(h=s[0]-r[2]),s[1]>r[3]&&(g=s[1]-r[3]),s[3]<r[1]&&(g=r[1]-s[3]),o.distance([0,0],[h,g])}function Eo(s,r,o){const h=o.pointOnLine(r,s);return o.distance(s,h.point)}function Nh(s,r,o,h,g){const v=Math.min(Eo(s,[o,h],g),Eo(r,[o,h],g)),x=Math.min(Eo(o,[s,r],g),Eo(h,[s,r],g));return Math.min(v,x)}function d_(s,r,o,h,g){if(!Vs(r,s.length)||!Vs(h,o.length))return 1/0;let v=1/0;for(let x=r[0];x<r[1];++x){const b=s[x],T=s[x+1];for(let E=h[0];E<h[1];++E){const z=o[E],R=o[E+1];if(Mu(b,T,z,R))return 0;v=Math.min(v,Nh(b,T,z,R,g))}}return v}function En(s,r,o,h,g){if(!Vs(r,s.length)||!Vs(h,o.length))return NaN;let v=1/0;for(let x=r[0];x<=r[1];++x)for(let b=h[0];b<=h[1];++b)if(v=Math.min(v,g.distance(s[x],o[b])),v===0)return v;return v}function f_(s,r,o){if(ha(s,r,!0))return 0;let h=1/0;for(const g of r){const v=g[0],x=g[g.length-1];if(v!==x&&(h=Math.min(h,Eo(s,[x,v],o)),h===0))return h;const b=o.pointOnLine(g,s);if(h=Math.min(h,o.distance(s,b.point)),h===0)return h}return h}function Rt(s,r,o,h){if(!Vs(r,s.length))return NaN;for(let v=r[0];v<=r[1];++v)if(ha(s[v],o,!0))return 0;let g=1/0;for(let v=r[0];v<r[1];++v){const x=s[v],b=s[v+1];for(const T of o)for(let E=0,z=T.length,R=z-1;E<z;R=E++){const O=T[R],N=T[E];if(Mu(x,b,O,N))return 0;g=Math.min(g,Nh(x,b,O,N,h))}}return g}function Ru(s,r){for(const o of s)for(const h of o)if(ha(h,r,!0))return!0;return!1}function on(s,r,o,h=1/0){const g=Bh(s),v=Bh(r);if(h!==1/0&&Vh(g,v,o)>=h)return h;if(Qs(g,v)){if(Ru(s,r))return 0}else if(Ru(r,s))return 0;let x=1/0;for(const b of s)for(let T=0,E=b.length,z=E-1;T<E;z=T++){const R=b[z],O=b[T];for(const N of r)for(let q=0,Z=N.length,ie=Z-1;q<Z;ie=q++){const le=N[ie],Se=N[q];if(Mu(R,O,le,Se))return 0;x=Math.min(x,Nh(R,O,le,Se,o))}}return x}function Qt(s,r,o,h,g,v){if(!v)return;const x=Vh(Oh(h,v),g,o);x<r&&s.push([x,v,[0,0]])}function Io(s,r,o,h,g,v,x){if(!v||!x)return;const b=Vh(Oh(h,v),Oh(g,x),o);b<r&&s.push([b,v,x])}function _l(s,r,o,h,g=1/0){let v=Math.min(h.distance(s[0],o[0][0]),g);if(v===0)return v;const x=new Tp([[0,[0,s.length-1],[0,0]]],Ip),b=Bh(o);for(;x.length>0;){const T=x.pop();if(T[0]>=v)continue;const E=T[1],z=r?50:100;if(zu(E)<=z){if(!Vs(E,s.length))return NaN;if(r){const R=Rt(s,E,o,h);if(isNaN(R)||R===0)return R;v=Math.min(v,R)}else for(let R=E[0];R<=E[1];++R){const O=f_(s[R],o,h);if(v=Math.min(v,O),v===0)return 0}}else{const R=Fh(E,r);Qt(x,v,h,s,b,R[0]),Qt(x,v,h,s,b,R[1])}}return v}function vl(s,r,o,h,g,v=1/0){let x=Math.min(v,g.distance(s[0],o[0]));if(x===0)return x;const b=new Tp([[0,[0,s.length-1],[0,o.length-1]]],Ip);for(;b.length>0;){const T=b.pop();if(T[0]>=x)continue;const E=T[1],z=T[2],R=r?50:100,O=h?50:100;if(zu(E)<=R&&zu(z)<=O){if(!Vs(E,s.length)&&Vs(z,o.length))return NaN;let N;if(r&&h)N=d_(s,E,o,z,g),x=Math.min(x,N);else if(r&&!h){const q=s.slice(E[0],E[1]+1);for(let Z=z[0];Z<=z[1];++Z)if(N=Eo(o[Z],q,g),x=Math.min(x,N),x===0)return x}else if(!r&&h){const q=o.slice(z[0],z[1]+1);for(let Z=E[0];Z<=E[1];++Z)if(N=Eo(s[Z],q,g),x=Math.min(x,N),x===0)return x}else N=En(s,E,o,z,g),x=Math.min(x,N)}else{const N=Fh(E,r),q=Fh(z,h);Io(b,x,g,s,o,N[0],q[0]),Io(b,x,g,s,o,N[0],q[1]),Io(b,x,g,s,o,N[1],q[0]),Io(b,x,g,s,o,N[1],q[1])}}return x}function jh(s){return s.type==="MultiPolygon"?s.coordinates.map(r=>({type:"Polygon",coordinates:r})):s.type==="MultiLineString"?s.coordinates.map(r=>({type:"LineString",coordinates:r})):s.type==="MultiPoint"?s.coordinates.map(r=>({type:"Point",coordinates:r})):[s]}class Mo{constructor(r,o){this.type=qe,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(So(r[1])){const h=r[1];if(h.type==="FeatureCollection")return new Mo(h,h.features.map(g=>jh(g.geometry)).flat());if(h.type==="Feature")return new Mo(h,jh(h.geometry));if("type"in h&&"coordinates"in h)return new Mo(h,jh(h))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,h){const g=o.geometry(),v=g.flat().map(T=>Dh([T.x,T.y],o.canonical));if(g.length===0)return NaN;const x=new Lh(v[0][1]);let b=1/0;for(const T of h){switch(T.type){case"Point":b=Math.min(b,vl(v,!1,[T.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,vl(v,!1,T.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,_l(v,!1,T.coordinates,x,b))}if(b===0)return b}return b}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,h){const g=o.geometry(),v=g.flat().map(T=>Dh([T.x,T.y],o.canonical));if(g.length===0)return NaN;const x=new Lh(v[0][1]);let b=1/0;for(const T of h){switch(T.type){case"Point":b=Math.min(b,vl(v,!0,[T.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,vl(v,!0,T.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,_l(v,!0,T.coordinates,x,b))}if(b===0)return b}return b}(r,this.geometries);if(r.geometryType()==="Polygon")return function(o,h){const g=o.geometry();if(g.length===0||g[0].length===0)return NaN;const v=Au(g,0).map(T=>T.map(E=>E.map(z=>Dh([z.x,z.y],o.canonical)))),x=new Lh(v[0][0][0][1]);let b=1/0;for(const T of h)for(const E of v){switch(T.type){case"Point":b=Math.min(b,_l([T.coordinates],!1,E,x,b));break;case"LineString":b=Math.min(b,_l(T.coordinates,!0,E,x,b));break;case"Polygon":b=Math.min(b,on(E,T.coordinates,x,b))}if(b===0)return b}return b}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const da={"==":t_,"!=":mp,">":n_,"<":gp,">=":yp,"<=":r_,array:Gi,at:Ph,boolean:Gi,case:Tu,coalesce:Pu,collator:gl,format:Iu,image:Ah,in:Eh,"index-of":la,interpolate:Xr,"interpolate-hcl":Xr,"interpolate-lab":Xr,length:zh,let:Js,literal:qi,match:Ih,number:Gi,"number-format":Mh,object:Gi,slice:pl,step:ua,string:Gi,"to-boolean":Hi,"to-color":Hi,"to-number":Hi,"to-string":Hi,var:qt,within:Po,distance:Mo};class Ei{constructor(r,o,h,g){this.name=r,this.type=o,this._evaluate=h,this.args=g}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,o){const h=r[0],g=Ei.definitions[h];if(!g)return o.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,b=x.filter(([E])=>!Array.isArray(E)||E.length===r.length-1);let T=null;for(const[E,z]of b){T=new To(o.registry,xl,o.path,null,o.scope);const R=[];let O=!1;for(let N=1;N<r.length;N++){const q=r[N],Z=Array.isArray(E)?E[N-1]:E.type,ie=T.parse(q,1+R.length,Z);if(!ie){O=!0;break}R.push(ie)}if(!O)if(Array.isArray(E)&&E.length!==R.length)T.error(`Expected ${E.length} arguments, but found ${R.length} instead.`);else{for(let N=0;N<R.length;N++){const q=Array.isArray(E)?E[N]:E.type,Z=R[N];T.concat(N+1).checkSubtype(q,Z.type)}if(T.errors.length===0)return new Ei(h,v,z,R)}}if(b.length===1)o.errors.push(...T.errors);else{const E=(b.length?b:x).map(([R])=>{return O=R,Array.isArray(O)?`(${O.map(B).join(", ")})`:`(${B(O.type)}...)`;var O}).join(" | "),z=[];for(let R=1;R<r.length;R++){const O=o.parse(r[R],1+z.length);if(!O)return null;z.push(B(O.type))}o.error(`Expected arguments of type ${E}, but found (${z.join(", ")}) instead.`)}return null}static register(r,o){Ei.definitions=o;for(const h in o)r[h]=Ei}}function $h(s,[r,o,h,g]){r=r.evaluate(s),o=o.evaluate(s),h=h.evaluate(s);const v=g?g.evaluate(s):1,x=aa(r,o,h,v);if(x)throw new Rn(x);return new Kt(r/255,o/255,h/255,v,!1)}function Uh(s,r){return s in r}function Wh(s,r){const o=r[s];return o===void 0?null:o}function Ao(s){return{type:s}}function xl(s){if(s instanceof qt)return xl(s.boundExpression);if(s instanceof Ei&&s.name==="error"||s instanceof gl||s instanceof Po||s instanceof Mo)return!1;const r=s instanceof Hi||s instanceof Gi;let o=!0;return s.eachChild(h=>{o=r?o&&xl(h):o&&h instanceof qi}),!!o&&bl(s)&&wl(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function bl(s){if(s instanceof Ei&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Po||s instanceof Mo)return!1;let r=!0;return s.eachChild(o=>{r&&!bl(o)&&(r=!1)}),r}function fa(s){if(s instanceof Ei&&s.name==="feature-state")return!1;let r=!0;return s.eachChild(o=>{r&&!fa(o)&&(r=!1)}),r}function wl(s,r){if(s instanceof Ei&&r.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild(h=>{o&&!wl(h,r)&&(o=!1)}),o}function Lu(s){return{result:"success",value:s}}function pa(s){return{result:"error",value:s}}function ma(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Mp(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function qh(s){return!!s.expression&&s.expression.interpolated}function Ut(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Fu(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function p_(s){return s}function Ap(s,r){const o=r.type==="color",h=s.stops&&typeof s.stops[0][0]=="object",g=h||!(h||s.property!==void 0),v=s.type||(qh(r)?"exponential":"interval");if(o||r.type==="padding"){const z=o?Kt.parse:hi.parse;(s=vr({},s)).stops&&(s.stops=s.stops.map(R=>[R[0],z(R[1])])),s.default=z(s.default?s.default:r.default)}if(s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;let b,T,E;if(v==="exponential")b=Dp;else if(v==="interval")b=Ou;else if(v==="categorical"){b=zp,T=Object.create(null);for(const z of s.stops)T[z[0]]=z[1];E=typeof s.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);b=Rp}if(h){const z={},R=[];for(let q=0;q<s.stops.length;q++){const Z=s.stops[q],ie=Z[0].zoom;z[ie]===void 0&&(z[ie]={zoom:ie,type:s.type,property:s.property,default:s.default,stops:[]},R.push(ie)),z[ie].stops.push([Z[0].value,Z[1]])}const O=[];for(const q of R)O.push([z[q].zoom,Ap(z[q],r)]);const N={name:"linear"};return{kind:"composite",interpolationType:N,interpolationFactor:Xr.interpolationFactor.bind(void 0,N),zoomStops:O.map(q=>q[0]),evaluate:({zoom:q},Z)=>Dp({stops:O,base:s.base},r,q).evaluate(q,Z)}}if(g){const z=v==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Xr.interpolationFactor.bind(void 0,z),zoomStops:s.stops.map(R=>R[0]),evaluate:({zoom:R})=>b(s,r,R,T,E)}}return{kind:"source",evaluate(z,R){const O=R&&R.properties?R.properties[s.property]:void 0;return O===void 0?ga(s.default,r.default):b(s,r,O,T,E)}}}function ga(s,r,o){return s!==void 0?s:r!==void 0?r:o!==void 0?o:void 0}function zp(s,r,o,h,g){return ga(typeof o===g?h[o]:void 0,s.default,r.default)}function Ou(s,r,o){if(Ut(o)!=="number")return ga(s.default,r.default);const h=s.stops.length;if(h===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[h-1][0])return s.stops[h-1][1];const g=Cu(s.stops.map(v=>v[0]),o);return s.stops[g][1]}function Dp(s,r,o){const h=s.base!==void 0?s.base:1;if(Ut(o)!=="number")return ga(s.default,r.default);const g=s.stops.length;if(g===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[g-1][0])return s.stops[g-1][1];const v=Cu(s.stops.map(z=>z[0]),o),x=function(z,R,O,N){const q=N-O,Z=z-O;return q===0?0:R===1?Z/q:(Math.pow(R,Z)-1)/(Math.pow(R,q)-1)}(o,h,s.stops[v][0],s.stops[v+1][0]),b=s.stops[v][1],T=s.stops[v+1][1],E=Zr[r.type]||p_;return typeof b.evaluate=="function"?{evaluate(...z){const R=b.evaluate.apply(void 0,z),O=T.evaluate.apply(void 0,z);if(R!==void 0&&O!==void 0)return E(R,O,x,s.colorSpace)}}:E(b,T,x,s.colorSpace)}function Rp(s,r,o){switch(r.type){case"color":o=Kt.parse(o);break;case"formatted":o=ci.fromString(o.toString());break;case"resolvedImage":o=di.fromString(o.toString());break;case"padding":o=hi.parse(o);break;default:Ut(o)===r.type||r.type==="enum"&&r.values[o]||(o=void 0)}return ga(o,s.default,r.default)}Ei.register(da,{error:[{kind:"error"},[xt],(s,[r])=>{throw new Rn(r.evaluate(s))}],typeof:[xt,[Tt],(s,[r])=>B(Wn(r.evaluate(s)))],"to-rgba":[V(qe,4),[rr],(s,[r])=>{const[o,h,g,v]=r.evaluate(s).rgb;return[255*o,255*h,255*g,v]}],rgb:[rr,[qe,qe,qe],$h],rgba:[rr,[qe,qe,qe,qe],$h],has:{type:bt,overloads:[[[xt],(s,[r])=>Uh(r.evaluate(s),s.properties())],[[xt,ui],(s,[r,o])=>Uh(r.evaluate(s),o.evaluate(s))]]},get:{type:Tt,overloads:[[[xt],(s,[r])=>Wh(r.evaluate(s),s.properties())],[[xt,ui],(s,[r,o])=>Wh(r.evaluate(s),o.evaluate(s))]]},"feature-state":[Tt,[xt],(s,[r])=>Wh(r.evaluate(s),s.featureState||{})],properties:[ui,[],s=>s.properties()],"geometry-type":[xt,[],s=>s.geometryType()],id:[Tt,[],s=>s.id()],zoom:[qe,[],s=>s.globals.zoom],"heatmap-density":[qe,[],s=>s.globals.heatmapDensity||0],"line-progress":[qe,[],s=>s.globals.lineProgress||0],accumulated:[Tt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[qe,Ao(qe),(s,r)=>{let o=0;for(const h of r)o+=h.evaluate(s);return o}],"*":[qe,Ao(qe),(s,r)=>{let o=1;for(const h of r)o*=h.evaluate(s);return o}],"-":{type:qe,overloads:[[[qe,qe],(s,[r,o])=>r.evaluate(s)-o.evaluate(s)],[[qe],(s,[r])=>-r.evaluate(s)]]},"/":[qe,[qe,qe],(s,[r,o])=>r.evaluate(s)/o.evaluate(s)],"%":[qe,[qe,qe],(s,[r,o])=>r.evaluate(s)%o.evaluate(s)],ln2:[qe,[],()=>Math.LN2],pi:[qe,[],()=>Math.PI],e:[qe,[],()=>Math.E],"^":[qe,[qe,qe],(s,[r,o])=>Math.pow(r.evaluate(s),o.evaluate(s))],sqrt:[qe,[qe],(s,[r])=>Math.sqrt(r.evaluate(s))],log10:[qe,[qe],(s,[r])=>Math.log(r.evaluate(s))/Math.LN10],ln:[qe,[qe],(s,[r])=>Math.log(r.evaluate(s))],log2:[qe,[qe],(s,[r])=>Math.log(r.evaluate(s))/Math.LN2],sin:[qe,[qe],(s,[r])=>Math.sin(r.evaluate(s))],cos:[qe,[qe],(s,[r])=>Math.cos(r.evaluate(s))],tan:[qe,[qe],(s,[r])=>Math.tan(r.evaluate(s))],asin:[qe,[qe],(s,[r])=>Math.asin(r.evaluate(s))],acos:[qe,[qe],(s,[r])=>Math.acos(r.evaluate(s))],atan:[qe,[qe],(s,[r])=>Math.atan(r.evaluate(s))],min:[qe,Ao(qe),(s,r)=>Math.min(...r.map(o=>o.evaluate(s)))],max:[qe,Ao(qe),(s,r)=>Math.max(...r.map(o=>o.evaluate(s)))],abs:[qe,[qe],(s,[r])=>Math.abs(r.evaluate(s))],round:[qe,[qe],(s,[r])=>{const o=r.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[qe,[qe],(s,[r])=>Math.floor(r.evaluate(s))],ceil:[qe,[qe],(s,[r])=>Math.ceil(r.evaluate(s))],"filter-==":[bt,[xt,Tt],(s,[r,o])=>s.properties()[r.value]===o.value],"filter-id-==":[bt,[Tt],(s,[r])=>s.id()===r.value],"filter-type-==":[bt,[xt],(s,[r])=>s.geometryType()===r.value],"filter-<":[bt,[xt,Tt],(s,[r,o])=>{const h=s.properties()[r.value],g=o.value;return typeof h==typeof g&&h<g}],"filter-id-<":[bt,[Tt],(s,[r])=>{const o=s.id(),h=r.value;return typeof o==typeof h&&o<h}],"filter->":[bt,[xt,Tt],(s,[r,o])=>{const h=s.properties()[r.value],g=o.value;return typeof h==typeof g&&h>g}],"filter-id->":[bt,[Tt],(s,[r])=>{const o=s.id(),h=r.value;return typeof o==typeof h&&o>h}],"filter-<=":[bt,[xt,Tt],(s,[r,o])=>{const h=s.properties()[r.value],g=o.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[bt,[Tt],(s,[r])=>{const o=s.id(),h=r.value;return typeof o==typeof h&&o<=h}],"filter->=":[bt,[xt,Tt],(s,[r,o])=>{const h=s.properties()[r.value],g=o.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[bt,[Tt],(s,[r])=>{const o=s.id(),h=r.value;return typeof o==typeof h&&o>=h}],"filter-has":[bt,[Tt],(s,[r])=>r.value in s.properties()],"filter-has-id":[bt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[bt,[V(xt)],(s,[r])=>r.value.indexOf(s.geometryType())>=0],"filter-id-in":[bt,[V(Tt)],(s,[r])=>r.value.indexOf(s.id())>=0],"filter-in-small":[bt,[xt,V(Tt)],(s,[r,o])=>o.value.indexOf(s.properties()[r.value])>=0],"filter-in-large":[bt,[xt,V(Tt)],(s,[r,o])=>function(h,g,v,x){for(;v<=x;){const b=v+x>>1;if(g[b]===h)return!0;g[b]>h?x=b-1:v=b+1}return!1}(s.properties()[r.value],o.value,0,o.value.length-1)],all:{type:bt,overloads:[[[bt,bt],(s,[r,o])=>r.evaluate(s)&&o.evaluate(s)],[Ao(bt),(s,r)=>{for(const o of r)if(!o.evaluate(s))return!1;return!0}]]},any:{type:bt,overloads:[[[bt,bt],(s,[r,o])=>r.evaluate(s)||o.evaluate(s)],[Ao(bt),(s,r)=>{for(const o of r)if(o.evaluate(s))return!0;return!1}]]},"!":[bt,[bt],(s,[r])=>!r.evaluate(s)],"is-supported-script":[bt,[xt],(s,[r])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(r.evaluate(s))}],upcase:[xt,[xt],(s,[r])=>r.evaluate(s).toUpperCase()],downcase:[xt,[xt],(s,[r])=>r.evaluate(s).toLowerCase()],concat:[xt,Ao(Tt),(s,r)=>r.map(o=>fl(o.evaluate(s))).join("")],"resolved-locale":[xt,[Ci],(s,[r])=>r.evaluate(s).resolvedLocale()]});class Bu{constructor(r,o){var h;this.expression=r,this._warningHistory={},this._evaluator=new Su,this._defaultValue=o?(h=o).type==="color"&&Fu(h.default)?new Kt(0,0,0,0):h.type==="color"?Kt.parse(h.default)||null:h.type==="padding"?hi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Pi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(r,o,h,g,v,x){return this._evaluator.globals=r,this._evaluator.feature=o,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,o,h,g,v,x){this._evaluator.globals=r,this._evaluator.feature=o||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new Rn(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function Vu(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in da}function ya(s,r){const o=new To(da,xl,[],r?function(g){const v={color:rr,string:xt,number:qe,enum:xt,boolean:bt,formatted:Wi,padding:gs,resolvedImage:ki,variableAnchorOffsetCollection:oe};return g.type==="array"?V(v[g.value]||Tt,g.length):v[g.type]}(r):void 0),h=o.parse(s,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Lu(new Bu(h,r)):pa(o.errors)}class _a{constructor(r,o){this.kind=r,this._styleExpression=o,this.isStateDependent=r!=="constant"&&!fa(o.expression)}evaluateWithoutErrorHandling(r,o,h,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,o,h,g,v,x)}evaluate(r,o,h,g,v,x){return this._styleExpression.evaluate(r,o,h,g,v,x)}}class va{constructor(r,o,h,g){this.kind=r,this.zoomStops=h,this._styleExpression=o,this.isStateDependent=r!=="camera"&&!fa(o.expression),this.interpolationType=g}evaluateWithoutErrorHandling(r,o,h,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,o,h,g,v,x)}evaluate(r,o,h,g,v,x){return this._styleExpression.evaluate(r,o,h,g,v,x)}interpolationFactor(r,o,h){return this.interpolationType?Xr.interpolationFactor(this.interpolationType,r,o,h):0}}function Gh(s,r){const o=ya(s,r);if(o.result==="error")return o;const h=o.value.expression,g=bl(h);if(!g&&!ma(r))return pa([new Yn("","data expressions not supported")]);const v=wl(h,["zoom"]);if(!v&&!Mp(r))return pa([new Yn("","zoom expressions not supported")]);const x=Sl(h);return x||v?x instanceof Yn?pa([x]):x instanceof Xr&&!qh(r)?pa([new Yn("",'"interpolate" expressions cannot be used with this property')]):Lu(x?new va(g?"camera":"composite",o.value,x.labels,x instanceof Xr?x.interpolation:void 0):new _a(g?"constant":"source",o.value)):pa([new Yn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class xa{constructor(r,o){this._parameters=r,this._specification=o,vr(this,Ap(this._parameters,this._specification))}static deserialize(r){return new xa(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Sl(s){let r=null;if(s instanceof Js)r=Sl(s.result);else if(s instanceof Pu){for(const o of s.args)if(r=Sl(o),r)break}else(s instanceof ua||s instanceof Xr)&&s.input instanceof Ei&&s.input.name==="zoom"&&(r=s);return r instanceof Yn||s.eachChild(o=>{const h=Sl(o);h instanceof Yn?r=h:!r&&h?r=new Yn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Yn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Nu(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const r of s.slice(1))if(!Nu(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const ju={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Hh(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Nu(s)||(s=$u(s));const r=ya(s,ju);if(r.result==="error")throw new Error(r.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,h,g)=>r.value.evaluate(o,h,{},g),needGeometry:Lp(s)}}function m_(s,r){return s<r?-1:s>r?1:0}function Lp(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let r=1;r<s.length;r++)if(Lp(s[r]))return!0;return!1}function $u(s){if(!s)return!0;const r=s[0];return s.length<=1?r!=="any":r==="=="?Zh(s[1],s[2],"=="):r==="!="?xr(Zh(s[1],s[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Zh(s[1],s[2],r):r==="any"?(o=s.slice(1),["any"].concat(o.map($u))):r==="all"?["all"].concat(s.slice(1).map($u)):r==="none"?["all"].concat(s.slice(1).map($u).map(xr)):r==="in"?Tl(s[1],s.slice(2)):r==="!in"?xr(Tl(s[1],s.slice(2))):r==="has"?Cl(s[1]):r!=="!has"||xr(Cl(s[1]));var o}function Zh(s,r,o){switch(s){case"$type":return[`filter-type-${o}`,r];case"$id":return[`filter-id-${o}`,r];default:return[`filter-${o}`,s,r]}}function Tl(s,r){if(r.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(o=>typeof o!=typeof r[0])?["filter-in-large",s,["literal",r.sort(m_)]]:["filter-in-small",s,["literal",r]]}}function Cl(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function xr(s){return["!",s]}function zo(s){const r=typeof s;if(r==="number"||r==="boolean"||r==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const v of s)g+=`${zo(v)},`;return`${g}]`}const o=Object.keys(s).sort();let h="{";for(let g=0;g<o.length;g++)h+=`${JSON.stringify(o[g])}:${zo(s[o[g]])},`;return`${h}}`}function Fp(s){let r="";for(const o of $n)r+=`/${zo(s[o])}`;return r}function Op(s){const r=s.value;return r?[new Ue(s.key,r,"constants have been deprecated as of v8")]:[]}function In(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Zi(s){if(Array.isArray(s))return s.map(Zi);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const r={};for(const o in s)r[o]=Zi(s[o]);return r}return In(s)}function fi(s){const r=s.key,o=s.value,h=s.valueSpec||{},g=s.objectElementValidators||{},v=s.style,x=s.styleSpec,b=s.validateSpec;let T=[];const E=Ut(o);if(E!=="object")return[new Ue(r,o,`object expected, ${E} found`)];for(const z in o){const R=z.split(".")[0],O=h[R]||h["*"];let N;if(g[R])N=g[R];else if(h[R])N=b;else if(g["*"])N=g["*"];else{if(!h["*"]){T.push(new Ue(r,o[z],`unknown property "${z}"`));continue}N=b}T=T.concat(N({key:(r&&`${r}.`)+z,value:o[z],valueSpec:O,style:v,styleSpec:x,object:o,objectKey:z,validateSpec:b},o))}for(const z in h)g[z]||h[z].required&&h[z].default===void 0&&o[z]===void 0&&T.push(new Ue(r,o,`missing required property "${z}"`));return T}function kl(s){const r=s.value,o=s.valueSpec,h=s.style,g=s.styleSpec,v=s.key,x=s.arrayElementValidator||s.validateSpec;if(Ut(r)!=="array")return[new Ue(v,r,`array expected, ${Ut(r)} found`)];if(o.length&&r.length!==o.length)return[new Ue(v,r,`array length ${o.length} expected, length ${r.length} found`)];if(o["min-length"]&&r.length<o["min-length"])return[new Ue(v,r,`array length at least ${o["min-length"]} expected, length ${r.length} found`)];let b={type:o.value,values:o.values};g.$version<7&&(b.function=o.function),Ut(o.value)==="object"&&(b=o.value);let T=[];for(let E=0;E<r.length;E++)T=T.concat(x({array:r,arrayIndex:E,value:r[E],valueSpec:b,validateSpec:s.validateSpec,style:h,styleSpec:g,key:`${v}[${E}]`}));return T}function Xh(s){const r=s.key,o=s.value,h=s.valueSpec;let g=Ut(o);return g==="number"&&o!=o&&(g="NaN"),g!=="number"?[new Ue(r,o,`number expected, ${g} found`)]:"minimum"in h&&o<h.minimum?[new Ue(r,o,`${o} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&o>h.maximum?[new Ue(r,o,`${o} is greater than the maximum value ${h.maximum}`)]:[]}function Uu(s){const r=s.valueSpec,o=In(s.value.type);let h,g,v,x={};const b=o!=="categorical"&&s.value.property===void 0,T=!b,E=Ut(s.value.stops)==="array"&&Ut(s.value.stops[0])==="array"&&Ut(s.value.stops[0][0])==="object",z=fi({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(N){if(o==="identity")return[new Ue(N.key,N.value,'identity function may not have a "stops" property')];let q=[];const Z=N.value;return q=q.concat(kl({key:N.key,value:Z,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:R})),Ut(Z)==="array"&&Z.length===0&&q.push(new Ue(N.key,Z,"array must have at least one stop")),q},default:function(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:r,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}});return o==="identity"&&b&&z.push(new Ue(s.key,s.value,'missing required property "property"')),o==="identity"||s.value.stops||z.push(new Ue(s.key,s.value,'missing required property "stops"')),o==="exponential"&&s.valueSpec.expression&&!qh(s.valueSpec)&&z.push(new Ue(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(T&&!ma(s.valueSpec)?z.push(new Ue(s.key,s.value,"property functions not supported")):b&&!Mp(s.valueSpec)&&z.push(new Ue(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!E||s.value.property!==void 0||z.push(new Ue(s.key,s.value,'"property" property is required')),z;function R(N){let q=[];const Z=N.value,ie=N.key;if(Ut(Z)!=="array")return[new Ue(ie,Z,`array expected, ${Ut(Z)} found`)];if(Z.length!==2)return[new Ue(ie,Z,`array length 2 expected, length ${Z.length} found`)];if(E){if(Ut(Z[0])!=="object")return[new Ue(ie,Z,`object expected, ${Ut(Z[0])} found`)];if(Z[0].zoom===void 0)return[new Ue(ie,Z,"object stop key must have zoom")];if(Z[0].value===void 0)return[new Ue(ie,Z,"object stop key must have value")];if(v&&v>In(Z[0].zoom))return[new Ue(ie,Z[0].zoom,"stop zoom values must appear in ascending order")];In(Z[0].zoom)!==v&&(v=In(Z[0].zoom),g=void 0,x={}),q=q.concat(fi({key:`${ie}[0]`,value:Z[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:Xh,value:O}}))}else q=q.concat(O({key:`${ie}[0]`,value:Z[0],validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},Z));return Vu(Zi(Z[1]))?q.concat([new Ue(`${ie}[1]`,Z[1],"expressions are not allowed in function stops.")]):q.concat(N.validateSpec({key:`${ie}[1]`,value:Z[1],valueSpec:r,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function O(N,q){const Z=Ut(N.value),ie=In(N.value),le=N.value!==null?N.value:q;if(h){if(Z!==h)return[new Ue(N.key,le,`${Z} stop domain type must match previous stop domain type ${h}`)]}else h=Z;if(Z!=="number"&&Z!=="string"&&Z!=="boolean")return[new Ue(N.key,le,"stop domain value must be a number, string, or boolean")];if(Z!=="number"&&o!=="categorical"){let Se=`number expected, ${Z} found`;return ma(r)&&o===void 0&&(Se+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ue(N.key,le,Se)]}return o!=="categorical"||Z!=="number"||isFinite(ie)&&Math.floor(ie)===ie?o!=="categorical"&&Z==="number"&&g!==void 0&&ie<g?[new Ue(N.key,le,"stop domain values must appear in ascending order")]:(g=ie,o==="categorical"&&ie in x?[new Ue(N.key,le,"stop domain values must be unique")]:(x[ie]=!0,[])):[new Ue(N.key,le,`integer expected, found ${ie}`)]}}function ba(s){const r=(s.expressionContext==="property"?Gh:ya)(Zi(s.value),s.valueSpec);if(r.result==="error")return r.value.map(h=>new Ue(`${s.key}${h.key}`,s.value,h.message));const o=r.value.expression||r.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new Ue(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!fa(o))return[new Ue(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!fa(o))return[new Ue(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!wl(o,["zoom","feature-state"]))return[new Ue(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!bl(o))return[new Ue(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ns(s){const r=s.key,o=s.value,h=s.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(In(o))===-1&&g.push(new Ue(r,o,`expected one of [${h.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(h.values).indexOf(In(o))===-1&&g.push(new Ue(r,o,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(o)} found`)),g}function Kh(s){return Nu(Zi(s.value))?ba(vr({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Wu(s)}function Wu(s){const r=s.value,o=s.key;if(Ut(r)!=="array")return[new Ue(o,r,`array expected, ${Ut(r)} found`)];const h=s.styleSpec;let g,v=[];if(r.length<1)return[new Ue(o,r,"filter array must have at least 1 element")];switch(v=v.concat(Ns({key:`${o}[0]`,value:r[0],valueSpec:h.filter_operator,style:s.style,styleSpec:s.styleSpec})),In(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&In(r[1])==="$type"&&v.push(new Ue(o,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new Ue(o,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(g=Ut(r[1]),g!=="string"&&v.push(new Ue(`${o}[1]`,r[1],`string expected, ${g} found`)));for(let x=2;x<r.length;x++)g=Ut(r[x]),In(r[1])==="$type"?v=v.concat(Ns({key:`${o}[${x}]`,value:r[x],valueSpec:h.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&v.push(new Ue(`${o}[${x}]`,r[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)v=v.concat(Wu({key:`${o}[${x}]`,value:r[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=Ut(r[1]),r.length!==2?v.push(new Ue(o,r,`filter array for "${r[0]}" operator must have 2 elements`)):g!=="string"&&v.push(new Ue(`${o}[1]`,r[1],`string expected, ${g} found`))}return v}function Yh(s,r){const o=s.key,h=s.validateSpec,g=s.style,v=s.styleSpec,x=s.value,b=s.objectKey,T=v[`${r}_${s.layerType}`];if(!T)return[];const E=b.match(/^(.*)-transition$/);if(r==="paint"&&E&&T[E[1]]&&T[E[1]].transition)return h({key:o,value:x,valueSpec:v.transition,style:g,styleSpec:v});const z=s.valueSpec||T[b];if(!z)return[new Ue(o,x,`unknown property "${b}"`)];let R;if(Ut(x)==="string"&&ma(z)&&!z.tokens&&(R=/^{([^}]+)}$/.exec(x)))return[new Ue(o,x,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(R[1])} }\`.`)];const O=[];return s.layerType==="symbol"&&(b==="text-field"&&g&&!g.glyphs&&O.push(new Ue(o,x,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&Fu(Zi(x))&&In(x.type)==="identity"&&O.push(new Ue(o,x,'"text-font" does not support identity functions'))),O.concat(h({key:s.key,value:x,valueSpec:z,style:g,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:b}))}function qu(s){return Yh(s,"paint")}function Jh(s){return Yh(s,"layout")}function Qh(s){let r=[];const o=s.value,h=s.key,g=s.style,v=s.styleSpec;o.type||o.ref||r.push(new Ue(h,o,'either "type" or "ref" is required'));let x=In(o.type);const b=In(o.ref);if(o.id){const T=In(o.id);for(let E=0;E<s.arrayIndex;E++){const z=g.layers[E];In(z.id)===T&&r.push(new Ue(h,o.id,`duplicate layer id "${o.id}", previously used at line ${z.id.__line__}`))}}if("ref"in o){let T;["type","source","source-layer","filter","layout"].forEach(E=>{E in o&&r.push(new Ue(h,o[E],`"${E}" is prohibited for ref layers`))}),g.layers.forEach(E=>{In(E.id)===b&&(T=E)}),T?T.ref?r.push(new Ue(h,o.ref,"ref cannot reference another ref layer")):x=In(T.type):r.push(new Ue(h,o.ref,`ref layer "${b}" not found`))}else if(x!=="background")if(o.source){const T=g.sources&&g.sources[o.source],E=T&&In(T.type);T?E==="vector"&&x==="raster"?r.push(new Ue(h,o.source,`layer "${o.id}" requires a raster source`)):E!=="raster-dem"&&x==="hillshade"?r.push(new Ue(h,o.source,`layer "${o.id}" requires a raster-dem source`)):E==="raster"&&x!=="raster"?r.push(new Ue(h,o.source,`layer "${o.id}" requires a vector source`)):E!=="vector"||o["source-layer"]?E==="raster-dem"&&x!=="hillshade"?r.push(new Ue(h,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!o.paint||!o.paint["line-gradient"]||E==="geojson"&&T.lineMetrics||r.push(new Ue(h,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Ue(h,o,`layer "${o.id}" must specify a "source-layer"`)):r.push(new Ue(h,o.source,`source "${o.source}" not found`))}else r.push(new Ue(h,o,'missing required property "source"'));return r=r.concat(fi({key:h,value:o,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${h}.type`,value:o.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:o,objectKey:"type"}),filter:Kh,layout:T=>fi({layer:o,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":E=>Jh(vr({layerType:x},E))}}),paint:T=>fi({layer:o,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":E=>qu(vr({layerType:x},E))}})}})),r}function Do(s){const r=s.value,o=s.key,h=Ut(r);return h!=="string"?[new Ue(o,r,`string expected, ${h} found`)]:[]}const Gu={promoteId:function({key:s,value:r}){if(Ut(r)==="string")return Do({key:s,value:r});{const o=[];for(const h in r)o.push(...Do({key:`${s}.${h}`,value:r[h]}));return o}}};function Pl(s){const r=s.value,o=s.key,h=s.styleSpec,g=s.style,v=s.validateSpec;if(!r.type)return[new Ue(o,r,'"type" is required')];const x=In(r.type);let b;switch(x){case"vector":case"raster":return b=fi({key:o,value:r,valueSpec:h[`source_${x.replace("-","_")}`],style:s.style,styleSpec:h,objectElementValidators:Gu,validateSpec:v}),b;case"raster-dem":return b=function(T){var E;const z=(E=T.sourceName)!==null&&E!==void 0?E:"",R=T.value,O=T.styleSpec,N=O.source_raster_dem,q=T.style;let Z=[];const ie=Ut(R);if(R===void 0)return Z;if(ie!=="object")return Z.push(new Ue("source_raster_dem",R,`object expected, ${ie} found`)),Z;const le=In(R.encoding)==="custom",Se=["redFactor","greenFactor","blueFactor","baseShift"],ge=T.value.encoding?`"${T.value.encoding}"`:"Default";for(const be in R)!le&&Se.includes(be)?Z.push(new Ue(be,R[be],`In "${z}": "${be}" is only valid when "encoding" is set to "custom". ${ge} encoding found`)):N[be]?Z=Z.concat(T.validateSpec({key:be,value:R[be],valueSpec:N[be],validateSpec:T.validateSpec,style:q,styleSpec:O})):Z.push(new Ue(be,R[be],`unknown property "${be}"`));return Z}({sourceName:o,value:r,style:s.style,styleSpec:h,validateSpec:v}),b;case"geojson":if(b=fi({key:o,value:r,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:v,objectElementValidators:Gu}),r.cluster)for(const T in r.clusterProperties){const[E,z]=r.clusterProperties[T],R=typeof E=="string"?[E,["accumulated"],["get",T]]:E;b.push(...ba({key:`${o}.${T}.map`,value:z,expressionContext:"cluster-map"})),b.push(...ba({key:`${o}.${T}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return b;case"video":return fi({key:o,value:r,valueSpec:h.source_video,style:g,validateSpec:v,styleSpec:h});case"image":return fi({key:o,value:r,valueSpec:h.source_image,style:g,validateSpec:v,styleSpec:h});case"canvas":return[new Ue(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ns({key:`${o}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ed(s){const r=s.value,o=s.styleSpec,h=o.light,g=s.style;let v=[];const x=Ut(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new Ue("light",r,`object expected, ${x} found`)]),v;for(const b in r){const T=b.match(/^(.*)-transition$/);v=v.concat(T&&h[T[1]]&&h[T[1]].transition?s.validateSpec({key:b,value:r[b],valueSpec:o.transition,validateSpec:s.validateSpec,style:g,styleSpec:o}):h[b]?s.validateSpec({key:b,value:r[b],valueSpec:h[b],validateSpec:s.validateSpec,style:g,styleSpec:o}):[new Ue(b,r[b],`unknown property "${b}"`)])}return v}function td(s){const r=s.value,o=s.styleSpec,h=o.sky,g=s.style,v=Ut(r);if(r===void 0)return[];if(v!=="object")return[new Ue("sky",r,`object expected, ${v} found`)];let x=[];for(const b in r)x=x.concat(h[b]?s.validateSpec({key:b,value:r[b],valueSpec:h[b],style:g,styleSpec:o}):[new Ue(b,r[b],`unknown property "${b}"`)]);return x}function nd(s){const r=s.value,o=s.styleSpec,h=o.terrain,g=s.style;let v=[];const x=Ut(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new Ue("terrain",r,`object expected, ${x} found`)]),v;for(const b in r)v=v.concat(h[b]?s.validateSpec({key:b,value:r[b],valueSpec:h[b],validateSpec:s.validateSpec,style:g,styleSpec:o}):[new Ue(b,r[b],`unknown property "${b}"`)]);return v}function rd(s){let r=[];const o=s.value,h=s.key;if(Array.isArray(o)){const g=[],v=[];for(const x in o)o[x].id&&g.includes(o[x].id)&&r.push(new Ue(h,o,`all the sprites' ids must be unique, but ${o[x].id} is duplicated`)),g.push(o[x].id),o[x].url&&v.includes(o[x].url)&&r.push(new Ue(h,o,`all the sprites' URLs must be unique, but ${o[x].url} is duplicated`)),v.push(o[x].url),r=r.concat(fi({key:`${h}[${x}]`,value:o[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return r}return Do({key:h,value:o})}const Hu={"*":()=>[],array:kl,boolean:function(s){const r=s.value,o=s.key,h=Ut(r);return h!=="boolean"?[new Ue(o,r,`boolean expected, ${h} found`)]:[]},number:Xh,color:function(s){const r=s.key,o=s.value,h=Ut(o);return h!=="string"?[new Ue(r,o,`color expected, ${h} found`)]:Kt.parse(String(o))?[]:[new Ue(r,o,`color expected, "${o}" found`)]},constants:Op,enum:Ns,filter:Kh,function:Uu,layer:Qh,object:fi,source:Pl,light:ed,sky:td,terrain:nd,projection:function(s){const r=s.value,o=s.styleSpec,h=o.projection,g=s.style,v=Ut(r);if(r===void 0)return[];if(v!=="object")return[new Ue("projection",r,`object expected, ${v} found`)];let x=[];for(const b in r)x=x.concat(h[b]?s.validateSpec({key:b,value:r[b],valueSpec:h[b],style:g,styleSpec:o}):[new Ue(b,r[b],`unknown property "${b}"`)]);return x},string:Do,formatted:function(s){return Do(s).length===0?[]:ba(s)},resolvedImage:function(s){return Do(s).length===0?[]:ba(s)},padding:function(s){const r=s.key,o=s.value;if(Ut(o)==="array"){if(o.length<1||o.length>4)return[new Ue(r,o,`padding requires 1 to 4 values; ${o.length} values found`)];const h={type:"number"};let g=[];for(let v=0;v<o.length;v++)g=g.concat(s.validateSpec({key:`${r}[${v}]`,value:o[v],validateSpec:s.validateSpec,valueSpec:h}));return g}return Xh({key:r,value:o,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const r=s.key,o=s.value,h=Ut(o),g=s.styleSpec;if(h!=="array"||o.length<1||o.length%2!=0)return[new Ue(r,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<o.length;x+=2)v=v.concat(Ns({key:`${r}[${x}]`,value:o[x],valueSpec:g.layout_symbol["text-anchor"]})),v=v.concat(kl({key:`${r}[${x+1}]`,value:o[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:g}));return v},sprite:rd};function El(s){const r=s.value,o=s.valueSpec,h=s.styleSpec;return s.validateSpec=El,o.expression&&Fu(In(r))?Uu(s):o.expression&&Vu(Zi(r))?ba(s):o.type&&Hu[o.type]?Hu[o.type](s):fi(vr({},s,{valueSpec:o.type?h[o.type]:o}))}function Bp(s){const r=s.value,o=s.key,h=Do(s);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new Ue(o,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new Ue(o,r,'"glyphs" url must include a "{range}" token'))),h}function Ii(s,r=ke){let o=[];return o=o.concat(El({key:"",value:s,valueSpec:r.$root,styleSpec:r,style:s,validateSpec:El,objectElementValidators:{glyphs:Bp,"*":()=>[]}})),s.constants&&(o=o.concat(Op({key:"constants",value:s.constants}))),id(o)}function _s(s){return function(r){return s({...r,validateSpec:El})}}function id(s){return[].concat(s).sort((r,o)=>r.line-o.line)}function Xi(s){return function(...r){return id(s.apply(this,r))}}Ii.source=Xi(_s(Pl)),Ii.sprite=Xi(_s(rd)),Ii.glyphs=Xi(_s(Bp)),Ii.light=Xi(_s(ed)),Ii.sky=Xi(_s(td)),Ii.terrain=Xi(_s(nd)),Ii.layer=Xi(_s(Qh)),Ii.filter=Xi(_s(Kh)),Ii.paintProperty=Xi(_s(qu)),Ii.layoutProperty=Xi(_s(Jh));const Ro=Ii,g_=Ro.light,y_=Ro.sky,Vp=Ro.paintProperty,Np=Ro.layoutProperty;function sd(s,r){let o=!1;if(r&&r.length)for(const h of r)s.fire(new jn(new Error(h.message))),o=!0;return o}class wa{constructor(r,o,h){const g=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(o=x[1])+2*(h=x[2]);for(let T=0;T<this.d*this.d;T++){const E=x[3+T],z=x[3+T+1];g.push(E===z?null:x.subarray(E,z))}const b=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],b),this.bboxes=x.subarray(b),this.insert=this._insertReadonly}else{this.d=o+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=r,this.padding=h,this.scale=o/r,this.uid=0;const v=h/o*r;this.min=-v,this.max=r+v}insert(r,o,h,g,v){this._forEachCell(o,h,g,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,o,h,g,v,x){this.cells[v].push(x)}query(r,o,h,g,v){const x=this.min,b=this.max;if(r<=x&&o<=x&&b<=h&&b<=g&&!v)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(r,o,h,g,this._queryCell,T,{},v),T}}_queryCell(r,o,h,g,v,x,b,T){const E=this.cells[v];if(E!==null){const z=this.keys,R=this.bboxes;for(let O=0;O<E.length;O++){const N=E[O];if(b[N]===void 0){const q=4*N;(T?T(R[q+0],R[q+1],R[q+2],R[q+3]):r<=R[q+2]&&o<=R[q+3]&&h>=R[q+0]&&g>=R[q+1])?(b[N]=!0,x.push(z[N])):b[N]=!1}}}}_forEachCell(r,o,h,g,v,x,b,T){const E=this._convertToCellCoord(r),z=this._convertToCellCoord(o),R=this._convertToCellCoord(h),O=this._convertToCellCoord(g);for(let N=E;N<=R;N++)for(let q=z;q<=O;q++){const Z=this.d*q+N;if((!T||T(this._convertFromCellCoord(N),this._convertFromCellCoord(q),this._convertFromCellCoord(N+1),this._convertFromCellCoord(q+1)))&&v.call(this,r,o,h,g,Z,x,b,T))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,o=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(o+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let v=o;for(let x=0;x<r.length;x++){const b=r[x];g[3+x]=v,g.set(b,v),v+=b.length}return g[3+r.length]=v,g.set(this.keys,v),v+=this.keys.length,g[3+r.length+1]=v,g.set(this.bboxes,v),v+=this.bboxes.length,g.buffer}static serialize(r,o){const h=r.toArrayBuffer();return o&&o.push(h),{buffer:h}}static deserialize(r){return new wa(r.buffer)}}const Mi={};function lt(s,r,o={}){if(Mi[s])throw new Error(`${s} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:s,writeable:!1}),Mi[s]={klass:r,omit:o.omit||[],shallow:o.shallow||[]}}lt("Object",Object),lt("TransferableGridIndex",wa),lt("Color",Kt),lt("Error",Error),lt("AJAXError",Jt),lt("ResolvedImage",di),lt("StylePropertyFunction",xa),lt("StyleExpression",Bu,{omit:["_evaluator"]}),lt("ZoomDependentExpression",va),lt("ZoomConstantExpression",_a),lt("CompoundExpression",Ei,{omit:["_evaluate"]});for(const s in da)da[s]._classRegistryKey||lt(`Expression_${s}`,da[s]);function Zu(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function od(s){return s.$name||s.constructor._classRegistryKey}function jp(s){return!function(r){if(r===null||typeof r!="object")return!1;const o=od(r);return!(!o||o==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Zu(s)||Je(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Sa(s,r){if(jp(s))return(Zu(s)||Je(s))&&r&&r.push(s),ArrayBuffer.isView(s)&&r&&r.push(s.buffer),s instanceof ImageData&&r&&r.push(s.data.buffer),s;if(Array.isArray(s)){const v=[];for(const x of s)v.push(Sa(x,r));return v}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const o=od(s);if(!o)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Mi[o])throw new Error(`${o} is not registered.`);const{klass:h}=Mi[o],g=h.serialize?h.serialize(s,r):{};if(h.serialize){if(r&&g===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in s){if(!s.hasOwnProperty(v)||Mi[o].omit.indexOf(v)>=0)continue;const x=s[v];g[v]=Mi[o].shallow.indexOf(v)>=0?x:Sa(x,r)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(g.$name=o),g}function Ta(s){if(jp(s))return s;if(Array.isArray(s))return s.map(Ta);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const r=od(s)||"Object";if(!Mi[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:o}=Mi[r];if(!o)throw new Error(`can't deserialize unregistered class ${r}`);if(o.deserialize)return o.deserialize(s);const h=Object.create(o.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const v=s[g];h[g]=Mi[r].shallow.indexOf(g)>=0?v:Ta(v)}return h}class ad{constructor(){this.first=!0}update(r,o){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=o),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const Ot={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function ld(s){for(const r of s)if(cd(r.charCodeAt(0)))return!0;return!1}function __(s){for(const r of s)if(!Ca(r.charCodeAt(0)))return!1;return!0}function ud(s){const r=s.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}}).filter(o=>o);return new RegExp(r.join("|"),"u")}const v_=ud(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ca(s){return!v_.test(String.fromCodePoint(s))}const $p=ud(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function cd(s){return!(s!==746&&s!==747&&(s<4352||!(Ot["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Ot["CJK Compatibility"](s)||Ot["CJK Strokes"](s)||!(!Ot["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Ot["Enclosed CJK Letters and Months"](s)||Ot["Ideographic Description Characters"](s)||Ot.Kanbun(s)||Ot.Katakana(s)&&s!==12540||!(!Ot["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Ot["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Ot["Vertical Forms"](s)||Ot["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||$p.test(String.fromCodePoint(s)))))}function Up(s){return!(cd(s)||function(r){return!!(Ot["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Ot["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Ot["Letterlike Symbols"](r)||Ot["Number Forms"](r)||Ot["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Ot["Control Pictures"](r)&&r!==9251||Ot["Optical Character Recognition"](r)||Ot["Enclosed Alphanumerics"](r)||Ot["Geometric Shapes"](r)||Ot["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Ot["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Ot["CJK Symbols and Punctuation"](r)||Ot.Katakana(r)||Ot["Private Use Area"](r)||Ot["CJK Compatibility Forms"](r)||Ot["Small Form Variants"](r)||Ot["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(s))}const x_=ud(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function hd(s){return x_.test(String.fromCodePoint(s))}function b_(s,r){return!(!r&&hd(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Ot.Khmer(s))}function w_(s){for(const r of s)if(hd(r.charCodeAt(0)))return!0;return!1}const pi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class fn{constructor(r,o){this.zoom=r,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ad,this.transition={})}isSupportedScript(r){return function(o,h){for(const g of o)if(!b_(g.charCodeAt(0),h))return!1;return!0}(r,pi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,o=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*o}}}class ka{constructor(r,o){this.property=r,this.value=o,this.expression=function(h,g){if(Fu(h))return new xa(h,g);if(Vu(h)){const v=Gh(h,g);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return g.type==="color"&&typeof h=="string"?v=Kt.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Pi.parse(h)):v=hi.parse(h),{kind:"constant",evaluate:()=>v}}}(o===void 0?r.specification.default:o,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,o,h){return this.property.possiblyEvaluate(this,r,o,h)}}class Xu{constructor(r){this.property=r,this.value=new ka(r,void 0)}transitioned(r,o){return new Wp(this.property,this.value,o,ye({},r.transition,this.transition),r.now)}untransitioned(){return new Wp(this.property,this.value,null,{},0)}}class Ku{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Re(this._values[r].value.value)}setValue(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Xu(this._values[r].property)),this._values[r].value=new ka(this._values[r].property,o===null?void 0:Re(o))}getTransition(r){return Re(this._values[r].transition)}setTransition(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Xu(this._values[r].property)),this._values[r].transition=Re(o)||void 0}serialize(){const r={};for(const o of Object.keys(this._values)){const h=this.getValue(o);h!==void 0&&(r[o]=h);const g=this.getTransition(o);g!==void 0&&(r[`${o}-transition`]=g)}return r}transitioned(r,o){const h=new Il(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(r,o._values[g]);return h}untransitioned(){const r=new Il(this._properties);for(const o of Object.keys(this._values))r._values[o]=this._values[o].untransitioned();return r}}class Wp{constructor(r,o,h,g,v){this.property=r,this.value=o,this.begin=v+g.delay||0,this.end=this.begin+g.duration||0,r.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(r,o,h){const g=r.now||0,v=this.value.possiblyEvaluate(r,o,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(g<this.begin)return x.possiblyEvaluate(r,o,h);{const b=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,o,h),v,function(T){if(T<=0)return 0;if(T>=1)return 1;const E=T*T,z=E*T;return 4*(T<.5?z:3*(T-E)+z-.75)}(b))}}return v}}class Il{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,o,h){const g=new Al(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(r,o,h);return g}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Ml{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Re(this._values[r].value)}setValue(r,o){this._values[r]=new ka(this._values[r].property,o===null?void 0:Re(o))}serialize(){const r={};for(const o of Object.keys(this._values)){const h=this.getValue(o);h!==void 0&&(r[o]=h)}return r}possiblyEvaluate(r,o,h){const g=new Al(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(r,o,h);return g}}class vs{constructor(r,o,h){this.property=r,this.value=o,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,o,h,g){return this.property.evaluate(this.value,this.parameters,r,o,h,g)}}class Al{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ct{constructor(r){this.specification=r}possiblyEvaluate(r,o){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(o)}interpolate(r,o,h){const g=Zr[this.specification.type];return g?g(r,o,h):r}}class vt{constructor(r,o){this.specification=r,this.overrides=o}possiblyEvaluate(r,o,h,g){return new vs(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(o,null,{},h,g)}:r.expression,o)}interpolate(r,o,h){if(r.value.kind!=="constant"||o.value.kind!=="constant")return r;if(r.value.value===void 0||o.value.value===void 0)return new vs(this,{kind:"constant",value:void 0},r.parameters);const g=Zr[this.specification.type];if(g){const v=g(r.value.value,o.value.value,h);return new vs(this,{kind:"constant",value:v},r.parameters)}return r}evaluate(r,o,h,g,v,x){return r.kind==="constant"?r.value:r.evaluate(o,h,g,v,x)}}class Yu extends vt{possiblyEvaluate(r,o,h,g){if(r.value===void 0)return new vs(this,{kind:"constant",value:void 0},o);if(r.expression.kind==="constant"){const v=r.expression.evaluate(o,null,{},h,g),x=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,b=this._calculate(x,x,x,o);return new vs(this,{kind:"constant",value:b},o)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:o.zoom-1}),r.expression.evaluate({zoom:o.zoom}),r.expression.evaluate({zoom:o.zoom+1}),o);return new vs(this,{kind:"constant",value:v},o)}return new vs(this,r.expression,o)}evaluate(r,o,h,g,v,x){if(r.kind==="source"){const b=r.evaluate(o,h,g,v,x);return this._calculate(b,b,b,o)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(o.zoom)-1},h,g),r.evaluate({zoom:Math.floor(o.zoom)},h,g),r.evaluate({zoom:Math.floor(o.zoom)+1},h,g),o):r.value}_calculate(r,o,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:h,to:o}}interpolate(r){return r}}class Ju{constructor(r){this.specification=r}possiblyEvaluate(r,o,h,g){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(o,null,{},h,g);return this._calculate(v,v,v,o)}return this._calculate(r.expression.evaluate(new fn(Math.floor(o.zoom-1),o)),r.expression.evaluate(new fn(Math.floor(o.zoom),o)),r.expression.evaluate(new fn(Math.floor(o.zoom+1),o)),o)}}_calculate(r,o,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:h,to:o}}interpolate(r){return r}}class dd{constructor(r){this.specification=r}possiblyEvaluate(r,o,h,g){return!!r.expression.evaluate(o,null,{},h,g)}interpolate(){return!1}}class _{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in r){const h=r[o];h.specification.overridable&&this.overridableProperties.push(o);const g=this.defaultPropertyValues[o]=new ka(h,void 0),v=this.defaultTransitionablePropertyValues[o]=new Xu(h);this.defaultTransitioningPropertyValues[o]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=g.possiblyEvaluate({})}}}lt("DataDrivenProperty",vt),lt("DataConstantProperty",ct),lt("CrossFadedDataDrivenProperty",Yu),lt("CrossFadedProperty",Ju),lt("ColorRampProperty",dd);const n="-transition";class l extends Dr{constructor(r,o){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),o.layout&&(this._unevaluatedLayout=new Ml(o.layout)),o.paint)){this._transitionablePaint=new Ku(o.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Al(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,o,h={}){o!=null&&this._validate(Np,`layers.${this.id}.layout.${r}`,r,o,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,o):this.visibility=o)}getPaintProperty(r){return r.endsWith(n)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,o,h={}){if(o!=null&&this._validate(Vp,`layers.${this.id}.paint.${r}`,r,o,h))return!1;if(r.endsWith(n))return this._transitionablePaint.setTransition(r.slice(0,-11),o||void 0),!1;{const g=this._transitionablePaint._values[r],v=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),b=g.value;this._transitionablePaint.setValue(r,o),this._handleSpecialPaintPropertyUpdate(r);const T=this._transitionablePaint._values[r].value;return T.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(r,b,T)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,o,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,o){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,o)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ze(r,(o,h)=>!(o===void 0||h==="layout"&&!Object.keys(o).length||h==="paint"&&!Object.keys(o).length))}_validate(r,o,h,g,v={}){return(!v||v.validate!==!1)&&sd(this,r.call(Ro,{key:o,layerType:this.type,objectKey:h,value:g,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const o=this.paint.get(r);if(o instanceof vs&&ma(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class m{constructor(r,o){this._structArray=r,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,o){return r._trim(),o&&(r.isTransferred=!0,o.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const o=Object.create(this.prototype);return o.arrayBuffer=r.arrayBuffer,o.length=r.length,o.capacity=r.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function S(s,r=1){let o=0,h=0;return{members:s.map(g=>{const v=p[g.type].BYTES_PER_ELEMENT,x=o=C(o,Math.max(r,v)),b=g.components||1;return h=Math.max(h,v),o+=v*b,{name:g.name,type:g.type,components:b,offset:x}}),size:C(o,Math.max(h,r)),alignment:r}}function C(s,r){return Math.ceil(s/r)*r}class P extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o){const h=this.length;return this.resize(h+1),this.emplace(h,r,o)}emplace(r,o,h){const g=2*r;return this.int16[g+0]=o,this.int16[g+1]=h,r}}P.prototype.bytesPerElement=4,lt("StructArrayLayout2i4",P);class D extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,o,h)}emplace(r,o,h,g){const v=3*r;return this.int16[v+0]=o,this.int16[v+1]=h,this.int16[v+2]=g,r}}D.prototype.bytesPerElement=6,lt("StructArrayLayout3i6",D);class L extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,h,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,o,h,g)}emplace(r,o,h,g,v){const x=4*r;return this.int16[x+0]=o,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=v,r}}L.prototype.bytesPerElement=8,lt("StructArrayLayout4i8",L);class F extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,h,g,v,x)}emplace(r,o,h,g,v,x,b){const T=6*r;return this.int16[T+0]=o,this.int16[T+1]=h,this.int16[T+2]=g,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=b,r}}F.prototype.bytesPerElement=12,lt("StructArrayLayout2i4i12",F);class U extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,h,g,v,x)}emplace(r,o,h,g,v,x,b){const T=4*r,E=8*r;return this.int16[T+0]=o,this.int16[T+1]=h,this.uint8[E+4]=g,this.uint8[E+5]=v,this.uint8[E+6]=x,this.uint8[E+7]=b,r}}U.prototype.bytesPerElement=8,lt("StructArrayLayout2i4ub8",U);class K extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o){const h=this.length;return this.resize(h+1),this.emplace(h,r,o)}emplace(r,o,h){const g=2*r;return this.float32[g+0]=o,this.float32[g+1]=h,r}}K.prototype.bytesPerElement=8,lt("StructArrayLayout2f8",K);class Q extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v,x,b,T,E,z){const R=this.length;return this.resize(R+1),this.emplace(R,r,o,h,g,v,x,b,T,E,z)}emplace(r,o,h,g,v,x,b,T,E,z,R){const O=10*r;return this.uint16[O+0]=o,this.uint16[O+1]=h,this.uint16[O+2]=g,this.uint16[O+3]=v,this.uint16[O+4]=x,this.uint16[O+5]=b,this.uint16[O+6]=T,this.uint16[O+7]=E,this.uint16[O+8]=z,this.uint16[O+9]=R,r}}Q.prototype.bytesPerElement=20,lt("StructArrayLayout10ui20",Q);class se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v,x,b,T,E,z,R,O){const N=this.length;return this.resize(N+1),this.emplace(N,r,o,h,g,v,x,b,T,E,z,R,O)}emplace(r,o,h,g,v,x,b,T,E,z,R,O,N){const q=12*r;return this.int16[q+0]=o,this.int16[q+1]=h,this.int16[q+2]=g,this.int16[q+3]=v,this.uint16[q+4]=x,this.uint16[q+5]=b,this.uint16[q+6]=T,this.uint16[q+7]=E,this.int16[q+8]=z,this.int16[q+9]=R,this.int16[q+10]=O,this.int16[q+11]=N,r}}se.prototype.bytesPerElement=24,lt("StructArrayLayout4i4ui4i24",se);class ue extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,o,h)}emplace(r,o,h,g){const v=3*r;return this.float32[v+0]=o,this.float32[v+1]=h,this.float32[v+2]=g,r}}ue.prototype.bytesPerElement=12,lt("StructArrayLayout3f12",ue);class ce extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint32[1*r+0]=o,r}}ce.prototype.bytesPerElement=4,lt("StructArrayLayout1ul4",ce);class me extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v,x,b,T,E){const z=this.length;return this.resize(z+1),this.emplace(z,r,o,h,g,v,x,b,T,E)}emplace(r,o,h,g,v,x,b,T,E,z){const R=10*r,O=5*r;return this.int16[R+0]=o,this.int16[R+1]=h,this.int16[R+2]=g,this.int16[R+3]=v,this.int16[R+4]=x,this.int16[R+5]=b,this.uint32[O+3]=T,this.uint16[R+8]=E,this.uint16[R+9]=z,r}}me.prototype.bytesPerElement=20,lt("StructArrayLayout6i1ul2ui20",me);class re extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,h,g,v,x)}emplace(r,o,h,g,v,x,b){const T=6*r;return this.int16[T+0]=o,this.int16[T+1]=h,this.int16[T+2]=g,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=b,r}}re.prototype.bytesPerElement=12,lt("StructArrayLayout2i2i2i12",re);class _e extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,o,h,g,v)}emplace(r,o,h,g,v,x){const b=4*r,T=8*r;return this.float32[b+0]=o,this.float32[b+1]=h,this.float32[b+2]=g,this.int16[T+6]=v,this.int16[T+7]=x,r}}_e.prototype.bytesPerElement=16,lt("StructArrayLayout2f1f2i16",_e);class xe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,h,g,v,x)}emplace(r,o,h,g,v,x,b){const T=16*r,E=4*r,z=8*r;return this.uint8[T+0]=o,this.uint8[T+1]=h,this.float32[E+1]=g,this.float32[E+2]=v,this.int16[z+6]=x,this.int16[z+7]=b,r}}xe.prototype.bytesPerElement=16,lt("StructArrayLayout2ub2f2i16",xe);class Te extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,o,h)}emplace(r,o,h,g){const v=3*r;return this.uint16[v+0]=o,this.uint16[v+1]=h,this.uint16[v+2]=g,r}}Te.prototype.bytesPerElement=6,lt("StructArrayLayout3ui6",Te);class Oe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v,x,b,T,E,z,R,O,N,q,Z,ie,le){const Se=this.length;return this.resize(Se+1),this.emplace(Se,r,o,h,g,v,x,b,T,E,z,R,O,N,q,Z,ie,le)}emplace(r,o,h,g,v,x,b,T,E,z,R,O,N,q,Z,ie,le,Se){const ge=24*r,be=12*r,Ee=48*r;return this.int16[ge+0]=o,this.int16[ge+1]=h,this.uint16[ge+2]=g,this.uint16[ge+3]=v,this.uint32[be+2]=x,this.uint32[be+3]=b,this.uint32[be+4]=T,this.uint16[ge+10]=E,this.uint16[ge+11]=z,this.uint16[ge+12]=R,this.float32[be+7]=O,this.float32[be+8]=N,this.uint8[Ee+36]=q,this.uint8[Ee+37]=Z,this.uint8[Ee+38]=ie,this.uint32[be+10]=le,this.int16[ge+22]=Se,r}}Oe.prototype.bytesPerElement=48,lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Oe);class We extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,h,g,v,x,b,T,E,z,R,O,N,q,Z,ie,le,Se,ge,be,Ee,je,rt,_t,tt,Qe,ft,ut){const ot=this.length;return this.resize(ot+1),this.emplace(ot,r,o,h,g,v,x,b,T,E,z,R,O,N,q,Z,ie,le,Se,ge,be,Ee,je,rt,_t,tt,Qe,ft,ut)}emplace(r,o,h,g,v,x,b,T,E,z,R,O,N,q,Z,ie,le,Se,ge,be,Ee,je,rt,_t,tt,Qe,ft,ut,ot){const De=32*r,pt=16*r;return this.int16[De+0]=o,this.int16[De+1]=h,this.int16[De+2]=g,this.int16[De+3]=v,this.int16[De+4]=x,this.int16[De+5]=b,this.int16[De+6]=T,this.int16[De+7]=E,this.uint16[De+8]=z,this.uint16[De+9]=R,this.uint16[De+10]=O,this.uint16[De+11]=N,this.uint16[De+12]=q,this.uint16[De+13]=Z,this.uint16[De+14]=ie,this.uint16[De+15]=le,this.uint16[De+16]=Se,this.uint16[De+17]=ge,this.uint16[De+18]=be,this.uint16[De+19]=Ee,this.uint16[De+20]=je,this.uint16[De+21]=rt,this.uint16[De+22]=_t,this.uint32[pt+12]=tt,this.float32[pt+13]=Qe,this.float32[pt+14]=ft,this.uint16[De+30]=ut,this.uint16[De+31]=ot,r}}We.prototype.bytesPerElement=64,lt("StructArrayLayout8i15ui1ul2f2ui64",We);class et extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.float32[1*r+0]=o,r}}et.prototype.bytesPerElement=4,lt("StructArrayLayout1f4",et);class st extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,o,h)}emplace(r,o,h,g){const v=3*r;return this.uint16[6*r+0]=o,this.float32[v+1]=h,this.float32[v+2]=g,r}}st.prototype.bytesPerElement=12,lt("StructArrayLayout1ui2f12",st);class Ke extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,o,h)}emplace(r,o,h,g){const v=4*r;return this.uint32[2*r+0]=o,this.uint16[v+2]=h,this.uint16[v+3]=g,r}}Ke.prototype.bytesPerElement=8,lt("StructArrayLayout1ul2ui8",Ke);class Xe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o){const h=this.length;return this.resize(h+1),this.emplace(h,r,o)}emplace(r,o,h){const g=2*r;return this.uint16[g+0]=o,this.uint16[g+1]=h,r}}Xe.prototype.bytesPerElement=4,lt("StructArrayLayout2ui4",Xe);class ht extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint16[1*r+0]=o,r}}ht.prototype.bytesPerElement=2,lt("StructArrayLayout1ui2",ht);class Pt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,h,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,o,h,g)}emplace(r,o,h,g,v){const x=4*r;return this.float32[x+0]=o,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=v,r}}Pt.prototype.bytesPerElement=16,lt("StructArrayLayout4f16",Pt);class Ye extends m{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}Ye.prototype.size=20;class nt extends me{get(r){return new Ye(this,r)}}lt("CollisionBoxArray",nt);class Ct extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ct.prototype.size=48;class pn extends Oe{get(r){return new Ct(this,r)}}lt("PlacedSymbolArray",pn);class At extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}At.prototype.size=64;class Ft extends We{get(r){return new At(this,r)}}lt("SymbolInstanceArray",Ft);class mn extends et{getoffsetX(r){return this.float32[1*r+0]}}lt("GlyphOffsetArray",mn);class br extends D{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}lt("SymbolLineVertexArray",br);class Ki extends m{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ki.prototype.size=12;class gn extends st{get(r){return new Ki(this,r)}}lt("TextAnchorOffsetArray",gn);class Kr extends m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Kr.prototype.size=8;class Or extends Ke{get(r){return new Kr(this,r)}}lt("FeatureIndexArray",Or);class wr extends P{}class Br extends P{}class xs extends P{}class Pa extends F{}class Qu extends U{}class Ea extends K{}class Ai extends Q{}class ec extends se{}class fd extends ue{}class zi extends ce{}class Di extends re{}class eo extends xe{}class Yi extends Te{}class pr extends Xe{}const Sr=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:mi}=Sr;class Bt{constructor(r=[]){this.segments=r}prepareSegment(r,o,h,g){let v=this.segments[this.segments.length-1];return r>Bt.MAX_VERTEX_ARRAY_LENGTH&&Fe(`Max vertices per segment is ${Bt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>Bt.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==g)&&(v={vertexOffset:o.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},g!==void 0&&(v.sortKey=g),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const o in r.vaos)r.vaos[o].destroy()}static simpleSegment(r,o,h,g){return new Bt([{vertexOffset:r,primitiveOffset:o,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function Lo(s,r){return 256*(s=de(Math.floor(s),0,255))+de(Math.floor(r),0,255)}Bt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,lt("SegmentVector",Bt);const Ia=S([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ma={exports:{}},qp={exports:{}};qp.exports=function(s,r){var o,h,g,v,x,b,T,E;for(h=s.length-(o=3&s.length),g=r,x=3432918353,b=461845907,E=0;E<h;)T=255&s.charCodeAt(E)|(255&s.charCodeAt(++E))<<8|(255&s.charCodeAt(++E))<<16|(255&s.charCodeAt(++E))<<24,++E,g=27492+(65535&(v=5*(65535&(g=(g^=T=(65535&(T=(T=(65535&T)*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(T=0,o){case 3:T^=(255&s.charCodeAt(E+2))<<16;case 2:T^=(255&s.charCodeAt(E+1))<<8;case 1:g^=T=(65535&(T=(T=(65535&(T^=255&s.charCodeAt(E)))*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295}return g^=s.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var S_=qp.exports,Gp={exports:{}};Gp.exports=function(s,r){for(var o,h=s.length,g=r^h,v=0;h>=4;)o=1540483477*(65535&(o=255&s.charCodeAt(v)|(255&s.charCodeAt(++v))<<8|(255&s.charCodeAt(++v))<<16|(255&s.charCodeAt(++v))<<24))+((1540483477*(o>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:g^=(255&s.charCodeAt(v+2))<<16;case 2:g^=(255&s.charCodeAt(v+1))<<8;case 1:g=1540483477*(65535&(g^=255&s.charCodeAt(v)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var to=S_,Hp=Gp.exports;Ma.exports=to,Ma.exports.murmur3=to,Ma.exports.murmur2=Hp;var tc=w(Ma.exports);class zl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,o,h,g){this.ids.push(nc(r)),this.positions.push(o,h,g)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=nc(r);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=o?g=x:h=x+1}const v=[];for(;this.ids[h]===o;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(r,o){const h=new Float64Array(r.ids),g=new Uint32Array(r.positions);return rc(h,g,0,h.length-1),o&&o.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(r){const o=new zl;return o.ids=r.ids,o.positions=r.positions,o.indexed=!0,o}}function nc(s){const r=+s;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:tc(String(s))}function rc(s,r,o,h){for(;o<h;){const g=s[o+h>>1];let v=o-1,x=h+1;for(;;){do v++;while(s[v]<g);do x--;while(s[x]>g);if(v>=x)break;Aa(s,v,x),Aa(r,3*v,3*x),Aa(r,3*v+1,3*x+1),Aa(r,3*v+2,3*x+2)}x-o<h-x?(rc(s,r,o,x),o=x+1):(rc(s,r,x+1,h),h=x)}}function Aa(s,r,o){const h=s[r];s[r]=s[o],s[o]=h}lt("FeaturePositionMap",zl);class Dl{constructor(r,o){this.gl=r.gl,this.location=o}}class Zp extends Dl{constructor(r,o){super(r,o),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Zb extends Dl{constructor(r,o){super(r,o),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Xb extends Dl{constructor(r,o){super(r,o),this.current=Kt.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const oA=new Float32Array(16);function T_(s){return[Lo(255*s.r,255*s.g),Lo(255*s.b,255*s.a)]}class pd{constructor(r,o,h){this.value=r,this.uniformNames=o.map(g=>`u_${g}`),this.type=h}setUniform(r,o,h){r.set(h.constantOr(this.value))}getBinding(r,o,h){return this.type==="color"?new Xb(r,o):new Zp(r,o)}}class ic{constructor(r,o){this.uniformNames=o.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=r.tlbr}setUniform(r,o,h,g){const v=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,o,h){return h.substr(0,9)==="u_pattern"?new Zb(r,o):new Zp(r,o)}}class Fo{constructor(r,o,h,g){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=o.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(r,o,h,g,v){const x=this.paintVertexArray.length,b=this.expression.evaluate(new fn(0),o,{},g,[],v);this.paintVertexArray.resize(r),this._setPaintValue(x,r,b)}updatePaintArray(r,o,h,g){const v=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(r,o,v)}_setPaintValue(r,o,h){if(this.type==="color"){const g=T_(h);for(let v=r;v<o;v++)this.paintVertexArray.emplace(v,g[0],g[1])}else{for(let g=r;g<o;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class js{constructor(r,o,h,g,v,x){this.expression=r,this.uniformNames=o.map(b=>`u_${b}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=o.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,o,h,g,v){const x=this.expression.evaluate(new fn(this.zoom),o,{},g,[],v),b=this.expression.evaluate(new fn(this.zoom+1),o,{},g,[],v),T=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(T,r,x,b)}updatePaintArray(r,o,h,g){const v=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(r,o,v,x)}_setPaintValue(r,o,h,g){if(this.type==="color"){const v=T_(h),x=T_(g);for(let b=r;b<o;b++)this.paintVertexArray.emplace(b,v[0],v[1],x[0],x[1])}else{for(let v=r;v<o;v++)this.paintVertexArray.emplace(v,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,o){const h=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,g=de(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(g)}getBinding(r,o,h){return new Zp(r,o)}}class za{constructor(r,o,h,g,v,x){this.expression=r,this.type=o,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,o,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(g,r,o.patterns&&o.patterns[this.layerId],h)}updatePaintArray(r,o,h,g,v){this._setPaintValues(r,o,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(r,o,h,g){if(!g||!h)return;const{min:v,mid:x,max:b}=h,T=g[v],E=g[x],z=g[b];if(T&&E&&z)for(let R=r;R<o;R++)this.zoomInPaintVertexArray.emplace(R,E.tl[0],E.tl[1],E.br[0],E.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],E.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(R,E.tl[0],E.tl[1],E.br[0],E.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],E.pixelRatio,z.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Ia.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Ia.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Kb{constructor(r,o,h){this.binders={},this._buffers=[];const g=[];for(const v in r.paint._values){if(!h(v))continue;const x=r.paint.get(v);if(!(x instanceof vs&&ma(x.property.specification)))continue;const b=aA(v,r.type),T=x.value,E=x.property.specification.type,z=x.property.useIntegerZoom,R=x.property.specification["property-type"],O=R==="cross-faded"||R==="cross-faded-data-driven";if(T.kind==="constant")this.binders[v]=O?new ic(T.value,b):new pd(T.value,b,E),g.push(`/u_${v}`);else if(T.kind==="source"||O){const N=Yb(v,E,"source");this.binders[v]=O?new za(T,E,z,o,N,r.id):new Fo(T,b,E,N),g.push(`/a_${v}`)}else{const N=Yb(v,E,"composite");this.binders[v]=new js(T,b,E,z,o,N),g.push(`/z_${v}`)}}this.cacheKey=g.sort().join("")}getMaxValue(r){const o=this.binders[r];return o instanceof Fo||o instanceof js?o.maxValue:0}populatePaintArrays(r,o,h,g,v){for(const x in this.binders){const b=this.binders[x];(b instanceof Fo||b instanceof js||b instanceof za)&&b.populatePaintArray(r,o,h,g,v)}}setConstantPatternPositions(r,o){for(const h in this.binders){const g=this.binders[h];g instanceof ic&&g.setConstantPatternPositions(r,o)}}updatePaintArrays(r,o,h,g,v){let x=!1;for(const b in r){const T=o.getPositions(b);for(const E of T){const z=h.feature(E.index);for(const R in this.binders){const O=this.binders[R];if((O instanceof Fo||O instanceof js||O instanceof za)&&O.expression.isStateDependent===!0){const N=g.paint.get(R);O.expression=N.value,O.updatePaintArray(E.start,E.end,z,r[b],v),x=!0}}}}return x}defines(){const r=[];for(const o in this.binders){const h=this.binders[o];(h instanceof pd||h instanceof ic)&&r.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return r}getBinderAttributes(){const r=[];for(const o in this.binders){const h=this.binders[o];if(h instanceof Fo||h instanceof js)for(let g=0;g<h.paintVertexAttributes.length;g++)r.push(h.paintVertexAttributes[g].name);else if(h instanceof za)for(let g=0;g<Ia.members.length;g++)r.push(Ia.members[g].name)}return r}getBinderUniforms(){const r=[];for(const o in this.binders){const h=this.binders[o];if(h instanceof pd||h instanceof ic||h instanceof js)for(const g of h.uniformNames)r.push(g)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,o){const h=[];for(const g in this.binders){const v=this.binders[g];if(v instanceof pd||v instanceof ic||v instanceof js){for(const x of v.uniformNames)if(o[x]){const b=v.getBinding(r,o[x],x);h.push({name:x,property:g,binding:b})}}}return h}setUniforms(r,o,h,g){for(const{name:v,property:x,binding:b}of o)this.binders[x].setUniform(b,g,h.get(x),v)}updatePaintBuffers(r){this._buffers=[];for(const o in this.binders){const h=this.binders[o];if(r&&h instanceof za){const g=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof Fo||h instanceof js)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const o in this.binders){const h=this.binders[o];(h instanceof Fo||h instanceof js||h instanceof za)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const o=this.binders[r];(o instanceof Fo||o instanceof js||o instanceof za)&&o.destroy()}}}class Rl{constructor(r,o,h=()=>!0){this.programConfigurations={};for(const g of r)this.programConfigurations[g.id]=new Kb(g,o,h);this.needsUpload=!1,this._featureMap=new zl,this._bufferOffset=0}populatePaintArrays(r,o,h,g,v,x){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(r,o,g,v,x);o.id!==void 0&&this._featureMap.add(o.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,o,h,g){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,o,v,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function aA(s,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${r}-`,"").replace(/-/g,"_")]}function Yb(s,r,o){const h={color:{source:K,composite:Pt},number:{source:et,composite:K}},g=function(v){return{"line-pattern":{source:Ai,composite:Ai},"fill-pattern":{source:Ai,composite:Ai},"fill-extrusion-pattern":{source:Ai,composite:Ai}}[v]}(s);return g&&g[o]||h[r][o]}lt("ConstantBinder",pd),lt("CrossFadedConstantBinder",ic),lt("SourceExpressionBinder",Fo),lt("CrossFadedCompositeBinder",za),lt("CompositeExpressionBinder",js),lt("ProgramConfiguration",Kb,{omit:["_buffers"]}),lt("ProgramConfigurationSet",Rl);const qn=8192,C_=Math.pow(2,14)-1,Jb=-C_-1;function Ll(s){const r=qn/s.extent,o=s.loadGeometry();for(let h=0;h<o.length;h++){const g=o[h];for(let v=0;v<g.length;v++){const x=g[v],b=Math.round(x.x*r),T=Math.round(x.y*r);x.x=de(b,Jb,C_),x.y=de(T,Jb,C_),(b<x.x||b>x.x+1||T<x.y||T>x.y+1)&&Fe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Fl(s,r){return{type:s.type,id:s.id,properties:s.properties,geometry:r?Ll(s):[]}}function Xp(s,r,o,h,g){s.emplaceBack(2*r+(h+1)/2,2*o+(g+1)/2)}class k_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.indexArray=new Yi,this.segments=new Bt,this.programConfigurations=new Rl(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,h){const g=this.layers[0],v=[];let x=null,b=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),b=!x.isConstant());for(const{feature:T,id:E,index:z,sourceLayerIndex:R}of r){const O=this.layers[0]._featureFilter.needGeometry,N=Fl(T,O);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),N,h))continue;const q=b?x.evaluate(N,{},h):void 0,Z={id:E,properties:T.properties,type:T.type,sourceLayerIndex:R,index:z,geometry:O?N.geometry:Ll(T),patterns:{},sortKey:q};v.push(Z)}b&&v.sort((T,E)=>T.sortKey-E.sortKey);for(const T of v){const{geometry:E,index:z,sourceLayerIndex:R}=T,O=r[z].feature;this.addFeature(T,E,z,h),o.featureIndex.insert(O,E,z,R,this.index)}}update(r,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,mi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,o,h,g){for(const v of o)for(const x of v){const b=x.x,T=x.y;if(b<0||b>=qn||T<0||T>=qn)continue;const E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),z=E.vertexLength;Xp(this.layoutVertexArray,b,T,-1,-1),Xp(this.layoutVertexArray,b,T,1,-1),Xp(this.layoutVertexArray,b,T,1,1),Xp(this.layoutVertexArray,b,T,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),E.vertexLength+=4,E.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},g)}}function Qb(s,r){for(let o=0;o<s.length;o++)if(sc(r,s[o]))return!0;for(let o=0;o<r.length;o++)if(sc(s,r[o]))return!0;return!!P_(s,r)}function lA(s,r,o){return!!sc(s,r)||!!E_(r,s,o)}function ew(s,r){if(s.length===1)return nw(r,s[0]);for(let o=0;o<r.length;o++){const h=r[o];for(let g=0;g<h.length;g++)if(sc(s,h[g]))return!0}for(let o=0;o<s.length;o++)if(nw(r,s[o]))return!0;for(let o=0;o<r.length;o++)if(P_(s,r[o]))return!0;return!1}function uA(s,r,o){if(s.length>1){if(P_(s,r))return!0;for(let h=0;h<r.length;h++)if(E_(r[h],s,o))return!0}for(let h=0;h<s.length;h++)if(E_(s[h],r,o))return!0;return!1}function P_(s,r){if(s.length===0||r.length===0)return!1;for(let o=0;o<s.length-1;o++){const h=s[o],g=s[o+1];for(let v=0;v<r.length-1;v++)if(cA(h,g,r[v],r[v+1]))return!0}return!1}function cA(s,r,o,h){return Be(s,o,h)!==Be(r,o,h)&&Be(s,r,o)!==Be(s,r,h)}function E_(s,r,o){const h=o*o;if(r.length===1)return s.distSqr(r[0])<h;for(let g=1;g<r.length;g++)if(tw(s,r[g-1],r[g])<h)return!0;return!1}function tw(s,r,o){const h=r.distSqr(o);if(h===0)return s.distSqr(r);const g=((s.x-r.x)*(o.x-r.x)+(s.y-r.y)*(o.y-r.y))/h;return s.distSqr(g<0?r:g>1?o:o.sub(r)._mult(g)._add(r))}function nw(s,r){let o,h,g,v=!1;for(let x=0;x<s.length;x++){o=s[x];for(let b=0,T=o.length-1;b<o.length;T=b++)h=o[b],g=o[T],h.y>r.y!=g.y>r.y&&r.x<(g.x-h.x)*(r.y-h.y)/(g.y-h.y)+h.x&&(v=!v)}return v}function sc(s,r){let o=!1;for(let h=0,g=s.length-1;h<s.length;g=h++){const v=s[h],x=s[g];v.y>r.y!=x.y>r.y&&r.x<(x.x-v.x)*(r.y-v.y)/(x.y-v.y)+v.x&&(o=!o)}return o}function hA(s,r,o){const h=o[0],g=o[2];if(s.x<h.x&&r.x<h.x||s.x>g.x&&r.x>g.x||s.y<h.y&&r.y<h.y||s.y>g.y&&r.y>g.y)return!1;const v=Be(s,r,o[0]);return v!==Be(s,r,o[1])||v!==Be(s,r,o[2])||v!==Be(s,r,o[3])}function md(s,r,o){const h=r.paint.get(s).value;return h.kind==="constant"?h.value:o.programConfigurations.get(r.id).getMaxValue(s)}function Kp(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Yp(s,r,o,h,g){if(!r[0]&&!r[1])return s;const v=A.convert(r)._mult(g);o==="viewport"&&v._rotate(-h);const x=[];for(let b=0;b<s.length;b++)x.push(s[b].sub(v));return x}let rw,iw;lt("CircleBucket",k_,{omit:["layers"]});var dA={get paint(){return iw=iw||new _({"circle-radius":new vt(ke.paint_circle["circle-radius"]),"circle-color":new vt(ke.paint_circle["circle-color"]),"circle-blur":new vt(ke.paint_circle["circle-blur"]),"circle-opacity":new vt(ke.paint_circle["circle-opacity"]),"circle-translate":new ct(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new ct(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ct(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ct(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vt(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vt(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vt(ke.paint_circle["circle-stroke-opacity"])})},get layout(){return rw=rw||new _({"circle-sort-key":new vt(ke.layout_circle["circle-sort-key"])})}},Yr=1e-6,oc=typeof Float32Array<"u"?Float32Array:Array;function I_(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function sw(s,r,o){var h=r[0],g=r[1],v=r[2],x=r[3],b=r[4],T=r[5],E=r[6],z=r[7],R=r[8],O=r[9],N=r[10],q=r[11],Z=r[12],ie=r[13],le=r[14],Se=r[15],ge=o[0],be=o[1],Ee=o[2],je=o[3];return s[0]=ge*h+be*b+Ee*R+je*Z,s[1]=ge*g+be*T+Ee*O+je*ie,s[2]=ge*v+be*E+Ee*N+je*le,s[3]=ge*x+be*z+Ee*q+je*Se,s[4]=(ge=o[4])*h+(be=o[5])*b+(Ee=o[6])*R+(je=o[7])*Z,s[5]=ge*g+be*T+Ee*O+je*ie,s[6]=ge*v+be*E+Ee*N+je*le,s[7]=ge*x+be*z+Ee*q+je*Se,s[8]=(ge=o[8])*h+(be=o[9])*b+(Ee=o[10])*R+(je=o[11])*Z,s[9]=ge*g+be*T+Ee*O+je*ie,s[10]=ge*v+be*E+Ee*N+je*le,s[11]=ge*x+be*z+Ee*q+je*Se,s[12]=(ge=o[12])*h+(be=o[13])*b+(Ee=o[14])*R+(je=o[15])*Z,s[13]=ge*g+be*T+Ee*O+je*ie,s[14]=ge*v+be*E+Ee*N+je*le,s[15]=ge*x+be*z+Ee*q+je*Se,s}Math.hypot||(Math.hypot=function(){for(var s=0,r=arguments.length;r--;)s+=arguments[r]*arguments[r];return Math.sqrt(s)});var gd,fA=sw;function Jp(s,r,o){var h=r[0],g=r[1],v=r[2],x=r[3];return s[0]=o[0]*h+o[4]*g+o[8]*v+o[12]*x,s[1]=o[1]*h+o[5]*g+o[9]*v+o[13]*x,s[2]=o[2]*h+o[6]*g+o[10]*v+o[14]*x,s[3]=o[3]*h+o[7]*g+o[11]*v+o[15]*x,s}gd=new oc(4),oc!=Float32Array&&(gd[0]=0,gd[1]=0,gd[2]=0,gd[3]=0);class pA extends l{constructor(r){super(r,dA)}createBucket(r){return new k_(r)}queryRadius(r){const o=r;return md("circle-radius",this,o)+md("circle-stroke-width",this,o)+Kp(this.paint.get("circle-translate"))}queryIntersectsFeature(r,o,h,g,v,x,b,T){const E=Yp(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,b),z=this.paint.get("circle-radius").evaluate(o,h)+this.paint.get("circle-stroke-width").evaluate(o,h),R=this.paint.get("circle-pitch-alignment")==="map",O=R?E:function(q,Z){return q.map(ie=>ow(ie,Z))}(E,T),N=R?z*b:z;for(const q of g)for(const Z of q){const ie=R?Z:ow(Z,T);let le=N;const Se=Jp([],[Z.x,Z.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?le*=Se[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(le*=x.cameraToCenterDistance/Se[3]),lA(O,ie,le))return!0}return!1}}function ow(s,r){const o=Jp([],[s.x,s.y,0,1],r);return new A(o[0]/o[3],o[1]/o[3])}class aw extends k_{}let lw;lt("HeatmapBucket",aw,{omit:["layers"]});var mA={get paint(){return lw=lw||new _({"heatmap-radius":new vt(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vt(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ct(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new dd(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ct(ke.paint_heatmap["heatmap-opacity"])})}};function M_(s,{width:r,height:o},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==r*o*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${r*o*h}`)}else g=new Uint8Array(r*o*h);return s.width=r,s.height=o,s.data=g,s}function uw(s,{width:r,height:o},h){if(r===s.width&&o===s.height)return;const g=M_({},{width:r,height:o},h);A_(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,r),height:Math.min(s.height,o)},h),s.width=r,s.height=o,s.data=g.data}function A_(s,r,o,h,g,v){if(g.width===0||g.height===0)return r;if(g.width>s.width||g.height>s.height||o.x>s.width-g.width||o.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>r.width||g.height>r.height||h.x>r.width-g.width||h.y>r.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,b=r.data;if(x===b)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<g.height;T++){const E=((o.y+T)*s.width+o.x)*v,z=((h.y+T)*r.width+h.x)*v;for(let R=0;R<g.width*v;R++)b[z+R]=x[E+R]}return r}class yd{constructor(r,o){M_(this,r,1,o)}resize(r){uw(this,r,1)}clone(){return new yd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,h,g,v){A_(r,o,h,g,v,1)}}class Ji{constructor(r,o){M_(this,r,4,o)}resize(r){uw(this,r,4)}replace(r,o){o?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Ji({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,h,g,v){A_(r,o,h,g,v,4)}}function cw(s){const r={},o=s.resolution||256,h=s.clips?s.clips.length:1,g=s.image||new Ji({width:o,height:h});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const v=(x,b,T)=>{r[s.evaluationKey]=T;const E=s.expression.evaluate(r);g.data[x+b+0]=Math.floor(255*E.r/E.a),g.data[x+b+1]=Math.floor(255*E.g/E.a),g.data[x+b+2]=Math.floor(255*E.b/E.a),g.data[x+b+3]=Math.floor(255*E.a)};if(s.clips)for(let x=0,b=0;x<h;++x,b+=4*o)for(let T=0,E=0;T<o;T++,E+=4){const z=T/(o-1),{start:R,end:O}=s.clips[x];v(b,E,R*(1-z)+O*z)}else for(let x=0,b=0;x<o;x++,b+=4)v(0,b,x/(o-1));return g}lt("AlphaImage",yd),lt("RGBAImage",Ji);const z_="big-fb";class gA extends l{createBucket(r){return new aw(r)}constructor(r){super(r,mA),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=cw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(z_)&&this.heatmapFbos.delete(z_)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let hw;var yA={get paint(){return hw=hw||new _({"hillshade-illumination-direction":new ct(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ct(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ct(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ct(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ct(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ct(ke.paint_hillshade["hillshade-accent-color"])})}};class _A extends l{constructor(r){super(r,yA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const vA=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:xA}=vA;function dw(s,r,o=2){const h=r&&r.length,g=h?r[0]*o:s.length;let v=fw(s,0,g,o,!0);const x=[];if(!v||v.next===v.prev)return x;let b,T,E;if(h&&(v=function(z,R,O,N){const q=[];for(let Z=0,ie=R.length;Z<ie;Z++){const le=fw(z,R[Z]*N,Z<ie-1?R[Z+1]*N:z.length,N,!1);le===le.next&&(le.steiner=!0),q.push(EA(le))}q.sort(CA);for(let Z=0;Z<q.length;Z++)O=kA(q[Z],O);return O}(s,r,v,o)),s.length>80*o){b=1/0,T=1/0;let z=-1/0,R=-1/0;for(let O=o;O<g;O+=o){const N=s[O],q=s[O+1];N<b&&(b=N),q<T&&(T=q),N>z&&(z=N),q>R&&(R=q)}E=Math.max(z-b,R-T),E=E!==0?32767/E:0}return _d(v,x,o,b,T,E,0),x}function fw(s,r,o,h,g){let v;if(g===function(x,b,T,E){let z=0;for(let R=b,O=T-E;R<T;R+=E)z+=(x[O]-x[R])*(x[R+1]+x[O+1]),O=R;return z}(s,r,o,h)>0)for(let x=r;x<o;x+=h)v=gw(x/h|0,s[x],s[x+1],v);else for(let x=o-h;x>=r;x-=h)v=gw(x/h|0,s[x],s[x+1],v);return v&&Qp(v,v.next)&&(xd(v),v=v.next),v}function Ol(s,r){if(!s)return s;r||(r=s);let o,h=s;do if(o=!1,h.steiner||!Qp(h,h.next)&&Ln(h.prev,h,h.next)!==0)h=h.next;else{if(xd(h),h=r=h.prev,h===h.next)break;o=!0}while(o||h!==r);return r}function _d(s,r,o,h,g,v,x){if(!s)return;!x&&v&&function(T,E,z,R){let O=T;do O.z===0&&(O.z=D_(O.x,O.y,E,z,R)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==T);O.prevZ.nextZ=null,O.prevZ=null,function(N){let q,Z=1;do{let ie,le=N;N=null;let Se=null;for(q=0;le;){q++;let ge=le,be=0;for(let je=0;je<Z&&(be++,ge=ge.nextZ,ge);je++);let Ee=Z;for(;be>0||Ee>0&&ge;)be!==0&&(Ee===0||!ge||le.z<=ge.z)?(ie=le,le=le.nextZ,be--):(ie=ge,ge=ge.nextZ,Ee--),Se?Se.nextZ=ie:N=ie,ie.prevZ=Se,Se=ie;le=ge}Se.nextZ=null,Z*=2}while(q>1)}(O)}(s,h,g,v);let b=s;for(;s.prev!==s.next;){const T=s.prev,E=s.next;if(v?wA(s,h,g,v):bA(s))r.push(T.i,s.i,E.i),xd(s),s=E.next,b=E.next;else if((s=E)===b){x?x===1?_d(s=SA(Ol(s),r),r,o,h,g,v,2):x===2&&TA(s,r,o,h,g,v):_d(Ol(s),r,o,h,g,v,1);break}}}function bA(s){const r=s.prev,o=s,h=s.next;if(Ln(r,o,h)>=0)return!1;const g=r.x,v=o.x,x=h.x,b=r.y,T=o.y,E=h.y,z=g<v?g<x?g:x:v<x?v:x,R=b<T?b<E?b:E:T<E?T:E,O=g>v?g>x?g:x:v>x?v:x,N=b>T?b>E?b:E:T>E?T:E;let q=h.next;for(;q!==r;){if(q.x>=z&&q.x<=O&&q.y>=R&&q.y<=N&&ac(g,b,v,T,x,E,q.x,q.y)&&Ln(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function wA(s,r,o,h){const g=s.prev,v=s,x=s.next;if(Ln(g,v,x)>=0)return!1;const b=g.x,T=v.x,E=x.x,z=g.y,R=v.y,O=x.y,N=b<T?b<E?b:E:T<E?T:E,q=z<R?z<O?z:O:R<O?R:O,Z=b>T?b>E?b:E:T>E?T:E,ie=z>R?z>O?z:O:R>O?R:O,le=D_(N,q,r,o,h),Se=D_(Z,ie,r,o,h);let ge=s.prevZ,be=s.nextZ;for(;ge&&ge.z>=le&&be&&be.z<=Se;){if(ge.x>=N&&ge.x<=Z&&ge.y>=q&&ge.y<=ie&&ge!==g&&ge!==x&&ac(b,z,T,R,E,O,ge.x,ge.y)&&Ln(ge.prev,ge,ge.next)>=0||(ge=ge.prevZ,be.x>=N&&be.x<=Z&&be.y>=q&&be.y<=ie&&be!==g&&be!==x&&ac(b,z,T,R,E,O,be.x,be.y)&&Ln(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;ge&&ge.z>=le;){if(ge.x>=N&&ge.x<=Z&&ge.y>=q&&ge.y<=ie&&ge!==g&&ge!==x&&ac(b,z,T,R,E,O,ge.x,ge.y)&&Ln(ge.prev,ge,ge.next)>=0)return!1;ge=ge.prevZ}for(;be&&be.z<=Se;){if(be.x>=N&&be.x<=Z&&be.y>=q&&be.y<=ie&&be!==g&&be!==x&&ac(b,z,T,R,E,O,be.x,be.y)&&Ln(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function SA(s,r){let o=s;do{const h=o.prev,g=o.next.next;!Qp(h,g)&&pw(h,o,o.next,g)&&vd(h,g)&&vd(g,h)&&(r.push(h.i,o.i,g.i),xd(o),xd(o.next),o=s=g),o=o.next}while(o!==s);return Ol(o)}function TA(s,r,o,h,g,v){let x=s;do{let b=x.next.next;for(;b!==x.prev;){if(x.i!==b.i&&IA(x,b)){let T=mw(x,b);return x=Ol(x,x.next),T=Ol(T,T.next),_d(x,r,o,h,g,v,0),void _d(T,r,o,h,g,v,0)}b=b.next}x=x.next}while(x!==s)}function CA(s,r){return s.x-r.x}function kA(s,r){const o=function(g,v){let x=v;const b=g.x,T=g.y;let E,z=-1/0;do{if(T<=x.y&&T>=x.next.y&&x.next.y!==x.y){const Z=x.x+(T-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(Z<=b&&Z>z&&(z=Z,E=x.x<x.next.x?x:x.next,Z===b))return E}x=x.next}while(x!==v);if(!E)return null;const R=E,O=E.x,N=E.y;let q=1/0;x=E;do{if(b>=x.x&&x.x>=O&&b!==x.x&&ac(T<N?b:z,T,O,N,T<N?z:b,T,x.x,x.y)){const Z=Math.abs(T-x.y)/(b-x.x);vd(x,g)&&(Z<q||Z===q&&(x.x>E.x||x.x===E.x&&PA(E,x)))&&(E=x,q=Z)}x=x.next}while(x!==R);return E}(s,r);if(!o)return r;const h=mw(o,s);return Ol(h,h.next),Ol(o,o.next)}function PA(s,r){return Ln(s.prev,s,r.prev)<0&&Ln(r.next,s,s.next)<0}function D_(s,r,o,h,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*g|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function EA(s){let r=s,o=s;do(r.x<o.x||r.x===o.x&&r.y<o.y)&&(o=r),r=r.next;while(r!==s);return o}function ac(s,r,o,h,g,v,x,b){return(g-x)*(r-b)>=(s-x)*(v-b)&&(s-x)*(h-b)>=(o-x)*(r-b)&&(o-x)*(v-b)>=(g-x)*(h-b)}function IA(s,r){return s.next.i!==r.i&&s.prev.i!==r.i&&!function(o,h){let g=o;do{if(g.i!==o.i&&g.next.i!==o.i&&g.i!==h.i&&g.next.i!==h.i&&pw(g,g.next,o,h))return!0;g=g.next}while(g!==o);return!1}(s,r)&&(vd(s,r)&&vd(r,s)&&function(o,h){let g=o,v=!1;const x=(o.x+h.x)/2,b=(o.y+h.y)/2;do g.y>b!=g.next.y>b&&g.next.y!==g.y&&x<(g.next.x-g.x)*(b-g.y)/(g.next.y-g.y)+g.x&&(v=!v),g=g.next;while(g!==o);return v}(s,r)&&(Ln(s.prev,s,r.prev)||Ln(s,r.prev,r))||Qp(s,r)&&Ln(s.prev,s,s.next)>0&&Ln(r.prev,r,r.next)>0)}function Ln(s,r,o){return(r.y-s.y)*(o.x-r.x)-(r.x-s.x)*(o.y-r.y)}function Qp(s,r){return s.x===r.x&&s.y===r.y}function pw(s,r,o,h){const g=tm(Ln(s,r,o)),v=tm(Ln(s,r,h)),x=tm(Ln(o,h,s)),b=tm(Ln(o,h,r));return g!==v&&x!==b||!(g!==0||!em(s,o,r))||!(v!==0||!em(s,h,r))||!(x!==0||!em(o,s,h))||!(b!==0||!em(o,r,h))}function em(s,r,o){return r.x<=Math.max(s.x,o.x)&&r.x>=Math.min(s.x,o.x)&&r.y<=Math.max(s.y,o.y)&&r.y>=Math.min(s.y,o.y)}function tm(s){return s>0?1:s<0?-1:0}function vd(s,r){return Ln(s.prev,s,s.next)<0?Ln(s,r,s.next)>=0&&Ln(s,s.prev,r)>=0:Ln(s,r,s.prev)<0||Ln(s,s.next,r)<0}function mw(s,r){const o=R_(s.i,s.x,s.y),h=R_(r.i,r.x,r.y),g=s.next,v=r.prev;return s.next=r,r.prev=s,o.next=g,g.prev=o,h.next=o,o.prev=h,v.next=h,h.prev=v,h}function gw(s,r,o,h){const g=R_(s,r,o);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function xd(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function R_(s,r,o){return{i:s,x:r,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function L_(s,r,o){const h=o.patternDependencies;let g=!1;for(const v of r){const x=v.paint.get(`${s}-pattern`);x.isConstant()||(g=!0);const b=x.constantOr(null);b&&(g=!0,h[b.to]=!0,h[b.from]=!0)}return g}function F_(s,r,o,h,g){const v=g.patternDependencies;for(const x of r){const b=x.paint.get(`${s}-pattern`).value;if(b.kind!=="constant"){let T=b.evaluate({zoom:h-1},o,{},g.availableImages),E=b.evaluate({zoom:h},o,{},g.availableImages),z=b.evaluate({zoom:h+1},o,{},g.availableImages);T=T&&T.name?T.name:T,E=E&&E.name?E.name:E,z=z&&z.name?z.name:z,v[T]=!0,v[E]=!0,v[z]=!0,o.patterns[x.id]={min:T,mid:E,max:z}}}return o}class O_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xs,this.indexArray=new Yi,this.indexArray2=new pr,this.programConfigurations=new Rl(r.layers,r.zoom),this.segments=new Bt,this.segments2=new Bt,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,h){this.hasPattern=L_("fill",this.layers,o);const g=this.layers[0].layout.get("fill-sort-key"),v=!g.isConstant(),x=[];for(const{feature:b,id:T,index:E,sourceLayerIndex:z}of r){const R=this.layers[0]._featureFilter.needGeometry,O=Fl(b,R);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),O,h))continue;const N=v?g.evaluate(O,{},h,o.availableImages):void 0,q={id:T,properties:b.properties,type:b.type,sourceLayerIndex:z,index:E,geometry:R?O.geometry:Ll(b),patterns:{},sortKey:N};x.push(q)}v&&x.sort((b,T)=>b.sortKey-T.sortKey);for(const b of x){const{geometry:T,index:E,sourceLayerIndex:z}=b;if(this.hasPattern){const R=F_("fill",this.layers,b,this.zoom,o);this.patternFeatures.push(R)}else this.addFeature(b,T,E,h,{});o.featureIndex.insert(r[E].feature,T,E,z,this.index)}}update(r,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,h)}addFeatures(r,o,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,xA),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,o,h,g,v){for(const x of Au(o,500)){let b=0;for(const N of x)b+=N.length;const T=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),E=T.vertexLength,z=[],R=[];for(const N of x){if(N.length===0)continue;N!==x[0]&&R.push(z.length/2);const q=this.segments2.prepareSegment(N.length,this.layoutVertexArray,this.indexArray2),Z=q.vertexLength;this.layoutVertexArray.emplaceBack(N[0].x,N[0].y),this.indexArray2.emplaceBack(Z+N.length-1,Z),z.push(N[0].x),z.push(N[0].y);for(let ie=1;ie<N.length;ie++)this.layoutVertexArray.emplaceBack(N[ie].x,N[ie].y),this.indexArray2.emplaceBack(Z+ie-1,Z+ie),z.push(N[ie].x),z.push(N[ie].y);q.vertexLength+=N.length,q.primitiveLength+=N.length}const O=dw(z,R);for(let N=0;N<O.length;N+=3)this.indexArray.emplaceBack(E+O[N],E+O[N+1],E+O[N+2]);T.vertexLength+=b,T.primitiveLength+=O.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,g)}}let yw,_w;lt("FillBucket",O_,{omit:["layers","patternFeatures"]});var MA={get paint(){return _w=_w||new _({"fill-antialias":new ct(ke.paint_fill["fill-antialias"]),"fill-opacity":new vt(ke.paint_fill["fill-opacity"]),"fill-color":new vt(ke.paint_fill["fill-color"]),"fill-outline-color":new vt(ke.paint_fill["fill-outline-color"]),"fill-translate":new ct(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new ct(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yu(ke.paint_fill["fill-pattern"])})},get layout(){return yw=yw||new _({"fill-sort-key":new vt(ke.layout_fill["fill-sort-key"])})}};class AA extends l{constructor(r){super(r,MA)}recalculate(r,o){super.recalculate(r,o);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new O_(r)}queryRadius(){return Kp(this.paint.get("fill-translate"))}queryIntersectsFeature(r,o,h,g,v,x,b){return ew(Yp(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,b),g)}isTileClipped(){return!0}}const zA=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),DA=S([{name:"a_centroid",components:2,type:"Int16"}],4),{members:RA}=zA;var Da={},LA=k,vw=lc;function lc(s,r,o,h,g){this.properties={},this.extent=o,this.type=0,this._pbf=s,this._geometry=-1,this._keys=h,this._values=g,s.readFields(FA,this,r)}function FA(s,r,o){s==1?r.id=o.readVarint():s==2?function(h,g){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=g._keys[h.readVarint()],b=g._values[h.readVarint()];g.properties[x]=b}}(o,r):s==3?r.type=o.readVarint():s==4&&(r._geometry=o.pos)}function OA(s){for(var r,o,h=0,g=0,v=s.length,x=v-1;g<v;x=g++)h+=((o=s[x]).x-(r=s[g]).x)*(r.y+o.y);return h}lc.types=["Unknown","Point","LineString","Polygon"],lc.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var r,o=s.readVarint()+s.pos,h=1,g=0,v=0,x=0,b=[];s.pos<o;){if(g<=0){var T=s.readVarint();h=7&T,g=T>>3}if(g--,h===1||h===2)v+=s.readSVarint(),x+=s.readSVarint(),h===1&&(r&&b.push(r),r=[]),r.push(new LA(v,x));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&b.push(r),b},lc.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var r=s.readVarint()+s.pos,o=1,h=0,g=0,v=0,x=1/0,b=-1/0,T=1/0,E=-1/0;s.pos<r;){if(h<=0){var z=s.readVarint();o=7&z,h=z>>3}if(h--,o===1||o===2)(g+=s.readSVarint())<x&&(x=g),g>b&&(b=g),(v+=s.readSVarint())<T&&(T=v),v>E&&(E=v);else if(o!==7)throw new Error("unknown command "+o)}return[x,T,b,E]},lc.prototype.toGeoJSON=function(s,r,o){var h,g,v=this.extent*Math.pow(2,o),x=this.extent*s,b=this.extent*r,T=this.loadGeometry(),E=lc.types[this.type];function z(N){for(var q=0;q<N.length;q++){var Z=N[q];N[q]=[360*(Z.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Z.y+b)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(h=0;h<T.length;h++)R[h]=T[h][0];z(T=R);break;case 2:for(h=0;h<T.length;h++)z(T[h]);break;case 3:for(T=function(N){var q=N.length;if(q<=1)return[N];for(var Z,ie,le=[],Se=0;Se<q;Se++){var ge=OA(N[Se]);ge!==0&&(ie===void 0&&(ie=ge<0),ie===ge<0?(Z&&le.push(Z),Z=[N[Se]]):Z.push(N[Se]))}return Z&&le.push(Z),le}(T),h=0;h<T.length;h++)for(g=0;g<T[h].length;g++)z(T[h][g])}T.length===1?T=T[0]:E="Multi"+E;var O={type:"Feature",geometry:{type:E,coordinates:T},properties:this.properties};return"id"in this&&(O.id=this.id),O};var BA=vw,xw=bw;function bw(s,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(VA,this,r),this.length=this._features.length}function VA(s,r,o){s===15?r.version=o.readVarint():s===1?r.name=o.readString():s===5?r.extent=o.readVarint():s===2?r._features.push(o.pos):s===3?r._keys.push(o.readString()):s===4&&r._values.push(function(h){for(var g=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;g=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return g}(o))}bw.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var r=this._pbf.readVarint()+this._pbf.pos;return new BA(this._pbf,r,this.extent,this._keys,this._values)};var NA=xw;function jA(s,r,o){if(s===3){var h=new NA(o,o.readVarint()+o.pos);h.length&&(r[h.name]=h)}}Da.VectorTile=function(s,r){this.layers=s.readFields(jA,{},r)},Da.VectorTileFeature=vw,Da.VectorTileLayer=xw;const $A=Da.VectorTileFeature.types,B_=Math.pow(2,13);function bd(s,r,o,h,g,v,x,b){s.emplaceBack(r,o,2*Math.floor(h*B_)+x,g*B_*2,v*B_*2,Math.round(b))}class V_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Pa,this.centroidVertexArray=new wr,this.indexArray=new Yi,this.programConfigurations=new Rl(r.layers,r.zoom),this.segments=new Bt,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,h){this.features=[],this.hasPattern=L_("fill-extrusion",this.layers,o);for(const{feature:g,id:v,index:x,sourceLayerIndex:b}of r){const T=this.layers[0]._featureFilter.needGeometry,E=Fl(g,T);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),E,h))continue;const z={id:v,sourceLayerIndex:b,index:x,geometry:T?E.geometry:Ll(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(F_("fill-extrusion",this.layers,z,this.zoom,o)):this.addFeature(z,z.geometry,x,h,{}),o.featureIndex.insert(g,z.geometry,x,b,this.index,!0)}}addFeatures(r,o,h){for(const g of this.features){const{geometry:v}=g;this.addFeature(g,v,g.index,o,h)}}update(r,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,RA),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,DA.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,o,h,g,v){for(const x of Au(o,500)){const b={x:0,y:0,vertexCount:0};let T=0;for(const q of x)T+=q.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const q of x){if(q.length===0||WA(q))continue;let Z=0;for(let ie=0;ie<q.length;ie++){const le=q[ie];if(ie>=1){const Se=q[ie-1];if(!UA(le,Se)){E.vertexLength+4>Bt.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ge=le.sub(Se)._perp()._unit(),be=Se.dist(le);Z+be>32768&&(Z=0),bd(this.layoutVertexArray,le.x,le.y,ge.x,ge.y,0,0,Z),bd(this.layoutVertexArray,le.x,le.y,ge.x,ge.y,0,1,Z),b.x+=2*le.x,b.y+=2*le.y,b.vertexCount+=2,Z+=be,bd(this.layoutVertexArray,Se.x,Se.y,ge.x,ge.y,0,0,Z),bd(this.layoutVertexArray,Se.x,Se.y,ge.x,ge.y,0,1,Z),b.x+=2*Se.x,b.y+=2*Se.y,b.vertexCount+=2;const Ee=E.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+T>Bt.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),$A[r.type]!=="Polygon")continue;const z=[],R=[],O=E.vertexLength;for(const q of x)if(q.length!==0){q!==x[0]&&R.push(z.length/2);for(let Z=0;Z<q.length;Z++){const ie=q[Z];bd(this.layoutVertexArray,ie.x,ie.y,0,0,1,1,0),b.x+=ie.x,b.y+=ie.y,b.vertexCount+=1,z.push(ie.x),z.push(ie.y)}}const N=dw(z,R);for(let q=0;q<N.length;q+=3)this.indexArray.emplaceBack(O+N[q],O+N[q+2],O+N[q+1]);E.primitiveLength+=N.length/3,E.vertexLength+=T;for(let q=0;q<b.vertexCount;q++){const Z=Math.floor(b.x/b.vertexCount),ie=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(Z,ie)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,g)}}function UA(s,r){return s.x===r.x&&(s.x<0||s.x>qn)||s.y===r.y&&(s.y<0||s.y>qn)}function WA(s){return s.every(r=>r.x<0)||s.every(r=>r.x>qn)||s.every(r=>r.y<0)||s.every(r=>r.y>qn)}let ww;lt("FillExtrusionBucket",V_,{omit:["layers","features"]});var qA={get paint(){return ww=ww||new _({"fill-extrusion-opacity":new ct(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vt(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ct(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ct(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yu(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vt(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vt(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ct(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class GA extends l{constructor(r){super(r,qA)}createBucket(r){return new V_(r)}queryRadius(){return Kp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,o,h,g,v,x,b,T){const E=Yp(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,b),z=this.paint.get("fill-extrusion-height").evaluate(o,h),R=this.paint.get("fill-extrusion-base").evaluate(o,h),O=function(q,Z,ie,le){const Se=[];for(const ge of q){const be=[ge.x,ge.y,0,1];Jp(be,be,Z),Se.push(new A(be[0]/be[3],be[1]/be[3]))}return Se}(E,T),N=function(q,Z,ie,le){const Se=[],ge=[],be=le[8]*Z,Ee=le[9]*Z,je=le[10]*Z,rt=le[11]*Z,_t=le[8]*ie,tt=le[9]*ie,Qe=le[10]*ie,ft=le[11]*ie;for(const ut of q){const ot=[],De=[];for(const pt of ut){const dt=pt.x,kt=pt.y,sn=le[0]*dt+le[4]*kt+le[12],tn=le[1]*dt+le[5]*kt+le[13],sr=le[2]*dt+le[6]*kt+le[14],bs=le[3]*dt+le[7]*kt+le[15],Cr=sr+je,or=bs+rt,Jr=sn+_t,Qr=tn+tt,ei=sr+Qe,Mn=bs+ft,ar=new A((sn+be)/or,(tn+Ee)/or);ar.z=Cr/or,ot.push(ar);const Vr=new A(Jr/Mn,Qr/Mn);Vr.z=ei/Mn,De.push(Vr)}Se.push(ot),ge.push(De)}return[Se,ge]}(g,R,z,T);return function(q,Z,ie){let le=1/0;ew(ie,Z)&&(le=Sw(ie,Z[0]));for(let Se=0;Se<Z.length;Se++){const ge=Z[Se],be=q[Se];for(let Ee=0;Ee<ge.length-1;Ee++){const je=ge[Ee],rt=[je,ge[Ee+1],be[Ee+1],be[Ee],je];Qb(ie,rt)&&(le=Math.min(le,Sw(ie,rt)))}}return le!==1/0&&le}(N[0],N[1],O)}}function wd(s,r){return s.x*r.x+s.y*r.y}function Sw(s,r){if(s.length===1){let o=0;const h=r[o++];let g;for(;!g||h.equals(g);)if(g=r[o++],!g)return 1/0;for(;o<r.length;o++){const v=r[o],x=s[0],b=g.sub(h),T=v.sub(h),E=x.sub(h),z=wd(b,b),R=wd(b,T),O=wd(T,T),N=wd(E,b),q=wd(E,T),Z=z*O-R*R,ie=(O*N-R*q)/Z,le=(z*q-R*N)/Z,Se=h.z*(1-ie-le)+g.z*ie+v.z*le;if(isFinite(Se))return Se}return 1/0}{let o=1/0;for(const h of r)o=Math.min(o,h.z);return o}}const HA=S([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ZA}=HA,XA=S([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:KA}=XA,YA=Da.VectorTileFeature.types,JA=Math.cos(Math.PI/180*37.5),Tw=Math.pow(2,14)/.5;class N_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Qu,this.layoutVertexArray2=new Ea,this.indexArray=new Yi,this.programConfigurations=new Rl(r.layers,r.zoom),this.segments=new Bt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,h){this.hasPattern=L_("line",this.layers,o);const g=this.layers[0].layout.get("line-sort-key"),v=!g.isConstant(),x=[];for(const{feature:b,id:T,index:E,sourceLayerIndex:z}of r){const R=this.layers[0]._featureFilter.needGeometry,O=Fl(b,R);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),O,h))continue;const N=v?g.evaluate(O,{},h):void 0,q={id:T,properties:b.properties,type:b.type,sourceLayerIndex:z,index:E,geometry:R?O.geometry:Ll(b),patterns:{},sortKey:N};x.push(q)}v&&x.sort((b,T)=>b.sortKey-T.sortKey);for(const b of x){const{geometry:T,index:E,sourceLayerIndex:z}=b;if(this.hasPattern){const R=F_("line",this.layers,b,this.zoom,o);this.patternFeatures.push(R)}else this.addFeature(b,T,E,h,{});o.featureIndex.insert(r[E].feature,T,E,z,this.index)}}update(r,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,h)}addFeatures(r,o,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,KA)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ZA),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,o,h,g,v){const x=this.layers[0].layout,b=x.get("line-join").evaluate(r,{}),T=x.get("line-cap"),E=x.get("line-miter-limit"),z=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const R of o)this.addLine(R,r,b,T,E,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,g)}addLine(r,o,h,g,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<r.length-1;le++)this.totalDistance+=r[le].dist(r[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=YA[o.type]==="Polygon";let T=r.length;for(;T>=2&&r[T-1].equals(r[T-2]);)T--;let E=0;for(;E<T-1&&r[E].equals(r[E+1]);)E++;if(T<(b?3:2))return;h==="bevel"&&(v=1.05);const z=this.overscaling<=16?15*qn/(512*this.overscaling):0,R=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let O,N,q,Z,ie;this.e1=this.e2=-1,b&&(O=r[T-2],ie=r[E].sub(O)._unit()._perp());for(let le=E;le<T;le++){if(q=le===T-1?b?r[E+1]:void 0:r[le+1],q&&r[le].equals(q))continue;ie&&(Z=ie),O&&(N=O),O=r[le],ie=q?q.sub(O)._unit()._perp():Z,Z=Z||ie;let Se=Z.add(ie);Se.x===0&&Se.y===0||Se._unit();const ge=Z.x*ie.x+Z.y*ie.y,be=Se.x*ie.x+Se.y*ie.y,Ee=be!==0?1/be:1/0,je=2*Math.sqrt(2-2*be),rt=be<JA&&N&&q,_t=Z.x*ie.y-Z.y*ie.x>0;if(rt&&le>E){const ft=O.dist(N);if(ft>2*z){const ut=O.sub(O.sub(N)._mult(z/ft)._round());this.updateDistance(N,ut),this.addCurrentVertex(ut,Z,0,0,R),N=ut}}const tt=N&&q;let Qe=tt?h:b?"butt":g;if(tt&&Qe==="round"&&(Ee<x?Qe="miter":Ee<=2&&(Qe="fakeround")),Qe==="miter"&&Ee>v&&(Qe="bevel"),Qe==="bevel"&&(Ee>2&&(Qe="flipbevel"),Ee<v&&(Qe="miter")),N&&this.updateDistance(N,O),Qe==="miter")Se._mult(Ee),this.addCurrentVertex(O,Se,0,0,R);else if(Qe==="flipbevel"){if(Ee>100)Se=ie.mult(-1);else{const ft=Ee*Z.add(ie).mag()/Z.sub(ie).mag();Se._perp()._mult(ft*(_t?-1:1))}this.addCurrentVertex(O,Se,0,0,R),this.addCurrentVertex(O,Se.mult(-1),0,0,R)}else if(Qe==="bevel"||Qe==="fakeround"){const ft=-Math.sqrt(Ee*Ee-1),ut=_t?ft:0,ot=_t?0:ft;if(N&&this.addCurrentVertex(O,Z,ut,ot,R),Qe==="fakeround"){const De=Math.round(180*je/Math.PI/20);for(let pt=1;pt<De;pt++){let dt=pt/De;if(dt!==.5){const sn=dt-.5;dt+=dt*sn*(dt-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*sn*sn+(.848013+ge*(.215638*ge-1.06021)))}const kt=ie.sub(Z)._mult(dt)._add(Z)._unit()._mult(_t?-1:1);this.addHalfVertex(O,kt.x,kt.y,!1,_t,0,R)}}q&&this.addCurrentVertex(O,ie,-ut,-ot,R)}else if(Qe==="butt")this.addCurrentVertex(O,Se,0,0,R);else if(Qe==="square"){const ft=N?1:-1;this.addCurrentVertex(O,Se,ft,ft,R)}else Qe==="round"&&(N&&(this.addCurrentVertex(O,Z,0,0,R),this.addCurrentVertex(O,Z,1,1,R,!0)),q&&(this.addCurrentVertex(O,ie,-1,-1,R,!0),this.addCurrentVertex(O,ie,0,0,R)));if(rt&&le<T-1){const ft=O.dist(q);if(ft>2*z){const ut=O.add(q.sub(O)._mult(z/ft)._round());this.updateDistance(O,ut),this.addCurrentVertex(ut,ie,0,0,R),O=ut}}}}addCurrentVertex(r,o,h,g,v,x=!1){const b=o.y*g-o.x,T=-o.y-o.x*g;this.addHalfVertex(r,o.x+o.y*h,o.y-o.x*h,x,!1,h,v),this.addHalfVertex(r,b,T,x,!0,-g,v),this.distance>Tw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,o,h,g,v,x))}addHalfVertex({x:r,y:o},h,g,v,x,b,T){const E=.5*(this.lineClips?this.scaledDistance*(Tw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(o<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(b===0?0:b<0?-1:1)|(63&E)<<2,E>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),T.primitiveLength++),x?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,o){this.distance+=r.dist(o),this.updateScaledDistance()}}let Cw,kw;lt("LineBucket",N_,{omit:["layers","patternFeatures"]});var Pw={get paint(){return kw=kw||new _({"line-opacity":new vt(ke.paint_line["line-opacity"]),"line-color":new vt(ke.paint_line["line-color"]),"line-translate":new ct(ke.paint_line["line-translate"]),"line-translate-anchor":new ct(ke.paint_line["line-translate-anchor"]),"line-width":new vt(ke.paint_line["line-width"]),"line-gap-width":new vt(ke.paint_line["line-gap-width"]),"line-offset":new vt(ke.paint_line["line-offset"]),"line-blur":new vt(ke.paint_line["line-blur"]),"line-dasharray":new Ju(ke.paint_line["line-dasharray"]),"line-pattern":new Yu(ke.paint_line["line-pattern"]),"line-gradient":new dd(ke.paint_line["line-gradient"])})},get layout(){return Cw=Cw||new _({"line-cap":new ct(ke.layout_line["line-cap"]),"line-join":new vt(ke.layout_line["line-join"]),"line-miter-limit":new ct(ke.layout_line["line-miter-limit"]),"line-round-limit":new ct(ke.layout_line["line-round-limit"]),"line-sort-key":new vt(ke.layout_line["line-sort-key"])})}};class QA extends vt{possiblyEvaluate(r,o){return o=new fn(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(r,o)}evaluate(r,o,h,g){return o=ye({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(r,o,h,g)}}let nm;class ez extends l{constructor(r){super(r,Pw),this.gradientVersion=0,nm||(nm=new QA(Pw.paint.properties["line-width"].specification),nm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof ua,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,o){super.recalculate(r,o),this.paint._values["line-floorwidth"]=nm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new N_(r)}queryRadius(r){const o=r,h=Ew(md("line-width",this,o),md("line-gap-width",this,o)),g=md("line-offset",this,o);return h/2+Math.abs(g)+Kp(this.paint.get("line-translate"))}queryIntersectsFeature(r,o,h,g,v,x,b){const T=Yp(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,b),E=b/2*Ew(this.paint.get("line-width").evaluate(o,h),this.paint.get("line-gap-width").evaluate(o,h)),z=this.paint.get("line-offset").evaluate(o,h);return z&&(g=function(R,O){const N=[];for(let q=0;q<R.length;q++){const Z=R[q],ie=[];for(let le=0;le<Z.length;le++){const Se=Z[le-1],ge=Z[le],be=Z[le+1],Ee=le===0?new A(0,0):ge.sub(Se)._unit()._perp(),je=le===Z.length-1?new A(0,0):be.sub(ge)._unit()._perp(),rt=Ee._add(je)._unit(),_t=rt.x*je.x+rt.y*je.y;_t!==0&&rt._mult(1/_t),ie.push(rt._mult(O)._add(ge))}N.push(ie)}return N}(g,z*b)),function(R,O,N){for(let q=0;q<O.length;q++){const Z=O[q];if(R.length>=3){for(let ie=0;ie<Z.length;ie++)if(sc(R,Z[ie]))return!0}if(uA(R,Z,N))return!0}return!1}(T,g,E)}isTileClipped(){return!0}}function Ew(s,r){return r>0?r+2*s:s}const tz=S([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nz=S([{name:"a_projected_pos",components:3,type:"Float32"}],4);S([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rz=S([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);S([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Iw=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),iz=S([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sz(s,r,o){return s.sections.forEach(h=>{h.text=function(g,v,x){const b=v.layout.get("text-transform").evaluate(x,{});return b==="uppercase"?g=g.toLocaleUpperCase():b==="lowercase"&&(g=g.toLocaleLowerCase()),pi.applyArabicShaping&&(g=pi.applyArabicShaping(g)),g}(h.text,r,o)}),s}S([{name:"triangle",components:3,type:"Uint16"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),S([{type:"Float32",name:"offsetX"}]),S([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),S([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Sd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Jn=24,Mw=en,Aw=function(s,r,o,h,g){var v,x,b=8*g-h-1,T=(1<<b)-1,E=T>>1,z=-7,R=g-1,O=-1,N=s[r+R];for(R+=O,v=N&(1<<-z)-1,N>>=-z,z+=b;z>0;v=256*v+s[r+R],R+=O,z-=8);for(x=v&(1<<-z)-1,v>>=-z,z+=h;z>0;x=256*x+s[r+R],R+=O,z-=8);if(v===0)v=1-E;else{if(v===T)return x?NaN:1/0*(N?-1:1);x+=Math.pow(2,h),v-=E}return(N?-1:1)*x*Math.pow(2,v-h)},zw=function(s,r,o,h,g,v){var x,b,T,E=8*v-g-1,z=(1<<E)-1,R=z>>1,O=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=0,q=1,Z=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,x=z):(x=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-x))<1&&(x--,T*=2),(r+=x+R>=1?O/T:O*Math.pow(2,1-R))*T>=2&&(x++,T/=2),x+R>=z?(b=0,x=z):x+R>=1?(b=(r*T-1)*Math.pow(2,g),x+=R):(b=r*Math.pow(2,R-1)*Math.pow(2,g),x=0));g>=8;s[o+N]=255&b,N+=q,b/=256,g-=8);for(x=x<<g|b,E+=g;E>0;s[o+N]=255&x,N+=q,x/=256,E-=8);s[o+N-q]|=128*Z};function en(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}en.Varint=0,en.Fixed64=1,en.Bytes=2,en.Fixed32=5;var j_=4294967296,Dw=1/j_,Rw=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Oo(s){return s.type===en.Bytes?s.readVarint()+s.pos:s.pos+1}function uc(s,r,o){return o?4294967296*r+(s>>>0):4294967296*(r>>>0)+(s>>>0)}function Lw(s,r,o){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));o.realloc(h);for(var g=o.pos-1;g>=s;g--)o.buf[g+h]=o.buf[g]}function oz(s,r){for(var o=0;o<s.length;o++)r.writeVarint(s[o])}function az(s,r){for(var o=0;o<s.length;o++)r.writeSVarint(s[o])}function lz(s,r){for(var o=0;o<s.length;o++)r.writeFloat(s[o])}function uz(s,r){for(var o=0;o<s.length;o++)r.writeDouble(s[o])}function cz(s,r){for(var o=0;o<s.length;o++)r.writeBoolean(s[o])}function hz(s,r){for(var o=0;o<s.length;o++)r.writeFixed32(s[o])}function dz(s,r){for(var o=0;o<s.length;o++)r.writeSFixed32(s[o])}function fz(s,r){for(var o=0;o<s.length;o++)r.writeFixed64(s[o])}function pz(s,r){for(var o=0;o<s.length;o++)r.writeSFixed64(s[o])}function rm(s,r){return(s[r]|s[r+1]<<8|s[r+2]<<16)+16777216*s[r+3]}function cc(s,r,o){s[o]=r,s[o+1]=r>>>8,s[o+2]=r>>>16,s[o+3]=r>>>24}function Fw(s,r){return(s[r]|s[r+1]<<8|s[r+2]<<16)+(s[r+3]<<24)}en.prototype={destroy:function(){this.buf=null},readFields:function(s,r,o){for(o=o||this.length;this.pos<o;){var h=this.readVarint(),g=h>>3,v=this.pos;this.type=7&h,s(g,r,this),this.pos===v&&this.skip(h)}return r},readMessage:function(s,r){return this.readFields(s,r,this.readVarint()+this.pos)},readFixed32:function(){var s=rm(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=Fw(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=rm(this.buf,this.pos)+rm(this.buf,this.pos+4)*j_;return this.pos+=8,s},readSFixed64:function(){var s=rm(this.buf,this.pos)+Fw(this.buf,this.pos+4)*j_;return this.pos+=8,s},readFloat:function(){var s=Aw(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Aw(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var r,o,h=this.buf;return r=127&(o=h[this.pos++]),o<128?r:(r|=(127&(o=h[this.pos++]))<<7,o<128?r:(r|=(127&(o=h[this.pos++]))<<14,o<128?r:(r|=(127&(o=h[this.pos++]))<<21,o<128?r:function(g,v,x){var b,T,E=x.buf;if(b=(112&(T=E[x.pos++]))>>4,T<128||(b|=(127&(T=E[x.pos++]))<<3,T<128)||(b|=(127&(T=E[x.pos++]))<<10,T<128)||(b|=(127&(T=E[x.pos++]))<<17,T<128)||(b|=(127&(T=E[x.pos++]))<<24,T<128)||(b|=(1&(T=E[x.pos++]))<<31,T<128))return uc(g,b,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(o=h[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,r=this.pos;return this.pos=s,s-r>=12&&Rw?function(o,h,g){return Rw.decode(o.subarray(h,g))}(this.buf,r,s):function(o,h,g){for(var v="",x=h;x<g;){var b,T,E,z=o[x],R=null,O=z>239?4:z>223?3:z>191?2:1;if(x+O>g)break;O===1?z<128&&(R=z):O===2?(192&(b=o[x+1]))==128&&(R=(31&z)<<6|63&b)<=127&&(R=null):O===3?(T=o[x+2],(192&(b=o[x+1]))==128&&(192&T)==128&&((R=(15&z)<<12|(63&b)<<6|63&T)<=2047||R>=55296&&R<=57343)&&(R=null)):O===4&&(T=o[x+2],E=o[x+3],(192&(b=o[x+1]))==128&&(192&T)==128&&(192&E)==128&&((R=(15&z)<<18|(63&b)<<12|(63&T)<<6|63&E)<=65535||R>=1114112)&&(R=null)),R===null?(R=65533,O=1):R>65535&&(R-=65536,v+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),v+=String.fromCharCode(R),x+=O}return v}(this.buf,r,s)},readBytes:function(){var s=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,s);return this.pos=s,r},readPackedVarint:function(s,r){if(this.type!==en.Bytes)return s.push(this.readVarint(r));var o=Oo(this);for(s=s||[];this.pos<o;)s.push(this.readVarint(r));return s},readPackedSVarint:function(s){if(this.type!==en.Bytes)return s.push(this.readSVarint());var r=Oo(this);for(s=s||[];this.pos<r;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==en.Bytes)return s.push(this.readBoolean());var r=Oo(this);for(s=s||[];this.pos<r;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==en.Bytes)return s.push(this.readFloat());var r=Oo(this);for(s=s||[];this.pos<r;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==en.Bytes)return s.push(this.readDouble());var r=Oo(this);for(s=s||[];this.pos<r;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==en.Bytes)return s.push(this.readFixed32());var r=Oo(this);for(s=s||[];this.pos<r;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==en.Bytes)return s.push(this.readSFixed32());var r=Oo(this);for(s=s||[];this.pos<r;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==en.Bytes)return s.push(this.readFixed64());var r=Oo(this);for(s=s||[];this.pos<r;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==en.Bytes)return s.push(this.readSFixed64());var r=Oo(this);for(s=s||[];this.pos<r;)s.push(this.readSFixed64());return s},skip:function(s){var r=7&s;if(r===en.Varint)for(;this.buf[this.pos++]>127;);else if(r===en.Bytes)this.pos=this.readVarint()+this.pos;else if(r===en.Fixed32)this.pos+=4;else{if(r!==en.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(s,r){this.writeVarint(s<<3|r)},realloc:function(s){for(var r=this.length||16;r<this.pos+s;)r*=2;if(r!==this.length){var o=new Uint8Array(r);o.set(this.buf),this.buf=o,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),cc(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),cc(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),cc(this.buf,-1&s,this.pos),cc(this.buf,Math.floor(s*Dw),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),cc(this.buf,-1&s,this.pos),cc(this.buf,Math.floor(s*Dw),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(r,o){var h,g;if(r>=0?(h=r%4294967296|0,g=r/4294967296|0):(g=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,g=g+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(v,x,b){b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,b.buf[b.pos]=127&(v>>>=7)}(h,0,o),function(v,x){var b=(7&v)<<4;x.buf[x.pos++]|=b|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(g,o)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var r=this.pos;this.pos=function(h,g,v){for(var x,b,T=0;T<g.length;T++){if((x=g.charCodeAt(T))>55295&&x<57344){if(!b){x>56319||T+1===g.length?(h[v++]=239,h[v++]=191,h[v++]=189):b=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,b=x;continue}x=b-55296<<10|x-56320|65536,b=null}else b&&(h[v++]=239,h[v++]=191,h[v++]=189,b=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,s,this.pos);var o=this.pos-r;o>=128&&Lw(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeFloat:function(s){this.realloc(4),zw(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),zw(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var r=s.length;this.writeVarint(r),this.realloc(r);for(var o=0;o<r;o++)this.buf[this.pos++]=s[o]},writeRawMessage:function(s,r){this.pos++;var o=this.pos;s(r,this);var h=this.pos-o;h>=128&&Lw(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h},writeMessage:function(s,r,o){this.writeTag(s,en.Bytes),this.writeRawMessage(r,o)},writePackedVarint:function(s,r){r.length&&this.writeMessage(s,oz,r)},writePackedSVarint:function(s,r){r.length&&this.writeMessage(s,az,r)},writePackedBoolean:function(s,r){r.length&&this.writeMessage(s,cz,r)},writePackedFloat:function(s,r){r.length&&this.writeMessage(s,lz,r)},writePackedDouble:function(s,r){r.length&&this.writeMessage(s,uz,r)},writePackedFixed32:function(s,r){r.length&&this.writeMessage(s,hz,r)},writePackedSFixed32:function(s,r){r.length&&this.writeMessage(s,dz,r)},writePackedFixed64:function(s,r){r.length&&this.writeMessage(s,fz,r)},writePackedSFixed64:function(s,r){r.length&&this.writeMessage(s,pz,r)},writeBytesField:function(s,r){this.writeTag(s,en.Bytes),this.writeBytes(r)},writeFixed32Field:function(s,r){this.writeTag(s,en.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(s,r){this.writeTag(s,en.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(s,r){this.writeTag(s,en.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(s,r){this.writeTag(s,en.Fixed64),this.writeSFixed64(r)},writeVarintField:function(s,r){this.writeTag(s,en.Varint),this.writeVarint(r)},writeSVarintField:function(s,r){this.writeTag(s,en.Varint),this.writeSVarint(r)},writeStringField:function(s,r){this.writeTag(s,en.Bytes),this.writeString(r)},writeFloatField:function(s,r){this.writeTag(s,en.Fixed32),this.writeFloat(r)},writeDoubleField:function(s,r){this.writeTag(s,en.Fixed64),this.writeDouble(r)},writeBooleanField:function(s,r){this.writeVarintField(s,!!r)}};var $_=w(Mw);const U_=3;function mz(s,r,o){s===1&&o.readMessage(gz,r)}function gz(s,r,o){if(s===3){const{id:h,bitmap:g,width:v,height:x,left:b,top:T,advance:E}=o.readMessage(yz,{});r.push({id:h,bitmap:new yd({width:v+2*U_,height:x+2*U_},g),metrics:{width:v,height:x,left:b,top:T,advance:E}})}}function yz(s,r,o){s===1?r.id=o.readVarint():s===2?r.bitmap=o.readBytes():s===3?r.width=o.readVarint():s===4?r.height=o.readVarint():s===5?r.left=o.readSVarint():s===6?r.top=o.readSVarint():s===7&&(r.advance=o.readVarint())}const Ow=U_;function Bw(s){let r=0,o=0;for(const x of s)r+=x.w*x.h,o=Math.max(o,x.w);s.sort((x,b)=>b.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),o),h:1/0}];let g=0,v=0;for(const x of s)for(let b=h.length-1;b>=0;b--){const T=h[b];if(!(x.w>T.w||x.h>T.h)){if(x.x=T.x,x.y=T.y,v=Math.max(v,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===T.w&&x.h===T.h){const E=h.pop();b<h.length&&(h[b]=E)}else x.h===T.h?(T.x+=x.w,T.w-=x.w):x.w===T.w?(T.y+=x.h,T.h-=x.h):(h.push({x:T.x+x.w,y:T.y,w:T.w-x.w,h:x.h}),T.y+=x.h,T.h-=x.h);break}}return{w:g,h:v,fill:r/(g*v)||0}}const gi=1;class W_{constructor(r,{pixelRatio:o,version:h,stretchX:g,stretchY:v,content:x,textFitWidth:b,textFitHeight:T}){this.paddedRect=r,this.pixelRatio=o,this.stretchX=g,this.stretchY=v,this.content=x,this.version=h,this.textFitWidth=b,this.textFitHeight=T}get tl(){return[this.paddedRect.x+gi,this.paddedRect.y+gi]}get br(){return[this.paddedRect.x+this.paddedRect.w-gi,this.paddedRect.y+this.paddedRect.h-gi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*gi)/this.pixelRatio,(this.paddedRect.h-2*gi)/this.pixelRatio]}}class Vw{constructor(r,o){const h={},g={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,h,v),this.addImages(o,g,v);const{w:x,h:b}=Bw(v),T=new Ji({width:x||1,height:b||1});for(const E in r){const z=r[E],R=h[E].paddedRect;Ji.copy(z.data,T,{x:0,y:0},{x:R.x+gi,y:R.y+gi},z.data)}for(const E in o){const z=o[E],R=g[E].paddedRect,O=R.x+gi,N=R.y+gi,q=z.data.width,Z=z.data.height;Ji.copy(z.data,T,{x:0,y:0},{x:O,y:N},z.data),Ji.copy(z.data,T,{x:0,y:Z-1},{x:O,y:N-1},{width:q,height:1}),Ji.copy(z.data,T,{x:0,y:0},{x:O,y:N+Z},{width:q,height:1}),Ji.copy(z.data,T,{x:q-1,y:0},{x:O-1,y:N},{width:1,height:Z}),Ji.copy(z.data,T,{x:0,y:0},{x:O+q,y:N},{width:1,height:Z})}this.image=T,this.iconPositions=h,this.patternPositions=g}addImages(r,o,h){for(const g in r){const v=r[g],x={x:0,y:0,w:v.data.width+2*gi,h:v.data.height+2*gi};h.push(x),o[g]=new W_(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(r,o){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),o),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),o)}patchUpdatedImage(r,o,h){if(!r||!o||r.version===o.version)return;r.version=o.version;const[g,v]=r.tl;h.update(o.data,void 0,{x:g,y:v})}}var Ra;lt("ImagePosition",W_),lt("ImageAtlas",Vw),f.ah=void 0,(Ra=f.ah||(f.ah={}))[Ra.none=0]="none",Ra[Ra.horizontal=1]="horizontal",Ra[Ra.vertical=2]="vertical",Ra[Ra.horizontalOnly=3]="horizontalOnly";const Td=-17;class Cd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,o){const h=new Cd;return h.scale=r||1,h.fontStack=o,h}static forImage(r){const o=new Cd;return o.imageName=r,o}}class hc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,o){const h=new hc;for(let g=0;g<r.sections.length;g++){const v=r.sections[g];v.image?h.addImageSection(v):h.addTextSection(v,o)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let o="";for(let h=0;h<r.length;h++){const g=r.charCodeAt(h+1)||null,v=r.charCodeAt(h-1)||null;o+=g&&Up(g)&&!Sd[r[h+1]]||v&&Up(v)&&!Sd[r[h-1]]||!Sd[r[h]]?r[h]:Sd[r[h]]}return o}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&sm[this.text.charCodeAt(h)];h++)r++;let o=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&sm[this.text.charCodeAt(h)];h--)o--;this.text=this.text.substring(r,o),this.sectionIndex=this.sectionIndex.slice(r,o)}substring(r,o){const h=new hc;return h.text=this.text.substring(r,o),h.sectionIndex=this.sectionIndex.slice(r,o),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,o)=>Math.max(r,this.sections[o].scale),0)}addTextSection(r,o){this.text+=r.text,this.sections.push(Cd.forText(r.scale,r.fontStack||o));const h=this.sections.length-1;for(let g=0;g<r.text.length;++g)this.sectionIndex.push(h)}addImageSection(r){const o=r.image?r.image.name:"";if(o.length===0)return void Fe("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Cd.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Fe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function im(s,r,o,h,g,v,x,b,T,E,z,R,O,N,q){const Z=hc.fromFeature(s,g);let ie;R===f.ah.vertical&&Z.verticalizePunctuation();const{processBidirectionalText:le,processStyledBidirectionalText:Se}=pi;if(le&&Z.sections.length===1){ie=[];const Ee=le(Z.toString(),q_(Z,E,v,r,h,N));for(const je of Ee){const rt=new hc;rt.text=je,rt.sections=Z.sections;for(let _t=0;_t<je.length;_t++)rt.sectionIndex.push(0);ie.push(rt)}}else if(Se){ie=[];const Ee=Se(Z.text,Z.sectionIndex,q_(Z,E,v,r,h,N));for(const je of Ee){const rt=new hc;rt.text=je[0],rt.sectionIndex=je[1],rt.sections=Z.sections,ie.push(rt)}}else ie=function(Ee,je){const rt=[],_t=Ee.text;let tt=0;for(const Qe of je)rt.push(Ee.substring(tt,Qe)),tt=Qe;return tt<_t.length&&rt.push(Ee.substring(tt,_t.length)),rt}(Z,q_(Z,E,v,r,h,N));const ge=[],be={positionedLines:ge,text:Z.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:R,iconsInText:!1,verticalizable:!1};return function(Ee,je,rt,_t,tt,Qe,ft,ut,ot,De,pt,dt){let kt=0,sn=Td,tn=0,sr=0;const bs=ut==="right"?1:ut==="left"?0:.5;let Cr=0;for(const Mn of tt){Mn.trim();const ar=Mn.getMaxScale(),Vr=(ar-1)*Jn,kr={positionedGlyphs:[],lineOffset:0};Ee.positionedLines[Cr]=kr;const ti=kr.positionedGlyphs;let Pr=0;if(!Mn.length()){sn+=Qe,++Cr;continue}for(let yi=0;yi<Mn.length();yi++){const Wt=Mn.getSection(yi),an=Mn.getSectionIndex(yi),yn=Mn.getCharCode(yi);let Ri=0,Tn=null,mc=null,ro=null,io=Jn;const ws=!(ot===f.ah.horizontal||!pt&&!cd(yn)||pt&&(sm[yn]||(or=yn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(or)))));if(Wt.imageName){const ts=_t[Wt.imageName];if(!ts)continue;ro=Wt.imageName,Ee.iconsInText=Ee.iconsInText||!0,mc=ts.paddedRect;const mr=ts.displaySize;Wt.scale=Wt.scale*Jn/dt,Tn={width:mr[0],height:mr[1],left:gi,top:-Ow,advance:ws?mr[1]:mr[0]},Ri=Vr+(Jn-mr[1]*Wt.scale),io=Tn.advance;const Bo=ws?mr[0]*Wt.scale-Jn*ar:mr[1]*Wt.scale-Jn*ar;Bo>0&&Bo>Pr&&(Pr=Bo)}else{const ts=rt[Wt.fontStack],mr=ts&&ts[yn];if(mr&&mr.rect)mc=mr.rect,Tn=mr.metrics;else{const Bo=je[Wt.fontStack],Ad=Bo&&Bo[yn];if(!Ad)continue;Tn=Ad.metrics}Ri=(ar-Wt.scale)*Jn}ws?(Ee.verticalizable=!0,ti.push({glyph:yn,imageName:ro,x:kt,y:sn+Ri,vertical:ws,scale:Wt.scale,fontStack:Wt.fontStack,sectionIndex:an,metrics:Tn,rect:mc}),kt+=io*Wt.scale+De):(ti.push({glyph:yn,imageName:ro,x:kt,y:sn+Ri,vertical:ws,scale:Wt.scale,fontStack:Wt.fontStack,sectionIndex:an,metrics:Tn,rect:mc}),kt+=Tn.advance*Wt.scale+De)}ti.length!==0&&(tn=Math.max(kt-De,tn),bz(ti,0,ti.length-1,bs,Pr)),kt=0;const es=Qe*ar+Pr;kr.lineOffset=Math.max(Pr,Vr),sn+=es,sr=Math.max(es,sr),++Cr}var or;const Jr=sn-Td,{horizontalAlign:Qr,verticalAlign:ei}=G_(ft);(function(Mn,ar,Vr,kr,ti,Pr,es,yi,Wt){const an=(ar-Vr)*ti;let yn=0;yn=Pr!==es?-yi*kr-Td:(-kr*Wt+.5)*es;for(const Ri of Mn)for(const Tn of Ri.positionedGlyphs)Tn.x+=an,Tn.y+=yn})(Ee.positionedLines,bs,Qr,ei,tn,sr,Qe,Jr,tt.length),Ee.top+=-ei*Jr,Ee.bottom=Ee.top+Jr,Ee.left+=-Qr*tn,Ee.right=Ee.left+tn}(be,r,o,h,ie,x,b,T,R,E,O,q),!function(Ee){for(const je of Ee)if(je.positionedGlyphs.length!==0)return!1;return!0}(ge)&&be}const sm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_z={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},vz={40:!0};function Nw(s,r,o,h,g,v){if(r.imageName){const x=h[r.imageName];return x?x.displaySize[0]*r.scale*Jn/v+g:0}{const x=o[r.fontStack],b=x&&x[s];return b?b.metrics.advance*r.scale+g:0}}function jw(s,r,o,h){const g=Math.pow(s-r,2);return h?s<r?g/2:2*g:g+Math.abs(o)*o}function xz(s,r,o){let h=0;return s===10&&(h-=1e4),o&&(h+=150),s!==40&&s!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function $w(s,r,o,h,g,v){let x=null,b=jw(r,o,g,v);for(const T of h){const E=jw(r-T.x,o,g,v)+T.badness;E<=b&&(x=T,b=E)}return{index:s,x:r,priorBreak:x,badness:b}}function Uw(s){return s?Uw(s.priorBreak).concat(s.index):[]}function q_(s,r,o,h,g,v){if(!s)return[];const x=[],b=function(R,O,N,q,Z,ie){let le=0;for(let Se=0;Se<R.length();Se++){const ge=R.getSection(Se);le+=Nw(R.getCharCode(Se),ge,q,Z,O,ie)}return le/Math.max(1,Math.ceil(le/N))}(s,r,o,h,g,v),T=s.text.indexOf("")>=0;let E=0;for(let R=0;R<s.length();R++){const O=s.getSection(R),N=s.getCharCode(R);if(sm[N]||(E+=Nw(N,O,h,g,r,v)),R<s.length()-1){const q=!((z=N)<11904)&&(!!Ot["CJK Compatibility Forms"](z)||!!Ot["CJK Compatibility"](z)||!!Ot["CJK Strokes"](z)||!!Ot["CJK Symbols and Punctuation"](z)||!!Ot["Enclosed CJK Letters and Months"](z)||!!Ot["Halfwidth and Fullwidth Forms"](z)||!!Ot["Ideographic Description Characters"](z)||!!Ot["Vertical Forms"](z)||$p.test(String.fromCodePoint(z)));(_z[N]||q||O.imageName||R!==s.length()-2&&vz[s.getCharCode(R+1)])&&x.push($w(R+1,E,b,x,xz(N,s.getCharCode(R+1),q&&T),!1))}}var z;return Uw($w(s.length(),E,b,x,0,!0))}function G_(s){let r=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:r,verticalAlign:o}}function bz(s,r,o,h,g){if(!h&&!g)return;const v=s[o],x=(s[o].x+v.metrics.advance*v.scale)*h;for(let b=r;b<=o;b++)s[b].x-=x,s[b].y+=g}function wz(s,r,o){const{horizontalAlign:h,verticalAlign:g}=G_(o),v=r[0]-s.displaySize[0]*h,x=r[1]-s.displaySize[1]*g;return{image:s,top:x,bottom:x+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function Ww(s){var r,o;let h=s.left,g=s.top,v=s.right-h,x=s.bottom-g;const b=(r=s.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",T=(o=s.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",E=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(T==="proportional"){if(b==="stretchOnly"&&v/x<E||b==="proportional"){const z=Math.ceil(x*E);h*=z/v,v=z}}else if(b==="proportional"&&T==="stretchOnly"&&E!==0&&v/x>E){const z=Math.ceil(v/E);g*=z/x,x=z}return{x1:h,y1:g,x2:h+v,y2:g+x}}function qw(s,r,o,h,g,v){const x=s.image;let b;if(x.content){const ie=x.content,le=x.pixelRatio||1;b=[ie[0]/le,ie[1]/le,x.displaySize[0]-ie[2]/le,x.displaySize[1]-ie[3]/le]}const T=r.left*v,E=r.right*v;let z,R,O,N;o==="width"||o==="both"?(N=g[0]+T-h[3],R=g[0]+E+h[1]):(N=g[0]+(T+E-x.displaySize[0])/2,R=N+x.displaySize[0]);const q=r.top*v,Z=r.bottom*v;return o==="height"||o==="both"?(z=g[1]+q-h[0],O=g[1]+Z+h[2]):(z=g[1]+(q+Z-x.displaySize[1])/2,O=z+x.displaySize[1]),{image:x,top:z,right:R,bottom:O,left:N,collisionPadding:b}}const kd=255,no=128,La=kd*no;function Gw(s,r){const{expression:o}=r;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new fn(s+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=o;let v=0;for(;v<h.length&&h[v]<=s;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<s+1;)x++;x=Math.min(h.length-1,x);const b=h[v],T=h[x];return o.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:T,interpolationType:g}:{kind:"camera",minZoom:b,maxZoom:T,minSize:o.evaluate(new fn(b)),maxSize:o.evaluate(new fn(T)),interpolationType:g}}}function H_(s,r,o){let h="never";const g=s.get(r);return g?h=g:s.get(o)&&(h="always"),h}const Sz=Da.VectorTileFeature.types,Tz=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function om(s,r,o,h,g,v,x,b,T,E,z,R,O){const N=b?Math.min(La,Math.round(b[0])):0,q=b?Math.min(La,Math.round(b[1])):0;s.emplaceBack(r,o,Math.round(32*h),Math.round(32*g),v,x,(N<<1)+(T?1:0),q,16*E,16*z,256*R,256*O)}function Z_(s,r,o){s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o)}function Cz(s){for(const r of s.sections)if(w_(r.text))return!0;return!1}class X_{constructor(r){this.layoutVertexArray=new ec,this.indexArray=new Yi,this.programConfigurations=r,this.segments=new Bt,this.dynamicLayoutVertexArray=new fd,this.opacityVertexArray=new zi,this.hasVisibleVertices=!1,this.placedSymbolArray=new pn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,o,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,tz.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,nz.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Tz,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}lt("SymbolBuffers",X_);class K_{constructor(r,o,h){this.layoutVertexArray=new r,this.layoutAttributes=o,this.indexArray=new h,this.segments=new Bt,this.collisionVertexArray=new eo}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,rz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}lt("CollisionBuffers",K_);class dc{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=I_([]),this.placementViewportMatrix=I_([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gw(this.zoom,o["text-size"]),this.iconSizeData=Gw(this.zoom,o["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=H_(h,"text-overlap","text-allow-overlap")!=="never"||H_(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>f.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new X_(new Rl(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new X_(new Rl(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new mn,this.lineVertexArray=new br,this.symbolInstances=new Ft,this.textAnchorOffsets=new gn}calculateGlyphDependencies(r,o,h,g,v){for(let x=0;x<r.length;x++)if(o[r.charCodeAt(x)]=!0,(h||g)&&v){const b=Sd[r.charAt(x)];b&&(o[b.charCodeAt(0)]=!0)}}populate(r,o,h){const g=this.layers[0],v=g.layout,x=v.get("text-font"),b=v.get("text-field"),T=v.get("icon-image"),E=(b.value.kind!=="constant"||b.value.value instanceof ci&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),z=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,R=v.get("symbol-sort-key");if(this.features=[],!E&&!z)return;const O=o.iconDependencies,N=o.glyphDependencies,q=o.availableImages,Z=new fn(this.zoom);for(const{feature:ie,id:le,index:Se,sourceLayerIndex:ge}of r){const be=g._featureFilter.needGeometry,Ee=Fl(ie,be);if(!g._featureFilter.filter(Z,Ee,h))continue;let je,rt;if(be||(Ee.geometry=Ll(ie)),E){const tt=g.getValueAndResolveTokens("text-field",Ee,h,q),Qe=ci.factory(tt),ft=this.hasRTLText=this.hasRTLText||Cz(Qe);(!ft||pi.getRTLTextPluginStatus()==="unavailable"||ft&&pi.isParsed())&&(je=sz(Qe,g,Ee))}if(z){const tt=g.getValueAndResolveTokens("icon-image",Ee,h,q);rt=tt instanceof di?tt:di.fromString(tt)}if(!je&&!rt)continue;const _t=this.sortFeaturesByKey?R.evaluate(Ee,{},h):void 0;if(this.features.push({id:le,text:je,icon:rt,index:Se,sourceLayerIndex:ge,geometry:Ee.geometry,properties:ie.properties,type:Sz[ie.type],sortKey:_t}),rt&&(O[rt.name]=!0),je){const tt=x.evaluate(Ee,{},h).join(","),Qe=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.ah.vertical)>=0;for(const ft of je.sections)if(ft.image)O[ft.image.name]=!0;else{const ut=ld(je.toString()),ot=ft.fontStack||tt,De=N[ot]=N[ot]||{};this.calculateGlyphDependencies(ft.text,De,Qe,this.allowVerticalPlacement,ut)}}}v.get("symbol-placement")==="line"&&(this.features=function(ie){const le={},Se={},ge=[];let be=0;function Ee(tt){ge.push(ie[tt]),be++}function je(tt,Qe,ft){const ut=Se[tt];return delete Se[tt],Se[Qe]=ut,ge[ut].geometry[0].pop(),ge[ut].geometry[0]=ge[ut].geometry[0].concat(ft[0]),ut}function rt(tt,Qe,ft){const ut=le[Qe];return delete le[Qe],le[tt]=ut,ge[ut].geometry[0].shift(),ge[ut].geometry[0]=ft[0].concat(ge[ut].geometry[0]),ut}function _t(tt,Qe,ft){const ut=ft?Qe[0][Qe[0].length-1]:Qe[0][0];return`${tt}:${ut.x}:${ut.y}`}for(let tt=0;tt<ie.length;tt++){const Qe=ie[tt],ft=Qe.geometry,ut=Qe.text?Qe.text.toString():null;if(!ut){Ee(tt);continue}const ot=_t(ut,ft),De=_t(ut,ft,!0);if(ot in Se&&De in le&&Se[ot]!==le[De]){const pt=rt(ot,De,ft),dt=je(ot,De,ge[pt].geometry);delete le[ot],delete Se[De],Se[_t(ut,ge[dt].geometry,!0)]=dt,ge[pt].geometry=null}else ot in Se?je(ot,De,ft):De in le?rt(ot,De,ft):(Ee(tt),le[ot]=be-1,Se[De]=be-1)}return ge.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,le)=>ie.sortKey-le.sortKey)}update(r,o,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,o,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,o,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,o){const h=this.lineVertexArray.length;if(r.segment!==void 0){let g=r.dist(o[r.segment+1]),v=r.dist(o[r.segment]);const x={};for(let b=r.segment+1;b<o.length;b++)x[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:g},b<o.length-1&&(g+=o[b+1].dist(o[b]));for(let b=r.segment||0;b>=0;b--)x[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:v},b>0&&(v+=o[b-1].dist(o[b]));for(let b=0;b<o.length;b++){const T=x[b];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,o,h,g,v,x,b,T,E,z,R,O){const N=r.indexArray,q=r.layoutVertexArray,Z=r.segments.prepareSegment(4*o.length,q,N,this.canOverlap?x.sortKey:void 0),ie=this.glyphOffsetArray.length,le=Z.vertexLength,Se=this.allowVerticalPlacement&&b===f.ah.vertical?Math.PI/2:0,ge=x.text&&x.text.sections;for(let be=0;be<o.length;be++){const{tl:Ee,tr:je,bl:rt,br:_t,tex:tt,pixelOffsetTL:Qe,pixelOffsetBR:ft,minFontScaleX:ut,minFontScaleY:ot,glyphOffset:De,isSDF:pt,sectionIndex:dt}=o[be],kt=Z.vertexLength,sn=De[1];om(q,T.x,T.y,Ee.x,sn+Ee.y,tt.x,tt.y,h,pt,Qe.x,Qe.y,ut,ot),om(q,T.x,T.y,je.x,sn+je.y,tt.x+tt.w,tt.y,h,pt,ft.x,Qe.y,ut,ot),om(q,T.x,T.y,rt.x,sn+rt.y,tt.x,tt.y+tt.h,h,pt,Qe.x,ft.y,ut,ot),om(q,T.x,T.y,_t.x,sn+_t.y,tt.x+tt.w,tt.y+tt.h,h,pt,ft.x,ft.y,ut,ot),Z_(r.dynamicLayoutVertexArray,T,Se),N.emplaceBack(kt,kt+1,kt+2),N.emplaceBack(kt+1,kt+2,kt+3),Z.vertexLength+=4,Z.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(De[0]),be!==o.length-1&&dt===o[be+1].sectionIndex||r.programConfigurations.populatePaintArrays(q.length,x,x.index,{},O,ge&&ge[dt])}r.placedSymbolArray.emplaceBack(T.x,T.y,ie,this.glyphOffsetArray.length-ie,le,E,z,T.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],b,0,!1,0,R)}_addCollisionDebugVertex(r,o,h,g,v,x){return o.emplaceBack(0,0),r.emplaceBack(h.x,h.y,g,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,o,h,g,v,x,b){const T=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),E=T.vertexLength,z=v.layoutVertexArray,R=v.collisionVertexArray,O=b.anchorX,N=b.anchorY;this._addCollisionDebugVertex(z,R,x,O,N,new A(r,o)),this._addCollisionDebugVertex(z,R,x,O,N,new A(h,o)),this._addCollisionDebugVertex(z,R,x,O,N,new A(h,g)),this._addCollisionDebugVertex(z,R,x,O,N,new A(r,g)),T.vertexLength+=4;const q=v.indexArray;q.emplaceBack(E,E+1),q.emplaceBack(E+1,E+2),q.emplaceBack(E+2,E+3),q.emplaceBack(E+3,E),T.primitiveLength+=4}addDebugCollisionBoxes(r,o,h,g){for(let v=r;v<o;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new K_(Di,Iw.members,pr),this.iconCollisionBox=new K_(Di,Iw.members,pr);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(r,o,h,g,v,x,b,T,E){const z={};for(let R=o;R<h;R++){const O=r.get(R);z.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},z.textFeatureIndex=O.featureIndex;break}for(let R=g;R<v;R++){const O=r.get(R);z.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},z.verticalTextFeatureIndex=O.featureIndex;break}for(let R=x;R<b;R++){const O=r.get(R);z.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},z.iconFeatureIndex=O.featureIndex;break}for(let R=T;R<E;R++){const O=r.get(R);z.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},z.verticalIconFeatureIndex=O.featureIndex;break}return z}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const h=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,o){const h=r.placedSymbolArray.get(o),g=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<g;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(r),h=Math.cos(r),g=[],v=[],x=[];for(let b=0;b<this.symbolInstances.length;++b){x.push(b);const T=this.symbolInstances.get(b);g.push(0|Math.round(o*T.anchorX+h*T.anchorY)),v.push(T.featureIndex)}return x.sort((b,T)=>g[b]-g[T]||v[T]-v[b]),x}addToSortKeyRanges(r,o){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===o?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const h=this.symbolInstances.get(o);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,v,x)=>{g>=0&&x.indexOf(g)===v&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Hw,Zw;lt("SymbolBucket",dc,{omit:["layers","collisionBoxArray","features","compareText"]}),dc.MAX_GLYPHS=65535,dc.addDynamicAttributes=Z_;var Y_={get paint(){return Zw=Zw||new _({"icon-opacity":new vt(ke.paint_symbol["icon-opacity"]),"icon-color":new vt(ke.paint_symbol["icon-color"]),"icon-halo-color":new vt(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new vt(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vt(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new ct(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new ct(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new vt(ke.paint_symbol["text-opacity"]),"text-color":new vt(ke.paint_symbol["text-color"],{runtimeType:rr,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new vt(ke.paint_symbol["text-halo-color"]),"text-halo-width":new vt(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new vt(ke.paint_symbol["text-halo-blur"]),"text-translate":new ct(ke.paint_symbol["text-translate"]),"text-translate-anchor":new ct(ke.paint_symbol["text-translate-anchor"])})},get layout(){return Hw=Hw||new _({"symbol-placement":new ct(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new ct(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ct(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vt(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ct(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ct(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ct(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ct(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new ct(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ct(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new vt(ke.layout_symbol["icon-size"]),"icon-text-fit":new ct(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ct(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new vt(ke.layout_symbol["icon-image"]),"icon-rotate":new vt(ke.layout_symbol["icon-rotate"]),"icon-padding":new vt(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new ct(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new vt(ke.layout_symbol["icon-offset"]),"icon-anchor":new vt(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ct(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ct(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ct(ke.layout_symbol["text-rotation-alignment"]),"text-field":new vt(ke.layout_symbol["text-field"]),"text-font":new vt(ke.layout_symbol["text-font"]),"text-size":new vt(ke.layout_symbol["text-size"]),"text-max-width":new vt(ke.layout_symbol["text-max-width"]),"text-line-height":new ct(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new vt(ke.layout_symbol["text-letter-spacing"]),"text-justify":new vt(ke.layout_symbol["text-justify"]),"text-radial-offset":new vt(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ct(ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new vt(ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new vt(ke.layout_symbol["text-anchor"]),"text-max-angle":new ct(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new ct(ke.layout_symbol["text-writing-mode"]),"text-rotate":new vt(ke.layout_symbol["text-rotate"]),"text-padding":new ct(ke.layout_symbol["text-padding"]),"text-keep-upright":new ct(ke.layout_symbol["text-keep-upright"]),"text-transform":new vt(ke.layout_symbol["text-transform"]),"text-offset":new vt(ke.layout_symbol["text-offset"]),"text-allow-overlap":new ct(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new ct(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new ct(ke.layout_symbol["text-ignore-placement"]),"text-optional":new ct(ke.layout_symbol["text-optional"])})}};class Xw{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Hr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(r.formattedSection))return o.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}lt("FormatSectionOverride",Xw,{omit:["defaultValue"]});class am extends l{constructor(r){super(r,Y_)}recalculate(r,o){if(super.recalculate(r,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const v of h)g.indexOf(v)<0&&g.push(v);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,o,h,g){const v=this.layout.get(r).evaluate(o,{},h,g),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||Vu(x.value)||!v?v:function(b,T){return T.replace(/{([^{}]+)}/g,(E,z)=>b&&z in b?String(b[z]):"")}(o.properties,v)}createBucket(r){return new dc(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Y_.paint.overridableProperties){if(!am.hasPaintOverride(this.layout,r))continue;const o=this.paint.get(r),h=new Xw(o),g=new Bu(h,o.property.specification);let v=null;v=o.value.kind==="constant"||o.value.kind==="source"?new _a("source",g):new va("composite",g,o.value.zoomStops),this.paint._values[r]=new vs(o.property,v,o.parameters)}}_handleOverridablePaintPropertyUpdate(r,o,h){return!(!this.layout||o.isDataDriven()||h.isDataDriven())&&am.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,o){const h=r.get("text-field"),g=Y_.paint.properties[o];let v=!1;const x=b=>{for(const T of b)if(g.overrides&&g.overrides.hasOverride(T))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ci)x(h.value.value.sections);else if(h.value.kind==="source"){const b=E=>{v||(E instanceof qi&&Wn(E.value)===Wi?x(E.value.sections):E instanceof Iu?x(E.sections):E.eachChild(b))},T=h.value;T._styleExpression&&b(T._styleExpression.expression)}return v}}let Kw;var kz={get paint(){return Kw=Kw||new _({"background-color":new ct(ke.paint_background["background-color"]),"background-pattern":new Ju(ke.paint_background["background-pattern"]),"background-opacity":new ct(ke.paint_background["background-opacity"])})}};class Pz extends l{constructor(r){super(r,kz)}}let Yw;var Ez={get paint(){return Yw=Yw||new _({"raster-opacity":new ct(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new ct(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ct(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ct(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new ct(ke.paint_raster["raster-saturation"]),"raster-contrast":new ct(ke.paint_raster["raster-contrast"]),"raster-resampling":new ct(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new ct(ke.paint_raster["raster-fade-duration"])})}};class Iz extends l{constructor(r){super(r,Ez)}}class Mz extends l{constructor(r){super(r,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Az{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const J_=63710088e-1;class Fa{constructor(r,o){if(isNaN(r)||isNaN(o))throw new Error(`Invalid LngLat object: (${r}, ${o})`);if(this.lng=+r,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Fa(he(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const o=Math.PI/180,h=this.lat*o,g=r.lat*o,v=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((r.lng-this.lng)*o);return J_*Math.acos(Math.min(v,1))}static convert(r){if(r instanceof Fa)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Fa(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Fa(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Jw=2*Math.PI*J_;function Qw(s){return Jw*Math.cos(s*Math.PI/180)}function eS(s){return(180+s)/360}function tS(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function nS(s,r){return s/Qw(r)}function Q_(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Pd{constructor(r,o,h=0){this.x=+r,this.y=+o,this.z=+h}static fromLngLat(r,o=0){const h=Fa.convert(r);return new Pd(eS(h.lng),tS(h.lat),nS(o,h.lat))}toLngLat(){return new Fa(360*this.x-180,Q_(this.y))}toAltitude(){return this.z*Qw(Q_(this.y))}meterInMercatorCoordinateUnits(){return 1/Jw*(r=Q_(this.y),1/Math.cos(r*Math.PI/180));var r}}function rS(s,r,o){var h=2*Math.PI*6378137/256/Math.pow(2,o);return[s*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class ev{constructor(r,o,h){if(!function(g,v,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||v<0||v>=Math.pow(2,g))}(r,o,h))throw new Error(`x=${o}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=o,this.y=h,this.key=Ed(0,r,r,o,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,o,h){const g=(x=this.y,b=this.z,T=rS(256*(v=this.x),256*(x=Math.pow(2,b)-x-1),b),E=rS(256*(v+1),256*(x+1),b),T[0]+","+T[1]+","+E[0]+","+E[1]);var v,x,b,T,E;const z=function(R,O,N){let q,Z="";for(let ie=R;ie>0;ie--)q=1<<ie-1,Z+=(O&q?1:0)+(N&q?2:0);return Z}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,g)}isChildOf(r){const o=this.z-r.z;return o>0&&r.x===this.x>>o&&r.y===this.y>>o}getTilePoint(r){const o=Math.pow(2,this.z);return new A((r.x*o-this.x)*qn,(r.y*o-this.y)*qn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class iS{constructor(r,o){this.wrap=r,this.canonical=o,this.key=Ed(r,o.z,o.z,o.x,o.y)}}class Qi{constructor(r,o,h,g,v){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=o,this.canonical=new ev(h,+g,+v),this.key=Ed(o,r,h,g,v)}clone(){return new Qi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-r;return r>this.canonical.z?new Qi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qi(r,this.wrap,r,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(r,o){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?Ed(this.wrap*+o,r,this.canonical.z,this.canonical.x,this.canonical.y):Ed(this.wrap*+o,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const o=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>o&&r.canonical.y===this.canonical.y>>o}children(r){if(this.overscaledZ>=r)return[new Qi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Qi(o,this.wrap,o,h,g),new Qi(o,this.wrap,o,h+1,g),new Qi(o,this.wrap,o,h,g+1),new Qi(o,this.wrap,o,h+1,g+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Qi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Qi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new iS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Pd(r.x-this.wrap,r.y))}}function Ed(s,r,o,h,g){(s*=2)<0&&(s=-1*s-1);const v=1<<o;return(v*v*s+v*g+h).toString(36)+o.toString(36)+r.toString(36)}lt("CanonicalTileID",ev),lt("OverscaledTileID",Qi,{omit:["posMatrix"]});class sS{constructor(r,o,h,g=1,v=1,x=1,b=0){if(this.uid=r,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Fe(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const T=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=v,this.blueFactor=x,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let E=0;E<T;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,E)],this.data[this._idx(T,E)]=this.data[this._idx(T-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,T)]=this.data[this._idx(E,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let E=0;E<T;E++)for(let z=0;z<T;z++){const R=this.get(E,z);R>this.max&&(this.max=R),R<this.min&&(this.min=R)}}get(r,o){const h=new Uint8Array(this.data.buffer),g=4*this._idx(r,o);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,o){if(r<-1||r>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(r+1)}unpack(r,o,h){return r*this.redFactor+o*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ji({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,o,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let g=o*this.dim,v=o*this.dim+this.dim,x=h*this.dim,b=h*this.dim+this.dim;switch(o){case-1:g=v-1;break;case 1:v=g+1}switch(h){case-1:x=b-1;break;case 1:b=x+1}const T=-o*this.dim,E=-h*this.dim;for(let z=x;z<b;z++)for(let R=g;R<v;R++)this.data[this._idx(R,z)]=r.data[this._idx(R+T,z+E)]}}lt("DEMData",sS);class oS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let o=0;o<r.length;o++){const h=r[o];this._stringToNumber[h]=o,this._numberToString[o]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class aS{constructor(r,o,h,g,v){this.type="Feature",this._vectorTileFeature=r,r._z=o,r._x=h,r._y=g,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(r[o]=this[o]);return r}}class lS{constructor(r,o){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new wa(qn,16,0),this.grid3D=new wa(qn,16,0),this.featureIndexArray=new Or,this.promoteId=o}insert(r,o,h,g,v,x){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,v);const T=x?this.grid3D:this.grid;for(let E=0;E<o.length;E++){const z=o[E],R=[1/0,1/0,-1/0,-1/0];for(let O=0;O<z.length;O++){const N=z[O];R[0]=Math.min(R[0],N.x),R[1]=Math.min(R[1],N.y),R[2]=Math.max(R[2],N.x),R[3]=Math.max(R[3],N.y)}R[0]<qn&&R[1]<qn&&R[2]>=0&&R[3]>=0&&T.insert(b,R[0],R[1],R[2],R[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Da.VectorTile(new $_(this.rawTileData)).layers,this.sourceLayerCoder=new oS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,o,h,g){this.loadVTLayers();const v=r.params||{},x=qn/r.tileSize/r.scale,b=Hh(v.filter),T=r.queryGeometry,E=r.queryPadding*x,z=cS(T),R=this.grid.query(z.minX-E,z.minY-E,z.maxX+E,z.maxY+E),O=cS(r.cameraQueryGeometry),N=this.grid3D.query(O.minX-E,O.minY-E,O.maxX+E,O.maxY+E,(ie,le,Se,ge)=>function(be,Ee,je,rt,_t){for(const Qe of be)if(Ee<=Qe.x&&je<=Qe.y&&rt>=Qe.x&&_t>=Qe.y)return!0;const tt=[new A(Ee,je),new A(Ee,_t),new A(rt,_t),new A(rt,je)];if(be.length>2){for(const Qe of tt)if(sc(be,Qe))return!0}for(let Qe=0;Qe<be.length-1;Qe++)if(hA(be[Qe],be[Qe+1],tt))return!0;return!1}(r.cameraQueryGeometry,ie-E,le-E,Se+E,ge+E));for(const ie of N)R.push(ie);R.sort(zz);const q={};let Z;for(let ie=0;ie<R.length;ie++){const le=R[ie];if(le===Z)continue;Z=le;const Se=this.featureIndexArray.get(le);let ge=null;this.loadMatchingFeature(q,Se.bucketIndex,Se.sourceLayerIndex,Se.featureIndex,b,v.layers,v.availableImages,o,h,g,(be,Ee,je)=>(ge||(ge=Ll(be)),Ee.queryIntersectsFeature(T,be,je,ge,this.z,r.transform,x,r.pixelPosMatrix)))}return q}loadMatchingFeature(r,o,h,g,v,x,b,T,E,z,R){const O=this.bucketLayerIDs[o];if(x&&!function(ie,le){for(let Se=0;Se<ie.length;Se++)if(le.indexOf(ie[Se])>=0)return!0;return!1}(x,O))return;const N=this.sourceLayerCoder.decode(h),q=this.vtLayers[N].feature(g);if(v.needGeometry){const ie=Fl(q,!0);if(!v.filter(new fn(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!v.filter(new fn(this.tileID.overscaledZ),q))return;const Z=this.getId(q,N);for(let ie=0;ie<O.length;ie++){const le=O[ie];if(x&&x.indexOf(le)<0)continue;const Se=T[le];if(!Se)continue;let ge={};Z&&z&&(ge=z.getState(Se.sourceLayer||"_geojsonTileLayer",Z));const be=ye({},E[le]);be.paint=uS(be.paint,Se.paint,q,ge,b),be.layout=uS(be.layout,Se.layout,q,ge,b);const Ee=!R||R(q,Se,ge);if(!Ee)continue;const je=new aS(q,this.z,this.x,this.y,Z);je.layer=be;let rt=r[le];rt===void 0&&(rt=r[le]=[]),rt.push({featureIndex:g,feature:je,intersectionZ:Ee})}}lookupSymbolFeatures(r,o,h,g,v,x,b,T){const E={};this.loadVTLayers();const z=Hh(v);for(const R of r)this.loadMatchingFeature(E,h,g,R,z,x,b,T,o);return E}hasLayer(r){for(const o of this.bucketLayerIDs)for(const h of o)if(r===h)return!0;return!1}getId(r,o){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof h=="boolean"&&(h=Number(h))),h}}function uS(s,r,o,h,g){return Me(s,(v,x)=>{const b=r instanceof Al?r.get(x):null;return b&&b.evaluate?b.evaluate(o,h,g):b})}function cS(s){let r=1/0,o=1/0,h=-1/0,g=-1/0;for(const v of s)r=Math.min(r,v.x),o=Math.min(o,v.y),h=Math.max(h,v.x),g=Math.max(g,v.y);return{minX:r,minY:o,maxX:h,maxY:g}}function zz(s,r){return r-s}function hS(s,r,o,h,g){const v=[];for(let x=0;x<s.length;x++){const b=s[x];let T;for(let E=0;E<b.length-1;E++){let z=b[E],R=b[E+1];z.x<r&&R.x<r||(z.x<r?z=new A(r,z.y+(r-z.x)/(R.x-z.x)*(R.y-z.y))._round():R.x<r&&(R=new A(r,z.y+(r-z.x)/(R.x-z.x)*(R.y-z.y))._round()),z.y<o&&R.y<o||(z.y<o?z=new A(z.x+(o-z.y)/(R.y-z.y)*(R.x-z.x),o)._round():R.y<o&&(R=new A(z.x+(o-z.y)/(R.y-z.y)*(R.x-z.x),o)._round()),z.x>=h&&R.x>=h||(z.x>=h?z=new A(h,z.y+(h-z.x)/(R.x-z.x)*(R.y-z.y))._round():R.x>=h&&(R=new A(h,z.y+(h-z.x)/(R.x-z.x)*(R.y-z.y))._round()),z.y>=g&&R.y>=g||(z.y>=g?z=new A(z.x+(g-z.y)/(R.y-z.y)*(R.x-z.x),g)._round():R.y>=g&&(R=new A(z.x+(g-z.y)/(R.y-z.y)*(R.x-z.x),g)._round()),T&&z.equals(T[T.length-1])||(T=[z],v.push(T)),T.push(R)))))}}return v}lt("FeatureIndex",lS,{omit:["rawTileData","sourceLayerCoder"]});class Oa extends A{constructor(r,o,h,g){super(r,o),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new Oa(this.x,this.y,this.angle,this.segment)}}function dS(s,r,o,h,g){if(r.segment===void 0||o===0)return!0;let v=r,x=r.segment+1,b=0;for(;b>-o/2;){if(x--,x<0)return!1;b-=s[x].dist(v),v=s[x]}b+=s[x].dist(s[x+1]),x++;const T=[];let E=0;for(;b<o/2;){const z=s[x],R=s[x+1];if(!R)return!1;let O=s[x-1].angleTo(z)-z.angleTo(R);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:b,angleDelta:O}),E+=O;b-T[0].distance>h;)E-=T.shift().angleDelta;if(E>g)return!1;x++,b+=z.dist(R)}return!0}function fS(s){let r=0;for(let o=0;o<s.length-1;o++)r+=s[o].dist(s[o+1]);return r}function pS(s,r,o){return s?.6*r*o:0}function mS(s,r){return Math.max(s?s.right-s.left:0,r?r.right-r.left:0)}function Dz(s,r,o,h,g,v){const x=pS(o,g,v),b=mS(o,h)*v;let T=0;const E=fS(s)/2;for(let z=0;z<s.length-1;z++){const R=s[z],O=s[z+1],N=R.dist(O);if(T+N>E){const q=(E-T)/N,Z=Zr.number(R.x,O.x,q),ie=Zr.number(R.y,O.y,q),le=new Oa(Z,ie,O.angleTo(R),z);return le._round(),!x||dS(s,le,b,x,r)?le:void 0}T+=N}}function Rz(s,r,o,h,g,v,x,b,T){const E=pS(h,v,x),z=mS(h,g),R=z*x,O=s[0].x===0||s[0].x===T||s[0].y===0||s[0].y===T;return r-R<r/4&&(r=R+r/4),gS(s,O?r/2*b%r:(z/2+2*v)*x*b%r,r,E,o,R,O,!1,T)}function gS(s,r,o,h,g,v,x,b,T){const E=v/2,z=fS(s);let R=0,O=r-o,N=[];for(let q=0;q<s.length-1;q++){const Z=s[q],ie=s[q+1],le=Z.dist(ie),Se=ie.angleTo(Z);for(;O+o<R+le;){O+=o;const ge=(O-R)/le,be=Zr.number(Z.x,ie.x,ge),Ee=Zr.number(Z.y,ie.y,ge);if(be>=0&&be<T&&Ee>=0&&Ee<T&&O-E>=0&&O+E<=z){const je=new Oa(be,Ee,Se,q);je._round(),h&&!dS(s,je,v,h,g)||N.push(je)}}R+=le}return b||N.length||x||(N=gS(s,R/2,o,h,g,v,x,!0,T)),N}lt("Anchor",Oa);const fc=gi;function yS(s,r,o,h){const g=[],v=s.image,x=v.pixelRatio,b=v.paddedRect.w-2*fc,T=v.paddedRect.h-2*fc;let E={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const z=v.stretchX||[[0,b]],R=v.stretchY||[[0,T]],O=(De,pt)=>De+pt[1]-pt[0],N=z.reduce(O,0),q=R.reduce(O,0),Z=b-N,ie=T-q;let le=0,Se=N,ge=0,be=q,Ee=0,je=Z,rt=0,_t=ie;if(v.content&&h){const De=v.content,pt=De[2]-De[0],dt=De[3]-De[1];(v.textFitWidth||v.textFitHeight)&&(E=Ww(s)),le=lm(z,0,De[0]),ge=lm(R,0,De[1]),Se=lm(z,De[0],De[2]),be=lm(R,De[1],De[3]),Ee=De[0]-le,rt=De[1]-ge,je=pt-Se,_t=dt-be}const tt=E.x1,Qe=E.y1,ft=E.x2-tt,ut=E.y2-Qe,ot=(De,pt,dt,kt)=>{const sn=um(De.stretch-le,Se,ft,tt),tn=cm(De.fixed-Ee,je,De.stretch,N),sr=um(pt.stretch-ge,be,ut,Qe),bs=cm(pt.fixed-rt,_t,pt.stretch,q),Cr=um(dt.stretch-le,Se,ft,tt),or=cm(dt.fixed-Ee,je,dt.stretch,N),Jr=um(kt.stretch-ge,be,ut,Qe),Qr=cm(kt.fixed-rt,_t,kt.stretch,q),ei=new A(sn,sr),Mn=new A(Cr,sr),ar=new A(Cr,Jr),Vr=new A(sn,Jr),kr=new A(tn/x,bs/x),ti=new A(or/x,Qr/x),Pr=r*Math.PI/180;if(Pr){const Wt=Math.sin(Pr),an=Math.cos(Pr),yn=[an,-Wt,Wt,an];ei._matMult(yn),Mn._matMult(yn),Vr._matMult(yn),ar._matMult(yn)}const es=De.stretch+De.fixed,yi=pt.stretch+pt.fixed;return{tl:ei,tr:Mn,bl:Vr,br:ar,tex:{x:v.paddedRect.x+fc+es,y:v.paddedRect.y+fc+yi,w:dt.stretch+dt.fixed-es,h:kt.stretch+kt.fixed-yi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:kr,pixelOffsetBR:ti,minFontScaleX:je/x/ft,minFontScaleY:_t/x/ut,isSDF:o}};if(h&&(v.stretchX||v.stretchY)){const De=_S(z,Z,N),pt=_S(R,ie,q);for(let dt=0;dt<De.length-1;dt++){const kt=De[dt],sn=De[dt+1];for(let tn=0;tn<pt.length-1;tn++)g.push(ot(kt,pt[tn],sn,pt[tn+1]))}}else g.push(ot({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:T+1}));return g}function lm(s,r,o){let h=0;for(const g of s)h+=Math.max(r,Math.min(o,g[1]))-Math.max(r,Math.min(o,g[0]));return h}function _S(s,r,o){const h=[{fixed:-fc,stretch:0}];for(const[g,v]of s){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(v-g)})}return h.push({fixed:r+fc,stretch:o}),h}function um(s,r,o,h){return s/r*o+h}function cm(s,r,o,h){return s-r*o/h}class hm{constructor(r,o,h,g,v,x,b,T,E,z){var R;if(this.boxStartIndex=r.length,E){let O=x.top,N=x.bottom;const q=x.collisionPadding;q&&(O-=q[1],N+=q[3]);let Z=N-O;Z>0&&(Z=Math.max(10,Z),this.circleDiameter=Z)}else{const O=!((R=x.image)===null||R===void 0)&&R.content&&(x.image.textFitWidth||x.image.textFitHeight)?Ww(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};O.y1=O.y1*b-T[0],O.y2=O.y2*b+T[2],O.x1=O.x1*b-T[3],O.x2=O.x2*b+T[1];const N=x.collisionPadding;if(N&&(O.x1-=N[0]*b,O.y1-=N[1]*b,O.x2+=N[2]*b,O.y2+=N[3]*b),z){const q=new A(O.x1,O.y1),Z=new A(O.x2,O.y1),ie=new A(O.x1,O.y2),le=new A(O.x2,O.y2),Se=z*Math.PI/180;q._rotate(Se),Z._rotate(Se),ie._rotate(Se),le._rotate(Se),O.x1=Math.min(q.x,Z.x,ie.x,le.x),O.x2=Math.max(q.x,Z.x,ie.x,le.x),O.y1=Math.min(q.y,Z.y,ie.y,le.y),O.y2=Math.max(q.y,Z.y,ie.y,le.y)}r.emplaceBack(o.x,o.y,O.x1,O.y1,O.x2,O.y2,h,g,v)}this.boxEndIndex=r.length}}class Lz{constructor(r=[],o=(h,g)=>h<g?-1:h>g?1:0){if(this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:o,compare:h}=this,g=o[r];for(;r>0;){const v=r-1>>1,x=o[v];if(h(g,x)>=0)break;o[r]=x,r=v}o[r]=g}_down(r){const{data:o,compare:h}=this,g=this.length>>1,v=o[r];for(;r<g;){let x=1+(r<<1);const b=x+1;if(b<this.length&&h(o[b],o[x])<0&&(x=b),h(o[x],v)>=0)break;o[r]=o[x],r=x}o[r]=v}}function Fz(s,r=1,o=!1){let h=1/0,g=1/0,v=-1/0,x=-1/0;const b=s[0];for(let N=0;N<b.length;N++){const q=b[N];(!N||q.x<h)&&(h=q.x),(!N||q.y<g)&&(g=q.y),(!N||q.x>v)&&(v=q.x),(!N||q.y>x)&&(x=q.y)}const T=Math.min(v-h,x-g);let E=T/2;const z=new Lz([],Oz);if(T===0)return new A(h,g);for(let N=h;N<v;N+=T)for(let q=g;q<x;q+=T)z.push(new pc(N+E,q+E,E,s));let R=function(N){let q=0,Z=0,ie=0;const le=N[0];for(let Se=0,ge=le.length,be=ge-1;Se<ge;be=Se++){const Ee=le[Se],je=le[be],rt=Ee.x*je.y-je.x*Ee.y;Z+=(Ee.x+je.x)*rt,ie+=(Ee.y+je.y)*rt,q+=3*rt}return new pc(Z/q,ie/q,0,N)}(s),O=z.length;for(;z.length;){const N=z.pop();(N.d>R.d||!R.d)&&(R=N,o&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,O)),N.max-R.d<=r||(E=N.h/2,z.push(new pc(N.p.x-E,N.p.y-E,E,s)),z.push(new pc(N.p.x+E,N.p.y-E,E,s)),z.push(new pc(N.p.x-E,N.p.y+E,E,s)),z.push(new pc(N.p.x+E,N.p.y+E,E,s)),O+=4)}return o&&(console.log(`num probes: ${O}`),console.log(`best distance: ${R.d}`)),R.p}function Oz(s,r){return r.max-s.max}function pc(s,r,o,h){this.p=new A(s,r),this.h=o,this.d=function(g,v){let x=!1,b=1/0;for(let T=0;T<v.length;T++){const E=v[T];for(let z=0,R=E.length,O=R-1;z<R;O=z++){const N=E[z],q=E[O];N.y>g.y!=q.y>g.y&&g.x<(q.x-N.x)*(g.y-N.y)/(q.y-N.y)+N.x&&(x=!x),b=Math.min(b,tw(g,N,q))}}return(x?1:-1)*Math.sqrt(b)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Tr;f.aq=void 0,(Tr=f.aq||(f.aq={}))[Tr.center=1]="center",Tr[Tr.left=2]="left",Tr[Tr.right=3]="right",Tr[Tr.top=4]="top",Tr[Tr.bottom=5]="bottom",Tr[Tr["top-left"]=6]="top-left",Tr[Tr["top-right"]=7]="top-right",Tr[Tr["bottom-left"]=8]="bottom-left",Tr[Tr["bottom-right"]=9]="bottom-right";const Ba=7,tv=Number.POSITIVE_INFINITY;function vS(s,r){return r[1]!==tv?function(o,h,g){let v=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),o){case"top-right":case"top-left":case"top":x=g-Ba;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+Ba}switch(o){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(s,r[0],r[1]):function(o,h){let g=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(o){case"top-right":case"top-left":v=x-Ba;break;case"bottom-right":case"bottom-left":v=-x+Ba;break;case"bottom":v=-h+Ba;break;case"top":v=h-Ba}switch(o){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,v]}(s,r[0])}function xS(s,r,o){var h;const g=s.layout,v=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},o);if(v){const b=v.values,T=[];for(let E=0;E<b.length;E+=2){const z=T[E]=b[E],R=b[E+1].map(O=>O*Jn);z.startsWith("top")?R[1]-=Ba:z.startsWith("bottom")&&(R[1]+=Ba),T[E+1]=R}return new Pi(T)}const x=g.get("text-variable-anchor");if(x){let b;b=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(r,{},o)*Jn,tv]:g.get("text-offset").evaluate(r,{},o).map(E=>E*Jn);const T=[];for(const E of x)T.push(E,vS(E,b));return new Pi(T)}return null}function nv(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Bz(s,r,o,h,g,v,x,b,T,E,z){let R=v.textMaxSize.evaluate(r,{});R===void 0&&(R=x);const O=s.layers[0].layout,N=O.get("icon-offset").evaluate(r,{},z),q=wS(o.horizontal),Z=x/24,ie=s.tilePixelRatio*Z,le=s.tilePixelRatio*R/24,Se=s.tilePixelRatio*b,ge=s.tilePixelRatio*O.get("symbol-spacing"),be=O.get("text-padding")*s.tilePixelRatio,Ee=function(De,pt,dt,kt=1){const sn=De.get("icon-padding").evaluate(pt,{},dt),tn=sn&&sn.values;return[tn[0]*kt,tn[1]*kt,tn[2]*kt,tn[3]*kt]}(O,r,z,s.tilePixelRatio),je=O.get("text-max-angle")/180*Math.PI,rt=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point",_t=O.get("icon-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",tt=O.get("symbol-placement"),Qe=ge/2,ft=O.get("icon-text-fit");let ut;h&&ft!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(ut=qw(h,o.vertical,ft,O.get("icon-text-fit-padding"),N,Z)),q&&(h=qw(h,q,ft,O.get("icon-text-fit-padding"),N,Z)));const ot=(De,pt)=>{pt.x<0||pt.x>=qn||pt.y<0||pt.y>=qn||function(dt,kt,sn,tn,sr,bs,Cr,or,Jr,Qr,ei,Mn,ar,Vr,kr,ti,Pr,es,yi,Wt,an,yn,Ri,Tn,mc){const ro=dt.addToLineVertexArray(kt,sn);let io,ws,ts,mr,Bo=0,Ad=0,kS=0,PS=0,cv=-1,hv=-1;const Vo={};let ES=tc("");if(dt.allowVerticalPlacement&&tn.vertical){const Nr=or.layout.get("text-rotate").evaluate(an,{},Tn)+90;ts=new hm(Jr,kt,Qr,ei,Mn,tn.vertical,ar,Vr,kr,Nr),Cr&&(mr=new hm(Jr,kt,Qr,ei,Mn,Cr,Pr,es,kr,Nr))}if(sr){const Nr=or.layout.get("icon-rotate").evaluate(an,{}),ns=or.layout.get("icon-text-fit")!=="none",Bl=yS(sr,Nr,Ri,ns),Us=Cr?yS(Cr,Nr,Ri,ns):void 0;ws=new hm(Jr,kt,Qr,ei,Mn,sr,Pr,es,!1,Nr),Bo=4*Bl.length;const Vl=dt.iconSizeData;let so=null;Vl.kind==="source"?(so=[no*or.layout.get("icon-size").evaluate(an,{})],so[0]>La&&Fe(`${dt.layerIds[0]}: Value for "icon-size" is >= ${kd}. Reduce your "icon-size".`)):Vl.kind==="composite"&&(so=[no*yn.compositeIconSizes[0].evaluate(an,{},Tn),no*yn.compositeIconSizes[1].evaluate(an,{},Tn)],(so[0]>La||so[1]>La)&&Fe(`${dt.layerIds[0]}: Value for "icon-size" is >= ${kd}. Reduce your "icon-size".`)),dt.addSymbols(dt.icon,Bl,so,Wt,yi,an,f.ah.none,kt,ro.lineStartIndex,ro.lineLength,-1,Tn),cv=dt.icon.placedSymbolArray.length-1,Us&&(Ad=4*Us.length,dt.addSymbols(dt.icon,Us,so,Wt,yi,an,f.ah.vertical,kt,ro.lineStartIndex,ro.lineLength,-1,Tn),hv=dt.icon.placedSymbolArray.length-1)}const IS=Object.keys(tn.horizontal);for(const Nr of IS){const ns=tn.horizontal[Nr];if(!io){ES=tc(ns.text);const Us=or.layout.get("text-rotate").evaluate(an,{},Tn);io=new hm(Jr,kt,Qr,ei,Mn,ns,ar,Vr,kr,Us)}const Bl=ns.positionedLines.length===1;if(kS+=bS(dt,kt,ns,bs,or,kr,an,ti,ro,tn.vertical?f.ah.horizontal:f.ah.horizontalOnly,Bl?IS:[Nr],Vo,cv,yn,Tn),Bl)break}tn.vertical&&(PS+=bS(dt,kt,tn.vertical,bs,or,kr,an,ti,ro,f.ah.vertical,["vertical"],Vo,hv,yn,Tn));const jz=io?io.boxStartIndex:dt.collisionBoxArray.length,$z=io?io.boxEndIndex:dt.collisionBoxArray.length,Uz=ts?ts.boxStartIndex:dt.collisionBoxArray.length,Wz=ts?ts.boxEndIndex:dt.collisionBoxArray.length,qz=ws?ws.boxStartIndex:dt.collisionBoxArray.length,Gz=ws?ws.boxEndIndex:dt.collisionBoxArray.length,Hz=mr?mr.boxStartIndex:dt.collisionBoxArray.length,Zz=mr?mr.boxEndIndex:dt.collisionBoxArray.length;let $s=-1;const fm=(Nr,ns)=>Nr&&Nr.circleDiameter?Math.max(Nr.circleDiameter,ns):ns;$s=fm(io,$s),$s=fm(ts,$s),$s=fm(ws,$s),$s=fm(mr,$s);const MS=$s>-1?1:0;MS&&($s*=mc/Jn),dt.glyphOffsetArray.length>=dc.MAX_GLYPHS&&Fe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),an.sortKey!==void 0&&dt.addToSortKeyRanges(dt.symbolInstances.length,an.sortKey);const Xz=xS(or,an,Tn),[Kz,Yz]=function(Nr,ns){const Bl=Nr.length,Us=ns==null?void 0:ns.values;if((Us==null?void 0:Us.length)>0)for(let Vl=0;Vl<Us.length;Vl+=2){const so=Us[Vl+1];Nr.emplaceBack(f.aq[Us[Vl]],so[0],so[1])}return[Bl,Nr.length]}(dt.textAnchorOffsets,Xz);dt.symbolInstances.emplaceBack(kt.x,kt.y,Vo.right>=0?Vo.right:-1,Vo.center>=0?Vo.center:-1,Vo.left>=0?Vo.left:-1,Vo.vertical||-1,cv,hv,ES,jz,$z,Uz,Wz,qz,Gz,Hz,Zz,Qr,kS,PS,Bo,Ad,MS,0,ar,$s,Kz,Yz)}(s,pt,De,o,h,g,ut,s.layers[0],s.collisionBoxArray,r.index,r.sourceLayerIndex,s.index,ie,[be,be,be,be],rt,T,Se,Ee,_t,N,r,v,E,z,x)};if(tt==="line")for(const De of hS(r.geometry,0,0,qn,qn)){const pt=Rz(De,ge,je,o.vertical||q,h,24,le,s.overscaling,qn);for(const dt of pt)q&&Vz(s,q.text,Qe,dt)||ot(De,dt)}else if(tt==="line-center"){for(const De of r.geometry)if(De.length>1){const pt=Dz(De,je,o.vertical||q,h,24,le);pt&&ot(De,pt)}}else if(r.type==="Polygon")for(const De of Au(r.geometry,0)){const pt=Fz(De,16);ot(De[0],new Oa(pt.x,pt.y,0))}else if(r.type==="LineString")for(const De of r.geometry)ot(De,new Oa(De[0].x,De[0].y,0));else if(r.type==="Point")for(const De of r.geometry)for(const pt of De)ot([pt],new Oa(pt.x,pt.y,0))}function bS(s,r,o,h,g,v,x,b,T,E,z,R,O,N,q){const Z=function(Se,ge,be,Ee,je,rt,_t,tt){const Qe=Ee.layout.get("text-rotate").evaluate(rt,{})*Math.PI/180,ft=[];for(const ut of ge.positionedLines)for(const ot of ut.positionedGlyphs){if(!ot.rect)continue;const De=ot.rect||{};let pt=Ow+1,dt=!0,kt=1,sn=0;const tn=(je||tt)&&ot.vertical,sr=ot.metrics.advance*ot.scale/2;if(tt&&ge.verticalizable&&(sn=ut.lineOffset/2-(ot.imageName?-(Jn-ot.metrics.width*ot.scale)/2:(ot.scale-1)*Jn)),ot.imageName){const Wt=_t[ot.imageName];dt=Wt.sdf,kt=Wt.pixelRatio,pt=gi/kt}const bs=je?[ot.x+sr,ot.y]:[0,0];let Cr=je?[0,0]:[ot.x+sr+be[0],ot.y+be[1]-sn],or=[0,0];tn&&(or=Cr,Cr=[0,0]);const Jr=ot.metrics.isDoubleResolution?2:1,Qr=(ot.metrics.left-pt)*ot.scale-sr+Cr[0],ei=(-ot.metrics.top-pt)*ot.scale+Cr[1],Mn=Qr+De.w/Jr*ot.scale/kt,ar=ei+De.h/Jr*ot.scale/kt,Vr=new A(Qr,ei),kr=new A(Mn,ei),ti=new A(Qr,ar),Pr=new A(Mn,ar);if(tn){const Wt=new A(-sr,sr-Td),an=-Math.PI/2,yn=Jn/2-sr,Ri=new A(5-Td-yn,-(ot.imageName?yn:0)),Tn=new A(...or);Vr._rotateAround(an,Wt)._add(Ri)._add(Tn),kr._rotateAround(an,Wt)._add(Ri)._add(Tn),ti._rotateAround(an,Wt)._add(Ri)._add(Tn),Pr._rotateAround(an,Wt)._add(Ri)._add(Tn)}if(Qe){const Wt=Math.sin(Qe),an=Math.cos(Qe),yn=[an,-Wt,Wt,an];Vr._matMult(yn),kr._matMult(yn),ti._matMult(yn),Pr._matMult(yn)}const es=new A(0,0),yi=new A(0,0);ft.push({tl:Vr,tr:kr,bl:ti,br:Pr,tex:De,writingMode:ge.writingMode,glyphOffset:bs,sectionIndex:ot.sectionIndex,isSDF:dt,pixelOffsetTL:es,pixelOffsetBR:yi,minFontScaleX:0,minFontScaleY:0})}return ft}(0,o,b,g,v,x,h,s.allowVerticalPlacement),ie=s.textSizeData;let le=null;ie.kind==="source"?(le=[no*g.layout.get("text-size").evaluate(x,{})],le[0]>La&&Fe(`${s.layerIds[0]}: Value for "text-size" is >= ${kd}. Reduce your "text-size".`)):ie.kind==="composite"&&(le=[no*N.compositeTextSizes[0].evaluate(x,{},q),no*N.compositeTextSizes[1].evaluate(x,{},q)],(le[0]>La||le[1]>La)&&Fe(`${s.layerIds[0]}: Value for "text-size" is >= ${kd}. Reduce your "text-size".`)),s.addSymbols(s.text,Z,le,b,v,x,E,r,T.lineStartIndex,T.lineLength,O,q);for(const Se of z)R[Se]=s.text.placedSymbolArray.length-1;return 4*Z.length}function wS(s){for(const r in s)return s[r];return null}function Vz(s,r,o,h){const g=s.compareText;if(r in g){const v=g[r];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<o)return!0}else g[r]=[];return g[r].push(h),!1}const SS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class rv{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,h]=new Uint8Array(r,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const v=SS[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[b]=new Uint32Array(r,4,1);return new rv(b,x,v,r)}constructor(r,o=64,h=Float64Array,g){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const v=SS.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,b=r*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-b%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+T,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+b+T),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+T,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=r)}add(r,o){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=o,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return iv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,o,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:b}=this,T=[0,v.length-1,0],E=[];for(;T.length;){const z=T.pop()||0,R=T.pop()||0,O=T.pop()||0;if(R-O<=b){for(let ie=O;ie<=R;ie++){const le=x[2*ie],Se=x[2*ie+1];le>=r&&le<=h&&Se>=o&&Se<=g&&E.push(v[ie])}continue}const N=O+R>>1,q=x[2*N],Z=x[2*N+1];q>=r&&q<=h&&Z>=o&&Z<=g&&E.push(v[N]),(z===0?r<=q:o<=Z)&&(T.push(O),T.push(N-1),T.push(1-z)),(z===0?h>=q:g>=Z)&&(T.push(N+1),T.push(R),T.push(1-z))}return E}within(r,o,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:v,nodeSize:x}=this,b=[0,g.length-1,0],T=[],E=h*h;for(;b.length;){const z=b.pop()||0,R=b.pop()||0,O=b.pop()||0;if(R-O<=x){for(let ie=O;ie<=R;ie++)CS(v[2*ie],v[2*ie+1],r,o)<=E&&T.push(g[ie]);continue}const N=O+R>>1,q=v[2*N],Z=v[2*N+1];CS(q,Z,r,o)<=E&&T.push(g[N]),(z===0?r-h<=q:o-h<=Z)&&(b.push(O),b.push(N-1),b.push(1-z)),(z===0?r+h>=q:o+h>=Z)&&(b.push(N+1),b.push(R),b.push(1-z))}return T}}function iv(s,r,o,h,g,v){if(g-h<=o)return;const x=h+g>>1;TS(s,r,x,h,g,v),iv(s,r,o,h,x-1,1-v),iv(s,r,o,x+1,g,1-v)}function TS(s,r,o,h,g,v){for(;g>h;){if(g-h>600){const E=g-h+1,z=o-h+1,R=Math.log(E),O=.5*Math.exp(2*R/3),N=.5*Math.sqrt(R*O*(E-O)/E)*(z-E/2<0?-1:1);TS(s,r,o,Math.max(h,Math.floor(o-z*O/E+N)),Math.min(g,Math.floor(o+(E-z)*O/E+N)),v)}const x=r[2*o+v];let b=h,T=g;for(Id(s,r,h,o),r[2*g+v]>x&&Id(s,r,h,g);b<T;){for(Id(s,r,b,T),b++,T--;r[2*b+v]<x;)b++;for(;r[2*T+v]>x;)T--}r[2*h+v]===x?Id(s,r,h,T):(T++,Id(s,r,T,g)),T<=o&&(h=T+1),o<=T&&(g=T-1)}}function Id(s,r,o,h){sv(s,o,h),sv(r,2*o,2*h),sv(r,2*o+1,2*h+1)}function sv(s,r,o){const h=s[r];s[r]=s[o],s[o]=h}function CS(s,r,o,h){const g=s-o,v=r-h;return g*g+v*v}var ov;f.bg=void 0,(ov=f.bg||(f.bg={})).create="create",ov.load="load",ov.fullLoad="fullLoad";let dm=null,Md=[];const av=1e3/60,lv="loadTime",uv="fullLoadTime",Nz={mark(s){performance.mark(s)},frame(s){const r=s;dm!=null&&Md.push(r-dm),dm=r},clearMetrics(){dm=null,Md=[],performance.clearMeasures(lv),performance.clearMeasures(uv);for(const s in f.bg)performance.clearMarks(f.bg[s])},getPerformanceMetrics(){performance.measure(lv,f.bg.create,f.bg.load),performance.measure(uv,f.bg.create,f.bg.fullLoad);const s=performance.getEntriesByName(lv)[0].duration,r=performance.getEntriesByName(uv)[0].duration,o=Md.length,h=1/(Md.reduce((v,x)=>v+x,0)/o/1e3),g=Md.filter(v=>v>av).reduce((v,x)=>v+(x-av)/av,0);return{loadTime:s,fullLoadTime:r,fps:h,percentDroppedFrames:g/(o+g)*100,totalFrames:o}}};f.$=class extends L{},f.A=oc,f.B=y_,f.C=function(s){if(it==null){const r=s.navigator?s.navigator.userAgent:null;it=!!s.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return it},f.D=ct,f.E=Dr,f.F=class{constructor(s,r){this.target=s,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Az(()=>this.process()),this.subscription=function(o,h,g,v){return o.addEventListener(h,g,!1),{unsubscribe:()=>{o.removeEventListener(h,g,!1)}}}(this.target,"message",o=>this.receive(o)),this.globalScope=Ge(self)?s:window}registerMessageHandler(s,r){this.messageHandlers[s]=r}sendAsync(s,r){return new Promise((o,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:o,reject:h},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const b={id:g,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const v=[],x=Object.assign(Object.assign({},s),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Sa(s.data,v)});this.target.postMessage(x,{transfer:v})})}receive(s){const r=s.data,o=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[o];const h=this.abortControllers[o];return delete this.abortControllers[o],void(h&&h.abort())}if(Ge(self)||r.mustQueue)return this.tasks[o]=r,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,r)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),r=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(s,r)}processTask(s,r){return u(this,void 0,void 0,function*(){if(r.type==="<response>"){const g=this.resolveRejects[s];return delete this.resolveRejects[s],g?void(r.error?g.reject(Ta(r.error)):g.resolve(Ta(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=Ta(r.data),h=new AbortController;this.abortControllers[s]=h;try{const g=yield this.messageHandlers[r.type](r.sourceMapId,o,h);this.completeTask(s,null,g)}catch(g){this.completeTask(s,g)}})}completeTask(s,r,o){const h=[];delete this.abortControllers[s];const g={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Sa(r):null,data:Sa(o,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.G=_n,f.H=function(){var s=new oc(16);return oc!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},f.I=W_,f.J=function(s,r,o){var h,g,v,x,b,T,E,z,R,O,N,q,Z=o[0],ie=o[1],le=o[2];return r===s?(s[12]=r[0]*Z+r[4]*ie+r[8]*le+r[12],s[13]=r[1]*Z+r[5]*ie+r[9]*le+r[13],s[14]=r[2]*Z+r[6]*ie+r[10]*le+r[14],s[15]=r[3]*Z+r[7]*ie+r[11]*le+r[15]):(g=r[1],v=r[2],x=r[3],b=r[4],T=r[5],E=r[6],z=r[7],R=r[8],O=r[9],N=r[10],q=r[11],s[0]=h=r[0],s[1]=g,s[2]=v,s[3]=x,s[4]=b,s[5]=T,s[6]=E,s[7]=z,s[8]=R,s[9]=O,s[10]=N,s[11]=q,s[12]=h*Z+b*ie+R*le+r[12],s[13]=g*Z+T*ie+O*le+r[13],s[14]=v*Z+E*ie+N*le+r[14],s[15]=x*Z+z*ie+q*le+r[15]),s},f.K=function(s,r,o){var h=o[0],g=o[1],v=o[2];return s[0]=r[0]*h,s[1]=r[1]*h,s[2]=r[2]*h,s[3]=r[3]*h,s[4]=r[4]*g,s[5]=r[5]*g,s[6]=r[6]*g,s[7]=r[7]*g,s[8]=r[8]*v,s[9]=r[9]*v,s[10]=r[10]*v,s[11]=r[11]*v,s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s},f.L=sw,f.M=function(s,r){const o={};for(let h=0;h<r.length;h++){const g=r[h];g in s&&(o[g]=s[g])}return o},f.N=Fa,f.O=eS,f.P=A,f.Q=tS,f.R=Ji,f.S=Qi,f.T=Ku,f.U=j,f.V=W,f.W=$e,f.X=qn,f.Y=S,f.Z=Pd,f._=u,f.a=Zt,f.a$=function(s,r){var o=s[0],h=s[1],g=s[2],v=s[3],x=s[4],b=s[5],T=s[6],E=s[7],z=s[8],R=s[9],O=s[10],N=s[11],q=s[12],Z=s[13],ie=s[14],le=s[15],Se=r[0],ge=r[1],be=r[2],Ee=r[3],je=r[4],rt=r[5],_t=r[6],tt=r[7],Qe=r[8],ft=r[9],ut=r[10],ot=r[11],De=r[12],pt=r[13],dt=r[14],kt=r[15];return Math.abs(o-Se)<=Yr*Math.max(1,Math.abs(o),Math.abs(Se))&&Math.abs(h-ge)<=Yr*Math.max(1,Math.abs(h),Math.abs(ge))&&Math.abs(g-be)<=Yr*Math.max(1,Math.abs(g),Math.abs(be))&&Math.abs(v-Ee)<=Yr*Math.max(1,Math.abs(v),Math.abs(Ee))&&Math.abs(x-je)<=Yr*Math.max(1,Math.abs(x),Math.abs(je))&&Math.abs(b-rt)<=Yr*Math.max(1,Math.abs(b),Math.abs(rt))&&Math.abs(T-_t)<=Yr*Math.max(1,Math.abs(T),Math.abs(_t))&&Math.abs(E-tt)<=Yr*Math.max(1,Math.abs(E),Math.abs(tt))&&Math.abs(z-Qe)<=Yr*Math.max(1,Math.abs(z),Math.abs(Qe))&&Math.abs(R-ft)<=Yr*Math.max(1,Math.abs(R),Math.abs(ft))&&Math.abs(O-ut)<=Yr*Math.max(1,Math.abs(O),Math.abs(ut))&&Math.abs(N-ot)<=Yr*Math.max(1,Math.abs(N),Math.abs(ot))&&Math.abs(q-De)<=Yr*Math.max(1,Math.abs(q),Math.abs(De))&&Math.abs(Z-pt)<=Yr*Math.max(1,Math.abs(Z),Math.abs(pt))&&Math.abs(ie-dt)<=Yr*Math.max(1,Math.abs(ie),Math.abs(dt))&&Math.abs(le-kt)<=Yr*Math.max(1,Math.abs(le),Math.abs(kt))},f.a0=Bt,f.a1=ev,f.a2=Ue,f.a3=s=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(o=>{r.onloadstart=()=>{o(r)};for(const h of s){const g=window.document.createElement("source");li(h)||(r.crossOrigin="Anonymous"),g.src=h,r.appendChild(g)}})},f.a4=function(){return Ce++},f.a5=nt,f.a6=dc,f.a7=Hh,f.a8=Fl,f.a9=aS,f.aA=function(s){if(s.type==="custom")return new Mz(s);switch(s.type){case"background":return new Pz(s);case"circle":return new pA(s);case"fill":return new AA(s);case"fill-extrusion":return new GA(s);case"heatmap":return new gA(s);case"hillshade":return new _A(s);case"line":return new ez(s);case"raster":return new Iz(s);case"symbol":return new am(s)}},f.aB=Re,f.aC=function(s,r){if(!s)return[{command:"setStyle",args:[r]}];let o=[];try{if(!Dt(s.version,r.version))return[{command:"setStyle",args:[r]}];Dt(s.center,r.center)||o.push({command:"setCenter",args:[r.center]}),Dt(s.zoom,r.zoom)||o.push({command:"setZoom",args:[r.zoom]}),Dt(s.bearing,r.bearing)||o.push({command:"setBearing",args:[r.bearing]}),Dt(s.pitch,r.pitch)||o.push({command:"setPitch",args:[r.pitch]}),Dt(s.sprite,r.sprite)||o.push({command:"setSprite",args:[r.sprite]}),Dt(s.glyphs,r.glyphs)||o.push({command:"setGlyphs",args:[r.glyphs]}),Dt(s.transition,r.transition)||o.push({command:"setTransition",args:[r.transition]}),Dt(s.light,r.light)||o.push({command:"setLight",args:[r.light]}),Dt(s.terrain,r.terrain)||o.push({command:"setTerrain",args:[r.terrain]}),Dt(s.sky,r.sky)||o.push({command:"setSky",args:[r.sky]}),Dt(s.projection,r.projection)||o.push({command:"setProjection",args:[r.projection]});const h={},g=[];(function(x,b,T,E){let z;for(z in b=b||{},x=x||{})Object.prototype.hasOwnProperty.call(x,z)&&(Object.prototype.hasOwnProperty.call(b,z)||wt(z,T,E));for(z in b)Object.prototype.hasOwnProperty.call(b,z)&&(Object.prototype.hasOwnProperty.call(x,z)?Dt(x[z],b[z])||(x[z].type==="geojson"&&b[z].type==="geojson"&&Si(x,b,z)?Vt(T,{command:"setGeoJSONSourceData",args:[z,b[z].data]}):Lr(z,b,T,E)):Rr(z,b,T))})(s.sources,r.sources,g,h);const v=[];s.layers&&s.layers.forEach(x=>{"source"in x&&h[x.source]?o.push({command:"removeLayer",args:[x.id]}):v.push(x)}),o=o.concat(g),function(x,b,T){b=b||[];const E=(x=x||[]).map(ms),z=b.map(ms),R=x.reduce(Ti,{}),O=b.reduce(Ti,{}),N=E.slice(),q=Object.create(null);let Z,ie,le,Se,ge;for(let be=0,Ee=0;be<E.length;be++)Z=E[be],Object.prototype.hasOwnProperty.call(O,Z)?Ee++:(Vt(T,{command:"removeLayer",args:[Z]}),N.splice(N.indexOf(Z,Ee),1));for(let be=0,Ee=0;be<z.length;be++)Z=z[z.length-1-be],N[N.length-1-be]!==Z&&(Object.prototype.hasOwnProperty.call(R,Z)?(Vt(T,{command:"removeLayer",args:[Z]}),N.splice(N.lastIndexOf(Z,N.length-Ee),1)):Ee++,Se=N[N.length-be],Vt(T,{command:"addLayer",args:[O[Z],Se]}),N.splice(N.length-be,0,Z),q[Z]=!0);for(let be=0;be<z.length;be++)if(Z=z[be],ie=R[Z],le=O[Z],!q[Z]&&!Dt(ie,le))if(Dt(ie.source,le.source)&&Dt(ie["source-layer"],le["source-layer"])&&Dt(ie.type,le.type)){for(ge in dr(ie.layout,le.layout,T,Z,null,"setLayoutProperty"),dr(ie.paint,le.paint,T,Z,null,"setPaintProperty"),Dt(ie.filter,le.filter)||Vt(T,{command:"setFilter",args:[Z,le.filter]}),Dt(ie.minzoom,le.minzoom)&&Dt(ie.maxzoom,le.maxzoom)||Vt(T,{command:"setLayerZoomRange",args:[Z,le.minzoom,le.maxzoom]}),ie)Object.prototype.hasOwnProperty.call(ie,ge)&&ge!=="layout"&&ge!=="paint"&&ge!=="filter"&&ge!=="metadata"&&ge!=="minzoom"&&ge!=="maxzoom"&&(ge.indexOf("paint.")===0?dr(ie[ge],le[ge],T,Z,ge.slice(6),"setPaintProperty"):Dt(ie[ge],le[ge])||Vt(T,{command:"setLayerProperty",args:[Z,ge,le[ge]]}));for(ge in le)Object.prototype.hasOwnProperty.call(le,ge)&&!Object.prototype.hasOwnProperty.call(ie,ge)&&ge!=="layout"&&ge!=="paint"&&ge!=="filter"&&ge!=="metadata"&&ge!=="minzoom"&&ge!=="maxzoom"&&(ge.indexOf("paint.")===0?dr(ie[ge],le[ge],T,Z,ge.slice(6),"setPaintProperty"):Dt(ie[ge],le[ge])||Vt(T,{command:"setLayerProperty",args:[Z,ge,le[ge]]}))}else Vt(T,{command:"removeLayer",args:[Z]}),Se=N[N.lastIndexOf(Z)+1],Vt(T,{command:"addLayer",args:[le,Se]})}(v,r.layers,o)}catch(h){console.warn("Unable to compute style diff:",h),o=[{command:"setStyle",args:[r]}]}return o},f.aD=function(s){const r=[],o=s.id;return o===void 0&&r.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&r.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&r.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),r},f.aE=function s(r,o){if(Array.isArray(r)){if(!Array.isArray(o)||r.length!==o.length)return!1;for(let h=0;h<r.length;h++)if(!s(r[h],o[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&o!==null){if(typeof o!="object"||Object.keys(r).length!==Object.keys(o).length)return!1;for(const h in r)if(!s(r[h],o[h]))return!1;return!0}return r===o},f.aF=Me,f.aG=ze,f.aH=class extends Dl{constructor(s,r){super(s,r),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},f.aI=Zp,f.aJ=class extends Dl{constructor(s,r){super(s,r),this.current=oA}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let r=1;r<16;r++)if(s[r]!==this.current[r]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},f.aK=Zb,f.aL=Xb,f.aM=Kt,f.aN=class extends Dl{constructor(s,r){super(s,r),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},f.aO=class extends Dl{constructor(s,r){super(s,r),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},f.aP=function(s,r,o,h,g,v,x){var b=1/(r-o),T=1/(h-g),E=1/(v-x);return s[0]=-2*b,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*T,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*E,s[11]=0,s[12]=(r+o)*b,s[13]=(g+h)*T,s[14]=(x+v)*E,s[15]=1,s},f.aQ=fA,f.aR=class extends _e{},f.aS=iz,f.aT=class extends Te{},f.aU=z_,f.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},f.aW=cw,f.aX=wr,f.aY=Yi,f.aZ=class extends ht{},f.a_=function(s,r){return s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]&&s[3]===r[3]&&s[4]===r[4]&&s[5]===r[5]&&s[6]===r[6]&&s[7]===r[7]&&s[8]===r[8]&&s[9]===r[9]&&s[10]===r[10]&&s[11]===r[11]&&s[12]===r[12]&&s[13]===r[13]&&s[14]===r[14]&&s[15]===r[15]},f.aa=function(s){const r={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,h,g,v)=>{const x=g||v;return r[h]=!x||x.toLowerCase(),""}),r["max-age"]){const o=parseInt(r["max-age"],10);isNaN(o)?delete r["max-age"]:r["max-age"]=o}return r},f.ab=function(s,r){const o=[];for(const h in s)h in r||o.push(h);return o},f.ac=de,f.ad=function(s,r,o){var h=Math.sin(o),g=Math.cos(o),v=r[0],x=r[1],b=r[2],T=r[3],E=r[4],z=r[5],R=r[6],O=r[7];return r!==s&&(s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[0]=v*g+E*h,s[1]=x*g+z*h,s[2]=b*g+R*h,s[3]=T*g+O*h,s[4]=E*g-v*h,s[5]=z*g-x*h,s[6]=R*g-b*h,s[7]=O*g-T*h,s},f.ae=function(s){var r=new oc(16);return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],r},f.af=Jp,f.ag=function(s,r){let o=0,h=0;if(s.kind==="constant")h=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:v,maxZoom:x}=s,b=g?de(Xr.interpolationFactor(g,r,v,x),0,1):0;s.kind==="camera"?h=Zr.number(s.minSize,s.maxSize,b):o=b}return{uSizeT:o,uSize:h}},f.ai=function(s,{uSize:r,uSizeT:o},{lowerSize:h,upperSize:g}){return s.kind==="source"?h/no:s.kind==="composite"?Zr.number(h/no,g/no,o):r},f.aj=Z_,f.ak=function(s,r,o,h){const g=r.y-s.y,v=r.x-s.x,x=h.y-o.y,b=h.x-o.x,T=x*v-b*g;if(T===0)return null;const E=(b*(s.y-o.y)-x*(s.x-o.x))/T;return new A(s.x+E*v,s.y+E*g)},f.al=hS,f.am=Qb,f.an=I_,f.ao=function(s){let r=1/0,o=1/0,h=-1/0,g=-1/0;for(const v of s)r=Math.min(r,v.x),o=Math.min(o,v.y),h=Math.max(h,v.x),g=Math.max(g,v.y);return[r,o,h,g]},f.ap=Jn,f.ar=H_,f.as=function(s,r){var o=r[0],h=r[1],g=r[2],v=r[3],x=r[4],b=r[5],T=r[6],E=r[7],z=r[8],R=r[9],O=r[10],N=r[11],q=r[12],Z=r[13],ie=r[14],le=r[15],Se=o*b-h*x,ge=o*T-g*x,be=o*E-v*x,Ee=h*T-g*b,je=h*E-v*b,rt=g*E-v*T,_t=z*Z-R*q,tt=z*ie-O*q,Qe=z*le-N*q,ft=R*ie-O*Z,ut=R*le-N*Z,ot=O*le-N*ie,De=Se*ot-ge*ut+be*ft+Ee*Qe-je*tt+rt*_t;return De?(s[0]=(b*ot-T*ut+E*ft)*(De=1/De),s[1]=(g*ut-h*ot-v*ft)*De,s[2]=(Z*rt-ie*je+le*Ee)*De,s[3]=(O*je-R*rt-N*Ee)*De,s[4]=(T*Qe-x*ot-E*tt)*De,s[5]=(o*ot-g*Qe+v*tt)*De,s[6]=(ie*be-q*rt-le*ge)*De,s[7]=(z*rt-O*be+N*ge)*De,s[8]=(x*ut-b*Qe+E*_t)*De,s[9]=(h*Qe-o*ut-v*_t)*De,s[10]=(q*je-Z*be+le*Se)*De,s[11]=(R*be-z*je-N*Se)*De,s[12]=(b*tt-x*ft-T*_t)*De,s[13]=(o*ft-h*tt+g*_t)*De,s[14]=(Z*ge-q*Ee-ie*Se)*De,s[15]=(z*Ee-R*ge+O*Se)*De,s):null},f.at=nv,f.au=G_,f.av=rv,f.aw=function(){const s={},r=ke.$version;for(const o in ke.$root){const h=ke.$root[o];if(h.required){let g=null;g=o==="version"?r:h.type==="array"?[]:{},g!=null&&(s[o]=g)}}return s},f.ax=ad,f.ay=dn,f.az=function(s){s=s.slice();const r=Object.create(null);for(let o=0;o<s.length;o++)r[s[o].id]=s[o];for(let o=0;o<s.length;o++)"ref"in s[o]&&(s[o]=nr(s[o],r[s[o].ref]));return s},f.b=Je,f.b0=function(s,r){return s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[4]=r[4],s[5]=r[5],s[6]=r[6],s[7]=r[7],s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s},f.b1=function(s,r,o){return s[0]=r[0]*o[0],s[1]=r[1]*o[1],s[2]=r[2]*o[2],s[3]=r[3]*o[3],s},f.b2=function(s,r){return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]+s[3]*r[3]},f.b3=he,f.b4=iS,f.b5=nS,f.b6=function(s,r,o,h,g){var v,x=1/Math.tan(r/2);return s[0]=x/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+h)*(v=1/(h-g)),s[14]=2*g*h*v):(s[10]=-1,s[14]=-2*h),s},f.b7=function(s,r,o){var h=Math.sin(o),g=Math.cos(o),v=r[4],x=r[5],b=r[6],T=r[7],E=r[8],z=r[9],R=r[10],O=r[11];return r!==s&&(s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[4]=v*g+E*h,s[5]=x*g+z*h,s[6]=b*g+R*h,s[7]=T*g+O*h,s[8]=E*g-v*h,s[9]=z*g-x*h,s[10]=R*g-b*h,s[11]=O*g-T*h,s},f.b8=G,f.b9=ee,f.bA=Mw,f.bB=function(s){return s.message===Mt},f.bC=ya,f.bD=pi,f.ba=function(s){return s*Math.PI/180},f.bb=function(s,r){const{x:o,y:h}=Pd.fromLngLat(r);return!(s<0||s>25||h<0||h>=1||o<0||o>=1)},f.bc=function(s,r){return s[0]=r[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=r[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=r[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},f.bd=class extends D{},f.be=J_,f.bf=Nz,f.bh=Jt,f.bi=function(s,r){Zt.REGISTERED_PROTOCOLS[s]=r},f.bj=function(s){delete Zt.REGISTERED_PROTOCOLS[s]},f.bk=function(s,r){const o={};for(let g=0;g<s.length;g++){const v=r&&r[s[g].id]||Fp(s[g]);r&&(r[s[g].id]=v);let x=o[v];x||(x=o[v]=[]),x.push(s[g])}const h=[];for(const g in o)h.push(o[g]);return h},f.bl=lt,f.bm=oS,f.bn=lS,f.bo=Vw,f.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=qn/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const r=s.bucket.layers[0],o=r.layout,h=r._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new fn(s.bucket.zoom+1),s.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new fn(s.bucket.zoom+1),s.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new fn(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:E,maxZoom:z}=s.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new fn(E),s.canonical),h["text-size"].possiblyEvaluate(new fn(z),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:E,maxZoom:z}=s.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new fn(E),s.canonical),h["icon-size"].possiblyEvaluate(new fn(z),s.canonical)]}const v=o.get("text-line-height")*Jn,x=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",b=o.get("text-keep-upright"),T=o.get("text-size");for(const E of s.bucket.features){const z=o.get("text-font").evaluate(E,{},s.canonical).join(","),R=T.evaluate(E,{},s.canonical),O=g.layoutTextSize.evaluate(E,{},s.canonical),N=g.layoutIconSize.evaluate(E,{},s.canonical),q={horizontal:{},vertical:void 0},Z=E.text;let ie,le=[0,0];if(Z){const be=Z.toString(),Ee=o.get("text-letter-spacing").evaluate(E,{},s.canonical)*Jn,je=__(be)?Ee:0,rt=o.get("text-anchor").evaluate(E,{},s.canonical),_t=xS(r,E,s.canonical);if(!_t){const ut=o.get("text-radial-offset").evaluate(E,{},s.canonical);le=ut?vS(rt,[ut*Jn,tv]):o.get("text-offset").evaluate(E,{},s.canonical).map(ot=>ot*Jn)}let tt=x?"center":o.get("text-justify").evaluate(E,{},s.canonical);const Qe=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(E,{},s.canonical)*Jn:1/0,ft=()=>{s.bucket.allowVerticalPlacement&&ld(be)&&(q.vertical=im(Z,s.glyphMap,s.glyphPositions,s.imagePositions,z,Qe,v,rt,"left",je,le,f.ah.vertical,!0,O,R))};if(!x&&_t){const ut=new Set;if(tt==="auto")for(let De=0;De<_t.values.length;De+=2)ut.add(nv(_t.values[De]));else ut.add(tt);let ot=!1;for(const De of ut)if(!q.horizontal[De])if(ot)q.horizontal[De]=q.horizontal[0];else{const pt=im(Z,s.glyphMap,s.glyphPositions,s.imagePositions,z,Qe,v,"center",De,je,le,f.ah.horizontal,!1,O,R);pt&&(q.horizontal[De]=pt,ot=pt.positionedLines.length===1)}ft()}else{tt==="auto"&&(tt=nv(rt));const ut=im(Z,s.glyphMap,s.glyphPositions,s.imagePositions,z,Qe,v,rt,tt,je,le,f.ah.horizontal,!1,O,R);ut&&(q.horizontal[tt]=ut),ft(),ld(be)&&x&&b&&(q.vertical=im(Z,s.glyphMap,s.glyphPositions,s.imagePositions,z,Qe,v,rt,tt,je,le,f.ah.vertical,!1,O,R))}}let Se=!1;if(E.icon&&E.icon.name){const be=s.imageMap[E.icon.name];be&&(ie=wz(s.imagePositions[E.icon.name],o.get("icon-offset").evaluate(E,{},s.canonical),o.get("icon-anchor").evaluate(E,{},s.canonical)),Se=!!be.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Se:s.bucket.sdfIcons!==Se&&Fe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(be.pixelRatio!==s.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const ge=wS(q.horizontal)||q.vertical;s.bucket.iconsInText=!!ge&&ge.iconsInText,(ge||ie)&&Bz(s.bucket,E,q,ie,s.imageMap,g,O,N,le,Se,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},f.bq=N_,f.br=O_,f.bs=V_,f.bt=Da,f.bu=$_,f.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},f.bw=function(s,r,o,h,g){return u(this,void 0,void 0,function*(){if(W())try{return yield $e(s,r,o,h,g)}catch{}return function(v,x,b,T,E){const z=v.width,R=v.height;at&&St||(at=new OffscreenCanvas(z,R),St=at.getContext("2d",{willReadFrequently:!0})),at.width=z,at.height=R,St.drawImage(v,0,0,z,R);const O=St.getImageData(x,b,T,E);return St.clearRect(0,0,z,R),O.data}(s,r,o,h,g)})},f.bx=sS,f.by=w,f.bz=k,f.c=Nn,f.d=s=>u(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(r)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.e=ye,f.f=s=>new Promise((r,o)=>{const h=new Image;h.onload=()=>{r(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Ne})},h.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(s)],{type:"image/png"});h.src=s.byteLength?URL.createObjectURL(g):Ne}),f.g=Yt,f.h=(s,r)=>_r(ye(s,{type:"json"}),r),f.i=Ge,f.j=jn,f.k=hr,f.l=(s,r)=>_r(ye(s,{type:"arrayBuffer"}),r),f.m=_r,f.n=function(s){return new $_(s).readFields(mz,[])},f.o=yd,f.p=Bw,f.q=_,f.r=g_,f.s=li,f.t=sd,f.u=Ro,f.v=ke,f.w=Fe,f.x=function([s,r,o]){return r+=90,r*=Math.PI/180,o*=Math.PI/180,{x:s*Math.cos(r)*Math.sin(o),y:s*Math.sin(r)*Math.sin(o),z:s*Math.cos(o)}},f.y=Zr,f.z=fn}),c("worker",["./shared"],function(f){class u{constructor(V){this.keyCache={},V&&this.replace(V)}replace(V){this._layerConfigs={},this._layers={},this.update(V,[])}update(V,B){for(const J of V){this._layerConfigs[J.id]=J;const pe=this._layers[J.id]=f.aA(J);pe._featureFilter=f.a7(pe.filter),this.keyCache[J.id]&&delete this.keyCache[J.id]}for(const J of B)delete this.keyCache[J],delete this._layerConfigs[J],delete this._layers[J];this.familiesBySource={};const X=f.bk(Object.values(this._layerConfigs),this.keyCache);for(const J of X){const pe=J.map(Pe=>this._layers[Pe.id]),ve=pe[0];if(ve.visibility==="none")continue;const we=ve.source||"";let fe=this.familiesBySource[we];fe||(fe=this.familiesBySource[we]={});const Ie=ve.sourceLayer||"_geojsonTileLayer";let Ve=fe[Ie];Ve||(Ve=fe[Ie]=[]),Ve.push(pe)}}}class w{constructor(V){const B={},X=[];for(const we in V){const fe=V[we],Ie=B[we]={};for(const Ve in fe){const Pe=fe[+Ve];if(!Pe||Pe.bitmap.width===0||Pe.bitmap.height===0)continue;const Ze={x:0,y:0,w:Pe.bitmap.width+2,h:Pe.bitmap.height+2};X.push(Ze),Ie[Ve]={rect:Ze,metrics:Pe.metrics}}}const{w:J,h:pe}=f.p(X),ve=new f.o({width:J||1,height:pe||1});for(const we in V){const fe=V[we];for(const Ie in fe){const Ve=fe[+Ie];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const Pe=B[we][Ie].rect;f.o.copy(Ve.bitmap,ve,{x:0,y:0},{x:Pe.x+1,y:Pe.y+1},Ve.bitmap)}}this.image=ve,this.positions=B}}f.bl("GlyphAtlas",w);class k{constructor(V){this.tileID=new f.S(V.tileID.overscaledZ,V.tileID.wrap,V.tileID.canonical.z,V.tileID.canonical.x,V.tileID.canonical.y),this.uid=V.uid,this.zoom=V.zoom,this.pixelRatio=V.pixelRatio,this.tileSize=V.tileSize,this.source=V.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=V.showCollisionBoxes,this.collectResourceTiming=!!V.collectResourceTiming,this.returnDependencies=!!V.returnDependencies,this.promoteId=V.promoteId,this.inFlightDependencies=[]}parse(V,B,X,J){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=V,this.collisionBoxArray=new f.a5;const pe=new f.bm(Object.keys(V.layers).sort()),ve=new f.bn(this.tileID,this.promoteId);ve.bucketLayerIDs=[];const we={},fe={featureIndex:ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},Ie=B.familiesBySource[this.source];for(const zt in Ie){const Xt=V.layers[zt];if(!Xt)continue;Xt.version===1&&f.w(`Vector tile source "${this.source}" layer "${zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const vn=pe.encode(zt),ir=[];for(let fr=0;fr<Xt.length;fr++){const Fr=Xt.feature(fr),oa=ve.getId(Fr,zt);ir.push({feature:Fr,id:oa,index:fr,sourceLayerIndex:vn})}for(const fr of Ie[zt]){const Fr=fr[0];Fr.source!==this.source&&f.w(`layer.source = ${Fr.source} does not equal this.source = ${this.source}`),Fr.minzoom&&this.zoom<Math.floor(Fr.minzoom)||Fr.maxzoom&&this.zoom>=Fr.maxzoom||Fr.visibility!=="none"&&(I(fr,this.zoom,X),(we[Fr.id]=Fr.createBucket({index:ve.bucketLayerIDs.length,layers:fr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vn,sourceID:this.source})).populate(ir,fe,this.tileID.canonical),ve.bucketLayerIDs.push(fr.map(oa=>oa.id)))}}const Ve=f.aF(fe.glyphDependencies,zt=>Object.keys(zt).map(Number));this.inFlightDependencies.forEach(zt=>zt==null?void 0:zt.abort()),this.inFlightDependencies=[];let Pe=Promise.resolve({});if(Object.keys(Ve).length){const zt=new AbortController;this.inFlightDependencies.push(zt),Pe=J.sendAsync({type:"GG",data:{stacks:Ve,source:this.source,tileID:this.tileID,type:"glyphs"}},zt)}const Ze=Object.keys(fe.iconDependencies);let mt=Promise.resolve({});if(Ze.length){const zt=new AbortController;this.inFlightDependencies.push(zt),mt=J.sendAsync({type:"GI",data:{icons:Ze,source:this.source,tileID:this.tileID,type:"icons"}},zt)}const yt=Object.keys(fe.patternDependencies);let Nt=Promise.resolve({});if(yt.length){const zt=new AbortController;this.inFlightDependencies.push(zt),Nt=J.sendAsync({type:"GI",data:{icons:yt,source:this.source,tileID:this.tileID,type:"patterns"}},zt)}const[Et,jt,Lt]=yield Promise.all([Pe,mt,Nt]),Un=new w(Et),Sn=new f.bo(jt,Lt);for(const zt in we){const Xt=we[zt];Xt instanceof f.a6?(I(Xt.layers,this.zoom,X),f.bp({bucket:Xt,glyphMap:Et,glyphPositions:Un.positions,imageMap:jt,imagePositions:Sn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Xt.hasPattern&&(Xt instanceof f.bq||Xt instanceof f.br||Xt instanceof f.bs)&&(I(Xt.layers,this.zoom,X),Xt.addFeatures(fe,this.tileID.canonical,Sn.patternPositions))}return this.status="done",{buckets:Object.values(we).filter(zt=>!zt.isEmpty()),featureIndex:ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Un.image,imageAtlas:Sn,glyphMap:this.returnDependencies?Et:null,iconMap:this.returnDependencies?jt:null,glyphPositions:this.returnDependencies?Un.positions:null}})}}function I(oe,V,B){const X=new f.z(V);for(const J of oe)J.recalculate(X,B)}class A{constructor(V,B,X){this.actor=V,this.layerIndex=B,this.availableImages=X,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(V,B){return f._(this,void 0,void 0,function*(){const X=yield f.l(V.request,B);try{return{vectorTile:new f.bt.VectorTile(new f.bu(X.data)),rawData:X.data,cacheControl:X.cacheControl,expires:X.expires}}catch(J){const pe=new Uint8Array(X.data);let ve=`Unable to parse the tile at ${V.request.url}, `;throw ve+=pe[0]===31&&pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${J.message}`,new Error(ve)}})}loadTile(V){return f._(this,void 0,void 0,function*(){const B=V.uid,X=!!(V&&V.request&&V.request.collectResourceTiming)&&new f.bv(V.request),J=new k(V);this.loading[B]=J;const pe=new AbortController;J.abort=pe;try{const ve=yield this.loadVectorTile(V,pe);if(delete this.loading[B],!ve)return null;const we=ve.rawData,fe={};ve.expires&&(fe.expires=ve.expires),ve.cacheControl&&(fe.cacheControl=ve.cacheControl);const Ie={};if(X){const Pe=X.finish();Pe&&(Ie.resourceTiming=JSON.parse(JSON.stringify(Pe)))}J.vectorTile=ve.vectorTile;const Ve=J.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[B]=J,this.fetching[B]={rawTileData:we,cacheControl:fe,resourceTiming:Ie};try{const Pe=yield Ve;return f.e({rawTileData:we.slice(0)},Pe,fe,Ie)}finally{delete this.fetching[B]}}catch(ve){throw delete this.loading[B],J.status="done",this.loaded[B]=J,ve}})}reloadTile(V){return f._(this,void 0,void 0,function*(){const B=V.uid;if(!this.loaded||!this.loaded[B])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const X=this.loaded[B];if(X.showCollisionBoxes=V.showCollisionBoxes,X.status==="parsing"){const J=yield X.parse(X.vectorTile,this.layerIndex,this.availableImages,this.actor);let pe;if(this.fetching[B]){const{rawTileData:ve,cacheControl:we,resourceTiming:fe}=this.fetching[B];delete this.fetching[B],pe=f.e({rawTileData:ve.slice(0)},J,we,fe)}else pe=J;return pe}if(X.status==="done"&&X.vectorTile)return X.parse(X.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(V){return f._(this,void 0,void 0,function*(){const B=this.loading,X=V.uid;B&&B[X]&&B[X].abort&&(B[X].abort.abort(),delete B[X])})}removeTile(V){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[V.uid]&&delete this.loaded[V.uid]})}}class M{constructor(){this.loaded={}}loadTile(V){return f._(this,void 0,void 0,function*(){const{uid:B,encoding:X,rawImageData:J,redFactor:pe,greenFactor:ve,blueFactor:we,baseShift:fe}=V,Ie=J.width+2,Ve=J.height+2,Pe=f.b(J)?new f.R({width:Ie,height:Ve},yield f.bw(J,-1,-1,Ie,Ve)):J,Ze=new f.bx(B,Pe,X,pe,ve,we,fe);return this.loaded=this.loaded||{},this.loaded[B]=Ze,Ze})}removeTile(V){const B=this.loaded,X=V.uid;B&&B[X]&&delete B[X]}}function $(oe,V){if(oe.length!==0){H(oe[0],V);for(var B=1;B<oe.length;B++)H(oe[B],!V)}}function H(oe,V){for(var B=0,X=0,J=0,pe=oe.length,ve=pe-1;J<pe;ve=J++){var we=(oe[J][0]-oe[ve][0])*(oe[ve][1]+oe[J][1]),fe=B+we;X+=Math.abs(B)>=Math.abs(we)?B-fe+we:we-fe+B,B=fe}B+X>=0!=!!V&&oe.reverse()}var Y=f.by(function oe(V,B){var X,J=V&&V.type;if(J==="FeatureCollection")for(X=0;X<V.features.length;X++)oe(V.features[X],B);else if(J==="GeometryCollection")for(X=0;X<V.geometries.length;X++)oe(V.geometries[X],B);else if(J==="Feature")oe(V.geometry,B);else if(J==="Polygon")$(V.coordinates,B);else if(J==="MultiPolygon")for(X=0;X<V.coordinates.length;X++)$(V.coordinates[X],B);return V});const ae=f.bt.VectorTileFeature.prototype.toGeoJSON;var j={exports:{}},W=f.bz,G=f.bt.VectorTileFeature,ee=de;function de(oe,V){this.options=V||{},this.features=oe,this.length=oe.length}function he(oe,V){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=V||4096}de.prototype.feature=function(oe){return new he(this.features[oe],this.options.extent)},he.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var V=0;V<oe.length;V++){for(var B=oe[V],X=[],J=0;J<B.length;J++)X.push(new W(B[J][0],B[J][1]));this.geometry.push(X)}return this.geometry},he.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,V=1/0,B=-1/0,X=1/0,J=-1/0,pe=0;pe<oe.length;pe++)for(var ve=oe[pe],we=0;we<ve.length;we++){var fe=ve[we];V=Math.min(V,fe.x),B=Math.max(B,fe.x),X=Math.min(X,fe.y),J=Math.max(J,fe.y)}return[V,X,B,J]},he.prototype.toGeoJSON=G.prototype.toGeoJSON;var ye=f.bA,Ce=ee;function Me(oe){var V=new ye;return function(B,X){for(var J in B.layers)X.writeMessage(3,ze,B.layers[J])}(oe,V),V.finish()}function ze(oe,V){var B;V.writeVarintField(15,oe.version||1),V.writeStringField(1,oe.name||""),V.writeVarintField(5,oe.extent||4096);var X={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<oe.length;B++)X.feature=oe.feature(B),V.writeMessage(2,Re,X);var J=X.keys;for(B=0;B<J.length;B++)V.writeStringField(3,J[B]);var pe=X.values;for(B=0;B<pe.length;B++)V.writeMessage(4,it,pe[B])}function Re(oe,V){var B=oe.feature;B.id!==void 0&&V.writeVarintField(1,B.id),V.writeMessage(2,te,oe),V.writeVarintField(3,B.type),V.writeMessage(4,Ge,B)}function te(oe,V){var B=oe.feature,X=oe.keys,J=oe.values,pe=oe.keycache,ve=oe.valuecache;for(var we in B.properties){var fe=B.properties[we],Ie=pe[we];if(fe!==null){Ie===void 0&&(X.push(we),pe[we]=Ie=X.length-1),V.writeVarint(Ie);var Ve=typeof fe;Ve!=="string"&&Ve!=="boolean"&&Ve!=="number"&&(fe=JSON.stringify(fe));var Pe=Ve+":"+fe,Ze=ve[Pe];Ze===void 0&&(J.push(fe),ve[Pe]=Ze=J.length-1),V.writeVarint(Ze)}}}function Fe(oe,V){return(V<<3)+(7&oe)}function Be(oe){return oe<<1^oe>>31}function Ge(oe,V){for(var B=oe.loadGeometry(),X=oe.type,J=0,pe=0,ve=B.length,we=0;we<ve;we++){var fe=B[we],Ie=1;X===1&&(Ie=fe.length),V.writeVarint(Fe(1,Ie));for(var Ve=X===3?fe.length-1:fe.length,Pe=0;Pe<Ve;Pe++){Pe===1&&X!==1&&V.writeVarint(Fe(2,Ve-1));var Ze=fe[Pe].x-J,mt=fe[Pe].y-pe;V.writeVarint(Be(Ze)),V.writeVarint(Be(mt)),J+=Ze,pe+=mt}X===3&&V.writeVarint(Fe(7,1))}}function it(oe,V){var B=typeof oe;B==="string"?V.writeStringField(1,oe):B==="boolean"?V.writeBooleanField(7,oe):B==="number"&&(oe%1!=0?V.writeDoubleField(3,oe):oe<0?V.writeSVarintField(6,oe):V.writeVarintField(5,oe))}j.exports=Me,j.exports.fromVectorTileJs=Me,j.exports.fromGeojsonVt=function(oe,V){V=V||{};var B={};for(var X in oe)B[X]=new Ce(oe[X].features,V),B[X].name=X,B[X].version=V.version,B[X].extent=V.extent;return Me({layers:B})},j.exports.GeoJSONWrapper=Ce;var Je=f.by(j.exports);const Ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},$e=Math.fround||(at=new Float32Array(1),oe=>(at[0]=+oe,at[0]));var at;const St=3,Mt=5,Nn=6;class Zt{constructor(V){this.options=Object.assign(Object.create(Ne),V),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(V){const{log:B,minZoom:X,maxZoom:J}=this.options;B&&console.time("total time");const pe=`prepare ${V.length} points`;B&&console.time(pe),this.points=V;const ve=[];for(let fe=0;fe<V.length;fe++){const Ie=V[fe];if(!Ie.geometry)continue;const[Ve,Pe]=Ie.geometry.coordinates,Ze=$e(Jt(Ve)),mt=$e(dn(Pe));ve.push(Ze,mt,1/0,fe,-1,1),this.options.reduce&&ve.push(0)}let we=this.trees[J+1]=this._createTree(ve);B&&console.timeEnd(pe);for(let fe=J;fe>=X;fe--){const Ie=+Date.now();we=this.trees[fe]=this._createTree(this._cluster(we,fe)),B&&console.log("z%d: %d clusters in %dms",fe,we.numItems,+Date.now()-Ie)}return B&&console.timeEnd("total time"),this}getClusters(V,B){let X=((V[0]+180)%360+360)%360-180;const J=Math.max(-90,Math.min(90,V[1]));let pe=V[2]===180?180:((V[2]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,V[3]));if(V[2]-V[0]>=360)X=-180,pe=180;else if(X>pe){const Pe=this.getClusters([X,J,180,ve],B),Ze=this.getClusters([-180,J,pe,ve],B);return Pe.concat(Ze)}const we=this.trees[this._limitZoom(B)],fe=we.range(Jt(X),dn(ve),Jt(pe),dn(J)),Ie=we.data,Ve=[];for(const Pe of fe){const Ze=this.stride*Pe;Ve.push(Ie[Ze+Mt]>1?Yt(Ie,Ze,this.clusterProps):this.points[Ie[Ze+St]])}return Ve}getChildren(V){const B=this._getOriginId(V),X=this._getOriginZoom(V),J="No cluster with the specified id.",pe=this.trees[X];if(!pe)throw new Error(J);const ve=pe.data;if(B*this.stride>=ve.length)throw new Error(J);const we=this.options.radius/(this.options.extent*Math.pow(2,X-1)),fe=pe.within(ve[B*this.stride],ve[B*this.stride+1],we),Ie=[];for(const Ve of fe){const Pe=Ve*this.stride;ve[Pe+4]===V&&Ie.push(ve[Pe+Mt]>1?Yt(ve,Pe,this.clusterProps):this.points[ve[Pe+St]])}if(Ie.length===0)throw new Error(J);return Ie}getLeaves(V,B,X){const J=[];return this._appendLeaves(J,V,B=B||10,X=X||0,0),J}getTile(V,B,X){const J=this.trees[this._limitZoom(V)],pe=Math.pow(2,V),{extent:ve,radius:we}=this.options,fe=we/ve,Ie=(X-fe)/pe,Ve=(X+1+fe)/pe,Pe={features:[]};return this._addTileFeatures(J.range((B-fe)/pe,Ie,(B+1+fe)/pe,Ve),J.data,B,X,pe,Pe),B===0&&this._addTileFeatures(J.range(1-fe/pe,Ie,1,Ve),J.data,pe,X,pe,Pe),B===pe-1&&this._addTileFeatures(J.range(0,Ie,fe/pe,Ve),J.data,-1,X,pe,Pe),Pe.features.length?Pe:null}getClusterExpansionZoom(V){let B=this._getOriginZoom(V)-1;for(;B<=this.options.maxZoom;){const X=this.getChildren(V);if(B++,X.length!==1)break;V=X[0].properties.cluster_id}return B}_appendLeaves(V,B,X,J,pe){const ve=this.getChildren(B);for(const we of ve){const fe=we.properties;if(fe&&fe.cluster?pe+fe.point_count<=J?pe+=fe.point_count:pe=this._appendLeaves(V,fe.cluster_id,X,J,pe):pe<J?pe++:V.push(we),V.length===X)break}return pe}_createTree(V){const B=new f.av(V.length/this.stride|0,this.options.nodeSize,Float32Array);for(let X=0;X<V.length;X+=this.stride)B.add(V[X],V[X+1]);return B.finish(),B.data=V,B}_addTileFeatures(V,B,X,J,pe,ve){for(const we of V){const fe=we*this.stride,Ie=B[fe+Mt]>1;let Ve,Pe,Ze;if(Ie)Ve=_n(B,fe,this.clusterProps),Pe=B[fe],Ze=B[fe+1];else{const Nt=this.points[B[fe+St]];Ve=Nt.properties;const[Et,jt]=Nt.geometry.coordinates;Pe=Jt(Et),Ze=dn(jt)}const mt={type:1,geometry:[[Math.round(this.options.extent*(Pe*pe-X)),Math.round(this.options.extent*(Ze*pe-J))]],tags:Ve};let yt;yt=Ie||this.options.generateId?B[fe+St]:this.points[B[fe+St]].id,yt!==void 0&&(mt.id=yt),ve.features.push(mt)}}_limitZoom(V){return Math.max(this.options.minZoom,Math.min(Math.floor(+V),this.options.maxZoom+1))}_cluster(V,B){const{radius:X,extent:J,reduce:pe,minPoints:ve}=this.options,we=X/(J*Math.pow(2,B)),fe=V.data,Ie=[],Ve=this.stride;for(let Pe=0;Pe<fe.length;Pe+=Ve){if(fe[Pe+2]<=B)continue;fe[Pe+2]=B;const Ze=fe[Pe],mt=fe[Pe+1],yt=V.within(fe[Pe],fe[Pe+1],we),Nt=fe[Pe+Mt];let Et=Nt;for(const jt of yt){const Lt=jt*Ve;fe[Lt+2]>B&&(Et+=fe[Lt+Mt])}if(Et>Nt&&Et>=ve){let jt,Lt=Ze*Nt,Un=mt*Nt,Sn=-1;const zt=((Pe/Ve|0)<<5)+(B+1)+this.points.length;for(const Xt of yt){const vn=Xt*Ve;if(fe[vn+2]<=B)continue;fe[vn+2]=B;const ir=fe[vn+Mt];Lt+=fe[vn]*ir,Un+=fe[vn+1]*ir,fe[vn+4]=zt,pe&&(jt||(jt=this._map(fe,Pe,!0),Sn=this.clusterProps.length,this.clusterProps.push(jt)),pe(jt,this._map(fe,vn)))}fe[Pe+4]=zt,Ie.push(Lt/Et,Un/Et,1/0,zt,-1,Et),pe&&Ie.push(Sn)}else{for(let jt=0;jt<Ve;jt++)Ie.push(fe[Pe+jt]);if(Et>1)for(const jt of yt){const Lt=jt*Ve;if(!(fe[Lt+2]<=B)){fe[Lt+2]=B;for(let Un=0;Un<Ve;Un++)Ie.push(fe[Lt+Un])}}}}return Ie}_getOriginId(V){return V-this.points.length>>5}_getOriginZoom(V){return(V-this.points.length)%32}_map(V,B,X){if(V[B+Mt]>1){const ve=this.clusterProps[V[B+Nn]];return X?Object.assign({},ve):ve}const J=this.points[V[B+St]].properties,pe=this.options.map(J);return X&&pe===J?Object.assign({},pe):pe}}function Yt(oe,V,B){return{type:"Feature",id:oe[V+St],properties:_n(oe,V,B),geometry:{type:"Point",coordinates:[(X=oe[V],360*(X-.5)),_r(oe[V+1])]}};var X}function _n(oe,V,B){const X=oe[V+Mt],J=X>=1e4?`${Math.round(X/1e3)}k`:X>=1e3?Math.round(X/100)/10+"k":X,pe=oe[V+Nn],ve=pe===-1?{}:Object.assign({},B[pe]);return Object.assign(ve,{cluster:!0,cluster_id:oe[V+St],point_count:X,point_count_abbreviated:J})}function Jt(oe){return oe/360+.5}function dn(oe){const V=Math.sin(oe*Math.PI/180),B=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return B<0?0:B>1?1:B}function _r(oe){const V=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(V))/Math.PI-90}function li(oe,V,B,X){let J=X;const pe=V+(B-V>>1);let ve,we=B-V;const fe=oe[V],Ie=oe[V+1],Ve=oe[B],Pe=oe[B+1];for(let Ze=V+3;Ze<B;Ze+=3){const mt=Gr(oe[Ze],oe[Ze+1],fe,Ie,Ve,Pe);if(mt>J)ve=Ze,J=mt;else if(mt===J){const yt=Math.abs(Ze-pe);yt<we&&(ve=Ze,we=yt)}}J>X&&(ve-V>3&&li(oe,V,ve,X),oe[ve+2]=J,B-ve>3&&li(oe,ve,B,X))}function Gr(oe,V,B,X,J,pe){let ve=J-B,we=pe-X;if(ve!==0||we!==0){const fe=((oe-B)*ve+(V-X)*we)/(ve*ve+we*we);fe>1?(B=J,X=pe):fe>0&&(B+=ve*fe,X+=we*fe)}return ve=oe-B,we=V-X,ve*ve+we*we}function wn(oe,V,B,X){const J={id:oe??null,type:V,geometry:B,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(V==="Point"||V==="MultiPoint"||V==="LineString")hr(J,B);else if(V==="Polygon")hr(J,B[0]);else if(V==="MultiLineString")for(const pe of B)hr(J,pe);else if(V==="MultiPolygon")for(const pe of B)hr(J,pe[0]);return J}function hr(oe,V){for(let B=0;B<V.length;B+=3)oe.minX=Math.min(oe.minX,V[B]),oe.minY=Math.min(oe.minY,V[B+1]),oe.maxX=Math.max(oe.maxX,V[B]),oe.maxY=Math.max(oe.maxY,V[B+1])}function jn(oe,V,B,X){if(!V.geometry)return;const J=V.geometry.coordinates;if(J&&J.length===0)return;const pe=V.geometry.type,ve=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2);let we=[],fe=V.id;if(B.promoteId?fe=V.properties[B.promoteId]:B.generateId&&(fe=X||0),pe==="Point")Dr(J,we);else if(pe==="MultiPoint")for(const Ie of J)Dr(Ie,we);else if(pe==="LineString")ke(J,we,ve,!1);else if(pe==="MultiLineString"){if(B.lineMetrics){for(const Ie of J)we=[],ke(Ie,we,ve,!1),oe.push(wn(fe,"LineString",we,V.properties));return}$n(J,we,ve,!1)}else if(pe==="Polygon")$n(J,we,ve,!0);else{if(pe!=="MultiPolygon"){if(pe==="GeometryCollection"){for(const Ie of V.geometry.geometries)jn(oe,{id:fe,geometry:Ie,properties:V.properties},B,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ie of J){const Ve=[];$n(Ie,Ve,ve,!0),we.push(Ve)}}oe.push(wn(fe,pe,we,V.properties))}function Dr(oe,V){V.push(nr(oe[0]),Dt(oe[1]),0)}function ke(oe,V,B,X){let J,pe,ve=0;for(let fe=0;fe<oe.length;fe++){const Ie=nr(oe[fe][0]),Ve=Dt(oe[fe][1]);V.push(Ie,Ve,0),fe>0&&(ve+=X?(J*Ve-Ie*pe)/2:Math.sqrt(Math.pow(Ie-J,2)+Math.pow(Ve-pe,2))),J=Ie,pe=Ve}const we=V.length-3;V[2]=1,li(V,0,we,B),V[we+2]=1,V.size=Math.abs(ve),V.start=0,V.end=V.size}function $n(oe,V,B,X){for(let J=0;J<oe.length;J++){const pe=[];ke(oe[J],pe,B,X),V.push(pe)}}function nr(oe){return oe/360+.5}function Dt(oe){const V=Math.sin(oe*Math.PI/180),B=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return B<0?0:B>1?1:B}function Vt(oe,V,B,X,J,pe,ve,we){if(X/=V,pe>=(B/=V)&&ve<X)return oe;if(ve<B||pe>=X)return null;const fe=[];for(const Ie of oe){const Ve=Ie.geometry;let Pe=Ie.type;const Ze=J===0?Ie.minX:Ie.minY,mt=J===0?Ie.maxX:Ie.maxY;if(Ze>=B&&mt<X){fe.push(Ie);continue}if(mt<B||Ze>=X)continue;let yt=[];if(Pe==="Point"||Pe==="MultiPoint")Rr(Ve,yt,B,X,J);else if(Pe==="LineString")wt(Ve,yt,B,X,J,!1,we.lineMetrics);else if(Pe==="MultiLineString")Si(Ve,yt,B,X,J,!1);else if(Pe==="Polygon")Si(Ve,yt,B,X,J,!0);else if(Pe==="MultiPolygon")for(const Nt of Ve){const Et=[];Si(Nt,Et,B,X,J,!0),Et.length&&yt.push(Et)}if(yt.length){if(we.lineMetrics&&Pe==="LineString"){for(const Nt of yt)fe.push(wn(Ie.id,Pe,Nt,Ie.tags));continue}Pe!=="LineString"&&Pe!=="MultiLineString"||(yt.length===1?(Pe="LineString",yt=yt[0]):Pe="MultiLineString"),Pe!=="Point"&&Pe!=="MultiPoint"||(Pe=yt.length===3?"Point":"MultiPoint"),fe.push(wn(Ie.id,Pe,yt,Ie.tags))}}return fe.length?fe:null}function Rr(oe,V,B,X,J){for(let pe=0;pe<oe.length;pe+=3){const ve=oe[pe+J];ve>=B&&ve<=X&&dr(V,oe[pe],oe[pe+1],oe[pe+2])}}function wt(oe,V,B,X,J,pe,ve){let we=Lr(oe);const fe=J===0?ms:Ti;let Ie,Ve,Pe=oe.start;for(let Et=0;Et<oe.length-3;Et+=3){const jt=oe[Et],Lt=oe[Et+1],Un=oe[Et+2],Sn=oe[Et+3],zt=oe[Et+4],Xt=J===0?jt:Lt,vn=J===0?Sn:zt;let ir=!1;ve&&(Ie=Math.sqrt(Math.pow(jt-Sn,2)+Math.pow(Lt-zt,2))),Xt<B?vn>B&&(Ve=fe(we,jt,Lt,Sn,zt,B),ve&&(we.start=Pe+Ie*Ve)):Xt>X?vn<X&&(Ve=fe(we,jt,Lt,Sn,zt,X),ve&&(we.start=Pe+Ie*Ve)):dr(we,jt,Lt,Un),vn<B&&Xt>=B&&(Ve=fe(we,jt,Lt,Sn,zt,B),ir=!0),vn>X&&Xt<=X&&(Ve=fe(we,jt,Lt,Sn,zt,X),ir=!0),!pe&&ir&&(ve&&(we.end=Pe+Ie*Ve),V.push(we),we=Lr(oe)),ve&&(Pe+=Ie)}let Ze=oe.length-3;const mt=oe[Ze],yt=oe[Ze+1],Nt=J===0?mt:yt;Nt>=B&&Nt<=X&&dr(we,mt,yt,oe[Ze+2]),Ze=we.length-3,pe&&Ze>=3&&(we[Ze]!==we[0]||we[Ze+1]!==we[1])&&dr(we,we[0],we[1],we[2]),we.length&&V.push(we)}function Lr(oe){const V=[];return V.size=oe.size,V.start=oe.start,V.end=oe.end,V}function Si(oe,V,B,X,J,pe){for(const ve of oe)wt(ve,V,B,X,J,pe,!1)}function dr(oe,V,B,X){oe.push(V,B,X)}function ms(oe,V,B,X,J,pe){const ve=(pe-V)/(X-V);return dr(oe,pe,B+(J-B)*ve,1),ve}function Ti(oe,V,B,X,J,pe){const ve=(pe-B)/(J-B);return dr(oe,V+(X-V)*ve,pe,1),ve}function Ue(oe,V){const B=[];for(let X=0;X<oe.length;X++){const J=oe[X],pe=J.type;let ve;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")ve=vr(J.geometry,V);else if(pe==="MultiLineString"||pe==="Polygon"){ve=[];for(const we of J.geometry)ve.push(vr(we,V))}else if(pe==="MultiPolygon"){ve=[];for(const we of J.geometry){const fe=[];for(const Ie of we)fe.push(vr(Ie,V));ve.push(fe)}}B.push(wn(J.id,pe,ve,J.tags))}return B}function vr(oe,V){const B=[];B.size=oe.size,oe.start!==void 0&&(B.start=oe.start,B.end=oe.end);for(let X=0;X<oe.length;X+=3)B.push(oe[X]+V,oe[X+1],oe[X+2]);return B}function Yn(oe,V){if(oe.transformed)return oe;const B=1<<oe.z,X=oe.x,J=oe.y;for(const pe of oe.features){const ve=pe.geometry,we=pe.type;if(pe.geometry=[],we===1)for(let fe=0;fe<ve.length;fe+=2)pe.geometry.push(Pn(ve[fe],ve[fe+1],V,B,X,J));else for(let fe=0;fe<ve.length;fe++){const Ie=[];for(let Ve=0;Ve<ve[fe].length;Ve+=2)Ie.push(Pn(ve[fe][Ve],ve[fe][Ve+1],V,B,X,J));pe.geometry.push(Ie)}}return oe.transformed=!0,oe}function Pn(oe,V,B,X,J,pe){return[Math.round(B*(oe*X-J)),Math.round(B*(V*X-pe))]}function Hr(oe,V,B,X,J){const pe=V===J.maxZoom?0:J.tolerance/((1<<V)*J.extent),ve={features:[],numPoints:0,numSimplified:0,numFeatures:oe.length,source:null,x:B,y:X,z:V,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const we of oe)qe(ve,we,pe,J);return ve}function qe(oe,V,B,X){const J=V.geometry,pe=V.type,ve=[];if(oe.minX=Math.min(oe.minX,V.minX),oe.minY=Math.min(oe.minY,V.minY),oe.maxX=Math.max(oe.maxX,V.maxX),oe.maxY=Math.max(oe.maxY,V.maxY),pe==="Point"||pe==="MultiPoint")for(let we=0;we<J.length;we+=3)ve.push(J[we],J[we+1]),oe.numPoints++,oe.numSimplified++;else if(pe==="LineString")xt(ve,J,oe,B,!1,!1);else if(pe==="MultiLineString"||pe==="Polygon")for(let we=0;we<J.length;we++)xt(ve,J[we],oe,B,pe==="Polygon",we===0);else if(pe==="MultiPolygon")for(let we=0;we<J.length;we++){const fe=J[we];for(let Ie=0;Ie<fe.length;Ie++)xt(ve,fe[Ie],oe,B,!0,Ie===0)}if(ve.length){let we=V.tags||null;if(pe==="LineString"&&X.lineMetrics){we={};for(const Ie in V.tags)we[Ie]=V.tags[Ie];we.mapbox_clip_start=J.start/J.size,we.mapbox_clip_end=J.end/J.size}const fe={geometry:ve,type:pe==="Polygon"||pe==="MultiPolygon"?3:pe==="LineString"||pe==="MultiLineString"?2:1,tags:we};V.id!==null&&(fe.id=V.id),oe.features.push(fe)}}function xt(oe,V,B,X,J,pe){const ve=X*X;if(X>0&&V.size<(J?ve:X))return void(B.numPoints+=V.length/3);const we=[];for(let fe=0;fe<V.length;fe+=3)(X===0||V[fe+2]>ve)&&(B.numSimplified++,we.push(V[fe],V[fe+1])),B.numPoints++;J&&function(fe,Ie){let Ve=0;for(let Pe=0,Ze=fe.length,mt=Ze-2;Pe<Ze;mt=Pe,Pe+=2)Ve+=(fe[Pe]-fe[mt])*(fe[Pe+1]+fe[mt+1]);if(Ve>0===Ie)for(let Pe=0,Ze=fe.length;Pe<Ze/2;Pe+=2){const mt=fe[Pe],yt=fe[Pe+1];fe[Pe]=fe[Ze-2-Pe],fe[Pe+1]=fe[Ze-1-Pe],fe[Ze-2-Pe]=mt,fe[Ze-1-Pe]=yt}}(we,pe),oe.push(we)}const bt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class rr{constructor(V,B){const X=(B=this.options=function(pe,ve){for(const we in ve)pe[we]=ve[we];return pe}(Object.create(bt),B)).debug;if(X&&console.time("preprocess data"),B.maxZoom<0||B.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(B.promoteId&&B.generateId)throw new Error("promoteId and generateId cannot be used together.");let J=function(pe,ve){const we=[];if(pe.type==="FeatureCollection")for(let fe=0;fe<pe.features.length;fe++)jn(we,pe.features[fe],ve,fe);else jn(we,pe.type==="Feature"?pe:{geometry:pe},ve);return we}(V,B);this.tiles={},this.tileCoords=[],X&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",B.indexMaxZoom,B.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),J=function(pe,ve){const we=ve.buffer/ve.extent;let fe=pe;const Ie=Vt(pe,1,-1-we,we,0,-1,2,ve),Ve=Vt(pe,1,1-we,2+we,0,-1,2,ve);return(Ie||Ve)&&(fe=Vt(pe,1,-we,1+we,0,-1,2,ve)||[],Ie&&(fe=Ue(Ie,1).concat(fe)),Ve&&(fe=fe.concat(Ue(Ve,-1)))),fe}(J,B),J.length&&this.splitTile(J,0,0,0),X&&(J.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(V,B,X,J,pe,ve,we){const fe=[V,B,X,J],Ie=this.options,Ve=Ie.debug;for(;fe.length;){J=fe.pop(),X=fe.pop(),B=fe.pop(),V=fe.pop();const Pe=1<<B,Ze=ui(B,X,J);let mt=this.tiles[Ze];if(!mt&&(Ve>1&&console.time("creation"),mt=this.tiles[Ze]=Hr(V,B,X,J,Ie),this.tileCoords.push({z:B,x:X,y:J}),Ve)){Ve>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",B,X,J,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));const ir=`z${B}`;this.stats[ir]=(this.stats[ir]||0)+1,this.total++}if(mt.source=V,pe==null){if(B===Ie.indexMaxZoom||mt.numPoints<=Ie.indexMaxPoints)continue}else{if(B===Ie.maxZoom||B===pe)continue;if(pe!=null){const ir=pe-B;if(X!==ve>>ir||J!==we>>ir)continue}}if(mt.source=null,V.length===0)continue;Ve>1&&console.time("clipping");const yt=.5*Ie.buffer/Ie.extent,Nt=.5-yt,Et=.5+yt,jt=1+yt;let Lt=null,Un=null,Sn=null,zt=null,Xt=Vt(V,Pe,X-yt,X+Et,0,mt.minX,mt.maxX,Ie),vn=Vt(V,Pe,X+Nt,X+jt,0,mt.minX,mt.maxX,Ie);V=null,Xt&&(Lt=Vt(Xt,Pe,J-yt,J+Et,1,mt.minY,mt.maxY,Ie),Un=Vt(Xt,Pe,J+Nt,J+jt,1,mt.minY,mt.maxY,Ie),Xt=null),vn&&(Sn=Vt(vn,Pe,J-yt,J+Et,1,mt.minY,mt.maxY,Ie),zt=Vt(vn,Pe,J+Nt,J+jt,1,mt.minY,mt.maxY,Ie),vn=null),Ve>1&&console.timeEnd("clipping"),fe.push(Lt||[],B+1,2*X,2*J),fe.push(Un||[],B+1,2*X,2*J+1),fe.push(Sn||[],B+1,2*X+1,2*J),fe.push(zt||[],B+1,2*X+1,2*J+1)}}getTile(V,B,X){V=+V,B=+B,X=+X;const J=this.options,{extent:pe,debug:ve}=J;if(V<0||V>24)return null;const we=1<<V,fe=ui(V,B=B+we&we-1,X);if(this.tiles[fe])return Yn(this.tiles[fe],pe);ve>1&&console.log("drilling down to z%d-%d-%d",V,B,X);let Ie,Ve=V,Pe=B,Ze=X;for(;!Ie&&Ve>0;)Ve--,Pe>>=1,Ze>>=1,Ie=this.tiles[ui(Ve,Pe,Ze)];return Ie&&Ie.source?(ve>1&&(console.log("found parent tile z%d-%d-%d",Ve,Pe,Ze),console.time("drilling down")),this.splitTile(Ie.source,Ve,Pe,Ze,V,B,X),ve>1&&console.timeEnd("drilling down"),this.tiles[fe]?Yn(this.tiles[fe],pe):null):null}}function ui(oe,V,B){return 32*((1<<oe)*B+V)+oe}function Tt(oe,V){return V?oe.properties[V]:oe.id}function Ci(oe,V){if(oe==null)return!0;if(oe.type==="Feature")return Tt(oe,V)!=null;if(oe.type==="FeatureCollection"){const B=new Set;for(const X of oe.features){const J=Tt(X,V);if(J==null||B.has(J))return!1;B.add(J)}return!0}return!1}function Wi(oe,V){const B=new Map;if(oe!=null)if(oe.type==="Feature")B.set(Tt(oe,V),oe);else for(const X of oe.features)B.set(Tt(X,V),X);return B}class gs extends A{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(V,B){return f._(this,void 0,void 0,function*(){const X=V.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const J=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!J)return null;const pe=new class{constructor(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.X,this.length=we.length,this._features=we}feature(we){return new class{constructor(fe){this._feature=fe,this.extent=f.X,this.type=fe.type,this.properties=fe.tags,"id"in fe&&!isNaN(fe.id)&&(this.id=parseInt(fe.id,10))}loadGeometry(){if(this._feature.type===1){const fe=[];for(const Ie of this._feature.geometry)fe.push([new f.P(Ie[0],Ie[1])]);return fe}{const fe=[];for(const Ie of this._feature.geometry){const Ve=[];for(const Pe of Ie)Ve.push(new f.P(Pe[0],Pe[1]));fe.push(Ve)}return fe}}toGeoJSON(fe,Ie,Ve){return ae.call(this,fe,Ie,Ve)}}(this._features[we])}}(J.features);let ve=Je(pe);return ve.byteOffset===0&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),{vectorTile:pe,rawData:ve.buffer}})}loadData(V){return f._(this,void 0,void 0,function*(){var B;(B=this._pendingRequest)===null||B===void 0||B.abort();const X=!!(V&&V.request&&V.request.collectResourceTiming)&&new f.bv(V.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(V,this._pendingRequest),this._geoJSONIndex=V.cluster?new Zt(function({superclusterOptions:ve,clusterProperties:we}){if(!we||!ve)return ve;const fe={},Ie={},Ve={accumulated:null,zoom:0},Pe={properties:null},Ze=Object.keys(we);for(const mt of Ze){const[yt,Nt]=we[mt],Et=f.bC(Nt),jt=f.bC(typeof yt=="string"?[yt,["accumulated"],["get",mt]]:yt);fe[mt]=Et.value,Ie[mt]=jt.value}return ve.map=mt=>{Pe.properties=mt;const yt={};for(const Nt of Ze)yt[Nt]=fe[Nt].evaluate(Ve,Pe);return yt},ve.reduce=(mt,yt)=>{Pe.properties=yt;for(const Nt of Ze)Ve.accumulated=mt[Nt],mt[Nt]=Ie[Nt].evaluate(Ve,Pe)},ve}(V)).load((yield this._pendingData).features):(J=yield this._pendingData,new rr(J,V.geojsonVtOptions)),this.loaded={};const pe={};if(X){const ve=X.finish();ve&&(pe.resourceTiming={},pe.resourceTiming[V.source]=JSON.parse(JSON.stringify(ve)))}return pe}catch(pe){if(delete this._pendingRequest,f.bB(pe))return{abandoned:!0};throw pe}var J})}getData(){return f._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(V){const B=this.loaded;return B&&B[V.uid]?super.reloadTile(V):this.loadTile(V)}loadAndProcessGeoJSON(V,B){return f._(this,void 0,void 0,function*(){let X=yield this.loadGeoJSON(V,B);if(delete this._pendingRequest,typeof X!="object")throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`);if(Y(X,!0),V.filter){const J=f.bC(V.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(J.result==="error")throw new Error(J.value.map(ve=>`${ve.key}: ${ve.message}`).join(", "));X={type:"FeatureCollection",features:X.features.filter(ve=>J.value.evaluate({zoom:0},ve))}}return X})}loadGeoJSON(V,B){return f._(this,void 0,void 0,function*(){const{promoteId:X}=V;if(V.request){const J=yield f.h(V.request,B);return this._dataUpdateable=Ci(J.data,X)?Wi(J.data,X):void 0,J.data}if(typeof V.data=="string")try{const J=JSON.parse(V.data);return this._dataUpdateable=Ci(J,X)?Wi(J,X):void 0,J}catch{throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`)}if(!V.dataDiff)throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${V.source}`);return function(J,pe,ve){var we,fe,Ie,Ve;if(pe.removeAll&&J.clear(),pe.remove)for(const Pe of pe.remove)J.delete(Pe);if(pe.add)for(const Pe of pe.add){const Ze=Tt(Pe,ve);Ze!=null&&J.set(Ze,Pe)}if(pe.update)for(const Pe of pe.update){let Ze=J.get(Pe.id);if(Ze==null)continue;const mt=!Pe.removeAllProperties&&(((we=Pe.removeProperties)===null||we===void 0?void 0:we.length)>0||((fe=Pe.addOrUpdateProperties)===null||fe===void 0?void 0:fe.length)>0);if((Pe.newGeometry||Pe.removeAllProperties||mt)&&(Ze=Object.assign({},Ze),J.set(Pe.id,Ze),mt&&(Ze.properties=Object.assign({},Ze.properties))),Pe.newGeometry&&(Ze.geometry=Pe.newGeometry),Pe.removeAllProperties)Ze.properties={};else if(((Ie=Pe.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0)for(const yt of Pe.removeProperties)Object.prototype.hasOwnProperty.call(Ze.properties,yt)&&delete Ze.properties[yt];if(((Ve=Pe.addOrUpdateProperties)===null||Ve===void 0?void 0:Ve.length)>0)for(const{key:yt,value:Nt}of Pe.addOrUpdateProperties)Ze.properties[yt]=Nt}}(this._dataUpdateable,V.dataDiff,X),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(V){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(V){return this._geoJSONIndex.getClusterExpansionZoom(V.clusterId)}getClusterChildren(V){return this._geoJSONIndex.getChildren(V.clusterId)}getClusterLeaves(V){return this._geoJSONIndex.getLeaves(V.clusterId,V.limit,V.offset)}}class ki{constructor(V){this.self=V,this.actor=new f.F(V),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(B,X)=>{if(this.externalWorkerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.externalWorkerSourceTypes[B]=X},this.self.addProtocol=f.bi,this.self.removeProtocol=f.bj,this.self.registerRTLTextPlugin=B=>{if(f.bD.isParsed())throw new Error("RTL text plugin already registered.");f.bD.setMethods(B)},this.actor.registerMessageHandler("LDT",(B,X)=>this._getDEMWorkerSource(B,X.source).loadTile(X)),this.actor.registerMessageHandler("RDT",(B,X)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(B,X.source).removeTile(X)})),this.actor.registerMessageHandler("GCEZ",(B,X)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(B,X.type,X.source).getClusterExpansionZoom(X)})),this.actor.registerMessageHandler("GCC",(B,X)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(B,X.type,X.source).getClusterChildren(X)})),this.actor.registerMessageHandler("GCL",(B,X)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(B,X.type,X.source).getClusterLeaves(X)})),this.actor.registerMessageHandler("LD",(B,X)=>this._getWorkerSource(B,X.type,X.source).loadData(X)),this.actor.registerMessageHandler("GD",(B,X)=>this._getWorkerSource(B,X.type,X.source).getData()),this.actor.registerMessageHandler("LT",(B,X)=>this._getWorkerSource(B,X.type,X.source).loadTile(X)),this.actor.registerMessageHandler("RT",(B,X)=>this._getWorkerSource(B,X.type,X.source).reloadTile(X)),this.actor.registerMessageHandler("AT",(B,X)=>this._getWorkerSource(B,X.type,X.source).abortTile(X)),this.actor.registerMessageHandler("RMT",(B,X)=>this._getWorkerSource(B,X.type,X.source).removeTile(X)),this.actor.registerMessageHandler("RS",(B,X)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[B]||!this.workerSources[B][X.type]||!this.workerSources[B][X.type][X.source])return;const J=this.workerSources[B][X.type][X.source];delete this.workerSources[B][X.type][X.source],J.removeSource!==void 0&&J.removeSource(X)})),this.actor.registerMessageHandler("RM",B=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[B],delete this.availableImages[B],delete this.workerSources[B],delete this.demWorkerSources[B]})),this.actor.registerMessageHandler("SR",(B,X)=>f._(this,void 0,void 0,function*(){this.referrer=X})),this.actor.registerMessageHandler("SRPS",(B,X)=>this._syncRTLPluginState(B,X)),this.actor.registerMessageHandler("IS",(B,X)=>f._(this,void 0,void 0,function*(){this.self.importScripts(X)})),this.actor.registerMessageHandler("SI",(B,X)=>this._setImages(B,X)),this.actor.registerMessageHandler("UL",(B,X)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(B).update(X.layers,X.removedIds)})),this.actor.registerMessageHandler("SL",(B,X)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(B).replace(X)}))}_setImages(V,B){return f._(this,void 0,void 0,function*(){this.availableImages[V]=B;for(const X in this.workerSources[V]){const J=this.workerSources[V][X];for(const pe in J)J[pe].availableImages=B}})}_syncRTLPluginState(V,B){return f._(this,void 0,void 0,function*(){if(f.bD.isParsed())return f.bD.getState();if(B.pluginStatus!=="loading")return f.bD.setState(B),B;const X=B.pluginURL;if(this.self.importScripts(X),f.bD.isParsed()){const J={pluginStatus:"loaded",pluginURL:X};return f.bD.setState(J),J}throw f.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${X}`)})}_getAvailableImages(V){let B=this.availableImages[V];return B||(B=[]),B}_getLayerIndex(V){let B=this.layerIndexes[V];return B||(B=this.layerIndexes[V]=new u),B}_getWorkerSource(V,B,X){if(this.workerSources[V]||(this.workerSources[V]={}),this.workerSources[V][B]||(this.workerSources[V][B]={}),!this.workerSources[V][B][X]){const J={sendAsync:(pe,ve)=>(pe.targetMapId=V,this.actor.sendAsync(pe,ve))};switch(B){case"vector":this.workerSources[V][B][X]=new A(J,this._getLayerIndex(V),this._getAvailableImages(V));break;case"geojson":this.workerSources[V][B][X]=new gs(J,this._getLayerIndex(V),this._getAvailableImages(V));break;default:this.workerSources[V][B][X]=new this.externalWorkerSourceTypes[B](J,this._getLayerIndex(V),this._getAvailableImages(V))}}return this.workerSources[V][B][X]}_getDEMWorkerSource(V,B){return this.demWorkerSources[V]||(this.demWorkerSources[V]={}),this.demWorkerSources[V][B]||(this.demWorkerSources[V][B]=new M),this.demWorkerSources[V][B]}}return f.i(self)&&(self.worker=new ki(self)),ki}),c("index",["exports","./shared"],function(f,u){var w="4.7.1";let k,I;const A={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((n,l)=>{const p=requestAnimationFrame(n);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),l(u.c())})}),getImageData(_,n=0){return this.getImageCanvasContext(_).getImageData(-n,-n,_.width+2*n,_.height+2*n)},getImageCanvasContext(_){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=_.width,n.height=_.height,l.drawImage(_,0,0,_.width,_.height),l},resolveURL:_=>(k||(k=document.createElement("a")),k.href=_,k.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class M{static testProp(n){if(!M.docStyle)return n[0];for(let l=0;l<n.length;l++)if(n[l]in M.docStyle)return n[l];return n[0]}static create(n,l,p){const m=window.document.createElement(n);return l!==void 0&&(m.className=l),p&&p.appendChild(m),m}static createNS(n,l){return window.document.createElementNS(n,l)}static disableDrag(){M.docStyle&&M.selectProp&&(M.userSelect=M.docStyle[M.selectProp],M.docStyle[M.selectProp]="none")}static enableDrag(){M.docStyle&&M.selectProp&&(M.docStyle[M.selectProp]=M.userSelect)}static setTransform(n,l){n.style[M.transformProp]=l}static addEventListener(n,l,p,m={}){n.addEventListener(l,p,"passive"in m?m:m.capture)}static removeEventListener(n,l,p,m={}){n.removeEventListener(l,p,"passive"in m?m:m.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",M.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",M.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",M.suppressClickInternal,!0)},0)}static getScale(n){const l=n.getBoundingClientRect();return{x:l.width/n.offsetWidth||1,y:l.height/n.offsetHeight||1,boundingClientRect:l}}static getPoint(n,l,p){const m=l.boundingClientRect;return new u.P((p.clientX-m.left)/l.x-n.clientLeft,(p.clientY-m.top)/l.y-n.clientTop)}static mousePos(n,l){const p=M.getScale(n);return M.getPoint(n,p,l)}static touchPos(n,l){const p=[],m=M.getScale(n);for(let y=0;y<l.length;y++)p.push(M.getPoint(n,m,l[y]));return p}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}M.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,M.selectProp=M.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),M.transformProp=M.testProp(["transform","WebkitTransform"]);const $={supported:!1,testSupport:function(_){!ae&&Y&&(j?W(_):H=_)}};let H,Y,ae=!1,j=!1;function W(_){const n=_.createTexture();_.bindTexture(_.TEXTURE_2D,n);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,Y),_.isContextLost())return;$.supported=!0}catch{}_.deleteTexture(n),ae=!0}var G;typeof document<"u"&&(Y=document.createElement("img"),Y.onload=()=>{H&&W(H),H=null,j=!0},Y.onerror=()=>{ae=!0,H=null},Y.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let n,l,p,m;_.resetRequestQueue=()=>{n=[],l=0,p=0,m={}},_.addThrottleControl=P=>{const D=p++;return m[D]=P,D},_.removeThrottleControl=P=>{delete m[P],S()},_.getImage=(P,D,L=!0)=>new Promise((F,U)=>{$.supported&&(P.headers||(P.headers={}),P.headers.accept="image/webp,*/*"),u.e(P,{type:"image"}),n.push({abortController:D,requestParameters:P,supportImageRefresh:L,state:"queued",onError:K=>{U(K)},onSuccess:K=>{F(K)}}),S()});const y=P=>u._(this,void 0,void 0,function*(){P.state="running";const{requestParameters:D,supportImageRefresh:L,onError:F,onSuccess:U,abortController:K}=P,Q=L===!1&&!u.i(self)&&!u.g(D.url)&&(!D.headers||Object.keys(D.headers).reduce((ce,me)=>ce&&me==="accept",!0));l++;const se=Q?C(D,K):u.m(D,K);try{const ce=yield se;delete P.abortController,P.state="completed",ce.data instanceof HTMLImageElement||u.b(ce.data)?U(ce):ce.data&&U({data:yield(ue=ce.data,typeof createImageBitmap=="function"?u.d(ue):u.f(ue)),cacheControl:ce.cacheControl,expires:ce.expires})}catch(ce){delete P.abortController,F(ce)}finally{l--,S()}var ue}),S=()=>{const P=(()=>{for(const D of Object.keys(m))if(m[D]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let D=l;D<P&&n.length>0;D++){const L=n.shift();L.abortController.signal.aborted?D--:y(L)}},C=(P,D)=>new Promise((L,F)=>{const U=new Image,K=P.url,Q=P.credentials;Q&&Q==="include"?U.crossOrigin="use-credentials":(Q&&Q==="same-origin"||!u.s(K))&&(U.crossOrigin="anonymous"),D.signal.addEventListener("abort",()=>{U.src="",F(u.c())}),U.fetchPriority="high",U.onload=()=>{U.onerror=U.onload=null,L({data:U})},U.onerror=()=>{U.onerror=U.onload=null,D.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},U.src=K})}(G||(G={})),G.resetRequestQueue();class ee{constructor(n){this._transformRequestFn=n}transformRequest(n,l){return this._transformRequestFn&&this._transformRequestFn(n,l)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function de(_){var n=new u.A(3);return n[0]=_[0],n[1]=_[1],n[2]=_[2],n}var he,ye=function(_,n,l){return _[0]=n[0]-l[0],_[1]=n[1]-l[1],_[2]=n[2]-l[2],_};he=new u.A(3),u.A!=Float32Array&&(he[0]=0,he[1]=0,he[2]=0);var Ce=function(_){var n=_[0],l=_[1];return n*n+l*l};function Me(_){const n=[];if(typeof _=="string")n.push({id:"default",url:_});else if(_&&_.length>0){const l=[];for(const{id:p,url:m}of _){const y=`${p}${m}`;l.indexOf(y)===-1&&(l.push(y),n.push({id:p,url:m}))}}return n}function ze(_,n,l){const p=_.split("?");return p[0]+=`${n}${l}`,p.join("?")}(function(){var _=new u.A(2);u.A!=Float32Array&&(_[0]=0,_[1]=0)})();class Re{constructor(n,l,p,m){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(l,m)}update(n,l,p){const{width:m,height:y}=n,S=!(this.size&&this.size[0]===m&&this.size[1]===y||p),{context:C}=this,{gl:P}=C;if(this.useMipmap=!!(l&&l.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!l||l.premultiply!==!1)),S)this.size=[m,y],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.b(n)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,n):P.texImage2D(P.TEXTURE_2D,0,this.format,m,y,0,this.format,P.UNSIGNED_BYTE,n.data);else{const{x:D,y:L}=p||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.b(n)?P.texSubImage2D(P.TEXTURE_2D,0,D,L,P.RGBA,P.UNSIGNED_BYTE,n):P.texSubImage2D(P.TEXTURE_2D,0,D,L,m,y,P.RGBA,P.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D)}bind(n,l,p){const{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),p!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=y.LINEAR),n!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,n),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,p||n),this.filter=n),l!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,l),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function te(_){const{userImage:n}=_;return!!(n&&n.render&&n.render())&&(_.data.replace(new Uint8Array(n.data.buffer)),!0)}class Fe extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:l,promiseResolve:p}of this.requestors)p(this._getImagesForIds(l));this.requestors=[]}}getImage(n){const l=this.images[n];if(l&&!l.data&&l.spriteData){const p=l.spriteData;l.data=new u.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),l.spriteData=null}return l}addImage(n,l){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,l)&&(this.images[n]=l)}_validate(n,l){let p=!0;const m=l.data||l.spriteData;return this._validateStretch(l.stretchX,m&&m.width)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "stretchX" value`))),p=!1),this._validateStretch(l.stretchY,m&&m.height)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "stretchY" value`))),p=!1),this._validateContent(l.content,l)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "content" value`))),p=!1),p}_validateStretch(n,l){if(!n)return!0;let p=0;for(const m of n){if(m[0]<p||m[1]<m[0]||l<m[1])return!1;p=m[1]}return!0}_validateContent(n,l){if(!n)return!0;if(n.length!==4)return!1;const p=l.spriteData,m=p&&p.width||l.data.width,y=p&&p.height||l.data.height;return!(n[0]<0||m<n[0]||n[1]<0||y<n[1]||n[2]<0||m<n[2]||n[3]<0||y<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,l,p=!0){const m=this.getImage(n);if(p&&(m.data.width!==l.data.width||m.data.height!==l.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=m.version+1,this.images[n]=l,this.updatedImages[n]=!0}removeImage(n){const l=this.images[n];delete this.images[n],delete this.patterns[n],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((l,p)=>{let m=!0;if(!this.isLoaded())for(const y of n)this.images[y]||(m=!1);this.isLoaded()||m?l(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:l})})}_getImagesForIds(n){const l={};for(const p of n){let m=this.getImage(p);m||(this.fire(new u.k("styleimagemissing",{id:p})),m=this.getImage(p)),m?l[p]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:u.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:n,height:l}=this.atlasImage;return{width:n,height:l}}getPattern(n){const l=this.patterns[n],p=this.getImage(n);if(!p)return null;if(l&&l.position.version===p.version)return l.position;if(l)l.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},y=new u.I(m,p);this.patterns[n]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const l=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Re(n,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const y in this.patterns)n.push(this.patterns[y].bin);const{w:l,h:p}=u.p(n),m=this.atlasImage;m.resize({width:l||1,height:p||1});for(const y in this.patterns){const{bin:S}=this.patterns[y],C=S.x+1,P=S.y+1,D=this.getImage(y).data,L=D.width,F=D.height;u.R.copy(D,m,{x:0,y:0},{x:C,y:P},{width:L,height:F}),u.R.copy(D,m,{x:0,y:F-1},{x:C,y:P-1},{width:L,height:1}),u.R.copy(D,m,{x:0,y:0},{x:C,y:P+F},{width:L,height:1}),u.R.copy(D,m,{x:L-1,y:0},{x:C-1,y:P},{width:1,height:F}),u.R.copy(D,m,{x:0,y:0},{x:C+L,y:P},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const l of n){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const p=this.getImage(l);p||u.w(`Image with ID: "${l}" was not found`),te(p)&&this.updateImage(l,p)}}}const Be=1e20;function Ge(_,n,l,p,m,y,S,C,P){for(let D=n;D<n+p;D++)it(_,l*y+D,y,m,S,C,P);for(let D=l;D<l+m;D++)it(_,D*y+n,1,p,S,C,P)}function it(_,n,l,p,m,y,S){y[0]=0,S[0]=-Be,S[1]=Be,m[0]=_[n];for(let C=1,P=0,D=0;C<p;C++){m[C]=_[n+C*l];const L=C*C;do{const F=y[P];D=(m[C]-m[F]+L-F*F)/(C-F)/2}while(D<=S[P]&&--P>-1);P++,y[P]=C,S[P]=D,S[P+1]=Be}for(let C=0,P=0;C<p;C++){for(;S[P+1]<C;)P++;const D=y[P],L=C-D;_[n+C*l]=m[D]+L*L}}class Je{constructor(n,l){this.requestManager=n,this.localIdeographFontFamily=l,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return u._(this,void 0,void 0,function*(){const l=[];for(const y in n)for(const S of n[y])l.push(this._getAndCacheGlyphsPromise(y,S));const p=yield Promise.all(l),m={};for(const{stack:y,id:S,glyph:C}of p)m[y]||(m[y]={}),m[y][S]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return m})}_getAndCacheGlyphsPromise(n,l){return u._(this,void 0,void 0,function*(){let p=this.entries[n];p||(p=this.entries[n]={glyphs:{},requests:{},ranges:{}});let m=p.glyphs[l];if(m!==void 0)return{stack:n,id:l,glyph:m};if(m=this._tinySDF(p,n,l),m)return p.glyphs[l]=m,{stack:n,id:l,glyph:m};const y=Math.floor(l/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[y])return{stack:n,id:l,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[y]){const C=Je.loadGlyphRange(n,y,this.url,this.requestManager);p.requests[y]=C}const S=yield p.requests[y];for(const C in S)this._doesCharSupportLocalGlyph(+C)||(p.glyphs[+C]=S[+C]);return p.ranges[y]=!0,{stack:n,id:l,glyph:S[l]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(n))}_tinySDF(n,l,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let y=n.tinySDF;if(!y){let C="400";/bold/i.test(l)?C="900":/medium/i.test(l)?C="500":/light/i.test(l)&&(C="200"),y=n.tinySDF=new Je.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:C})}const S=y.draw(String.fromCharCode(p));return{id:p,bitmap:new u.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}Je.loadGlyphRange=function(_,n,l,p){return u._(this,void 0,void 0,function*(){const m=256*n,y=m+255,S=p.transformRequest(l.replace("{fontstack}",_).replace("{range}",`${m}-${y}`),"Glyphs"),C=yield u.l(S,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${n}, ${m}-${y}`);const P={};for(const D of u.n(C.data))P[D.id]=D;return P})},Je.TinySDF=class{constructor({fontSize:_=24,buffer:n=3,radius:l=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:S="normal"}={}){this.buffer=n,this.cutoff=p,this.radius=l;const C=this.size=_+4*n,P=this._createCanvas(C),D=this.ctx=P.getContext("2d",{willReadFrequently:!0});D.font=`${S} ${y} ${_}px ${m}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(_){const n=document.createElement("canvas");return n.width=n.height=_,n}draw(_){const{width:n,actualBoundingBoxAscent:l,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(_),S=Math.ceil(l),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-m))),P=Math.min(this.size-this.buffer,S+Math.ceil(p)),D=C+2*this.buffer,L=P+2*this.buffer,F=Math.max(D*L,0),U=new Uint8ClampedArray(F),K={data:U,width:D,height:L,glyphWidth:C,glyphHeight:P,glyphTop:S,glyphLeft:0,glyphAdvance:n};if(C===0||P===0)return K;const{ctx:Q,buffer:se,gridInner:ue,gridOuter:ce}=this;Q.clearRect(se,se,C,P),Q.fillText(_,se,se+S);const me=Q.getImageData(se,se,C,P);ce.fill(Be,0,F),ue.fill(0,0,F);for(let re=0;re<P;re++)for(let _e=0;_e<C;_e++){const xe=me.data[4*(re*C+_e)+3]/255;if(xe===0)continue;const Te=(re+se)*D+_e+se;if(xe===1)ce[Te]=0,ue[Te]=Be;else{const Oe=.5-xe;ce[Te]=Oe>0?Oe*Oe:0,ue[Te]=Oe<0?Oe*Oe:0}}Ge(ce,0,0,D,L,D,this.f,this.v,this.z),Ge(ue,se,se,C,P,D,this.f,this.v,this.z);for(let re=0;re<F;re++){const _e=Math.sqrt(ce[re])-Math.sqrt(ue[re]);U[re]=Math.round(255-255*(_e/this.radius+this.cutoff))}return K}};class Ne{constructor(){this.specification=u.v.light.position}possiblyEvaluate(n,l){return u.x(n.expression.evaluate(l))}interpolate(n,l,p){return{x:u.y.number(n.x,l.x,p),y:u.y.number(n.y,l.y,p),z:u.y.number(n.z,l.z,p)}}}let $e;class at extends u.E{constructor(n){super(),$e=$e||new u.q({anchor:new u.D(u.v.light.anchor),position:new Ne,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T($e),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,l={}){if(!this._validate(u.r,n,l))for(const p in n){const m=n[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,p){return(!p||p.validate!==!1)&&u.t(this,n.call(u.u,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const St=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Mt extends u.E{constructor(n){super(),this._transitionable=new u.T(St),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(n,l={}){if(!this._validate(u.B,n,l)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in n){const m=n[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,p={}){return(p==null?void 0:p.validate)!==!1&&u.t(this,n.call(u.u,u.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class Nn{constructor(n,l){this.width=n,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,l){const p=n.join(",")+String(l);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(n,l)),this.dashEntry[p]}getDashRanges(n,l,p){const m=[];let y=n.length%2==1?-n[n.length-1]*p:0,S=n[0]*p,C=!0;m.push({left:y,right:S,isDash:C,zeroLength:n[0]===0});let P=n[0];for(let D=1;D<n.length;D++){C=!C;const L=n[D];y=P*p,P+=L,S=P*p,m.push({left:y,right:S,isDash:C,zeroLength:L===0})}return m}addRoundDash(n,l,p){const m=l/2;for(let y=-p;y<=p;y++){const S=this.width*(this.nextRow+p+y);let C=0,P=n[C];for(let D=0;D<this.width;D++){D/P.right>1&&(P=n[++C]);const L=Math.abs(D-P.left),F=Math.abs(D-P.right),U=Math.min(L,F);let K;const Q=y/p*(m+1);if(P.isDash){const se=m-Math.abs(Q);K=Math.sqrt(U*U+se*se)}else K=m-Math.sqrt(U*U+Q*Q);this.data[S+D]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(n){for(let C=n.length-1;C>=0;--C){const P=n[C],D=n[C+1];P.zeroLength?n.splice(C,1):D&&D.isDash===P.isDash&&(D.left=P.left,n.splice(C,1))}const l=n[0],p=n[n.length-1];l.isDash===p.isDash&&(l.left=p.left-this.width,p.right=l.right+this.width);const m=this.width*this.nextRow;let y=0,S=n[y];for(let C=0;C<this.width;C++){C/S.right>1&&(S=n[++y]);const P=Math.abs(C-S.left),D=Math.abs(C-S.right),L=Math.min(P,D);this.data[m+C]=Math.max(0,Math.min(255,(S.isDash?L:-L)+128))}}addDash(n,l){const p=l?7:0,m=2*p+1;if(this.nextRow+m>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let C=0;C<n.length;C++)y+=n[C];if(y!==0){const C=this.width/y,P=this.getDashRanges(n,this.width,C);l?this.addRoundDash(P,C,p):this.addRegularDash(P)}const S={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:y};return this.nextRow+=m,this.dirty=!0,S}bind(n){const l=n.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const Zt="maplibre_preloaded_worker_pool";class Yt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Yt.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Zt]}numActive(){return Object.keys(this.active).length}}const _n=Math.floor(A.hardwareConcurrency/2);let Jt,dn;function _r(){return Jt||(Jt=new Yt),Jt}Yt.workerCount=u.C(globalThis)?Math.max(Math.min(_n,3),1):1;class li{constructor(n,l){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=l;const p=this.workerPool.acquire(l);for(let m=0;m<p.length;m++){const y=new u.F(p[m],l);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,l){const p=[];for(const m of this.actors)p.push(m.sendAsync({type:n,data:l}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,l){for(const p of this.actors)p.registerMessageHandler(n,l)}}function Gr(){return dn||(dn=new li(_r(),u.G),dn.registerMessageHandler("GR",(_,n,l)=>u.m(n,l))),dn}function wn(_,n){const l=u.H();return u.J(l,l,[1,1,0]),u.K(l,l,[.5*_.width,.5*_.height,1]),u.L(l,l,_.calculatePosMatrix(n.toUnwrapped()))}function hr(_,n,l,p,m,y){const S=function(F,U,K){if(F)for(const Q of F){const se=U[Q];if(se&&se.source===K&&se.type==="fill-extrusion")return!0}else for(const Q in U){const se=U[Q];if(se.source===K&&se.type==="fill-extrusion")return!0}return!1}(m&&m.layers,n,_.id),C=y.maxPitchScaleFactor(),P=_.tilesIn(p,C,S);P.sort(jn);const D=[];for(const F of P)D.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(n,l,_._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,m,y,C,wn(_.transform,F.tileID))});const L=function(F){const U={},K={};for(const Q of F){const se=Q.queryResults,ue=Q.wrappedTileID,ce=K[ue]=K[ue]||{};for(const me in se){const re=se[me],_e=ce[me]=ce[me]||{},xe=U[me]=U[me]||[];for(const Te of re)_e[Te.featureIndex]||(_e[Te.featureIndex]=!0,xe.push(Te))}}return U}(D);for(const F in L)L[F].forEach(U=>{const K=U.feature,Q=_.getFeatureState(K.layer["source-layer"],K.id);K.source=K.layer.source,K.layer["source-layer"]&&(K.sourceLayer=K.layer["source-layer"]),K.state=Q});return L}function jn(_,n){const l=_.tileID,p=n.tileID;return l.overscaledZ-p.overscaledZ||l.canonical.y-p.canonical.y||l.wrap-p.wrap||l.canonical.x-p.canonical.x}function Dr(_,n,l){return u._(this,void 0,void 0,function*(){let p=_;if(_.url?p=(yield u.h(n.transformRequest(_.url,"Source"),l)).data:yield A.frameAsync(l),!p)return null;const m=u.M(u.e(p,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(m.vectorLayerIds=p.vector_layers.map(y=>y.id)),m})}class ke{constructor(n,l){n&&(l?this.setSouthWest(n).setNorthEast(l):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof u.N?new u.N(n.lng,n.lat):u.N.convert(n),this}setSouthWest(n){return this._sw=n instanceof u.N?new u.N(n.lng,n.lat):u.N.convert(n),this}extend(n){const l=this._sw,p=this._ne;let m,y;if(n instanceof u.N)m=n,y=n;else{if(!(n instanceof ke))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(ke.convert(n)):this.extend(u.N.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(u.N.convert(n)):this;if(m=n._sw,y=n._ne,!m||!y)return this}return l||p?(l.lng=Math.min(m.lng,l.lng),l.lat=Math.min(m.lat,l.lat),p.lng=Math.max(y.lng,p.lng),p.lat=Math.max(y.lat,p.lat)):(this._sw=new u.N(m.lng,m.lat),this._ne=new u.N(y.lng,y.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:l,lat:p}=u.N.convert(n);let m=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m}static convert(n){return n instanceof ke?n:n&&new ke(n)}static fromLngLat(n,l=0){const p=360*l/40075017,m=p/Math.cos(Math.PI/180*n.lat);return new ke(new u.N(n.lng-m,n.lat-p),new u.N(n.lng+m,n.lat+p))}adjustAntiMeridian(){const n=new u.N(this._sw.lng,this._sw.lat),l=new u.N(this._ne.lng,this._ne.lat);return new ke(n,n.lng>l.lng?new u.N(l.lng+360,l.lat):l)}}class $n{constructor(n,l,p){this.bounds=ke.convert(this.validateBounds(n)),this.minzoom=l||0,this.maxzoom=p||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const l=Math.pow(2,n.z),p=Math.floor(u.O(this.bounds.getWest())*l),m=Math.floor(u.Q(this.bounds.getNorth())*l),y=Math.ceil(u.O(this.bounds.getEast())*l),S=Math.ceil(u.Q(this.bounds.getSouth())*l);return n.x>=p&&n.x<y&&n.y>=m&&n.y<S}}class nr extends u.E{constructor(n,l,p,m){if(super(),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(l,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield Dr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(u.e(this,n),n.bounds&&(this.tileBounds=new $n(n.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new u.j(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(n){return u._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(l,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((y,S)=>{n.reloadPromise={resolve:y,reject:S}})}else n.actor=this.dispatcher.getActor(),m="LT";n.abortController=new AbortController;try{const y=yield n.actor.sendAsync({type:m,data:p},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,y)}catch(y){if(delete n.abortController,n.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,l){if(l&&l.resourceTiming&&(n.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&n.setExpiryData(l),n.loadVectorData(l,this.map.painter),n.reloadPromise){const p=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(p.resolve).catch(p.reject)}}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Dt extends u.E{constructor(n,l,p,m){super(),this.id=n,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},l),u.e(this,u.M(l,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield Dr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(u.e(this,n),n.bounds&&(this.tileBounds=new $n(n.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new u.j(n))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return u.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return u._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const p=yield G.getImage(this.map._requestManager.transformRequest(l,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const m=this.map.painter.context,y=m.gl,S=p.data;n.texture=this.map.painter.getTileTexture(S.width),n.texture?n.texture.update(S,{useMipmap:!0}):(n.texture=new Re(m,S,y.RGBA,{useMipmap:!0}),n.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}})}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class Vt extends Dt{constructor(n,l,p,m){super(n,l,p,m),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(n){return u._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(l,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const m=yield G.getImage(p,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(m&&m.data){const y=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&n.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const S=u.b(y)&&u.U()?y:yield this.readImageNow(y),C={type:this.type,uid:n.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const P=yield n.actor.sendAsync({type:"LDT",data:C});n.dem=P,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(m){if(delete n.abortController,n.aborted)n.state="unloaded";else if(m)throw n.state="errored",m}})}readImageNow(n){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const l=n.width+2,p=n.height+2;try{return new u.R({width:l,height:p},yield u.W(n,-1,-1,l,p))}catch{}}return A.getImageData(n,1)})}_getNeighboringTiles(n){const l=n.canonical,p=Math.pow(2,l.z),m=(l.x-1+p)%p,y=l.x===0?n.wrap-1:n.wrap,S=(l.x+1+p)%p,C=l.x+1===p?n.wrap+1:n.wrap,P={};return P[new u.S(n.overscaledZ,y,l.z,m,l.y).key]={backfilled:!1},P[new u.S(n.overscaledZ,C,l.z,S,l.y).key]={backfilled:!1},l.y>0&&(P[new u.S(n.overscaledZ,y,l.z,m,l.y-1).key]={backfilled:!1},P[new u.S(n.overscaledZ,n.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},P[new u.S(n.overscaledZ,C,l.z,S,l.y-1).key]={backfilled:!1}),l.y+1<p&&(P[new u.S(n.overscaledZ,y,l.z,m,l.y+1).key]={backfilled:!1},P[new u.S(n.overscaledZ,n.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},P[new u.S(n.overscaledZ,C,l.z,S,l.y+1).key]={backfilled:!1}),P}unloadTile(n){return u._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class Rr extends u.E{constructor(n,l,p,m){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(m),this._data=l.data,this._options=u.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const y=u.X/this.tileSize;l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*y,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*y,extent:u.X,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.X,radius:(l.clusterRadius||50)*y,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return u._(this,void 0,void 0,function*(){const n=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,l,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:l,offset:p}})}_updateWorkerData(n){return u._(this,void 0,void 0,function*(){const l=u.e({type:this.type},this.workerOptions);n?l.dataDiff=n:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(A.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let m=null;p.resourceTiming&&p.resourceTiming[this.id]&&(m=p.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&u.e(y,{resourceTiming:m}),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(n){return u._(this,void 0,void 0,function*(){const l=n.actor?"RT":"LT";n.actor=this.actor;const p={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.abortController=new AbortController;const m=yield this.actor.sendAsync({type:l,data:p},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(m,this.map.painter,l==="RT")})}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var wt=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Lr extends u.E{constructor(n,l,p,m){super(),this.id=n,this.dispatcher=p,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=l}load(n){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield G.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,n&&(this.coordinates=n),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new u.j(l))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const l=n.map(u.Z.fromLngLat);this.tileID=function(m){let y=1/0,S=1/0,C=-1/0,P=-1/0;for(const U of m)y=Math.min(y,U.x),S=Math.min(S,U.y),C=Math.max(C,U.x),P=Math.max(P,U.y);const D=Math.max(C-y,P-S),L=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),F=Math.pow(2,L);return new u.a1(L,Math.floor((y+C)/2*F),Math.floor((S+P)/2*F))}(l),this.minzoom=this.maxzoom=this.tileID.z;const p=l.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,u.X,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,u.X),this._boundsArray.emplaceBack(p[2].x,p[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,l=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,wt.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Re(n,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Si extends Lr{constructor(n,l,p,m){super(n,l,p,m),this.roundZoom=!0,this.type="video",this.options=l}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const l of n.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield u.a3(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new u.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const l=this.video.seekable;n<l.start(0)||n>l.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,l=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,wt.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new Re(n,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class dr extends Lr{constructor(n,l,p,m){super(n,l,p,m),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(S=>typeof S!="number"))||this.fire(new u.j(new u.a2(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${n}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${n}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,p=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,wt.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Re(l,this.canvas,p.RGBA,{premultiply:!0});let m=!1;for(const y in this.tiles){const S=this.tiles[y];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,m=!0)}m&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const ms={},Ti=_=>{switch(_){case"geojson":return Rr;case"image":return Lr;case"raster":return Dt;case"raster-dem":return Vt;case"vector":return nr;case"video":return Si;case"canvas":return dr}return ms[_]},Ue="RTLPluginLoaded";class vr extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Gr()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return u._(this,arguments,void 0,function*(l,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Ue))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Yn=null;function Pn(){return Yn||(Yn=new vr),Yn}class Hr{constructor(n,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=u.a4(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const l=n+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,l,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(m,y){const S={};if(!y)return S;for(const C of m){const P=C.layerIds.map(D=>y.getLayer(D)).filter(Boolean);if(P.length!==0){C.layers=P,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(D=>P.filter(L=>L.id===D)[0]));for(const D of P)S[D.id]=C}}return S}(n.buckets,l.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const y=this.buckets[m];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!p)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const y=this.buckets[m];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,Pn().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(m).queryRadius(y))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(n)}const l=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Re(n,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Re(n,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,l,p,m,y,S,C,P,D,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:S,tileSize:this.tileSize,pixelPosMatrix:L,transform:P,params:C,queryPadding:this.queryPadding*D},n,l,p):{}}querySourceFeatures(n,l){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),y=l&&l.sourceLayer?l.sourceLayer:"",S=m._geojsonTileLayer||m[y];if(!S)return;const C=u.a7(l&&l.filter),{z:P,x:D,y:L}=this.tileID.canonical,F={z:P,x:D,y:L};for(let U=0;U<S.length;U++){const K=S.feature(U);if(C.needGeometry){const ue=u.a8(K,!0);if(!C.filter(new u.z(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!C.filter(new u.z(this.tileID.overscaledZ),K))continue;const Q=p.getId(K,y),se=new u.a9(K,P,D,L,Q);se.tile=F,n.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const l=this.expirationTime;if(n.cacheControl){const p=u.aa(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(l)if(this.expirationTime<l)m=!0;else{const y=this.expirationTime-l;y?this.expirationTime=p+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!l.style.hasLayer(m))continue;const y=this.buckets[m],S=y.layers[0].sourceLayer||"_geojsonTileLayer",C=p[S],P=n[S];if(!C||!P||Object.keys(P).length===0)continue;y.update(P,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=l&&l.style&&l.style.getLayer(m);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=A.now()+n}setDependencies(n,l){const p={};for(const m of l)p[m]=!0;this.dependencies[n]=p}hasDependency(n,l){for(const p of n){const m=this.dependencies[p];if(m){for(const y of l)if(m[y])return!0}}return!1}}class qe{constructor(n,l){this.max=n,this.onRemove=l,this.reset()}reset(){for(const n in this.data)for(const l of this.data[n])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(n,l,p){const m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const y={value:l,timeout:void 0};if(p!==void 0&&(y.timeout=setTimeout(()=>{this.remove(n,y)},p)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const l=this.data[n].shift();return l.timeout&&clearTimeout(l.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),l.value}getByKey(n){const l=this.data[n];return l?l[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,l){if(!this.has(n))return this;const p=n.wrapped().key,m=l===void 0?0:this.data[p].indexOf(l),y=this.data[p][m];return this.data[p].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(y.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(n){const l=[];for(const p in this.data)for(const m of this.data[p])n(m.value)||l.push(m);for(const p of l)this.remove(p.value.tileID,p)}}class xt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,l,p){const m=String(l);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][m]=this.stateChanges[n][m]||{},u.e(this.stateChanges[n][m],p),this.deletedStates[n]===null){this.deletedStates[n]={};for(const y in this.state[n])y!==m&&(this.deletedStates[n][y]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][m]===null){this.deletedStates[n][m]={};for(const y in this.state[n][m])p[y]||(this.deletedStates[n][m][y]=null)}else for(const y in p)this.deletedStates[n]&&this.deletedStates[n][m]&&this.deletedStates[n][m][y]===null&&delete this.deletedStates[n][m][y]}removeFeatureState(n,l,p){if(this.deletedStates[n]===null)return;const m=String(l);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&l!==void 0)this.deletedStates[n][m]!==null&&(this.deletedStates[n][m]=this.deletedStates[n][m]||{},this.deletedStates[n][m][p]=null);else if(l!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][m])for(p in this.deletedStates[n][m]={},this.stateChanges[n][m])this.deletedStates[n][m][p]=null;else this.deletedStates[n][m]=null;else this.deletedStates[n]=null}getState(n,l){const p=String(l),m=u.e({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const y=this.deletedStates[n][l];if(y===null)return{};for(const S in y)delete m[S]}return m}initializeTileState(n,l){n.setFeatureState(this.state,l)}coalesceChanges(n,l){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const y={};for(const S in this.stateChanges[m])this.state[m][S]||(this.state[m][S]={}),u.e(this.state[m][S],this.stateChanges[m][S]),y[S]=this.state[m][S];p[m]=y}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const y={};if(this.deletedStates[m]===null)for(const S in this.state[m])y[S]={},this.state[m][S]={};else for(const S in this.deletedStates[m]){if(this.deletedStates[m][S]===null)this.state[m][S]={};else for(const C of Object.keys(this.deletedStates[m][S]))delete this.state[m][S][C];y[S]=this.state[m][S]}p[m]=p[m]||{},u.e(p[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const m in n)n[m].setFeatureState(p,l)}}class bt extends u.E{constructor(n,l,p){super(),this.id=n,this.dispatcher=p,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,y,S,C)=>{const P=new(Ti(y.type))(m,y,S,C);if(P.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${P.id}`);return P})(n,l,p,this),this._tiles={},this._cache=new qe(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new xt,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const l=this._tiles[n];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,l,p){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,l,p)}catch(m){n.state="errored",m.status!==404?this._source.fire(new u.j(m,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new u.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const p=this._tiles[l];p.upload(n),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(rr).map(n=>n.key)}getRenderableIds(n){const l=[];for(const p in this._tiles)this._isIdRenderable(p,n)&&l.push(this._tiles[p]);return n?l.sort((p,m)=>{const y=p.tileID,S=m.tileID,C=new u.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),P=new u.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-S.overscaledZ||P.y-C.y||P.x-C.x}).map(p=>p.tileID.key):l.map(p=>p.tileID).sort(rr).map(p=>p.key)}hasRenderableParent(n){const l=this.findLoadedParent(n,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(n,l){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(l||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,l){return u._(this,void 0,void 0,function*(){const p=this._tiles[n];p&&(p.state!=="loading"&&(p.state=l),yield this._loadTile(p,n,l))})}_tileLoaded(n,l,p){n.timeAdded=A.now(),p==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(l,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const l=this.getRenderableIds();for(let m=0;m<l.length;m++){const y=l[m];if(n.neighboringTiles&&n.neighboringTiles[y]){const S=this.getTileByID(y);p(n,S),p(S,n)}}function p(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let S=y.tileID.canonical.x-m.tileID.canonical.x;const C=y.tileID.canonical.y-m.tileID.canonical.y,P=Math.pow(2,m.tileID.canonical.z),D=y.tileID.key;S===0&&C===0||Math.abs(C)>1||(Math.abs(S)>1&&(Math.abs(S+P)===1?S+=P:Math.abs(S-P)===1&&(S-=P)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,S,C),m.neighboringTiles&&m.neighboringTiles[D]&&(m.neighboringTiles[D].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,l,p,m){for(const y in this._tiles){let S=this._tiles[y];if(m[y]||!S.hasData()||S.tileID.overscaledZ<=l||S.tileID.overscaledZ>p)continue;let C=S.tileID;for(;S&&S.tileID.overscaledZ>l+1;){const D=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[D.key],S&&S.hasData()&&(C=D)}let P=C;for(;P.overscaledZ>l;)if(P=P.scaledTo(P.overscaledZ-1),n[P.key]){m[C.key]=C;break}}}findLoadedParent(n,l){if(n.key in this._loadedParentTiles){const p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=l?p:null}for(let p=n.overscaledZ-1;p>=l;p--){const m=n.scaledTo(p),y=this._getLoadedTile(m);if(y)return y}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const l=this._tiles[n.key];return l&&l.hasData()?l:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const l=Math.ceil(n.width/this._source.tileSize)+1,p=Math.ceil(n.height/this._source.tileSize)+1,m=Math.floor(l*p*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(n){const l=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,l){const p={};for(const m in this._tiles){const y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+l),p[y.tileID.key]=y}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(n,l,p,m,y,S){const C={},P={},D=Object.keys(n),L=A.now();for(const F of D){const U=n[F],K=this._tiles[F];if(!K||K.fadeEndTime!==0&&K.fadeEndTime<=L)continue;const Q=this.findLoadedParent(U,l),se=this.findLoadedSibling(U),ue=Q||se||null;ue&&(this._addTile(ue.tileID),C[ue.tileID.key]=ue.tileID),P[F]=U}this._retainLoadedChildren(P,m,p,n);for(const F in C)n[F]||(this._coveredTiles[F]=!0,n[F]=C[F]);if(S){const F={},U={};for(const K of y)this._tiles[K.key].hasData()?F[K.key]=K:U[K.key]=K;for(const K in U){const Q=U[K].children(this._source.maxzoom);this._tiles[Q[0].key]&&this._tiles[Q[1].key]&&this._tiles[Q[2].key]&&this._tiles[Q[3].key]&&(F[Q[0].key]=n[Q[0].key]=Q[0],F[Q[1].key]=n[Q[1].key]=Q[1],F[Q[2].key]=n[Q[2].key]=Q[2],F[Q[3].key]=n[Q[3].key]=Q[3],delete U[K])}for(const K in U){const Q=U[K],se=this.findLoadedParent(Q,this._source.minzoom),ue=this.findLoadedSibling(Q),ce=se||ue||null;if(ce){F[ce.tileID.key]=n[ce.tileID.key]=ce.tileID;for(const me in F)F[me].isChildOf(ce.tileID)&&delete F[me]}}for(const K in this._tiles)F[K]||(this._coveredTiles[K]=!0)}}update(n,l){if(!this._sourceLoaded||this._paused)return;let p;this.transform=n,this.terrain=l,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new u.S(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(p=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(p=p.filter(L=>this._source.hasTile(L)))):p=[];const m=n.coveringZoomLevel(this._source),y=Math.max(m-bt.maxOverzooming,this._source.minzoom),S=Math.max(m+bt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const F of p)if(F.canonical.z>this._source.minzoom){const U=F.scaledTo(F.canonical.z-1);L[U.key]=U;const K=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));L[K.key]=K}p=p.concat(Object.values(L))}const C=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=this._updateRetainedTiles(p,m);ui(this._source.type)&&this._updateCoveredAndRetainedTiles(P,y,S,m,p,l);for(const L in P)this._tiles[L].clearFadeHold();const D=u.ab(this._tiles,P);for(const L of D){const F=this._tiles[L];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,l){var p;const m={},y={},S=Math.max(l-bt.maxOverzooming,this._source.minzoom),C=Math.max(l+bt.maxUnderzooming,this._source.minzoom),P={};for(const D of n){const L=this._addTile(D);m[D.key]=D,L.hasData()||l<this._source.maxzoom&&(P[D.key]=D)}this._retainLoadedChildren(P,l,C,m);for(const D of n){let L=this._tiles[D.key];if(L.hasData())continue;if(l+1>this._source.maxzoom){const U=D.children(this._source.maxzoom)[0],K=this.getTile(U);if(K&&K.hasData()){m[U.key]=U;continue}}else{const U=D.children(this._source.maxzoom);if(m[U[0].key]&&m[U[1].key]&&m[U[2].key]&&m[U[3].key])continue}let F=L.wasRequested();for(let U=D.overscaledZ-1;U>=S;--U){const K=D.scaledTo(U);if(y[K.key])break;if(y[K.key]=!0,L=this.getTile(K),!L&&F&&(L=this._addTile(K)),L){const Q=L.hasData();if((Q||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||F)&&(m[K.key]=K),F=L.wasRequested(),Q)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const l=[];let p,m=this._tiles[n].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}l.push(m.key);const y=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(y),p)break;m=y}for(const y of l)this._loadedParentTiles[y]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const l=this._tiles[n].tileID,p=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=p}}_addTile(n){let l=this._tiles[n.key];if(l)return l;l=this._cache.getAndRemove(n),l&&(this._setTileReloadTimer(n.key,l),l.tileID=n,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,l)));const p=l;return l||(l=new Hr(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(l,n.key,l.state)),l.uses++,this._tiles[n.key]=l,p||this._source.fire(new u.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(n,l){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const p=l.getExpiryTimeout();p&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},p))}_removeTile(n){const l=this._tiles[n];l&&(l.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(n){const l=n.sourceDataType;n.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&l==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,l,p){const m=[],y=this.transform;if(!y)return m;const S=p?y.getCameraQueryGeometry(n):n,C=n.map(Q=>y.pointCoordinate(Q,this.terrain)),P=S.map(Q=>y.pointCoordinate(Q,this.terrain)),D=this.getIds();let L=1/0,F=1/0,U=-1/0,K=-1/0;for(const Q of P)L=Math.min(L,Q.x),F=Math.min(F,Q.y),U=Math.max(U,Q.x),K=Math.max(K,Q.y);for(let Q=0;Q<D.length;Q++){const se=this._tiles[D[Q]];if(se.holdingForFade())continue;const ue=se.tileID,ce=Math.pow(2,y.zoom-se.tileID.overscaledZ),me=l*se.queryPadding*u.X/se.tileSize/ce,re=[ue.getTilePoint(new u.Z(L,F)),ue.getTilePoint(new u.Z(U,K))];if(re[0].x-me<u.X&&re[0].y-me<u.X&&re[1].x+me>=0&&re[1].y+me>=0){const _e=C.map(Te=>ue.getTilePoint(Te)),xe=P.map(Te=>ue.getTilePoint(Te));m.push({tile:se,tileID:ue,queryGeometry:_e,cameraQueryGeometry:xe,scale:ce})}}return m}getVisibleCoordinates(n){const l=this.getRenderableIds(n).map(p=>this._tiles[p].tileID);for(const p of l)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(ui(this._source.type)){const n=A.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=n)return!0}return!1}setFeatureState(n,l,p){this._state.updateState(n=n||"_geojsonTileLayer",l,p)}removeFeatureState(n,l,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",l,p)}getFeatureState(n,l){return this._state.getState(n=n||"_geojsonTileLayer",l)}setDependencies(n,l,p){const m=this._tiles[n];m&&m.setDependencies(l,p)}reloadTilesForDependencies(n,l){for(const p in this._tiles)this._tiles[p].hasDependency(n,l)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(n,l))}}function rr(_,n){const l=Math.abs(2*_.wrap)-+(_.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return _.overscaledZ-n.overscaledZ||p-l||n.canonical.y-_.canonical.y||n.canonical.x-_.canonical.x}function ui(_){return _==="raster"||_==="image"||_==="video"}bt.maxOverzooming=10,bt.maxUnderzooming=3;class Tt{constructor(n,l){this.reset(n,l)}reset(n,l){this.points=n||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=u.ac(n,0,1);let l=1,p=this._distances[l];const m=n*this.paddedLength+this.padding;for(;p<m&&l<this._distances.length;)p=this._distances[++l];const y=l-1,S=this._distances[y],C=p-S,P=C>0?(m-S)/C:0;return this.points[y].mult(1-P).add(this.points[l].mult(P))}}function Ci(_,n){let l=!0;return _==="always"||_!=="never"&&n!=="never"||(l=!1),l}class Wi{constructor(n,l,p){const m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(n/p),this.yCellCount=Math.ceil(l/p);for(let S=0;S<this.xCellCount*this.yCellCount;S++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=l,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,l,p,m,y){this._forEachCell(l,p,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(n,l,p,m){this._forEachCell(l-m,p-m,l+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(l),this.circles.push(p),this.circles.push(m)}_insertBoxCell(n,l,p,m,y,S){this.boxCells[y].push(S)}_insertCircleCell(n,l,p,m,y,S){this.circleCells[y].push(S)}_query(n,l,p,m,y,S,C){if(p<0||n>this.width||m<0||l>this.height)return[];const P=[];if(n<=0&&l<=0&&this.width<=p&&this.height<=m){if(y)return[{key:null,x1:n,y1:l,x2:p,y2:m}];for(let D=0;D<this.boxKeys.length;D++)P.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const L=this.circles[3*D],F=this.circles[3*D+1],U=this.circles[3*D+2];P.push({key:this.circleKeys[D],x1:L-U,y1:F-U,x2:L+U,y2:F+U})}}else this._forEachCell(n,l,p,m,this._queryCell,P,{hitTest:y,overlapMode:S,seenUids:{box:{},circle:{}}},C);return P}query(n,l,p,m){return this._query(n,l,p,m,!1,null)}hitTest(n,l,p,m,y,S){return this._query(n,l,p,m,!0,y,S).length>0}hitTestCircle(n,l,p,m,y){const S=n-p,C=n+p,P=l-p,D=l+p;if(C<0||S>this.width||D<0||P>this.height)return!1;const L=[];return this._forEachCell(S,P,C,D,this._queryCellCircle,L,{hitTest:!0,overlapMode:m,circle:{x:n,y:l,radius:p},seenUids:{box:{},circle:{}}},y),L.length>0}_queryCell(n,l,p,m,y,S,C,P){const{seenUids:D,hitTest:L,overlapMode:F}=C,U=this.boxCells[y];if(U!==null){const Q=this.bboxes;for(const se of U)if(!D.box[se]){D.box[se]=!0;const ue=4*se,ce=this.boxKeys[se];if(n<=Q[ue+2]&&l<=Q[ue+3]&&p>=Q[ue+0]&&m>=Q[ue+1]&&(!P||P(ce))&&(!L||!Ci(F,ce.overlapMode))&&(S.push({key:ce,x1:Q[ue],y1:Q[ue+1],x2:Q[ue+2],y2:Q[ue+3]}),L))return!0}}const K=this.circleCells[y];if(K!==null){const Q=this.circles;for(const se of K)if(!D.circle[se]){D.circle[se]=!0;const ue=3*se,ce=this.circleKeys[se];if(this._circleAndRectCollide(Q[ue],Q[ue+1],Q[ue+2],n,l,p,m)&&(!P||P(ce))&&(!L||!Ci(F,ce.overlapMode))){const me=Q[ue],re=Q[ue+1],_e=Q[ue+2];if(S.push({key:ce,x1:me-_e,y1:re-_e,x2:me+_e,y2:re+_e}),L)return!0}}}return!1}_queryCellCircle(n,l,p,m,y,S,C,P){const{circle:D,seenUids:L,overlapMode:F}=C,U=this.boxCells[y];if(U!==null){const Q=this.bboxes;for(const se of U)if(!L.box[se]){L.box[se]=!0;const ue=4*se,ce=this.boxKeys[se];if(this._circleAndRectCollide(D.x,D.y,D.radius,Q[ue+0],Q[ue+1],Q[ue+2],Q[ue+3])&&(!P||P(ce))&&!Ci(F,ce.overlapMode))return S.push(!0),!0}}const K=this.circleCells[y];if(K!==null){const Q=this.circles;for(const se of K)if(!L.circle[se]){L.circle[se]=!0;const ue=3*se,ce=this.circleKeys[se];if(this._circlesCollide(Q[ue],Q[ue+1],Q[ue+2],D.x,D.y,D.radius)&&(!P||P(ce))&&!Ci(F,ce.overlapMode))return S.push(!0),!0}}}_forEachCell(n,l,p,m,y,S,C,P){const D=this._convertToXCellCoord(n),L=this._convertToYCellCoord(l),F=this._convertToXCellCoord(p),U=this._convertToYCellCoord(m);for(let K=D;K<=F;K++)for(let Q=L;Q<=U;Q++)if(y.call(this,n,l,p,m,this.xCellCount*Q+K,S,C,P))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,l,p,m,y,S){const C=m-n,P=y-l,D=p+S;return D*D>C*C+P*P}_circleAndRectCollide(n,l,p,m,y,S,C){const P=(S-m)/2,D=Math.abs(n-(m+P));if(D>P+p)return!1;const L=(C-y)/2,F=Math.abs(l-(y+L));if(F>L+p)return!1;if(D<=P||F<=L)return!0;const U=D-P,K=F-L;return U*U+K*K<=p*p}}function gs(_,n,l,p,m){const y=u.H();return n?(u.K(y,y,[1/m,1/m,1]),l||u.ad(y,y,p.angle)):u.L(y,p.labelPlaneMatrix,_),y}function ki(_,n,l,p,m){if(n){const y=u.ae(_);return u.K(y,y,[m,m,1]),l||u.ad(y,y,-p.angle),y}return p.glCoordMatrix}function oe(_,n,l,p){let m;p?(m=[_,n,p(_,n),1],u.af(m,m,l)):(m=[_,n,0,1],Nt(m,m,l));const y=m[3];return{point:new u.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function V(_,n){return .5+_/n*.5}function B(_,n){return _.x>=-n[0]&&_.x<=n[0]&&_.y>=-n[1]&&_.y<=n[1]}function X(_,n,l,p,m,y,S,C,P,D,L,F,U,K,Q){const se=p?_.textSizeData:_.iconSizeData,ue=u.ag(se,l.transform.zoom),ce=[256/l.width*2+1,256/l.height*2+1],me=p?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;me.clear();const re=_.lineVertexArray,_e=p?_.text.placedSymbolArray:_.icon.placedSymbolArray,xe=l.transform.width/l.transform.height;let Te=!1;for(let Oe=0;Oe<_e.length;Oe++){const We=_e.get(Oe);if(We.hidden||We.writingMode===u.ah.vertical&&!Te){yt(We.numGlyphs,me);continue}Te=!1;const et=oe(We.anchorX,We.anchorY,n,Q);if(!B(et.point,ce)){yt(We.numGlyphs,me);continue}const st=V(l.transform.cameraToCenterDistance,et.signedDistanceFromCamera),Ke=u.ai(se,ue,We),Xe=S?Ke/st:Ke*st,ht={getElevation:Q,labelPlaneMatrix:m,lineVertexArray:re,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:D,tileAnchorPoint:new u.P(We.anchorX,We.anchorY),unwrappedTileID:L,width:F,height:U,translation:K},Pt=ve(ht,We,Xe,!1,C,n,y,_.glyphOffsetArray,me,xe,P);Te=Pt.useVertical,(Pt.notEnoughRoom||Te||Pt.needsFlipping&&ve(ht,We,Xe,!0,C,n,y,_.glyphOffsetArray,me,xe,P).notEnoughRoom)&&yt(We.numGlyphs,me)}p?_.text.dynamicLayoutVertexBuffer.updateData(me):_.icon.dynamicLayoutVertexBuffer.updateData(me)}function J(_,n,l,p,m,y,S,C){const P=y.glyphStartIndex+y.numGlyphs,D=y.lineStartIndex,L=y.lineStartIndex+y.lineLength,F=n.getoffsetX(y.glyphStartIndex),U=n.getoffsetX(P-1),K=Ze(_*F,l,p,m,y.segment,D,L,C,S);if(!K)return null;const Q=Ze(_*U,l,p,m,y.segment,D,L,C,S);return Q?C.projectionCache.anyProjectionOccluded?null:{first:K,last:Q}:null}function pe(_,n,l,p){return _===u.ah.horizontal&&Math.abs(l.y-n.y)>Math.abs(l.x-n.x)*p?{useVertical:!0}:(_===u.ah.vertical?n.y<l.y:n.x>l.x)?{needsFlipping:!0}:null}function ve(_,n,l,p,m,y,S,C,P,D,L){const F=l/24,U=n.lineOffsetX*F,K=n.lineOffsetY*F;let Q;if(n.numGlyphs>1){const se=n.glyphStartIndex+n.numGlyphs,ue=n.lineStartIndex,ce=n.lineStartIndex+n.lineLength,me=J(F,C,U,K,p,n,L,_);if(!me)return{notEnoughRoom:!0};const re=oe(me.first.point.x,me.first.point.y,S,_.getElevation).point,_e=oe(me.last.point.x,me.last.point.y,S,_.getElevation).point;if(m&&!p){const xe=pe(n.writingMode,re,_e,D);if(xe)return xe}Q=[me.first];for(let xe=n.glyphStartIndex+1;xe<se-1;xe++)Q.push(Ze(F*C.getoffsetX(xe),U,K,p,n.segment,ue,ce,_,L));Q.push(me.last)}else{if(m&&!p){const ue=oe(_.tileAnchorPoint.x,_.tileAnchorPoint.y,y,_.getElevation).point,ce=n.lineStartIndex+n.segment+1,me=new u.P(_.lineVertexArray.getx(ce),_.lineVertexArray.gety(ce)),re=oe(me.x,me.y,y,_.getElevation),_e=re.signedDistanceFromCamera>0?re.point:function(Te,Oe,We,et,st,Ke){return we(Te,Oe,We,1,st,Ke)}(_.tileAnchorPoint,me,ue,0,y,_),xe=pe(n.writingMode,ue,_e,D);if(xe)return xe}const se=Ze(F*C.getoffsetX(n.glyphStartIndex),U,K,p,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,_,L);if(!se||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Q=[se]}for(const se of Q)u.aj(P,se.point,se.angle);return{}}function we(_,n,l,p,m,y){const S=_.add(_.sub(n)._unit()),C=m!==void 0?oe(S.x,S.y,m,y.getElevation).point:Ie(S.x,S.y,y).point,P=l.sub(C);return l.add(P._mult(p/P.mag()))}function fe(_,n,l){const p=n.projectionCache;if(p.projections[_])return p.projections[_];const m=new u.P(n.lineVertexArray.getx(_),n.lineVertexArray.gety(_)),y=Ie(m.x,m.y,n);if(y.signedDistanceFromCamera>0)return p.projections[_]=y.point,p.anyProjectionOccluded=p.anyProjectionOccluded||y.isOccluded,y.point;const S=_-l.direction;return function(C,P,D,L,F){return we(C,P,D,L,void 0,F)}(l.distanceFromAnchor===0?n.tileAnchorPoint:new u.P(n.lineVertexArray.getx(S),n.lineVertexArray.gety(S)),m,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,n)}function Ie(_,n,l){const p=_+l.translation[0],m=n+l.translation[1];let y;return!l.pitchWithMap&&l.projection.useSpecialProjectionForSymbols?(y=l.projection.projectTileCoordinates(p,m,l.unwrappedTileID,l.getElevation),y.point.x=(.5*y.point.x+.5)*l.width,y.point.y=(.5*-y.point.y+.5)*l.height):(y=oe(p,m,l.labelPlaneMatrix,l.getElevation),y.isOccluded=!1),y}function Ve(_,n,l){return _._unit()._perp()._mult(n*l)}function Pe(_,n,l,p,m,y,S,C,P){if(C.projectionCache.offsets[_])return C.projectionCache.offsets[_];const D=l.add(n);if(_+P.direction<p||_+P.direction>=m)return C.projectionCache.offsets[_]=D,D;const L=fe(_+P.direction,C,P),F=Ve(L.sub(l),S,P.direction),U=l.add(F),K=L.add(F);return C.projectionCache.offsets[_]=u.ak(y,D,U,K)||D,C.projectionCache.offsets[_]}function Ze(_,n,l,p,m,y,S,C,P){const D=p?_-n:_+n;let L=D>0?1:-1,F=0;p&&(L*=-1,F=Math.PI),L<0&&(F+=Math.PI);let U,K=L>0?y+m:y+m+1;C.projectionCache.cachedAnchorPoint?U=C.projectionCache.cachedAnchorPoint:(U=Ie(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=U);let Q,se,ue=U,ce=U,me=0,re=0;const _e=Math.abs(D),xe=[];let Te;for(;me+re<=_e;){if(K+=L,K<y||K>=S)return null;me+=re,ce=ue,se=Q;const et={absOffsetX:_e,direction:L,distanceFromAnchor:me,previousVertex:ce};if(ue=fe(K,C,et),l===0)xe.push(ce),Te=ue.sub(ce);else{let st;const Ke=ue.sub(ce);st=Ke.mag()===0?Ve(fe(K+L,C,et).sub(ue),l,L):Ve(Ke,l,L),se||(se=ce.add(st)),Q=Pe(K,st,ue,y,S,se,l,C,et),xe.push(se),Te=Q.sub(se)}re=Te.mag()}const Oe=Te._mult((_e-me)/re)._add(se||ce),We=F+Math.atan2(ue.y-ce.y,ue.x-ce.x);return xe.push(Oe),{point:Oe,angle:P?We:0,path:xe}}const mt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yt(_,n){for(let l=0;l<_;l++){const p=n.length;n.resize(p+4),n.float32.set(mt,3*p)}}function Nt(_,n,l){const p=n[0],m=n[1];return _[0]=l[0]*p+l[4]*m+l[12],_[1]=l[1]*p+l[5]*m+l[13],_[3]=l[3]*p+l[7]*m+l[15],_}const Et=100;class jt{constructor(n,l,p=new Wi(n.width+200,n.height+200,25),m=new Wi(n.width+200,n.height+200,25)){this.transform=n,this.mapProjection=l,this.grid=p,this.ignoredGrid=m,this.pitchFactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Et,this.screenBottomBoundary=n.height+Et,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,l,p,m,y,S,C,P,D,L,F){const U=n.anchorPointX+P[0],K=n.anchorPointY+P[1],Q=this.projectAndGetPerspectiveRatio(m,U,K,y,L),se=p*Q.perspectiveRatio;let ue;if(S||C)ue=this._projectCollisionBox(n,se,m,y,S,C,P,Q,L,F);else{const xe=Q.point.x+(F?F.x*se:0),Te=Q.point.y+(F?F.y*se:0);ue={allPointsOccluded:!1,box:[xe+n.x1*se,Te+n.y1*se,xe+n.x2*se,Te+n.y2*se]}}const[ce,me,re,_e]=ue.box;return this.mapProjection.useSpecialProjectionForSymbols&&(S?ue.allPointsOccluded:this.mapProjection.isOccluded(U,K,y))||Q.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ce,me,re,_e)||l!=="always"&&this.grid.hitTest(ce,me,re,_e,l,D)?{box:[ce,me,re,_e],placeable:!1,offscreen:!1}:{box:[ce,me,re,_e],placeable:!0,offscreen:this.isOffscreen(ce,me,re,_e)}}placeCollisionCircles(n,l,p,m,y,S,C,P,D,L,F,U,K,Q,se,ue){const ce=[],me=new u.P(l.anchorX,l.anchorY),re=this.getPerspectiveRatio(S,me.x,me.y,C,ue),_e=(F?y/re:y*re)/u.ap,xe={getElevation:ue,labelPlaneMatrix:P,lineVertexArray:p,pitchWithMap:F,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:me,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:se},Te=J(_e,m,l.lineOffsetX*_e,l.lineOffsetY*_e,!1,l,!1,xe);let Oe=!1,We=!1,et=!0;if(Te){const st=.5*K*re+Q,Ke=new u.P(-100,-100),Xe=new u.P(this.screenRightBoundary,this.screenBottomBoundary),ht=new Tt,Pt=Te.first,Ye=Te.last;let nt=[];for(let At=Pt.path.length-1;At>=1;At--)nt.push(Pt.path[At]);for(let At=1;At<Ye.path.length;At++)nt.push(Ye.path[At]);const Ct=2.5*st;if(D){const At=this.projectPathToScreenSpace(nt,xe,D);nt=At.some(Ft=>Ft.signedDistanceFromCamera<=0)?[]:At.map(Ft=>Ft.point)}let pn=[];if(nt.length>0){const At=nt[0].clone(),Ft=nt[0].clone();for(let mn=1;mn<nt.length;mn++)At.x=Math.min(At.x,nt[mn].x),At.y=Math.min(At.y,nt[mn].y),Ft.x=Math.max(Ft.x,nt[mn].x),Ft.y=Math.max(Ft.y,nt[mn].y);pn=At.x>=Ke.x&&Ft.x<=Xe.x&&At.y>=Ke.y&&Ft.y<=Xe.y?[nt]:Ft.x<Ke.x||At.x>Xe.x||Ft.y<Ke.y||At.y>Xe.y?[]:u.al([nt],Ke.x,Ke.y,Xe.x,Xe.y)}for(const At of pn){ht.reset(At,.25*st);let Ft=0;Ft=ht.length<=.5*st?1:Math.ceil(ht.paddedLength/Ct)+1;for(let mn=0;mn<Ft;mn++){const br=mn/Math.max(Ft-1,1),Ki=ht.lerp(br),gn=Ki.x+Et,Kr=Ki.y+Et;ce.push(gn,Kr,st,0);const Or=gn-st,wr=Kr-st,Br=gn+st,xs=Kr+st;if(et=et&&this.isOffscreen(Or,wr,Br,xs),We=We||this.isInsideGrid(Or,wr,Br,xs),n!=="always"&&this.grid.hitTestCircle(gn,Kr,st,n,U)&&(Oe=!0,!L))return{circles:[],offscreen:!1,collisionDetected:Oe}}}}return{circles:!L&&Oe||!We||re<this.perspectiveRatioCutoff?[]:ce,offscreen:et,collisionDetected:Oe}}projectPathToScreenSpace(n,l,p){return n.map(m=>oe(m.x,m.y,p,l.getElevation))}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let p=1/0,m=1/0,y=-1/0,S=-1/0;for(const L of n){const F=new u.P(L.x+Et,L.y+Et);p=Math.min(p,F.x),m=Math.min(m,F.y),y=Math.max(y,F.x),S=Math.max(S,F.y),l.push(F)}const C=this.grid.query(p,m,y,S).concat(this.ignoredGrid.query(p,m,y,S)),P={},D={};for(const L of C){const F=L.key;if(P[F.bucketInstanceId]===void 0&&(P[F.bucketInstanceId]={}),P[F.bucketInstanceId][F.featureIndex])continue;const U=[new u.P(L.x1,L.y1),new u.P(L.x2,L.y1),new u.P(L.x2,L.y2),new u.P(L.x1,L.y2)];u.am(l,U)&&(P[F.bucketInstanceId][F.featureIndex]=!0,D[F.bucketInstanceId]===void 0&&(D[F.bucketInstanceId]=[]),D[F.bucketInstanceId].push(F.featureIndex))}return D}insertCollisionBox(n,l,p,m,y,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:S,overlapMode:l},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,l,p,m,y,S){const C=p?this.ignoredGrid:this.grid,P={bucketInstanceId:m,featureIndex:y,collisionGroupID:S,overlapMode:l};for(let D=0;D<n.length;D+=4)C.insertCircle(P,n[D],n[D+1],n[D+2])}projectAndGetPerspectiveRatio(n,l,p,m,y){let S;y?(S=[l,p,y(l,p),1],u.af(S,S,n)):(S=[l,p,0,1],Nt(S,S,n));const C=S[3];return{point:new u.P((S[0]/C+1)/2*this.transform.width+Et,(-S[1]/C+1)/2*this.transform.height+Et),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C*.5,isOccluded:!1,signedDistanceFromCamera:C}}getPerspectiveRatio(n,l,p,m,y){const S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(l,p,m,y):oe(l,p,n,y);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(n,l,p,m){return p<Et||n>=this.screenRightBoundary||m<Et||l>this.screenBottomBoundary}isInsideGrid(n,l,p,m){return p>=0&&n<this.gridRightBoundary&&m>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const n=u.an([]);return u.J(n,n,[-100,-100,0]),n}_projectCollisionBox(n,l,p,m,y,S,C,P,D,L){let F=new u.P(1,0),U=new u.P(0,1);const K=new u.P(n.anchorPointX+C[0],n.anchorPointY+C[1]);if(S&&!y){const et=this.projectAndGetPerspectiveRatio(p,K.x+1,K.y,m,D).point.sub(P.point).unit(),st=Math.atan(et.y/et.x)+(et.x<0?Math.PI:0),Ke=Math.sin(st),Xe=Math.cos(st);F=new u.P(Xe,Ke),U=new u.P(-Ke,Xe)}else if(!S&&y){const et=-this.transform.angle,st=Math.sin(et),Ke=Math.cos(et);F=new u.P(Ke,st),U=new u.P(-st,Ke)}let Q=P.point,se=l;if(y){Q=K;const et=this.transform.zoom-Math.floor(this.transform.zoom);se=Math.pow(2,-et),se*=this.mapProjection.getPitchedTextCorrection(this.transform,K,m),L||(se*=u.ac(.5+P.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}L&&(Q=Q.add(F.mult(L.x*se)).add(U.mult(L.y*se)));const ue=n.x1*se,ce=n.x2*se,me=(ue+ce)/2,re=n.y1*se,_e=n.y2*se,xe=(re+_e)/2,Te=[{offsetX:ue,offsetY:re},{offsetX:me,offsetY:re},{offsetX:ce,offsetY:re},{offsetX:ce,offsetY:xe},{offsetX:ce,offsetY:_e},{offsetX:me,offsetY:_e},{offsetX:ue,offsetY:_e},{offsetX:ue,offsetY:xe}];let Oe=[];for(const{offsetX:et,offsetY:st}of Te)Oe.push(new u.P(Q.x+F.x*et+U.x*st,Q.y+F.y*et+U.y*st));let We=!1;if(y){const et=Oe.map(st=>this.projectAndGetPerspectiveRatio(p,st.x,st.y,m,D));We=et.some(st=>!st.isOccluded),Oe=et.map(st=>st.point)}else We=!0;return{box:u.ao(Oe),allPointsOccluded:!We}}}function Lt(_,n,l){return n*(u.X/(_.tileSize*Math.pow(2,l-_.tileID.overscaledZ)))}class Un{constructor(n,l,p,m){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?l:-l))):m&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Sn{constructor(n,l,p,m,y){this.text=new Un(n?n.text:null,l,p,y),this.icon=new Un(n?n.icon:null,l,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class zt{constructor(n,l,p){this.text=n,this.icon=l,this.skipFade=p}}class Xt{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class vn{constructor(n,l,p,m,y){this.bucketInstanceId=n,this.featureIndex=l,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=y}}class ir{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const l=++this.maxGroupID;this.collisionGroups[n]={ID:l,predicate:p=>p.collisionGroupID===l}}return this.collisionGroups[n]}}function fr(_,n,l,p,m){const{horizontalAlign:y,verticalAlign:S}=u.au(_);return new u.P(-(y-.5)*n+p[0]*m,-(S-.5)*l+p[1]*m)}class Fr{constructor(n,l,p,m,y,S){this.transform=n.clone(),this.terrain=p,this.collisionIndex=new jt(this.transform,l),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new ir(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const l=this.terrain;return l?(p,m)=>l.getElevation(n,p,m):null}getBucketParts(n,l,p,m){const y=p.getBucket(l),S=p.latestFeatureIndex;if(!y||!S||l.id!==y.layerIds[0])return;const C=p.collisionBoxArray,P=y.layers[0].layout,D=y.layers[0].paint,L=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),F=p.tileSize/u.X,U=p.tileID.toUnwrapped(),K=this.transform.calculatePosMatrix(U),Q=P.get("text-pitch-alignment")==="map",se=P.get("text-rotation-alignment")==="map",ue=Lt(p,1,this.transform.zoom),ce=this.collisionIndex.mapProjection.translatePosition(this.transform,p,D.get("text-translate"),D.get("text-translate-anchor")),me=this.collisionIndex.mapProjection.translatePosition(this.transform,p,D.get("icon-translate"),D.get("icon-translate-anchor")),re=gs(K,Q,se,this.transform,ue);let _e=null;if(Q){const Te=ki(K,Q,se,this.transform,ue);_e=u.L([],this.transform.labelPlaneMatrix,Te)}this.retainedQueryData[y.bucketInstanceId]=new vn(y.bucketInstanceId,S,y.sourceLayerIndex,y.index,p.tileID);const xe={bucket:y,layout:P,translationText:ce,translationIcon:me,posMatrix:K,unwrappedTileID:U,textLabelPlaneMatrix:re,labelToScreenMatrix:_e,scale:L,textPixelRatio:F,holdingForFade:p.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:u.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(const Te of y.sortKeyRanges){const{sortKey:Oe,symbolInstanceStart:We,symbolInstanceEnd:et}=Te;n.push({sortKey:Oe,symbolInstanceStart:We,symbolInstanceEnd:et,parameters:xe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:xe})}attemptAnchorPlacement(n,l,p,m,y,S,C,P,D,L,F,U,K,Q,se,ue,ce,me,re){const _e=u.aq[n.textAnchor],xe=[n.textOffset0,n.textOffset1],Te=fr(_e,p,m,xe,y),Oe=this.collisionIndex.placeCollisionBox(l,U,P,D,L,C,S,ue,F.predicate,re,Te);if((!me||this.collisionIndex.placeCollisionBox(me,U,P,D,L,C,S,ce,F.predicate,re,Te).placeable)&&Oe.placeable){let We;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(We=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:xe,width:p,height:m,anchor:_e,textBoxScale:y,prevAnchor:We},this.markUsedJustification(Q,_e,K,se),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,se,K),this.placedOrientations[K.crossTileID]=se),{shift:Te,placedGlyphBoxes:Oe}}}placeLayerBucketPart(n,l,p){const{bucket:m,layout:y,translationText:S,translationIcon:C,posMatrix:P,unwrappedTileID:D,textLabelPlaneMatrix:L,labelToScreenMatrix:F,textPixelRatio:U,holdingForFade:K,collisionBoxArray:Q,partiallyEvaluatedTextSize:se,collisionGroup:ue}=n.parameters,ce=y.get("text-optional"),me=y.get("icon-optional"),re=u.ar(y,"text-overlap","text-allow-overlap"),_e=re==="always",xe=u.ar(y,"icon-overlap","icon-allow-overlap"),Te=xe==="always",Oe=y.get("text-rotation-alignment")==="map",We=y.get("text-pitch-alignment")==="map",et=y.get("icon-text-fit")!=="none",st=y.get("symbol-z-order")==="viewport-y",Ke=_e&&(Te||!m.hasIconData()||me),Xe=Te&&(_e||!m.hasTextData()||ce);!m.collisionArrays&&Q&&m.deserializeCollisionBoxes(Q);const ht=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),Pt=(Ye,nt,Ct)=>{var pn,At;if(l[Ye.crossTileID])return;if(K)return void(this.placements[Ye.crossTileID]=new zt(!1,!1,!1));let Ft=!1,mn=!1,br=!0,Ki=null,gn={box:null,placeable:!1,offscreen:null},Kr={placeable:!1},Or=null,wr=null,Br=null,xs=0,Pa=0,Qu=0;nt.textFeatureIndex?xs=nt.textFeatureIndex:Ye.useRuntimeCollisionCircles&&(xs=Ye.featureIndex),nt.verticalTextFeatureIndex&&(Pa=nt.verticalTextFeatureIndex);const Ea=nt.textBox;if(Ea){const zi=pr=>{let Sr=u.ah.horizontal;if(m.allowVerticalPlacement&&!pr&&this.prevPlacement){const mi=this.prevPlacement.placedOrientations[Ye.crossTileID];mi&&(this.placedOrientations[Ye.crossTileID]=mi,Sr=mi,this.markUsedOrientation(m,Sr,Ye))}return Sr},Di=(pr,Sr)=>{if(m.allowVerticalPlacement&&Ye.numVerticalGlyphVertices>0&&nt.verticalTextBox){for(const mi of m.writingModes)if(mi===u.ah.vertical?(gn=Sr(),Kr=gn):gn=pr(),gn&&gn.placeable)break}else gn=pr()},eo=Ye.textAnchorOffsetStartIndex,Yi=Ye.textAnchorOffsetEndIndex;if(Yi===eo){const pr=(Sr,mi)=>{const Bt=this.collisionIndex.placeCollisionBox(Sr,re,U,P,D,We,Oe,S,ue.predicate,ht);return Bt&&Bt.placeable&&(this.markUsedOrientation(m,mi,Ye),this.placedOrientations[Ye.crossTileID]=mi),Bt};Di(()=>pr(Ea,u.ah.horizontal),()=>{const Sr=nt.verticalTextBox;return m.allowVerticalPlacement&&Ye.numVerticalGlyphVertices>0&&Sr?pr(Sr,u.ah.vertical):{box:null,offscreen:null}}),zi(gn&&gn.placeable)}else{let pr=u.aq[(At=(pn=this.prevPlacement)===null||pn===void 0?void 0:pn.variableOffsets[Ye.crossTileID])===null||At===void 0?void 0:At.anchor];const Sr=(Bt,Lo,Ia)=>{const Ma=Bt.x2-Bt.x1,qp=Bt.y2-Bt.y1,S_=Ye.textBoxScale,Gp=et&&xe==="never"?Lo:null;let to=null,Hp=re==="never"?1:2,tc="never";pr&&Hp++;for(let zl=0;zl<Hp;zl++){for(let nc=eo;nc<Yi;nc++){const rc=m.textAnchorOffsets.get(nc);if(pr&&rc.textAnchor!==pr)continue;const Aa=this.attemptAnchorPlacement(rc,Bt,Ma,qp,S_,Oe,We,U,P,D,ue,tc,Ye,m,Ia,S,C,Gp,ht);if(Aa&&(to=Aa.placedGlyphBoxes,to&&to.placeable))return Ft=!0,Ki=Aa.shift,to}pr?pr=null:tc=re}return p&&!to&&(to={box:this.collisionIndex.placeCollisionBox(Ea,"always",U,P,D,We,Oe,S,ue.predicate,ht,new u.P(0,0)).box,offscreen:!1,placeable:!1}),to};Di(()=>Sr(Ea,nt.iconBox,u.ah.horizontal),()=>{const Bt=nt.verticalTextBox;return m.allowVerticalPlacement&&(!gn||!gn.placeable)&&Ye.numVerticalGlyphVertices>0&&Bt?Sr(Bt,nt.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),gn&&(Ft=gn.placeable,br=gn.offscreen);const mi=zi(gn&&gn.placeable);if(!Ft&&this.prevPlacement){const Bt=this.prevPlacement.variableOffsets[Ye.crossTileID];Bt&&(this.variableOffsets[Ye.crossTileID]=Bt,this.markUsedJustification(m,Bt.anchor,Ye,mi))}}}if(Or=gn,Ft=Or&&Or.placeable,br=Or&&Or.offscreen,Ye.useRuntimeCollisionCircles){const zi=m.text.placedSymbolArray.get(Ye.centerJustifiedTextSymbolIndex),Di=u.ai(m.textSizeData,se,zi),eo=y.get("text-padding");wr=this.collisionIndex.placeCollisionCircles(re,zi,m.lineVertexArray,m.glyphOffsetArray,Di,P,D,L,F,p,We,ue.predicate,Ye.collisionCircleDiameter,eo,S,ht),wr.circles.length&&wr.collisionDetected&&!p&&u.w("Collisions detected, but collision boxes are not shown"),Ft=_e||wr.circles.length>0&&!wr.collisionDetected,br=br&&wr.offscreen}if(nt.iconFeatureIndex&&(Qu=nt.iconFeatureIndex),nt.iconBox){const zi=Di=>this.collisionIndex.placeCollisionBox(Di,xe,U,P,D,We,Oe,C,ue.predicate,ht,et&&Ki?Ki:void 0);Kr&&Kr.placeable&&nt.verticalIconBox?(Br=zi(nt.verticalIconBox),mn=Br.placeable):(Br=zi(nt.iconBox),mn=Br.placeable),br=br&&Br.offscreen}const Ai=ce||Ye.numHorizontalGlyphVertices===0&&Ye.numVerticalGlyphVertices===0,ec=me||Ye.numIconVertices===0;Ai||ec?ec?Ai||(mn=mn&&Ft):Ft=mn&&Ft:mn=Ft=mn&&Ft;const fd=mn&&Br.placeable;if(Ft&&Or.placeable&&this.collisionIndex.insertCollisionBox(Or.box,re,y.get("text-ignore-placement"),m.bucketInstanceId,Kr&&Kr.placeable&&Pa?Pa:xs,ue.ID),fd&&this.collisionIndex.insertCollisionBox(Br.box,xe,y.get("icon-ignore-placement"),m.bucketInstanceId,Qu,ue.ID),wr&&Ft&&this.collisionIndex.insertCollisionCircles(wr.circles,re,y.get("text-ignore-placement"),m.bucketInstanceId,xs,ue.ID),p&&this.storeCollisionData(m.bucketInstanceId,Ct,nt,Or,Br,wr),Ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ye.crossTileID]=new zt(Ft||Ke,mn||Xe,br||m.justReloaded),l[Ye.crossTileID]=!0};if(st){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ye=m.getSortedSymbolIndexes(this.transform.angle);for(let nt=Ye.length-1;nt>=0;--nt){const Ct=Ye[nt];Pt(m.symbolInstances.get(Ct),m.collisionArrays[Ct],Ct)}}else for(let Ye=n.symbolInstanceStart;Ye<n.symbolInstanceEnd;Ye++)Pt(m.symbolInstances.get(Ye),m.collisionArrays[Ye],Ye);if(p&&m.bucketInstanceId in this.collisionCircleArrays){const Ye=this.collisionCircleArrays[m.bucketInstanceId];u.as(Ye.invProjMatrix,P),Ye.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(n,l,p,m,y,S){if(p.textBox||p.iconBox){let C,P;this.collisionBoxArrays.has(n)?C=this.collisionBoxArrays.get(n):(C=new Map,this.collisionBoxArrays.set(n,C)),C.has(l)?P=C.get(l):(P={text:null,icon:null},C.set(l,P)),p.textBox&&(P.text=m.box),p.iconBox&&(P.icon=y.box)}if(S){let C=this.collisionCircleArrays[n];C===void 0&&(C=this.collisionCircleArrays[n]=new Xt);for(let P=0;P<S.circles.length;P+=4)C.circles.push(S.circles[P+0]),C.circles.push(S.circles[P+1]),C.circles.push(S.circles[P+2]),C.circles.push(S.collisionDetected?1:0)}}markUsedJustification(n,l,p,m){let y;y=m===u.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.at(l)];const S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const C of S)C>=0&&(n.text.placedSymbolArray.get(C).crossTileID=y>=0&&C!==y?0:p.crossTileID)}markUsedOrientation(n,l,p){const m=l===u.ah.horizontal||l===u.ah.horizontalOnly?l:0,y=l===u.ah.vertical?l:0,S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const C of S)n.text.placedSymbolArray.get(C).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let p=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const m=l?l.symbolFadeChange(n):1,y=l?l.opacities:{},S=l?l.variableOffsets:{},C=l?l.placedOrientations:{};for(const P in this.placements){const D=this.placements[P],L=y[P];L?(this.opacities[P]=new Sn(L,m,D.text,D.icon),p=p||D.text!==L.text.placed||D.icon!==L.icon.placed):(this.opacities[P]=new Sn(null,m,D.text,D.icon,D.skipFade),p=p||D.text||D.icon)}for(const P in y){const D=y[P];if(!this.opacities[P]){const L=new Sn(D,m,!1,!1);L.isHidden()||(this.opacities[P]=L,p=p||D.text.placed||D.icon.placed)}}for(const P in S)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=S[P]);for(const P in C)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=C[P]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:n)}updateLayerOpacities(n,l){const p={};for(const m of l){const y=m.getBucket(n);y&&m.latestFeatureIndex&&n.id===y.layerIds[0]&&this.updateBucketOpacities(y,m.tileID,p,m.collisionBoxArray)}}updateBucketOpacities(n,l,p,m){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const y=n.layers[0],S=y.layout,C=new Sn(null,0,!1,!1,!0),P=S.get("text-allow-overlap"),D=S.get("icon-allow-overlap"),L=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=S.get("text-rotation-alignment")==="map",U=S.get("text-pitch-alignment")==="map",K=S.get("icon-text-fit")!=="none",Q=new Sn(null,0,P&&(D||!n.hasIconData()||S.get("icon-optional")),D&&(P||!n.hasTextData()||S.get("text-optional")),!0);!n.collisionArrays&&m&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(m);const se=(ce,me,re)=>{for(let _e=0;_e<me/4;_e++)ce.opacityVertexArray.emplaceBack(re);ce.hasVisibleVertices=ce.hasVisibleVertices||re!==aa},ue=this.collisionBoxArrays.get(n.bucketInstanceId);for(let ce=0;ce<n.symbolInstances.length;ce++){const me=n.symbolInstances.get(ce),{numHorizontalGlyphVertices:re,numVerticalGlyphVertices:_e,crossTileID:xe}=me;let Te=this.opacities[xe];p[xe]?Te=C:Te||(Te=Q,this.opacities[xe]=Te),p[xe]=!0;const Oe=me.numIconVertices>0,We=this.placedOrientations[me.crossTileID],et=We===u.ah.vertical,st=We===u.ah.horizontal||We===u.ah.horizontalOnly;if(re>0||_e>0){const Xe=di(Te.text);se(n.text,re,et?aa:Xe),se(n.text,_e,st?aa:Xe);const ht=Te.text.isHidden();[me.rightJustifiedTextSymbolIndex,me.centerJustifiedTextSymbolIndex,me.leftJustifiedTextSymbolIndex].forEach(nt=>{nt>=0&&(n.text.placedSymbolArray.get(nt).hidden=ht||et?1:0)}),me.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(me.verticalPlacedTextSymbolIndex).hidden=ht||st?1:0);const Pt=this.variableOffsets[me.crossTileID];Pt&&this.markUsedJustification(n,Pt.anchor,me,We);const Ye=this.placedOrientations[me.crossTileID];Ye&&(this.markUsedJustification(n,"left",me,Ye),this.markUsedOrientation(n,Ye,me))}if(Oe){const Xe=di(Te.icon),ht=!(K&&me.verticalPlacedIconSymbolIndex&&et);me.placedIconSymbolIndex>=0&&(se(n.icon,me.numIconVertices,ht?Xe:aa),n.icon.placedSymbolArray.get(me.placedIconSymbolIndex).hidden=Te.icon.isHidden()),me.verticalPlacedIconSymbolIndex>=0&&(se(n.icon,me.numVerticalIconVertices,ht?aa:Xe),n.icon.placedSymbolArray.get(me.verticalPlacedIconSymbolIndex).hidden=Te.icon.isHidden())}const Ke=ue&&ue.has(ce)?ue.get(ce):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Xe=n.collisionArrays[ce];if(Xe){let ht=new u.P(0,0);if(Xe.textBox||Xe.verticalTextBox){let Pt=!0;if(L){const Ye=this.variableOffsets[xe];Ye?(ht=fr(Ye.anchor,Ye.width,Ye.height,Ye.textOffset,Ye.textBoxScale),F&&ht._rotate(U?this.transform.angle:-this.transform.angle)):Pt=!1}if(Xe.textBox||Xe.verticalTextBox){let Ye;Xe.textBox&&(Ye=et),Xe.verticalTextBox&&(Ye=st),oa(n.textCollisionBox.collisionVertexArray,Te.text.placed,!Pt||Ye,Ke.text,ht.x,ht.y)}}if(Xe.iconBox||Xe.verticalIconBox){const Pt=!!(!st&&Xe.verticalIconBox);let Ye;Xe.iconBox&&(Ye=Pt),Xe.verticalIconBox&&(Ye=!Pt),oa(n.iconCollisionBox.collisionVertexArray,Te.icon.placed,Ye,Ke.icon,K?ht.x:0,K?ht.y:0)}}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const ce=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ce.invProjMatrix,n.placementViewportMatrix=ce.viewportMatrix,n.collisionCircleArray=ce.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,l){const p=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*p>n}setStale(){this.stale=!0}}function oa(_,n,l,p,m,y){p&&p.length!==0||(p=[0,0,0,0]);const S=p[0]-Et,C=p[1]-Et,P=p[2]-Et,D=p[3]-Et;_.emplaceBack(n?1:0,l?1:0,m||0,y||0,S,C),_.emplaceBack(n?1:0,l?1:0,m||0,y||0,P,C),_.emplaceBack(n?1:0,l?1:0,m||0,y||0,P,D),_.emplaceBack(n?1:0,l?1:0,m||0,y||0,S,D)}const Kt=Math.pow(2,25),Th=Math.pow(2,24),Ch=Math.pow(2,17),ci=Math.pow(2,16),hi=Math.pow(2,9),Yy=Math.pow(2,8),Pi=Math.pow(2,1);function di(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const n=_.placed?1:0,l=Math.floor(127*_.opacity);return l*Kt+n*Th+l*Ch+n*ci+l*hi+n*Yy+l*Pi+n}const aa=0;function So(){return{isOccluded:(_,n,l)=>!1,getPitchedTextCorrection:(_,n,l)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,n,l,p){throw new Error("Not implemented.")},translatePosition:(_,n,l,p)=>function(m,y,S,C,P=!1){if(!S[0]&&!S[1])return[0,0];const D=P?C==="map"?m.angle:0:C==="viewport"?-m.angle:0;if(D){const L=Math.sin(D),F=Math.cos(D);S=[S[0]*F-S[1]*L,S[0]*L+S[1]*F]}return[P?S[0]:Lt(y,S[0],m.zoom),P?S[1]:Lt(y,S[1],m.zoom)]}(_,n,l,p),getCircleRadiusCorrection:_=>1}}class Wn{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,l,p,m,y){const S=this._bucketParts;for(;this._currentTileIndex<n.length;)if(l.getBucketParts(S,m,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((C,P)=>C.sortKey-P.sortKey));this._currentPartIndex<S.length;)if(l.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,y())return!0;return!1}}class fl{constructor(n,l,p,m,y,S,C,P){this.placement=new Fr(n,So(),l,S,C,P),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(n,l,p){const m=A.now(),y=()=>!this._forceFullPlacement&&A.now()-m>2;for(;this._currentPlacementIndex>=0;){const S=l[n[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=C)&&(!S.maxzoom||S.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Wn(S)),this._inProgressLayer.continuePlacement(p[S.source],this.placement,this._showCollisionBoxes,S,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const qi=512/u.X/2;class Rn{constructor(n,l,p){this.tileID=n,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let y=0;y<l.length;y++){const S=l.get(y),C=S.key,P=m.get(C);P?P.push(S):m.set(C,[S])}for(const[y,S]of m){const C={positions:S.map(P=>({x:Math.floor(P.anchorX*qi),y:Math.floor(P.anchorY*qi)})),crossTileIDs:S.map(P=>P.crossTileID)};if(C.positions.length>128){const P=new u.av(C.positions.length,16,Uint16Array);for(const{x:D,y:L}of C.positions)P.add(D,L);P.finish(),delete C.positions,C.index=P}this._symbolsByKey[y]=C}}getScaledCoordinates(n,l){const{x:p,y:m,z:y}=this.tileID.canonical,{x:S,y:C,z:P}=l.canonical,D=qi/Math.pow(2,P-y),L=(C*u.X+n.anchorY)*D,F=m*u.X*qi;return{x:Math.floor((S*u.X+n.anchorX)*D-p*u.X*qi),y:Math.floor(L-F)}}findMatches(n,l,p){const m=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let y=0;y<n.length;y++){const S=n.get(y);if(S.crossTileID)continue;const C=this._symbolsByKey[S.key];if(!C)continue;const P=this.getScaledCoordinates(S,l);if(C.index){const D=C.index.range(P.x-m,P.y-m,P.x+m,P.y+m).sort();for(const L of D){const F=C.crossTileIDs[L];if(!p[F]){p[F]=!0,S.crossTileID=F;break}}}else if(C.positions)for(let D=0;D<C.positions.length;D++){const L=C.positions[D],F=C.crossTileIDs[D];if(Math.abs(L.x-P.x)<=m&&Math.abs(L.y-P.y)<=m&&!p[F]){p[F]=!0,S.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class wu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const l=Math.round((n-this.lng)/360);if(l!==0)for(const p in this.indexes){const m=this.indexes[p],y={};for(const S in m){const C=m[S];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+l),y[C.tileID.key]=C}this.indexes[p]=y}this.lng=n}addBucket(n,l,p){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let y=0;y<l.symbolInstances.length;y++)l.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const m=this.usedCrossTileIDs[n.overscaledZ];for(const y in this.indexes){const S=this.indexes[y];if(Number(y)>n.overscaledZ)for(const C in S){const P=S[C];P.tileID.isChildOf(n)&&P.findMatches(l.symbolInstances,n,m)}else{const C=S[n.scaledTo(Number(y)).key];C&&C.findMatches(l.symbolInstances,n,m)}}for(let y=0;y<l.symbolInstances.length;y++){const S=l.symbolInstances.get(y);S.crossTileID||(S.crossTileID=p.generate(),m[S.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Rn(n,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(n,l){for(const p of l.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[n][m]}removeStaleBuckets(n){let l=!1;for(const p in this.indexes){const m=this.indexes[p];for(const y in m)n[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[y]),delete m[y],l=!0)}return l}}class kh{constructor(){this.layerIndexes={},this.crossTileIDs=new wu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,l,p){let m=this.layerIndexes[n.id];m===void 0&&(m=this.layerIndexes[n.id]=new Gi);let y=!1;const S={};m.handleWrapJump(p);for(const C of l){const P=C.getBucket(n);P&&n.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(C.tileID,P,this.crossTileIDs)&&(y=!0),S[P.bucketInstanceId]=!0)}return m.removeStaleBuckets(S)&&(y=!0),y}pruneUnusedLayers(n){const l={};n.forEach(p=>{l[p]=!0});for(const p in this.layerIndexes)l[p]||delete this.layerIndexes[p]}}const Hi=(_,n)=>u.t(_,n&&n.filter(l=>l.identifier!=="source.canvas")),Jy=u.aw();class Su extends u.E{constructor(n,l={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const m=this.sourceCaches[p].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[p].reload()}},this.map=n,this.dispatcher=new li(_r(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,m)=>this.getGlyphs(p,m)),this.dispatcher.registerMessageHandler("GI",(p,m)=>this.getImages(p,m)),this.imageManager=new Fe,this.imageManager.setEventedParent(this),this.glyphManager=new Je(n._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Nn(256,512),this.crossTileSymbolIndex=new kh,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),Pn().on(Ue,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const m=this.sourceCaches[p.sourceId];if(!m)return;const y=m.getSource();if(y&&y.vectorLayerIds)for(const S in this._layers){const C=this._layers[S];C.source===y.id&&this._validateLayer(C)}})}loadURL(n,l={},p){this.fire(new u.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const m=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.h(m,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,l,p)}).catch(S=>{this._loadStyleRequest=null,S&&!y.signal.aborted&&this.fire(new u.j(S))})}loadJSON(n,l={},p){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(n,l,p)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Jy,{validate:!1})}_load(n,l,p){var m;const y=l.transformStyle?l.transformStyle(p,n):n;if(!l.validate||!Hi(this,u.u(y))){this._loaded=!0,this.stylesheet=y;for(const S in y.sources)this.addSource(S,y.sources[S],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new at(this.stylesheet.light),this.sky=new Mt(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const n=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of n){const p=u.aA(l);p.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=p}}_loadSprite(n,l=!1,p=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,S,C,P){return u._(this,void 0,void 0,function*(){const D=Me(y),L=C>1?"@2x":"",F={},U={};for(const{id:K,url:Q}of D){const se=S.transformRequest(ze(Q,L,".json"),"SpriteJSON");F[K]=u.h(se,P);const ue=S.transformRequest(ze(Q,L,".png"),"SpriteImage");U[K]=G.getImage(ue,P)}return yield Promise.all([...Object.values(F),...Object.values(U)]),function(K,Q){return u._(this,void 0,void 0,function*(){const se={};for(const ue in K){se[ue]={};const ce=A.getImageCanvasContext((yield Q[ue]).data),me=(yield K[ue]).data;for(const re in me){const{width:_e,height:xe,x:Te,y:Oe,sdf:We,pixelRatio:et,stretchX:st,stretchY:Ke,content:Xe,textFitWidth:ht,textFitHeight:Pt}=me[re];se[ue][re]={data:null,pixelRatio:et,sdf:We,stretchX:st,stretchY:Ke,content:Xe,textFitWidth:ht,textFitHeight:Pt,spriteData:{width:_e,height:xe,x:Te,y:Oe,context:ce}}}}return se})}(F,U)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const S in y){this._spritesImagesIds[S]=[];const C=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(P=>!(P in y)):[];for(const P of C)this.imageManager.removeImage(P),this._changedImages[P]=!0;for(const P in y[S]){const D=S==="default"?P:`${S}:${P}`;this._spritesImagesIds[S].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,y[S][P],!1):this.imageManager.addImage(D,y[S][P]),l&&(this._changedImages[D]=!0)}}}).catch(y=>{this._spriteRequest=null,m=y,this.fire(new u.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),p&&p(m)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(n){const l=this.sourceCaches[n.source];if(!l)return;const p=n.sourceLayer;if(!p)return;const m=l.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.j(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,l=!1){const p=this._serializedAllLayers();if(!n||n.length===0)return Object.values(l?u.aB(p):p);const m=[];for(const y of n)if(p[y]){const S=l?u.aB(p[y]):p[y];m.push(S)}return m}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const l=Object.keys(this._layers);for(const p of l){const m=this._layers[p];m.type!=="custom"&&(n[p]=m.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const l=this._changed;if(l){const m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(const S in this._updatedSources){const C=this._updatedSources[S];if(C==="reload")this._reloadSource(S);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const y=this.sourceCaches[m];p[m]=y.used,y.used=!1}for(const m of this._order){const y=this._layers[m];y.recalculate(n,this._availableImages),!y.isHidden(n.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const m in p){const y=this.sourceCaches[m];!!p[m]!=!!y.used&&y.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(n),this.sky.recalculate(n),this.z=n.zoom,l&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,l={}){var p;this._checkLoaded();const m=this.serialize();if(n=l.transformStyle?l.transformStyle(m,n):n,((p=l.validate)===null||p===void 0||p)&&Hi(this,u.u(n)))return!1;(n=u.aB(n)).layers=u.az(n.layers);const y=u.aC(m,n),S=this._getOperationsToPerform(y);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const C of S.operations)C();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const l=[],p=[];for(const m of n)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":l.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":l.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,m.args));break;case"setSky":l.push(()=>this.setSky.apply(this,m.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":l.push(()=>{});break;default:p.push(m.command)}return{operations:l,unimplemented:p}}addImage(n,l){if(this.getImage(n))return this.fire(new u.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,l),this._afterImageUpdated(n)}updateImage(n,l){this.imageManager.updateImage(n,l)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new u.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,l,p={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.u.source,`sources.${n}`,l,null,p))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const m=this.sourceCaches[n]=new bt(n,l,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:n})),m.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===n)return this.fire(new u.j(new Error(`Source "${n}" cannot be removed while layer "${p}" is using it.`)));const l=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],l.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,l){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const p=this.sourceCaches[n].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(l),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,l,p={}){this._checkLoaded();const m=n.id;if(this.getLayer(m))return void this.fire(new u.j(new Error(`Layer "${m}" already exists on this map.`)));let y;if(n.type==="custom"){if(Hi(this,u.aD(n)))return;y=u.aA(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(m,n.source),n=u.aB(n),n=u.e(n,{source:m})),this._validate(u.u.layer,`layers.${m}`,n,{arrayIndex:-1},p))return;y=u.aA(n),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}const S=l?this._order.indexOf(l):this._order.length;if(l&&S===-1)this.fire(new u.j(new Error(`Cannot add layer "${m}" before non-existing layer "${l}".`)));else{if(this._order.splice(S,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){const C=this._removedLayers[m];delete this._removedLayers[m],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(n,l){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new u.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===l)return;const p=this._order.indexOf(n);this._order.splice(p,1);const m=l?this._order.indexOf(l):this._order.length;l&&m===-1?this.fire(new u.j(new Error(`Cannot move layer "${n}" before non-existing layer "${l}".`))):(this._order.splice(m,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const l=this._layers[n];if(!l)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${n}".`)));l.setEventedParent(null);const p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=l,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],l.onRemove&&l.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,l,p){this._checkLoaded();const m=this.getLayer(n);m?m.minzoom===l&&m.maxzoom===p||(l!=null&&(m.minzoom=l),p!=null&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,l,p={}){this._checkLoaded();const m=this.getLayer(n);if(m){if(!u.aE(m.filter,l))return l==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(u.u.filter,`layers.${m.id}.filter`,l,null,p)||(m.filter=u.aB(l),this._updateLayer(m)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return u.aB(this.getLayer(n).filter)}setLayoutProperty(n,l,p,m={}){this._checkLoaded();const y=this.getLayer(n);y?u.aE(y.getLayoutProperty(l),p)||(y.setLayoutProperty(l,p,m),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,l){const p=this.getLayer(n);if(p)return p.getLayoutProperty(l);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,l,p,m={}){this._checkLoaded();const y=this.getLayer(n);y?u.aE(y.getPaintProperty(l),p)||(y.setPaintProperty(l,p,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,l){return this.getLayer(n).getPaintProperty(l)}setFeatureState(n,l){this._checkLoaded();const p=n.source,m=n.sourceLayer,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const S=y.getSource().type;S==="geojson"&&m?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||m?(n.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,n.id,l)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,l){this._checkLoaded();const p=n.source,m=this.sourceCaches[p];if(m===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const y=m.getSource().type,S=y==="vector"?n.sourceLayer:void 0;y!=="vector"||S?l&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(S,n.id,l):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const l=n.source,p=n.sourceLayer,m=this.sourceCaches[l];if(m!==void 0)return m.getSource().type!=="vector"||p?(n.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,n.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=u.aF(this.sourceCaches,y=>y.serialize()),l=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,m=this.stylesheet;return u.aG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:n,layers:l,terrain:p},y=>y!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const l=S=>this._layers[S].type==="fill-extrusion",p={},m=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(l(C)){p[C]=S;for(const P of n){const D=P[C];if(D)for(const L of D)m.push(L)}}}m.sort((S,C)=>C.intersectionZ-S.intersectionZ);const y=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(l(C))for(let P=m.length-1;P>=0;P--){const D=m[P].feature;if(p[D.layer.id]<S)break;y.push(D),m.pop()}else for(const P of n){const D=P[C];if(D)for(const L of D)y.push(L.feature)}}return y}queryRenderedFeatures(n,l,p){l&&l.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",l.filter,null,l);const m={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const C of l.layers){const P=this._layers[C];if(!P)return this.fire(new u.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];m[P.source]=!0}}const y=[];l.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const C in this.sourceCaches)l.layers&&!m[C]||y.push(hr(this.sourceCaches[C],this._layers,S,n,l,p));return this.placement&&y.push(function(C,P,D,L,F,U,K){const Q={},se=U.queryRenderedSymbols(L),ue=[];for(const ce of Object.keys(se).map(Number))ue.push(K[ce]);ue.sort(jn);for(const ce of ue){const me=ce.featureIndex.lookupSymbolFeatures(se[ce.bucketInstanceId],P,ce.bucketIndex,ce.sourceLayerIndex,F.filter,F.layers,F.availableImages,C);for(const re in me){const _e=Q[re]=Q[re]||[],xe=me[re];xe.sort((Te,Oe)=>{const We=ce.featureSortOrder;if(We){const et=We.indexOf(Te.featureIndex);return We.indexOf(Oe.featureIndex)-et}return Oe.featureIndex-Te.featureIndex});for(const Te of xe)_e.push(Te)}}for(const ce in Q)Q[ce].forEach(me=>{const re=me.feature,_e=D[C[ce].source].getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=_e});return Q}(this._layers,S,this.sourceCaches,n,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(n,l){l&&l.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",l.filter,null,l);const p=this.sourceCaches[n];return p?function(m,y){const S=m.getRenderableIds().map(D=>m.getTileByID(D)),C=[],P={};for(let D=0;D<S.length;D++){const L=S[D],F=L.tileID.canonical.key;P[F]||(P[F]=!0,L.querySourceFeatures(C,y))}return C}(p,l):[]}getLight(){return this.light.getLight()}setLight(n,l={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const S in n)if(!u.aE(n[S],p[S])){m=!0;break}if(!m)return;const y={now:A.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,l),this.light.updateTransitions(y)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,l={}){const p=this.getSky();let m=!1;if(!n&&!p)return;if(n&&!p)m=!0;else if(!n&&p)m=!0;else for(const S in n)if(!u.aE(n[S],p[S])){m=!0;break}if(!m)return;const y={now:A.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,l),this.sky.updateTransitions(y)}_validate(n,l,p,m,y={}){return(!y||y.validate!==!1)&&Hi(this,n.call(u.u,u.e({key:l,style:this.serialize(),value:p,styleSpec:u.v},m)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Pn().off(Ue,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const p=this.sourceCaches[l];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const l in this.sourceCaches)this.sourceCaches[l].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,l,p,m,y=!1){let S=!1,C=!1;const P={};for(const D of this._order){const L=this._layers[D];if(L.type!=="symbol")continue;if(!P[L.source]){const U=this.sourceCaches[L.source];P[L.source]=U.getRenderableIds(!0).map(K=>U.getTileByID(K)).sort((K,Q)=>Q.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(Q.tileID)?-1:1))}const F=this.crossTileSymbolIndex.addLayer(L,P[L.source],n.center.lng);S=S||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),n.zoom))&&(this.pauseablePlacement=new fl(n,this.map.terrain,this._order,y,l,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),C=!0),S&&this.pauseablePlacement.placement.setStale()),C||S)for(const D of this._order){const L=this._layers[D];L.type==="symbol"&&this.placement.updateLayerOpacities(L,P[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,l){return u._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[l.source];return m&&m.setDependencies(l.tileID.key,l.type,l.icons),p})}getGlyphs(n,l){return u._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(l.stacks),m=this.sourceCaches[l.source];return m&&m.setDependencies(l.tileID.key,l.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,l={}){this._checkLoaded(),n&&this._validate(u.u.glyphs,"glyphs",n,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,l,p={},m){this._checkLoaded();const y=[{id:n,url:l}],S=[...Me(this.stylesheet.sprite),...y];this._validate(u.u.sprite,"sprite",S,null,p)||(this.stylesheet.sprite=S,this._loadSprite(y,!0,m))}removeSprite(n){this._checkLoaded();const l=Me(this.stylesheet.sprite);if(l.find(p=>p.id===n)){if(this._spritesImagesIds[n])for(const p of this._spritesImagesIds[n])this.imageManager.removeImage(p),this._changedImages[p]=!0;l.splice(l.findIndex(p=>p.id===n),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return Me(this.stylesheet.sprite)}setSprite(n,l={},p){this._checkLoaded(),n&&this._validate(u.u.sprite,"sprite",n,null,l)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,p):(this._unloadSprite(),p&&p(null)))}}var To=u.Y([{name:"a_pos",type:"Int16",components:2}]);const Js={prelude:qt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:qt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:qt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:qt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:qt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:qt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:qt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:qt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:qt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:qt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:qt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:qt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:qt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:qt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:qt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:qt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:qt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:qt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:qt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:qt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:qt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:qt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:qt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:qt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:qt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:qt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:qt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:qt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:qt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:qt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function qt(_,n){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=n.match(/attribute ([\w]+) ([\w]+)/g),m=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=y?y.concat(m):m,C={};return{fragmentSource:_=_.replace(l,(P,D,L,F,U)=>(C[U]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${U}
varying ${L} ${F} ${U};
#else
uniform ${L} ${F} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${L} ${F} ${U} = u_${U};
#endif
`)),vertexSource:n=n.replace(l,(P,D,L,F,U)=>{const K=F==="float"?"vec2":"vec4",Q=U.match(/color/)?"color":K;return C[U]?D==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${L} ${K} a_${U};
varying ${L} ${F} ${U};
#else
uniform ${L} ${F} u_${U};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${L} ${F} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${Q}(a_${U}, u_${U}_t);
#else
    ${L} ${F} ${U} = u_${U};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${L} ${K} a_${U};
#else
uniform ${L} ${F} u_${U};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${L} ${F} ${U} = a_${U};
#else
    ${L} ${F} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${L} ${F} ${U} = unpack_mix_${Q}(a_${U}, u_${U}_t);
#else
    ${L} ${F} ${U} = u_${U};
#endif
`}),staticAttributes:p,staticUniforms:S}}class Ph{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,l,p,m,y,S,C,P,D){this.context=n;let L=this.boundPaintVertexBuffers.length!==m.length;for(let F=0;!L&&F<m.length;F++)this.boundPaintVertexBuffers[F]!==m[F]&&(L=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==p||L||this.boundIndexBuffer!==y||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==P||this.boundDynamicVertexBuffer3!==D?this.freshBind(l,p,m,y,S,C,P,D):(n.bindVertexArray.set(this.vao),C&&C.bind(),y&&y.dynamicDraw&&y.bind(),P&&P.bind(),D&&D.bind())}freshBind(n,l,p,m,y,S,C,P){const D=n.numAttributes,L=this.context,F=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=P,l.enableAttributes(F,n);for(const U of p)U.enableAttributes(F,n);S&&S.enableAttributes(F,n),C&&C.enableAttributes(F,n),P&&P.enableAttributes(F,n),l.bind(),l.setVertexAttribPointers(F,n,y);for(const U of p)U.bind(),U.setVertexAttribPointers(F,n,y);S&&(S.bind(),S.setVertexAttribPointers(F,n,y)),m&&m.bind(),C&&(C.bind(),C.setVertexAttribPointers(F,n,y)),P&&(P.bind(),P.setVertexAttribPointers(F,n,y)),L.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Eh=(_,n,l,p,m)=>({u_matrix:_,u_texture:0,u_ele_delta:n,u_fog_matrix:l,u_fog_color:p?p.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?p.calculateFogBlendOpacity(m):0,u_horizon_color:p?p.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1});function la(_){const n=[];for(let l=0;l<_.length;l++){if(_[l]===null)continue;const p=_[l].split(" ");n.push(p.pop())}return n}class Ih{constructor(n,l,p,m,y,S){const C=n.gl;this.program=C.createProgram();const P=la(l.staticAttributes),D=p?p.getBinderAttributes():[],L=P.concat(D),F=Js.prelude.staticUniforms?la(Js.prelude.staticUniforms):[],U=l.staticUniforms?la(l.staticUniforms):[],K=p?p.getBinderUniforms():[],Q=F.concat(U).concat(K),se=[];for(const Te of Q)se.indexOf(Te)<0&&se.push(Te);const ue=p?p.defines():[];y&&ue.push("#define OVERDRAW_INSPECTOR;"),S&&ue.push("#define TERRAIN3D;");const ce=ue.concat(Js.prelude.fragmentSource,l.fragmentSource).join(`
`),me=ue.concat(Js.prelude.vertexSource,l.vertexSource).join(`
`),re=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(re,ce),C.compileShader(re),!C.getShaderParameter(re,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(re)}`);C.attachShader(this.program,re);const _e=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(_e,me),C.compileShader(_e),!C.getShaderParameter(_e,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(_e)}`);C.attachShader(this.program,_e),this.attributes={};const xe={};this.numAttributes=L.length;for(let Te=0;Te<this.numAttributes;Te++)L[Te]&&(C.bindAttribLocation(this.program,Te,L[Te]),this.attributes[L[Te]]=Te);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(_e),C.deleteShader(re);for(let Te=0;Te<se.length;Te++){const Oe=se[Te];if(Oe&&!xe[Oe]){const We=C.getUniformLocation(this.program,Oe);We&&(xe[Oe]=We)}}this.fixedUniforms=m(n,xe),this.terrainUniforms=((Te,Oe)=>({u_depth:new u.aH(Te,Oe.u_depth),u_terrain:new u.aH(Te,Oe.u_terrain),u_terrain_dim:new u.aI(Te,Oe.u_terrain_dim),u_terrain_matrix:new u.aJ(Te,Oe.u_terrain_matrix),u_terrain_unpack:new u.aK(Te,Oe.u_terrain_unpack),u_terrain_exaggeration:new u.aI(Te,Oe.u_terrain_exaggeration)}))(n,xe),this.binderUniforms=p?p.getUniforms(n,xe):[]}draw(n,l,p,m,y,S,C,P,D,L,F,U,K,Q,se,ue,ce,me){const re=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(p),n.setStencilMode(m),n.setColorMode(y),n.setCullFace(S),P){n.activeTexture.set(re.TEXTURE2),re.bindTexture(re.TEXTURE_2D,P.depthTexture),n.activeTexture.set(re.TEXTURE3),re.bindTexture(re.TEXTURE_2D,P.texture);for(const xe in this.terrainUniforms)this.terrainUniforms[xe].set(P[xe])}for(const xe in this.fixedUniforms)this.fixedUniforms[xe].set(C[xe]);se&&se.setUniforms(n,this.binderUniforms,K,{zoom:Q});let _e=0;switch(l){case re.LINES:_e=2;break;case re.TRIANGLES:_e=3;break;case re.LINE_STRIP:_e=1}for(const xe of U.get()){const Te=xe.vaos||(xe.vaos={});(Te[D]||(Te[D]=new Ph)).bind(n,this,L,se?se.getPaintVertexBuffers():[],F,xe.vertexOffset,ue,ce,me),re.drawElements(l,xe.primitiveLength*_e,re.UNSIGNED_SHORT,xe.primitiveOffset*_e*2)}}}function Tu(_,n,l){const p=1/Lt(l,1,n.transform.tileZoom),m=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,n.transform.tileZoom)/m,S=y*(l.tileID.canonical.x+l.tileID.wrap*m),C=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[p,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[S>>16,C>>16],u_pixel_coord_lower:[65535&S,65535&C]}}const pl=(_,n,l,p)=>{const m=n.style.light,y=m.properties.get("position"),S=[y.x,y.y,y.z],C=function(){var D=new u.A(9);return u.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();m.properties.get("anchor")==="viewport"&&function(D,L){var F=Math.sin(L),U=Math.cos(L);D[0]=U,D[1]=F,D[2]=0,D[3]=-F,D[4]=U,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(C,-n.transform.angle),function(D,L,F){var U=L[0],K=L[1],Q=L[2];D[0]=U*F[0]+K*F[3]+Q*F[6],D[1]=U*F[1]+K*F[4]+Q*F[7],D[2]=U*F[2]+K*F[5]+Q*F[8]}(S,S,C);const P=m.properties.get("color");return{u_matrix:_,u_lightpos:S,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+l,u_opacity:p}},Cu=(_,n,l,p,m,y,S)=>u.e(pl(_,n,l,p),Tu(y,n,S),{u_height_factor:-Math.pow(2,m.overscaledZ)/S.tileSize/8}),ua=_=>({u_matrix:_}),dp=(_,n,l,p)=>u.e(ua(_),Tu(l,n,p)),Qy=(_,n)=>({u_matrix:_,u_world:n}),fp=(_,n,l,p,m)=>u.e(dp(_,n,l,p),{u_world:m}),e_=(_,n,l,p)=>{const m=_.transform;let y,S;if(p.paint.get("circle-pitch-alignment")==="map"){const C=Lt(l,1,m.zoom);y=!0,S=[C,C]}else y=!1,S=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(n.posMatrix,l,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:S}},Co=(_,n,l)=>({u_matrix:_,u_inv_matrix:n,u_camera_to_center_distance:l.cameraToCenterDistance,u_viewport_size:[l.width,l.height]}),ml=(_,n,l=1)=>({u_matrix:_,u_color:n,u_overlay:0,u_overlay_scale:l}),Zr=_=>({u_matrix:_}),Xr=(_,n,l,p)=>({u_matrix:_,u_extrude_scale:Lt(n,1,l),u_intensity:p}),ku=(_,n,l,p)=>{const m=u.H();u.aP(m,0,_.width,_.height,0,0,1);const y=_.context.gl;return{u_matrix:m,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:l,u_color_ramp:p,u_opacity:n.paint.get("heatmap-opacity")}};function Pu(_,n){const l=Math.pow(2,n.canonical.z),p=n.canonical.y;return[new u.Z(0,p/l).toLngLat().lat,new u.Z(0,(p+1)/l).toLngLat().lat]}const Eu=(_,n,l,p)=>{const m=_.transform;return{u_matrix:gp(_,n,l,p),u_ratio:1/Lt(n,1,m.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},pp=(_,n,l,p,m)=>u.e(Eu(_,n,l,m),{u_image:0,u_image_height:p}),ca=(_,n,l,p,m)=>{const y=_.transform,S=mp(n,y);return{u_matrix:gp(_,n,l,m),u_texsize:n.imageAtlasTexture.size,u_ratio:1/Lt(n,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},t_=(_,n,l,p,m,y)=>{const S=_.lineAtlas,C=mp(n,_.transform),P=l.layout.get("line-cap")==="round",D=S.getDash(p.from,P),L=S.getDash(p.to,P),F=D.width*m.fromScale,U=L.width*m.toScale;return u.e(Eu(_,n,l,y),{u_patternscale_a:[C/F,-D.height/2],u_patternscale_b:[C/U,-L.height/2],u_sdfgamma:S.width/(256*Math.min(F,U)*_.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:L.y,u_mix:m.t})};function mp(_,n){return 1/Lt(_,1,n.tileZoom)}function gp(_,n,l,p){return _.translatePosMatrix(p?p.posMatrix:n.tileID.posMatrix,n,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const n_=(_,n,l,p,m)=>{return{u_matrix:_,u_tl_parent:n,u_scale_parent:l,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(S=m.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:r_(m.paint.get("raster-hue-rotate"))};var y,S};function r_(_){_*=Math.PI/180;const n=Math.sin(_),l=Math.cos(_);return[(2*l+1)/3,(-Math.sqrt(3)*n-l+1)/3,(Math.sqrt(3)*n-l+1)/3]}const yp=(_,n,l,p,m,y,S,C,P,D,L,F,U,K)=>{const Q=S.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Q.width/Q.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:P,u_coord_matrix:D,u_is_text:+F,u_pitch_with_map:+p,u_is_along_line:m,u_is_variable_anchor:y,u_texsize:U,u_texture:0,u_translation:L,u_pitched_scale:K}},gl=(_,n,l,p,m,y,S,C,P,D,L,F,U,K,Q)=>{const se=S.transform;return u.e(yp(_,n,l,p,m,y,S,C,P,D,L,F,U,Q),{u_gamma_scale:p?Math.cos(se._pitch)*se.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},Mh=(_,n,l,p,m,y,S,C,P,D,L,F,U,K)=>u.e(gl(_,n,l,p,m,y,S,C,P,D,L,!0,F,!0,K),{u_texsize_icon:U,u_texture_icon:1}),Iu=(_,n,l)=>({u_matrix:_,u_opacity:n,u_color:l}),Ah=(_,n,l,p,m,y)=>u.e(function(S,C,P,D){const L=P.imageManager.getPattern(S.from.toString()),F=P.imageManager.getPattern(S.to.toString()),{width:U,height:K}=P.imageManager.getPixelSize(),Q=Math.pow(2,D.tileID.overscaledZ),se=D.tileSize*Math.pow(2,P.transform.tileZoom)/Q,ue=se*(D.tileID.canonical.x+D.tileID.wrap*Q),ce=se*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[U,K],u_mix:C.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/Lt(D,1,P.transform.tileZoom),u_pixel_coord_upper:[ue>>16,ce>>16],u_pixel_coord_lower:[65535&ue,65535&ce]}}(p,y,l,m),{u_matrix:_,u_opacity:n}),zh={fillExtrusion:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_lightpos:new u.aN(_,n.u_lightpos),u_lightintensity:new u.aI(_,n.u_lightintensity),u_lightcolor:new u.aN(_,n.u_lightcolor),u_vertical_gradient:new u.aI(_,n.u_vertical_gradient),u_opacity:new u.aI(_,n.u_opacity)}),fillExtrusionPattern:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_lightpos:new u.aN(_,n.u_lightpos),u_lightintensity:new u.aI(_,n.u_lightintensity),u_lightcolor:new u.aN(_,n.u_lightcolor),u_vertical_gradient:new u.aI(_,n.u_vertical_gradient),u_height_factor:new u.aI(_,n.u_height_factor),u_image:new u.aH(_,n.u_image),u_texsize:new u.aO(_,n.u_texsize),u_pixel_coord_upper:new u.aO(_,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,n.u_pixel_coord_lower),u_scale:new u.aN(_,n.u_scale),u_fade:new u.aI(_,n.u_fade),u_opacity:new u.aI(_,n.u_opacity)}),fill:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix)}),fillPattern:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_image:new u.aH(_,n.u_image),u_texsize:new u.aO(_,n.u_texsize),u_pixel_coord_upper:new u.aO(_,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,n.u_pixel_coord_lower),u_scale:new u.aN(_,n.u_scale),u_fade:new u.aI(_,n.u_fade)}),fillOutline:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_world:new u.aO(_,n.u_world)}),fillOutlinePattern:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_world:new u.aO(_,n.u_world),u_image:new u.aH(_,n.u_image),u_texsize:new u.aO(_,n.u_texsize),u_pixel_coord_upper:new u.aO(_,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,n.u_pixel_coord_lower),u_scale:new u.aN(_,n.u_scale),u_fade:new u.aI(_,n.u_fade)}),circle:(_,n)=>({u_camera_to_center_distance:new u.aI(_,n.u_camera_to_center_distance),u_scale_with_map:new u.aH(_,n.u_scale_with_map),u_pitch_with_map:new u.aH(_,n.u_pitch_with_map),u_extrude_scale:new u.aO(_,n.u_extrude_scale),u_device_pixel_ratio:new u.aI(_,n.u_device_pixel_ratio),u_matrix:new u.aJ(_,n.u_matrix)}),collisionBox:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_pixel_extrude_scale:new u.aO(_,n.u_pixel_extrude_scale)}),collisionCircle:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_inv_matrix:new u.aJ(_,n.u_inv_matrix),u_camera_to_center_distance:new u.aI(_,n.u_camera_to_center_distance),u_viewport_size:new u.aO(_,n.u_viewport_size)}),debug:(_,n)=>({u_color:new u.aL(_,n.u_color),u_matrix:new u.aJ(_,n.u_matrix),u_overlay:new u.aH(_,n.u_overlay),u_overlay_scale:new u.aI(_,n.u_overlay_scale)}),clippingMask:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix)}),heatmap:(_,n)=>({u_extrude_scale:new u.aI(_,n.u_extrude_scale),u_intensity:new u.aI(_,n.u_intensity),u_matrix:new u.aJ(_,n.u_matrix)}),heatmapTexture:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_world:new u.aO(_,n.u_world),u_image:new u.aH(_,n.u_image),u_color_ramp:new u.aH(_,n.u_color_ramp),u_opacity:new u.aI(_,n.u_opacity)}),hillshade:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_image:new u.aH(_,n.u_image),u_latrange:new u.aO(_,n.u_latrange),u_light:new u.aO(_,n.u_light),u_shadow:new u.aL(_,n.u_shadow),u_highlight:new u.aL(_,n.u_highlight),u_accent:new u.aL(_,n.u_accent)}),hillshadePrepare:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_image:new u.aH(_,n.u_image),u_dimension:new u.aO(_,n.u_dimension),u_zoom:new u.aI(_,n.u_zoom),u_unpack:new u.aK(_,n.u_unpack)}),line:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_ratio:new u.aI(_,n.u_ratio),u_device_pixel_ratio:new u.aI(_,n.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,n.u_units_to_pixels)}),lineGradient:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_ratio:new u.aI(_,n.u_ratio),u_device_pixel_ratio:new u.aI(_,n.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,n.u_units_to_pixels),u_image:new u.aH(_,n.u_image),u_image_height:new u.aI(_,n.u_image_height)}),linePattern:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_texsize:new u.aO(_,n.u_texsize),u_ratio:new u.aI(_,n.u_ratio),u_device_pixel_ratio:new u.aI(_,n.u_device_pixel_ratio),u_image:new u.aH(_,n.u_image),u_units_to_pixels:new u.aO(_,n.u_units_to_pixels),u_scale:new u.aN(_,n.u_scale),u_fade:new u.aI(_,n.u_fade)}),lineSDF:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_ratio:new u.aI(_,n.u_ratio),u_device_pixel_ratio:new u.aI(_,n.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,n.u_units_to_pixels),u_patternscale_a:new u.aO(_,n.u_patternscale_a),u_patternscale_b:new u.aO(_,n.u_patternscale_b),u_sdfgamma:new u.aI(_,n.u_sdfgamma),u_image:new u.aH(_,n.u_image),u_tex_y_a:new u.aI(_,n.u_tex_y_a),u_tex_y_b:new u.aI(_,n.u_tex_y_b),u_mix:new u.aI(_,n.u_mix)}),raster:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_tl_parent:new u.aO(_,n.u_tl_parent),u_scale_parent:new u.aI(_,n.u_scale_parent),u_buffer_scale:new u.aI(_,n.u_buffer_scale),u_fade_t:new u.aI(_,n.u_fade_t),u_opacity:new u.aI(_,n.u_opacity),u_image0:new u.aH(_,n.u_image0),u_image1:new u.aH(_,n.u_image1),u_brightness_low:new u.aI(_,n.u_brightness_low),u_brightness_high:new u.aI(_,n.u_brightness_high),u_saturation_factor:new u.aI(_,n.u_saturation_factor),u_contrast_factor:new u.aI(_,n.u_contrast_factor),u_spin_weights:new u.aN(_,n.u_spin_weights)}),symbolIcon:(_,n)=>({u_is_size_zoom_constant:new u.aH(_,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,n.u_is_size_feature_constant),u_size_t:new u.aI(_,n.u_size_t),u_size:new u.aI(_,n.u_size),u_camera_to_center_distance:new u.aI(_,n.u_camera_to_center_distance),u_pitch:new u.aI(_,n.u_pitch),u_rotate_symbol:new u.aH(_,n.u_rotate_symbol),u_aspect_ratio:new u.aI(_,n.u_aspect_ratio),u_fade_change:new u.aI(_,n.u_fade_change),u_matrix:new u.aJ(_,n.u_matrix),u_label_plane_matrix:new u.aJ(_,n.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,n.u_coord_matrix),u_is_text:new u.aH(_,n.u_is_text),u_pitch_with_map:new u.aH(_,n.u_pitch_with_map),u_is_along_line:new u.aH(_,n.u_is_along_line),u_is_variable_anchor:new u.aH(_,n.u_is_variable_anchor),u_texsize:new u.aO(_,n.u_texsize),u_texture:new u.aH(_,n.u_texture),u_translation:new u.aO(_,n.u_translation),u_pitched_scale:new u.aI(_,n.u_pitched_scale)}),symbolSDF:(_,n)=>({u_is_size_zoom_constant:new u.aH(_,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,n.u_is_size_feature_constant),u_size_t:new u.aI(_,n.u_size_t),u_size:new u.aI(_,n.u_size),u_camera_to_center_distance:new u.aI(_,n.u_camera_to_center_distance),u_pitch:new u.aI(_,n.u_pitch),u_rotate_symbol:new u.aH(_,n.u_rotate_symbol),u_aspect_ratio:new u.aI(_,n.u_aspect_ratio),u_fade_change:new u.aI(_,n.u_fade_change),u_matrix:new u.aJ(_,n.u_matrix),u_label_plane_matrix:new u.aJ(_,n.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,n.u_coord_matrix),u_is_text:new u.aH(_,n.u_is_text),u_pitch_with_map:new u.aH(_,n.u_pitch_with_map),u_is_along_line:new u.aH(_,n.u_is_along_line),u_is_variable_anchor:new u.aH(_,n.u_is_variable_anchor),u_texsize:new u.aO(_,n.u_texsize),u_texture:new u.aH(_,n.u_texture),u_gamma_scale:new u.aI(_,n.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,n.u_device_pixel_ratio),u_is_halo:new u.aH(_,n.u_is_halo),u_translation:new u.aO(_,n.u_translation),u_pitched_scale:new u.aI(_,n.u_pitched_scale)}),symbolTextAndIcon:(_,n)=>({u_is_size_zoom_constant:new u.aH(_,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,n.u_is_size_feature_constant),u_size_t:new u.aI(_,n.u_size_t),u_size:new u.aI(_,n.u_size),u_camera_to_center_distance:new u.aI(_,n.u_camera_to_center_distance),u_pitch:new u.aI(_,n.u_pitch),u_rotate_symbol:new u.aH(_,n.u_rotate_symbol),u_aspect_ratio:new u.aI(_,n.u_aspect_ratio),u_fade_change:new u.aI(_,n.u_fade_change),u_matrix:new u.aJ(_,n.u_matrix),u_label_plane_matrix:new u.aJ(_,n.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,n.u_coord_matrix),u_is_text:new u.aH(_,n.u_is_text),u_pitch_with_map:new u.aH(_,n.u_pitch_with_map),u_is_along_line:new u.aH(_,n.u_is_along_line),u_is_variable_anchor:new u.aH(_,n.u_is_variable_anchor),u_texsize:new u.aO(_,n.u_texsize),u_texsize_icon:new u.aO(_,n.u_texsize_icon),u_texture:new u.aH(_,n.u_texture),u_texture_icon:new u.aH(_,n.u_texture_icon),u_gamma_scale:new u.aI(_,n.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,n.u_device_pixel_ratio),u_is_halo:new u.aH(_,n.u_is_halo),u_translation:new u.aO(_,n.u_translation),u_pitched_scale:new u.aI(_,n.u_pitched_scale)}),background:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_opacity:new u.aI(_,n.u_opacity),u_color:new u.aL(_,n.u_color)}),backgroundPattern:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_opacity:new u.aI(_,n.u_opacity),u_image:new u.aH(_,n.u_image),u_pattern_tl_a:new u.aO(_,n.u_pattern_tl_a),u_pattern_br_a:new u.aO(_,n.u_pattern_br_a),u_pattern_tl_b:new u.aO(_,n.u_pattern_tl_b),u_pattern_br_b:new u.aO(_,n.u_pattern_br_b),u_texsize:new u.aO(_,n.u_texsize),u_mix:new u.aI(_,n.u_mix),u_pattern_size_a:new u.aO(_,n.u_pattern_size_a),u_pattern_size_b:new u.aO(_,n.u_pattern_size_b),u_scale_a:new u.aI(_,n.u_scale_a),u_scale_b:new u.aI(_,n.u_scale_b),u_pixel_coord_upper:new u.aO(_,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,n.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(_,n.u_tile_units_to_pixels)}),terrain:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_texture:new u.aH(_,n.u_texture),u_ele_delta:new u.aI(_,n.u_ele_delta),u_fog_matrix:new u.aJ(_,n.u_fog_matrix),u_fog_color:new u.aL(_,n.u_fog_color),u_fog_ground_blend:new u.aI(_,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(_,n.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(_,n.u_horizon_color),u_horizon_fog_blend:new u.aI(_,n.u_horizon_fog_blend)}),terrainDepth:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_ele_delta:new u.aI(_,n.u_ele_delta)}),terrainCoords:(_,n)=>({u_matrix:new u.aJ(_,n.u_matrix),u_texture:new u.aH(_,n.u_texture),u_terrain_coords_id:new u.aI(_,n.u_terrain_coords_id),u_ele_delta:new u.aI(_,n.u_ele_delta)}),sky:(_,n)=>({u_sky_color:new u.aL(_,n.u_sky_color),u_horizon_color:new u.aL(_,n.u_horizon_color),u_horizon:new u.aI(_,n.u_horizon),u_sky_horizon_blend:new u.aI(_,n.u_sky_horizon_blend)})};class ys{constructor(n,l,p){this.context=n;const m=n.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const i_={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Dh{constructor(n,l,p,m){this.length=l.length,this.attributes=p,this.itemSize=l.bytesPerElement,this.dynamicDraw=m,this.context=n;const y=n.gl;this.buffer=y.createBuffer(),n.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,l){for(let p=0;p<this.attributes.length;p++){const m=l.attributes[this.attributes[p].name];m!==void 0&&n.enableVertexAttribArray(m)}}setVertexAttribPointers(n,l,p){for(let m=0;m<this.attributes.length;m++){const y=this.attributes[m],S=l.attributes[y.name];S!==void 0&&n.vertexAttribPointer(S,y.components,n[i_[y.type]],!1,this.itemSize,y.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ko=new WeakMap;function Qs(_){var n;if(ko.has(_))return ko.get(_);{const l=(n=_.getParameter(_.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return ko.set(_,l),l}}class Gt{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Mu extends Gt{getDefault(){return u.aM.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class s_ extends Gt{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class ha extends Gt{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class o_ extends Gt{getDefault(){return[!0,!0,!0,!0]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class _p extends Gt{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class a_ extends Gt{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class vp extends Gt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const l=this.current;(n.func!==l.func||n.ref!==l.ref||n.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Rh extends Gt{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class xp extends Gt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=n,this.dirty=!1}}class bp extends Gt{getDefault(){return[0,1]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class wp extends Gt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=n,this.dirty=!1}}class Sp extends Gt{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Po extends Gt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.BLEND):l.disable(l.BLEND),this.current=n,this.dirty=!1}}class Tp extends Gt{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class l_ extends Gt{getDefault(){return u.aM.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Cp extends Gt{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class yl extends Gt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=n,this.dirty=!1}}class u_ extends Gt{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Au extends Gt{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class c_ extends Gt{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class h_ extends Gt{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class kp extends Gt{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Pp extends Gt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Ep extends Gt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Lh extends Gt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Ip extends Gt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class zu extends Gt{getDefault(){return null}set(n){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Vs extends Gt{getDefault(){return null}set(n){var l;if(n===this.current&&!this.dirty)return;const p=this.gl;Qs(p)?p.bindVertexArray(n):(l=p.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Fh extends Gt{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Oh extends Gt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Bh extends Gt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Du extends Gt{constructor(n,l){super(n),this.context=n,this.parent=l}getDefault(){return null}}class Vh extends Du{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Eo extends Du{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Nh extends Du{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class d_{constructor(n,l,p,m,y){this.context=n,this.width=l,this.height=p;const S=n.gl,C=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Vh(n,C),m)this.depthAttachment=y?new Nh(n,C):new Eo(n,C);else if(y)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,l=this.colorAttachment.get();if(l&&n.deleteTexture(l),this.depthAttachment){const p=this.depthAttachment.get();p&&n.deleteRenderbuffer(p)}n.deleteFramebuffer(this.framebuffer)}}class En{constructor(n,l,p){this.blendFunction=n,this.blendColor=l,this.mask=p}}En.Replace=[1,0],En.disabled=new En(En.Replace,u.aM.transparent,[!1,!1,!1,!1]),En.unblended=new En(En.Replace,u.aM.transparent,[!0,!0,!0,!0]),En.alphaBlended=new En([1,771],u.aM.transparent,[!0,!0,!0,!0]);class f_{constructor(n){var l,p;if(this.gl=n,this.clearColor=new Mu(this),this.clearDepth=new s_(this),this.clearStencil=new ha(this),this.colorMask=new o_(this),this.depthMask=new _p(this),this.stencilMask=new a_(this),this.stencilFunc=new vp(this),this.stencilOp=new Rh(this),this.stencilTest=new xp(this),this.depthRange=new bp(this),this.depthTest=new wp(this),this.depthFunc=new Sp(this),this.blend=new Po(this),this.blendFunc=new Tp(this),this.blendColor=new l_(this),this.blendEquation=new Cp(this),this.cullFace=new yl(this),this.cullFaceSide=new u_(this),this.frontFace=new Au(this),this.program=new c_(this),this.activeTexture=new h_(this),this.viewport=new kp(this),this.bindFramebuffer=new Pp(this),this.bindRenderbuffer=new Ep(this),this.bindTexture=new Lh(this),this.bindVertexBuffer=new Ip(this),this.bindElementBuffer=new zu(this),this.bindVertexArray=new Vs(this),this.pixelStoreUnpack=new Fh(this),this.pixelStoreUnpackPremultiplyAlpha=new Oh(this),this.pixelStoreUnpackFlipY=new Bh(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Qs(n)){this.HALF_FLOAT=n.HALF_FLOAT;const m=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=n.RGBA16F)!==null&&l!==void 0?l:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(p=n.RGB16F)!==null&&p!==void 0?p:m==null?void 0:m.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const m=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,l){return new ys(this,n,l)}createVertexBuffer(n,l,p){return new Dh(this,n,l,p)}createRenderbuffer(n,l,p){const m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,n,l,p),this.bindRenderbuffer.set(null),y}createFramebuffer(n,l,p,m){return new d_(this,n,l,p,m)}clear({color:n,depth:l,stencil:p}){const m=this.gl;let y=0;n&&(y|=m.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(y|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),p!==void 0&&(y|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),m.clear(y)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){u.aE(n.blendFunction,En.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Qs(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var l;return Qs(this.gl)?this.gl.deleteVertexArray(n):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class Rt{constructor(n,l,p){this.func=n,this.mask=l,this.range=p}}Rt.ReadOnly=!1,Rt.ReadWrite=!0,Rt.disabled=new Rt(519,Rt.ReadOnly,[0,1]);const Ru=7680;class on{constructor(n,l,p,m,y,S){this.test=n,this.ref=l,this.mask=p,this.fail=m,this.depthFail=y,this.pass=S}}on.disabled=new on({func:519,mask:0},0,0,Ru,Ru,Ru);class Qt{constructor(n,l,p){this.enable=n,this.mode=l,this.frontFace=p}}let Io;function _l(_,n,l,p,m){const y=_.context,S=y.gl,C=_.useProgram("collisionBox"),P=[];let D=0,L=0;for(let ce=0;ce<p.length;ce++){const me=p[ce],re=n.getTile(me).getBucket(l);if(!re)continue;const _e=m?re.textCollisionBox:re.iconCollisionBox,xe=re.collisionCircleArray;if(xe.length>0){const Te=u.H();u.aQ(Te,re.placementInvProjMatrix,_.transform.glCoordMatrix),u.aQ(Te,Te,re.placementViewportMatrix),P.push({circleArray:xe,circleOffset:L,transform:me.posMatrix,invTransform:Te,coord:me}),D+=xe.length/4,L=D}_e&&C.draw(y,S.LINES,Rt.disabled,on.disabled,_.colorModeForRenderPass(),Qt.disabled,{u_matrix:me.posMatrix,u_pixel_extrude_scale:[1/(F=_.transform).width,1/F.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(me),l.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,null,_.transform.zoom,null,null,_e.collisionVertexBuffer)}var F;if(!m||!P.length)return;const U=_.useProgram("collisionCircle"),K=new u.aR;K.resize(4*D),K._trim();let Q=0;for(const ce of P)for(let me=0;me<ce.circleArray.length/4;me++){const re=4*me,_e=ce.circleArray[re+0],xe=ce.circleArray[re+1],Te=ce.circleArray[re+2],Oe=ce.circleArray[re+3];K.emplace(Q++,_e,xe,Te,Oe,0),K.emplace(Q++,_e,xe,Te,Oe,1),K.emplace(Q++,_e,xe,Te,Oe,2),K.emplace(Q++,_e,xe,Te,Oe,3)}(!Io||Io.length<2*D)&&(Io=function(ce){const me=2*ce,re=new u.aT;re.resize(me),re._trim();for(let _e=0;_e<me;_e++){const xe=6*_e;re.uint16[xe+0]=4*_e+0,re.uint16[xe+1]=4*_e+1,re.uint16[xe+2]=4*_e+2,re.uint16[xe+3]=4*_e+2,re.uint16[xe+4]=4*_e+3,re.uint16[xe+5]=4*_e+0}return re}(D));const se=y.createIndexBuffer(Io,!0),ue=y.createVertexBuffer(K,u.aS.members,!0);for(const ce of P){const me=Co(ce.transform,ce.invTransform,_.transform);U.draw(y,S.TRIANGLES,Rt.disabled,on.disabled,_.colorModeForRenderPass(),Qt.disabled,me,_.style.map.terrain&&_.style.map.terrain.getTerrainData(ce.coord),l.id,ue,se,u.a0.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,_.transform.zoom,null,null,null)}ue.destroy(),se.destroy()}Qt.disabled=new Qt(!1,1029,2305),Qt.backCCW=new Qt(!0,1029,2305);const vl=u.an(new Float32Array(16));function jh(_,n,l,p,m,y){const{horizontalAlign:S,verticalAlign:C}=u.au(_);return new u.P((-(S-.5)*n/m+p[0])*y,(-(C-.5)*l/m+p[1])*y)}function Mo(_,n,l,p,m,y){const S=n.tileAnchorPoint.add(new u.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let C=p.mult(y);l||(C=C.rotate(-m));const P=S.add(C);return oe(P.x,P.y,n.labelPlaneMatrix,n.getElevation).point}if(l){const C=Ie(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(_),P=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return _.add(p.rotate(P))}return _.add(p)}function da(_,n,l,p,m,y,S,C,P,D,L,F,U,K){const Q=_.text.placedSymbolArray,se=_.text.dynamicLayoutVertexArray,ue=_.icon.dynamicLayoutVertexArray,ce={};se.clear();for(let me=0;me<Q.length;me++){const re=Q.get(me),_e=re.hidden||!re.crossTileID||_.allowVerticalPlacement&&!re.placedOrientation?null:p[re.crossTileID];if(_e){const xe=new u.P(re.anchorX,re.anchorY),Te={getElevation:K,width:m.width,height:m.height,labelPlaneMatrix:y,pitchWithMap:l,projection:L,tileAnchorPoint:xe,translation:F,unwrappedTileID:U},Oe=l?oe(xe.x,xe.y,S,K):Ie(xe.x,xe.y,Te),We=V(m.cameraToCenterDistance,Oe.signedDistanceFromCamera);let et=u.ai(_.textSizeData,P,re)*We/u.ap;l&&(et*=_.tilePixelRatio/C);const{width:st,height:Ke,anchor:Xe,textOffset:ht,textBoxScale:Pt}=_e,Ye=jh(Xe,st,Ke,ht,Pt,et),nt=L.getPitchedTextCorrection(m,xe.add(new u.P(F[0],F[1])),U),Ct=Mo(Oe.point,Te,n,Ye,m.angle,nt),pn=_.allowVerticalPlacement&&re.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let At=0;At<re.numGlyphs;At++)u.aj(se,Ct,pn);D&&re.associatedIconIndex>=0&&(ce[re.associatedIconIndex]={shiftedAnchor:Ct,angle:pn})}else yt(re.numGlyphs,se)}if(D){ue.clear();const me=_.icon.placedSymbolArray;for(let re=0;re<me.length;re++){const _e=me.get(re);if(_e.hidden)yt(_e.numGlyphs,ue);else{const xe=ce[re];if(xe)for(let Te=0;Te<_e.numGlyphs;Te++)u.aj(ue,xe.shiftedAnchor,xe.angle);else yt(_e.numGlyphs,ue)}}_.icon.dynamicLayoutVertexBuffer.updateData(ue)}_.text.dynamicLayoutVertexBuffer.updateData(se)}function Ei(_,n,l){return l.iconsInText&&n?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function $h(_,n,l,p,m,y,S,C,P,D,L,F){const U=_.context,K=U.gl,Q=_.transform,se=So(),ue=C==="map",ce=P==="map",me=C!=="viewport"&&l.layout.get("symbol-placement")!=="point",re=ue&&!ce&&!me,_e=!ce&&me,xe=!l.layout.get("symbol-sort-key").isConstant();let Te=!1;const Oe=_.depthModeForSublayer(0,Rt.ReadOnly),We=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),et=[],st=se.getCircleRadiusCorrection(Q);for(const Ke of p){const Xe=n.getTile(Ke),ht=Xe.getBucket(l);if(!ht)continue;const Pt=m?ht.text:ht.icon;if(!Pt||!Pt.segments.get().length||!Pt.hasVisibleVertices)continue;const Ye=Pt.programConfigurations.get(l.id),nt=m||ht.sdfIcons,Ct=m?ht.textSizeData:ht.iconSizeData,pn=ce||Q.pitch!==0,At=_.useProgram(Ei(nt,m,ht),Ye),Ft=u.ag(Ct,Q.zoom),mn=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ke);let br,Ki,gn,Kr,Or=[0,0],wr=null;if(m)Ki=Xe.glyphAtlasTexture,gn=K.LINEAR,br=Xe.glyphAtlasTexture.size,ht.iconsInText&&(Or=Xe.imageAtlasTexture.size,wr=Xe.imageAtlasTexture,Kr=pn||_.options.rotating||_.options.zooming||Ct.kind==="composite"||Ct.kind==="camera"?K.LINEAR:K.NEAREST);else{const Bt=l.layout.get("icon-size").constantOr(0)!==1||ht.iconsNeedLinear;Ki=Xe.imageAtlasTexture,gn=nt||_.options.rotating||_.options.zooming||Bt||pn?K.LINEAR:K.NEAREST,br=Xe.imageAtlasTexture.size}const Br=Lt(Xe,1,_.transform.zoom),xs=_e?Ke.posMatrix:vl,Pa=gs(xs,ce,ue,_.transform,Br),Qu=ki(xs,ce,ue,_.transform,Br),Ea=ki(Ke.posMatrix,ce,ue,_.transform,Br),Ai=se.translatePosition(_.transform,Xe,y,S),ec=We&&ht.hasTextData(),fd=l.layout.get("icon-text-fit")!=="none"&&ec&&ht.hasIconData();if(me){const Bt=_.style.map.terrain?(Ia,Ma)=>_.style.map.terrain.getElevation(Ke,Ia,Ma):null,Lo=l.layout.get("text-rotation-alignment")==="map";X(ht,Ke.posMatrix,_,m,Pa,Ea,ce,D,Lo,se,Ke.toUnwrapped(),Q.width,Q.height,Ai,Bt)}const zi=Ke.posMatrix,Di=m&&We||fd,eo=me||Di?vl:Pa,Yi=Qu,pr=nt&&l.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Sr;Sr=nt?ht.iconsInText?Mh(Ct.kind,Ft,re,ce,me,Di,_,zi,eo,Yi,Ai,br,Or,st):gl(Ct.kind,Ft,re,ce,me,Di,_,zi,eo,Yi,Ai,m,br,!0,st):yp(Ct.kind,Ft,re,ce,me,Di,_,zi,eo,Yi,Ai,m,br,st);const mi={program:At,buffers:Pt,uniformValues:Sr,atlasTexture:Ki,atlasTextureIcon:wr,atlasInterpolation:gn,atlasInterpolationIcon:Kr,isSDF:nt,hasHalo:pr};if(xe&&ht.canOverlap){Te=!0;const Bt=Pt.segments.get();for(const Lo of Bt)et.push({segments:new u.a0([Lo]),sortKey:Lo.sortKey,state:mi,terrainData:mn})}else et.push({segments:Pt.segments,sortKey:0,state:mi,terrainData:mn})}Te&&et.sort((Ke,Xe)=>Ke.sortKey-Xe.sortKey);for(const Ke of et){const Xe=Ke.state;if(U.activeTexture.set(K.TEXTURE0),Xe.atlasTexture.bind(Xe.atlasInterpolation,K.CLAMP_TO_EDGE),Xe.atlasTextureIcon&&(U.activeTexture.set(K.TEXTURE1),Xe.atlasTextureIcon&&Xe.atlasTextureIcon.bind(Xe.atlasInterpolationIcon,K.CLAMP_TO_EDGE)),Xe.isSDF){const ht=Xe.uniformValues;Xe.hasHalo&&(ht.u_is_halo=1,Uh(Xe.buffers,Ke.segments,l,_,Xe.program,Oe,L,F,ht,Ke.terrainData)),ht.u_is_halo=0}Uh(Xe.buffers,Ke.segments,l,_,Xe.program,Oe,L,F,Xe.uniformValues,Ke.terrainData)}}function Uh(_,n,l,p,m,y,S,C,P,D){const L=p.context;m.draw(L,L.gl.TRIANGLES,y,S,C,Qt.disabled,P,D,l.id,_.layoutVertexBuffer,_.indexBuffer,n,l.paint,p.transform.zoom,_.programConfigurations.get(l.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Wh(_,n,l,p){const m=_.context,y=m.gl,S=on.disabled,C=new En([y.ONE,y.ONE],u.aM.transparent,[!0,!0,!0,!0]),P=n.getBucket(l);if(!P)return;const D=p.key;let L=l.heatmapFbos.get(D);L||(L=xl(m,n.tileSize,n.tileSize),l.heatmapFbos.set(D,L)),m.bindFramebuffer.set(L.framebuffer),m.viewport.set([0,0,n.tileSize,n.tileSize]),m.clear({color:u.aM.transparent});const F=P.programConfigurations.get(l.id),U=_.useProgram("heatmap",F),K=_.style.map.terrain.getTerrainData(p);U.draw(m,y.TRIANGLES,Rt.disabled,S,C,Qt.disabled,Xr(p.posMatrix,n,_.transform.zoom,l.paint.get("heatmap-intensity")),K,l.id,P.layoutVertexBuffer,P.indexBuffer,P.segments,l.paint,_.transform.zoom,F)}function Ao(_,n,l){const p=_.context,m=p.gl;p.setColorMode(_.colorModeForRenderPass());const y=bl(p,n),S=l.key,C=n.heatmapFbos.get(S);C&&(p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,C.colorAttachment.get()),p.activeTexture.set(m.TEXTURE1),y.bind(m.LINEAR,m.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(p,m.TRIANGLES,Rt.disabled,on.disabled,_.colorModeForRenderPass(),Qt.disabled,ku(_,n,0,1),null,n.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,n.paint,_.transform.zoom),C.destroy(),n.heatmapFbos.delete(S))}function xl(_,n,l){var p,m;const y=_.gl,S=y.createTexture();y.bindTexture(y.TEXTURE_2D,S),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const C=(p=_.HALF_FLOAT)!==null&&p!==void 0?p:y.UNSIGNED_BYTE,P=(m=_.RGBA16F)!==null&&m!==void 0?m:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,P,n,l,0,y.RGBA,C,null);const D=_.createFramebuffer(n,l,!1,!1);return D.colorAttachment.set(S),D}function bl(_,n){return n.colorRampTexture||(n.colorRampTexture=new Re(_,n.colorRamp,_.gl.RGBA)),n.colorRampTexture}function fa(_,n,l,p,m){if(!l||!p||!p.imageAtlas)return;const y=p.imageAtlas.patternPositions;let S=y[l.to.toString()],C=y[l.from.toString()];if(!S&&C&&(S=C),!C&&S&&(C=S),!S||!C){const P=m.getPaintProperty(n);S=y[P],C=y[P]}S&&C&&_.setConstantPatternPositions(S,C)}function wl(_,n,l,p,m,y,S){const C=_.context.gl,P="fill-pattern",D=l.paint.get(P),L=D&&D.constantOr(1),F=l.getCrossfadeParameters();let U,K,Q,se,ue;S?(K=L&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=C.LINES):(K=L?"fillPattern":"fill",U=C.TRIANGLES);const ce=D.constantOr(null);for(const me of p){const re=n.getTile(me);if(L&&!re.patternsLoaded())continue;const _e=re.getBucket(l);if(!_e)continue;const xe=_e.programConfigurations.get(l.id),Te=_.useProgram(K,xe),Oe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(me);L&&(_.context.activeTexture.set(C.TEXTURE0),re.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),xe.updatePaintBuffers(F)),fa(xe,P,ce,re,l);const We=Oe?me:null,et=_.translatePosMatrix(We?We.posMatrix:me.posMatrix,re,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(S){se=_e.indexBuffer2,ue=_e.segments2;const st=[C.drawingBufferWidth,C.drawingBufferHeight];Q=K==="fillOutlinePattern"&&L?fp(et,_,F,re,st):Qy(et,st)}else se=_e.indexBuffer,ue=_e.segments,Q=L?dp(et,_,F,re):ua(et);Te.draw(_.context,U,m,_.stencilModeForClipping(me),y,Qt.disabled,Q,Oe,l.id,_e.layoutVertexBuffer,se,ue,l.paint,_.transform.zoom,xe)}}function Lu(_,n,l,p,m,y,S){const C=_.context,P=C.gl,D="fill-extrusion-pattern",L=l.paint.get(D),F=L.constantOr(1),U=l.getCrossfadeParameters(),K=l.paint.get("fill-extrusion-opacity"),Q=L.constantOr(null);for(const se of p){const ue=n.getTile(se),ce=ue.getBucket(l);if(!ce)continue;const me=_.style.map.terrain&&_.style.map.terrain.getTerrainData(se),re=ce.programConfigurations.get(l.id),_e=_.useProgram(F?"fillExtrusionPattern":"fillExtrusion",re);F&&(_.context.activeTexture.set(P.TEXTURE0),ue.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),re.updatePaintBuffers(U)),fa(re,D,Q,ue,l);const xe=_.translatePosMatrix(se.posMatrix,ue,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Te=l.paint.get("fill-extrusion-vertical-gradient"),Oe=F?Cu(xe,_,Te,K,se,U,ue):pl(xe,_,Te,K);_e.draw(C,C.gl.TRIANGLES,m,y,S,Qt.backCCW,Oe,me,l.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,l.paint,_.transform.zoom,re,_.style.map.terrain&&ce.centroidVertexBuffer)}}function pa(_,n,l,p,m,y,S){const C=_.context,P=C.gl,D=l.fbo;if(!D)return;const L=_.useProgram("hillshade"),F=_.style.map.terrain&&_.style.map.terrain.getTerrainData(n);C.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,D.colorAttachment.get()),L.draw(C,P.TRIANGLES,m,y,S,Qt.disabled,((U,K,Q,se)=>{const ue=Q.paint.get("hillshade-shadow-color"),ce=Q.paint.get("hillshade-highlight-color"),me=Q.paint.get("hillshade-accent-color");let re=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=U.transform.angle);const _e=!U.options.moving;return{u_matrix:se?se.posMatrix:U.transform.calculatePosMatrix(K.tileID.toUnwrapped(),_e),u_image:0,u_latrange:Pu(0,K.tileID),u_light:[Q.paint.get("hillshade-exaggeration"),re],u_shadow:ue,u_highlight:ce,u_accent:me}})(_,l,p,F?n:null),F,p.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function ma(_,n,l,p,m,y){const S=_.context,C=S.gl,P=n.dem;if(P&&P.data){const D=P.dim,L=P.stride,F=P.getPixels();if(S.activeTexture.set(C.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||_.getTileTexture(L),n.demTexture){const K=n.demTexture;K.update(F,{premultiply:!1}),K.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else n.demTexture=new Re(S,F,C.RGBA,{premultiply:!1}),n.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);S.activeTexture.set(C.TEXTURE0);let U=n.fbo;if(!U){const K=new Re(S,{width:D,height:D,data:null},C.RGBA);K.bind(C.LINEAR,C.CLAMP_TO_EDGE),U=n.fbo=S.createFramebuffer(D,D,!0,!1),U.colorAttachment.set(K.texture)}S.bindFramebuffer.set(U.framebuffer),S.viewport.set([0,0,D,D]),_.useProgram("hillshadePrepare").draw(S,C.TRIANGLES,p,m,y,Qt.disabled,((K,Q)=>{const se=Q.stride,ue=u.H();return u.aP(ue,0,u.X,-u.X,0,0,1),u.J(ue,ue,[0,-u.X,0]),{u_matrix:ue,u_image:1,u_dimension:[se,se],u_zoom:K.overscaledZ,u_unpack:Q.getUnpackVector()}})(n.tileID,P),null,l.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Mp(_,n,l,p,m,y){const S=p.paint.get("raster-fade-duration");if(!y&&S>0){const C=A.now(),P=(C-_.timeAdded)/S,D=n?(C-n.timeAdded)/S:-1,L=l.getSource(),F=m.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),U=!n||Math.abs(n.tileID.overscaledZ-F)>Math.abs(_.tileID.overscaledZ-F),K=U&&_.refreshedUponExpiration?1:u.ac(U?P:1-D,0,1);return _.refreshedUponExpiration&&P>=1&&(_.refreshedUponExpiration=!1),n?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}const qh=new u.aM(1,0,0,1),Ut=new u.aM(0,1,0,1),Fu=new u.aM(0,0,1,1),p_=new u.aM(1,0,1,1),Ap=new u.aM(0,1,1,1);function ga(_,n,l,p){Ou(_,0,n+l/2,_.transform.width,l,p)}function zp(_,n,l,p){Ou(_,n-l/2,0,l,_.transform.height,p)}function Ou(_,n,l,p,m,y){const S=_.context,C=S.gl;C.enable(C.SCISSOR_TEST),C.scissor(n*_.pixelRatio,l*_.pixelRatio,p*_.pixelRatio,m*_.pixelRatio),S.clear({color:y}),C.disable(C.SCISSOR_TEST)}function Dp(_,n,l){const p=_.context,m=p.gl,y=l.posMatrix,S=_.useProgram("debug"),C=Rt.disabled,P=on.disabled,D=_.colorModeForRenderPass(),L="$debug",F=_.style.map.terrain&&_.style.map.terrain.getTerrainData(l);p.activeTexture.set(m.TEXTURE0);const U=n.getTileByID(l.key).latestRawTileData,K=Math.floor((U&&U.byteLength||0)/1024),Q=n.getTile(l).tileSize,se=512/Math.min(Q,512)*(l.overscaledZ/_.transform.zoom)*.5;let ue=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(ue+=` => ${l.overscaledZ}`),function(ce,me){ce.initDebugOverlayCanvas();const re=ce.debugOverlayCanvas,_e=ce.context.gl,xe=ce.debugOverlayCanvas.getContext("2d");xe.clearRect(0,0,re.width,re.height),xe.shadowColor="white",xe.shadowBlur=2,xe.lineWidth=1.5,xe.strokeStyle="white",xe.textBaseline="top",xe.font="bold 36px Open Sans, sans-serif",xe.fillText(me,5,5),xe.strokeText(me,5,5),ce.debugOverlayTexture.update(re),ce.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}(_,`${ue} ${K}kB`),S.draw(p,m.TRIANGLES,C,P,En.alphaBlended,Qt.disabled,ml(y,u.aM.transparent,se),null,L,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),S.draw(p,m.LINE_STRIP,C,P,D,Qt.disabled,ml(y,u.aM.red),F,L,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Rp(_,n,l){const p=_.context,m=p.gl,y=_.colorModeForRenderPass(),S=new Rt(m.LEQUAL,Rt.ReadWrite,_.depthRangeFor3D),C=_.useProgram("terrain"),P=n.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,_.width,_.height]);for(const D of l){const L=_.renderToTexture.getTexture(D),F=n.getTerrainData(D.tileID);p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,L.texture);const U=_.transform.calculatePosMatrix(D.tileID.toUnwrapped()),K=n.getMeshFrameDelta(_.transform.zoom),Q=_.transform.calculateFogMatrix(D.tileID.toUnwrapped()),se=Eh(U,K,Q,_.style.sky,_.transform.pitch);C.draw(p,m.TRIANGLES,S,on.disabled,y,Qt.backCCW,se,F,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}}class Bu{constructor(n,l,p){this.vertexBuffer=n,this.indexBuffer=l,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Vu{constructor(n,l){this.context=new f_(n),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=bt.maxUnderzooming+bt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new kh}resize(n,l,p){if(this.width=Math.floor(n*p),this.height=Math.floor(l*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const n=this.context,l=new u.aX;l.emplaceBack(0,0),l.emplaceBack(u.X,0),l.emplaceBack(0,u.X),l.emplaceBack(u.X,u.X),this.tileExtentBuffer=n.createVertexBuffer(l,To.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const p=new u.aX;p.emplaceBack(0,0),p.emplaceBack(u.X,0),p.emplaceBack(0,u.X),p.emplaceBack(u.X,u.X),this.debugBuffer=n.createVertexBuffer(p,To.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const m=new u.$;m.emplaceBack(0,0,0,0),m.emplaceBack(u.X,0,u.X,0),m.emplaceBack(0,u.X,0,u.X),m.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=n.createVertexBuffer(m,wt.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const y=new u.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(y,To.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const S=new u.aZ;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(S);const C=new u.aY;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(C);const P=this.context.gl;this.stencilClearMode=new on({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)}clearStencil(){const n=this.context,l=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.H();u.aP(p,0,this.width,this.height,0,0,1),u.K(p,p,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,l.TRIANGLES,Rt.disabled,this.stencilClearMode,En.disabled,Qt.disabled,Zr(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,l){if(this.currentStencilSource===n.source||!n.isTileClipped()||!l||!l.length)return;this.currentStencilSource=n.source;const p=this.context,m=p.gl;this.nextStencilID+l.length>256&&this.clearStencil(),p.setColorMode(En.disabled),p.setDepthMode(Rt.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of l){const C=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,P=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);y.draw(p,m.TRIANGLES,Rt.disabled,new on({func:m.ALWAYS,mask:0},C,255,m.KEEP,m.KEEP,m.REPLACE),En.disabled,Qt.disabled,Zr(S.posMatrix),P,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,l=this.context.gl;return new on({func:l.NOTEQUAL,mask:255},n,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(n){const l=this.context.gl;return new on({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(n){const l=this.context.gl,p=n.sort((S,C)=>C.overscaledZ-S.overscaledZ),m=p[p.length-1].overscaledZ,y=p[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const S={};for(let C=0;C<y;C++)S[C+m]=new on({func:l.GEQUAL,mask:255},C+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=y,[S,p]}return[{[m]:on.disabled},p]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new En([n.CONSTANT_COLOR,n.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?En.unblended:En.alphaBlended}depthModeForSublayer(n,l,p){if(!this.opaquePassEnabledForLayer())return Rt.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Rt(p||this.context.gl.LEQUAL,l,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,l){this.style=n,this.options=l,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const p=this.style._order,m=this.style.sourceCaches,y={},S={},C={};for(const P in m){const D=m[P];D.used&&D.prepare(this.context),y[P]=D.getVisibleCoordinates(),S[P]=y[P].slice().reverse(),C[P]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<p.length;P++)if(this.style._layers[p[P]].is3D()){this.opaquePassCutoff=P;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const P of p){const D=this.style._layers[P];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const L=S[D.source];(D.type==="custom"||L.length)&&this.renderLayer(this,m[D.source],D,L)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(P,D){const L=P.context,F=L.gl,U=((ce,me,re)=>({u_sky_color:ce.properties.get("sky-color"),u_horizon_color:ce.properties.get("horizon-color"),u_horizon:(me.height/2+me.getHorizon())*re,u_sky_horizon_blend:ce.properties.get("sky-horizon-blend")*me.height/2*re}))(D,P.style.map.transform,P.pixelRatio),K=new Rt(F.LEQUAL,Rt.ReadWrite,[0,1]),Q=on.disabled,se=P.colorModeForRenderPass(),ue=P.useProgram("sky");if(!D.mesh){const ce=new u.aX;ce.emplaceBack(-1,-1),ce.emplaceBack(1,-1),ce.emplaceBack(1,1),ce.emplaceBack(-1,1);const me=new u.aY;me.emplaceBack(0,1,2),me.emplaceBack(0,2,3),D.mesh=new Bu(L.createVertexBuffer(ce,To.members),L.createIndexBuffer(me),u.a0.simpleSegment(0,0,ce.length,me.length))}ue.draw(L,F.TRIANGLES,K,Q,se,Qt.disabled,U,void 0,"sky",D.mesh.vertexBuffer,D.mesh.indexBuffer,D.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[p[this.currentLayer]],D=m[P.source],L=y[P.source];this._renderTileClippingMasks(P,L),this.renderLayer(this,D,P,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const P=this.style._layers[p[this.currentLayer]],D=m[P.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(P))continue;const L=(P.type==="symbol"?C:S)[P.source];this._renderTileClippingMasks(P,y[P.source]),this.renderLayer(this,D,P,L)}if(this.options.showTileBoundaries){const P=function(D,L){let F=null;const U=Object.values(D._layers).flatMap(ue=>ue.source&&!ue.isHidden(L)?[D.sourceCaches[ue.source]]:[]),K=U.filter(ue=>ue.getSource().type==="vector"),Q=U.filter(ue=>ue.getSource().type!=="vector"),se=ue=>{(!F||F.getSource().maxzoom<ue.getSource().maxzoom)&&(F=ue)};return K.forEach(ue=>se(ue)),F||Q.forEach(ue=>se(ue)),F}(this.style,this.transform.zoom);P&&function(D,L,F){for(let U=0;U<F.length;U++)Dp(D,L,F[U])}(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const D=P.transform.padding;ga(P,P.transform.height-(D.top||0),3,qh),ga(P,D.bottom||0,3,Ut),zp(P,D.left||0,3,Fu),zp(P,P.transform.width-(D.right||0),3,p_);const L=P.transform.centerPoint;(function(F,U,K,Q){Ou(F,U-1,K-10,2,20,Q),Ou(F,U-10,K-1,20,2,Q)})(P,L.x,P.transform.height-L.y,Ap)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=n?!u.a_(l,p):!u.a$(l,p)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(u.b0(l,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,S){const C=y.context,P=C.gl,D=En.unblended,L=new Rt(P.LEQUAL,Rt.ReadWrite,[0,1]),F=S.getTerrainMesh(),U=S.sourceCache.getRenderableTiles(),K=y.useProgram("terrainDepth");C.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1});for(const Q of U){const se=S.getTerrainData(Q.tileID),ue={u_matrix:y.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(y.transform.zoom)};K.draw(C,P.TRIANGLES,L,on.disabled,D,Qt.backCCW,ue,se,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,S){const C=y.context,P=C.gl,D=En.unblended,L=new Rt(P.LEQUAL,Rt.ReadWrite,[0,1]),F=S.getTerrainMesh(),U=S.getCoordsTexture(),K=S.sourceCache.getRenderableTiles(),Q=y.useProgram("terrainCoords");C.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1}),S.coordsIndex=[];for(const se of K){const ue=S.getTerrainData(se.tileID);C.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,U.texture);const ce={u_matrix:y.transform.calculatePosMatrix(se.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(y.transform.zoom)};Q.draw(C,P.TRIANGLES,L,on.disabled,D,Qt.backCCW,ce,ue,"terrain",F.vertexBuffer,F.indexBuffer,F.segments),S.coordsIndex.push(se.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(n,l,p,m){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(m||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(y,S,C,P,D){if(y.renderPass!=="translucent")return;const L=on.disabled,F=y.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(U,K,Q,se,ue,ce,me,re,_e){const xe=K.transform,Te=So(),Oe=ue==="map",We=ce==="map";for(const et of U){const st=se.getTile(et),Ke=st.getBucket(Q);if(!Ke||!Ke.text||!Ke.text.segments.get().length)continue;const Xe=u.ag(Ke.textSizeData,xe.zoom),ht=Lt(st,1,K.transform.zoom),Pt=gs(et.posMatrix,We,Oe,K.transform,ht),Ye=Q.layout.get("icon-text-fit")!=="none"&&Ke.hasIconData();if(Xe){const nt=Math.pow(2,xe.zoom-st.tileID.overscaledZ),Ct=K.style.map.terrain?(At,Ft)=>K.style.map.terrain.getElevation(et,At,Ft):null,pn=Te.translatePosition(xe,st,me,re);da(Ke,Oe,We,_e,xe,Pt,et.posMatrix,nt,Xe,Ye,Te,pn,et.toUnwrapped(),Ct)}}}(P,y,C,S,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),D),C.paint.get("icon-opacity").constantOr(1)!==0&&$h(y,S,C,P,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),L,F),C.paint.get("text-opacity").constantOr(1)!==0&&$h(y,S,C,P,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),L,F),S.map.showCollisionBoxes&&(_l(y,S,C,P,!0),_l(y,S,C,P,!1))})(n,l,p,m,this.style.placement.variableOffsets);break;case"circle":(function(y,S,C,P){if(y.renderPass!=="translucent")return;const D=C.paint.get("circle-opacity"),L=C.paint.get("circle-stroke-width"),F=C.paint.get("circle-stroke-opacity"),U=!C.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(L.constantOr(1)===0||F.constantOr(1)===0))return;const K=y.context,Q=K.gl,se=y.depthModeForSublayer(0,Rt.ReadOnly),ue=on.disabled,ce=y.colorModeForRenderPass(),me=[];for(let re=0;re<P.length;re++){const _e=P[re],xe=S.getTile(_e),Te=xe.getBucket(C);if(!Te)continue;const Oe=Te.programConfigurations.get(C.id),We=y.useProgram("circle",Oe),et=Te.layoutVertexBuffer,st=Te.indexBuffer,Ke=y.style.map.terrain&&y.style.map.terrain.getTerrainData(_e),Xe={programConfiguration:Oe,program:We,layoutVertexBuffer:et,indexBuffer:st,uniformValues:e_(y,_e,xe,C),terrainData:Ke};if(U){const ht=Te.segments.get();for(const Pt of ht)me.push({segments:new u.a0([Pt]),sortKey:Pt.sortKey,state:Xe})}else me.push({segments:Te.segments,sortKey:0,state:Xe})}U&&me.sort((re,_e)=>re.sortKey-_e.sortKey);for(const re of me){const{programConfiguration:_e,program:xe,layoutVertexBuffer:Te,indexBuffer:Oe,uniformValues:We,terrainData:et}=re.state;xe.draw(K,Q.TRIANGLES,se,ue,ce,Qt.disabled,We,et,C.id,Te,Oe,re.segments,C.paint,y.transform.zoom,_e)}})(n,l,p,m);break;case"heatmap":(function(y,S,C,P){if(C.paint.get("heatmap-opacity")===0)return;const D=y.context;if(y.style.map.terrain){for(const L of P){const F=S.getTile(L);S.hasRenderableParent(L)||(y.renderPass==="offscreen"?Wh(y,F,C,L):y.renderPass==="translucent"&&Ao(y,C,L))}D.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(L,F,U,K){const Q=L.context,se=Q.gl,ue=on.disabled,ce=new En([se.ONE,se.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(me,re,_e){const xe=me.gl;me.activeTexture.set(xe.TEXTURE1),me.viewport.set([0,0,re.width/4,re.height/4]);let Te=_e.heatmapFbos.get(u.aU);Te?(xe.bindTexture(xe.TEXTURE_2D,Te.colorAttachment.get()),me.bindFramebuffer.set(Te.framebuffer)):(Te=xl(me,re.width/4,re.height/4),_e.heatmapFbos.set(u.aU,Te))})(Q,L,U),Q.clear({color:u.aM.transparent});for(let me=0;me<K.length;me++){const re=K[me];if(F.hasRenderableParent(re))continue;const _e=F.getTile(re),xe=_e.getBucket(U);if(!xe)continue;const Te=xe.programConfigurations.get(U.id),Oe=L.useProgram("heatmap",Te),{zoom:We}=L.transform;Oe.draw(Q,se.TRIANGLES,Rt.disabled,ue,ce,Qt.disabled,Xr(re.posMatrix,_e,We,U.paint.get("heatmap-intensity")),null,U.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,U.paint,L.transform.zoom,Te)}Q.viewport.set([0,0,L.width,L.height])}(y,S,C,P):y.renderPass==="translucent"&&function(L,F){const U=L.context,K=U.gl;U.setColorMode(L.colorModeForRenderPass());const Q=F.heatmapFbos.get(u.aU);Q&&(U.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Q.colorAttachment.get()),U.activeTexture.set(K.TEXTURE1),bl(U,F).bind(K.LINEAR,K.CLAMP_TO_EDGE),L.useProgram("heatmapTexture").draw(U,K.TRIANGLES,Rt.disabled,on.disabled,L.colorModeForRenderPass(),Qt.disabled,ku(L,F,0,1),null,F.id,L.viewportBuffer,L.quadTriangleIndexBuffer,L.viewportSegments,F.paint,L.transform.zoom))}(y,C)})(n,l,p,m);break;case"line":(function(y,S,C,P){if(y.renderPass!=="translucent")return;const D=C.paint.get("line-opacity"),L=C.paint.get("line-width");if(D.constantOr(1)===0||L.constantOr(1)===0)return;const F=y.depthModeForSublayer(0,Rt.ReadOnly),U=y.colorModeForRenderPass(),K=C.paint.get("line-dasharray"),Q=C.paint.get("line-pattern"),se=Q.constantOr(1),ue=C.paint.get("line-gradient"),ce=C.getCrossfadeParameters(),me=se?"linePattern":K?"lineSDF":ue?"lineGradient":"line",re=y.context,_e=re.gl;let xe=!0;for(const Te of P){const Oe=S.getTile(Te);if(se&&!Oe.patternsLoaded())continue;const We=Oe.getBucket(C);if(!We)continue;const et=We.programConfigurations.get(C.id),st=y.context.program.get(),Ke=y.useProgram(me,et),Xe=xe||Ke.program!==st,ht=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Te),Pt=Q.constantOr(null);if(Pt&&Oe.imageAtlas){const Ct=Oe.imageAtlas,pn=Ct.patternPositions[Pt.to.toString()],At=Ct.patternPositions[Pt.from.toString()];pn&&At&&et.setConstantPatternPositions(pn,At)}const Ye=ht?Te:null,nt=se?ca(y,Oe,C,ce,Ye):K?t_(y,Oe,C,K,ce,Ye):ue?pp(y,Oe,C,We.lineClipsArray.length,Ye):Eu(y,Oe,C,Ye);if(se)re.activeTexture.set(_e.TEXTURE0),Oe.imageAtlasTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),et.updatePaintBuffers(ce);else if(K&&(Xe||y.lineAtlas.dirty))re.activeTexture.set(_e.TEXTURE0),y.lineAtlas.bind(re);else if(ue){const Ct=We.gradients[C.id];let pn=Ct.texture;if(C.gradientVersion!==Ct.version){let At=256;if(C.stepInterpolant){const Ft=S.getSource().maxzoom,mn=Te.canonical.z===Ft?Math.ceil(1<<y.transform.maxZoom-Te.canonical.z):1;At=u.ac(u.aV(We.maxLineLength/u.X*1024*mn),256,re.maxTextureSize)}Ct.gradient=u.aW({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:At,image:Ct.gradient||void 0,clips:We.lineClipsArray}),Ct.texture?Ct.texture.update(Ct.gradient):Ct.texture=new Re(re,Ct.gradient,_e.RGBA),Ct.version=C.gradientVersion,pn=Ct.texture}re.activeTexture.set(_e.TEXTURE0),pn.bind(C.stepInterpolant?_e.NEAREST:_e.LINEAR,_e.CLAMP_TO_EDGE)}Ke.draw(re,_e.TRIANGLES,F,y.stencilModeForClipping(Te),U,Qt.disabled,nt,ht,C.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,C.paint,y.transform.zoom,et,We.layoutVertexBuffer2),xe=!1}})(n,l,p,m);break;case"fill":(function(y,S,C,P){const D=C.paint.get("fill-color"),L=C.paint.get("fill-opacity");if(L.constantOr(1)===0)return;const F=y.colorModeForRenderPass(),U=C.paint.get("fill-pattern"),K=y.opaquePassEnabledForLayer()&&!U.constantOr(1)&&D.constantOr(u.aM.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===K){const Q=y.depthModeForSublayer(1,y.renderPass==="opaque"?Rt.ReadWrite:Rt.ReadOnly);wl(y,S,C,P,Q,F,!1)}if(y.renderPass==="translucent"&&C.paint.get("fill-antialias")){const Q=y.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,Rt.ReadOnly);wl(y,S,C,P,Q,F,!0)}})(n,l,p,m);break;case"fill-extrusion":(function(y,S,C,P){const D=C.paint.get("fill-extrusion-opacity");if(D!==0&&y.renderPass==="translucent"){const L=new Rt(y.context.gl.LEQUAL,Rt.ReadWrite,y.depthRangeFor3D);if(D!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))Lu(y,S,C,P,L,on.disabled,En.disabled),Lu(y,S,C,P,L,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const F=y.colorModeForRenderPass();Lu(y,S,C,P,L,on.disabled,F)}}})(n,l,p,m);break;case"hillshade":(function(y,S,C,P){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const D=y.context,L=y.depthModeForSublayer(0,Rt.ReadOnly),F=y.colorModeForRenderPass(),[U,K]=y.renderPass==="translucent"?y.stencilConfigForOverlap(P):[{},P];for(const Q of K){const se=S.getTile(Q);se.needsHillshadePrepare!==void 0&&se.needsHillshadePrepare&&y.renderPass==="offscreen"?ma(y,se,C,L,on.disabled,F):y.renderPass==="translucent"&&pa(y,Q,se,C,L,U[Q.overscaledZ],F)}D.viewport.set([0,0,y.width,y.height])})(n,l,p,m);break;case"raster":(function(y,S,C,P){if(y.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!P.length)return;const D=y.context,L=D.gl,F=S.getSource(),U=y.useProgram("raster"),K=y.colorModeForRenderPass(),[Q,se]=F instanceof Lr?[{},P]:y.stencilConfigForOverlap(P),ue=se[se.length-1].overscaledZ,ce=!y.options.moving;for(const me of se){const re=y.depthModeForSublayer(me.overscaledZ-ue,C.paint.get("raster-opacity")===1?Rt.ReadWrite:Rt.ReadOnly,L.LESS),_e=S.getTile(me);_e.registerFadeDuration(C.paint.get("raster-fade-duration"));const xe=S.findLoadedParent(me,0),Te=S.findLoadedSibling(me),Oe=Mp(_e,xe||Te||null,S,C,y.transform,y.style.map.terrain);let We,et;const st=C.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;D.activeTexture.set(L.TEXTURE0),_e.texture.bind(st,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(L.TEXTURE1),xe?(xe.texture.bind(st,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),We=Math.pow(2,xe.tileID.overscaledZ-_e.tileID.overscaledZ),et=[_e.tileID.canonical.x*We%1,_e.tileID.canonical.y*We%1]):_e.texture.bind(st,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),_e.texture.useMipmap&&D.extTextureFilterAnisotropic&&y.transform.pitch>20&&L.texParameterf(L.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax);const Ke=y.style.map.terrain&&y.style.map.terrain.getTerrainData(me),Xe=Ke?me:null,ht=Xe?Xe.posMatrix:y.transform.calculatePosMatrix(me.toUnwrapped(),ce),Pt=n_(ht,et||[0,0],We||1,Oe,C);F instanceof Lr?U.draw(D,L.TRIANGLES,re,on.disabled,K,Qt.disabled,Pt,Ke,C.id,F.boundsBuffer,y.quadTriangleIndexBuffer,F.boundsSegments):U.draw(D,L.TRIANGLES,re,Q[me.overscaledZ],K,Qt.disabled,Pt,Ke,C.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(n,l,p,m);break;case"background":(function(y,S,C,P){const D=C.paint.get("background-color"),L=C.paint.get("background-opacity");if(L===0)return;const F=y.context,U=F.gl,K=y.transform,Q=K.tileSize,se=C.paint.get("background-pattern");if(y.isPatternMissing(se))return;const ue=!se&&D.a===1&&L===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ue)return;const ce=on.disabled,me=y.depthModeForSublayer(0,ue==="opaque"?Rt.ReadWrite:Rt.ReadOnly),re=y.colorModeForRenderPass(),_e=y.useProgram(se?"backgroundPattern":"background"),xe=P||K.coveringTiles({tileSize:Q,terrain:y.style.map.terrain});se&&(F.activeTexture.set(U.TEXTURE0),y.imageManager.bind(y.context));const Te=C.getCrossfadeParameters();for(const Oe of xe){const We=P?Oe.posMatrix:y.transform.calculatePosMatrix(Oe.toUnwrapped()),et=se?Ah(We,L,y,se,{tileID:Oe,tileSize:Q},Te):Iu(We,L,D),st=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Oe);_e.draw(F,U.TRIANGLES,me,ce,re,Qt.disabled,et,st,C.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(n,0,p,m);break;case"custom":(function(y,S,C){const P=y.context,D=C.implementation;if(y.renderPass==="offscreen"){const L=D.prerender;L&&(y.setCustomLayerDefaults(),P.setColorMode(y.colorModeForRenderPass()),L.call(D,P.gl,y.transform.customLayerMatrix()),P.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),P.setColorMode(y.colorModeForRenderPass()),P.setStencilMode(on.disabled);const L=D.renderingMode==="3d"?new Rt(y.context.gl.LEQUAL,Rt.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Rt.ReadOnly);P.setDepthMode(L),D.render(P.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),P.setDirty(),y.setBaseState(),P.bindFramebuffer.set(null)}})(n,0,p)}}translatePosMatrix(n,l,p,m,y){if(!p[0]&&!p[1])return n;const S=y?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(S){const D=Math.sin(S),L=Math.cos(S);p=[p[0]*L-p[1]*D,p[0]*D+p[1]*L]}const C=[y?p[0]:Lt(l,p[0],this.transform.zoom),y?p[1]:Lt(l,p[1],this.transform.zoom),0],P=new Float32Array(16);return u.J(P,n,C),P}saveTileTexture(n){const l=this._tileTextures[n.size[0]];l?l.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const l=this._tileTextures[n];return l&&l.length>0?l.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const l=this.imageManager.getPattern(n.from.toString()),p=this.imageManager.getPattern(n.to.toString());return!l||!p}useProgram(n,l){this.cache=this.cache||{};const p=n+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Ih(this.context,Js[n],l,zh[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Re(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:l}=this.context.gl;return this.width!==n||this.height!==l}}class ya{constructor(n,l){this.points=n,this.planes=l}static fromInvProjectionMatrix(n,l,p){const m=Math.pow(2,p),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const P=1/(C=u.af([],C,n))[3]/l*m;return u.b1(C,C,[P,P,1/C[3],P])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const P=function(U,K){var Q=K[0],se=K[1],ue=K[2],ce=Q*Q+se*se+ue*ue;return ce>0&&(ce=1/Math.sqrt(ce)),U[0]=K[0]*ce,U[1]=K[1]*ce,U[2]=K[2]*ce,U}([],function(U,K,Q){var se=K[0],ue=K[1],ce=K[2],me=Q[0],re=Q[1],_e=Q[2];return U[0]=ue*_e-ce*re,U[1]=ce*me-se*_e,U[2]=se*re-ue*me,U}([],ye([],y[C[0]],y[C[1]]),ye([],y[C[2]],y[C[1]]))),D=-((L=P)[0]*(F=y[C[1]])[0]+L[1]*F[1]+L[2]*F[2]);var L,F;return P.concat(D)});return new ya(y,S)}}class _a{constructor(n,l){this.min=n,this.max=l,this.center=function(p,m,y){return p[0]=.5*m[0],p[1]=.5*m[1],p[2]=.5*m[2],p}([],function(p,m,y){return p[0]=m[0]+y[0],p[1]=m[1]+y[1],p[2]=m[2]+y[2],p}([],this.min,this.max))}quadrant(n){const l=[n%2==0,n<2],p=de(this.min),m=de(this.max);for(let y=0;y<l.length;y++)p[y]=l[y]?this.min[y]:this.center[y],m[y]=l[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new _a(p,m)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let m=0;m<n.planes.length;m++){const y=n.planes[m];let S=0;for(let C=0;C<l.length;C++)u.b2(y,l[C])>=0&&S++;if(S===0)return 0;S!==l.length&&(p=!1)}if(p)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let C=0;C<n.points.length;C++){const P=n.points[C][m]-this.min[m];y=Math.min(y,P),S=Math.max(S,P)}if(S<0||y>this.max[m]-this.min[m])return 0}return 1}}class va{constructor(n=0,l=0,p=0,m=0){if(isNaN(n)||n<0||isNaN(l)||l<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=l,this.left=p,this.right=m}interpolate(n,l,p){return l.top!=null&&n.top!=null&&(this.top=u.y.number(n.top,l.top,p)),l.bottom!=null&&n.bottom!=null&&(this.bottom=u.y.number(n.bottom,l.bottom,p)),l.left!=null&&n.left!=null&&(this.left=u.y.number(n.left,l.left,p)),l.right!=null&&n.right!=null&&(this.right=u.y.number(n.right,l.right,p)),this}getCenter(n,l){const p=u.ac((this.left+n-this.right)/2,0,n),m=u.ac((this.top+l-this.bottom)/2,0,l);return new u.P(p,m)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new va(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Gh=85.051129;class xa{constructor(n,l,p,m,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=n||0,this._maxZoom=l||22,this._minPitch=p??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new va,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const n=new xa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.lngRange=n.lngRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const l=-u.b3(n,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var p=new u.A(4);return u.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,m,y){var S=m[0],C=m[1],P=m[2],D=m[3],L=Math.sin(y),F=Math.cos(y);p[0]=S*F+P*L,p[1]=C*F+D*L,p[2]=S*-L+P*F,p[3]=C*-L+D*F}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const l=u.ac(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const l=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,l,p){this._unmodified=!1,this._edgeInsets.interpolate(n,l,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const l=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(n){const l=[new u.b4(0,n)];if(this._renderWorldCopies){const p=this.pointCoordinate(new u.P(0,0)),m=this.pointCoordinate(new u.P(this.width,0)),y=this.pointCoordinate(new u.P(this.width,this.height)),S=this.pointCoordinate(new u.P(0,this.height)),C=Math.floor(Math.min(p.x,m.x,y.x,S.x)),P=Math.floor(Math.max(p.x,m.x,y.x,S.x)),D=1;for(let L=C-D;L<=P+D;L++)L!==0&&l.push(new u.b4(L,n))}return l}coveringTiles(n){var l,p;let m=this.coveringZoomLevel(n);const y=m;if(n.minzoom!==void 0&&m<n.minzoom)return[];n.maxzoom!==void 0&&m>n.maxzoom&&(m=n.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),C=u.Z.fromLngLat(this.center),P=Math.pow(2,m),D=[P*S.x,P*S.y,0],L=[P*C.x,P*C.y,0],F=ya.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m);let U=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(U=m);const K=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Q=re=>({aabb:new _a([re*P,0,0],[(re+1)*P,P,0]),zoom:0,x:0,y:0,wrap:re,fullyVisible:!1}),se=[],ue=[],ce=m,me=n.reparseOverscaled?y:m;if(this._renderWorldCopies)for(let re=1;re<=3;re++)se.push(Q(-re)),se.push(Q(re));for(se.push(Q(0));se.length>0;){const re=se.pop(),_e=re.x,xe=re.y;let Te=re.fullyVisible;if(!Te){const Ke=re.aabb.intersects(F);if(Ke===0)continue;Te=Ke===2}const Oe=n.terrain?D:L,We=re.aabb.distanceX(Oe),et=re.aabb.distanceY(Oe),st=Math.max(Math.abs(We),Math.abs(et));if(re.zoom===ce||st>K+(1<<ce-re.zoom)-2&&re.zoom>=U){const Ke=ce-re.zoom,Xe=D[0]-.5-(_e<<Ke),ht=D[1]-.5-(xe<<Ke);ue.push({tileID:new u.S(re.zoom===ce?me:re.zoom,re.wrap,re.zoom,_e,xe),distanceSq:Ce([L[0]-.5-_e,L[1]-.5-xe]),tileDistanceToCamera:Math.sqrt(Xe*Xe+ht*ht)})}else for(let Ke=0;Ke<4;Ke++){const Xe=(_e<<1)+Ke%2,ht=(xe<<1)+(Ke>>1),Pt=re.zoom+1;let Ye=re.aabb.quadrant(Ke);if(n.terrain){const nt=new u.S(Pt,re.wrap,Pt,Xe,ht),Ct=n.terrain.getMinMaxElevation(nt),pn=(l=Ct.minElevation)!==null&&l!==void 0?l:this.elevation,At=(p=Ct.maxElevation)!==null&&p!==void 0?p:this.elevation;Ye=new _a([Ye.min[0],Ye.min[1],pn],[Ye.max[0],Ye.max[1],At])}se.push({aabb:Ye,zoom:Pt,x:Xe,y:ht,wrap:re.wrap,fullyVisible:Te})}}return ue.sort((re,_e)=>re.distanceSq-_e.distanceSq).map(re=>re.tileID)}resize(n,l){this.width=n,this.height=l,this.pixelsToGLUnits=[2/n,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const l=u.ac(n.lat,-85.051129,Gh);return new u.P(u.O(n.lng)*this.worldSize,u.Q(l)*this.worldSize)}unproject(n){return new u.Z(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const l=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,n),y=n.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-y))return;const S=p+l-y,C=Math.cos(this._pitch)*this.cameraToCenterDistance/S/u.b5(1,m.lat),P=this.scaleZoom(C/this.tileSize);this._elevation=y,this._center=m,this.zoom=P}setLocationAtPoint(n,l){const p=this.pointCoordinate(l),m=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(n),S=new u.Z(y.x-(p.x-m.x),y.y-(p.y-m.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,l){return l?this.coordinatePoint(this.locationCoordinate(n),l.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,l){return this.coordinateLocation(this.pointCoordinate(n,l))}locationCoordinate(n){return u.Z.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,l){if(l){const U=l.pointCoordinate(n);if(U!=null)return U}const p=[n.x,n.y,0,1],m=[n.x,n.y,1,1];u.af(p,p,this.pixelMatrixInverse),u.af(m,m,this.pixelMatrixInverse);const y=p[3],S=m[3],C=p[1]/y,P=m[1]/S,D=p[2]/y,L=m[2]/S,F=D===L?0:(0-D)/(L-D);return new u.Z(u.y.number(p[0]/y,m[0]/S,F)/this.worldSize,u.y.number(C,P,F)/this.worldSize)}coordinatePoint(n,l=0,p=this.pixelMatrix){const m=[n.x*this.worldSize,n.y*this.worldSize,l,1];return u.af(m,m,p),new u.P(m[0]/m[3],m[1]/m[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new ke().extend(this.pointLocation(new u.P(0,n))).extend(this.pointLocation(new u.P(this.width,n))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ke([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Gh])}calculateTileMatrix(n){const l=n.canonical,p=this.worldSize/this.zoomScale(l.z),m=l.x+Math.pow(2,l.z)*n.wrap,y=u.an(new Float64Array(16));return u.J(y,y,[m*p,l.y*p,0]),u.K(y,y,[p/u.X,p/u.X,1]),y}calculatePosMatrix(n,l=!1){const p=n.key,m=l?this._alignedPosMatrixCache:this._posMatrixCache;if(m[p])return m[p];const y=this.calculateTileMatrix(n);return u.L(y,l?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),m[p]=new Float32Array(y),m[p]}calculateFogMatrix(n){const l=n.key,p=this._fogMatrixCache;if(p[l])return p[l];const m=this.calculateTileMatrix(n);return u.L(m,this.fogMatrix,m),p[l]=new Float32Array(m),p[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(n,l){l=u.ac(+l,this.minZoom,this.maxZoom);const p={center:new u.N(n.lng,n.lat),zoom:l};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const re=179.9999999999;m=[-re,re]}const y=this.tileSize*this.zoomScale(p.zoom);let S=0,C=y,P=0,D=y,L=0,F=0;const{x:U,y:K}=this.size;if(this.latRange){const re=this.latRange;S=u.Q(re[1])*y,C=u.Q(re[0])*y,C-S<K&&(L=K/(C-S))}m&&(P=u.b3(u.O(m[0])*y,0,y),D=u.b3(u.O(m[1])*y,0,y),D<P&&(D+=y),D-P<U&&(F=U/(D-P)));const{x:Q,y:se}=this.project.call({worldSize:y},n);let ue,ce;const me=Math.max(F||0,L||0);if(me){const re=new u.P(F?(D+P)/2:Q,L?(C+S)/2:se);return p.center=this.unproject.call({worldSize:y},re).wrap(),p.zoom+=this.scaleZoom(me),p}if(this.latRange){const re=K/2;se-re<S&&(ce=S+re),se+re>C&&(ce=C-re)}if(m){const re=(P+D)/2;let _e=Q;this._renderWorldCopies&&(_e=u.b3(Q,re-y/2,re+y/2));const xe=U/2;_e-xe<P&&(ue=P+xe),_e+xe>D&&(ue=D-xe)}if(ue!==void 0||ce!==void 0){const re=new u.P(ue??Q,ce??se);p.center=this.unproject.call({worldSize:y},re).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:l,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=p,this._unmodified=n,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,l=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let m=u.an(new Float64Array(16));u.K(m,m,[this.width/2,-this.height/2,1]),u.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=u.an(new Float64Array(16)),u.K(m,m,[1,-1,1]),u.J(m,m,[-1,-1,0]),u.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),C=y-S*this._pixelPerMeter/Math.cos(this._pitch),P=S<0?C:y,D=Math.PI/2+this._pitch,L=this._fov*(.5+n.y/this.height),F=Math.sin(L)*P/Math.sin(u.ac(Math.PI-D-L,.01,Math.PI-.01)),U=this.getHorizon(),K=2*Math.atan(U/this.cameraToCenterDistance)*(.5+n.y/(2*U)),Q=Math.sin(K)*P/Math.sin(u.ac(Math.PI-D-K,.01,Math.PI-.01)),se=Math.min(F,Q);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*se+P),this.nearZ=this.height/50,m=new Float64Array(16),u.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-n.x/this.width,m[9]=2*n.y/this.height,this.projectionMatrix=u.ae(m),u.K(m,m,[1,-1,1]),u.J(m,m,[0,0,-this.cameraToCenterDistance]),u.b7(m,m,this._pitch),u.ad(m,m,this.angle),u.J(m,m,[-l,-p,0]),this.mercatorMatrix=u.K([],m,[this.worldSize,this.worldSize,this.worldSize]),u.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,m),u.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=u.as([],m),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-n.x/this.width,this.fogMatrix[9]=2*n.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-l,-p,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,m);const ue=this.width%2/2,ce=this.height%2/2,me=Math.cos(this.angle),re=Math.sin(this.angle),_e=l-Math.round(l)+me*ue+re*ce,xe=p-Math.round(p)+me*ce+re*ue,Te=new Float64Array(m);if(u.J(Te,Te,[_e>.5?_e-1:_e,xe>.5?xe-1:xe,0]),this.alignedModelViewProjectionMatrix=Te,m=u.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new u.P(0,0)),l=[n.x*this.worldSize,n.y*this.worldSize,0,1];return u.af(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,n))}getCameraQueryGeometry(n){const l=this.getCameraPoint();if(n.length===1)return[n[0],l];{let p=l.x,m=l.y,y=l.x,S=l.y;for(const C of n)p=Math.min(p,C.x),m=Math.min(m,C.y),y=Math.max(y,C.x),S=Math.max(S,C.y);return[new u.P(p,m),new u.P(y,m),new u.P(y,S),new u.P(p,S),new u.P(p,m)]}}lngLatToCameraDepth(n,l){const p=this.locationCoordinate(n),m=[p.x*this.worldSize,p.y*this.worldSize,l,1];return u.af(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function Sl(_,n){let l,p=!1,m=null,y=null;const S=()=>{m=null,p&&(_.apply(y,l),m=setTimeout(S,n),p=!1)};return(...C)=>(p=!0,y=this,l=C,m||S(),m)}class Nu{constructor(n){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let p;return l.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(p=m)}),(p&&p[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{const l=this._getCurrentHash();if(l.length===0)return;const p=l.join("/");let m=p;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${p}`);let y=window.location.hash.replace(m,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let S=window.location.href.replace(/(#.+)?$/,y);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Sl(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const l=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),S=Math.round(l.lng*y)/y,C=Math.round(l.lat*y)/y,P=this._map.getBearing(),D=this._map.getPitch();let L="";if(L+=n?`/${S}/${C}/${p}`:`${p}/${C}/${S}`,(P||D)&&(L+="/"+Math.round(10*P)/10),D&&(L+=`/${Math.round(D)}`),this._hashName){const F=this._hashName;let U=!1;const K=window.location.hash.slice(1).split("&").map(Q=>{const se=Q.split("=")[0];return se===F?(U=!0,`${se}=${L}`):Q}).filter(Q=>Q);return U||K.push(`${F}=${L}`),`#${K.join("&")}`}return`#${L}`}}const ju={linearity:.3,easing:u.b8(0,0,.3,1)},Hh=u.e({deceleration:2500,maxSpeed:1400},ju),m_=u.e({deceleration:20,maxSpeed:1400},ju),Lp=u.e({deceleration:1e3,maxSpeed:360},ju),$u=u.e({deceleration:1e3,maxSpeed:90},ju);class Zh{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,l=A.now();for(;n.length>0&&l-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)l.zoom+=y.zoomDelta||0,l.bearing+=y.bearingDelta||0,l.pitch+=y.pitchDelta||0,y.panDelta&&l.pan._add(y.panDelta),y.around&&(l.around=y.around),y.pinchAround&&(l.pinchAround=y.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(l.pan.mag()){const y=Cl(l.pan.mag(),p,u.e({},Hh,n||{}));m.offset=l.pan.mult(y.amount/l.pan.mag()),m.center=this._map.transform.center,Tl(m,y)}if(l.zoom){const y=Cl(l.zoom,p,m_);m.zoom=this._map.transform.zoom+y.amount,Tl(m,y)}if(l.bearing){const y=Cl(l.bearing,p,Lp);m.bearing=this._map.transform.bearing+u.ac(y.amount,-179,179),Tl(m,y)}if(l.pitch){const y=Cl(l.pitch,p,$u);m.pitch=this._map.transform.pitch+y.amount,Tl(m,y)}if(m.zoom||m.bearing){const y=l.pinchAround===void 0?l.around:l.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(m,{noMoveStart:!0})}}function Tl(_,n){(!_.duration||_.duration<n.duration)&&(_.duration=n.duration,_.easing=n.easing)}function Cl(_,n,l){const{maxSpeed:p,linearity:m,deceleration:y}=l,S=u.ac(_*m/(n/1e3),-p,p),C=Math.abs(S)/(y*m);return{easing:l.easing,duration:1e3*C,amount:S*(C/2)}}class xr extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,p,m={}){const y=M.mousePos(l.getCanvas(),p),S=l.unproject(y);super(n,u.e({point:y,lngLat:S,originalEvent:p},m)),this._defaultPrevented=!1,this.target=l}}class zo extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,p){const m=n==="touchend"?p.changedTouches:p.touches,y=M.touchPos(l.getCanvasContainer(),m),S=y.map(P=>l.unproject(P)),C=y.reduce((P,D,L,F)=>P.add(D.div(F.length)),new u.P(0,0));super(n,{points:y,point:C,lngLats:S,lngLat:l.unproject(C),originalEvent:p}),this._defaultPrevented=!1}}class Fp extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,p){super(n,{originalEvent:p}),this._defaultPrevented=!1}}class Op{constructor(n,l){this._map=n,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Fp(n.type,this._map,n))}mousedown(n,l){return this._mousedownPos=l,this._firePreventable(new xr(n.type,this._map,n))}mouseup(n){this._map.fire(new xr(n.type,this._map,n))}click(n,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new xr(n.type,this._map,n))}dblclick(n){return this._firePreventable(new xr(n.type,this._map,n))}mouseover(n){this._map.fire(new xr(n.type,this._map,n))}mouseout(n){this._map.fire(new xr(n.type,this._map,n))}touchstart(n){return this._firePreventable(new zo(n.type,this._map,n))}touchmove(n){this._map.fire(new zo(n.type,this._map,n))}touchend(n){this._map.fire(new zo(n.type,this._map,n))}touchcancel(n){this._map.fire(new zo(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class In{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new xr(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new xr(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zi{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(u.P.convert(n),this._map.terrain)}}class fi{constructor(n,l){this._map=n,this._tr=new Zi(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,l){this.isEnabled()&&n.shiftKey&&n.button===0&&(M.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(n,l){if(!this._active)return;const p=l;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=M.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const y=Math.min(m.x,p.x),S=Math.max(m.x,p.x),C=Math.min(m.y,p.y),P=Math.max(m.y,p.y);M.setTransform(this._box,`translate(${y}px,${C}px)`),this._box.style.width=S-y+"px",this._box.style.height=P-C+"px"}mouseupWindow(n,l){if(!this._active||n.button!==0)return;const p=this._startPos,m=l;if(this.reset(),M.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:n})),{cameraAnimation:y=>y.fitScreenCoordinates(p,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,l){return this._map.fire(new u.k(n,{originalEvent:l}))}}function kl(_,n){if(_.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${n.length}`);const l={};for(let p=0;p<_.length;p++)l[_[p].identifier]=n[p];return l}class Xh{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,l,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),p.length===this.numTouches&&(this.centroid=function(m){const y=new u.P(0,0);for(const S of m)y._add(S);return y.div(m.length)}(l),this.touches=kl(p,l)))}touchmove(n,l,p){if(this.aborted||!this.centroid)return;const m=kl(p,l);for(const y in this.touches){const S=m[y];(!S||S.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(n,l,p){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Uu{constructor(n){this.singleTap=new Xh(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,l,p){this.singleTap.touchstart(n,l,p)}touchmove(n,l,p){this.singleTap.touchmove(n,l,p)}touchend(n,l,p){const m=this.singleTap.touchend(n,l,p);if(m){const y=n.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(m)<30;if(y&&S||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class ba{constructor(n){this._tr=new Zi(n),this._zoomIn=new Uu({numTouches:1,numTaps:2}),this._zoomOut=new Uu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,l,p){this._zoomIn.touchstart(n,l,p),this._zoomOut.touchstart(n,l,p)}touchmove(n,l,p){this._zoomIn.touchmove(n,l,p),this._zoomOut.touchmove(n,l,p)}touchend(n,l,p){const m=this._zoomIn.touchend(n,l,p),y=this._zoomOut.touchend(n,l,p),S=this._tr;return m?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(m)},{originalEvent:n})}):y?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(y)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ns{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const l=this._moveFunction(...n);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(n,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,l){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const m=l.length?l[0]:l;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&M.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Kh={0:1,2:2};class Wu{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const l=M.mouseButton(n);this._eventButton=l}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(l,p){const m=Kh[p];return l.buttons===void 0||(l.buttons&m)!==m}(n,this._eventButton)}isValidEndEvent(n){return M.mouseButton(n)===this._eventButton}}class Yh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const qu=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=n=>{n.preventDefault()}},Jh=({enable:_,clickTolerance:n,bearingDegreesPerPixelMoved:l=.8})=>{const p=new Wu({checkCorrectEvent:m=>M.mouseButton(m)===0&&m.ctrlKey||M.mouseButton(m)===2});return new Ns({clickTolerance:n,move:(m,y)=>({bearingDelta:(y.x-m.x)*l}),moveStateManager:p,enable:_,assignEvents:qu})},Qh=({enable:_,clickTolerance:n,pitchDegreesPerPixelMoved:l=-.5})=>{const p=new Wu({checkCorrectEvent:m=>M.mouseButton(m)===0&&m.ctrlKey||M.mouseButton(m)===2});return new Ns({clickTolerance:n,move:(m,y)=>({pitchDelta:(y.y-m.y)*l}),moveStateManager:p,enable:_,assignEvents:qu})};class Do{constructor(n,l){this._clickTolerance=n.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,l,p){return this._calculateTransform(n,l,p)}touchmove(n,l,p){if(this._active){if(!this._shouldBePrevented(p.length))return n.preventDefault(),this._calculateTransform(n,l,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,l,p){this._calculateTransform(n,l,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,l,p){p.length>0&&(this._active=!0);const m=kl(p,l),y=new u.P(0,0),S=new u.P(0,0);let C=0;for(const D in m){const L=m[D],F=this._touches[D];F&&(y._add(L),S._add(L.sub(F)),C++,m[D]=L)}if(this._touches=m,this._shouldBePrevented(C)||!S.mag())return;const P=S.div(C);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(C),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,l,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([l[0],l[1]]))}touchmove(n,l,p){if(!this._firstTwoTouches)return;n.preventDefault();const[m,y]=this._firstTwoTouches,S=Pl(p,l,m),C=Pl(p,l,y);if(!S||!C)return;const P=this._aroundCenter?null:S.add(C).div(2);return this._move([S,C],P,n)}touchend(n,l,p){if(!this._firstTwoTouches)return;const[m,y]=this._firstTwoTouches,S=Pl(p,l,m),C=Pl(p,l,y);S&&C||(this._active&&M.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Pl(_,n,l){for(let p=0;p<_.length;p++)if(_[p].identifier===l)return n[p]}function ed(_,n){return Math.log(_/n)/Math.LN2}class td extends Gu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,l){const p=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(ed(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ed(this._distance,p),pinchAround:l}}}function nd(_,n){return 180*_.angleWith(n)/Math.PI}class rd extends Gu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,l,p){const m=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nd(this._vector,m),pinchAround:l}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const l=25/(Math.PI*this._minDiameter)*360,p=nd(n,this._startVector);return Math.abs(p)<l}}function Hu(_){return Math.abs(_.y)>Math.abs(_.x)}class El extends Gu{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,l,p){super.touchstart(n,l,p),this._currentTouchCount=p.length}_start(n){this._lastPoints=n,Hu(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,l,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=n[0].sub(this._lastPoints[0]),y=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,p.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(n,l,p){if(this._valid!==void 0)return this._valid;const m=n.mag()>=2,y=l.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const S=n.y>0==l.y>0;return Hu(n)&&Hu(l)&&S}}const Bp={panStep:100,bearingStep:15,pitchStep:10};class Ii{constructor(n){this._tr=new Zi(n);const l=Bp;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let l=0,p=0,m=0,y=0,S=0;switch(n.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:n.shiftKey?p=-1:(n.preventDefault(),y=-1);break;case 39:n.shiftKey?p=1:(n.preventDefault(),y=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),S=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:C=>{const P=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:_s,zoom:l?Math.round(P.zoom)+l*(n.shiftKey?2:1):P.zoom,bearing:P.bearing+p*this._bearingStep,pitch:P.pitch+m*this._pitchStep,offset:[-y*this._panStep,-S*this._panStep],center:P.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function _s(_){return _*(2-_)}const id=4.000244140625;class Xi{constructor(n,l){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=n,this._tr=new Zi(n),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let l=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const p=A.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,l!==0&&l%id==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(m*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),n.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=n,this._delta-=l,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=M.mousePos(this._map.getCanvas(),n),p=this._tr;this._around=l.y>p.transform.height/2-p.transform.getHorizon()?u.N.convert(this._aroundCenter?p.center:p.unproject(l)):u.N.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>id?this._wheelZoomRate:this._defaultZoomRate;let D=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&D!==0&&(D=1/D);const L=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(L*D))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,p=this._startZoom,m=this._easing;let y,S=!1;const C=A.now()-this._lastWheelEventTime;if(this._type==="wheel"&&p&&m&&C){const P=Math.min(C/200,1),D=m(P);y=u.y.number(p,l,D),P<1?this._frameId||(this._frameId=!0):S=!0}else y=l,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:y-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let l=u.b9;if(this._prevEase){const p=this._prevEase,m=(A.now()-p.start)/p.duration,y=p.easing(m+.01)-p.easing(m),S=.27/Math.sqrt(y*y+1e-4)*.01,C=Math.sqrt(.0729-S*S);l=u.b8(S,C,.25,1)}return this._prevEase={start:A.now(),duration:n,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ro{constructor(n,l){this._clickZoom=n,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class g_{constructor(n){this._tr=new Zi(n),this.reset()}reset(){this._active=!1}dblclick(n,l){return n.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class y_{constructor(){this._tap=new Uu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,l,p){if(!this._swipePoint)if(this._tapTime){const m=l[0],y=n.timeStamp-this._tapTime<500,S=this._tapPoint.dist(m)<30;y&&S?p.length>0&&(this._swipePoint=m,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(n,l,p)}touchmove(n,l,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=l[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,n.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(n,l,p)}touchend(n,l,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const m=this._tap.touchend(n,l,p);m&&(this._tapTime=n.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vp{constructor(n,l,p){this._el=n,this._mousePan=l,this._touchPan=p}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Np{constructor(n,l,p){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=l,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class sd{constructor(n,l,p,m){this._el=n,this._touchZoom=l,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class wa{constructor(n,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=M.create("div","maplibregl-cooperative-gesture-screen",n);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=l,this._container.appendChild(m);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=p,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(M.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,l){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:n,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Mi=_=>_.zoom||_.drag||_.pitch||_.rotate;class lt extends u.k{}function Zu(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class od{constructor(n,l){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,y)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=m.type==="renderFrame"?void 0:m,C={needsRenderFrame:!1},P={},D={},L=m.touches,F=L?this._getMapTouches(L):void 0,U=F?M.touchPos(this._map.getCanvas(),F):M.mousePos(this._map.getCanvas(),m);for(const{handlerName:se,handler:ue,allowed:ce}of this._handlers){if(!ue.isEnabled())continue;let me;this._blockedByActive(D,ce,se)?ue.reset():ue[y||m.type]&&(me=ue[y||m.type](m,U,F),this.mergeHandlerResult(C,P,me,se,S),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||ue.isActive())&&(D[se]=ue)}const K={};for(const se in this._previousActiveHandlers)D[se]||(K[se]=S);this._previousActiveHandlers=D,(Object.keys(K).length||Zu(C))&&(this._changes.push([C,P,K]),this._triggerRenderFrame()),(Object.keys(D).length||Zu(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Q}=C;Q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Q(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zh(n),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,y,S]of this._listeners)M.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[n,l,p]of this._listeners)M.removeEventListener(n,l,n===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(n){const l=this._map,p=l.getCanvasContainer();this._add("mapEvent",new Op(l,n));const m=l.boxZoom=new fi(l,n);this._add("boxZoom",m),n.interactive&&n.boxZoom&&m.enable();const y=l.cooperativeGestures=new wa(l,n.cooperativeGestures);this._add("cooperativeGestures",y),n.cooperativeGestures&&y.enable();const S=new ba(l),C=new g_(l);l.doubleClickZoom=new Ro(C,S),this._add("tapZoom",S),this._add("clickZoom",C),n.interactive&&n.doubleClickZoom&&l.doubleClickZoom.enable();const P=new y_;this._add("tapDragZoom",P);const D=l.touchPitch=new El(l);this._add("touchPitch",D),n.interactive&&n.touchPitch&&l.touchPitch.enable(n.touchPitch);const L=Jh(n),F=Qh(n);l.dragRotate=new Np(n,L,F),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),n.interactive&&n.dragRotate&&l.dragRotate.enable();const U=(({enable:me,clickTolerance:re})=>{const _e=new Wu({checkCorrectEvent:xe=>M.mouseButton(xe)===0&&!xe.ctrlKey});return new Ns({clickTolerance:re,move:(xe,Te)=>({around:Te,panDelta:Te.sub(xe)}),activateOnStart:!0,moveStateManager:_e,enable:me,assignEvents:qu})})(n),K=new Do(n,l);l.dragPan=new Vp(p,U,K),this._add("mousePan",U),this._add("touchPan",K,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&l.dragPan.enable(n.dragPan);const Q=new rd,se=new td;l.touchZoomRotate=new sd(p,se,Q,P),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&l.touchZoomRotate.enable(n.touchZoomRotate);const ue=l.scrollZoom=new Xi(l,()=>this._triggerRenderFrame());this._add("scrollZoom",ue,["mousePan"]),n.interactive&&n.scrollZoom&&l.scrollZoom.enable(n.scrollZoom);const ce=l.keyboard=new Ii(l);this._add("keyboard",ce),n.interactive&&n.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new In(l))}_add(n,l,p){this._handlers.push({handlerName:n,handler:l,allowed:p}),this._handlersById[n]=l}stop(n){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Mi(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,l,p){for(const m in n)if(m!==p&&(!l||l.indexOf(m)<0))return!0;return!1}_getMapTouches(n){const l=[];for(const p of n)this._el.contains(p.target)&&l.push(p);return l}mergeHandlerResult(n,l,p,m,y){if(!p)return;u.e(n,p);const S={handlerName:m,originalEvent:p.originalEvent||y};p.zoomDelta!==void 0&&(l.zoom=S),p.panDelta!==void 0&&(l.drag=S),p.pitchDelta!==void 0&&(l.pitch=S),p.bearingDelta!==void 0&&(l.rotate=S)}_applyChanges(){const n={},l={},p={};for(const[m,y,S]of this._changes)m.panDelta&&(n.panDelta=(n.panDelta||new u.P(0,0))._add(m.panDelta)),m.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(n.around=m.around),m.pinchAround!==void 0&&(n.pinchAround=m.pinchAround),m.noInertia&&(n.noInertia=m.noInertia),u.e(l,y),u.e(p,S);this._updateMapTransform(n,l,p),this._changes=[]}_updateMapTransform(n,l,p){const m=this._map,y=m._getTransformForUpdate(),S=m.terrain;if(!(Zu(n)||S&&this._terrainMovement))return this._fireEvents(l,p,!0);let{panDelta:C,zoomDelta:P,bearingDelta:D,pitchDelta:L,around:F,pinchAround:U}=n;U!==void 0&&(F=U),m._stop(!0),F=F||m.transform.centerPoint;const K=y.pointLocation(C?F.sub(C):F);D&&(y.bearing+=D),L&&(y.pitch+=L),P&&(y.zoom+=P),S?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(C)):y.setLocationAtPoint(K,F):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(K,F)):y.setLocationAtPoint(K,F),m._applyUpdatedTransform(y),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(l,p,!0)}_fireEvents(n,l,p){const m=Mi(this._eventsInProgress),y=Mi(n),S={};for(const F in n){const{originalEvent:U}=n[F];this._eventsInProgress[F]||(S[`${F}start`]=U),this._eventsInProgress[F]=n[F]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(const F in S)this._fireEvent(F,S[F]);y&&this._fireEvent("move",y.originalEvent);for(const F in n){const{originalEvent:U}=n[F];this._fireEvent(F,U)}const C={};let P;for(const F in this._eventsInProgress){const{handlerName:U,originalEvent:K}=this._eventsInProgress[F];this._handlersById[U].isActive()||(delete this._eventsInProgress[F],P=l[U]||K,C[`${F}end`]=P)}for(const F in C)this._fireEvent(F,C[F]);const D=Mi(this._eventsInProgress),L=(m||y)&&!D;if(L&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const F=this._map._getTransformForUpdate();F.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(F)}if(p&&L){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!F||!F.essential&&A.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:P})),U(this._map.getBearing())&&this._map.resetNorth()):(U(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:P})),this._updatingCamera=!1}}_fireEvent(n,l){this._map.fire(new u.k(n,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new lt("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class jp extends u.E{constructor(n,l){super(),this._renderFrameCallback=()=>{const p=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(n,l){return this.jumpTo({center:n},l)}panBy(n,l,p){return n=u.P.convert(n).mult(-1),this.panTo(this.transform.center,u.e({offset:n},l),p)}panTo(n,l,p){return this.easeTo(u.e({center:n},l),p)}getZoom(){return this.transform.zoom}setZoom(n,l){return this.jumpTo({zoom:n},l),this}zoomTo(n,l,p){return this.easeTo(u.e({zoom:n},l),p)}zoomIn(n,l){return this.zoomTo(this.getZoom()+1,n,l),this}zoomOut(n,l){return this.zoomTo(this.getZoom()-1,n,l),this}getBearing(){return this.transform.bearing}setBearing(n,l){return this.jumpTo({bearing:n},l),this}getPadding(){return this.transform.padding}setPadding(n,l){return this.jumpTo({padding:n},l),this}rotateTo(n,l,p){return this.easeTo(u.e({bearing:n},l),p)}resetNorth(n,l){return this.rotateTo(0,u.e({duration:1e3},n),l),this}resetNorthPitch(n,l){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},n),l),this}snapToNorth(n,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,l):this}getPitch(){return this.transform.pitch}setPitch(n,l){return this.jumpTo({pitch:n},l),this}cameraForBounds(n,l){n=ke.convert(n).adjustAntiMeridian();const p=l&&l.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),p,l)}_cameraForBoxAndBearing(n,l,p,m){const y={top:0,bottom:0,right:0,left:0};if(typeof(m=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const Ke=m.padding;m.padding={top:Ke,bottom:Ke,right:Ke,left:Ke}}m.padding=u.e(y,m.padding);const S=this.transform,C=S.padding,P=new ke(n,l),D=S.project(P.getNorthWest()),L=S.project(P.getNorthEast()),F=S.project(P.getSouthEast()),U=S.project(P.getSouthWest()),K=u.ba(-p),Q=D.rotate(K),se=L.rotate(K),ue=F.rotate(K),ce=U.rotate(K),me=new u.P(Math.max(Q.x,se.x,ce.x,ue.x),Math.max(Q.y,se.y,ce.y,ue.y)),re=new u.P(Math.min(Q.x,se.x,ce.x,ue.x),Math.min(Q.y,se.y,ce.y,ue.y)),_e=me.sub(re),xe=(S.width-(C.left+C.right+m.padding.left+m.padding.right))/_e.x,Te=(S.height-(C.top+C.bottom+m.padding.top+m.padding.bottom))/_e.y;if(Te<0||xe<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Oe=Math.min(S.scaleZoom(S.scale*Math.min(xe,Te)),m.maxZoom),We=u.P.convert(m.offset),et=new u.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(u.ba(p)),st=We.add(et).mult(S.scale/S.zoomScale(Oe));return{center:S.unproject(D.add(F).div(2).sub(st)),zoom:Oe,bearing:p}}fitBounds(n,l,p){return this._fitInternal(this.cameraForBounds(n,l),l,p)}fitScreenCoordinates(n,l,p,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(n)),this.transform.pointLocation(u.P.convert(l)),p,m),m,y)}_fitInternal(n,l,p){return n?(delete(l=u.e(n,l)).padding,l.linear?this.easeTo(l,p):this.flyTo(l,p)):this}jumpTo(n,l){this.stop();const p=this._getTransformForUpdate();let m=!1,y=!1,S=!1;return"zoom"in n&&p.zoom!==+n.zoom&&(m=!0,p.zoom=+n.zoom),n.center!==void 0&&(p.center=u.N.convert(n.center)),"bearing"in n&&p.bearing!==+n.bearing&&(y=!0,p.bearing=+n.bearing),"pitch"in n&&p.pitch!==+n.pitch&&(S=!0,p.pitch=+n.pitch),n.padding==null||p.isPaddingEqual(n.padding)||(p.padding=n.padding),this._applyUpdatedTransform(p),this.fire(new u.k("movestart",l)).fire(new u.k("move",l)),m&&this.fire(new u.k("zoomstart",l)).fire(new u.k("zoom",l)).fire(new u.k("zoomend",l)),y&&this.fire(new u.k("rotatestart",l)).fire(new u.k("rotate",l)).fire(new u.k("rotateend",l)),S&&this.fire(new u.k("pitchstart",l)).fire(new u.k("pitch",l)).fire(new u.k("pitchend",l)),this.fire(new u.k("moveend",l))}calculateCameraOptionsFromTo(n,l,p,m=0){const y=u.Z.fromLngLat(n,l),S=u.Z.fromLngLat(p,m),C=S.x-y.x,P=S.y-y.y,D=S.z-y.z,L=Math.hypot(C,P,D);if(L===0)throw new Error("Can't calculate camera options with same From and To");const F=Math.hypot(C,P),U=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),K=180*Math.atan2(C,-P)/Math.PI;let Q=180*Math.acos(F/L)/Math.PI;return Q=D<0?90-Q:90+Q,{center:S.toLngLat(),zoom:U,pitch:Q,bearing:K}}easeTo(n,l){var p;this._stop(!1,n.easeId),((n=u.e({offset:[0,0],duration:500,easing:u.b9},n)).animate===!1||!n.essential&&A.prefersReducedMotion)&&(n.duration=0);const m=this._getTransformForUpdate(),y=m.zoom,S=m.bearing,C=m.pitch,P=m.padding,D="bearing"in n?this._normalizeBearing(n.bearing,S):S,L="pitch"in n?+n.pitch:C,F="padding"in n?n.padding:m.padding,U=u.P.convert(n.offset);let K=m.centerPoint.add(U);const Q=m.pointLocation(K),{center:se,zoom:ue}=m.getConstrained(u.N.convert(n.center||Q),(p=n.zoom)!==null&&p!==void 0?p:y);this._normalizeCenter(se,m);const ce=m.project(Q),me=m.project(se).sub(ce),re=m.zoomScale(ue-y);let _e,xe;n.around&&(_e=u.N.convert(n.around),xe=m.locationPoint(_e));const Te={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ue!==y,this._rotating=this._rotating||S!==D,this._pitching=this._pitching||L!==C,this._padding=!m.isPaddingEqual(F),this._easeId=n.easeId,this._prepareEase(l,n.noMoveStart,Te),this.terrain&&this._prepareElevation(se),this._ease(Oe=>{if(this._zooming&&(m.zoom=u.y.number(y,ue,Oe)),this._rotating&&(m.bearing=u.y.number(S,D,Oe)),this._pitching&&(m.pitch=u.y.number(C,L,Oe)),this._padding&&(m.interpolatePadding(P,F,Oe),K=m.centerPoint.add(U)),this.terrain&&!n.freezeElevation&&this._updateElevation(Oe),_e)m.setLocationAtPoint(_e,xe);else{const We=m.zoomScale(m.zoom-y),et=ue>y?Math.min(2,re):Math.max(.5,re),st=Math.pow(et,1-Oe),Ke=m.unproject(ce.add(me.mult(Oe*st)).mult(We));m.setLocationAtPoint(m.renderWorldCopies?Ke.wrap():Ke,K)}this._applyUpdatedTransform(m),this._fireMoveEvents(l)},Oe=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l,Oe)},n),this}_prepareEase(n,l,p={}){this._moving=!0,l||p.moving||this.fire(new u.k("movestart",n)),this._zooming&&!p.zooming&&this.fire(new u.k("zoomstart",n)),this._rotating&&!p.rotating&&this.fire(new u.k("rotatestart",n)),this._pitching&&!p.pitching&&this.fire(new u.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&l!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(p-(l-(p*n+this._elevationStart))/(1-n)),this._elevationTarget=l}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){const l=n.getCameraPosition(),p=this.terrain.getElevationForLngLatZoom(l.lngLat,n.zoom);if(l.altitude<p){const m=this.calculateCameraOptionsFromTo(l.lngLat,p,n.center,n.elevation);return{pitch:m.pitch,zoom:m.zoom}}return{}}_applyUpdatedTransform(n){const l=[];if(this.terrain&&l.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&l.push(m=>this.transformCameraUpdate(m)),!l.length)return;const p=n.clone();for(const m of l){const y=p.clone(),{center:S,zoom:C,pitch:P,bearing:D,elevation:L}=m(y);S&&(y.center=S),C!==void 0&&(y.zoom=C),P!==void 0&&(y.pitch=P),D!==void 0&&(y.bearing=D),L!==void 0&&(y.elevation=L),p.apply(y)}this.transform.apply(p)}_fireMoveEvents(n){this.fire(new u.k("move",n)),this._zooming&&this.fire(new u.k("zoom",n)),this._rotating&&this.fire(new u.k("rotate",n)),this._pitching&&this.fire(new u.k("pitch",n))}_afterEase(n,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const p=this._zooming,m=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new u.k("zoomend",n)),m&&this.fire(new u.k("rotateend",n)),y&&this.fire(new u.k("pitchend",n)),this.fire(new u.k("moveend",n))}flyTo(n,l){var p;if(!n.essential&&A.prefersReducedMotion){const nt=u.M(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(nt,l)}this.stop(),n=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},n);const m=this._getTransformForUpdate(),y=m.zoom,S=m.bearing,C=m.pitch,P=m.padding,D="bearing"in n?this._normalizeBearing(n.bearing,S):S,L="pitch"in n?+n.pitch:C,F="padding"in n?n.padding:m.padding,U=u.P.convert(n.offset);let K=m.centerPoint.add(U);const Q=m.pointLocation(K),{center:se,zoom:ue}=m.getConstrained(u.N.convert(n.center||Q),(p=n.zoom)!==null&&p!==void 0?p:y);this._normalizeCenter(se,m);const ce=m.zoomScale(ue-y),me=m.project(Q),re=m.project(se).sub(me);let _e=n.curve;const xe=Math.max(m.width,m.height),Te=xe/ce,Oe=re.mag();if("minZoom"in n){const nt=u.ac(Math.min(n.minZoom,y,ue),m.minZoom,m.maxZoom),Ct=xe/m.zoomScale(nt-y);_e=Math.sqrt(Ct/Oe*2)}const We=_e*_e;function et(nt){const Ct=(Te*Te-xe*xe+(nt?-1:1)*We*We*Oe*Oe)/(2*(nt?Te:xe)*We*Oe);return Math.log(Math.sqrt(Ct*Ct+1)-Ct)}function st(nt){return(Math.exp(nt)-Math.exp(-nt))/2}function Ke(nt){return(Math.exp(nt)+Math.exp(-nt))/2}const Xe=et(!1);let ht=function(nt){return Ke(Xe)/Ke(Xe+_e*nt)},Pt=function(nt){return xe*((Ke(Xe)*(st(Ct=Xe+_e*nt)/Ke(Ct))-st(Xe))/We)/Oe;var Ct},Ye=(et(!0)-Xe)/_e;if(Math.abs(Oe)<1e-6||!isFinite(Ye)){if(Math.abs(xe-Te)<1e-6)return this.easeTo(n,l);const nt=Te<xe?-1:1;Ye=Math.abs(Math.log(Te/xe))/_e,Pt=()=>0,ht=Ct=>Math.exp(nt*_e*Ct)}return n.duration="duration"in n?+n.duration:1e3*Ye/("screenSpeed"in n?+n.screenSpeed/_e:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=S!==D,this._pitching=L!==C,this._padding=!m.isPaddingEqual(F),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(se),this._ease(nt=>{const Ct=nt*Ye,pn=1/ht(Ct);m.zoom=nt===1?ue:y+m.scaleZoom(pn),this._rotating&&(m.bearing=u.y.number(S,D,nt)),this._pitching&&(m.pitch=u.y.number(C,L,nt)),this._padding&&(m.interpolatePadding(P,F,nt),K=m.centerPoint.add(U)),this.terrain&&!n.freezeElevation&&this._updateElevation(nt);const At=nt===1?se:m.unproject(me.add(re.mult(Pt(Ct))).mult(pn));m.setLocationAtPoint(m.renderWorldCopies?At.wrap():At,K),this._applyUpdatedTransform(m),this._fireMoveEvents(l)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,l){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,l)}return n||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(n,l,p){p.animate===!1||p.duration===0?(n(1),l()):(this._easeStart=A.now(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,l){n=u.b3(n,-180,180);const p=Math.abs(n-l);return Math.abs(n-360-l)<p&&(n-=360),Math.abs(n+360-l)<p&&(n+=360),n}_normalizeCenter(n,l){if(!l.renderWorldCopies||l.lngRange)return;const p=n.lng-l.center.lng;n.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}const Sa={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ta{constructor(n=Sa){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=M.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=M.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,l){const p=this._map._getUIString(`AttributionControl.${l}`);n.title=p,n.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const l=this._map.style.sourceCaches;for(const m in l){const y=l[m];if(y.used||y.usedForTerrain){const S=y.getSource();S.attribution&&n.indexOf(S.attribution)<0&&n.push(S.attribution)}}n=n.filter(m=>String(m).trim()),n.sort((m,y)=>m.length-y.length),n=n.filter((m,y)=>{for(let S=y+1;S<n.length;S++)if(n[S].indexOf(m)>=0)return!1;return!0});const p=n.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,n.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ad{constructor(n={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const p=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=M.create("div","maplibregl-ctrl");const l=M.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){M.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ot{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const l=++this._id;return this._queue.push({callback:n,id:l,cancelled:!1}),l}remove(n){const l=this._currentlyRunning,p=l?this._queue.concat(l):this._queue;for(const m of p)if(m.id===n)return void(m.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const p of l)if(!p.cancelled&&(p.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ld=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class __ extends u.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,l){this.sourceCache.update(n,l),this._renderableTilesKeys=[];const p={};for(const m of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),u.aP(m.posMatrix,0,u.X,0,u.X,0,1),this._tiles[m.key]=new Hr(m,this.tileSize));for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(n){for(const l in this._tiles){const p=this._tiles[l];(!n||p.tileID.equals(n)||p.tileID.isChildOf(n)||n.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const l={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID;if(m.canonical.equals(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16),u.aP(y.posMatrix,0,u.X,0,u.X,0,1),l[p]=y}else if(m.canonical.isChildOf(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const S=m.canonical.z-n.canonical.z,C=m.canonical.x-(m.canonical.x>>S<<S),P=m.canonical.y-(m.canonical.y>>S<<S),D=u.X>>S;u.aP(y.posMatrix,0,D,0,D,0,1),u.J(y.posMatrix,y.posMatrix,[-C*D,-P*D,0]),l[p]=y}else if(n.canonical.isChildOf(m.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const S=n.canonical.z-m.canonical.z,C=n.canonical.x-(n.canonical.x>>S<<S),P=n.canonical.y-(n.canonical.y>>S<<S),D=u.X>>S;u.aP(y.posMatrix,0,u.X,0,u.X,0,1),u.J(y.posMatrix,y.posMatrix,[C*D,P*D,0]),u.K(y.posMatrix,y.posMatrix,[1/2**S,1/2**S,0]),l[p]=y}}return l}getSourceTile(n,l){const p=this.sourceCache._source;let m=n.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!y||!y.dem)&&l)for(;m>=p.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(n.scaledTo(m--).key);return y}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=n)}}class ud{constructor(n,l,p){this.painter=n,this.sourceCache=new __(l),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,l,p,m=u.X){var y;if(!(l>=0&&l<m&&p>=0&&p<m))return 0;const S=this.getTerrainData(n),C=(y=S.tile)===null||y===void 0?void 0:y.dem;if(!C)return 0;const P=function(Q,se,ue){var ce=se[0],me=se[1];return Q[0]=ue[0]*ce+ue[4]*me+ue[12],Q[1]=ue[1]*ce+ue[5]*me+ue[13],Q}([],[l/m*u.X,p/m*u.X],S.u_terrain_matrix),D=[P[0]*C.dim,P[1]*C.dim],L=Math.floor(D[0]),F=Math.floor(D[1]),U=D[0]-L,K=D[1]-F;return C.get(L,F)*(1-U)*(1-K)+C.get(L+1,F)*U*(1-K)+C.get(L,F+1)*(1-U)*K+C.get(L+1,F+1)*U*K}getElevationForLngLatZoom(n,l){if(!u.bb(l,n.wrap()))return 0;const{tileID:p,mercatorX:m,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(n,l);return this.getElevation(p,m%u.X,y%u.X,u.X)}getElevation(n,l,p,m=u.X){return this.getDEMElevation(n,l,p,m)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const m=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Re(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Re(m,new u.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const l=this.sourceCache.getSourceTile(n,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const m=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new Re(m,l.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),l.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const p=l&&l+l.tileID.key+n.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let y=n.canonical.z-l.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=m?y=n.canonical.z-m:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=n.canonical.x-(n.canonical.x>>y<<y),C=n.canonical.y-(n.canonical.y>>y<<y),P=u.bc(new Float64Array(16),[1/(u.X<<y),1/(u.X<<y),0]);u.J(P,P,[S*u.X,C*u.X,0]),this._demMatrixCache[n.key]={matrix:P,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(n){const l=this.painter,p=l.width/devicePixelRatio,m=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Re(l.context,{width:p,height:m,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Re(l.context,{width:p,height:m,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(p,m,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,S=0;y<this._coordsTextureSize;y++)for(let C=0;C<this._coordsTextureSize;C++,S+=4)l[S+0]=255&C,l[S+1]=255&y,l[S+2]=C>>8<<4|y>>8,l[S+3]=0;const p=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),m=new Re(n,p,n.gl.RGBA,{premultiply:!1});return m.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),p=this.painter.context,m=p.gl,y=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(y,C-S-1,1,1,m.RGBA,m.UNSIGNED_BYTE,l),p.bindFramebuffer.set(null);const P=l[0]+(l[2]>>4<<8),D=l[1]+((15&l[2])<<8),L=this.coordsIndex[255-l[3]],F=L&&this.sourceCache.getTileByID(L);if(!F)return null;const U=this._coordsTextureSize,K=(1<<F.tileID.canonical.z)*U;return new u.Z((F.tileID.canonical.x*U+P)/K+F.tileID.wrap,(F.tileID.canonical.y*U+D)/K,this.getElevation(F.tileID,P,D,U))}depthAtPoint(n){const l=new Uint8Array(4),p=this.painter.context,m=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,l),p.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,l=new u.bd,p=new u.aY,m=this.meshSize,y=u.X/m,S=m*m;for(let F=0;F<=m;F++)for(let U=0;U<=m;U++)l.emplaceBack(U*y,F*y,0);for(let F=0;F<S;F+=m+1)for(let U=0;U<m;U++)p.emplaceBack(U+F,m+U+F+1,m+U+F+2),p.emplaceBack(U+F,m+U+F+2,U+F+1);const C=l.length,P=C+2*(m+1);for(const F of[0,1])for(let U=0;U<=m;U++)for(const K of[0,1])l.emplaceBack(U*y,F*u.X,K);for(let F=0;F<2*m;F+=2)p.emplaceBack(P+F,P+F+1,P+F+3),p.emplaceBack(P+F,P+F+3,P+F+2),p.emplaceBack(C+F,C+F+3,C+F+1),p.emplaceBack(C+F,C+F+2,C+F+3);const D=l.length,L=D+2*(m+1);for(const F of[0,1])for(let U=0;U<=m;U++)for(const K of[0,1])l.emplaceBack(F*u.X,U*y,K);for(let F=0;F<2*m;F+=2)p.emplaceBack(D+F,D+F+1,D+F+3),p.emplaceBack(D+F,D+F+3,D+F+2),p.emplaceBack(L+F,L+F+3,L+F+1),p.emplaceBack(L+F,L+F+2,L+F+3);return this._mesh=new Bu(n.createVertexBuffer(l,ld.members),n.createIndexBuffer(p),u.a0.simpleSegment(0,0,l.length,p.length)),this._mesh}getMeshFrameDelta(n){return 2*Math.PI*u.be/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,l){var p;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(n,l);return(p=this.getMinMaxElevation(m).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(n){const l=this.getTerrainData(n).tile,p={minElevation:null,maxElevation:null};return l&&l.dem&&(p.minElevation=l.dem.min*this.exaggeration,p.maxElevation=l.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(n,l){const p=u.Z.fromLngLat(n.wrap()),m=(1<<l)*u.X,y=p.x*m,S=p.y*m,C=Math.floor(y/u.X),P=Math.floor(S/u.X);return{tileID:new u.S(l,0,l,C,P),mercatorX:y,mercatorY:S}}}class v_{constructor(n,l,p){this._context=n,this._size=l,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new Re(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(p.texture),{id:n,fbo:l,texture:p,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>n.id!==l),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const Ca={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class $p{constructor(n,l){this.painter=n,this.terrain=l,this.pool=new v_(n.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(p=>!n._layers[p].isHidden(l)),this._coordsDescendingInv={};for(const p in n.sourceCaches){this._coordsDescendingInv[p]={};const m=n.sourceCaches[p].getVisibleCoordinates();for(const y of m){const S=this.terrain.sourceCache.getTerrainCoords(y);for(const C in S)this._coordsDescendingInv[p][C]||(this._coordsDescendingInv[p][C]=[]),this._coordsDescendingInv[p][C].push(S[C])}}this._coordsDescendingInvStr={};for(const p of n._order){const m=n._layers[p],y=m.source;if(Ca[m.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const S in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][S]=this._coordsDescendingInv[y][S].map(C=>C.key).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[m][p.tileID.key];y&&y!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const l=n.type,p=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(Ca[l]&&(this._prevType&&Ca[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(n.id),!m))return!0;if(Ca[this._prevType]||Ca[l]&&m){this._prevType=l;const y=this._stacks.length-1,S=this._stacks[y]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(Rp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[y]){const D=this.pool.getObjectForId(C.rtt[y].id);if(D.stamp===C.rtt[y].stamp){this.pool.useObject(D);continue}}const P=this.pool.getOrCreateFreeObject();this.pool.useObject(P),this.pool.stampObject(P),C.rtt[y]={id:P.id,stamp:P.stamp},p.context.bindFramebuffer.set(P.fbo.framebuffer),p.context.clear({color:u.aM.transparent,stencil:0}),p.currentStencilSource=void 0;for(let D=0;D<S.length;D++){const L=p.style._layers[S[D]],F=L.source?this._coordsDescendingInv[L.source][C.tileID.key]:[C.tileID];p.context.viewport.set([0,0,P.fbo.width,P.fbo.height]),p._renderTileClippingMasks(L,F),p.renderLayer(p,p.style.sourceCaches[L.source],L,F),L.source&&(C.rttCoords[L.source]=this._coordsDescendingInvStr[L.source][C.tileID.key])}}return Rp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ca[l]}return!1}}const cd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Up=w,x_={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Sa,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},hd=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},b_={showCompass:!0,showZoom:!0,visualizePitch:!1};class w_{constructor(n,l,p=!1){this.mousedown=S=>{this.startMouse(u.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),M.mousePos(this.element,S)),M.addEventListener(window,"mousemove",this.mousemove),M.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,M.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),M.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=n.dragRotate._mouseRotate.getClickTolerance(),y=n.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=Jh({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:C,bearingDegreesPerPixelMoved:P=.8})=>{const D=new Yh;return new Ns({clickTolerance:C,move:(L,F)=>({bearingDelta:(F.x-L.x)*P}),moveStateManager:D,enable:S,assignEvents:hd})})({clickTolerance:m,enable:!0}),this.map=n,p&&(this.mousePitch=Qh({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:C,pitchDegreesPerPixelMoved:P=-.5})=>{const D=new Yh;return new Ns({clickTolerance:C,move:(L,F)=>({pitchDelta:(F.y-L.y)*P}),moveStateManager:D,enable:S,assignEvents:hd})})({clickTolerance:y,enable:!0})),M.addEventListener(l,"mousedown",this.mousedown),M.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(l,"touchcancel",this.reset)}startMouse(n,l){this.mouseRotate.dragStart(n,l),this.mousePitch&&this.mousePitch.dragStart(n,l),M.disableDrag()}startTouch(n,l){this.touchRotate.dragStart(n,l),this.touchPitch&&this.touchPitch.dragStart(n,l),M.disableDrag()}moveMouse(n,l){const p=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(n,l)||{};if(m&&p.setBearing(p.getBearing()+m),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(n,l)||{};y&&p.setPitch(p.getPitch()+y)}}moveTouch(n,l){const p=this.map,{bearingDelta:m}=this.touchRotate.dragMove(n,l)||{};if(m&&p.setBearing(p.getBearing()+m),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(n,l)||{};y&&p.setPitch(p.getPitch()+y)}}off(){const n=this.element;M.removeEventListener(n,"mousedown",this.mousedown),M.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend),M.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){M.enableDrag(),M.removeEventListener(window,"mousemove",this.mousemove),M.removeEventListener(window,"mouseup",this.mouseup),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend)}}let pi;function fn(_,n,l){const p=new u.N(_.lng,_.lat);if(_=new u.N(_.lng,_.lat),n){const m=new u.N(_.lng-360,_.lat),y=new u.N(_.lng+360,_.lat),S=l.locationPoint(_).distSqr(n);l.locationPoint(m).distSqr(n)<S?_=m:l.locationPoint(y).distSqr(n)<S&&(_=y)}for(;Math.abs(_.lng-l.center.lng)>180;){const m=l.locationPoint(_);if(m.x>=0&&m.y>=0&&m.x<=l.width&&m.y<=l.height)break;_.lng>l.center.lng?_.lng-=360:_.lng+=360}return _.lng!==p.lng&&l.locationPoint(_).y>l.height/2-l.getHorizon()?_:p}const ka={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Xu(_,n,l){const p=_.classList;for(const m in ka)p.remove(`maplibregl-${l}-anchor-${m}`);p.add(`maplibregl-${l}-anchor-${n}`)}class Ku extends u.E{constructor(n){if(super(),this._onKeyPress=l=>{const p=l.code,m=l.charCode||l.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=l=>{const p=l.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},this._update=l=>{var p;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?fn(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,`${ka[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${y}`),A.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=u.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div");const l=M.createNS("http://www.w3.org/2000/svg","svg"),p=41,m=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${p}px`),l.setAttributeNS(null,"width",`${m}px`),l.setAttributeNS(null,"viewBox",`0 0 ${m} ${p}`);const y=M.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const S=M.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const C=M.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ce of P){const me=M.createNS("http://www.w3.org/2000/svg","ellipse");me.setAttributeNS(null,"opacity","0.04"),me.setAttributeNS(null,"cx","10.5"),me.setAttributeNS(null,"cy","5.80029008"),me.setAttributeNS(null,"rx",ce.rx),me.setAttributeNS(null,"ry",ce.ry),C.appendChild(me)}const D=M.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const L=M.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(L);const F=M.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");const U=M.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(U);const K=M.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const Q=M.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const se=M.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");const ue=M.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),Q.appendChild(se),Q.appendChild(ue),S.appendChild(C),S.appendChild(D),S.appendChild(F),S.appendChild(K),S.appendChild(Q),l.appendChild(S),l.setAttributeNS(null,"height",p*this._scale+"px"),l.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(l),this._offset=u.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Xu(this._element,this._anchor,"marker"),n&&n.className)for(const l of n.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=u.N.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const m=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var l,p;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,y=m.terrain.depthAtPoint(this._pos),S=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,S)-y<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/m.transform._pixelPerMeter,P=Math.sin(m.getPitch()*Math.PI/180)*C,D=m.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),L=m.transform.lngLatToCameraDepth(this._lngLat,S+P)-D>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&L&&this._popup.remove(),this._element.style.opacity=L?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=u.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,l){return n===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const Wp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Il=0,Ml=!1;const vs={maxWidth:100,unit:"metric"};function Al(_,n,l){const p=l&&l.maxWidth||100,m=_._container.clientHeight/2,y=_.unproject([0,m]),S=_.unproject([p,m]),C=y.distanceTo(S);if(l&&l.unit==="imperial"){const P=3.2808*C;P>5280?ct(n,p,P/5280,_._getUIString("ScaleControl.Miles")):ct(n,p,P,_._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?ct(n,p,C/1852,_._getUIString("ScaleControl.NauticalMiles")):C>=1e3?ct(n,p,C/1e3,_._getUIString("ScaleControl.Kilometers")):ct(n,p,C,_._getUIString("ScaleControl.Meters"))}function ct(_,n,l,p){const m=function(y){const S=Math.pow(10,`${Math.floor(y)}`.length-1);let C=y/S;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(P){const D=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*D)/D}(C),S*C}(l);_.style.width=n*(m/l)+"px",_.innerHTML=`${m}&nbsp;${p}`}const vt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Yu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ju(_){if(_){if(typeof _=="number"){const n=Math.round(Math.abs(_)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,_),"top-left":new u.P(n,n),"top-right":new u.P(-n,n),bottom:new u.P(0,-_),"bottom-left":new u.P(n,-n),"bottom-right":new u.P(-n,-n),left:new u.P(_,0),right:new u.P(-_,0)}}if(_ instanceof u.P||Array.isArray(_)){const n=u.P.convert(_);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:u.P.convert(_.center||[0,0]),top:u.P.convert(_.top||[0,0]),"top-left":u.P.convert(_["top-left"]||[0,0]),"top-right":u.P.convert(_["top-right"]||[0,0]),bottom:u.P.convert(_.bottom||[0,0]),"bottom-left":u.P.convert(_["bottom-left"]||[0,0]),"bottom-right":u.P.convert(_["bottom-right"]||[0,0]),left:u.P.convert(_.left||[0,0]),right:u.P.convert(_.right||[0,0])}}return Ju(new u.P(0,0))}const dd=w;f.AJAXError=u.bh,f.Evented=u.E,f.LngLat=u.N,f.MercatorCoordinate=u.Z,f.Point=u.P,f.addProtocol=u.bi,f.config=u.a,f.removeProtocol=u.bj,f.AttributionControl=Ta,f.BoxZoomHandler=fi,f.CanvasSource=dr,f.CooperativeGesturesHandler=wa,f.DoubleClickZoomHandler=Ro,f.DragPanHandler=Vp,f.DragRotateHandler=Np,f.EdgeInsets=va,f.FullscreenControl=class extends u.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var n;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=l==null?void 0:l.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){M.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=M.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);M.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=Rr,f.GeolocateControl=class extends u.E{constructor(_){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const l=new u.N(n.coords.longitude,n.coords.latitude),p=n.coords.accuracy,m=this._map.getBearing(),y=u.e({bearing:m},this.options.fitBoundsOptions),S=ke.fromLngLat(l,p);this._map.fitBounds(S,y,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const l=new u.N(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Ml)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=M.create("button","maplibregl-ctrl-geolocate",this._container),M.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ku({element:this._dotElement}),this._circleElement=M.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ku({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},Wp,_)}onAdd(_){return this._map=_,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(n=!1){if(pi!==void 0&&!n)return pi;if(window.navigator.permissions===void 0)return pi=!!window.navigator.geolocation,pi;try{pi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{pi=!!window.navigator.geolocation}return pi})}().then(n=>this._finishSetupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Il=0,Ml=!1}_isOutOfMapMaxBounds(_){const n=this._map.getMaxBounds(),l=_.coords;return n&&(l.longitude<n.getWest()||l.longitude>n.getEast()||l.latitude<n.getSouth()||l.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),n=_.getSouthEast(),l=_.getNorthEast(),p=n.distanceTo(l),m=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Il--,Ml=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Il++,Il>1?(_={maximumAge:6e5,timeout:0},Ml=!0):(_=this.options.positionOptions,Ml=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.Hash=Nu,f.ImageSource=Lr,f.KeyboardHandler=Ii,f.LngLatBounds=ke,f.LogoControl=ad,f.Map=class extends jp{constructor(_){u.bf.mark(u.bg.create);const n=Object.assign(Object.assign({},x_),_);if(n.minZoom!=null&&n.maxZoom!=null&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(n.minPitch!=null&&n.maxPitch!=null&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(n.minPitch!=null&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(n.maxPitch!=null&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new xa(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ot,this._controls=[],this._mapId=u.a4(),this._contextLost=l=>{l.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:l}))},this._contextRestored=l=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:l}))},this._onMapScroll=l=>{if(l.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=n.preserveDrawingBuffer===!0,this._antialias=n.antialias===!0,this._trackResize=n.trackResize===!0,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles===!0,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions===!0,this._collectResourceTiming=n.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},cd),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=n.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new ee(n.transformRequest),typeof n.container=="string"){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let l=!1;const p=Sl(m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())},50);this._resizeObserver=new ResizeObserver(m=>{l?p(m):l=!0}),this._resizeObserver.observe(this._container)}this.handlers=new od(this,n),this._hash=n.hash&&new Nu(typeof n.hash=="string"&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,u.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Ta(typeof n.attributionControl=="boolean"?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new ad,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new u.k(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new u.k(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new u.k("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(_,n){if(n===void 0&&(n=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=_.onAdd(this);this._controls.push(_);const p=this._controlPositions[n];return n.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(_);return n>-1&&this._controls.splice(n,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,n,l,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,n,l,p)}resize(_){var n;const l=this._containerDimensions(),p=l[0],m=l[1],y=this._getClampedPixelRatio(p,m);if(this._resizeCanvas(p,m,y),this.painter.resize(p,m,y),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const P=this._getClampedPixelRatio(p,m);this._resizeCanvas(p,m,P),this.painter.resize(p,m,P)}this.transform.resize(p,m),(n=this._requestedCameraState)===null||n===void 0||n.resize(p,m);const S=!this._moving;return S&&(this.stop(),this.fire(new u.k("movestart",_)).fire(new u.k("move",_))),this.fire(new u.k("resize",_)),S&&this.fire(new u.k("moveend",_)),this}_getClampedPixelRatio(_,n){const{0:l,1:p}=this._maxCanvasSize,m=this.getPixelRatio(),y=_*m,S=n*m;return Math.min(y>l?l/y:1,S>p?p/S:1)*m}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(ke.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(u.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(u.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,n,l){if(_==="mouseenter"||_==="mouseover"){let p=!1;return{layers:n,listener:l,delegates:{mousemove:y=>{const S=n.filter(P=>this.getLayer(P)),C=S.length!==0?this.queryRenderedFeatures(y.point,{layers:S}):[];C.length?p||(p=!0,l.call(this,new xr(_,this,y.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if(_==="mouseleave"||_==="mouseout"){let p=!1;return{layers:n,listener:l,delegates:{mousemove:S=>{const C=n.filter(P=>this.getLayer(P));(C.length!==0?this.queryRenderedFeatures(S.point,{layers:C}):[]).length?p=!0:p&&(p=!1,l.call(this,new xr(_,this,S.originalEvent)))},mouseout:S=>{p&&(p=!1,l.call(this,new xr(_,this,S.originalEvent)))}}}}{const p=m=>{const y=n.filter(C=>this.getLayer(C)),S=y.length!==0?this.queryRenderedFeatures(m.point,{layers:y}):[];S.length&&(m.features=S,l.call(this,m),delete m.features)};return{layers:n,listener:l,delegates:{[_]:p}}}}_saveDelegatedListener(_,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(n)}_removeDelegatedListener(_,n,l){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const p=this._delegatedListeners[_];for(let m=0;m<p.length;m++){const y=p[m];if(y.listener===l&&y.layers.length===n.length&&y.layers.every(S=>n.includes(S))){for(const S in y.delegates)this.off(S,y.delegates[S]);return void p.splice(m,1)}}}on(_,n,l){if(l===void 0)return super.on(_,n);const p=this._createDelegatedListener(_,typeof n=="string"?[n]:n,l);this._saveDelegatedListener(_,p);for(const m in p.delegates)this.on(m,p.delegates[m]);return this}once(_,n,l){if(l===void 0)return super.once(_,n);const p=typeof n=="string"?[n]:n,m=this._createDelegatedListener(_,p,l);for(const y in m.delegates){const S=m.delegates[y];m.delegates[y]=(...C)=>{this._removeDelegatedListener(_,p,l),S(...C)}}this._saveDelegatedListener(_,m);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(_,n,l){return l===void 0?super.off(_,n):(this._removeDelegatedListener(_,typeof n=="string"?[n]:n,l),this)}queryRenderedFeatures(_,n){if(!this.style)return[];let l;const p=_ instanceof u.P||Array.isArray(_),m=p?_:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(p?{}:_)||{},m instanceof u.P||typeof m[0]=="number")l=[u.P.convert(m)];else{const y=u.P.convert(m[0]),S=u.P.convert(m[1]);l=[y,new u.P(S.x,y.y),S,new u.P(y.x,S.y),y]}return this.style.queryRenderedFeatures(l,n,this.transform)}querySourceFeatures(_,n){return this.style.querySourceFeatures(_,n)}setStyle(_,n){return(n=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(_,n))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const n=this._locale[_];if(n==null)throw new Error(`Missing UI string '${_}'`);return n}_updateStyle(_,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,n));const l=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Su(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,n,l):this.style.loadJSON(_,n,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Su(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,n){if(typeof _=="string"){const l=this._requestManager.transformRequest(_,"Style");u.h(l,new AbortController).then(p=>{this._updateDiff(p.data,n)}).catch(p=>{p&&this.fire(new u.j(p))})}else typeof _=="object"&&this._updateDiff(_,n)}_updateDiff(_,n){try{this.style.setState(_,n)&&this._update(!0)}catch(l){u.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(_,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(_,n){return this._lazyInitEmptyStyle(),this.style.addSource(_,n),this._update(!0)}isSourceLoaded(_){const n=this.style&&this.style.sourceCaches[_];if(n!==void 0)return n.loaded();this.fire(new u.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const n=this.style.sourceCaches[_.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&n.reload();for(const l in this.style._layers){const p=this.style._layers[l];p.type==="hillshade"&&p.source===_.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ud(this.painter,n,_),this.painter.renderToTexture=new $p(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:_})),this}getTerrain(){var _,n;return(n=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const n in _){const l=_[n]._tiles;for(const p in l){const m=l[p];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,n,l={}){const{pixelRatio:p=1,sdf:m=!1,stretchX:y,stretchY:S,content:C,textFitWidth:P,textFitHeight:D}=l;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||u.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:L,height:F,data:U}=n,K=n;return this.style.addImage(_,{data:new u.R({width:L,height:F},new Uint8Array(U)),pixelRatio:p,stretchX:y,stretchY:S,content:C,textFitWidth:P,textFitHeight:D,sdf:m,version:0,userImage:K}),K.onAdd&&K.onAdd(this,_),this}}{const{width:L,height:F,data:U}=A.getImageData(n);this.style.addImage(_,{data:new u.R({width:L,height:F},U),pixelRatio:p,stretchX:y,stretchY:S,content:C,textFitWidth:P,textFitHeight:D,sdf:m,version:0})}}updateImage(_,n){const l=this.style.getImage(_);if(!l)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=n instanceof HTMLImageElement||u.b(n)?A.getImageData(n):n,{width:m,height:y,data:S}=p;if(m===void 0||y===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==l.data.width||y!==l.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(n instanceof HTMLImageElement||u.b(n));return l.data.replace(S,C),this.style.updateImage(_,l),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return G.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,n){return this._lazyInitEmptyStyle(),this.style.addLayer(_,n),this._update(!0)}moveLayer(_,n){return this.style.moveLayer(_,n),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,n,l){return this.style.setLayerZoomRange(_,n,l),this._update(!0)}setFilter(_,n,l={}){return this.style.setFilter(_,n,l),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,n,l,p={}){return this.style.setPaintProperty(_,n,l,p),this._update(!0)}getPaintProperty(_,n){return this.style.getPaintProperty(_,n)}setLayoutProperty(_,n,l,p={}){return this.style.setLayoutProperty(_,n,l,p),this._update(!0)}getLayoutProperty(_,n){return this.style.getLayoutProperty(_,n)}setGlyphs(_,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,n,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,n,l,p=>{p||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,n,l=>{l||this._update(!0)}),this}setLight(_,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,n){return this.style.setFeatureState(_,n),this._update()}removeFeatureState(_,n){return this.style.removeFeatureState(_,n),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,n=0;return this._container&&(_=this._container.clientWidth||400,n=this._container.clientHeight||300),[_,n]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const n=this._canvasContainer=M.create("div","maplibregl-canvas-container",_);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=M.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),p=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],p);const m=this._controlContainer=M.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{y[S]=M.create("div",`maplibregl-ctrl-${S} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,n,l){this._canvas.width=Math.floor(l*_),this._canvas.height=Math.floor(l*n),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{n={requestedAttributes:_},p&&(n.statusMessage=p.statusMessage,n.type=p.type)},{once:!0});const l=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!l){const p="Failed to initialize WebGL";throw n?(n.message=p,new Error(JSON.stringify(n))):new Error(p)}this.painter=new Vu(l,this.transform),$.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,y=A.now();this.style.zoomHistory.update(m,y);const S=new u.z(m,{now:y,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=S.crossFadingFactor();C===1&&C===this._crossFadingFactor||(l=!0,this._crossFadingFactor=C),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bf.mark(u.bg.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,u.bf.mark(u.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),M.remove(this._canvasContainer),M.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bf.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(_=>{u.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return Up}getCameraTargetElevation(){return this.transform.elevation}},f.MapMouseEvent=xr,f.MapTouchEvent=zo,f.MapWheelEvent=Fp,f.Marker=Ku,f.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const n=this._map.getZoom(),l=n===this._map.getMaxZoom(),p=n===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,l)=>{const p=this._map._getUIString(`NavigationControl.${l}`);n.title=p,n.setAttribute("aria-label",p)},this.options=u.e({},b_,_),this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),M.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),M.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=M.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new w_(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,n){const l=M.create("button",_,this._container);return l.type="button",l.addEventListener("click",n),l}},f.Popup=class extends u.E{constructor(_){super(),this.remove=()=>(this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=M.create("div","maplibregl-popup",this._map.getContainer()),this._tip=M.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?fn(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!n)return;const p=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const y=Ju(this.options.offset);if(!m){const C=this._container.offsetWidth,P=this._container.offsetHeight;let D;D=p.y+y.bottom.y<P?["top"]:p.y>this._map.transform.height-P?["bottom"]:[],p.x<C/2?D.push("left"):p.x>this._map.transform.width-C/2&&D.push("right"),m=D.length===0?"bottom":D.join("-")}let S=p.add(y[m]);this.options.subpixelPositioning||(S=S.round()),M.setTransform(this._container,`${ka[m]} translate(${S.x}px,${S.y}px)`),Xu(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(vt),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=u.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const n=document.createDocumentFragment(),l=document.createElement("body");let p;for(l.innerHTML=_;p=l.firstChild,p;)n.appendChild(p);return this.setDOMContent(n)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=M.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Yu);_&&_.focus()}},f.RasterDEMTileSource=Vt,f.RasterTileSource=Dt,f.ScaleControl=class{constructor(_){this._onMove=()=>{Al(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,Al(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},vs),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=Xi,f.Style=Su,f.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=M.create("button","maplibregl-ctrl-terrain",this._container),M.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){M.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=El,f.TwoFingersTouchRotateHandler=rd,f.TwoFingersTouchZoomHandler=td,f.TwoFingersTouchZoomRotateHandler=sd,f.VectorTileSource=nr,f.VideoSource=Si,f.addSourceType=(_,n)=>u._(void 0,void 0,void 0,function*(){if(Ti(_))throw new Error(`A source type called "${_}" already exists.`);((l,p)=>{ms[l]=p})(_,n)}),f.clearPrewarmedResources=function(){const _=Jt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Zt),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return Pn().getRTLTextPluginStatus()},f.getVersion=function(){return dd},f.getWorkerCount=function(){return Yt.workerCount},f.getWorkerUrl=function(){return u.a.WORKER_URL},f.importScriptInWorkers=function(_){return Gr().broadcast("IS",_)},f.prewarm=function(){_r().acquire(Zt)},f.setMaxParallelImageRequests=function(_){u.a.MAX_PARALLEL_IMAGE_REQUESTS=_},f.setRTLTextPlugin=function(_,n){return Pn().setRTLTextPlugin(_,n)},f.setWorkerCount=function(_){Yt.workerCount=_},f.setWorkerUrl=function(_){u.a.WORKER_URL=_}});var d=i;return d})})(rM);var eu=rM.exports;const YO=Wx(eu),JO=ak({__proto__:null,default:YO},[eu]),QO={width:"100%",background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:"8px 10px",color:"#0f172a",fontSize:13,outline:"none",boxSizing:"border-box"},eB={position:"fixed",background:"#fff",border:"1px solid #e2e8f0",borderRadius:8,overflow:"hidden",zIndex:9999,boxShadow:"0 4px 16px rgba(0,0,0,0.1)"},tB={padding:"9px 12px",fontSize:12,color:"#1e293b",cursor:"pointer"};function pC({label:e,value:t,options:i,onInput:a,onSelect:c}){const[d,f]=ne.useState((t==null?void 0:t.name)??""),[u,w]=ne.useState(!1),[k,I]=ne.useState(null),[A,M]=ne.useState(null),$=ne.useRef(null),H=ne.useRef(null);ne.useEffect(()=>{f((t==null?void 0:t.name)??"")},[t]),ne.useEffect(()=>{const j=W=>{$.current&&!$.current.contains(W.target)&&w(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const Y=()=>{H.current&&M(H.current.getBoundingClientRect())},ae=u&&i.length>0&&A&&_h.createPortal(Ae.jsx("div",{style:{...eB,top:A.bottom+4,left:A.left,width:A.width},children:i.map((j,W)=>Ae.jsx("div",{style:{...tB,background:k===W?"#f1f5f9":"transparent"},onMouseEnter:()=>I(W),onMouseLeave:()=>I(null),onMouseDown:()=>{c(j),f(j.name),w(!1)},children:j.name},j.id))}),document.body);return Ae.jsxs("div",{ref:$,children:[Ae.jsx("div",{style:{fontSize:10,color:"#94a3b8",fontWeight:600,letterSpacing:"0.06em",textTransform:"uppercase",marginBottom:5},children:e}),Ae.jsx("input",{ref:H,style:QO,value:d,placeholder:`Search ${e.toLowerCase()}`,onChange:j=>{f(j.target.value),a(j.target.value),Y(),w(!0),j.target.value||c(null)},onFocus:()=>{Y(),i.length>0&&w(!0)}}),ae]})}function nB(){return Ae.jsx("span",{style:{display:"inline-block",width:13,height:13,border:"2px solid rgba(255,255,255,0.35)",borderTopColor:"#fff",borderRadius:"50%",animation:"spin 0.7s linear infinite",verticalAlign:"middle",marginRight:6}})}function rB({onRoutes:e,targetMiles:t,polygon:i}){const{current:a}=ep(),[c,d]=ne.useState(null),[f,u]=ne.useState(null),[w,k]=ne.useState([]),[I,A]=ne.useState([]),[M,$]=ne.useState(!1),[H,Y]=ne.useState(!1),[ae,j]=ne.useState(null),W=ne.useRef(null),G=ne.useRef(null),ee=ne.useRef(null),de=ne.useRef(null),he=ne.useCallback((Me,ze,Re)=>{Re.current&&clearTimeout(Re.current),Re.current=setTimeout(async()=>{ze(await m5(Me))},250)},[]);ne.useEffect(()=>{var ze,Re;if(!a)return;const Me=a.getMap();if((ze=ee.current)==null||ze.remove(),(Re=de.current)==null||Re.remove(),ee.current=null,de.current=null,M)c!=null&&c.coordinates&&(ee.current=new eu.Marker({color:"#2563eb"}).setLngLat(c.coordinates).addTo(Me),a.flyTo({center:c.coordinates,zoom:13}));else if(c!=null&&c.coordinates&&(ee.current=new eu.Marker({color:"#2563eb"}).setLngLat(c.coordinates).addTo(Me)),f!=null&&f.coordinates&&(de.current=new eu.Marker({color:"#1e40af"}).setLngLat(f.coordinates).addTo(Me)),c!=null&&c.coordinates&&(f!=null&&f.coordinates)&&(c.coordinates[0]!==f.coordinates[0]||c.coordinates[1]!==f.coordinates[1])){const te=new eu.LngLatBounds(c.coordinates,c.coordinates);te.extend(f.coordinates),a.fitBounds(te,{padding:80,duration:800})}else c!=null&&c.coordinates?a.flyTo({center:c.coordinates,zoom:13}):f!=null&&f.coordinates&&a.flyTo({center:f.coordinates,zoom:13})},[c,f,M,a]),ne.useEffect(()=>()=>{var Me,ze;(Me=ee.current)==null||Me.remove(),(ze=de.current)==null||ze.remove()},[]);const ye=M?!!c:!!(c&&f),Ce=async()=>{if(!c)return;Y(!0),j(null),e([]);let Me=[];M?Me=await d5(c.coordinates,t,i):f&&(Me=await f5(c.coordinates,f.coordinates)),Me.length>0?e(Me):j("No route found. Try different locations."),Y(!1)};return Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),Ae.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[Ae.jsx(pC,{label:"Start",value:c,options:w,onInput:Me=>he(Me,k,W),onSelect:Me=>{d(Me),e([]),j(null)}}),Ae.jsx(gI,{children:!M&&Ae.jsx(Sx.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.18},children:Ae.jsx(pC,{label:"End",value:f,options:I,onInput:Me=>he(Me,A,G),onSelect:Me=>{u(Me),e([]),j(null)}})},"end")}),Ae.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:2},children:[Ae.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",userSelect:"none",flex:1},children:[Ae.jsx("div",{onClick:()=>{$(Me=>!Me),e([]),j(null)},style:{width:32,height:18,borderRadius:9,background:M?"#3b82f6":"#e2e8f0",position:"relative",transition:"background 0.2s",flexShrink:0},children:Ae.jsx("div",{style:{position:"absolute",top:2,left:M?16:2,width:14,height:14,borderRadius:"50%",background:"#fff",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})}),Ae.jsx("span",{style:{fontSize:12,color:"#64748b"},children:"Loop"})]}),Ae.jsxs("button",{onClick:Ce,disabled:!ye||H,style:{flex:2,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 0",borderRadius:8,border:"none",background:ye&&!H||H?"#3b82f6":"#f1f5f9",color:ye||H?"#fff":"#94a3b8",fontSize:13,fontWeight:600,cursor:ye&&!H?"pointer":"default",transition:"background 0.2s, color 0.2s"},children:[H&&Ae.jsx(nB,{}),H?"Finding routes":"Get Route"]})]}),ae&&Ae.jsx("div",{style:{fontSize:11,color:"#dc2626",marginTop:-4},children:ae})]})]})}const $l="route-line",mC="route-line-casing",gC="route-line-layer",yC="route-line-arrows",e0="route-arrow";function iB(e){const t=document.createElement("canvas");t.width=e,t.height=e;const i=t.getContext("2d");i.clearRect(0,0,e,e);const a=e/2,c=e*.82,d=e*.28;return i.beginPath(),i.moveTo(c,a),i.lineTo(a-e*.05,a-d),i.lineTo(a-e*.05,a+d),i.closePath(),i.fillStyle="rgba(255,255,255,0.92)",i.fill(),i.getImageData(0,0,e,e)}function sB({route:e}){var c;const t=ep(),i=(c=t==null?void 0:t.current)==null?void 0:c.getMap(),a=ne.useRef(!1);return ne.useEffect(()=>{if(!i)return;const d={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e?e.coordinates:[]}},f=()=>{i.hasImage(e0)||i.addImage(e0,iB(32),{pixelRatio:2}),i.getSource($l)?i.getSource($l).setData(d):a.current=!1,a.current||(i.getSource($l)||i.addSource($l,{type:"geojson",data:d,lineMetrics:!0}),i.getLayer(mC)||i.addLayer({id:mC,type:"line",source:$l,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#1e40af","line-width":7,"line-opacity":.25}}),i.getLayer(gC)||i.addLayer({id:gC,type:"line",source:$l,layout:{"line-join":"round","line-cap":"round"},paint:{"line-gradient":["interpolate",["linear"],["line-progress"],0,"#93c5fd",.5,"#3b82f6",1,"#1e3a8a"],"line-width":4}}),i.getLayer(yC)||i.addLayer({id:yC,type:"symbol",source:$l,layout:{"symbol-placement":"line","symbol-spacing":100,"icon-image":e0,"icon-size":.55,"icon-allow-overlap":!0,"icon-ignore-placement":!0}}),a.current=!0)};if(i.isStyleLoaded())f();else{const u=()=>{f(),i.off("styledata",u)};i.on("styledata",u)}},[i,e]),null}function oB(e){const t=[0];for(let i=1;i<e.length;i++){const[a,c]=e[i-1],[d,f]=e[i],u=(d-a)*Math.cos((c+f)*.5*(Math.PI/180))*111320,w=(f-c)*111320;t.push(t[i-1]+Math.sqrt(u*u+w*w))}return{cumulative:t,total:t[t.length-1]}}function aB(e,t,i,a){if(e.length===0)return[0,0];if(a<=0)return e[0];if(a>=1)return e[e.length-1];const c=a*i;let d=0,f=t.length-1;for(;d<f-1;){const $=d+f>>1;t[$]<=c?d=$:f=$}const u=t[f]-t[d],w=u===0?0:(c-t[d])/u,[k,I]=e[d],[A,M]=e[f];return[k+(A-k)*w,I+(M-I)*w]}function lB(){const e=document.createElement("div");return e.style.cssText=`
    width: 14px; height: 14px; border-radius: 50%;
    background: #2563eb; border: 2.5px solid #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.5);
    pointer-events: none;
  `,e}function uB({route:e}){const{current:t}=ep(),[i,a]=ne.useState(0),c=ne.useRef(null),d=ne.useRef(null);ne.useEffect(()=>{d.current=oB(e.coordinates),a(0)},[e]),ne.useEffect(()=>{if(!t)return;const M=t.getMap(),$=lB(),H=new eu.Marker({element:$,anchor:"center"});return e.coordinates.length>0&&H.setLngLat(e.coordinates[0]).addTo(M),c.current=H,()=>{H.remove(),c.current=null}},[t,e]),ne.useEffect(()=>{if(!c.current||!d.current||e.coordinates.length===0)return;const{cumulative:M,total:$}=d.current,H=aB(e.coordinates,M,$,i);c.current.setLngLat(H)},[i,e]);const f=i*e.distanceMiles,u=i*e.durationMinutes,w=Math.round(u),k=Math.floor(w/60),I=w%60,A=k>0?`${k}h ${I}m`:`${w}m`;return Ae.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[Ae.jsxs("div",{style:{position:"relative",height:20,display:"flex",alignItems:"center"},children:[Ae.jsx("div",{style:{position:"absolute",left:0,right:0,height:3,borderRadius:2,background:"#e2e8f0"}}),Ae.jsx("div",{style:{position:"absolute",left:0,height:3,borderRadius:2,background:"#3b82f6",width:`${i*100}%`,transition:"width 0.05s"}}),Ae.jsx("input",{type:"range",min:0,max:1e3,value:Math.round(i*1e3),onChange:M=>a(Number(M.target.value)/1e3),style:{position:"absolute",left:0,right:0,width:"100%",opacity:0,cursor:"pointer",margin:0,height:20}}),Ae.jsx("div",{style:{position:"absolute",left:`calc(${i*100}% - 6px)`,width:12,height:12,borderRadius:"50%",background:"#3b82f6",border:"2px solid #fff",boxShadow:"0 1px 4px rgba(0,0,0,0.4)",pointerEvents:"none",transition:"left 0.05s"}})]}),Ae.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[Ae.jsxs("span",{style:{fontSize:11,color:"#64748b"},children:[f.toFixed(2)," ",Ae.jsxs("span",{style:{color:"#94a3b8"},children:["/ ",e.distanceMiles.toFixed(2)," mi"]})]}),Ae.jsxs("span",{style:{fontSize:11,color:"#64748b"},children:[A," ",Ae.jsx("span",{style:{color:"#94a3b8"},children:"elapsed"})]})]})]})}const _C=e=>e,cB=()=>{let e=_C;return{configure(t){e=t},generate(t){return e(t)},reset(){e=_C}}},hB=cB();function pu(e,...t){const i=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(a=>i.searchParams.append("args[]",a)),`Minified MUI error #${e}; visit ${i} for the full message.`}function Ar(e){if(typeof e!="string")throw new Error(pu(7));return e.charAt(0).toUpperCase()+e.slice(1)}function sM(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(i=sM(e[t]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function Ir(){for(var e,t,i=0,a="",c=arguments.length;i<c;i++)(e=arguments[i])&&(t=sM(e))&&(a&&(a+=" "),a+=t);return a}function wh(e,t,i=void 0){const a={};for(const c in e){const d=e[c];let f="",u=!0;for(let w=0;w<d.length;w+=1){const k=d[w];k&&(f+=(u===!0?"":" ")+t(k),u=!1,i&&i[k]&&(f+=" "+i[k]))}a[c]=f}return a}var oM={exports:{}},xn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=Symbol.for("react.transitional.element"),xb=Symbol.for("react.portal"),fy=Symbol.for("react.fragment"),py=Symbol.for("react.strict_mode"),my=Symbol.for("react.profiler"),gy=Symbol.for("react.consumer"),yy=Symbol.for("react.context"),_y=Symbol.for("react.forward_ref"),vy=Symbol.for("react.suspense"),xy=Symbol.for("react.suspense_list"),by=Symbol.for("react.memo"),wy=Symbol.for("react.lazy"),dB=Symbol.for("react.view_transition"),fB=Symbol.for("react.client.reference");function Os(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case vb:switch(e=e.type,e){case fy:case my:case py:case vy:case xy:case dB:return e;default:switch(e=e&&e.$$typeof,e){case yy:case _y:case wy:case by:return e;case gy:return e;default:return t}}case xb:return t}}}xn.ContextConsumer=gy;xn.ContextProvider=yy;xn.Element=vb;xn.ForwardRef=_y;xn.Fragment=fy;xn.Lazy=wy;xn.Memo=by;xn.Portal=xb;xn.Profiler=my;xn.StrictMode=py;xn.Suspense=vy;xn.SuspenseList=xy;xn.isContextConsumer=function(e){return Os(e)===gy};xn.isContextProvider=function(e){return Os(e)===yy};xn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===vb};xn.isForwardRef=function(e){return Os(e)===_y};xn.isFragment=function(e){return Os(e)===fy};xn.isLazy=function(e){return Os(e)===wy};xn.isMemo=function(e){return Os(e)===by};xn.isPortal=function(e){return Os(e)===xb};xn.isProfiler=function(e){return Os(e)===my};xn.isStrictMode=function(e){return Os(e)===py};xn.isSuspense=function(e){return Os(e)===vy};xn.isSuspenseList=function(e){return Os(e)===xy};xn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fy||e===my||e===py||e===vy||e===xy||typeof e=="object"&&e!==null&&(e.$$typeof===wy||e.$$typeof===by||e.$$typeof===yy||e.$$typeof===gy||e.$$typeof===_y||e.$$typeof===fB||e.getModuleId!==void 0)};xn.typeOf=Os;oM.exports=xn;var aM=oM.exports;function Wo(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function lM(e){if(ne.isValidElement(e)||aM.isValidElementType(e)||!Wo(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=lM(e[i])}),t}function as(e,t,i={clone:!0}){const a=i.clone?{...e}:e;return Wo(e)&&Wo(t)&&Object.keys(t).forEach(c=>{ne.isValidElement(t[c])||aM.isValidElementType(t[c])?a[c]=t[c]:Wo(t[c])&&Object.prototype.hasOwnProperty.call(e,c)&&Wo(e[c])?a[c]=as(e[c],t[c],i):i.clone?a[c]=Wo(t[c])?lM(t[c]):t[c]:a[c]=t[c]}),a}function gf(e,t){return t?as(e,t,{clone:!1}):e}function vC(e,t){if(!e.containerQueries)return t;const i=Object.keys(t).filter(a=>a.startsWith("@container")).sort((a,c)=>{var f,u;const d=/min-width:\s*([0-9.]+)/;return+(((f=a.match(d))==null?void 0:f[1])||0)-+(((u=c.match(d))==null?void 0:u[1])||0)});return i.length?i.reduce((a,c)=>{const d=t[c];return delete a[c],a[c]=d,a},{...t}):t}function pB(e,t){return t==="@"||t.startsWith("@")&&(e.some(i=>t.startsWith(`@${i}`))||!!t.match(/^@\d/))}function mB(e,t){const i=t.match(/^@([^/]+)?\/?(.+)?$/);if(!i)return null;const[,a,c]=i,d=Number.isNaN(+a)?a||0:+a;return e.containerQueries(c).up(d)}function gB(e){const t=(d,f)=>d.replace("@media",f?`@container ${f}`:"@container");function i(d,f){d.up=(...u)=>t(e.breakpoints.up(...u),f),d.down=(...u)=>t(e.breakpoints.down(...u),f),d.between=(...u)=>t(e.breakpoints.between(...u),f),d.only=(...u)=>t(e.breakpoints.only(...u),f),d.not=(...u)=>{const w=t(e.breakpoints.not(...u),f);return w.includes("not all and")?w.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):w}}const a={},c=d=>(i(a,d),a);return i(c),{...e,containerQueries:c}}const Sy={xs:0,sm:600,md:900,lg:1200,xl:1536},xC={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Sy[e]}px)`},yB={containerQueries:e=>({up:t=>{let i=typeof t=="number"?t:Sy[t]||t;return typeof i=="number"&&(i=`${i}px`),e?`@container ${e} (min-width:${i})`:`@container (min-width:${i})`}})};function ea(e,t,i){const a=e.theme||{};if(Array.isArray(t)){const d=a.breakpoints||xC;return t.reduce((f,u,w)=>(f[d.up(d.keys[w])]=i(t[w]),f),{})}if(typeof t=="object"){const d=a.breakpoints||xC;return Object.keys(t).reduce((f,u)=>{if(pB(d.keys,u)){const w=mB(a.containerQueries?a:yB,u);w&&(f[w]=i(t[u],u))}else if(Object.keys(d.values||Sy).includes(u)){const w=d.up(u);f[w]=i(t[u],u)}else{const w=u;f[w]=t[w]}return f},{})}return i(t)}function _B(e={}){var i;return((i=e.keys)==null?void 0:i.reduce((a,c)=>{const d=e.up(c);return a[d]={},a},{}))||{}}function bC(e,t){return e.reduce((i,a)=>{const c=i[a];return(!c||Object.keys(c).length===0)&&delete i[a],i},t)}function Ty(e,t,i=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&i){const a=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(a!=null)return a}return t.split(".").reduce((a,c)=>a&&a[c]!=null?a[c]:null,e)}function Ng(e,t,i,a=i){let c;return typeof e=="function"?c=e(i):Array.isArray(e)?c=e[i]||a:c=Ty(e,i)||a,t&&(c=t(c,a,e)),c}function tr(e){const{prop:t,cssProperty:i=e.prop,themeKey:a,transform:c}=e,d=f=>{if(f[t]==null)return null;const u=f[t],w=f.theme,k=Ty(w,a)||{};return ea(f,u,A=>{let M=Ng(k,c,A);return A===M&&typeof A=="string"&&(M=Ng(k,c,`${t}${A==="default"?"":Ar(A)}`,A)),i===!1?M:{[i]:M}})};return d.propTypes={},d.filterProps=[t],d}function vB(e){const t={};return i=>(t[i]===void 0&&(t[i]=e(i)),t[i])}const xB={m:"margin",p:"padding"},bB={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},wC={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},wB=vB(e=>{if(e.length>2)if(wC[e])e=wC[e];else return[e];const[t,i]=e.split(""),a=xB[t],c=bB[i]||"";return Array.isArray(c)?c.map(d=>a+d):[a+c]}),bb=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],wb=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...bb,...wb];function op(e,t,i,a){const c=Ty(e,t,!0)??i;return typeof c=="number"||typeof c=="string"?d=>typeof d=="string"?d:typeof c=="string"?c.startsWith("var(")&&d===0?0:c.startsWith("var(")&&d===1?c:`calc(${d} * ${c})`:c*d:Array.isArray(c)?d=>{if(typeof d=="string")return d;const f=Math.abs(d),u=c[f];return d>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof c=="function"?c:()=>{}}function Sb(e){return op(e,"spacing",8)}function ap(e,t){return typeof t=="string"||t==null?t:e(t)}function SB(e,t){return i=>e.reduce((a,c)=>(a[c]=ap(t,i),a),{})}function TB(e,t,i,a){if(!t.includes(i))return null;const c=wB(i),d=SB(c,a),f=e[i];return ea(e,f,d)}function uM(e,t){const i=Sb(e.theme);return Object.keys(e).map(a=>TB(e,t,a,i)).reduce(gf,{})}function Gn(e){return uM(e,bb)}Gn.propTypes={};Gn.filterProps=bb;function Hn(e){return uM(e,wb)}Hn.propTypes={};Hn.filterProps=wb;function Cy(...e){const t=e.reduce((a,c)=>(c.filterProps.forEach(d=>{a[d]=c}),a),{}),i=a=>Object.keys(a).reduce((c,d)=>t[d]?gf(c,t[d](a)):c,{});return i.propTypes={},i.filterProps=e.reduce((a,c)=>a.concat(c.filterProps),[]),i}function Es(e){return typeof e!="number"?e:`${e}px solid`}function Bs(e,t){return tr({prop:e,themeKey:"borders",transform:t})}const CB=Bs("border",Es),kB=Bs("borderTop",Es),PB=Bs("borderRight",Es),EB=Bs("borderBottom",Es),IB=Bs("borderLeft",Es),MB=Bs("borderColor"),AB=Bs("borderTopColor"),zB=Bs("borderRightColor"),DB=Bs("borderBottomColor"),RB=Bs("borderLeftColor"),LB=Bs("outline",Es),FB=Bs("outlineColor"),ky=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=op(e.theme,"shape.borderRadius",4),i=a=>({borderRadius:ap(t,a)});return ea(e,e.borderRadius,i)}return null};ky.propTypes={};ky.filterProps=["borderRadius"];Cy(CB,kB,PB,EB,IB,MB,AB,zB,DB,RB,ky,LB,FB);const Py=e=>{if(e.gap!==void 0&&e.gap!==null){const t=op(e.theme,"spacing",8),i=a=>({gap:ap(t,a)});return ea(e,e.gap,i)}return null};Py.propTypes={};Py.filterProps=["gap"];const Ey=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=op(e.theme,"spacing",8),i=a=>({columnGap:ap(t,a)});return ea(e,e.columnGap,i)}return null};Ey.propTypes={};Ey.filterProps=["columnGap"];const Iy=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=op(e.theme,"spacing",8),i=a=>({rowGap:ap(t,a)});return ea(e,e.rowGap,i)}return null};Iy.propTypes={};Iy.filterProps=["rowGap"];const OB=tr({prop:"gridColumn"}),BB=tr({prop:"gridRow"}),VB=tr({prop:"gridAutoFlow"}),NB=tr({prop:"gridAutoColumns"}),jB=tr({prop:"gridAutoRows"}),$B=tr({prop:"gridTemplateColumns"}),UB=tr({prop:"gridTemplateRows"}),WB=tr({prop:"gridTemplateAreas"}),qB=tr({prop:"gridArea"});Cy(Py,Ey,Iy,OB,BB,VB,NB,jB,$B,UB,WB,qB);function Kc(e,t){return t==="grey"?t:e}const GB=tr({prop:"color",themeKey:"palette",transform:Kc}),HB=tr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Kc}),ZB=tr({prop:"backgroundColor",themeKey:"palette",transform:Kc});Cy(GB,HB,ZB);function is(e){return e<=1&&e!==0?`${e*100}%`:e}const XB=tr({prop:"width",transform:is}),Tb=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=i=>{var c,d,f,u,w;const a=((f=(d=(c=e.theme)==null?void 0:c.breakpoints)==null?void 0:d.values)==null?void 0:f[i])||Sy[i];return a?((w=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:w.unit)!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:is(i)}};return ea(e,e.maxWidth,t)}return null};Tb.filterProps=["maxWidth"];const KB=tr({prop:"minWidth",transform:is}),YB=tr({prop:"height",transform:is}),JB=tr({prop:"maxHeight",transform:is}),QB=tr({prop:"minHeight",transform:is});tr({prop:"size",cssProperty:"width",transform:is});tr({prop:"size",cssProperty:"height",transform:is});const e6=tr({prop:"boxSizing"});Cy(XB,Tb,KB,YB,JB,QB,e6);const My={border:{themeKey:"borders",transform:Es},borderTop:{themeKey:"borders",transform:Es},borderRight:{themeKey:"borders",transform:Es},borderBottom:{themeKey:"borders",transform:Es},borderLeft:{themeKey:"borders",transform:Es},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Es},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ky},color:{themeKey:"palette",transform:Kc},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Kc},backgroundColor:{themeKey:"palette",transform:Kc},p:{style:Hn},pt:{style:Hn},pr:{style:Hn},pb:{style:Hn},pl:{style:Hn},px:{style:Hn},py:{style:Hn},padding:{style:Hn},paddingTop:{style:Hn},paddingRight:{style:Hn},paddingBottom:{style:Hn},paddingLeft:{style:Hn},paddingX:{style:Hn},paddingY:{style:Hn},paddingInline:{style:Hn},paddingInlineStart:{style:Hn},paddingInlineEnd:{style:Hn},paddingBlock:{style:Hn},paddingBlockStart:{style:Hn},paddingBlockEnd:{style:Hn},m:{style:Gn},mt:{style:Gn},mr:{style:Gn},mb:{style:Gn},ml:{style:Gn},mx:{style:Gn},my:{style:Gn},margin:{style:Gn},marginTop:{style:Gn},marginRight:{style:Gn},marginBottom:{style:Gn},marginLeft:{style:Gn},marginX:{style:Gn},marginY:{style:Gn},marginInline:{style:Gn},marginInlineStart:{style:Gn},marginInlineEnd:{style:Gn},marginBlock:{style:Gn},marginBlockStart:{style:Gn},marginBlockEnd:{style:Gn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Py},rowGap:{style:Iy},columnGap:{style:Ey},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:is},maxWidth:{style:Tb},minWidth:{transform:is},height:{transform:is},maxHeight:{transform:is},minHeight:{transform:is},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function t6(...e){const t=e.reduce((a,c)=>a.concat(Object.keys(c)),[]),i=new Set(t);return e.every(a=>i.size===Object.keys(a).length)}function n6(e,t){return typeof e=="function"?e(t):e}function r6(){function e(i,a,c,d){const f={[i]:a,theme:c},u=d[i];if(!u)return{[i]:a};const{cssProperty:w=i,themeKey:k,transform:I,style:A}=u;if(a==null)return null;if(k==="typography"&&a==="inherit")return{[i]:a};const M=Ty(c,k)||{};return A?A(f):ea(f,a,H=>{let Y=Ng(M,I,H);return H===Y&&typeof H=="string"&&(Y=Ng(M,I,`${i}${H==="default"?"":Ar(H)}`,H)),w===!1?Y:{[w]:Y}})}function t(i){const{sx:a,theme:c={},nested:d}=i||{};if(!a)return null;const f=c.unstable_sxConfig??My;function u(w){let k=w;if(typeof w=="function")k=w(c);else if(typeof w!="object")return w;if(!k)return null;const I=_B(c.breakpoints),A=Object.keys(I);let M=I;return Object.keys(k).forEach($=>{const H=n6(k[$],c);if(H!=null)if(typeof H=="object")if(f[$])M=gf(M,e($,H,c,f));else{const Y=ea({theme:c},H,ae=>({[$]:ae}));t6(Y,H)?M[$]=t({sx:H,theme:c,nested:!0}):M=gf(M,Y)}else M=gf(M,e($,H,c,f))}),!d&&c.modularCssLayers?{"@layer sx":vC(c,bC(A,M))}:vC(c,bC(A,M))}return Array.isArray(a)?a.map(u):u(a)}return t}const uh=r6();uh.filterProps=["sx"];function jg(){return jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},jg.apply(null,arguments)}function i6(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function s6(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var o6=function(){function e(i){var a=this;this._insertTag=function(c){var d;a.tags.length===0?a.insertionPoint?d=a.insertionPoint.nextSibling:a.prepend?d=a.container.firstChild:d=a.before:d=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,d),a.tags.push(c)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(s6(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=i6(c);try{d.insertRule(a,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){var c;return(c=a.parentNode)==null?void 0:c.removeChild(a)}),this.tags=[],this.ctr=0},e}(),ii="-ms-",$g="-moz-",nn="-webkit-",cM="comm",Cb="rule",kb="decl",a6="@import",hM="@keyframes",l6="@layer",u6=Math.abs,Ay=String.fromCharCode,c6=Object.assign;function h6(e,t){return Ur(e,0)^45?(((t<<2^Ur(e,0))<<2^Ur(e,1))<<2^Ur(e,2))<<2^Ur(e,3):0}function dM(e){return e.trim()}function d6(e,t){return(e=t.exec(e))?e[0]:e}function rn(e,t,i){return e.replace(t,i)}function Tx(e,t){return e.indexOf(t)}function Ur(e,t){return e.charCodeAt(t)|0}function $f(e,t,i){return e.slice(t,i)}function co(e){return e.length}function Pb(e){return e.length}function Fm(e,t){return t.push(e),e}function f6(e,t){return e.map(t).join("")}var zy=1,ch=1,fM=0,Ui=0,ur=0,Sh="";function Dy(e,t,i,a,c,d,f){return{value:e,root:t,parent:i,type:a,props:c,children:d,line:zy,column:ch,length:f,return:""}}function Ud(e,t){return c6(Dy("",null,null,"",null,null,0),e,{length:-e.length},t)}function p6(){return ur}function m6(){return ur=Ui>0?Ur(Sh,--Ui):0,ch--,ur===10&&(ch=1,zy--),ur}function ls(){return ur=Ui<fM?Ur(Sh,Ui++):0,ch++,ur===10&&(ch=1,zy++),ur}function xo(){return Ur(Sh,Ui)}function sg(){return Ui}function lp(e,t){return $f(Sh,e,t)}function Uf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function pM(e){return zy=ch=1,fM=co(Sh=e),Ui=0,[]}function mM(e){return Sh="",e}function og(e){return dM(lp(Ui-1,Cx(e===91?e+2:e===40?e+1:e)))}function g6(e){for(;(ur=xo())&&ur<33;)ls();return Uf(e)>2||Uf(ur)>3?"":" "}function y6(e,t){for(;--t&&ls()&&!(ur<48||ur>102||ur>57&&ur<65||ur>70&&ur<97););return lp(e,sg()+(t<6&&xo()==32&&ls()==32))}function Cx(e){for(;ls();)switch(ur){case e:return Ui;case 34:case 39:e!==34&&e!==39&&Cx(ur);break;case 40:e===41&&Cx(e);break;case 92:ls();break}return Ui}function _6(e,t){for(;ls()&&e+ur!==57;)if(e+ur===84&&xo()===47)break;return"/*"+lp(t,Ui-1)+"*"+Ay(e===47?e:ls())}function v6(e){for(;!Uf(xo());)ls();return lp(e,Ui)}function x6(e){return mM(ag("",null,null,null,[""],e=pM(e),0,[0],e))}function ag(e,t,i,a,c,d,f,u,w){for(var k=0,I=0,A=f,M=0,$=0,H=0,Y=1,ae=1,j=1,W=0,G="",ee=c,de=d,he=a,ye=G;ae;)switch(H=W,W=ls()){case 40:if(H!=108&&Ur(ye,A-1)==58){Tx(ye+=rn(og(W),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:ye+=og(W);break;case 9:case 10:case 13:case 32:ye+=g6(H);break;case 92:ye+=y6(sg()-1,7);continue;case 47:switch(xo()){case 42:case 47:Fm(b6(_6(ls(),sg()),t,i),w);break;default:ye+="/"}break;case 123*Y:u[k++]=co(ye)*j;case 125*Y:case 59:case 0:switch(W){case 0:case 125:ae=0;case 59+I:j==-1&&(ye=rn(ye,/\f/g,"")),$>0&&co(ye)-A&&Fm($>32?TC(ye+";",a,i,A-1):TC(rn(ye," ","")+";",a,i,A-2),w);break;case 59:ye+=";";default:if(Fm(he=SC(ye,t,i,k,I,c,u,G,ee=[],de=[],A),d),W===123)if(I===0)ag(ye,t,he,he,ee,d,A,u,de);else switch(M===99&&Ur(ye,3)===110?100:M){case 100:case 108:case 109:case 115:ag(e,he,he,a&&Fm(SC(e,he,he,0,0,c,u,G,c,ee=[],A),de),c,de,A,u,a?ee:de);break;default:ag(ye,he,he,he,[""],de,0,u,de)}}k=I=$=0,Y=j=1,G=ye="",A=f;break;case 58:A=1+co(ye),$=H;default:if(Y<1){if(W==123)--Y;else if(W==125&&Y++==0&&m6()==125)continue}switch(ye+=Ay(W),W*Y){case 38:j=I>0?1:(ye+="\f",-1);break;case 44:u[k++]=(co(ye)-1)*j,j=1;break;case 64:xo()===45&&(ye+=og(ls())),M=xo(),I=A=co(G=ye+=v6(sg())),W++;break;case 45:H===45&&co(ye)==2&&(Y=0)}}return d}function SC(e,t,i,a,c,d,f,u,w,k,I){for(var A=c-1,M=c===0?d:[""],$=Pb(M),H=0,Y=0,ae=0;H<a;++H)for(var j=0,W=$f(e,A+1,A=u6(Y=f[H])),G=e;j<$;++j)(G=dM(Y>0?M[j]+" "+W:rn(W,/&\f/g,M[j])))&&(w[ae++]=G);return Dy(e,t,i,c===0?Cb:u,w,k,I)}function b6(e,t,i){return Dy(e,t,i,cM,Ay(p6()),$f(e,2,-2),0)}function TC(e,t,i,a){return Dy(e,t,i,kb,$f(e,0,a),$f(e,a+1,-1),a)}function Yc(e,t){for(var i="",a=Pb(e),c=0;c<a;c++)i+=t(e[c],c,e,t)||"";return i}function w6(e,t,i,a){switch(e.type){case l6:if(e.children.length)break;case a6:case kb:return e.return=e.return||e.value;case cM:return"";case hM:return e.return=e.value+"{"+Yc(e.children,a)+"}";case Cb:e.value=e.props.join(",")}return co(i=Yc(e.children,a))?e.return=e.value+"{"+i+"}":""}function S6(e){var t=Pb(e);return function(i,a,c,d){for(var f="",u=0;u<t;u++)f+=e[u](i,a,c,d)||"";return f}}function T6(e){return function(t){t.root||(t=t.return)&&e(t)}}function gM(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var C6=function(t,i,a){for(var c=0,d=0;c=d,d=xo(),c===38&&d===12&&(i[a]=1),!Uf(d);)ls();return lp(t,Ui)},k6=function(t,i){var a=-1,c=44;do switch(Uf(c)){case 0:c===38&&xo()===12&&(i[a]=1),t[a]+=C6(Ui-1,i,a);break;case 2:t[a]+=og(c);break;case 4:if(c===44){t[++a]=xo()===58?"&\f":"",i[a]=t[a].length;break}default:t[a]+=Ay(c)}while(c=ls());return t},P6=function(t,i){return mM(k6(pM(t),i))},CC=new WeakMap,E6=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!CC.get(a))&&!c){CC.set(t,!0);for(var d=[],f=P6(i,d),u=a.props,w=0,k=0;w<f.length;w++)for(var I=0;I<u.length;I++,k++)t.props[k]=d[w]?f[w].replace(/&\f/g,u[I]):u[I]+" "+f[w]}}},I6=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function yM(e,t){switch(h6(e,t)){case 5103:return nn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return nn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return nn+e+$g+e+ii+e+e;case 6828:case 4268:return nn+e+ii+e+e;case 6165:return nn+e+ii+"flex-"+e+e;case 5187:return nn+e+rn(e,/(\w+).+(:[^]+)/,nn+"box-$1$2"+ii+"flex-$1$2")+e;case 5443:return nn+e+ii+"flex-item-"+rn(e,/flex-|-self/,"")+e;case 4675:return nn+e+ii+"flex-line-pack"+rn(e,/align-content|flex-|-self/,"")+e;case 5548:return nn+e+ii+rn(e,"shrink","negative")+e;case 5292:return nn+e+ii+rn(e,"basis","preferred-size")+e;case 6060:return nn+"box-"+rn(e,"-grow","")+nn+e+ii+rn(e,"grow","positive")+e;case 4554:return nn+rn(e,/([^-])(transform)/g,"$1"+nn+"$2")+e;case 6187:return rn(rn(rn(e,/(zoom-|grab)/,nn+"$1"),/(image-set)/,nn+"$1"),e,"")+e;case 5495:case 3959:return rn(e,/(image-set\([^]*)/,nn+"$1$`$1");case 4968:return rn(rn(e,/(.+:)(flex-)?(.*)/,nn+"box-pack:$3"+ii+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+nn+e+e;case 4095:case 3583:case 4068:case 2532:return rn(e,/(.+)-inline(.+)/,nn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(co(e)-1-t>6)switch(Ur(e,t+1)){case 109:if(Ur(e,t+4)!==45)break;case 102:return rn(e,/(.+:)(.+)-([^]+)/,"$1"+nn+"$2-$3$1"+$g+(Ur(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Tx(e,"stretch")?yM(rn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ur(e,t+1)!==115)break;case 6444:switch(Ur(e,co(e)-3-(~Tx(e,"!important")&&10))){case 107:return rn(e,":",":"+nn)+e;case 101:return rn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+nn+(Ur(e,14)===45?"inline-":"")+"box$3$1"+nn+"$2$3$1"+ii+"$2box$3")+e}break;case 5936:switch(Ur(e,t+11)){case 114:return nn+e+ii+rn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return nn+e+ii+rn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return nn+e+ii+rn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return nn+e+ii+e+e}return e}var M6=function(t,i,a,c){if(t.length>-1&&!t.return)switch(t.type){case kb:t.return=yM(t.value,t.length);break;case hM:return Yc([Ud(t,{value:rn(t.value,"@","@"+nn)})],c);case Cb:if(t.length)return f6(t.props,function(d){switch(d6(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Yc([Ud(t,{props:[rn(d,/:(read-\w+)/,":"+$g+"$1")]})],c);case"::placeholder":return Yc([Ud(t,{props:[rn(d,/:(plac\w+)/,":"+nn+"input-$1")]}),Ud(t,{props:[rn(d,/:(plac\w+)/,":"+$g+"$1")]}),Ud(t,{props:[rn(d,/:(plac\w+)/,ii+"input-$1")]})],c)}return""})}},A6=[M6],z6=function(t){var i=t.key;if(i==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(Y){var ae=Y.getAttribute("data-emotion");ae.indexOf(" ")!==-1&&(document.head.appendChild(Y),Y.setAttribute("data-s",""))})}var c=t.stylisPlugins||A6,d={},f,u=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(Y){for(var ae=Y.getAttribute("data-emotion").split(" "),j=1;j<ae.length;j++)d[ae[j]]=!0;u.push(Y)});var w,k=[E6,I6];{var I,A=[w6,T6(function(Y){I.insert(Y)})],M=S6(k.concat(c,A)),$=function(ae){return Yc(x6(ae),M)};w=function(ae,j,W,G){I=W,$(ae?ae+"{"+j.styles+"}":j.styles),G&&(H.inserted[j.name]=!0)}}var H={key:i,sheet:new o6({key:i,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:w};return H.sheet.hydrate(u),H},_M={exports:{}},hn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zr=typeof Symbol=="function"&&Symbol.for,Eb=zr?Symbol.for("react.element"):60103,Ib=zr?Symbol.for("react.portal"):60106,Ry=zr?Symbol.for("react.fragment"):60107,Ly=zr?Symbol.for("react.strict_mode"):60108,Fy=zr?Symbol.for("react.profiler"):60114,Oy=zr?Symbol.for("react.provider"):60109,By=zr?Symbol.for("react.context"):60110,Mb=zr?Symbol.for("react.async_mode"):60111,Vy=zr?Symbol.for("react.concurrent_mode"):60111,Ny=zr?Symbol.for("react.forward_ref"):60112,jy=zr?Symbol.for("react.suspense"):60113,D6=zr?Symbol.for("react.suspense_list"):60120,$y=zr?Symbol.for("react.memo"):60115,Uy=zr?Symbol.for("react.lazy"):60116,R6=zr?Symbol.for("react.block"):60121,L6=zr?Symbol.for("react.fundamental"):60117,F6=zr?Symbol.for("react.responder"):60118,O6=zr?Symbol.for("react.scope"):60119;function fs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Eb:switch(e=e.type,e){case Mb:case Vy:case Ry:case Fy:case Ly:case jy:return e;default:switch(e=e&&e.$$typeof,e){case By:case Ny:case Uy:case $y:case Oy:return e;default:return t}}case Ib:return t}}}function vM(e){return fs(e)===Vy}hn.AsyncMode=Mb;hn.ConcurrentMode=Vy;hn.ContextConsumer=By;hn.ContextProvider=Oy;hn.Element=Eb;hn.ForwardRef=Ny;hn.Fragment=Ry;hn.Lazy=Uy;hn.Memo=$y;hn.Portal=Ib;hn.Profiler=Fy;hn.StrictMode=Ly;hn.Suspense=jy;hn.isAsyncMode=function(e){return vM(e)||fs(e)===Mb};hn.isConcurrentMode=vM;hn.isContextConsumer=function(e){return fs(e)===By};hn.isContextProvider=function(e){return fs(e)===Oy};hn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Eb};hn.isForwardRef=function(e){return fs(e)===Ny};hn.isFragment=function(e){return fs(e)===Ry};hn.isLazy=function(e){return fs(e)===Uy};hn.isMemo=function(e){return fs(e)===$y};hn.isPortal=function(e){return fs(e)===Ib};hn.isProfiler=function(e){return fs(e)===Fy};hn.isStrictMode=function(e){return fs(e)===Ly};hn.isSuspense=function(e){return fs(e)===jy};hn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ry||e===Vy||e===Fy||e===Ly||e===jy||e===D6||typeof e=="object"&&e!==null&&(e.$$typeof===Uy||e.$$typeof===$y||e.$$typeof===Oy||e.$$typeof===By||e.$$typeof===Ny||e.$$typeof===L6||e.$$typeof===F6||e.$$typeof===O6||e.$$typeof===R6)};hn.typeOf=fs;_M.exports=hn;var B6=_M.exports,xM=B6,V6={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},N6={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},bM={};bM[xM.ForwardRef]=V6;bM[xM.Memo]=N6;var j6=!0;function wM(e,t,i){var a="";return i.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):c&&(a+=c+" ")}),a}var Ab=function(t,i,a){var c=t.key+"-"+i.name;(a===!1||j6===!1)&&t.registered[c]===void 0&&(t.registered[c]=i.styles)},SM=function(t,i,a){Ab(t,i,a);var c=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var d=i;do t.insert(i===d?"."+c:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function $6(e){for(var t=0,i,a=0,c=e.length;c>=4;++a,c-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var U6={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},W6=/[A-Z]|^ms/g,q6=/_EMO_([^_]+?)_([^]*?)_EMO_/g,TM=function(t){return t.charCodeAt(1)===45},kC=function(t){return t!=null&&typeof t!="boolean"},t0=gM(function(e){return TM(e)?e:e.replace(W6,"-$&").toLowerCase()}),PC=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(q6,function(a,c,d){return ho={name:c,styles:d,next:ho},c})}return U6[t]!==1&&!TM(t)&&typeof i=="number"&&i!==0?i+"px":i};function Wf(e,t,i){if(i==null)return"";var a=i;if(a.__emotion_styles!==void 0)return a;switch(typeof i){case"boolean":return"";case"object":{var c=i;if(c.anim===1)return ho={name:c.name,styles:c.styles,next:ho},c.name;var d=i;if(d.styles!==void 0){var f=d.next;if(f!==void 0)for(;f!==void 0;)ho={name:f.name,styles:f.styles,next:ho},f=f.next;var u=d.styles+";";return u}return G6(e,t,i)}case"function":{if(e!==void 0){var w=ho,k=i(e);return ho=w,Wf(e,t,k)}break}}var I=i;if(t==null)return I;var A=t[I];return A!==void 0?A:I}function G6(e,t,i){var a="";if(Array.isArray(i))for(var c=0;c<i.length;c++)a+=Wf(e,t,i[c])+";";else for(var d in i){var f=i[d];if(typeof f!="object"){var u=f;t!=null&&t[u]!==void 0?a+=d+"{"+t[u]+"}":kC(u)&&(a+=t0(d)+":"+PC(d,u)+";")}else if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var w=0;w<f.length;w++)kC(f[w])&&(a+=t0(d)+":"+PC(d,f[w])+";");else{var k=Wf(e,t,f);switch(d){case"animation":case"animationName":{a+=t0(d)+":"+k+";";break}default:a+=d+"{"+k+"}"}}}return a}var EC=/label:\s*([^\s;{]+)\s*(;|$)/g,ho;function Wy(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,c="";ho=void 0;var d=e[0];if(d==null||d.raw===void 0)a=!1,c+=Wf(i,t,d);else{var f=d;c+=f[0]}for(var u=1;u<e.length;u++)if(c+=Wf(i,t,e[u]),a){var w=d;c+=w[u]}EC.lastIndex=0;for(var k="",I;(I=EC.exec(c))!==null;)k+="-"+I[1];var A=$6(c)+k;return{name:A,styles:c,next:ho}}var H6=function(t){return t()},Z6=l0.useInsertionEffect?l0.useInsertionEffect:!1,CM=Z6||H6,kM=ne.createContext(typeof HTMLElement<"u"?z6({key:"css"}):null);kM.Provider;var PM=function(t){return ne.forwardRef(function(i,a){var c=ne.useContext(kM);return t(i,c,a)})},zb=ne.createContext({}),Db={}.hasOwnProperty,kx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",X6=function(t,i){var a={};for(var c in i)Db.call(i,c)&&(a[c]=i[c]);return a[kx]=t,a},K6=function(t){var i=t.cache,a=t.serialized,c=t.isStringTag;return Ab(i,a,c),CM(function(){return SM(i,a,c)}),null},Y6=PM(function(e,t,i){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var c=e[kx],d=[a],f="";typeof e.className=="string"?f=wM(t.registered,d,e.className):e.className!=null&&(f=e.className+" ");var u=Wy(d,void 0,ne.useContext(zb));f+=t.key+"-"+u.name;var w={};for(var k in e)Db.call(e,k)&&k!=="css"&&k!==kx&&(w[k]=e[k]);return w.className=f,i&&(w.ref=i),ne.createElement(ne.Fragment,null,ne.createElement(K6,{cache:t,serialized:u,isStringTag:typeof c=="string"}),ne.createElement(c,w))}),J6=Y6,IC=function(t,i){var a=arguments;if(i==null||!Db.call(i,"css"))return ne.createElement.apply(void 0,a);var c=a.length,d=new Array(c);d[0]=J6,d[1]=X6(t,i);for(var f=2;f<c;f++)d[f]=a[f];return ne.createElement.apply(null,d)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(IC||(IC={}));function Rb(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Wy(t)}function up(){var e=Rb.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Q6=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,eV=gM(function(e){return Q6.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),tV=eV,nV=function(t){return t!=="theme"},MC=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?tV:nV},AC=function(t,i,a){var c;if(i){var d=i.shouldForwardProp;c=t.__emotion_forwardProp&&d?function(f){return t.__emotion_forwardProp(f)&&d(f)}:d}return typeof c!="function"&&a&&(c=t.__emotion_forwardProp),c},rV=function(t){var i=t.cache,a=t.serialized,c=t.isStringTag;return Ab(i,a,c),CM(function(){return SM(i,a,c)}),null},iV=function e(t,i){var a=t.__emotion_real===t,c=a&&t.__emotion_base||t,d,f;i!==void 0&&(d=i.label,f=i.target);var u=AC(t,i,a),w=u||MC(c),k=!w("as");return function(){var I=arguments,A=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&A.push("label:"+d+";"),I[0]==null||I[0].raw===void 0)A.push.apply(A,I);else{var M=I[0];A.push(M[0]);for(var $=I.length,H=1;H<$;H++)A.push(I[H],M[H])}var Y=PM(function(ae,j,W){var G=k&&ae.as||c,ee="",de=[],he=ae;if(ae.theme==null){he={};for(var ye in ae)he[ye]=ae[ye];he.theme=ne.useContext(zb)}typeof ae.className=="string"?ee=wM(j.registered,de,ae.className):ae.className!=null&&(ee=ae.className+" ");var Ce=Wy(A.concat(de),j.registered,he);ee+=j.key+"-"+Ce.name,f!==void 0&&(ee+=" "+f);var Me=k&&u===void 0?MC(G):w,ze={};for(var Re in ae)k&&Re==="as"||Me(Re)&&(ze[Re]=ae[Re]);return ze.className=ee,W&&(ze.ref=W),ne.createElement(ne.Fragment,null,ne.createElement(rV,{cache:j,serialized:Ce,isStringTag:typeof G=="string"}),ne.createElement(G,ze))});return Y.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",Y.defaultProps=t.defaultProps,Y.__emotion_real=Y,Y.__emotion_base=c,Y.__emotion_styles=A,Y.__emotion_forwardProp=u,Object.defineProperty(Y,"toString",{value:function(){return"."+f}}),Y.withComponent=function(ae,j){var W=e(ae,jg({},i,j,{shouldForwardProp:AC(Y,j,!0)}));return W.apply(void 0,A)},Y}},sV=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Px=iV.bind(null);sV.forEach(function(e){Px[e]=Px(e)});function oV(e,t){return Px(e,t)}function aV(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const zC=[];function au(e){return zC[0]=e,Wy(zC)}const lV=e=>{const t=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return t.sort((i,a)=>i.val-a.val),t.reduce((i,a)=>({...i,[a.key]:a.val}),{})};function uV(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:a=5,...c}=e,d=lV(t),f=Object.keys(d);function u(M){return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${i})`}function w(M){return`@media (max-width:${(typeof t[M]=="number"?t[M]:M)-a/100}${i})`}function k(M,$){const H=f.indexOf($);return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${i}) and (max-width:${(H!==-1&&typeof t[f[H]]=="number"?t[f[H]]:$)-a/100}${i})`}function I(M){return f.indexOf(M)+1<f.length?k(M,f[f.indexOf(M)+1]):u(M)}function A(M){const $=f.indexOf(M);return $===0?u(f[1]):$===f.length-1?w(f[$]):k(M,f[f.indexOf(M)+1]).replace("@media","@media not all and")}return{keys:f,values:d,up:u,down:w,between:k,only:I,not:A,unit:i,...c}}const cV={borderRadius:4};function EM(e=8,t=Sb({spacing:e})){if(e.mui)return e;const i=(...a)=>(a.length===0?[1]:a).map(d=>{const f=t(d);return typeof f=="number"?`${f}px`:f}).join(" ");return i.mui=!0,i}function hV(e,t){var a;const i=this;if(i.vars){if(!((a=i.colorSchemes)!=null&&a[e])||typeof i.getColorSchemeSelector!="function")return{};let c=i.getColorSchemeSelector(e);return c==="&"?t:((c.includes("data-")||c.includes("."))&&(c=`*:where(${c.replace(/\s*&$/,"")}) &`),{[c]:t})}return i.palette.mode===e?t:{}}function Lb(e={},...t){const{breakpoints:i={},palette:a={},spacing:c,shape:d={},...f}=e,u=uV(i),w=EM(c);let k=as({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...a},spacing:w,shape:{...cV,...d}},f);return k=gB(k),k.applyStyles=hV,k=t.reduce((I,A)=>as(I,A),k),k.unstable_sxConfig={...My,...f==null?void 0:f.unstable_sxConfig},k.unstable_sx=function(A){return uh({sx:A,theme:this})},k}function dV(e){return Object.keys(e).length===0}function fV(e=null){const t=ne.useContext(zb);return!t||dV(t)?e:t}const pV=Lb();function mV(e=pV){return fV(e)}const gV={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function vu(e,t,i="Mui"){const a=gV[t];return a?`${i}-${a}`:`${hB.generate(e)}-${t}`}function xu(e,t,i="Mui"){const a={};return t.forEach(c=>{a[c]=vu(e,c,i)}),a}function IM(e){const{variants:t,...i}=e,a={variants:t,style:au(i),isProcessed:!0};return a.style===i||t&&t.forEach(c=>{typeof c.style!="function"&&(c.style=au(c.style))}),a}const yV=Lb();function n0(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function tu(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function _V(e){return e?(t,i)=>i[e]:null}function vV(e,t,i){e.theme=wV(e.theme)?i:e.theme[t]||e.theme}function lg(e,t,i){const a=typeof t=="function"?t(e):t;if(Array.isArray(a))return a.flatMap(c=>lg(e,c,i));if(Array.isArray(a==null?void 0:a.variants)){let c;if(a.isProcessed)c=i?tu(a.style,i):a.style;else{const{variants:d,...f}=a;c=i?tu(au(f),i):f}return MM(e,a.variants,[c],i)}return a!=null&&a.isProcessed?i?tu(au(a.style),i):a.style:i?tu(au(a),i):a}function MM(e,t,i=[],a=void 0){var d;let c;e:for(let f=0;f<t.length;f+=1){const u=t[f];if(typeof u.props=="function"){if(c??(c={...e,...e.ownerState,ownerState:e.ownerState}),!u.props(c))continue}else for(const w in u.props)if(e[w]!==u.props[w]&&((d=e.ownerState)==null?void 0:d[w])!==u.props[w])continue e;typeof u.style=="function"?(c??(c={...e,...e.ownerState,ownerState:e.ownerState}),i.push(a?tu(au(u.style(c)),a):u.style(c))):i.push(a?tu(au(u.style),a):u.style)}return i}function xV(e={}){const{themeId:t,defaultTheme:i=yV,rootShouldForwardProp:a=n0,slotShouldForwardProp:c=n0}=e;function d(u){vV(u,t,i)}return(u,w={})=>{aV(u,he=>he.filter(ye=>ye!==uh));const{name:k,slot:I,skipVariantsResolver:A,skipSx:M,overridesResolver:$=_V(TV(I)),...H}=w,Y=k&&k.startsWith("Mui")||I?"components":"custom",ae=A!==void 0?A:I&&I!=="Root"&&I!=="root"||!1,j=M||!1;let W=n0;I==="Root"||I==="root"?W=a:I?W=c:SV(u)&&(W=void 0);const G=oV(u,{shouldForwardProp:W,label:bV(),...H}),ee=he=>{if(he.__emotion_real===he)return he;if(typeof he=="function")return function(Ce){return lg(Ce,he,Ce.theme.modularCssLayers?Y:void 0)};if(Wo(he)){const ye=IM(he);return function(Me){return ye.variants?lg(Me,ye,Me.theme.modularCssLayers?Y:void 0):Me.theme.modularCssLayers?tu(ye.style,Y):ye.style}}return he},de=(...he)=>{const ye=[],Ce=he.map(ee),Me=[];if(ye.push(d),k&&$&&Me.push(function(Fe){var Je,Ne;const Ge=(Ne=(Je=Fe.theme.components)==null?void 0:Je[k])==null?void 0:Ne.styleOverrides;if(!Ge)return null;const it={};for(const $e in Ge)it[$e]=lg(Fe,Ge[$e],Fe.theme.modularCssLayers?"theme":void 0);return $(Fe,it)}),k&&!ae&&Me.push(function(Fe){var it,Je;const Be=Fe.theme,Ge=(Je=(it=Be==null?void 0:Be.components)==null?void 0:it[k])==null?void 0:Je.variants;return Ge?MM(Fe,Ge,[],Fe.theme.modularCssLayers?"theme":void 0):null}),j||Me.push(uh),Array.isArray(Ce[0])){const te=Ce.shift(),Fe=new Array(ye.length).fill(""),Be=new Array(Me.length).fill("");let Ge;Ge=[...Fe,...te,...Be],Ge.raw=[...Fe,...te.raw,...Be],ye.unshift(Ge)}const ze=[...ye,...Ce,...Me],Re=G(...ze);return u.muiName&&(Re.muiName=u.muiName),Re};return G.withConfig&&(de.withConfig=G.withConfig),de}}function bV(e,t){return void 0}function wV(e){for(const t in e)return!1;return!0}function SV(e){return typeof e=="string"&&e.charCodeAt(0)>96}function TV(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Ex(e,t,i=!1){const a={...t};for(const c in e)if(Object.prototype.hasOwnProperty.call(e,c)){const d=c;if(d==="components"||d==="slots")a[d]={...e[d],...a[d]};else if(d==="componentsProps"||d==="slotProps"){const f=e[d],u=t[d];if(!u)a[d]=f||{};else if(!f)a[d]=u;else{a[d]={...u};for(const w in f)if(Object.prototype.hasOwnProperty.call(f,w)){const k=w;a[d][k]=Ex(f[k],u[k],i)}}}else d==="className"&&i&&t.className?a.className=Ir(e==null?void 0:e.className,t==null?void 0:t.className):d==="style"&&i&&t.style?a.style={...e==null?void 0:e.style,...t==null?void 0:t.style}:a[d]===void 0&&(a[d]=e[d])}return a}const qf=typeof window<"u"?ne.useLayoutEffect:ne.useEffect;function CV(e,t=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,i))}function Fb(e,t=0,i=1){return CV(e,t,i)}function kV(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&i[0].length===1&&(i=i.map(a=>a+a)),i?`rgb${i.length===4?"a":""}(${i.map((a,c)=>c<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function ol(e){if(e.type)return e;if(e.charAt(0)==="#")return ol(kV(e));const t=e.indexOf("("),i=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(i))throw new Error(pu(9,e));let a=e.substring(t+1,e.length-1),c;if(i==="color"){if(a=a.split(" "),c=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(c))throw new Error(pu(10,c))}else a=a.split(",");return a=a.map(d=>parseFloat(d)),{type:i,values:a,colorSpace:c}}const PV=e=>{const t=ol(e);return t.values.slice(0,3).map((i,a)=>t.type.includes("hsl")&&a!==0?`${i}%`:i).join(" ")},Jd=(e,t)=>{try{return PV(e)}catch{return e}};function qy(e){const{type:t,colorSpace:i}=e;let{values:a}=e;return t.includes("rgb")?a=a.map((c,d)=>d<3?parseInt(c,10):c):t.includes("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.includes("color")?a=`${i} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function AM(e){e=ol(e);const{values:t}=e,i=t[0],a=t[1]/100,c=t[2]/100,d=a*Math.min(c,1-c),f=(k,I=(k+i/30)%12)=>c-d*Math.max(Math.min(I-3,9-I,1),-1);let u="rgb";const w=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return e.type==="hsla"&&(u+="a",w.push(t[3])),qy({type:u,values:w})}function Ix(e){e=ol(e);let t=e.type==="hsl"||e.type==="hsla"?ol(AM(e)).values:e.values;return t=t.map(i=>(e.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function EV(e,t){const i=Ix(e),a=Ix(t);return(Math.max(i,a)+.05)/(Math.min(i,a)+.05)}function zM(e,t){return e=ol(e),t=Fb(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,qy(e)}function Ul(e,t,i){try{return zM(e,t)}catch{return e}}function Gy(e,t){if(e=ol(e),t=Fb(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]*=1-t;return qy(e)}function ln(e,t,i){try{return Gy(e,t)}catch{return e}}function Hy(e,t){if(e=ol(e),t=Fb(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return qy(e)}function un(e,t,i){try{return Hy(e,t)}catch{return e}}function IV(e,t=.15){return Ix(e)>.5?Gy(e,t):Hy(e,t)}function Om(e,t,i){try{return IV(e,t)}catch{return e}}const MV=ne.createContext(),DM=()=>ne.useContext(MV)??!1,AV=ne.createContext(void 0);function zV(e){const{theme:t,name:i,props:a}=e;if(!t||!t.components||!t.components[i])return a;const c=t.components[i];return c.defaultProps?Ex(c.defaultProps,a,t.components.mergeClassNameAndStyle):!c.styleOverrides&&!c.variants?Ex(c,a,t.components.mergeClassNameAndStyle):a}function DV({props:e,name:t}){const i=ne.useContext(AV);return zV({props:e,name:t,theme:{components:i}})}let DC=0;function RV(e){const[t,i]=ne.useState(e),a=e||t;return ne.useEffect(()=>{t==null&&(DC+=1,i(`mui-${DC}`))},[t]),a}const LV={...l0},RC=LV.useId;function RM(e){if(RC!==void 0){const t=RC();return e??t}return RV(e)}const LC={theme:void 0};function FV(e){let t,i;return function(c){let d=t;return(d===void 0||c.theme!==i)&&(LC.theme=c.theme,d=IM(e(LC)),t=d,i=c.theme),d}}function OV(e=""){function t(...a){if(!a.length)return"";const c=a[0];return typeof c=="string"&&!c.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${c}${t(...a.slice(1))})`:`, ${c}`}return(a,...c)=>`var(--${e?`${e}-`:""}${a}${t(...c)})`}const FC=(e,t,i,a=[])=>{let c=e;t.forEach((d,f)=>{f===t.length-1?Array.isArray(c)?c[Number(d)]=i:c&&typeof c=="object"&&(c[d]=i):c&&typeof c=="object"&&(c[d]||(c[d]=a.includes(d)?[]:{}),c=c[d])})},BV=(e,t,i)=>{function a(c,d=[],f=[]){Object.entries(c).forEach(([u,w])=>{(!i||i&&!i([...d,u]))&&w!=null&&(typeof w=="object"&&Object.keys(w).length>0?a(w,[...d,u],Array.isArray(w)?[...f,u]:f):t([...d,u],w,f))})}a(e)},VV=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(a=>e.includes(a))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function r0(e,t){const{prefix:i,shouldSkipGeneratingVar:a}=t||{},c={},d={},f={};return BV(e,(u,w,k)=>{if((typeof w=="string"||typeof w=="number")&&(!a||!a(u,w))){const I=`--${i?`${i}-`:""}${u.join("-")}`,A=VV(u,w);Object.assign(c,{[I]:A}),FC(d,u,`var(${I})`,k),FC(f,u,`var(${I}, ${A})`,k)}},u=>u[0]==="vars"),{css:c,vars:d,varsWithDefaults:f}}function NV(e,t={}){const{getSelector:i=j,disableCssColorScheme:a,colorSchemeSelector:c,enableContrastVars:d}=t,{colorSchemes:f={},components:u,defaultColorScheme:w="light",...k}=e,{vars:I,css:A,varsWithDefaults:M}=r0(k,t);let $=M;const H={},{[w]:Y,...ae}=f;if(Object.entries(ae||{}).forEach(([ee,de])=>{const{vars:he,css:ye,varsWithDefaults:Ce}=r0(de,t);$=as($,Ce),H[ee]={css:ye,vars:he}}),Y){const{css:ee,vars:de,varsWithDefaults:he}=r0(Y,t);$=as($,he),H[w]={css:ee,vars:de}}function j(ee,de){var ye,Ce;let he=c;if(c==="class"&&(he=".%s"),c==="data"&&(he="[data-%s]"),c!=null&&c.startsWith("data-")&&!c.includes("%s")&&(he=`[${c}="%s"]`),ee){if(he==="media")return e.defaultColorScheme===ee?":root":{[`@media (prefers-color-scheme: ${((Ce=(ye=f[ee])==null?void 0:ye.palette)==null?void 0:Ce.mode)||ee})`]:{":root":de}};if(he)return e.defaultColorScheme===ee?`:root, ${he.replace("%s",String(ee))}`:he.replace("%s",String(ee))}return":root"}return{vars:$,generateThemeVars:()=>{let ee={...I};return Object.entries(H).forEach(([,{vars:de}])=>{ee=as(ee,de)}),ee},generateStyleSheets:()=>{var Me,ze;const ee=[],de=e.defaultColorScheme||"light";function he(Re,te){Object.keys(te).length&&ee.push(typeof Re=="string"?{[Re]:{...te}}:Re)}he(i(void 0,{...A}),A);const{[de]:ye,...Ce}=H;if(ye){const{css:Re}=ye,te=(ze=(Me=f[de])==null?void 0:Me.palette)==null?void 0:ze.mode,Fe=!a&&te?{colorScheme:te,...Re}:{...Re};he(i(de,{...Fe}),Fe)}return Object.entries(Ce).forEach(([Re,{css:te}])=>{var Ge,it;const Fe=(it=(Ge=f[Re])==null?void 0:Ge.palette)==null?void 0:it.mode,Be=!a&&Fe?{colorScheme:Fe,...te}:{...te};he(i(Re,{...Be}),Be)}),d&&ee.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),ee}}}function jV(e){return function(i){return e==="media"?`@media (prefers-color-scheme: ${i})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${i}"] &`:e==="class"?`.${i} &`:e==="data"?`[data-${i}] &`:`${e.replace("%s",i)} &`:"&"}}const Gf={black:"#000",white:"#fff"},$V={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},_c={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},vc={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Wd={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},xc={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},bc={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},wc={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function LM(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Gf.white,default:Gf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const FM=LM();function OM(){return{text:{primary:Gf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Gf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Mx=OM();function OC(e,t,i,a){const c=a.light||a,d=a.dark||a*1.5;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:t==="light"?e.light=Hy(e.main,c):t==="dark"&&(e.dark=Gy(e.main,d)))}function BC(e,t,i,a,c){const d=c.light||c,f=c.dark||c*1.5;t[i]||(t.hasOwnProperty(a)?t[i]=t[a]:i==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(d*100).toFixed(0)}%)`:i==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(f*100).toFixed(0)}%)`))}function UV(e="light"){return e==="dark"?{main:xc[200],light:xc[50],dark:xc[400]}:{main:xc[700],light:xc[400],dark:xc[800]}}function WV(e="light"){return e==="dark"?{main:_c[200],light:_c[50],dark:_c[400]}:{main:_c[500],light:_c[300],dark:_c[700]}}function qV(e="light"){return e==="dark"?{main:vc[500],light:vc[300],dark:vc[700]}:{main:vc[700],light:vc[400],dark:vc[800]}}function GV(e="light"){return e==="dark"?{main:bc[400],light:bc[300],dark:bc[700]}:{main:bc[700],light:bc[500],dark:bc[900]}}function HV(e="light"){return e==="dark"?{main:wc[400],light:wc[300],dark:wc[700]}:{main:wc[800],light:wc[500],dark:wc[900]}}function ZV(e="light"){return e==="dark"?{main:Wd[400],light:Wd[300],dark:Wd[700]}:{main:"#ed6c02",light:Wd[500],dark:Wd[900]}}function XV(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function Ob(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:a=.2,colorSpace:c,...d}=e,f=e.primary||UV(t),u=e.secondary||WV(t),w=e.error||qV(t),k=e.info||GV(t),I=e.success||HV(t),A=e.warning||ZV(t);function M(ae){return c?XV(ae):EV(ae,Mx.text.primary)>=i?Mx.text.primary:FM.text.primary}const $=({color:ae,name:j,mainShade:W=500,lightShade:G=300,darkShade:ee=700})=>{if(ae={...ae},!ae.main&&ae[W]&&(ae.main=ae[W]),!ae.hasOwnProperty("main"))throw new Error(pu(11,j?` (${j})`:"",W));if(typeof ae.main!="string")throw new Error(pu(12,j?` (${j})`:"",JSON.stringify(ae.main)));return c?(BC(c,ae,"light",G,a),BC(c,ae,"dark",ee,a)):(OC(ae,"light",G,a),OC(ae,"dark",ee,a)),ae.contrastText||(ae.contrastText=M(ae.main)),ae};let H;return t==="light"?H=LM():t==="dark"&&(H=OM()),as({common:{...Gf},mode:t,primary:$({color:f,name:"primary"}),secondary:$({color:u,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:$({color:w,name:"error"}),warning:$({color:A,name:"warning"}),info:$({color:k,name:"info"}),success:$({color:I,name:"success"}),grey:$V,contrastThreshold:i,getContrastText:M,augmentColor:$,tonalOffset:a,...H},d)}function KV(e){const t={};return Object.entries(e).forEach(a=>{const[c,d]=a;typeof d=="object"&&(t[c]=`${d.fontStyle?`${d.fontStyle} `:""}${d.fontVariant?`${d.fontVariant} `:""}${d.fontWeight?`${d.fontWeight} `:""}${d.fontStretch?`${d.fontStretch} `:""}${d.fontSize||""}${d.lineHeight?`/${d.lineHeight} `:""}${d.fontFamily||""}`)}),t}function YV(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function JV(e){return Math.round(e*1e5)/1e5}const VC={textTransform:"uppercase"},NC='"Roboto", "Helvetica", "Arial", sans-serif';function QV(e,t){const{fontFamily:i=NC,fontSize:a=14,fontWeightLight:c=300,fontWeightRegular:d=400,fontWeightMedium:f=500,fontWeightBold:u=700,htmlFontSize:w=16,allVariants:k,pxToRem:I,...A}=typeof t=="function"?t(e):t,M=a/14,$=I||(ae=>`${ae/w*M}rem`),H=(ae,j,W,G,ee)=>({fontFamily:i,fontWeight:ae,fontSize:$(j),lineHeight:W,...i===NC?{letterSpacing:`${JV(G/j)}em`}:{},...ee,...k}),Y={h1:H(c,96,1.167,-1.5),h2:H(c,60,1.2,-.5),h3:H(d,48,1.167,0),h4:H(d,34,1.235,.25),h5:H(d,24,1.334,0),h6:H(f,20,1.6,.15),subtitle1:H(d,16,1.75,.15),subtitle2:H(f,14,1.57,.1),body1:H(d,16,1.5,.15),body2:H(d,14,1.43,.15),button:H(f,14,1.75,.4,VC),caption:H(d,12,1.66,.4),overline:H(d,12,2.66,1,VC),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return as({htmlFontSize:w,pxToRem:$,fontFamily:i,fontSize:a,fontWeightLight:c,fontWeightRegular:d,fontWeightMedium:f,fontWeightBold:u,...Y},A,{clone:!1})}const eN=.2,tN=.14,nN=.12;function An(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${eN})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${tN})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${nN})`].join(",")}const rN=["none",An(0,2,1,-1,0,1,1,0,0,1,3,0),An(0,3,1,-2,0,2,2,0,0,1,5,0),An(0,3,3,-2,0,3,4,0,0,1,8,0),An(0,2,4,-1,0,4,5,0,0,1,10,0),An(0,3,5,-1,0,5,8,0,0,1,14,0),An(0,3,5,-1,0,6,10,0,0,1,18,0),An(0,4,5,-2,0,7,10,1,0,2,16,1),An(0,5,5,-3,0,8,10,1,0,3,14,2),An(0,5,6,-3,0,9,12,1,0,3,16,2),An(0,6,6,-3,0,10,14,1,0,4,18,3),An(0,6,7,-4,0,11,15,1,0,4,20,3),An(0,7,8,-4,0,12,17,2,0,5,22,4),An(0,7,8,-4,0,13,19,2,0,5,24,4),An(0,7,9,-4,0,14,21,2,0,5,26,4),An(0,8,9,-5,0,15,22,2,0,6,28,5),An(0,8,10,-5,0,16,24,2,0,6,30,5),An(0,8,11,-5,0,17,26,2,0,6,32,5),An(0,9,11,-5,0,18,28,2,0,7,34,6),An(0,9,12,-6,0,19,29,2,0,7,36,6),An(0,10,13,-6,0,20,31,3,0,8,38,7),An(0,10,13,-6,0,21,33,3,0,8,40,7),An(0,10,14,-6,0,22,35,3,0,8,42,7),An(0,11,14,-7,0,23,36,3,0,9,44,8),An(0,11,15,-7,0,24,38,3,0,9,46,8)],iN={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},sN={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function jC(e){return`${Math.round(e)}ms`}function oN(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function aN(e){const t={...iN,...e.easing},i={...sN,...e.duration};return{getAutoHeightDuration:oN,create:(c=["all"],d={})=>{const{duration:f=i.standard,easing:u=t.easeInOut,delay:w=0,...k}=d;return(Array.isArray(c)?c:[c]).map(I=>`${I} ${typeof f=="string"?f:jC(f)} ${u} ${typeof w=="string"?w:jC(w)}`).join(",")},...e,easing:t,duration:i}}const lN={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function uN(e){return Wo(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function BM(e={}){const t={...e};function i(a){const c=Object.entries(a);for(let d=0;d<c.length;d++){const[f,u]=c[d];!uN(u)||f.startsWith("unstable_")?delete a[f]:Wo(u)&&(a[f]={...u},i(a[f]))}}return i(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function $C(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const cN=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let i=0;for(let a=0;a<t.length;a+=1)i+=+t[a];return i};function hN(e){Object.assign(e,{alpha(t,i){const a=this||e;return a.colorSpace?`oklch(from ${t} l c h / ${typeof i=="string"?`calc(${i})`:i})`:a.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof i=="string"?`calc(${i})`:i})`:zM(t,cN(i))},lighten(t,i){const a=this||e;return a.colorSpace?`color-mix(in ${a.colorSpace}, ${t}, #fff ${$C(i)})`:Hy(t,i)},darken(t,i){const a=this||e;return a.colorSpace?`color-mix(in ${a.colorSpace}, ${t}, #000 ${$C(i)})`:Gy(t,i)}})}function Ax(e={},...t){const{breakpoints:i,mixins:a={},spacing:c,palette:d={},transitions:f={},typography:u={},shape:w,colorSpace:k,...I}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(pu(20));const A=Ob({...d,colorSpace:k}),M=Lb(e);let $=as(M,{mixins:YV(M.breakpoints,a),palette:A,shadows:rN.slice(),typography:QV(A,u),transitions:aN(f),zIndex:{...lN}});return $=as($,I),$=t.reduce((H,Y)=>as(H,Y),$),$.unstable_sxConfig={...My,...I==null?void 0:I.unstable_sxConfig},$.unstable_sx=function(Y){return uh({sx:Y,theme:this})},$.toRuntimeSource=BM,hN($),$}function dN(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const fN=[...Array(25)].map((e,t)=>{if(t===0)return"none";const i=dN(t);return`linear-gradient(rgba(255 255 255 / ${i}), rgba(255 255 255 / ${i}))`});function VM(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function NM(e){return e==="dark"?fN:[]}function pN(e){const{palette:t={mode:"light"},opacity:i,overlays:a,colorSpace:c,...d}=e,f=Ob({...t,colorSpace:c});return{palette:f,opacity:{...VM(f.mode),...i},overlays:a||NM(f.mode),...d}}function mN(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const gN=e=>[...[...Array(25)].map((t,i)=>`--${e?`${e}-`:""}overlays-${i}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],yN=e=>(t,i)=>{const a=e.rootSelector||":root",c=e.colorSchemeSelector;let d=c;if(c==="class"&&(d=".%s"),c==="data"&&(d="[data-%s]"),c!=null&&c.startsWith("data-")&&!c.includes("%s")&&(d=`[${c}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const f={};return gN(e.cssVarPrefix).forEach(u=>{f[u]=i[u],delete i[u]}),d==="media"?{[a]:i,"@media (prefers-color-scheme: dark)":{[a]:f}}:d?{[d.replace("%s",t)]:f,[`${a}, ${d.replace("%s",t)}`]:i}:{[a]:{...i,...f}}}if(d&&d!=="media")return`${a}, ${d.replace("%s",String(t))}`}else if(t){if(d==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[a]:i}};if(d)return d.replace("%s",String(t))}return a};function _N(e,t){t.forEach(i=>{e[i]||(e[i]={})})}function Le(e,t,i){!e[t]&&i&&(e[t]=i)}function Qd(e){return typeof e!="string"||!e.startsWith("hsl")?e:AM(e)}function No(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Jd(Qd(e[t])))}function vN(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const ao=e=>{try{return e()}catch{}},xN=(e="mui")=>OV(e);function i0(e,t,i,a,c){if(!i)return;i=i===!0?{}:i;const d=c==="dark"?"dark":"light";if(!a){t[c]=pN({...i,palette:{mode:d,...i==null?void 0:i.palette},colorSpace:e});return}const{palette:f,...u}=Ax({...a,palette:{mode:d,...i==null?void 0:i.palette},colorSpace:e});return t[c]={...i,palette:f,opacity:{...VM(d),...i==null?void 0:i.opacity},overlays:(i==null?void 0:i.overlays)||NM(d)},u}function bN(e={},...t){const{colorSchemes:i={light:!0},defaultColorScheme:a,disableCssColorScheme:c=!1,cssVarPrefix:d="mui",nativeColor:f=!1,shouldSkipGeneratingVar:u=mN,colorSchemeSelector:w=i.light&&i.dark?"media":void 0,rootSelector:k=":root",...I}=e,A=Object.keys(i)[0],M=a||(i.light&&A!=="light"?"light":A),$=xN(d),{[M]:H,light:Y,dark:ae,...j}=i,W={...j};let G=H;if((M==="dark"&&!("dark"in i)||M==="light"&&!("light"in i))&&(G=!0),!G)throw new Error(pu(21,M));let ee;f&&(ee="oklch");const de=i0(ee,W,G,I,M);Y&&!W.light&&i0(ee,W,Y,void 0,"light"),ae&&!W.dark&&i0(ee,W,ae,void 0,"dark");let he={defaultColorScheme:M,...de,cssVarPrefix:d,colorSchemeSelector:w,rootSelector:k,getCssVar:$,colorSchemes:W,font:{...KV(de.typography),...de.font},spacing:vN(I.spacing)};Object.keys(he.colorSchemes).forEach(Re=>{const te=he.colorSchemes[Re].palette,Fe=Ge=>{const it=Ge.split("-"),Je=it[1],Ne=it[2];return $(Ge,te[Je][Ne])};te.mode==="light"&&(Le(te.common,"background","#fff"),Le(te.common,"onBackground","#000")),te.mode==="dark"&&(Le(te.common,"background","#000"),Le(te.common,"onBackground","#fff"));function Be(Ge,it,Je){if(ee){let Ne;return Ge===Ul&&(Ne=`transparent ${((1-Je)*100).toFixed(0)}%`),Ge===ln&&(Ne=`#000 ${(Je*100).toFixed(0)}%`),Ge===un&&(Ne=`#fff ${(Je*100).toFixed(0)}%`),`color-mix(in ${ee}, ${it}, ${Ne})`}return Ge(it,Je)}if(_N(te,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),te.mode==="light"){Le(te.Alert,"errorColor",Be(ln,te.error.light,.6)),Le(te.Alert,"infoColor",Be(ln,te.info.light,.6)),Le(te.Alert,"successColor",Be(ln,te.success.light,.6)),Le(te.Alert,"warningColor",Be(ln,te.warning.light,.6)),Le(te.Alert,"errorFilledBg",Fe("palette-error-main")),Le(te.Alert,"infoFilledBg",Fe("palette-info-main")),Le(te.Alert,"successFilledBg",Fe("palette-success-main")),Le(te.Alert,"warningFilledBg",Fe("palette-warning-main")),Le(te.Alert,"errorFilledColor",ao(()=>te.getContrastText(te.error.main))),Le(te.Alert,"infoFilledColor",ao(()=>te.getContrastText(te.info.main))),Le(te.Alert,"successFilledColor",ao(()=>te.getContrastText(te.success.main))),Le(te.Alert,"warningFilledColor",ao(()=>te.getContrastText(te.warning.main))),Le(te.Alert,"errorStandardBg",Be(un,te.error.light,.9)),Le(te.Alert,"infoStandardBg",Be(un,te.info.light,.9)),Le(te.Alert,"successStandardBg",Be(un,te.success.light,.9)),Le(te.Alert,"warningStandardBg",Be(un,te.warning.light,.9)),Le(te.Alert,"errorIconColor",Fe("palette-error-main")),Le(te.Alert,"infoIconColor",Fe("palette-info-main")),Le(te.Alert,"successIconColor",Fe("palette-success-main")),Le(te.Alert,"warningIconColor",Fe("palette-warning-main")),Le(te.AppBar,"defaultBg",Fe("palette-grey-100")),Le(te.Avatar,"defaultBg",Fe("palette-grey-400")),Le(te.Button,"inheritContainedBg",Fe("palette-grey-300")),Le(te.Button,"inheritContainedHoverBg",Fe("palette-grey-A100")),Le(te.Chip,"defaultBorder",Fe("palette-grey-400")),Le(te.Chip,"defaultAvatarColor",Fe("palette-grey-700")),Le(te.Chip,"defaultIconColor",Fe("palette-grey-700")),Le(te.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Le(te.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Le(te.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Le(te.LinearProgress,"primaryBg",Be(un,te.primary.main,.62)),Le(te.LinearProgress,"secondaryBg",Be(un,te.secondary.main,.62)),Le(te.LinearProgress,"errorBg",Be(un,te.error.main,.62)),Le(te.LinearProgress,"infoBg",Be(un,te.info.main,.62)),Le(te.LinearProgress,"successBg",Be(un,te.success.main,.62)),Le(te.LinearProgress,"warningBg",Be(un,te.warning.main,.62)),Le(te.Skeleton,"bg",ee?Be(Ul,te.text.primary,.11):`rgba(${Fe("palette-text-primaryChannel")} / 0.11)`),Le(te.Slider,"primaryTrack",Be(un,te.primary.main,.62)),Le(te.Slider,"secondaryTrack",Be(un,te.secondary.main,.62)),Le(te.Slider,"errorTrack",Be(un,te.error.main,.62)),Le(te.Slider,"infoTrack",Be(un,te.info.main,.62)),Le(te.Slider,"successTrack",Be(un,te.success.main,.62)),Le(te.Slider,"warningTrack",Be(un,te.warning.main,.62));const Ge=ee?Be(ln,te.background.default,.6825):Om(te.background.default,.8);Le(te.SnackbarContent,"bg",Ge),Le(te.SnackbarContent,"color",ao(()=>ee?Mx.text.primary:te.getContrastText(Ge))),Le(te.SpeedDialAction,"fabHoverBg",Om(te.background.paper,.15)),Le(te.StepConnector,"border",Fe("palette-grey-400")),Le(te.StepContent,"border",Fe("palette-grey-400")),Le(te.Switch,"defaultColor",Fe("palette-common-white")),Le(te.Switch,"defaultDisabledColor",Fe("palette-grey-100")),Le(te.Switch,"primaryDisabledColor",Be(un,te.primary.main,.62)),Le(te.Switch,"secondaryDisabledColor",Be(un,te.secondary.main,.62)),Le(te.Switch,"errorDisabledColor",Be(un,te.error.main,.62)),Le(te.Switch,"infoDisabledColor",Be(un,te.info.main,.62)),Le(te.Switch,"successDisabledColor",Be(un,te.success.main,.62)),Le(te.Switch,"warningDisabledColor",Be(un,te.warning.main,.62)),Le(te.TableCell,"border",Be(un,Be(Ul,te.divider,1),.88)),Le(te.Tooltip,"bg",Be(Ul,te.grey[700],.92))}if(te.mode==="dark"){Le(te.Alert,"errorColor",Be(un,te.error.light,.6)),Le(te.Alert,"infoColor",Be(un,te.info.light,.6)),Le(te.Alert,"successColor",Be(un,te.success.light,.6)),Le(te.Alert,"warningColor",Be(un,te.warning.light,.6)),Le(te.Alert,"errorFilledBg",Fe("palette-error-dark")),Le(te.Alert,"infoFilledBg",Fe("palette-info-dark")),Le(te.Alert,"successFilledBg",Fe("palette-success-dark")),Le(te.Alert,"warningFilledBg",Fe("palette-warning-dark")),Le(te.Alert,"errorFilledColor",ao(()=>te.getContrastText(te.error.dark))),Le(te.Alert,"infoFilledColor",ao(()=>te.getContrastText(te.info.dark))),Le(te.Alert,"successFilledColor",ao(()=>te.getContrastText(te.success.dark))),Le(te.Alert,"warningFilledColor",ao(()=>te.getContrastText(te.warning.dark))),Le(te.Alert,"errorStandardBg",Be(ln,te.error.light,.9)),Le(te.Alert,"infoStandardBg",Be(ln,te.info.light,.9)),Le(te.Alert,"successStandardBg",Be(ln,te.success.light,.9)),Le(te.Alert,"warningStandardBg",Be(ln,te.warning.light,.9)),Le(te.Alert,"errorIconColor",Fe("palette-error-main")),Le(te.Alert,"infoIconColor",Fe("palette-info-main")),Le(te.Alert,"successIconColor",Fe("palette-success-main")),Le(te.Alert,"warningIconColor",Fe("palette-warning-main")),Le(te.AppBar,"defaultBg",Fe("palette-grey-900")),Le(te.AppBar,"darkBg",Fe("palette-background-paper")),Le(te.AppBar,"darkColor",Fe("palette-text-primary")),Le(te.Avatar,"defaultBg",Fe("palette-grey-600")),Le(te.Button,"inheritContainedBg",Fe("palette-grey-800")),Le(te.Button,"inheritContainedHoverBg",Fe("palette-grey-700")),Le(te.Chip,"defaultBorder",Fe("palette-grey-700")),Le(te.Chip,"defaultAvatarColor",Fe("palette-grey-300")),Le(te.Chip,"defaultIconColor",Fe("palette-grey-300")),Le(te.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Le(te.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Le(te.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Le(te.LinearProgress,"primaryBg",Be(ln,te.primary.main,.5)),Le(te.LinearProgress,"secondaryBg",Be(ln,te.secondary.main,.5)),Le(te.LinearProgress,"errorBg",Be(ln,te.error.main,.5)),Le(te.LinearProgress,"infoBg",Be(ln,te.info.main,.5)),Le(te.LinearProgress,"successBg",Be(ln,te.success.main,.5)),Le(te.LinearProgress,"warningBg",Be(ln,te.warning.main,.5)),Le(te.Skeleton,"bg",ee?Be(Ul,te.text.primary,.13):`rgba(${Fe("palette-text-primaryChannel")} / 0.13)`),Le(te.Slider,"primaryTrack",Be(ln,te.primary.main,.5)),Le(te.Slider,"secondaryTrack",Be(ln,te.secondary.main,.5)),Le(te.Slider,"errorTrack",Be(ln,te.error.main,.5)),Le(te.Slider,"infoTrack",Be(ln,te.info.main,.5)),Le(te.Slider,"successTrack",Be(ln,te.success.main,.5)),Le(te.Slider,"warningTrack",Be(ln,te.warning.main,.5));const Ge=ee?Be(un,te.background.default,.985):Om(te.background.default,.98);Le(te.SnackbarContent,"bg",Ge),Le(te.SnackbarContent,"color",ao(()=>ee?FM.text.primary:te.getContrastText(Ge))),Le(te.SpeedDialAction,"fabHoverBg",Om(te.background.paper,.15)),Le(te.StepConnector,"border",Fe("palette-grey-600")),Le(te.StepContent,"border",Fe("palette-grey-600")),Le(te.Switch,"defaultColor",Fe("palette-grey-300")),Le(te.Switch,"defaultDisabledColor",Fe("palette-grey-600")),Le(te.Switch,"primaryDisabledColor",Be(ln,te.primary.main,.55)),Le(te.Switch,"secondaryDisabledColor",Be(ln,te.secondary.main,.55)),Le(te.Switch,"errorDisabledColor",Be(ln,te.error.main,.55)),Le(te.Switch,"infoDisabledColor",Be(ln,te.info.main,.55)),Le(te.Switch,"successDisabledColor",Be(ln,te.success.main,.55)),Le(te.Switch,"warningDisabledColor",Be(ln,te.warning.main,.55)),Le(te.TableCell,"border",Be(ln,Be(Ul,te.divider,1),.68)),Le(te.Tooltip,"bg",Be(Ul,te.grey[700],.92))}No(te.background,"default"),No(te.background,"paper"),No(te.common,"background"),No(te.common,"onBackground"),No(te,"divider"),Object.keys(te).forEach(Ge=>{const it=te[Ge];Ge!=="tonalOffset"&&it&&typeof it=="object"&&(it.main&&Le(te[Ge],"mainChannel",Jd(Qd(it.main))),it.light&&Le(te[Ge],"lightChannel",Jd(Qd(it.light))),it.dark&&Le(te[Ge],"darkChannel",Jd(Qd(it.dark))),it.contrastText&&Le(te[Ge],"contrastTextChannel",Jd(Qd(it.contrastText))),Ge==="text"&&(No(te[Ge],"primary"),No(te[Ge],"secondary")),Ge==="action"&&(it.active&&No(te[Ge],"active"),it.selected&&No(te[Ge],"selected")))})}),he=t.reduce((Re,te)=>as(Re,te),he);const ye={prefix:d,disableCssColorScheme:c,shouldSkipGeneratingVar:u,getSelector:yN(he),enableContrastVars:f},{vars:Ce,generateThemeVars:Me,generateStyleSheets:ze}=NV(he,ye);return he.vars=Ce,Object.entries(he.colorSchemes[he.defaultColorScheme]).forEach(([Re,te])=>{he[Re]=te}),he.generateThemeVars=Me,he.generateStyleSheets=ze,he.generateSpacing=function(){return EM(I.spacing,Sb(this))},he.getColorSchemeSelector=jV(w),he.spacing=he.generateSpacing(),he.shouldSkipGeneratingVar=u,he.unstable_sxConfig={...My,...I==null?void 0:I.unstable_sxConfig},he.unstable_sx=function(te){return uh({sx:te,theme:this})},he.toRuntimeSource=BM,he}function UC(e,t,i){e.colorSchemes&&i&&(e.colorSchemes[t]={...i!==!0&&i,palette:Ob({...i===!0?{}:i.palette,mode:t})})}function wN(e={},...t){const{palette:i,cssVariables:a=!1,colorSchemes:c=i?void 0:{light:!0},defaultColorScheme:d=i==null?void 0:i.mode,...f}=e,u=d||"light",w=c==null?void 0:c[u],k={...c,...i?{[u]:{...typeof w!="boolean"&&w,palette:i}}:void 0};if(a===!1){if(!("colorSchemes"in e))return Ax(e,...t);let I=i;"palette"in e||k[u]&&(k[u]!==!0?I=k[u].palette:u==="dark"&&(I={mode:"dark"}));const A=Ax({...e,palette:I},...t);return A.defaultColorScheme=u,A.colorSchemes=k,A.palette.mode==="light"&&(A.colorSchemes.light={...k.light!==!0&&k.light,palette:A.palette},UC(A,"dark",k.dark)),A.palette.mode==="dark"&&(A.colorSchemes.dark={...k.dark!==!0&&k.dark,palette:A.palette},UC(A,"light",k.light)),A}return!i&&!("light"in k)&&u==="light"&&(k.light=!0),bN({...f,colorSchemes:k,defaultColorScheme:u,...typeof a!="boolean"&&a},...t)}const jM=wN(),$M="$$material";function UM(){const e=mV(jM);return e[$M]||e}function SN(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const TN=e=>SN(e)&&e!=="classes",ps=xV({themeId:$M,defaultTheme:jM,rootShouldForwardProp:TN}),al=FV;function bu(e){return DV(e)}function CN(e){return vu("MuiSvgIcon",e)}xu("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const kN=e=>{const{color:t,fontSize:i,classes:a}=e,c={root:["root",t!=="inherit"&&`color${Ar(t)}`,`fontSize${Ar(i)}`]};return wh(c,CN,a)},PN=ps("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color!=="inherit"&&t[`color${Ar(i.color)}`],t[`fontSize${Ar(i.fontSize)}`]]}})(al(({theme:e})=>{var t,i,a,c,d,f,u,w,k,I,A,M,$,H;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(c=(t=e.transitions)==null?void 0:t.create)==null?void 0:c.call(t,"fill",{duration:(a=(i=(e.vars??e).transitions)==null?void 0:i.duration)==null?void 0:a.shorter}),variants:[{props:Y=>!Y.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((f=(d=e.typography)==null?void 0:d.pxToRem)==null?void 0:f.call(d,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((w=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:w.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((I=(k=e.typography)==null?void 0:k.pxToRem)==null?void 0:I.call(k,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,Y])=>Y&&Y.main).map(([Y])=>{var ae,j;return{props:{color:Y},style:{color:(j=(ae=(e.vars??e).palette)==null?void 0:ae[Y])==null?void 0:j.main}}}),{props:{color:"action"},style:{color:(M=(A=(e.vars??e).palette)==null?void 0:A.action)==null?void 0:M.active}},{props:{color:"disabled"},style:{color:(H=($=(e.vars??e).palette)==null?void 0:$.action)==null?void 0:H.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),zx=ne.forwardRef(function(t,i){const a=bu({props:t,name:"MuiSvgIcon"}),{children:c,className:d,color:f="inherit",component:u="svg",fontSize:w="medium",htmlColor:k,inheritViewBox:I=!1,titleAccess:A,viewBox:M="0 0 24 24",...$}=a,H=ne.isValidElement(c)&&c.type==="svg",Y={...a,color:f,component:u,fontSize:w,instanceFontSize:t.fontSize,inheritViewBox:I,viewBox:M,hasSvgAsChild:H},ae={};I||(ae.viewBox=M);const j=kN(Y);return Ae.jsxs(PN,{as:u,className:Ir(j.root,d),focusable:"false",color:k,"aria-hidden":A?void 0:!0,role:A?"img":void 0,ref:i,...ae,...$,...H&&c.props,ownerState:Y,children:[H?c.props.children:c,A?Ae.jsx("title",{children:A}):null]})});zx.muiName="SvgIcon";function Zy(e,t){function i(a,c){return Ae.jsx(zx,{"data-testid":void 0,ref:c,...a,children:e})}return i.muiName=zx.muiName,ne.memo(ne.forwardRef(i))}function WC(e){return e&&e.ownerDocument||document}function qC(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function EN(e){const{controlled:t,default:i}=e,{current:a}=ne.useRef(t!==void 0),[c,d]=ne.useState(i),f=a?t:c,u=ne.useCallback(w=>{a||d(w)},[]);return[f,u]}function Jc(e){const t=ne.useRef(e);return qf(()=>{t.current=e}),ne.useRef((...i)=>(0,t.current)(...i)).current}function ta(...e){const t=ne.useRef(void 0),i=ne.useCallback(a=>{const c=e.map(d=>{if(d==null)return null;if(typeof d=="function"){const f=d,u=f(a);return typeof u=="function"?u:()=>{f(null)}}return d.current=a,()=>{d.current=null}});return()=>{c.forEach(d=>d==null?void 0:d())}},e);return ne.useMemo(()=>e.every(a=>a==null)?null:a=>{t.current&&(t.current(),t.current=void 0),a!=null&&(t.current=i(a))},e)}const IN=Zy(Ae.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"})),MN=Zy(Ae.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"})),AN=Zy(Ae.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),zN=Zy(Ae.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}));function WM(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function Dx(e,t){return Dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},Dx(e,t)}function qM(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Dx(e,t)}const GC={disabled:!1},Ug=po.createContext(null);var DN=function(t){return t.scrollTop},ef="unmounted",Hl="exited",Zl="entering",Tc="entered",Rx="exiting",sa=function(e){qM(t,e);function t(a,c){var d;d=e.call(this,a,c)||this;var f=c,u=f&&!f.isMounting?a.enter:a.appear,w;return d.appearStatus=null,a.in?u?(w=Hl,d.appearStatus=Zl):w=Tc:a.unmountOnExit||a.mountOnEnter?w=ef:w=Hl,d.state={status:w},d.nextCallback=null,d}t.getDerivedStateFromProps=function(c,d){var f=c.in;return f&&d.status===ef?{status:Hl}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(c){var d=null;if(c!==this.props){var f=this.state.status;this.props.in?f!==Zl&&f!==Tc&&(d=Zl):(f===Zl||f===Tc)&&(d=Rx)}this.updateStatus(!1,d)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var c=this.props.timeout,d,f,u;return d=f=u=c,c!=null&&typeof c!="number"&&(d=c.exit,f=c.enter,u=c.appear!==void 0?c.appear:f),{exit:d,enter:f,appear:u}},i.updateStatus=function(c,d){if(c===void 0&&(c=!1),d!==null)if(this.cancelNextCallback(),d===Zl){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:Am.findDOMNode(this);f&&DN(f)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Hl&&this.setState({status:ef})},i.performEnter=function(c){var d=this,f=this.props.enter,u=this.context?this.context.isMounting:c,w=this.props.nodeRef?[u]:[Am.findDOMNode(this),u],k=w[0],I=w[1],A=this.getTimeouts(),M=u?A.appear:A.enter;if(!c&&!f||GC.disabled){this.safeSetState({status:Tc},function(){d.props.onEntered(k)});return}this.props.onEnter(k,I),this.safeSetState({status:Zl},function(){d.props.onEntering(k,I),d.onTransitionEnd(M,function(){d.safeSetState({status:Tc},function(){d.props.onEntered(k,I)})})})},i.performExit=function(){var c=this,d=this.props.exit,f=this.getTimeouts(),u=this.props.nodeRef?void 0:Am.findDOMNode(this);if(!d||GC.disabled){this.safeSetState({status:Hl},function(){c.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:Rx},function(){c.props.onExiting(u),c.onTransitionEnd(f.exit,function(){c.safeSetState({status:Hl},function(){c.props.onExited(u)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(c,d){d=this.setNextCallback(d),this.setState(c,d)},i.setNextCallback=function(c){var d=this,f=!0;return this.nextCallback=function(u){f&&(f=!1,d.nextCallback=null,c(u))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},i.onTransitionEnd=function(c,d){this.setNextCallback(d);var f=this.props.nodeRef?this.props.nodeRef.current:Am.findDOMNode(this),u=c==null&&!this.props.addEndListener;if(!f||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var w=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],k=w[0],I=w[1];this.props.addEndListener(k,I)}c!=null&&setTimeout(this.nextCallback,c)},i.render=function(){var c=this.state.status;if(c===ef)return null;var d=this.props,f=d.children;d.in,d.mountOnEnter,d.unmountOnExit,d.appear,d.enter,d.exit,d.timeout,d.addEndListener,d.onEnter,d.onEntering,d.onEntered,d.onExit,d.onExiting,d.onExited,d.nodeRef;var u=WM(d,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return po.createElement(Ug.Provider,{value:null},typeof f=="function"?f(c,u):po.cloneElement(po.Children.only(f),u))},t}(po.Component);sa.contextType=Ug;sa.propTypes={};function Sc(){}sa.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Sc,onEntering:Sc,onEntered:Sc,onExit:Sc,onExiting:Sc,onExited:Sc};sa.UNMOUNTED=ef;sa.EXITED=Hl;sa.ENTERING=Zl;sa.ENTERED=Tc;sa.EXITING=Rx;function RN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bb(e,t){var i=function(d){return t&&ne.isValidElement(d)?t(d):d},a=Object.create(null);return e&&ne.Children.map(e,function(c){return c}).forEach(function(c){a[c.key]=i(c)}),a}function LN(e,t){e=e||{},t=t||{};function i(I){return I in t?t[I]:e[I]}var a=Object.create(null),c=[];for(var d in e)d in t?c.length&&(a[d]=c,c=[]):c.push(d);var f,u={};for(var w in t){if(a[w])for(f=0;f<a[w].length;f++){var k=a[w][f];u[a[w][f]]=i(k)}u[w]=i(w)}for(f=0;f<c.length;f++)u[c[f]]=i(c[f]);return u}function nu(e,t,i){return i[t]!=null?i[t]:e.props[t]}function FN(e,t){return Bb(e.children,function(i){return ne.cloneElement(i,{onExited:t.bind(null,i),in:!0,appear:nu(i,"appear",e),enter:nu(i,"enter",e),exit:nu(i,"exit",e)})})}function ON(e,t,i){var a=Bb(e.children),c=LN(t,a);return Object.keys(c).forEach(function(d){var f=c[d];if(ne.isValidElement(f)){var u=d in t,w=d in a,k=t[d],I=ne.isValidElement(k)&&!k.props.in;w&&(!u||I)?c[d]=ne.cloneElement(f,{onExited:i.bind(null,f),in:!0,exit:nu(f,"exit",e),enter:nu(f,"enter",e)}):!w&&u&&!I?c[d]=ne.cloneElement(f,{in:!1}):w&&u&&ne.isValidElement(k)&&(c[d]=ne.cloneElement(f,{onExited:i.bind(null,f),in:k.props.in,exit:nu(f,"exit",e),enter:nu(f,"enter",e)}))}}),c}var BN=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},VN={component:"div",childFactory:function(t){return t}},Vb=function(e){qM(t,e);function t(a,c){var d;d=e.call(this,a,c)||this;var f=d.handleExited.bind(RN(d));return d.state={contextValue:{isMounting:!0},handleExited:f,firstRender:!0},d}var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(c,d){var f=d.children,u=d.handleExited,w=d.firstRender;return{children:w?FN(c,u):ON(c,f,u),firstRender:!1}},i.handleExited=function(c,d){var f=Bb(this.props.children);c.key in f||(c.props.onExited&&c.props.onExited(d),this.mounted&&this.setState(function(u){var w=jg({},u.children);return delete w[c.key],{children:w}}))},i.render=function(){var c=this.props,d=c.component,f=c.childFactory,u=WM(c,["component","childFactory"]),w=this.state.contextValue,k=BN(this.state.children).map(f);return delete u.appear,delete u.enter,delete u.exit,d===null?po.createElement(Ug.Provider,{value:w},k):po.createElement(Ug.Provider,{value:w},po.createElement(d,u,k))},t}(po.Component);Vb.propTypes={};Vb.defaultProps=VN;const HC={};function GM(e,t){const i=ne.useRef(HC);return i.current===HC&&(i.current=e(t)),i}const NN=[];function jN(e){ne.useEffect(e,NN)}class Xy{constructor(){zd(this,"currentId",null);zd(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});zd(this,"disposeEffect",()=>this.clear)}static create(){return new Xy}start(t,i){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,i()},t)}}function $c(){const e=GM(Xy.create).current;return jN(e.disposeEffect),e}const $N=e=>e.scrollTop;function ZC(e,t){const{timeout:i,easing:a,style:c={}}=e;return{duration:c.transitionDuration??(typeof i=="number"?i:i[t.mode]||0),easing:c.transitionTimingFunction??(typeof a=="object"?a[t.mode]:a),delay:c.transitionDelay}}function UN(e){return typeof e=="string"}function HM(e,t,i){return e===void 0||UN(e)?t:{...t,ownerState:{...t.ownerState,...i}}}function ZM(e,t,i){return typeof e=="function"?e(t,i):e}function WN(e,t=[]){if(e===void 0)return{};const i={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{i[a]=e[a]}),i}function XC(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(i=>!(i.match(/^on[A-Z]/)&&typeof e[i]=="function")).forEach(i=>{t[i]=e[i]}),t}function XM(e){const{getSlotProps:t,additionalProps:i,externalSlotProps:a,externalForwardedProps:c,className:d}=e;if(!t){const $=Ir(i==null?void 0:i.className,d,c==null?void 0:c.className,a==null?void 0:a.className),H={...i==null?void 0:i.style,...c==null?void 0:c.style,...a==null?void 0:a.style},Y={...i,...c,...a};return $.length>0&&(Y.className=$),Object.keys(H).length>0&&(Y.style=H),{props:Y,internalRef:void 0}}const f=WN({...c,...a}),u=XC(a),w=XC(c),k=t(f),I=Ir(k==null?void 0:k.className,i==null?void 0:i.className,d,c==null?void 0:c.className,a==null?void 0:a.className),A={...k==null?void 0:k.style,...i==null?void 0:i.style,...c==null?void 0:c.style,...a==null?void 0:a.style},M={...k,...i,...w,...u};return I.length>0&&(M.className=I),Object.keys(A).length>0&&(M.style=A),{props:M,internalRef:k.ref}}function Bm(e,t){const{className:i,elementType:a,ownerState:c,externalForwardedProps:d,internalForwardedProps:f,shouldForwardComponentProp:u=!1,...w}=t,{component:k,slots:I={[e]:void 0},slotProps:A={[e]:void 0},...M}=d,$=I[e]||a,H=ZM(A[e],c),{props:{component:Y,...ae},internalRef:j}=XM({className:i,...w,externalForwardedProps:e==="root"?M:void 0,externalSlotProps:H}),W=ta(j,H==null?void 0:H.ref,t.ref),G=e==="root"?Y||k:Y,ee=HM($,{...e==="root"&&!k&&!I[e]&&f,...e!=="root"&&!I[e]&&f,...ae,...G&&!u&&{as:G},...G&&u&&{component:G},ref:W},c);return[$,ee]}function Wg(e){try{return e.matches(":focus-visible")}catch{}return!1}class qg{constructor(){zd(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new qg}static use(){const t=GM(qg.create).current,[i,a]=ne.useState(!1);return t.shouldMount=i,t.setShouldMount=a,ne.useEffect(t.mountEffect,[i]),t}mount(){return this.mounted||(this.mounted=GN(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var i;return(i=this.ref.current)==null?void 0:i.start(...t)})}stop(...t){this.mount().then(()=>{var i;return(i=this.ref.current)==null?void 0:i.stop(...t)})}pulsate(...t){this.mount().then(()=>{var i;return(i=this.ref.current)==null?void 0:i.pulsate(...t)})}}function qN(){return qg.use()}function GN(){let e,t;const i=new Promise((a,c)=>{e=a,t=c});return i.resolve=e,i.reject=t,i}function HN(e){const{className:t,classes:i,pulsate:a=!1,rippleX:c,rippleY:d,rippleSize:f,in:u,onExited:w,timeout:k}=e,[I,A]=ne.useState(!1),M=Ir(t,i.ripple,i.rippleVisible,a&&i.ripplePulsate),$={width:f,height:f,top:-(f/2)+d,left:-(f/2)+c},H=Ir(i.child,I&&i.childLeaving,a&&i.childPulsate);return!u&&!I&&A(!0),ne.useEffect(()=>{if(!u&&w!=null){const Y=setTimeout(w,k);return()=>{clearTimeout(Y)}}},[w,u,k]),Ae.jsx("span",{className:M,style:$,children:Ae.jsx("span",{className:H})})}const Cs=xu("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Lx=550,ZN=80,XN=up`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,KN=up`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,YN=up`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,JN=ps("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),QN=ps(HN,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Cs.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${XN};
    animation-duration: ${Lx}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Cs.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Cs.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Cs.childLeaving} {
    opacity: 0;
    animation-name: ${KN};
    animation-duration: ${Lx}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Cs.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${YN};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,ej=ne.forwardRef(function(t,i){const a=bu({props:t,name:"MuiTouchRipple"}),{center:c=!1,classes:d={},className:f,...u}=a,[w,k]=ne.useState([]),I=ne.useRef(0),A=ne.useRef(null);ne.useEffect(()=>{A.current&&(A.current(),A.current=null)},[w]);const M=ne.useRef(!1),$=$c(),H=ne.useRef(null),Y=ne.useRef(null),ae=ne.useCallback(ee=>{const{pulsate:de,rippleX:he,rippleY:ye,rippleSize:Ce,cb:Me}=ee;k(ze=>[...ze,Ae.jsx(QN,{classes:{ripple:Ir(d.ripple,Cs.ripple),rippleVisible:Ir(d.rippleVisible,Cs.rippleVisible),ripplePulsate:Ir(d.ripplePulsate,Cs.ripplePulsate),child:Ir(d.child,Cs.child),childLeaving:Ir(d.childLeaving,Cs.childLeaving),childPulsate:Ir(d.childPulsate,Cs.childPulsate)},timeout:Lx,pulsate:de,rippleX:he,rippleY:ye,rippleSize:Ce},I.current)]),I.current+=1,A.current=Me},[d]),j=ne.useCallback((ee={},de={},he=()=>{})=>{const{pulsate:ye=!1,center:Ce=c||de.pulsate,fakeElement:Me=!1}=de;if((ee==null?void 0:ee.type)==="mousedown"&&M.current){M.current=!1;return}(ee==null?void 0:ee.type)==="touchstart"&&(M.current=!0);const ze=Me?null:Y.current,Re=ze?ze.getBoundingClientRect():{width:0,height:0,left:0,top:0};let te,Fe,Be;if(Ce||ee===void 0||ee.clientX===0&&ee.clientY===0||!ee.clientX&&!ee.touches)te=Math.round(Re.width/2),Fe=Math.round(Re.height/2);else{const{clientX:Ge,clientY:it}=ee.touches&&ee.touches.length>0?ee.touches[0]:ee;te=Math.round(Ge-Re.left),Fe=Math.round(it-Re.top)}if(Ce)Be=Math.sqrt((2*Re.width**2+Re.height**2)/3),Be%2===0&&(Be+=1);else{const Ge=Math.max(Math.abs((ze?ze.clientWidth:0)-te),te)*2+2,it=Math.max(Math.abs((ze?ze.clientHeight:0)-Fe),Fe)*2+2;Be=Math.sqrt(Ge**2+it**2)}ee!=null&&ee.touches?H.current===null&&(H.current=()=>{ae({pulsate:ye,rippleX:te,rippleY:Fe,rippleSize:Be,cb:he})},$.start(ZN,()=>{H.current&&(H.current(),H.current=null)})):ae({pulsate:ye,rippleX:te,rippleY:Fe,rippleSize:Be,cb:he})},[c,ae,$]),W=ne.useCallback(()=>{j({},{pulsate:!0})},[j]),G=ne.useCallback((ee,de)=>{if($.clear(),(ee==null?void 0:ee.type)==="touchend"&&H.current){H.current(),H.current=null,$.start(0,()=>{G(ee,de)});return}H.current=null,k(he=>he.length>0?he.slice(1):he),A.current=de},[$]);return ne.useImperativeHandle(i,()=>({pulsate:W,start:j,stop:G}),[W,j,G]),Ae.jsx(JN,{className:Ir(Cs.root,d.root,f),ref:Y,...u,children:Ae.jsx(Vb,{component:null,exit:!0,children:w})})});function tj(e){return vu("MuiButtonBase",e)}const nj=xu("MuiButtonBase",["root","disabled","focusVisible"]),rj=e=>{const{disabled:t,focusVisible:i,focusVisibleClassName:a,classes:c}=e,f=wh({root:["root",t&&"disabled",i&&"focusVisible"]},tj,c);return i&&a&&(f.root+=` ${a}`),f},ij=ps("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${nj.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),sj=ne.forwardRef(function(t,i){const a=bu({props:t,name:"MuiButtonBase"}),{action:c,centerRipple:d=!1,children:f,className:u,component:w="button",disabled:k=!1,disableRipple:I=!1,disableTouchRipple:A=!1,focusRipple:M=!1,focusVisibleClassName:$,LinkComponent:H="a",onBlur:Y,onClick:ae,onContextMenu:j,onDragLeave:W,onFocus:G,onFocusVisible:ee,onKeyDown:de,onKeyUp:he,onMouseDown:ye,onMouseLeave:Ce,onMouseUp:Me,onTouchEnd:ze,onTouchMove:Re,onTouchStart:te,tabIndex:Fe=0,TouchRippleProps:Be,touchRippleRef:Ge,type:it,...Je}=a,Ne=ne.useRef(null),$e=qN(),at=ta($e.ref,Ge),[St,Mt]=ne.useState(!1);k&&St&&Mt(!1),ne.useImperativeHandle(c,()=>({focusVisible:()=>{Mt(!0),Ne.current.focus()}}),[]);const Nn=$e.shouldMount&&!I&&!k;ne.useEffect(()=>{St&&M&&!I&&$e.pulsate()},[I,M,St,$e]);const Zt=jo($e,"start",ye,A),Yt=jo($e,"stop",j,A),_n=jo($e,"stop",W,A),Jt=jo($e,"stop",Me,A),dn=jo($e,"stop",wt=>{St&&wt.preventDefault(),Ce&&Ce(wt)},A),_r=jo($e,"start",te,A),li=jo($e,"stop",ze,A),Gr=jo($e,"stop",Re,A),wn=jo($e,"stop",wt=>{Wg(wt.target)||Mt(!1),Y&&Y(wt)},!1),hr=Jc(wt=>{Ne.current||(Ne.current=wt.currentTarget),Wg(wt.target)&&(Mt(!0),ee&&ee(wt)),G&&G(wt)}),jn=()=>{const wt=Ne.current;return w&&w!=="button"&&!(wt.tagName==="A"&&wt.href)},Dr=Jc(wt=>{M&&!wt.repeat&&St&&wt.key===" "&&$e.stop(wt,()=>{$e.start(wt)}),wt.target===wt.currentTarget&&jn()&&wt.key===" "&&wt.preventDefault(),de&&de(wt),wt.target===wt.currentTarget&&jn()&&wt.key==="Enter"&&!k&&(wt.preventDefault(),ae&&ae(wt))}),ke=Jc(wt=>{M&&wt.key===" "&&St&&!wt.defaultPrevented&&$e.stop(wt,()=>{$e.pulsate(wt)}),he&&he(wt),ae&&wt.target===wt.currentTarget&&jn()&&wt.key===" "&&!wt.defaultPrevented&&ae(wt)});let $n=w;$n==="button"&&(Je.href||Je.to)&&($n=H);const nr={};$n==="button"?(nr.type=it===void 0?"button":it,nr.disabled=k):(!Je.href&&!Je.to&&(nr.role="button"),k&&(nr["aria-disabled"]=k));const Dt=ta(i,Ne),Vt={...a,centerRipple:d,component:w,disabled:k,disableRipple:I,disableTouchRipple:A,focusRipple:M,tabIndex:Fe,focusVisible:St},Rr=rj(Vt);return Ae.jsxs(ij,{as:$n,className:Ir(Rr.root,u),ownerState:Vt,onBlur:wn,onClick:ae,onContextMenu:Yt,onFocus:hr,onKeyDown:Dr,onKeyUp:ke,onMouseDown:Zt,onMouseLeave:dn,onMouseUp:Jt,onDragLeave:_n,onTouchEnd:li,onTouchMove:Gr,onTouchStart:_r,ref:Dt,tabIndex:k?-1:Fe,type:it,...nr,...Je,children:[f,Nn?Ae.jsx(ej,{ref:at,center:d,...Be}):null]})});function jo(e,t,i,a=!1){return Jc(c=>(i&&i(c),a||e[t](c),!0))}function oj(e){return typeof e.main=="string"}function aj(e,t=[]){if(!oj(e))return!1;for(const i of t)if(!e.hasOwnProperty(i)||typeof e[i]!="string")return!1;return!0}function Fx(e=[]){return([,t])=>t&&aj(t,e)}function lj(e){return vu("MuiCircularProgress",e)}xu("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Na=44,Ox=up`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,Bx=up`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,uj=typeof Ox!="string"?Rb`
        animation: ${Ox} 1.4s linear infinite;
      `:null,cj=typeof Bx!="string"?Rb`
        animation: ${Bx} 1.4s ease-in-out infinite;
      `:null,hj=e=>{const{classes:t,variant:i,color:a,disableShrink:c}=e,d={root:["root",i,`color${Ar(a)}`],svg:["svg"],circle:["circle",`circle${Ar(i)}`,c&&"circleDisableShrink"]};return wh(d,lj,t)},dj=ps("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`color${Ar(i.color)}`]]}})(al(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:uj||{animation:`${Ox} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Fx()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),fj=ps("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),pj=ps("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.circle,t[`circle${Ar(i.variant)}`],i.disableShrink&&t.circleDisableShrink]}})(al(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:cj||{animation:`${Bx} 1.4s ease-in-out infinite`}}]}))),mj=ne.forwardRef(function(t,i){const a=bu({props:t,name:"MuiCircularProgress"}),{className:c,color:d="primary",disableShrink:f=!1,size:u=40,style:w,thickness:k=3.6,value:I=0,variant:A="indeterminate",...M}=a,$={...a,color:d,disableShrink:f,size:u,thickness:k,value:I,variant:A},H=hj($),Y={},ae={},j={};if(A==="determinate"){const W=2*Math.PI*((Na-k)/2);Y.strokeDasharray=W.toFixed(3),j["aria-valuenow"]=Math.round(I),Y.strokeDashoffset=`${((100-I)/100*W).toFixed(3)}px`,ae.transform="rotate(-90deg)"}return Ae.jsx(dj,{className:Ir(H.root,c),style:{width:u,height:u,...ae,...w},ownerState:$,ref:i,role:"progressbar",...j,...M,children:Ae.jsx(fj,{className:H.svg,ownerState:$,viewBox:`${Na/2} ${Na/2} ${Na} ${Na}`,children:Ae.jsx(pj,{className:H.circle,style:Y,ownerState:$,cx:Na,cy:Na,r:(Na-k)/2,fill:"none",strokeWidth:k})})})});function gj(e){return vu("MuiIconButton",e)}const KC=xu("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),yj=e=>{const{classes:t,disabled:i,color:a,edge:c,size:d,loading:f}=e,u={root:["root",f&&"loading",i&&"disabled",a!=="default"&&`color${Ar(a)}`,c&&`edge${Ar(c)}`,`size${Ar(d)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return wh(u,gj,t)},_j=ps(sj,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.loading&&t.loading,i.color!=="default"&&t[`color${Ar(i.color)}`],i.edge&&t[`edge${Ar(i.edge)}`],t[`size${Ar(i.size)}`]]}})(al(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),al(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Fx()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Fx()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${KC.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${KC.loading}`]:{color:"transparent"}}))),vj=ps("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),s0=ne.forwardRef(function(t,i){const a=bu({props:t,name:"MuiIconButton"}),{edge:c=!1,children:d,className:f,color:u="default",disabled:w=!1,disableFocusRipple:k=!1,size:I="medium",id:A,loading:M=null,loadingIndicator:$,...H}=a,Y=RM(A),ae=$??Ae.jsx(mj,{"aria-labelledby":Y,color:"inherit",size:16}),j={...a,edge:c,color:u,disabled:w,disableFocusRipple:k,loading:M,loadingIndicator:ae,size:I},W=yj(j);return Ae.jsxs(_j,{id:M?Y:A,className:Ir(W.root,f),centerRipple:!0,focusRipple:!k,disabled:w||M,ref:i,...H,ownerState:j,children:[typeof M=="boolean"&&Ae.jsx("span",{className:W.loadingWrapper,style:{display:"contents"},children:Ae.jsx(vj,{className:W.loadingIndicator,ownerState:j,children:M&&ae})}),d]})});var ji="top",Ls="bottom",Fs="right",$i="left",Nb="auto",cp=[ji,Ls,Fs,$i],hh="start",Hf="end",xj="clippingParents",KM="viewport",qd="popper",bj="reference",YC=cp.reduce(function(e,t){return e.concat([t+"-"+hh,t+"-"+Hf])},[]),YM=[].concat(cp,[Nb]).reduce(function(e,t){return e.concat([t,t+"-"+hh,t+"-"+Hf])},[]),wj="beforeRead",Sj="read",Tj="afterRead",Cj="beforeMain",kj="main",Pj="afterMain",Ej="beforeWrite",Ij="write",Mj="afterWrite",Aj=[wj,Sj,Tj,Cj,kj,Pj,Ej,Ij,Mj];function wo(e){return e?(e.nodeName||"").toLowerCase():null}function cs(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function mu(e){var t=cs(e).Element;return e instanceof t||e instanceof Element}function zs(e){var t=cs(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function jb(e){if(typeof ShadowRoot>"u")return!1;var t=cs(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function zj(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var a=t.styles[i]||{},c=t.attributes[i]||{},d=t.elements[i];!zs(d)||!wo(d)||(Object.assign(d.style,a),Object.keys(c).forEach(function(f){var u=c[f];u===!1?d.removeAttribute(f):d.setAttribute(f,u===!0?"":u)}))})}function Dj(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(a){var c=t.elements[a],d=t.attributes[a]||{},f=Object.keys(t.styles.hasOwnProperty(a)?t.styles[a]:i[a]),u=f.reduce(function(w,k){return w[k]="",w},{});!zs(c)||!wo(c)||(Object.assign(c.style,u),Object.keys(d).forEach(function(w){c.removeAttribute(w)}))})}}const Rj={name:"applyStyles",enabled:!0,phase:"write",fn:zj,effect:Dj,requires:["computeStyles"]};function bo(e){return e.split("-")[0]}var lu=Math.max,Gg=Math.min,dh=Math.round;function Vx(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function JM(){return!/^((?!chrome|android).)*safari/i.test(Vx())}function fh(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var a=e.getBoundingClientRect(),c=1,d=1;t&&zs(e)&&(c=e.offsetWidth>0&&dh(a.width)/e.offsetWidth||1,d=e.offsetHeight>0&&dh(a.height)/e.offsetHeight||1);var f=mu(e)?cs(e):window,u=f.visualViewport,w=!JM()&&i,k=(a.left+(w&&u?u.offsetLeft:0))/c,I=(a.top+(w&&u?u.offsetTop:0))/d,A=a.width/c,M=a.height/d;return{width:A,height:M,top:I,right:k+A,bottom:I+M,left:k,x:k,y:I}}function $b(e){var t=fh(e),i=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:a}}function QM(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&jb(i)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function na(e){return cs(e).getComputedStyle(e)}function Lj(e){return["table","td","th"].indexOf(wo(e))>=0}function dl(e){return((mu(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ky(e){return wo(e)==="html"?e:e.assignedSlot||e.parentNode||(jb(e)?e.host:null)||dl(e)}function JC(e){return!zs(e)||na(e).position==="fixed"?null:e.offsetParent}function Fj(e){var t=/firefox/i.test(Vx()),i=/Trident/i.test(Vx());if(i&&zs(e)){var a=na(e);if(a.position==="fixed")return null}var c=Ky(e);for(jb(c)&&(c=c.host);zs(c)&&["html","body"].indexOf(wo(c))<0;){var d=na(c);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return c;c=c.parentNode}return null}function hp(e){for(var t=cs(e),i=JC(e);i&&Lj(i)&&na(i).position==="static";)i=JC(i);return i&&(wo(i)==="html"||wo(i)==="body"&&na(i).position==="static")?t:i||Fj(e)||t}function Ub(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function yf(e,t,i){return lu(e,Gg(t,i))}function Oj(e,t,i){var a=yf(e,t,i);return a>i?i:a}function eA(){return{top:0,right:0,bottom:0,left:0}}function tA(e){return Object.assign({},eA(),e)}function nA(e,t){return t.reduce(function(i,a){return i[a]=e,i},{})}var Bj=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,tA(typeof t!="number"?t:nA(t,cp))};function Vj(e){var t,i=e.state,a=e.name,c=e.options,d=i.elements.arrow,f=i.modifiersData.popperOffsets,u=bo(i.placement),w=Ub(u),k=[$i,Fs].indexOf(u)>=0,I=k?"height":"width";if(!(!d||!f)){var A=Bj(c.padding,i),M=$b(d),$=w==="y"?ji:$i,H=w==="y"?Ls:Fs,Y=i.rects.reference[I]+i.rects.reference[w]-f[w]-i.rects.popper[I],ae=f[w]-i.rects.reference[w],j=hp(d),W=j?w==="y"?j.clientHeight||0:j.clientWidth||0:0,G=Y/2-ae/2,ee=A[$],de=W-M[I]-A[H],he=W/2-M[I]/2+G,ye=yf(ee,he,de),Ce=w;i.modifiersData[a]=(t={},t[Ce]=ye,t.centerOffset=ye-he,t)}}function Nj(e){var t=e.state,i=e.options,a=i.element,c=a===void 0?"[data-popper-arrow]":a;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||QM(t.elements.popper,c)&&(t.elements.arrow=c))}const jj={name:"arrow",enabled:!0,phase:"main",fn:Vj,effect:Nj,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ph(e){return e.split("-")[1]}var $j={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Uj(e,t){var i=e.x,a=e.y,c=t.devicePixelRatio||1;return{x:dh(i*c)/c||0,y:dh(a*c)/c||0}}function QC(e){var t,i=e.popper,a=e.popperRect,c=e.placement,d=e.variation,f=e.offsets,u=e.position,w=e.gpuAcceleration,k=e.adaptive,I=e.roundOffsets,A=e.isFixed,M=f.x,$=M===void 0?0:M,H=f.y,Y=H===void 0?0:H,ae=typeof I=="function"?I({x:$,y:Y}):{x:$,y:Y};$=ae.x,Y=ae.y;var j=f.hasOwnProperty("x"),W=f.hasOwnProperty("y"),G=$i,ee=ji,de=window;if(k){var he=hp(i),ye="clientHeight",Ce="clientWidth";if(he===cs(i)&&(he=dl(i),na(he).position!=="static"&&u==="absolute"&&(ye="scrollHeight",Ce="scrollWidth")),he=he,c===ji||(c===$i||c===Fs)&&d===Hf){ee=Ls;var Me=A&&he===de&&de.visualViewport?de.visualViewport.height:he[ye];Y-=Me-a.height,Y*=w?1:-1}if(c===$i||(c===ji||c===Ls)&&d===Hf){G=Fs;var ze=A&&he===de&&de.visualViewport?de.visualViewport.width:he[Ce];$-=ze-a.width,$*=w?1:-1}}var Re=Object.assign({position:u},k&&$j),te=I===!0?Uj({x:$,y:Y},cs(i)):{x:$,y:Y};if($=te.x,Y=te.y,w){var Fe;return Object.assign({},Re,(Fe={},Fe[ee]=W?"0":"",Fe[G]=j?"0":"",Fe.transform=(de.devicePixelRatio||1)<=1?"translate("+$+"px, "+Y+"px)":"translate3d("+$+"px, "+Y+"px, 0)",Fe))}return Object.assign({},Re,(t={},t[ee]=W?Y+"px":"",t[G]=j?$+"px":"",t.transform="",t))}function Wj(e){var t=e.state,i=e.options,a=i.gpuAcceleration,c=a===void 0?!0:a,d=i.adaptive,f=d===void 0?!0:d,u=i.roundOffsets,w=u===void 0?!0:u,k={placement:bo(t.placement),variation:ph(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,QC(Object.assign({},k,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:w})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,QC(Object.assign({},k,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:w})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const qj={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Wj,data:{}};var Vm={passive:!0};function Gj(e){var t=e.state,i=e.instance,a=e.options,c=a.scroll,d=c===void 0?!0:c,f=a.resize,u=f===void 0?!0:f,w=cs(t.elements.popper),k=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&k.forEach(function(I){I.addEventListener("scroll",i.update,Vm)}),u&&w.addEventListener("resize",i.update,Vm),function(){d&&k.forEach(function(I){I.removeEventListener("scroll",i.update,Vm)}),u&&w.removeEventListener("resize",i.update,Vm)}}const Hj={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Gj,data:{}};var Zj={left:"right",right:"left",bottom:"top",top:"bottom"};function ug(e){return e.replace(/left|right|bottom|top/g,function(t){return Zj[t]})}var Xj={start:"end",end:"start"};function ek(e){return e.replace(/start|end/g,function(t){return Xj[t]})}function Wb(e){var t=cs(e),i=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:i,scrollTop:a}}function qb(e){return fh(dl(e)).left+Wb(e).scrollLeft}function Kj(e,t){var i=cs(e),a=dl(e),c=i.visualViewport,d=a.clientWidth,f=a.clientHeight,u=0,w=0;if(c){d=c.width,f=c.height;var k=JM();(k||!k&&t==="fixed")&&(u=c.offsetLeft,w=c.offsetTop)}return{width:d,height:f,x:u+qb(e),y:w}}function Yj(e){var t,i=dl(e),a=Wb(e),c=(t=e.ownerDocument)==null?void 0:t.body,d=lu(i.scrollWidth,i.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),f=lu(i.scrollHeight,i.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),u=-a.scrollLeft+qb(e),w=-a.scrollTop;return na(c||i).direction==="rtl"&&(u+=lu(i.clientWidth,c?c.clientWidth:0)-d),{width:d,height:f,x:u,y:w}}function Gb(e){var t=na(e),i=t.overflow,a=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+c+a)}function rA(e){return["html","body","#document"].indexOf(wo(e))>=0?e.ownerDocument.body:zs(e)&&Gb(e)?e:rA(Ky(e))}function _f(e,t){var i;t===void 0&&(t=[]);var a=rA(e),c=a===((i=e.ownerDocument)==null?void 0:i.body),d=cs(a),f=c?[d].concat(d.visualViewport||[],Gb(a)?a:[]):a,u=t.concat(f);return c?u:u.concat(_f(Ky(f)))}function Nx(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Jj(e,t){var i=fh(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function tk(e,t,i){return t===KM?Nx(Kj(e,i)):mu(t)?Jj(t,i):Nx(Yj(dl(e)))}function Qj(e){var t=_f(Ky(e)),i=["absolute","fixed"].indexOf(na(e).position)>=0,a=i&&zs(e)?hp(e):e;return mu(a)?t.filter(function(c){return mu(c)&&QM(c,a)&&wo(c)!=="body"}):[]}function e$(e,t,i,a){var c=t==="clippingParents"?Qj(e):[].concat(t),d=[].concat(c,[i]),f=d[0],u=d.reduce(function(w,k){var I=tk(e,k,a);return w.top=lu(I.top,w.top),w.right=Gg(I.right,w.right),w.bottom=Gg(I.bottom,w.bottom),w.left=lu(I.left,w.left),w},tk(e,f,a));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function iA(e){var t=e.reference,i=e.element,a=e.placement,c=a?bo(a):null,d=a?ph(a):null,f=t.x+t.width/2-i.width/2,u=t.y+t.height/2-i.height/2,w;switch(c){case ji:w={x:f,y:t.y-i.height};break;case Ls:w={x:f,y:t.y+t.height};break;case Fs:w={x:t.x+t.width,y:u};break;case $i:w={x:t.x-i.width,y:u};break;default:w={x:t.x,y:t.y}}var k=c?Ub(c):null;if(k!=null){var I=k==="y"?"height":"width";switch(d){case hh:w[k]=w[k]-(t[I]/2-i[I]/2);break;case Hf:w[k]=w[k]+(t[I]/2-i[I]/2);break}}return w}function Zf(e,t){t===void 0&&(t={});var i=t,a=i.placement,c=a===void 0?e.placement:a,d=i.strategy,f=d===void 0?e.strategy:d,u=i.boundary,w=u===void 0?xj:u,k=i.rootBoundary,I=k===void 0?KM:k,A=i.elementContext,M=A===void 0?qd:A,$=i.altBoundary,H=$===void 0?!1:$,Y=i.padding,ae=Y===void 0?0:Y,j=tA(typeof ae!="number"?ae:nA(ae,cp)),W=M===qd?bj:qd,G=e.rects.popper,ee=e.elements[H?W:M],de=e$(mu(ee)?ee:ee.contextElement||dl(e.elements.popper),w,I,f),he=fh(e.elements.reference),ye=iA({reference:he,element:G,placement:c}),Ce=Nx(Object.assign({},G,ye)),Me=M===qd?Ce:he,ze={top:de.top-Me.top+j.top,bottom:Me.bottom-de.bottom+j.bottom,left:de.left-Me.left+j.left,right:Me.right-de.right+j.right},Re=e.modifiersData.offset;if(M===qd&&Re){var te=Re[c];Object.keys(ze).forEach(function(Fe){var Be=[Fs,Ls].indexOf(Fe)>=0?1:-1,Ge=[ji,Ls].indexOf(Fe)>=0?"y":"x";ze[Fe]+=te[Ge]*Be})}return ze}function t$(e,t){t===void 0&&(t={});var i=t,a=i.placement,c=i.boundary,d=i.rootBoundary,f=i.padding,u=i.flipVariations,w=i.allowedAutoPlacements,k=w===void 0?YM:w,I=ph(a),A=I?u?YC:YC.filter(function(H){return ph(H)===I}):cp,M=A.filter(function(H){return k.indexOf(H)>=0});M.length===0&&(M=A);var $=M.reduce(function(H,Y){return H[Y]=Zf(e,{placement:Y,boundary:c,rootBoundary:d,padding:f})[bo(Y)],H},{});return Object.keys($).sort(function(H,Y){return $[H]-$[Y]})}function n$(e){if(bo(e)===Nb)return[];var t=ug(e);return[ek(e),t,ek(t)]}function r$(e){var t=e.state,i=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var c=i.mainAxis,d=c===void 0?!0:c,f=i.altAxis,u=f===void 0?!0:f,w=i.fallbackPlacements,k=i.padding,I=i.boundary,A=i.rootBoundary,M=i.altBoundary,$=i.flipVariations,H=$===void 0?!0:$,Y=i.allowedAutoPlacements,ae=t.options.placement,j=bo(ae),W=j===ae,G=w||(W||!H?[ug(ae)]:n$(ae)),ee=[ae].concat(G).reduce(function(Zt,Yt){return Zt.concat(bo(Yt)===Nb?t$(t,{placement:Yt,boundary:I,rootBoundary:A,padding:k,flipVariations:H,allowedAutoPlacements:Y}):Yt)},[]),de=t.rects.reference,he=t.rects.popper,ye=new Map,Ce=!0,Me=ee[0],ze=0;ze<ee.length;ze++){var Re=ee[ze],te=bo(Re),Fe=ph(Re)===hh,Be=[ji,Ls].indexOf(te)>=0,Ge=Be?"width":"height",it=Zf(t,{placement:Re,boundary:I,rootBoundary:A,altBoundary:M,padding:k}),Je=Be?Fe?Fs:$i:Fe?Ls:ji;de[Ge]>he[Ge]&&(Je=ug(Je));var Ne=ug(Je),$e=[];if(d&&$e.push(it[te]<=0),u&&$e.push(it[Je]<=0,it[Ne]<=0),$e.every(function(Zt){return Zt})){Me=Re,Ce=!1;break}ye.set(Re,$e)}if(Ce)for(var at=H?3:1,St=function(Yt){var _n=ee.find(function(Jt){var dn=ye.get(Jt);if(dn)return dn.slice(0,Yt).every(function(_r){return _r})});if(_n)return Me=_n,"break"},Mt=at;Mt>0;Mt--){var Nn=St(Mt);if(Nn==="break")break}t.placement!==Me&&(t.modifiersData[a]._skip=!0,t.placement=Me,t.reset=!0)}}const i$={name:"flip",enabled:!0,phase:"main",fn:r$,requiresIfExists:["offset"],data:{_skip:!1}};function nk(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function rk(e){return[ji,Fs,Ls,$i].some(function(t){return e[t]>=0})}function s$(e){var t=e.state,i=e.name,a=t.rects.reference,c=t.rects.popper,d=t.modifiersData.preventOverflow,f=Zf(t,{elementContext:"reference"}),u=Zf(t,{altBoundary:!0}),w=nk(f,a),k=nk(u,c,d),I=rk(w),A=rk(k);t.modifiersData[i]={referenceClippingOffsets:w,popperEscapeOffsets:k,isReferenceHidden:I,hasPopperEscaped:A},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":I,"data-popper-escaped":A})}const o$={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:s$};function a$(e,t,i){var a=bo(e),c=[$i,ji].indexOf(a)>=0?-1:1,d=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,f=d[0],u=d[1];return f=f||0,u=(u||0)*c,[$i,Fs].indexOf(a)>=0?{x:u,y:f}:{x:f,y:u}}function l$(e){var t=e.state,i=e.options,a=e.name,c=i.offset,d=c===void 0?[0,0]:c,f=YM.reduce(function(I,A){return I[A]=a$(A,t.rects,d),I},{}),u=f[t.placement],w=u.x,k=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=w,t.modifiersData.popperOffsets.y+=k),t.modifiersData[a]=f}const u$={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:l$};function c$(e){var t=e.state,i=e.name;t.modifiersData[i]=iA({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const h$={name:"popperOffsets",enabled:!0,phase:"read",fn:c$,data:{}};function d$(e){return e==="x"?"y":"x"}function f$(e){var t=e.state,i=e.options,a=e.name,c=i.mainAxis,d=c===void 0?!0:c,f=i.altAxis,u=f===void 0?!1:f,w=i.boundary,k=i.rootBoundary,I=i.altBoundary,A=i.padding,M=i.tether,$=M===void 0?!0:M,H=i.tetherOffset,Y=H===void 0?0:H,ae=Zf(t,{boundary:w,rootBoundary:k,padding:A,altBoundary:I}),j=bo(t.placement),W=ph(t.placement),G=!W,ee=Ub(j),de=d$(ee),he=t.modifiersData.popperOffsets,ye=t.rects.reference,Ce=t.rects.popper,Me=typeof Y=="function"?Y(Object.assign({},t.rects,{placement:t.placement})):Y,ze=typeof Me=="number"?{mainAxis:Me,altAxis:Me}:Object.assign({mainAxis:0,altAxis:0},Me),Re=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,te={x:0,y:0};if(he){if(d){var Fe,Be=ee==="y"?ji:$i,Ge=ee==="y"?Ls:Fs,it=ee==="y"?"height":"width",Je=he[ee],Ne=Je+ae[Be],$e=Je-ae[Ge],at=$?-Ce[it]/2:0,St=W===hh?ye[it]:Ce[it],Mt=W===hh?-Ce[it]:-ye[it],Nn=t.elements.arrow,Zt=$&&Nn?$b(Nn):{width:0,height:0},Yt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:eA(),_n=Yt[Be],Jt=Yt[Ge],dn=yf(0,ye[it],Zt[it]),_r=G?ye[it]/2-at-dn-_n-ze.mainAxis:St-dn-_n-ze.mainAxis,li=G?-ye[it]/2+at+dn+Jt+ze.mainAxis:Mt+dn+Jt+ze.mainAxis,Gr=t.elements.arrow&&hp(t.elements.arrow),wn=Gr?ee==="y"?Gr.clientTop||0:Gr.clientLeft||0:0,hr=(Fe=Re==null?void 0:Re[ee])!=null?Fe:0,jn=Je+_r-hr-wn,Dr=Je+li-hr,ke=yf($?Gg(Ne,jn):Ne,Je,$?lu($e,Dr):$e);he[ee]=ke,te[ee]=ke-Je}if(u){var $n,nr=ee==="x"?ji:$i,Dt=ee==="x"?Ls:Fs,Vt=he[de],Rr=de==="y"?"height":"width",wt=Vt+ae[nr],Lr=Vt-ae[Dt],Si=[ji,$i].indexOf(j)!==-1,dr=($n=Re==null?void 0:Re[de])!=null?$n:0,ms=Si?wt:Vt-ye[Rr]-Ce[Rr]-dr+ze.altAxis,Ti=Si?Vt+ye[Rr]+Ce[Rr]-dr-ze.altAxis:Lr,Ue=$&&Si?Oj(ms,Vt,Ti):yf($?ms:wt,Vt,$?Ti:Lr);he[de]=Ue,te[de]=Ue-Vt}t.modifiersData[a]=te}}const p$={name:"preventOverflow",enabled:!0,phase:"main",fn:f$,requiresIfExists:["offset"]};function m$(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function g$(e){return e===cs(e)||!zs(e)?Wb(e):m$(e)}function y$(e){var t=e.getBoundingClientRect(),i=dh(t.width)/e.offsetWidth||1,a=dh(t.height)/e.offsetHeight||1;return i!==1||a!==1}function _$(e,t,i){i===void 0&&(i=!1);var a=zs(t),c=zs(t)&&y$(t),d=dl(t),f=fh(e,c,i),u={scrollLeft:0,scrollTop:0},w={x:0,y:0};return(a||!a&&!i)&&((wo(t)!=="body"||Gb(d))&&(u=g$(t)),zs(t)?(w=fh(t,!0),w.x+=t.clientLeft,w.y+=t.clientTop):d&&(w.x=qb(d))),{x:f.left+u.scrollLeft-w.x,y:f.top+u.scrollTop-w.y,width:f.width,height:f.height}}function v$(e){var t=new Map,i=new Set,a=[];e.forEach(function(d){t.set(d.name,d)});function c(d){i.add(d.name);var f=[].concat(d.requires||[],d.requiresIfExists||[]);f.forEach(function(u){if(!i.has(u)){var w=t.get(u);w&&c(w)}}),a.push(d)}return e.forEach(function(d){i.has(d.name)||c(d)}),a}function x$(e){var t=v$(e);return Aj.reduce(function(i,a){return i.concat(t.filter(function(c){return c.phase===a}))},[])}function b$(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function w$(e){var t=e.reduce(function(i,a){var c=i[a.name];return i[a.name]=c?Object.assign({},c,a,{options:Object.assign({},c.options,a.options),data:Object.assign({},c.data,a.data)}):a,i},{});return Object.keys(t).map(function(i){return t[i]})}var ik={placement:"bottom",modifiers:[],strategy:"absolute"};function sk(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function S$(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,a=i===void 0?[]:i,c=t.defaultOptions,d=c===void 0?ik:c;return function(u,w,k){k===void 0&&(k=d);var I={placement:"bottom",orderedModifiers:[],options:Object.assign({},ik,d),modifiersData:{},elements:{reference:u,popper:w},attributes:{},styles:{}},A=[],M=!1,$={state:I,setOptions:function(j){var W=typeof j=="function"?j(I.options):j;Y(),I.options=Object.assign({},d,I.options,W),I.scrollParents={reference:mu(u)?_f(u):u.contextElement?_f(u.contextElement):[],popper:_f(w)};var G=x$(w$([].concat(a,I.options.modifiers)));return I.orderedModifiers=G.filter(function(ee){return ee.enabled}),H(),$.update()},forceUpdate:function(){if(!M){var j=I.elements,W=j.reference,G=j.popper;if(sk(W,G)){I.rects={reference:_$(W,hp(G),I.options.strategy==="fixed"),popper:$b(G)},I.reset=!1,I.placement=I.options.placement,I.orderedModifiers.forEach(function(ze){return I.modifiersData[ze.name]=Object.assign({},ze.data)});for(var ee=0;ee<I.orderedModifiers.length;ee++){if(I.reset===!0){I.reset=!1,ee=-1;continue}var de=I.orderedModifiers[ee],he=de.fn,ye=de.options,Ce=ye===void 0?{}:ye,Me=de.name;typeof he=="function"&&(I=he({state:I,options:Ce,name:Me,instance:$})||I)}}}},update:b$(function(){return new Promise(function(ae){$.forceUpdate(),ae(I)})}),destroy:function(){Y(),M=!0}};if(!sk(u,w))return $;$.setOptions(k).then(function(ae){!M&&k.onFirstUpdate&&k.onFirstUpdate(ae)});function H(){I.orderedModifiers.forEach(function(ae){var j=ae.name,W=ae.options,G=W===void 0?{}:W,ee=ae.effect;if(typeof ee=="function"){var de=ee({state:I,name:j,instance:$,options:G}),he=function(){};A.push(de||he)}})}function Y(){A.forEach(function(ae){return ae()}),A=[]}return $}}var T$=[Hj,h$,qj,Rj,u$,i$,p$,jj,o$],C$=S$({defaultModifiers:T$});function k$(e){var A;const{elementType:t,externalSlotProps:i,ownerState:a,skipResolvingSlotProps:c=!1,...d}=e,f=c?{}:ZM(i,a),{props:u,internalRef:w}=XM({...d,externalSlotProps:f}),k=ta(w,f==null?void 0:f.ref,(A=e.additionalProps)==null?void 0:A.ref);return HM(t,{...u,ref:k},a)}function Hb(e){var t;return parseInt(ne.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function P$(e){return typeof e=="function"?e():e}const E$=ne.forwardRef(function(t,i){const{children:a,container:c,disablePortal:d=!1}=t,[f,u]=ne.useState(null),w=ta(ne.isValidElement(a)?Hb(a):null,i);if(qf(()=>{d||u(P$(c)||document.body)},[c,d]),qf(()=>{if(f&&!d)return qC(i,f),()=>{qC(i,null)}},[i,f,d]),d){if(ne.isValidElement(a)){const k={ref:w};return ne.cloneElement(a,k)}return a}return f&&_h.createPortal(a,f)});function I$(e){return vu("MuiPopper",e)}xu("MuiPopper",["root"]);function M$(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function jx(e){return typeof e=="function"?e():e}function A$(e){return e.nodeType!==void 0}const z$=e=>{const{classes:t}=e;return wh({root:["root"]},I$,t)},D$={},R$=ne.forwardRef(function(t,i){const{anchorEl:a,children:c,direction:d,disablePortal:f,modifiers:u,open:w,placement:k,popperOptions:I,popperRef:A,slotProps:M={},slots:$={},TransitionProps:H,ownerState:Y,...ae}=t,j=ne.useRef(null),W=ta(j,i),G=ne.useRef(null),ee=ta(G,A),de=ne.useRef(ee);qf(()=>{de.current=ee},[ee]),ne.useImperativeHandle(A,()=>G.current,[]);const he=M$(k,d),[ye,Ce]=ne.useState(he),[Me,ze]=ne.useState(jx(a));ne.useEffect(()=>{G.current&&G.current.forceUpdate()}),ne.useEffect(()=>{a&&ze(jx(a))},[a]),qf(()=>{if(!Me||!w)return;const Ge=Ne=>{Ce(Ne.placement)};let it=[{name:"preventOverflow",options:{altBoundary:f}},{name:"flip",options:{altBoundary:f}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ne})=>{Ge(Ne)}}];u!=null&&(it=it.concat(u)),I&&I.modifiers!=null&&(it=it.concat(I.modifiers));const Je=C$(Me,j.current,{placement:he,...I,modifiers:it});return de.current(Je),()=>{Je.destroy(),de.current(null)}},[Me,f,u,w,I,he]);const Re={placement:ye};H!==null&&(Re.TransitionProps=H);const te=z$(t),Fe=$.root??"div",Be=k$({elementType:Fe,externalSlotProps:M.root,externalForwardedProps:ae,additionalProps:{role:"tooltip",ref:W},ownerState:t,className:te.root});return Ae.jsx(Fe,{...Be,children:typeof c=="function"?c(Re):c})}),L$=ne.forwardRef(function(t,i){const{anchorEl:a,children:c,container:d,direction:f="ltr",disablePortal:u=!1,keepMounted:w=!1,modifiers:k,open:I,placement:A="bottom",popperOptions:M=D$,popperRef:$,style:H,transition:Y=!1,slotProps:ae={},slots:j={},...W}=t,[G,ee]=ne.useState(!0),de=()=>{ee(!1)},he=()=>{ee(!0)};if(!w&&!I&&(!Y||G))return null;let ye;if(d)ye=d;else if(a){const ze=jx(a);ye=ze&&A$(ze)?WC(ze).body:WC(null).body}const Ce=!I&&w&&(!Y||G)?"none":void 0,Me=Y?{in:I,onEnter:de,onExited:he}:void 0;return Ae.jsx(E$,{disablePortal:u,container:ye,children:Ae.jsx(R$,{anchorEl:a,direction:f,disablePortal:u,modifiers:k,ref:i,open:Y?!G:I,placement:A,popperOptions:M,popperRef:$,slotProps:ae,slots:j,...W,style:{position:"fixed",top:0,left:0,display:Ce,...H},TransitionProps:Me,children:c})})}),F$=ps(L$,{name:"MuiPopper",slot:"Root"})({}),sA=ne.forwardRef(function(t,i){const a=DM(),c=bu({props:t,name:"MuiPopper"}),{anchorEl:d,component:f,components:u,componentsProps:w,container:k,disablePortal:I,keepMounted:A,modifiers:M,open:$,placement:H,popperOptions:Y,popperRef:ae,transition:j,slots:W,slotProps:G,...ee}=c,de=(W==null?void 0:W.root)??(u==null?void 0:u.Root),he={anchorEl:d,container:k,disablePortal:I,keepMounted:A,modifiers:M,open:$,placement:H,popperOptions:Y,popperRef:ae,transition:j,...ee};return Ae.jsx(F$,{as:f,direction:a?"rtl":"ltr",slots:{root:de},slotProps:G??w,...he,ref:i})});function $x(e){return`scale(${e}, ${e**2})`}const O$={entering:{opacity:1,transform:$x(1)},entered:{opacity:1,transform:"none"}},o0=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Ux=ne.forwardRef(function(t,i){const{addEndListener:a,appear:c=!0,children:d,easing:f,in:u,onEnter:w,onEntered:k,onEntering:I,onExit:A,onExited:M,onExiting:$,style:H,timeout:Y="auto",TransitionComponent:ae=sa,...j}=t,W=$c(),G=ne.useRef(),ee=UM(),de=ne.useRef(null),he=ta(de,Hb(d),i),ye=Ge=>it=>{if(Ge){const Je=de.current;it===void 0?Ge(Je):Ge(Je,it)}},Ce=ye(I),Me=ye((Ge,it)=>{$N(Ge);const{duration:Je,delay:Ne,easing:$e}=ZC({style:H,timeout:Y,easing:f},{mode:"enter"});let at;Y==="auto"?(at=ee.transitions.getAutoHeightDuration(Ge.clientHeight),G.current=at):at=Je,Ge.style.transition=[ee.transitions.create("opacity",{duration:at,delay:Ne}),ee.transitions.create("transform",{duration:o0?at:at*.666,delay:Ne,easing:$e})].join(","),w&&w(Ge,it)}),ze=ye(k),Re=ye($),te=ye(Ge=>{const{duration:it,delay:Je,easing:Ne}=ZC({style:H,timeout:Y,easing:f},{mode:"exit"});let $e;Y==="auto"?($e=ee.transitions.getAutoHeightDuration(Ge.clientHeight),G.current=$e):$e=it,Ge.style.transition=[ee.transitions.create("opacity",{duration:$e,delay:Je}),ee.transitions.create("transform",{duration:o0?$e:$e*.666,delay:o0?Je:Je||$e*.333,easing:Ne})].join(","),Ge.style.opacity=0,Ge.style.transform=$x(.75),A&&A(Ge)}),Fe=ye(M),Be=Ge=>{Y==="auto"&&W.start(G.current||0,Ge),a&&a(de.current,Ge)};return Ae.jsx(ae,{appear:c,in:u,nodeRef:de,onEnter:Me,onEntered:ze,onEntering:Ce,onExit:te,onExited:Fe,onExiting:Re,addEndListener:Be,timeout:Y==="auto"?null:Y,...j,children:(Ge,{ownerState:it,...Je})=>ne.cloneElement(d,{style:{opacity:0,transform:$x(.75),visibility:Ge==="exited"&&!u?"hidden":void 0,...O$[Ge],...H,...d.props.style},ref:he,...Je})})});Ux&&(Ux.muiSupportAuto=!0);function B$(e){return vu("MuiTooltip",e)}const Zn=xu("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function V$(e){return Math.round(e*1e5)/1e5}const N$=e=>{const{classes:t,disableInteractive:i,arrow:a,touch:c,placement:d}=e,f={popper:["popper",!i&&"popperInteractive",a&&"popperArrow"],tooltip:["tooltip",a&&"tooltipArrow",c&&"touch",`tooltipPlacement${Ar(d.split("-")[0])}`],arrow:["arrow"]};return wh(f,B$,t)},j$=ps(sA,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.popper,!i.disableInteractive&&t.popperInteractive,i.arrow&&t.popperArrow,!i.open&&t.popperClose]}})(al(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${Zn.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Zn.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Zn.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Zn.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${Zn.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${Zn.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${Zn.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${Zn.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),$$=ps("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.tooltip,i.touch&&t.touch,i.arrow&&t.tooltipArrow,t[`tooltipPlacement${Ar(i.placement.split("-")[0])}`]]}})(al(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${Zn.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Zn.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Zn.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Zn.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${V$(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${Zn.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Zn.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${Zn.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Zn.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${Zn.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Zn.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${Zn.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Zn.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${Zn.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${Zn.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),U$=ps("span",{name:"MuiTooltip",slot:"Arrow"})(al(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let Nm=!1;const ok=new Xy;let Gd={x:0,y:0};function jm(e,t){return(i,...a)=>{t&&t(i,...a),e(i,...a)}}const W$=ne.forwardRef(function(t,i){const a=bu({props:t,name:"MuiTooltip"}),{arrow:c=!1,children:d,classes:f,components:u={},componentsProps:w={},describeChild:k=!1,disableFocusListener:I=!1,disableHoverListener:A=!1,disableInteractive:M=!1,disableTouchListener:$=!1,enterDelay:H=100,enterNextDelay:Y=0,enterTouchDelay:ae=700,followCursor:j=!1,id:W,leaveDelay:G=0,leaveTouchDelay:ee=1500,onClose:de,onOpen:he,open:ye,placement:Ce="bottom",PopperComponent:Me,PopperProps:ze={},slotProps:Re={},slots:te={},title:Fe,TransitionComponent:Be,TransitionProps:Ge,...it}=a,Je=ne.isValidElement(d)?d:Ae.jsx("span",{children:d}),Ne=UM(),$e=DM(),[at,St]=ne.useState(),[Mt,Nn]=ne.useState(null),Zt=ne.useRef(!1),Yt=M||j,_n=$c(),Jt=$c(),dn=$c(),_r=$c(),[li,Gr]=EN({controlled:ye,default:!1});let wn=li;const hr=RM(W),jn=ne.useRef(),Dr=Jc(()=>{jn.current!==void 0&&(document.body.style.WebkitUserSelect=jn.current,jn.current=void 0),_r.clear()});ne.useEffect(()=>Dr,[Dr]);const ke=J=>{ok.clear(),Nm=!0,Gr(!0),he&&!wn&&he(J)},$n=Jc(J=>{ok.start(800+G,()=>{Nm=!1}),Gr(!1),de&&wn&&de(J),_n.start(Ne.transitions.duration.shortest,()=>{Zt.current=!1})}),nr=J=>{Zt.current&&J.type!=="touchstart"||(at&&at.removeAttribute("title"),Jt.clear(),dn.clear(),H||Nm&&Y?Jt.start(Nm?Y:H,()=>{ke(J)}):ke(J))},Dt=J=>{Jt.clear(),dn.start(G,()=>{$n(J)})},[,Vt]=ne.useState(!1),Rr=J=>{Wg(J.target)||(Vt(!1),Dt(J))},wt=J=>{at||St(J.currentTarget),Wg(J.target)&&(Vt(!0),nr(J))},Lr=J=>{Zt.current=!0;const pe=Je.props;pe.onTouchStart&&pe.onTouchStart(J)},Si=J=>{Lr(J),dn.clear(),_n.clear(),Dr(),jn.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",_r.start(ae,()=>{document.body.style.WebkitUserSelect=jn.current,nr(J)})},dr=J=>{Je.props.onTouchEnd&&Je.props.onTouchEnd(J),Dr(),dn.start(ee,()=>{$n(J)})};ne.useEffect(()=>{if(!wn)return;function J(pe){pe.key==="Escape"&&$n(pe)}return document.addEventListener("keydown",J),()=>{document.removeEventListener("keydown",J)}},[$n,wn]);const ms=ta(Hb(Je),St,i);!Fe&&Fe!==0&&(wn=!1);const Ti=ne.useRef(),Ue=J=>{const pe=Je.props;pe.onMouseMove&&pe.onMouseMove(J),Gd={x:J.clientX,y:J.clientY},Ti.current&&Ti.current.update()},vr={},Yn=typeof Fe=="string";k?(vr.title=!wn&&Yn&&!A?Fe:null,vr["aria-describedby"]=wn?hr:null):(vr["aria-label"]=Yn?Fe:null,vr["aria-labelledby"]=wn&&!Yn?hr:null);const Pn={...vr,...it,...Je.props,className:Ir(it.className,Je.props.className),onTouchStart:Lr,ref:ms,...j?{onMouseMove:Ue}:{}},Hr={};$||(Pn.onTouchStart=Si,Pn.onTouchEnd=dr),A||(Pn.onMouseOver=jm(nr,Pn.onMouseOver),Pn.onMouseLeave=jm(Dt,Pn.onMouseLeave),Yt||(Hr.onMouseOver=nr,Hr.onMouseLeave=Dt)),I||(Pn.onFocus=jm(wt,Pn.onFocus),Pn.onBlur=jm(Rr,Pn.onBlur),Yt||(Hr.onFocus=wt,Hr.onBlur=Rr));const qe={...a,isRtl:$e,arrow:c,disableInteractive:Yt,placement:Ce,PopperComponentProp:Me,touch:Zt.current},xt=typeof Re.popper=="function"?Re.popper(qe):Re.popper,bt=ne.useMemo(()=>{var pe,ve;let J=[{name:"arrow",enabled:!!Mt,options:{element:Mt,padding:4}}];return(pe=ze.popperOptions)!=null&&pe.modifiers&&(J=J.concat(ze.popperOptions.modifiers)),(ve=xt==null?void 0:xt.popperOptions)!=null&&ve.modifiers&&(J=J.concat(xt.popperOptions.modifiers)),{...ze.popperOptions,...xt==null?void 0:xt.popperOptions,modifiers:J}},[Mt,ze.popperOptions,xt==null?void 0:xt.popperOptions]),rr=N$(qe),ui=typeof Re.transition=="function"?Re.transition(qe):Re.transition,Tt={slots:{popper:u.Popper,transition:u.Transition??Be,tooltip:u.Tooltip,arrow:u.Arrow,...te},slotProps:{arrow:Re.arrow??w.arrow,popper:{...ze,...xt??w.popper},tooltip:Re.tooltip??w.tooltip,transition:{...Ge,...ui??w.transition}}},[Ci,Wi]=Bm("popper",{elementType:j$,externalForwardedProps:Tt,ownerState:qe,className:Ir(rr.popper,ze==null?void 0:ze.className)}),[gs,ki]=Bm("transition",{elementType:Ux,externalForwardedProps:Tt,ownerState:qe}),[oe,V]=Bm("tooltip",{elementType:$$,className:rr.tooltip,externalForwardedProps:Tt,ownerState:qe}),[B,X]=Bm("arrow",{elementType:U$,className:rr.arrow,externalForwardedProps:Tt,ownerState:qe,ref:Nn});return Ae.jsxs(ne.Fragment,{children:[ne.cloneElement(Je,Pn),Ae.jsx(Ci,{as:Me??sA,placement:Ce,anchorEl:j?{getBoundingClientRect:()=>({top:Gd.y,left:Gd.x,right:Gd.x,bottom:Gd.y,width:0,height:0})}:at,popperRef:Ti,open:at?wn:!1,id:hr,transition:!0,...Hr,...Wi,popperOptions:bt,children:({TransitionProps:J})=>Ae.jsx(gs,{timeout:Ne.transitions.duration.shorter,...J,...ki,children:Ae.jsxs(oe,{...V,children:[Fe,c?Ae.jsx(B,{...X}):null]})})})]})}),q$={position:"absolute",top:16,left:16,width:300,display:"flex",flexDirection:"column",gap:0,borderRadius:16,overflow:"hidden",background:"rgba(255,255,255,0.92)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",border:"1px solid rgba(0,0,0,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.12)",color:"#0f172a"},$m={padding:"14px 16px"},a0={height:1,background:"rgba(0,0,0,0.07)",margin:"0 16px"};function G$(){const[e,t]=ne.useState(5),[i,a]=ne.useState(!0),[c,d]=ne.useState([]),[f,u]=ne.useState(0),[w,k]=ne.useState([]),[I,A]=ne.useState(!1),M=c[f]??null;return Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(sB,{route:M}),Ae.jsx(W$,{title:i?"Hide panel":"Show panel",placement:"right",children:Ae.jsx(s0,{onClick:()=>a($=>!$),size:"small",sx:{position:"absolute",top:20,left:i?328:20,zIndex:10,background:"rgba(255,255,255,0.92)",backdropFilter:"blur(18px)",border:"1px solid rgba(0,0,0,0.08)",color:"#0f172a",width:28,height:28,transition:"left 0.3s ease","&:hover":{background:"#fff"}},children:i?Ae.jsx(AN,{fontSize:"small"}):Ae.jsx(zN,{fontSize:"small"})})}),Ae.jsx(Sx.div,{animate:{x:i?0:-320,opacity:i?1:0},transition:{type:"tween",duration:.28},style:{position:"absolute",top:16,left:16,pointerEvents:i?"auto":"none"},children:Ae.jsxs("div",{style:q$,children:[Ae.jsx("div",{style:$m,children:Ae.jsx(rB,{onRoutes:$=>{d($),u(0)},targetMiles:e,polygon:I?w:void 0})}),Ae.jsx(gI,{children:c.length>0&&Ae.jsxs(Sx.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:[Ae.jsx("div",{style:a0}),Ae.jsxs("div",{style:{...$m,paddingTop:10,paddingBottom:10},children:[Ae.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[Ae.jsx(s0,{size:"small",onClick:()=>u($=>$-1),disabled:f===0,sx:{color:"#cbd5e1","&:not(:disabled)":{color:"#0f172a"},p:.5},children:Ae.jsx(IN,{sx:{fontSize:14}})}),Ae.jsxs("div",{style:{textAlign:"center"},children:[Ae.jsxs("div",{style:{fontSize:12,fontWeight:600,color:"#0f172a",letterSpacing:"0.02em"},children:["Route ",f+1," ",Ae.jsxs("span",{style:{color:"#94a3b8"},children:["/ ",c.length]})]}),Ae.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:1},children:[M==null?void 0:M.distanceMiles.toFixed(2)," mi","  ",(()=>{const $=Math.round((M==null?void 0:M.durationMinutes)??0),H=Math.floor($/60),Y=$%60;return H>0?`${H}h ${Y}m`:`${$}m`})()]})]}),Ae.jsx(s0,{size:"small",onClick:()=>u($=>$+1),disabled:f===c.length-1,sx:{color:"#cbd5e1","&:not(:disabled)":{color:"#0f172a"},p:.5},children:Ae.jsx(MN,{sx:{fontSize:14}})})]}),M&&Ae.jsx(uB,{route:M})]})]},"route-section")}),Ae.jsx("div",{style:a0}),Ae.jsx("div",{style:$m,children:Ae.jsx(KO,{value:e,onChange:t})}),Ae.jsx("div",{style:a0}),Ae.jsxs("div",{style:{...$m,paddingTop:10,paddingBottom:10},children:[Ae.jsx("div",{style:{fontSize:11,color:"#94a3b8",fontWeight:600,letterSpacing:"0.06em",textTransform:"uppercase",marginBottom:8},children:"Region"}),Ae.jsx(XO,{polygonCoords:w,polygonClosed:I,setPolygonCoords:k,setPolygonClosed:A})]})]})})]})}function H$(){return Ae.jsx(Ae.Fragment,{children:Ae.jsxs(VL,{initialViewState:{longitude:Rg[0],latitude:Rg[1],zoom:2},mapStyle:"https://tiles.openfreemap.org/styles/liberty",children:[Ae.jsx(g5,{}),Ae.jsx(G$,{})]})})}xE(document.getElementById("root")).render(Ae.jsx(H$,{}));
