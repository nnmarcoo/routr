var jL=Object.defineProperty;var UL=(e,t,n)=>t in e?jL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tp=(e,t,n)=>UL(e,typeof t!="symbol"?t+"":t,n);function $k(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(s,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();var WL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nk={exports:{}},Ny={},Vk={exports:{}},Dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=Symbol.for("react.element"),HL=Symbol.for("react.portal"),qL=Symbol.for("react.fragment"),GL=Symbol.for("react.strict_mode"),ZL=Symbol.for("react.profiler"),KL=Symbol.for("react.provider"),XL=Symbol.for("react.context"),YL=Symbol.for("react.forward_ref"),JL=Symbol.for("react.suspense"),QL=Symbol.for("react.memo"),eD=Symbol.for("react.lazy"),G2=Symbol.iterator;function tD(e){return e===null||typeof e!="object"?null:(e=G2&&e[G2]||e["@@iterator"],typeof e=="function"?e:null)}var jk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uk=Object.assign,Wk={};function Vh(e,t,n){this.props=e,this.context=t,this.refs=Wk,this.updater=n||jk}Vh.prototype.isReactComponent={};Vh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hk(){}Hk.prototype=Vh.prototype;function Jb(e,t,n){this.props=e,this.context=t,this.refs=Wk,this.updater=n||jk}var Qb=Jb.prototype=new Hk;Qb.constructor=Jb;Uk(Qb,Vh.prototype);Qb.isPureReactComponent=!0;var Z2=Array.isArray,qk=Object.prototype.hasOwnProperty,e1={current:null},Gk={key:!0,ref:!0,__self:!0,__source:!0};function Zk(e,t,n){var s,c={},d=null,p=null;if(t!=null)for(s in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(d=""+t.key),t)qk.call(t,s)&&!Gk.hasOwnProperty(s)&&(c[s]=t[s]);var l=arguments.length-2;if(l===1)c.children=n;else if(1<l){for(var b=Array(l),T=0;T<l;T++)b[T]=arguments[T+2];c.children=b}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)c[s]===void 0&&(c[s]=l[s]);return{$$typeof:Pf,type:e,key:d,ref:p,props:c,_owner:e1.current}}function nD(e,t){return{$$typeof:Pf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function t1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pf}function rD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var K2=/\/+/g;function mx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rD(""+e.key):t.toString(36)}function kg(e,t,n,s,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(d){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case Pf:case HL:p=!0}}if(p)return p=e,c=c(p),e=s===""?"."+mx(p,0):s,Z2(c)?(n="",e!=null&&(n=e.replace(K2,"$&/")+"/"),kg(c,t,n,"",function(T){return T})):c!=null&&(t1(c)&&(c=nD(c,n+(!c.key||p&&p.key===c.key?"":(""+c.key).replace(K2,"$&/")+"/")+e)),t.push(c)),1;if(p=0,s=s===""?".":s+":",Z2(e))for(var l=0;l<e.length;l++){d=e[l];var b=s+mx(d,l);p+=kg(d,t,n,b,c)}else if(b=tD(e),typeof b=="function")for(e=b.call(e),l=0;!(d=e.next()).done;)d=d.value,b=s+mx(d,l++),p+=kg(d,t,n,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function Gm(e,t,n){if(e==null)return e;var s=[],c=0;return kg(e,s,"","",function(d){return t.call(n,d,c++)}),s}function iD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Zi={current:null},Eg={transition:null},oD={ReactCurrentDispatcher:Zi,ReactCurrentBatchConfig:Eg,ReactCurrentOwner:e1};function Kk(){throw Error("act(...) is not supported in production builds of React.")}Dn.Children={map:Gm,forEach:function(e,t,n){Gm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Gm(e,function(){t++}),t},toArray:function(e){return Gm(e,function(t){return t})||[]},only:function(e){if(!t1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dn.Component=Vh;Dn.Fragment=qL;Dn.Profiler=ZL;Dn.PureComponent=Jb;Dn.StrictMode=GL;Dn.Suspense=JL;Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oD;Dn.act=Kk;Dn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Uk({},e.props),c=e.key,d=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,p=e1.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)qk.call(t,b)&&!Gk.hasOwnProperty(b)&&(s[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)s.children=n;else if(1<b){l=Array(b);for(var T=0;T<b;T++)l[T]=arguments[T+2];s.children=l}return{$$typeof:Pf,type:e.type,key:c,ref:d,props:s,_owner:p}};Dn.createContext=function(e){return e={$$typeof:XL,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:KL,_context:e},e.Consumer=e};Dn.createElement=Zk;Dn.createFactory=function(e){var t=Zk.bind(null,e);return t.type=e,t};Dn.createRef=function(){return{current:null}};Dn.forwardRef=function(e){return{$$typeof:YL,render:e}};Dn.isValidElement=t1;Dn.lazy=function(e){return{$$typeof:eD,_payload:{_status:-1,_result:e},_init:iD}};Dn.memo=function(e,t){return{$$typeof:QL,type:e,compare:t===void 0?null:t}};Dn.startTransition=function(e){var t=Eg.transition;Eg.transition={};try{e()}finally{Eg.transition=t}};Dn.unstable_act=Kk;Dn.useCallback=function(e,t){return Zi.current.useCallback(e,t)};Dn.useContext=function(e){return Zi.current.useContext(e)};Dn.useDebugValue=function(){};Dn.useDeferredValue=function(e){return Zi.current.useDeferredValue(e)};Dn.useEffect=function(e,t){return Zi.current.useEffect(e,t)};Dn.useId=function(){return Zi.current.useId()};Dn.useImperativeHandle=function(e,t,n){return Zi.current.useImperativeHandle(e,t,n)};Dn.useInsertionEffect=function(e,t){return Zi.current.useInsertionEffect(e,t)};Dn.useLayoutEffect=function(e,t){return Zi.current.useLayoutEffect(e,t)};Dn.useMemo=function(e,t){return Zi.current.useMemo(e,t)};Dn.useReducer=function(e,t,n){return Zi.current.useReducer(e,t,n)};Dn.useRef=function(e){return Zi.current.useRef(e)};Dn.useState=function(e){return Zi.current.useState(e)};Dn.useSyncExternalStore=function(e,t,n){return Zi.current.useSyncExternalStore(e,t,n)};Dn.useTransition=function(){return Zi.current.useTransition()};Dn.version="18.3.1";Vk.exports=Dn;var W=Vk.exports;const Vs=Yb(W),f0=$k({__proto__:null,default:Vs},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD=W,aD=Symbol.for("react.element"),lD=Symbol.for("react.fragment"),uD=Object.prototype.hasOwnProperty,cD=sD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hD={key:!0,ref:!0,__self:!0,__source:!0};function Xk(e,t,n){var s,c={},d=null,p=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(p=t.ref);for(s in t)uD.call(t,s)&&!hD.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)c[s]===void 0&&(c[s]=t[s]);return{$$typeof:aD,type:e,key:d,ref:p,props:c,_owner:cD.current}}Ny.Fragment=lD;Ny.jsx=Xk;Ny.jsxs=Xk;Nk.exports=Ny;var ye=Nk.exports,Yk={exports:{}},Lo={},Jk={exports:{}},Qk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Le,Oe){var Xe=Le.length;Le.push(Oe);e:for(;0<Xe;){var Ye=Xe-1>>>1,ut=Le[Ye];if(0<c(ut,Oe))Le[Ye]=Oe,Le[Xe]=ut,Xe=Ye;else break e}}function n(Le){return Le.length===0?null:Le[0]}function s(Le){if(Le.length===0)return null;var Oe=Le[0],Xe=Le.pop();if(Xe!==Oe){Le[0]=Xe;e:for(var Ye=0,ut=Le.length,Kt=ut>>>1;Ye<Kt;){var Vt=2*(Ye+1)-1,tt=Le[Vt],Qe=Vt+1,kt=Le[Qe];if(0>c(tt,Xe))Qe<ut&&0>c(kt,tt)?(Le[Ye]=kt,Le[Qe]=Xe,Ye=Qe):(Le[Ye]=tt,Le[Vt]=Xe,Ye=Vt);else if(Qe<ut&&0>c(kt,Xe))Le[Ye]=kt,Le[Qe]=Xe,Ye=Qe;else break e}}return Oe}function c(Le,Oe){var Xe=Le.sortIndex-Oe.sortIndex;return Xe!==0?Xe:Le.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var p=Date,l=p.now();e.unstable_now=function(){return p.now()-l}}var b=[],T=[],k=1,I=null,M=3,D=!1,H=!1,q=!1,J=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(Le){for(var Oe=n(T);Oe!==null;){if(Oe.callback===null)s(T);else if(Oe.startTime<=Le)s(T),Oe.sortIndex=Oe.expirationTime,t(b,Oe);else break;Oe=n(T)}}function G(Le){if(q=!1,B(Le),!H)if(n(b)!==null)H=!0,Te(ne);else{var Oe=n(T);Oe!==null&&Ue(G,Oe.startTime-Le)}}function ne(Le,Oe){H=!1,q&&(q=!1,$(he),he=-1),D=!0;var Xe=M;try{for(B(Oe),I=n(b);I!==null&&(!(I.expirationTime>Oe)||Le&&!Re());){var Ye=I.callback;if(typeof Ye=="function"){I.callback=null,M=I.priorityLevel;var ut=Ye(I.expirationTime<=Oe);Oe=e.unstable_now(),typeof ut=="function"?I.callback=ut:I===n(b)&&s(b),B(Oe)}else s(b);I=n(b)}if(I!==null)var Kt=!0;else{var Vt=n(T);Vt!==null&&Ue(G,Vt.startTime-Oe),Kt=!1}return Kt}finally{I=null,M=Xe,D=!1}}var re=!1,ae=null,he=-1,Me=5,Ee=-1;function Re(){return!(e.unstable_now()-Ee<Me)}function K(){if(ae!==null){var Le=e.unstable_now();Ee=Le;var Oe=!0;try{Oe=ae(!0,Le)}finally{Oe?be():(re=!1,ae=null)}}else re=!1}var be;if(typeof V=="function")be=function(){V(K)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,ze=_e.port2;_e.port1.onmessage=K,be=function(){ze.postMessage(null)}}else be=function(){J(K,0)};function Te(Le){ae=Le,re||(re=!0,be())}function Ue(Le,Oe){he=J(function(){Le(e.unstable_now())},Oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Le){Le.callback=null},e.unstable_continueExecution=function(){H||D||(H=!0,Te(ne))},e.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<Le?Math.floor(1e3/Le):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return n(b)},e.unstable_next=function(Le){switch(M){case 1:case 2:case 3:var Oe=3;break;default:Oe=M}var Xe=M;M=Oe;try{return Le()}finally{M=Xe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Le,Oe){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var Xe=M;M=Le;try{return Oe()}finally{M=Xe}},e.unstable_scheduleCallback=function(Le,Oe,Xe){var Ye=e.unstable_now();switch(typeof Xe=="object"&&Xe!==null?(Xe=Xe.delay,Xe=typeof Xe=="number"&&0<Xe?Ye+Xe:Ye):Xe=Ye,Le){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=Xe+ut,Le={id:k++,callback:Oe,priorityLevel:Le,startTime:Xe,expirationTime:ut,sortIndex:-1},Xe>Ye?(Le.sortIndex=Xe,t(T,Le),n(b)===null&&Le===n(T)&&(q?($(he),he=-1):q=!0,Ue(G,Xe-Ye))):(Le.sortIndex=ut,t(b,Le),H||D||(H=!0,Te(ne))),Le},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(Le){var Oe=M;return function(){var Xe=M;M=Oe;try{return Le.apply(this,arguments)}finally{M=Xe}}}})(Qk);Jk.exports=Qk;var dD=Jk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pD=W,Ro=dD;function st(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eE=new Set,Zp={};function Uu(e,t){Th(e,t),Th(e+"Capture",t)}function Th(e,t){for(Zp[e]=t,e=0;e<t.length;e++)eE.add(t[e])}var wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m0=Object.prototype.hasOwnProperty,fD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X2={},Y2={};function mD(e){return m0.call(Y2,e)?!0:m0.call(X2,e)?!1:fD.test(e)?Y2[e]=!0:(X2[e]=!0,!1)}function gD(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yD(e,t,n,s){if(t===null||typeof t>"u"||gD(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ki(e,t,n,s,c,d,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=p}var Si={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Si[e]=new Ki(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Si[t]=new Ki(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Si[e]=new Ki(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Si[e]=new Ki(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Si[e]=new Ki(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Si[e]=new Ki(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Si[e]=new Ki(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Si[e]=new Ki(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Si[e]=new Ki(e,5,!1,e.toLowerCase(),null,!1,!1)});var n1=/[\-:]([a-z])/g;function r1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(n1,r1);Si[t]=new Ki(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(n1,r1);Si[t]=new Ki(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(n1,r1);Si[t]=new Ki(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Si[e]=new Ki(e,1,!1,e.toLowerCase(),null,!1,!1)});Si.xlinkHref=new Ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Si[e]=new Ki(e,1,!1,e.toLowerCase(),null,!0,!0)});function i1(e,t,n,s){var c=Si.hasOwnProperty(t)?Si[t]:null;(c!==null?c.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yD(t,n,c,s)&&(n=null),s||c===null?mD(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,s=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Ma=pD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zm=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Jc=Symbol.for("react.fragment"),o1=Symbol.for("react.strict_mode"),g0=Symbol.for("react.profiler"),tE=Symbol.for("react.provider"),nE=Symbol.for("react.context"),s1=Symbol.for("react.forward_ref"),y0=Symbol.for("react.suspense"),v0=Symbol.for("react.suspense_list"),a1=Symbol.for("react.memo"),fl=Symbol.for("react.lazy"),rE=Symbol.for("react.offscreen"),J2=Symbol.iterator;function np(e){return e===null||typeof e!="object"?null:(e=J2&&e[J2]||e["@@iterator"],typeof e=="function"?e:null)}var Er=Object.assign,gx;function yp(e){if(gx===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);gx=t&&t[1]||""}return`
`+gx+e}var yx=!1;function vx(e,t){if(!e||yx)return"";yx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(T){var s=T}Reflect.construct(e,[],t)}else{try{t.call()}catch(T){s=T}e.call(t.prototype)}else{try{throw Error()}catch(T){s=T}e()}}catch(T){if(T&&s&&typeof T.stack=="string"){for(var c=T.stack.split(`
`),d=s.stack.split(`
`),p=c.length-1,l=d.length-1;1<=p&&0<=l&&c[p]!==d[l];)l--;for(;1<=p&&0<=l;p--,l--)if(c[p]!==d[l]){if(p!==1||l!==1)do if(p--,l--,0>l||c[p]!==d[l]){var b=`
`+c[p].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=p&&0<=l);break}}}finally{yx=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?yp(e):""}function vD(e){switch(e.tag){case 5:return yp(e.type);case 16:return yp("Lazy");case 13:return yp("Suspense");case 19:return yp("SuspenseList");case 0:case 2:case 15:return e=vx(e.type,!1),e;case 11:return e=vx(e.type.render,!1),e;case 1:return e=vx(e.type,!0),e;default:return""}}function _0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jc:return"Fragment";case Yc:return"Portal";case g0:return"Profiler";case o1:return"StrictMode";case y0:return"Suspense";case v0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nE:return(e.displayName||"Context")+".Consumer";case tE:return(e._context.displayName||"Context")+".Provider";case s1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case a1:return t=e.displayName||null,t!==null?t:_0(e.type)||"Memo";case fl:t=e._payload,e=e._init;try{return _0(e(t))}catch{}}return null}function _D(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _0(t);case 8:return t===o1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ml(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function iE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xD(e){var t=iE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){s=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(p){s=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Km(e){e._valueTracker||(e._valueTracker=xD(e))}function oE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=iE(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Yg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function x0(e,t){var n=t.checked;return Er({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Q2(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Ml(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sE(e,t){t=t.checked,t!=null&&i1(e,"checked",t,!1)}function b0(e,t){sE(e,t);var n=Ml(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?w0(e,t.type,n):t.hasOwnProperty("defaultValue")&&w0(e,t.type,Ml(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eC(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function w0(e,t,n){(t!=="number"||Yg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var vp=Array.isArray;function gh(e,t,n,s){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Ml(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function S0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(st(91));return Er({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tC(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(st(92));if(vp(n)){if(1<n.length)throw Error(st(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ml(n)}}function aE(e,t){var n=Ml(t.value),s=Ml(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function nC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xm,uE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xm=Xm||document.createElement("div"),Xm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bD=["Webkit","ms","Moz","O"];Object.keys(Pp).forEach(function(e){bD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pp[t]=Pp[e]})});function cE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pp.hasOwnProperty(e)&&Pp[e]?(""+t).trim():t+"px"}function hE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,c=cE(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,c):e[n]=c}}var wD=Er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T0(e,t){if(t){if(wD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(st(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(st(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(st(61))}if(t.style!=null&&typeof t.style!="object")throw Error(st(62))}}function P0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k0=null;function l1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var E0=null,yh=null,vh=null;function rC(e){if(e=If(e)){if(typeof E0!="function")throw Error(st(280));var t=e.stateNode;t&&(t=Hy(t),E0(e.stateNode,e.type,t))}}function dE(e){yh?vh?vh.push(e):vh=[e]:yh=e}function pE(){if(yh){var e=yh,t=vh;if(vh=yh=null,rC(e),t)for(e=0;e<t.length;e++)rC(t[e])}}function fE(e,t){return e(t)}function mE(){}var _x=!1;function gE(e,t,n){if(_x)return e(t,n);_x=!0;try{return fE(e,t,n)}finally{_x=!1,(yh!==null||vh!==null)&&(mE(),pE())}}function Xp(e,t){var n=e.stateNode;if(n===null)return null;var s=Hy(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(st(231,t,typeof n));return n}var I0=!1;if(wa)try{var rp={};Object.defineProperty(rp,"passive",{get:function(){I0=!0}}),window.addEventListener("test",rp,rp),window.removeEventListener("test",rp,rp)}catch{I0=!1}function SD(e,t,n,s,c,d,p,l,b){var T=Array.prototype.slice.call(arguments,3);try{t.apply(n,T)}catch(k){this.onError(k)}}var kp=!1,Jg=null,Qg=!1,A0=null,CD={onError:function(e){kp=!0,Jg=e}};function TD(e,t,n,s,c,d,p,l,b){kp=!1,Jg=null,SD.apply(CD,arguments)}function PD(e,t,n,s,c,d,p,l,b){if(TD.apply(this,arguments),kp){if(kp){var T=Jg;kp=!1,Jg=null}else throw Error(st(198));Qg||(Qg=!0,A0=T)}}function Wu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function iC(e){if(Wu(e)!==e)throw Error(st(188))}function kD(e){var t=e.alternate;if(!t){if(t=Wu(e),t===null)throw Error(st(188));return t!==e?null:e}for(var n=e,s=t;;){var c=n.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){n=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===n)return iC(c),e;if(d===s)return iC(c),t;d=d.sibling}throw Error(st(188))}if(n.return!==s.return)n=c,s=d;else{for(var p=!1,l=c.child;l;){if(l===n){p=!0,n=c,s=d;break}if(l===s){p=!0,s=c,n=d;break}l=l.sibling}if(!p){for(l=d.child;l;){if(l===n){p=!0,n=d,s=c;break}if(l===s){p=!0,s=d,n=c;break}l=l.sibling}if(!p)throw Error(st(189))}}if(n.alternate!==s)throw Error(st(190))}if(n.tag!==3)throw Error(st(188));return n.stateNode.current===n?e:t}function vE(e){return e=kD(e),e!==null?_E(e):null}function _E(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_E(e);if(t!==null)return t;e=e.sibling}return null}var xE=Ro.unstable_scheduleCallback,oC=Ro.unstable_cancelCallback,ED=Ro.unstable_shouldYield,ID=Ro.unstable_requestPaint,Br=Ro.unstable_now,AD=Ro.unstable_getCurrentPriorityLevel,u1=Ro.unstable_ImmediatePriority,bE=Ro.unstable_UserBlockingPriority,ey=Ro.unstable_NormalPriority,MD=Ro.unstable_LowPriority,wE=Ro.unstable_IdlePriority,Vy=null,js=null;function RD(e){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(Vy,e,void 0,(e.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:DD,zD=Math.log,LD=Math.LN2;function DD(e){return e>>>=0,e===0?32:31-(zD(e)/LD|0)|0}var Ym=64,Jm=4194304;function _p(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ty(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,c=e.suspendedLanes,d=e.pingedLanes,p=n&268435455;if(p!==0){var l=p&~c;l!==0?s=_p(l):(d&=p,d!==0&&(s=_p(d)))}else p=n&~c,p!==0?s=_p(p):d!==0&&(s=_p(d));if(s===0)return 0;if(t!==0&&t!==s&&!(t&c)&&(c=s&-s,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-vs(t),c=1<<n,s|=e[n],t&=~c;return s}function OD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FD(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var p=31-vs(d),l=1<<p,b=c[p];b===-1?(!(l&n)||l&s)&&(c[p]=OD(l,t)):b<=t&&(e.expiredLanes|=l),d&=~l}}function M0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function SE(){var e=Ym;return Ym<<=1,!(Ym&4194240)&&(Ym=64),e}function xx(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vs(t),e[t]=n}function BD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-vs(n),d=1<<c;t[c]=0,s[c]=-1,e[c]=-1,n&=~d}}function c1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-vs(n),c=1<<s;c&t|e[s]&t&&(e[s]|=t),n&=~c}}var tr=0;function CE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var TE,h1,PE,kE,EE,R0=!1,Qm=[],bl=null,wl=null,Sl=null,Yp=new Map,Jp=new Map,gl=[],$D="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sC(e,t){switch(e){case"focusin":case"focusout":bl=null;break;case"dragenter":case"dragleave":wl=null;break;case"mouseover":case"mouseout":Sl=null;break;case"pointerover":case"pointerout":Yp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jp.delete(t.pointerId)}}function ip(e,t,n,s,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},t!==null&&(t=If(t),t!==null&&h1(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function ND(e,t,n,s,c){switch(t){case"focusin":return bl=ip(bl,e,t,n,s,c),!0;case"dragenter":return wl=ip(wl,e,t,n,s,c),!0;case"mouseover":return Sl=ip(Sl,e,t,n,s,c),!0;case"pointerover":var d=c.pointerId;return Yp.set(d,ip(Yp.get(d)||null,e,t,n,s,c)),!0;case"gotpointercapture":return d=c.pointerId,Jp.set(d,ip(Jp.get(d)||null,e,t,n,s,c)),!0}return!1}function IE(e){var t=wu(e.target);if(t!==null){var n=Wu(t);if(n!==null){if(t=n.tag,t===13){if(t=yE(n),t!==null){e.blockedOn=t,EE(e.priority,function(){PE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ig(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=z0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);k0=s,n.target.dispatchEvent(s),k0=null}else return t=If(n),t!==null&&h1(t),e.blockedOn=n,!1;t.shift()}return!0}function aC(e,t,n){Ig(e)&&n.delete(t)}function VD(){R0=!1,bl!==null&&Ig(bl)&&(bl=null),wl!==null&&Ig(wl)&&(wl=null),Sl!==null&&Ig(Sl)&&(Sl=null),Yp.forEach(aC),Jp.forEach(aC)}function op(e,t){e.blockedOn===t&&(e.blockedOn=null,R0||(R0=!0,Ro.unstable_scheduleCallback(Ro.unstable_NormalPriority,VD)))}function Qp(e){function t(c){return op(c,e)}if(0<Qm.length){op(Qm[0],e);for(var n=1;n<Qm.length;n++){var s=Qm[n];s.blockedOn===e&&(s.blockedOn=null)}}for(bl!==null&&op(bl,e),wl!==null&&op(wl,e),Sl!==null&&op(Sl,e),Yp.forEach(t),Jp.forEach(t),n=0;n<gl.length;n++)s=gl[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<gl.length&&(n=gl[0],n.blockedOn===null);)IE(n),n.blockedOn===null&&gl.shift()}var _h=Ma.ReactCurrentBatchConfig,ny=!0;function jD(e,t,n,s){var c=tr,d=_h.transition;_h.transition=null;try{tr=1,d1(e,t,n,s)}finally{tr=c,_h.transition=d}}function UD(e,t,n,s){var c=tr,d=_h.transition;_h.transition=null;try{tr=4,d1(e,t,n,s)}finally{tr=c,_h.transition=d}}function d1(e,t,n,s){if(ny){var c=z0(e,t,n,s);if(c===null)Ax(e,t,s,ry,n),sC(e,s);else if(ND(c,e,t,n,s))s.stopPropagation();else if(sC(e,s),t&4&&-1<$D.indexOf(e)){for(;c!==null;){var d=If(c);if(d!==null&&TE(d),d=z0(e,t,n,s),d===null&&Ax(e,t,s,ry,n),d===c)break;c=d}c!==null&&s.stopPropagation()}else Ax(e,t,s,null,n)}}var ry=null;function z0(e,t,n,s){if(ry=null,e=l1(s),e=wu(e),e!==null)if(t=Wu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ry=e,null}function AE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AD()){case u1:return 1;case bE:return 4;case ey:case MD:return 16;case wE:return 536870912;default:return 16}default:return 16}}var _l=null,p1=null,Ag=null;function ME(){if(Ag)return Ag;var e,t=p1,n=t.length,s,c="value"in _l?_l.value:_l.textContent,d=c.length;for(e=0;e<n&&t[e]===c[e];e++);var p=n-e;for(s=1;s<=p&&t[n-s]===c[d-s];s++);return Ag=c.slice(e,1<s?1-s:void 0)}function Mg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function eg(){return!0}function lC(){return!1}function Do(e){function t(n,s,c,d,p){this._reactName=n,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?eg:lC,this.isPropagationStopped=lC,this}return Er(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eg)},persist:function(){},isPersistent:eg}),t}var jh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},f1=Do(jh),Ef=Er({},jh,{view:0,detail:0}),WD=Do(Ef),bx,wx,sp,jy=Er({},Ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sp&&(sp&&e.type==="mousemove"?(bx=e.screenX-sp.screenX,wx=e.screenY-sp.screenY):wx=bx=0,sp=e),bx)},movementY:function(e){return"movementY"in e?e.movementY:wx}}),uC=Do(jy),HD=Er({},jy,{dataTransfer:0}),qD=Do(HD),GD=Er({},Ef,{relatedTarget:0}),Sx=Do(GD),ZD=Er({},jh,{animationName:0,elapsedTime:0,pseudoElement:0}),KD=Do(ZD),XD=Er({},jh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),YD=Do(XD),JD=Er({},jh,{data:0}),cC=Do(JD),QD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=t5[e])?!!t[e]:!1}function m1(){return n5}var r5=Er({},Ef,{key:function(e){if(e.key){var t=QD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?e5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m1,charCode:function(e){return e.type==="keypress"?Mg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),i5=Do(r5),o5=Er({},jy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hC=Do(o5),s5=Er({},Ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m1}),a5=Do(s5),l5=Er({},jh,{propertyName:0,elapsedTime:0,pseudoElement:0}),u5=Do(l5),c5=Er({},jy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),h5=Do(c5),d5=[9,13,27,32],g1=wa&&"CompositionEvent"in window,Ep=null;wa&&"documentMode"in document&&(Ep=document.documentMode);var p5=wa&&"TextEvent"in window&&!Ep,RE=wa&&(!g1||Ep&&8<Ep&&11>=Ep),dC=" ",pC=!1;function zE(e,t){switch(e){case"keyup":return d5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qc=!1;function f5(e,t){switch(e){case"compositionend":return LE(t);case"keypress":return t.which!==32?null:(pC=!0,dC);case"textInput":return e=t.data,e===dC&&pC?null:e;default:return null}}function m5(e,t){if(Qc)return e==="compositionend"||!g1&&zE(e,t)?(e=ME(),Ag=p1=_l=null,Qc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return RE&&t.locale!=="ko"?null:t.data;default:return null}}var g5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!g5[e.type]:t==="textarea"}function DE(e,t,n,s){dE(s),t=iy(t,"onChange"),0<t.length&&(n=new f1("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Ip=null,ef=null;function y5(e){qE(e,0)}function Uy(e){var t=nh(e);if(oE(t))return e}function v5(e,t){if(e==="change")return t}var OE=!1;if(wa){var Cx;if(wa){var Tx="oninput"in document;if(!Tx){var mC=document.createElement("div");mC.setAttribute("oninput","return;"),Tx=typeof mC.oninput=="function"}Cx=Tx}else Cx=!1;OE=Cx&&(!document.documentMode||9<document.documentMode)}function gC(){Ip&&(Ip.detachEvent("onpropertychange",FE),ef=Ip=null)}function FE(e){if(e.propertyName==="value"&&Uy(ef)){var t=[];DE(t,ef,e,l1(e)),gE(y5,t)}}function _5(e,t,n){e==="focusin"?(gC(),Ip=t,ef=n,Ip.attachEvent("onpropertychange",FE)):e==="focusout"&&gC()}function x5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Uy(ef)}function b5(e,t){if(e==="click")return Uy(t)}function w5(e,t){if(e==="input"||e==="change")return Uy(t)}function S5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xs=typeof Object.is=="function"?Object.is:S5;function tf(e,t){if(xs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var c=n[s];if(!m0.call(t,c)||!xs(e[c],t[c]))return!1}return!0}function yC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vC(e,t){var n=yC(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yC(n)}}function BE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?BE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $E(){for(var e=window,t=Yg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Yg(e.document)}return t}function y1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function C5(e){var t=$E(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&BE(n.ownerDocument.documentElement,n)){if(s!==null&&y1(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,d=Math.min(s.start,c);s=s.end===void 0?d:Math.min(s.end,c),!e.extend&&d>s&&(c=s,s=d,d=c),c=vC(n,d);var p=vC(n,s);c&&p&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>s?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var T5=wa&&"documentMode"in document&&11>=document.documentMode,eh=null,L0=null,Ap=null,D0=!1;function _C(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;D0||eh==null||eh!==Yg(s)||(s=eh,"selectionStart"in s&&y1(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ap&&tf(Ap,s)||(Ap=s,s=iy(L0,"onSelect"),0<s.length&&(t=new f1("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=eh)))}function tg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var th={animationend:tg("Animation","AnimationEnd"),animationiteration:tg("Animation","AnimationIteration"),animationstart:tg("Animation","AnimationStart"),transitionend:tg("Transition","TransitionEnd")},Px={},NE={};wa&&(NE=document.createElement("div").style,"AnimationEvent"in window||(delete th.animationend.animation,delete th.animationiteration.animation,delete th.animationstart.animation),"TransitionEvent"in window||delete th.transitionend.transition);function Wy(e){if(Px[e])return Px[e];if(!th[e])return e;var t=th[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in NE)return Px[e]=t[n];return e}var VE=Wy("animationend"),jE=Wy("animationiteration"),UE=Wy("animationstart"),WE=Wy("transitionend"),HE=new Map,xC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ol(e,t){HE.set(e,t),Uu(t,[e])}for(var kx=0;kx<xC.length;kx++){var Ex=xC[kx],P5=Ex.toLowerCase(),k5=Ex[0].toUpperCase()+Ex.slice(1);Ol(P5,"on"+k5)}Ol(VE,"onAnimationEnd");Ol(jE,"onAnimationIteration");Ol(UE,"onAnimationStart");Ol("dblclick","onDoubleClick");Ol("focusin","onFocus");Ol("focusout","onBlur");Ol(WE,"onTransitionEnd");Th("onMouseEnter",["mouseout","mouseover"]);Th("onMouseLeave",["mouseout","mouseover"]);Th("onPointerEnter",["pointerout","pointerover"]);Th("onPointerLeave",["pointerout","pointerover"]);Uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E5=new Set("cancel close invalid load scroll toggle".split(" ").concat(xp));function bC(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,PD(s,t,void 0,e),e.currentTarget=null}function qE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],c=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var p=s.length-1;0<=p;p--){var l=s[p],b=l.instance,T=l.currentTarget;if(l=l.listener,b!==d&&c.isPropagationStopped())break e;bC(c,l,T),d=b}else for(p=0;p<s.length;p++){if(l=s[p],b=l.instance,T=l.currentTarget,l=l.listener,b!==d&&c.isPropagationStopped())break e;bC(c,l,T),d=b}}}if(Qg)throw e=A0,Qg=!1,A0=null,e}function fr(e,t){var n=t[N0];n===void 0&&(n=t[N0]=new Set);var s=e+"__bubble";n.has(s)||(GE(t,e,2,!1),n.add(s))}function Ix(e,t,n){var s=0;t&&(s|=4),GE(n,e,s,t)}var ng="_reactListening"+Math.random().toString(36).slice(2);function nf(e){if(!e[ng]){e[ng]=!0,eE.forEach(function(n){n!=="selectionchange"&&(E5.has(n)||Ix(n,!1,e),Ix(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ng]||(t[ng]=!0,Ix("selectionchange",!1,t))}}function GE(e,t,n,s){switch(AE(t)){case 1:var c=jD;break;case 4:c=UD;break;default:c=d1}n=c.bind(null,t,n,e),c=void 0,!I0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function Ax(e,t,n,s,c){var d=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var p=s.tag;if(p===3||p===4){var l=s.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(p===4)for(p=s.return;p!==null;){var b=p.tag;if((b===3||b===4)&&(b=p.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;p=p.return}for(;l!==null;){if(p=wu(l),p===null)return;if(b=p.tag,b===5||b===6){s=d=p;continue e}l=l.parentNode}}s=s.return}gE(function(){var T=d,k=l1(n),I=[];e:{var M=HE.get(e);if(M!==void 0){var D=f1,H=e;switch(e){case"keypress":if(Mg(n)===0)break e;case"keydown":case"keyup":D=i5;break;case"focusin":H="focus",D=Sx;break;case"focusout":H="blur",D=Sx;break;case"beforeblur":case"afterblur":D=Sx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=uC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=qD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=a5;break;case VE:case jE:case UE:D=KD;break;case WE:D=u5;break;case"scroll":D=WD;break;case"wheel":D=h5;break;case"copy":case"cut":case"paste":D=YD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=hC}var q=(t&4)!==0,J=!q&&e==="scroll",$=q?M!==null?M+"Capture":null:M;q=[];for(var V=T,B;V!==null;){B=V;var G=B.stateNode;if(B.tag===5&&G!==null&&(B=G,$!==null&&(G=Xp(V,$),G!=null&&q.push(rf(V,G,B)))),J)break;V=V.return}0<q.length&&(M=new D(M,H,null,n,k),I.push({event:M,listeners:q}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",M&&n!==k0&&(H=n.relatedTarget||n.fromElement)&&(wu(H)||H[Sa]))break e;if((D||M)&&(M=k.window===k?k:(M=k.ownerDocument)?M.defaultView||M.parentWindow:window,D?(H=n.relatedTarget||n.toElement,D=T,H=H?wu(H):null,H!==null&&(J=Wu(H),H!==J||H.tag!==5&&H.tag!==6)&&(H=null)):(D=null,H=T),D!==H)){if(q=uC,G="onMouseLeave",$="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(q=hC,G="onPointerLeave",$="onPointerEnter",V="pointer"),J=D==null?M:nh(D),B=H==null?M:nh(H),M=new q(G,V+"leave",D,n,k),M.target=J,M.relatedTarget=B,G=null,wu(k)===T&&(q=new q($,V+"enter",H,n,k),q.target=B,q.relatedTarget=J,G=q),J=G,D&&H)t:{for(q=D,$=H,V=0,B=q;B;B=Vc(B))V++;for(B=0,G=$;G;G=Vc(G))B++;for(;0<V-B;)q=Vc(q),V--;for(;0<B-V;)$=Vc($),B--;for(;V--;){if(q===$||$!==null&&q===$.alternate)break t;q=Vc(q),$=Vc($)}q=null}else q=null;D!==null&&wC(I,M,D,q,!1),H!==null&&J!==null&&wC(I,J,H,q,!0)}}e:{if(M=T?nh(T):window,D=M.nodeName&&M.nodeName.toLowerCase(),D==="select"||D==="input"&&M.type==="file")var ne=v5;else if(fC(M))if(OE)ne=w5;else{ne=x5;var re=_5}else(D=M.nodeName)&&D.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(ne=b5);if(ne&&(ne=ne(e,T))){DE(I,ne,n,k);break e}re&&re(e,M,T),e==="focusout"&&(re=M._wrapperState)&&re.controlled&&M.type==="number"&&w0(M,"number",M.value)}switch(re=T?nh(T):window,e){case"focusin":(fC(re)||re.contentEditable==="true")&&(eh=re,L0=T,Ap=null);break;case"focusout":Ap=L0=eh=null;break;case"mousedown":D0=!0;break;case"contextmenu":case"mouseup":case"dragend":D0=!1,_C(I,n,k);break;case"selectionchange":if(T5)break;case"keydown":case"keyup":_C(I,n,k)}var ae;if(g1)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Qc?zE(e,n)&&(he="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(he="onCompositionStart");he&&(RE&&n.locale!=="ko"&&(Qc||he!=="onCompositionStart"?he==="onCompositionEnd"&&Qc&&(ae=ME()):(_l=k,p1="value"in _l?_l.value:_l.textContent,Qc=!0)),re=iy(T,he),0<re.length&&(he=new cC(he,e,null,n,k),I.push({event:he,listeners:re}),ae?he.data=ae:(ae=LE(n),ae!==null&&(he.data=ae)))),(ae=p5?f5(e,n):m5(e,n))&&(T=iy(T,"onBeforeInput"),0<T.length&&(k=new cC("onBeforeInput","beforeinput",null,n,k),I.push({event:k,listeners:T}),k.data=ae))}qE(I,t)})}function rf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function iy(e,t){for(var n=t+"Capture",s=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Xp(e,n),d!=null&&s.unshift(rf(e,d,c)),d=Xp(e,t),d!=null&&s.push(rf(e,d,c))),e=e.return}return s}function Vc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wC(e,t,n,s,c){for(var d=t._reactName,p=[];n!==null&&n!==s;){var l=n,b=l.alternate,T=l.stateNode;if(b!==null&&b===s)break;l.tag===5&&T!==null&&(l=T,c?(b=Xp(n,d),b!=null&&p.unshift(rf(n,b,l))):c||(b=Xp(n,d),b!=null&&p.push(rf(n,b,l)))),n=n.return}p.length!==0&&e.push({event:t,listeners:p})}var I5=/\r\n?/g,A5=/\u0000|\uFFFD/g;function SC(e){return(typeof e=="string"?e:""+e).replace(I5,`
`).replace(A5,"")}function rg(e,t,n){if(t=SC(t),SC(e)!==t&&n)throw Error(st(425))}function oy(){}var O0=null,F0=null;function B0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $0=typeof setTimeout=="function"?setTimeout:void 0,M5=typeof clearTimeout=="function"?clearTimeout:void 0,CC=typeof Promise=="function"?Promise:void 0,R5=typeof queueMicrotask=="function"?queueMicrotask:typeof CC<"u"?function(e){return CC.resolve(null).then(e).catch(z5)}:$0;function z5(e){setTimeout(function(){throw e})}function Mx(e,t){var n=t,s=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(s===0){e.removeChild(c),Qp(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=c}while(n);Qp(t)}function Cl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function TC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Uh=Math.random().toString(36).slice(2),$s="__reactFiber$"+Uh,of="__reactProps$"+Uh,Sa="__reactContainer$"+Uh,N0="__reactEvents$"+Uh,L5="__reactListeners$"+Uh,D5="__reactHandles$"+Uh;function wu(e){var t=e[$s];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sa]||n[$s]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=TC(e);e!==null;){if(n=e[$s])return n;e=TC(e)}return t}e=n,n=e.parentNode}return null}function If(e){return e=e[$s]||e[Sa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(st(33))}function Hy(e){return e[of]||null}var V0=[],rh=-1;function Fl(e){return{current:e}}function mr(e){0>rh||(e.current=V0[rh],V0[rh]=null,rh--)}function hr(e,t){rh++,V0[rh]=e.current,e.current=t}var Rl={},Bi=Fl(Rl),so=Fl(!1),Du=Rl;function Ph(e,t){var n=e.type.contextTypes;if(!n)return Rl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in n)c[d]=t[d];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function ao(e){return e=e.childContextTypes,e!=null}function sy(){mr(so),mr(Bi)}function PC(e,t,n){if(Bi.current!==Rl)throw Error(st(168));hr(Bi,t),hr(so,n)}function ZE(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var c in s)if(!(c in t))throw Error(st(108,_D(e)||"Unknown",c));return Er({},n,s)}function ay(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rl,Du=Bi.current,hr(Bi,e),hr(so,so.current),!0}function kC(e,t,n){var s=e.stateNode;if(!s)throw Error(st(169));n?(e=ZE(e,t,Du),s.__reactInternalMemoizedMergedChildContext=e,mr(so),mr(Bi),hr(Bi,e)):mr(so),hr(so,n)}var va=null,qy=!1,Rx=!1;function KE(e){va===null?va=[e]:va.push(e)}function O5(e){qy=!0,KE(e)}function Bl(){if(!Rx&&va!==null){Rx=!0;var e=0,t=tr;try{var n=va;for(tr=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}va=null,qy=!1}catch(c){throw va!==null&&(va=va.slice(e+1)),xE(u1,Bl),c}finally{tr=t,Rx=!1}}return null}var ih=[],oh=0,ly=null,uy=0,Go=[],Zo=0,Ou=null,_a=1,xa="";function yu(e,t){ih[oh++]=uy,ih[oh++]=ly,ly=e,uy=t}function XE(e,t,n){Go[Zo++]=_a,Go[Zo++]=xa,Go[Zo++]=Ou,Ou=e;var s=_a;e=xa;var c=32-vs(s)-1;s&=~(1<<c),n+=1;var d=32-vs(t)+c;if(30<d){var p=c-c%5;d=(s&(1<<p)-1).toString(32),s>>=p,c-=p,_a=1<<32-vs(t)+c|n<<c|s,xa=d+e}else _a=1<<d|n<<c|s,xa=e}function v1(e){e.return!==null&&(yu(e,1),XE(e,1,0))}function _1(e){for(;e===ly;)ly=ih[--oh],ih[oh]=null,uy=ih[--oh],ih[oh]=null;for(;e===Ou;)Ou=Go[--Zo],Go[Zo]=null,xa=Go[--Zo],Go[Zo]=null,_a=Go[--Zo],Go[Zo]=null}var Ao=null,Io=null,br=!1,ys=null;function YE(e,t){var n=Xo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function EC(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ao=e,Io=Cl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ao=e,Io=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ou!==null?{id:_a,overflow:xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ao=e,Io=null,!0):!1;default:return!1}}function j0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function U0(e){if(br){var t=Io;if(t){var n=t;if(!EC(e,t)){if(j0(e))throw Error(st(418));t=Cl(n.nextSibling);var s=Ao;t&&EC(e,t)?YE(s,n):(e.flags=e.flags&-4097|2,br=!1,Ao=e)}}else{if(j0(e))throw Error(st(418));e.flags=e.flags&-4097|2,br=!1,Ao=e}}}function IC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ao=e}function ig(e){if(e!==Ao)return!1;if(!br)return IC(e),br=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!B0(e.type,e.memoizedProps)),t&&(t=Io)){if(j0(e))throw JE(),Error(st(418));for(;t;)YE(e,t),t=Cl(t.nextSibling)}if(IC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(st(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Io=Cl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Io=null}}else Io=Ao?Cl(e.stateNode.nextSibling):null;return!0}function JE(){for(var e=Io;e;)e=Cl(e.nextSibling)}function kh(){Io=Ao=null,br=!1}function x1(e){ys===null?ys=[e]:ys.push(e)}var F5=Ma.ReactCurrentBatchConfig;function ap(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(st(309));var s=n.stateNode}if(!s)throw Error(st(147,e));var c=s,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(p){var l=c.refs;p===null?delete l[d]:l[d]=p},t._stringRef=d,t)}if(typeof e!="string")throw Error(st(284));if(!n._owner)throw Error(st(290,e))}return e}function og(e,t){throw e=Object.prototype.toString.call(t),Error(st(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function AC(e){var t=e._init;return t(e._payload)}function QE(e){function t($,V){if(e){var B=$.deletions;B===null?($.deletions=[V],$.flags|=16):B.push(V)}}function n($,V){if(!e)return null;for(;V!==null;)t($,V),V=V.sibling;return null}function s($,V){for($=new Map;V!==null;)V.key!==null?$.set(V.key,V):$.set(V.index,V),V=V.sibling;return $}function c($,V){return $=El($,V),$.index=0,$.sibling=null,$}function d($,V,B){return $.index=B,e?(B=$.alternate,B!==null?(B=B.index,B<V?($.flags|=2,V):B):($.flags|=2,V)):($.flags|=1048576,V)}function p($){return e&&$.alternate===null&&($.flags|=2),$}function l($,V,B,G){return V===null||V.tag!==6?(V=$x(B,$.mode,G),V.return=$,V):(V=c(V,B),V.return=$,V)}function b($,V,B,G){var ne=B.type;return ne===Jc?k($,V,B.props.children,G,B.key):V!==null&&(V.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===fl&&AC(ne)===V.type)?(G=c(V,B.props),G.ref=ap($,V,B),G.return=$,G):(G=Bg(B.type,B.key,B.props,null,$.mode,G),G.ref=ap($,V,B),G.return=$,G)}function T($,V,B,G){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Nx(B,$.mode,G),V.return=$,V):(V=c(V,B.children||[]),V.return=$,V)}function k($,V,B,G,ne){return V===null||V.tag!==7?(V=Mu(B,$.mode,G,ne),V.return=$,V):(V=c(V,B),V.return=$,V)}function I($,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=$x(""+V,$.mode,B),V.return=$,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Zm:return B=Bg(V.type,V.key,V.props,null,$.mode,B),B.ref=ap($,null,V),B.return=$,B;case Yc:return V=Nx(V,$.mode,B),V.return=$,V;case fl:var G=V._init;return I($,G(V._payload),B)}if(vp(V)||np(V))return V=Mu(V,$.mode,B,null),V.return=$,V;og($,V)}return null}function M($,V,B,G){var ne=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ne!==null?null:l($,V,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Zm:return B.key===ne?b($,V,B,G):null;case Yc:return B.key===ne?T($,V,B,G):null;case fl:return ne=B._init,M($,V,ne(B._payload),G)}if(vp(B)||np(B))return ne!==null?null:k($,V,B,G,null);og($,B)}return null}function D($,V,B,G,ne){if(typeof G=="string"&&G!==""||typeof G=="number")return $=$.get(B)||null,l(V,$,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Zm:return $=$.get(G.key===null?B:G.key)||null,b(V,$,G,ne);case Yc:return $=$.get(G.key===null?B:G.key)||null,T(V,$,G,ne);case fl:var re=G._init;return D($,V,B,re(G._payload),ne)}if(vp(G)||np(G))return $=$.get(B)||null,k(V,$,G,ne,null);og(V,G)}return null}function H($,V,B,G){for(var ne=null,re=null,ae=V,he=V=0,Me=null;ae!==null&&he<B.length;he++){ae.index>he?(Me=ae,ae=null):Me=ae.sibling;var Ee=M($,ae,B[he],G);if(Ee===null){ae===null&&(ae=Me);break}e&&ae&&Ee.alternate===null&&t($,ae),V=d(Ee,V,he),re===null?ne=Ee:re.sibling=Ee,re=Ee,ae=Me}if(he===B.length)return n($,ae),br&&yu($,he),ne;if(ae===null){for(;he<B.length;he++)ae=I($,B[he],G),ae!==null&&(V=d(ae,V,he),re===null?ne=ae:re.sibling=ae,re=ae);return br&&yu($,he),ne}for(ae=s($,ae);he<B.length;he++)Me=D(ae,$,he,B[he],G),Me!==null&&(e&&Me.alternate!==null&&ae.delete(Me.key===null?he:Me.key),V=d(Me,V,he),re===null?ne=Me:re.sibling=Me,re=Me);return e&&ae.forEach(function(Re){return t($,Re)}),br&&yu($,he),ne}function q($,V,B,G){var ne=np(B);if(typeof ne!="function")throw Error(st(150));if(B=ne.call(B),B==null)throw Error(st(151));for(var re=ne=null,ae=V,he=V=0,Me=null,Ee=B.next();ae!==null&&!Ee.done;he++,Ee=B.next()){ae.index>he?(Me=ae,ae=null):Me=ae.sibling;var Re=M($,ae,Ee.value,G);if(Re===null){ae===null&&(ae=Me);break}e&&ae&&Re.alternate===null&&t($,ae),V=d(Re,V,he),re===null?ne=Re:re.sibling=Re,re=Re,ae=Me}if(Ee.done)return n($,ae),br&&yu($,he),ne;if(ae===null){for(;!Ee.done;he++,Ee=B.next())Ee=I($,Ee.value,G),Ee!==null&&(V=d(Ee,V,he),re===null?ne=Ee:re.sibling=Ee,re=Ee);return br&&yu($,he),ne}for(ae=s($,ae);!Ee.done;he++,Ee=B.next())Ee=D(ae,$,he,Ee.value,G),Ee!==null&&(e&&Ee.alternate!==null&&ae.delete(Ee.key===null?he:Ee.key),V=d(Ee,V,he),re===null?ne=Ee:re.sibling=Ee,re=Ee);return e&&ae.forEach(function(K){return t($,K)}),br&&yu($,he),ne}function J($,V,B,G){if(typeof B=="object"&&B!==null&&B.type===Jc&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Zm:e:{for(var ne=B.key,re=V;re!==null;){if(re.key===ne){if(ne=B.type,ne===Jc){if(re.tag===7){n($,re.sibling),V=c(re,B.props.children),V.return=$,$=V;break e}}else if(re.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===fl&&AC(ne)===re.type){n($,re.sibling),V=c(re,B.props),V.ref=ap($,re,B),V.return=$,$=V;break e}n($,re);break}else t($,re);re=re.sibling}B.type===Jc?(V=Mu(B.props.children,$.mode,G,B.key),V.return=$,$=V):(G=Bg(B.type,B.key,B.props,null,$.mode,G),G.ref=ap($,V,B),G.return=$,$=G)}return p($);case Yc:e:{for(re=B.key;V!==null;){if(V.key===re)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){n($,V.sibling),V=c(V,B.children||[]),V.return=$,$=V;break e}else{n($,V);break}else t($,V);V=V.sibling}V=Nx(B,$.mode,G),V.return=$,$=V}return p($);case fl:return re=B._init,J($,V,re(B._payload),G)}if(vp(B))return H($,V,B,G);if(np(B))return q($,V,B,G);og($,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(n($,V.sibling),V=c(V,B),V.return=$,$=V):(n($,V),V=$x(B,$.mode,G),V.return=$,$=V),p($)):n($,V)}return J}var Eh=QE(!0),eI=QE(!1),cy=Fl(null),hy=null,sh=null,b1=null;function w1(){b1=sh=hy=null}function S1(e){var t=cy.current;mr(cy),e._currentValue=t}function W0(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function xh(e,t){hy=e,b1=sh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(io=!0),e.firstContext=null)}function ts(e){var t=e._currentValue;if(b1!==e)if(e={context:e,memoizedValue:t,next:null},sh===null){if(hy===null)throw Error(st(308));sh=e,hy.dependencies={lanes:0,firstContext:e}}else sh=sh.next=e;return t}var Su=null;function C1(e){Su===null?Su=[e]:Su.push(e)}function tI(e,t,n,s){var c=t.interleaved;return c===null?(n.next=n,C1(t)):(n.next=c.next,c.next=n),t.interleaved=n,Ca(e,s)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ml=!1;function T1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ba(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tl(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,jn&2){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,Ca(e,n)}return c=s.interleaved,c===null?(t.next=t,C1(s)):(t.next=c.next,c.next=t),s.interleaved=t,Ca(e,n)}function Rg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,c1(e,n)}}function MC(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var c=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var p={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?c=d=p:d=d.next=p,n=n.next}while(n!==null);d===null?c=d=t:d=d.next=t}else c=d=t;n={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function dy(e,t,n,s){var c=e.updateQueue;ml=!1;var d=c.firstBaseUpdate,p=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,T=b.next;b.next=null,p===null?d=T:p.next=T,p=b;var k=e.alternate;k!==null&&(k=k.updateQueue,l=k.lastBaseUpdate,l!==p&&(l===null?k.firstBaseUpdate=T:l.next=T,k.lastBaseUpdate=b))}if(d!==null){var I=c.baseState;p=0,k=T=b=null,l=d;do{var M=l.lane,D=l.eventTime;if((s&M)===M){k!==null&&(k=k.next={eventTime:D,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var H=e,q=l;switch(M=t,D=n,q.tag){case 1:if(H=q.payload,typeof H=="function"){I=H.call(D,I,M);break e}I=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=q.payload,M=typeof H=="function"?H.call(D,I,M):H,M==null)break e;I=Er({},I,M);break e;case 2:ml=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,M=c.effects,M===null?c.effects=[l]:M.push(l))}else D={eventTime:D,lane:M,tag:l.tag,payload:l.payload,callback:l.callback,next:null},k===null?(T=k=D,b=I):k=k.next=D,p|=M;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;M=l,l=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(!0);if(k===null&&(b=I),c.baseState=b,c.firstBaseUpdate=T,c.lastBaseUpdate=k,t=c.shared.interleaved,t!==null){c=t;do p|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);Bu|=p,e.lanes=p,e.memoizedState=I}}function RC(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],c=s.callback;if(c!==null){if(s.callback=null,s=n,typeof c!="function")throw Error(st(191,c));c.call(s)}}}var Af={},Us=Fl(Af),sf=Fl(Af),af=Fl(Af);function Cu(e){if(e===Af)throw Error(st(174));return e}function P1(e,t){switch(hr(af,t),hr(sf,e),hr(Us,Af),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C0(t,e)}mr(Us),hr(Us,t)}function Ih(){mr(Us),mr(sf),mr(af)}function rI(e){Cu(af.current);var t=Cu(Us.current),n=C0(t,e.type);t!==n&&(hr(sf,e),hr(Us,n))}function k1(e){sf.current===e&&(mr(Us),mr(sf))}var Tr=Fl(0);function py(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zx=[];function E1(){for(var e=0;e<zx.length;e++)zx[e]._workInProgressVersionPrimary=null;zx.length=0}var zg=Ma.ReactCurrentDispatcher,Lx=Ma.ReactCurrentBatchConfig,Fu=0,kr=null,Xr=null,ai=null,fy=!1,Mp=!1,lf=0,B5=0;function Ri(){throw Error(st(321))}function I1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xs(e[n],t[n]))return!1;return!0}function A1(e,t,n,s,c,d){if(Fu=d,kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zg.current=e===null||e.memoizedState===null?j5:U5,e=n(s,c),Mp){d=0;do{if(Mp=!1,lf=0,25<=d)throw Error(st(301));d+=1,ai=Xr=null,t.updateQueue=null,zg.current=W5,e=n(s,c)}while(Mp)}if(zg.current=my,t=Xr!==null&&Xr.next!==null,Fu=0,ai=Xr=kr=null,fy=!1,t)throw Error(st(300));return e}function M1(){var e=lf!==0;return lf=0,e}function Ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?kr.memoizedState=ai=e:ai=ai.next=e,ai}function ns(){if(Xr===null){var e=kr.alternate;e=e!==null?e.memoizedState:null}else e=Xr.next;var t=ai===null?kr.memoizedState:ai.next;if(t!==null)ai=t,Xr=e;else{if(e===null)throw Error(st(310));Xr=e,e={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},ai===null?kr.memoizedState=ai=e:ai=ai.next=e}return ai}function uf(e,t){return typeof t=="function"?t(e):t}function Dx(e){var t=ns(),n=t.queue;if(n===null)throw Error(st(311));n.lastRenderedReducer=e;var s=Xr,c=s.baseQueue,d=n.pending;if(d!==null){if(c!==null){var p=c.next;c.next=d.next,d.next=p}s.baseQueue=c=d,n.pending=null}if(c!==null){d=c.next,s=s.baseState;var l=p=null,b=null,T=d;do{var k=T.lane;if((Fu&k)===k)b!==null&&(b=b.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),s=T.hasEagerState?T.eagerState:e(s,T.action);else{var I={lane:k,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};b===null?(l=b=I,p=s):b=b.next=I,kr.lanes|=k,Bu|=k}T=T.next}while(T!==null&&T!==d);b===null?p=s:b.next=l,xs(s,t.memoizedState)||(io=!0),t.memoizedState=s,t.baseState=p,t.baseQueue=b,n.lastRenderedState=s}if(e=n.interleaved,e!==null){c=e;do d=c.lane,kr.lanes|=d,Bu|=d,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ox(e){var t=ns(),n=t.queue;if(n===null)throw Error(st(311));n.lastRenderedReducer=e;var s=n.dispatch,c=n.pending,d=t.memoizedState;if(c!==null){n.pending=null;var p=c=c.next;do d=e(d,p.action),p=p.next;while(p!==c);xs(d,t.memoizedState)||(io=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,s]}function iI(){}function oI(e,t){var n=kr,s=ns(),c=t(),d=!xs(s.memoizedState,c);if(d&&(s.memoizedState=c,io=!0),s=s.queue,R1(lI.bind(null,n,s,e),[e]),s.getSnapshot!==t||d||ai!==null&&ai.memoizedState.tag&1){if(n.flags|=2048,cf(9,aI.bind(null,n,s,c,t),void 0,null),ui===null)throw Error(st(349));Fu&30||sI(n,t,c)}return c}function sI(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function aI(e,t,n,s){t.value=n,t.getSnapshot=s,uI(t)&&cI(e)}function lI(e,t,n){return n(function(){uI(t)&&cI(e)})}function uI(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xs(e,n)}catch{return!0}}function cI(e){var t=Ca(e,1);t!==null&&_s(t,e,1,-1)}function zC(e){var t=Ls();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uf,lastRenderedState:e},t.queue=e,e=e.dispatch=V5.bind(null,kr,e),[t.memoizedState,e]}function cf(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function hI(){return ns().memoizedState}function Lg(e,t,n,s){var c=Ls();kr.flags|=e,c.memoizedState=cf(1|t,n,void 0,s===void 0?null:s)}function Gy(e,t,n,s){var c=ns();s=s===void 0?null:s;var d=void 0;if(Xr!==null){var p=Xr.memoizedState;if(d=p.destroy,s!==null&&I1(s,p.deps)){c.memoizedState=cf(t,n,d,s);return}}kr.flags|=e,c.memoizedState=cf(1|t,n,d,s)}function LC(e,t){return Lg(8390656,8,e,t)}function R1(e,t){return Gy(2048,8,e,t)}function dI(e,t){return Gy(4,2,e,t)}function pI(e,t){return Gy(4,4,e,t)}function fI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mI(e,t,n){return n=n!=null?n.concat([e]):null,Gy(4,4,fI.bind(null,t,e),n)}function z1(){}function gI(e,t){var n=ns();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&I1(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function yI(e,t){var n=ns();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&I1(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function vI(e,t,n){return Fu&21?(xs(n,t)||(n=SE(),kr.lanes|=n,Bu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,io=!0),e.memoizedState=n)}function $5(e,t){var n=tr;tr=n!==0&&4>n?n:4,e(!0);var s=Lx.transition;Lx.transition={};try{e(!1),t()}finally{tr=n,Lx.transition=s}}function _I(){return ns().memoizedState}function N5(e,t,n){var s=kl(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},xI(e))bI(t,n);else if(n=tI(e,t,n,s),n!==null){var c=Gi();_s(n,e,s,c),wI(n,t,s)}}function V5(e,t,n){var s=kl(e),c={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(xI(e))bI(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,l=d(p,n);if(c.hasEagerState=!0,c.eagerState=l,xs(l,p)){var b=t.interleaved;b===null?(c.next=c,C1(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}n=tI(e,t,c,s),n!==null&&(c=Gi(),_s(n,e,s,c),wI(n,t,s))}}function xI(e){var t=e.alternate;return e===kr||t!==null&&t===kr}function bI(e,t){Mp=fy=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wI(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,c1(e,n)}}var my={readContext:ts,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},j5={readContext:ts,useCallback:function(e,t){return Ls().memoizedState=[e,t===void 0?null:t],e},useContext:ts,useEffect:LC,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Lg(4194308,4,fI.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lg(4,2,e,t)},useMemo:function(e,t){var n=Ls();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Ls();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=N5.bind(null,kr,e),[s.memoizedState,e]},useRef:function(e){var t=Ls();return e={current:e},t.memoizedState=e},useState:zC,useDebugValue:z1,useDeferredValue:function(e){return Ls().memoizedState=e},useTransition:function(){var e=zC(!1),t=e[0];return e=$5.bind(null,e[1]),Ls().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=kr,c=Ls();if(br){if(n===void 0)throw Error(st(407));n=n()}else{if(n=t(),ui===null)throw Error(st(349));Fu&30||sI(s,t,n)}c.memoizedState=n;var d={value:n,getSnapshot:t};return c.queue=d,LC(lI.bind(null,s,d,e),[e]),s.flags|=2048,cf(9,aI.bind(null,s,d,n,t),void 0,null),n},useId:function(){var e=Ls(),t=ui.identifierPrefix;if(br){var n=xa,s=_a;n=(s&~(1<<32-vs(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=lf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=B5++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U5={readContext:ts,useCallback:gI,useContext:ts,useEffect:R1,useImperativeHandle:mI,useInsertionEffect:dI,useLayoutEffect:pI,useMemo:yI,useReducer:Dx,useRef:hI,useState:function(){return Dx(uf)},useDebugValue:z1,useDeferredValue:function(e){var t=ns();return vI(t,Xr.memoizedState,e)},useTransition:function(){var e=Dx(uf)[0],t=ns().memoizedState;return[e,t]},useMutableSource:iI,useSyncExternalStore:oI,useId:_I,unstable_isNewReconciler:!1},W5={readContext:ts,useCallback:gI,useContext:ts,useEffect:R1,useImperativeHandle:mI,useInsertionEffect:dI,useLayoutEffect:pI,useMemo:yI,useReducer:Ox,useRef:hI,useState:function(){return Ox(uf)},useDebugValue:z1,useDeferredValue:function(e){var t=ns();return Xr===null?t.memoizedState=e:vI(t,Xr.memoizedState,e)},useTransition:function(){var e=Ox(uf)[0],t=ns().memoizedState;return[e,t]},useMutableSource:iI,useSyncExternalStore:oI,useId:_I,unstable_isNewReconciler:!1};function ms(e,t){if(e&&e.defaultProps){t=Er({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function H0(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Er({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zy={isMounted:function(e){return(e=e._reactInternals)?Wu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Gi(),c=kl(e),d=ba(s,c);d.payload=t,n!=null&&(d.callback=n),t=Tl(e,d,c),t!==null&&(_s(t,e,c,s),Rg(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Gi(),c=kl(e),d=ba(s,c);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=Tl(e,d,c),t!==null&&(_s(t,e,c,s),Rg(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gi(),s=kl(e),c=ba(n,s);c.tag=2,t!=null&&(c.callback=t),t=Tl(e,c,s),t!==null&&(_s(t,e,s,n),Rg(t,e,s))}};function DC(e,t,n,s,c,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,p):t.prototype&&t.prototype.isPureReactComponent?!tf(n,s)||!tf(c,d):!0}function SI(e,t,n){var s=!1,c=Rl,d=t.contextType;return typeof d=="object"&&d!==null?d=ts(d):(c=ao(t)?Du:Bi.current,s=t.contextTypes,d=(s=s!=null)?Ph(e,c):Rl),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zy,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function OC(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Zy.enqueueReplaceState(t,t.state,null)}function q0(e,t,n,s){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs={},T1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=ts(d):(d=ao(t)?Du:Bi.current,c.context=Ph(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(H0(e,t,d,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Zy.enqueueReplaceState(c,c.state,null),dy(e,n,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Ah(e,t){try{var n="",s=t;do n+=vD(s),s=s.return;while(s);var c=n}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function Fx(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function G0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var H5=typeof WeakMap=="function"?WeakMap:Map;function CI(e,t,n){n=ba(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){yy||(yy=!0,rb=s),G0(e,t)},n}function TI(e,t,n){n=ba(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=t.value;n.payload=function(){return s(c)},n.callback=function(){G0(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){G0(e,t),typeof s!="function"&&(Pl===null?Pl=new Set([this]):Pl.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),n}function FC(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new H5;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(n)||(c.add(n),e=oO.bind(null,e,t,n),t.then(e,e))}function BC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $C(e,t,n,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ba(-1,1),t.tag=2,Tl(n,t,1))),n.lanes|=1),e)}var q5=Ma.ReactCurrentOwner,io=!1;function Hi(e,t,n,s){t.child=e===null?eI(t,null,n,s):Eh(t,e.child,n,s)}function NC(e,t,n,s,c){n=n.render;var d=t.ref;return xh(t,c),s=A1(e,t,n,s,d,c),n=M1(),e!==null&&!io?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ta(e,t,c)):(br&&n&&v1(t),t.flags|=1,Hi(e,t,s,c),t.child)}function VC(e,t,n,s,c){if(e===null){var d=n.type;return typeof d=="function"&&!V1(d)&&d.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=d,PI(e,t,d,s,c)):(e=Bg(n.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var p=d.memoizedProps;if(n=n.compare,n=n!==null?n:tf,n(p,s)&&e.ref===t.ref)return Ta(e,t,c)}return t.flags|=1,e=El(d,s),e.ref=t.ref,e.return=t,t.child=e}function PI(e,t,n,s,c){if(e!==null){var d=e.memoizedProps;if(tf(d,s)&&e.ref===t.ref)if(io=!1,t.pendingProps=s=d,(e.lanes&c)!==0)e.flags&131072&&(io=!0);else return t.lanes=e.lanes,Ta(e,t,c)}return Z0(e,t,n,s,c)}function kI(e,t,n){var s=t.pendingProps,c=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(lh,To),To|=n;else{if(!(n&1073741824))return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,hr(lh,To),To|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=d!==null?d.baseLanes:n,hr(lh,To),To|=s}else d!==null?(s=d.baseLanes|n,t.memoizedState=null):s=n,hr(lh,To),To|=s;return Hi(e,t,c,n),t.child}function EI(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Z0(e,t,n,s,c){var d=ao(n)?Du:Bi.current;return d=Ph(t,d),xh(t,c),n=A1(e,t,n,s,d,c),s=M1(),e!==null&&!io?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ta(e,t,c)):(br&&s&&v1(t),t.flags|=1,Hi(e,t,n,c),t.child)}function jC(e,t,n,s,c){if(ao(n)){var d=!0;ay(t)}else d=!1;if(xh(t,c),t.stateNode===null)Dg(e,t),SI(t,n,s),q0(t,n,s,c),s=!0;else if(e===null){var p=t.stateNode,l=t.memoizedProps;p.props=l;var b=p.context,T=n.contextType;typeof T=="object"&&T!==null?T=ts(T):(T=ao(n)?Du:Bi.current,T=Ph(t,T));var k=n.getDerivedStateFromProps,I=typeof k=="function"||typeof p.getSnapshotBeforeUpdate=="function";I||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(l!==s||b!==T)&&OC(t,p,s,T),ml=!1;var M=t.memoizedState;p.state=M,dy(t,s,p,c),b=t.memoizedState,l!==s||M!==b||so.current||ml?(typeof k=="function"&&(H0(t,n,k,s),b=t.memoizedState),(l=ml||DC(t,n,l,s,M,b,T))?(I||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=b),p.props=s,p.state=b,p.context=T,s=l):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{p=t.stateNode,nI(e,t),l=t.memoizedProps,T=t.type===t.elementType?l:ms(t.type,l),p.props=T,I=t.pendingProps,M=p.context,b=n.contextType,typeof b=="object"&&b!==null?b=ts(b):(b=ao(n)?Du:Bi.current,b=Ph(t,b));var D=n.getDerivedStateFromProps;(k=typeof D=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(l!==I||M!==b)&&OC(t,p,s,b),ml=!1,M=t.memoizedState,p.state=M,dy(t,s,p,c);var H=t.memoizedState;l!==I||M!==H||so.current||ml?(typeof D=="function"&&(H0(t,n,D,s),H=t.memoizedState),(T=ml||DC(t,n,T,s,M,H,b)||!1)?(k||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(s,H,b),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(s,H,b)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=H),p.props=s,p.state=H,p.context=b,s=T):(typeof p.componentDidUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),s=!1)}return K0(e,t,n,s,d,c)}function K0(e,t,n,s,c,d){EI(e,t);var p=(t.flags&128)!==0;if(!s&&!p)return c&&kC(t,n,!1),Ta(e,t,d);s=t.stateNode,q5.current=t;var l=p&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&p?(t.child=Eh(t,e.child,null,d),t.child=Eh(t,null,l,d)):Hi(e,t,l,d),t.memoizedState=s.state,c&&kC(t,n,!0),t.child}function II(e){var t=e.stateNode;t.pendingContext?PC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&PC(e,t.context,!1),P1(e,t.containerInfo)}function UC(e,t,n,s,c){return kh(),x1(c),t.flags|=256,Hi(e,t,n,s),t.child}var X0={dehydrated:null,treeContext:null,retryLane:0};function Y0(e){return{baseLanes:e,cachePool:null,transitions:null}}function AI(e,t,n){var s=t.pendingProps,c=Tr.current,d=!1,p=(t.flags&128)!==0,l;if((l=p)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),hr(Tr,c&1),e===null)return U0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=s.children,e=s.fallback,d?(s=t.mode,d=t.child,p={mode:"hidden",children:p},!(s&1)&&d!==null?(d.childLanes=0,d.pendingProps=p):d=Yy(p,s,0,null),e=Mu(e,s,n,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Y0(n),t.memoizedState=X0,e):L1(t,p));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return G5(e,t,p,s,l,c,n);if(d){d=s.fallback,p=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:s.children};return!(p&1)&&t.child!==c?(s=t.child,s.childLanes=0,s.pendingProps=b,t.deletions=null):(s=El(c,b),s.subtreeFlags=c.subtreeFlags&14680064),l!==null?d=El(l,d):(d=Mu(d,p,n,null),d.flags|=2),d.return=t,s.return=t,s.sibling=d,t.child=s,s=d,d=t.child,p=e.child.memoizedState,p=p===null?Y0(n):{baseLanes:p.baseLanes|n,cachePool:null,transitions:p.transitions},d.memoizedState=p,d.childLanes=e.childLanes&~n,t.memoizedState=X0,s}return d=e.child,e=d.sibling,s=El(d,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function L1(e,t){return t=Yy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sg(e,t,n,s){return s!==null&&x1(s),Eh(t,e.child,null,n),e=L1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function G5(e,t,n,s,c,d,p){if(n)return t.flags&256?(t.flags&=-257,s=Fx(Error(st(422))),sg(e,t,p,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=s.fallback,c=t.mode,s=Yy({mode:"visible",children:s.children},c,0,null),d=Mu(d,c,p,null),d.flags|=2,s.return=t,d.return=t,s.sibling=d,t.child=s,t.mode&1&&Eh(t,e.child,null,p),t.child.memoizedState=Y0(p),t.memoizedState=X0,d);if(!(t.mode&1))return sg(e,t,p,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var l=s.dgst;return s=l,d=Error(st(419)),s=Fx(d,s,void 0),sg(e,t,p,s)}if(l=(p&e.childLanes)!==0,io||l){if(s=ui,s!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|p)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Ca(e,c),_s(s,e,c,-1))}return N1(),s=Fx(Error(st(421))),sg(e,t,p,s)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=sO.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,Io=Cl(c.nextSibling),Ao=t,br=!0,ys=null,e!==null&&(Go[Zo++]=_a,Go[Zo++]=xa,Go[Zo++]=Ou,_a=e.id,xa=e.overflow,Ou=t),t=L1(t,s.children),t.flags|=4096,t)}function WC(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),W0(e.return,t,n)}function Bx(e,t,n,s,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=n,d.tailMode=c)}function MI(e,t,n){var s=t.pendingProps,c=s.revealOrder,d=s.tail;if(Hi(e,t,s.children,n),s=Tr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&WC(e,n,t);else if(e.tag===19)WC(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(hr(Tr,s),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&py(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),Bx(t,!1,c,n,d);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&py(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}Bx(t,!0,n,null,d);break;case"together":Bx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Dg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ta(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(st(153));if(t.child!==null){for(e=t.child,n=El(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=El(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Z5(e,t,n){switch(t.tag){case 3:II(t),kh();break;case 5:rI(t);break;case 1:ao(t.type)&&ay(t);break;case 4:P1(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,c=t.memoizedProps.value;hr(cy,s._currentValue),s._currentValue=c;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(hr(Tr,Tr.current&1),t.flags|=128,null):n&t.child.childLanes?AI(e,t,n):(hr(Tr,Tr.current&1),e=Ta(e,t,n),e!==null?e.sibling:null);hr(Tr,Tr.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return MI(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),hr(Tr,Tr.current),s)break;return null;case 22:case 23:return t.lanes=0,kI(e,t,n)}return Ta(e,t,n)}var RI,J0,zI,LI;RI=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};J0=function(){};zI=function(e,t,n,s){var c=e.memoizedProps;if(c!==s){e=t.stateNode,Cu(Us.current);var d=null;switch(n){case"input":c=x0(e,c),s=x0(e,s),d=[];break;case"select":c=Er({},c,{value:void 0}),s=Er({},s,{value:void 0}),d=[];break;case"textarea":c=S0(e,c),s=S0(e,s),d=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=oy)}T0(n,s);var p;n=null;for(T in c)if(!s.hasOwnProperty(T)&&c.hasOwnProperty(T)&&c[T]!=null)if(T==="style"){var l=c[T];for(p in l)l.hasOwnProperty(p)&&(n||(n={}),n[p]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(Zp.hasOwnProperty(T)?d||(d=[]):(d=d||[]).push(T,null));for(T in s){var b=s[T];if(l=c!=null?c[T]:void 0,s.hasOwnProperty(T)&&b!==l&&(b!=null||l!=null))if(T==="style")if(l){for(p in l)!l.hasOwnProperty(p)||b&&b.hasOwnProperty(p)||(n||(n={}),n[p]="");for(p in b)b.hasOwnProperty(p)&&l[p]!==b[p]&&(n||(n={}),n[p]=b[p])}else n||(d||(d=[]),d.push(T,n)),n=b;else T==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(d=d||[]).push(T,b)):T==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(T,""+b):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(Zp.hasOwnProperty(T)?(b!=null&&T==="onScroll"&&fr("scroll",e),d||l===b||(d=[])):(d=d||[]).push(T,b))}n&&(d=d||[]).push("style",n);var T=d;(t.updateQueue=T)&&(t.flags|=4)}};LI=function(e,t,n,s){n!==s&&(t.flags|=4)};function lp(e,t){if(!br)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function zi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function K5(e,t,n){var s=t.pendingProps;switch(_1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zi(t),null;case 1:return ao(t.type)&&sy(),zi(t),null;case 3:return s=t.stateNode,Ih(),mr(so),mr(Bi),E1(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ig(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ys!==null&&(sb(ys),ys=null))),J0(e,t),zi(t),null;case 5:k1(t);var c=Cu(af.current);if(n=t.type,e!==null&&t.stateNode!=null)zI(e,t,n,s,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(st(166));return zi(t),null}if(e=Cu(Us.current),ig(t)){s=t.stateNode,n=t.type;var d=t.memoizedProps;switch(s[$s]=t,s[of]=d,e=(t.mode&1)!==0,n){case"dialog":fr("cancel",s),fr("close",s);break;case"iframe":case"object":case"embed":fr("load",s);break;case"video":case"audio":for(c=0;c<xp.length;c++)fr(xp[c],s);break;case"source":fr("error",s);break;case"img":case"image":case"link":fr("error",s),fr("load",s);break;case"details":fr("toggle",s);break;case"input":Q2(s,d),fr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!d.multiple},fr("invalid",s);break;case"textarea":tC(s,d),fr("invalid",s)}T0(n,d),c=null;for(var p in d)if(d.hasOwnProperty(p)){var l=d[p];p==="children"?typeof l=="string"?s.textContent!==l&&(d.suppressHydrationWarning!==!0&&rg(s.textContent,l,e),c=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&rg(s.textContent,l,e),c=["children",""+l]):Zp.hasOwnProperty(p)&&l!=null&&p==="onScroll"&&fr("scroll",s)}switch(n){case"input":Km(s),eC(s,d,!0);break;case"textarea":Km(s),nC(s);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(s.onclick=oy)}s=c,t.updateQueue=s,s!==null&&(t.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=p.createElement(n,{is:s.is}):(e=p.createElement(n),n==="select"&&(p=e,s.multiple?p.multiple=!0:s.size&&(p.size=s.size))):e=p.createElementNS(e,n),e[$s]=t,e[of]=s,RI(e,t,!1,!1),t.stateNode=e;e:{switch(p=P0(n,s),n){case"dialog":fr("cancel",e),fr("close",e),c=s;break;case"iframe":case"object":case"embed":fr("load",e),c=s;break;case"video":case"audio":for(c=0;c<xp.length;c++)fr(xp[c],e);c=s;break;case"source":fr("error",e),c=s;break;case"img":case"image":case"link":fr("error",e),fr("load",e),c=s;break;case"details":fr("toggle",e),c=s;break;case"input":Q2(e,s),c=x0(e,s),fr("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=Er({},s,{value:void 0}),fr("invalid",e);break;case"textarea":tC(e,s),c=S0(e,s),fr("invalid",e);break;default:c=s}T0(n,c),l=c;for(d in l)if(l.hasOwnProperty(d)){var b=l[d];d==="style"?hE(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&uE(e,b)):d==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&Kp(e,b):typeof b=="number"&&Kp(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Zp.hasOwnProperty(d)?b!=null&&d==="onScroll"&&fr("scroll",e):b!=null&&i1(e,d,b,p))}switch(n){case"input":Km(e),eC(e,s,!1);break;case"textarea":Km(e),nC(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ml(s.value));break;case"select":e.multiple=!!s.multiple,d=s.value,d!=null?gh(e,!!s.multiple,d,!1):s.defaultValue!=null&&gh(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=oy)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zi(t),null;case 6:if(e&&t.stateNode!=null)LI(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(st(166));if(n=Cu(af.current),Cu(Us.current),ig(t)){if(s=t.stateNode,n=t.memoizedProps,s[$s]=t,(d=s.nodeValue!==n)&&(e=Ao,e!==null))switch(e.tag){case 3:rg(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rg(s.nodeValue,n,(e.mode&1)!==0)}d&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[$s]=t,t.stateNode=s}return zi(t),null;case 13:if(mr(Tr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(br&&Io!==null&&t.mode&1&&!(t.flags&128))JE(),kh(),t.flags|=98560,d=!1;else if(d=ig(t),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(st(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(st(317));d[$s]=t}else kh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zi(t),d=!1}else ys!==null&&(sb(ys),ys=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Tr.current&1?Yr===0&&(Yr=3):N1())),t.updateQueue!==null&&(t.flags|=4),zi(t),null);case 4:return Ih(),J0(e,t),e===null&&nf(t.stateNode.containerInfo),zi(t),null;case 10:return S1(t.type._context),zi(t),null;case 17:return ao(t.type)&&sy(),zi(t),null;case 19:if(mr(Tr),d=t.memoizedState,d===null)return zi(t),null;if(s=(t.flags&128)!==0,p=d.rendering,p===null)if(s)lp(d,!1);else{if(Yr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=py(e),p!==null){for(t.flags|=128,lp(d,!1),s=p.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)d=n,e=s,d.flags&=14680066,p=d.alternate,p===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,e=p.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hr(Tr,Tr.current&1|2),t.child}e=e.sibling}d.tail!==null&&Br()>Mh&&(t.flags|=128,s=!0,lp(d,!1),t.lanes=4194304)}else{if(!s)if(e=py(p),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),lp(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!br)return zi(t),null}else 2*Br()-d.renderingStartTime>Mh&&n!==1073741824&&(t.flags|=128,s=!0,lp(d,!1),t.lanes=4194304);d.isBackwards?(p.sibling=t.child,t.child=p):(n=d.last,n!==null?n.sibling=p:t.child=p,d.last=p)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Br(),t.sibling=null,n=Tr.current,hr(Tr,s?n&1|2:n&1),t):(zi(t),null);case 22:case 23:return $1(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?To&1073741824&&(zi(t),t.subtreeFlags&6&&(t.flags|=8192)):zi(t),null;case 24:return null;case 25:return null}throw Error(st(156,t.tag))}function X5(e,t){switch(_1(t),t.tag){case 1:return ao(t.type)&&sy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ih(),mr(so),mr(Bi),E1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return k1(t),null;case 13:if(mr(Tr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(st(340));kh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mr(Tr),null;case 4:return Ih(),null;case 10:return S1(t.type._context),null;case 22:case 23:return $1(),null;case 24:return null;default:return null}}var ag=!1,Di=!1,Y5=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function ah(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Dr(e,t,s)}else n.current=null}function Q0(e,t,n){try{n()}catch(s){Dr(e,t,s)}}var HC=!1;function J5(e,t){if(O0=ny,e=$E(),y1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var p=0,l=-1,b=-1,T=0,k=0,I=e,M=null;t:for(;;){for(var D;I!==n||c!==0&&I.nodeType!==3||(l=p+c),I!==d||s!==0&&I.nodeType!==3||(b=p+s),I.nodeType===3&&(p+=I.nodeValue.length),(D=I.firstChild)!==null;)M=I,I=D;for(;;){if(I===e)break t;if(M===n&&++T===c&&(l=p),M===d&&++k===s&&(b=p),(D=I.nextSibling)!==null)break;I=M,M=I.parentNode}I=D}n=l===-1||b===-1?null:{start:l,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(F0={focusedElem:e,selectionRange:n},ny=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){t=Ht;try{var H=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var q=H.memoizedProps,J=H.memoizedState,$=t.stateNode,V=$.getSnapshotBeforeUpdate(t.elementType===t.type?q:ms(t.type,q),J);$.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=t.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(st(163))}}catch(G){Dr(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}return H=HC,HC=!1,H}function Rp(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Q0(t,n,d)}c=c.next}while(c!==s)}}function Ky(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function eb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function DI(e){var t=e.alternate;t!==null&&(e.alternate=null,DI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$s],delete t[of],delete t[N0],delete t[L5],delete t[D5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function OI(e){return e.tag===5||e.tag===3||e.tag===4}function qC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||OI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tb(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=oy));else if(s!==4&&(e=e.child,e!==null))for(tb(e,t,n),e=e.sibling;e!==null;)tb(e,t,n),e=e.sibling}function nb(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(nb(e,t,n),e=e.sibling;e!==null;)nb(e,t,n),e=e.sibling}var vi=null,gs=!1;function hl(e,t,n){for(n=n.child;n!==null;)FI(e,t,n),n=n.sibling}function FI(e,t,n){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(Vy,n)}catch{}switch(n.tag){case 5:Di||ah(n,t);case 6:var s=vi,c=gs;vi=null,hl(e,t,n),vi=s,gs=c,vi!==null&&(gs?(e=vi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):vi.removeChild(n.stateNode));break;case 18:vi!==null&&(gs?(e=vi,n=n.stateNode,e.nodeType===8?Mx(e.parentNode,n):e.nodeType===1&&Mx(e,n),Qp(e)):Mx(vi,n.stateNode));break;case 4:s=vi,c=gs,vi=n.stateNode.containerInfo,gs=!0,hl(e,t,n),vi=s,gs=c;break;case 0:case 11:case 14:case 15:if(!Di&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var d=c,p=d.destroy;d=d.tag,p!==void 0&&(d&2||d&4)&&Q0(n,t,p),c=c.next}while(c!==s)}hl(e,t,n);break;case 1:if(!Di&&(ah(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Dr(n,t,l)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:n.mode&1?(Di=(s=Di)||n.memoizedState!==null,hl(e,t,n),Di=s):hl(e,t,n);break;default:hl(e,t,n)}}function GC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Y5),t.forEach(function(s){var c=aO.bind(null,e,s);n.has(s)||(n.add(s),s.then(c,c))})}}function ps(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var c=n[s];try{var d=e,p=t,l=p;e:for(;l!==null;){switch(l.tag){case 5:vi=l.stateNode,gs=!1;break e;case 3:vi=l.stateNode.containerInfo,gs=!0;break e;case 4:vi=l.stateNode.containerInfo,gs=!0;break e}l=l.return}if(vi===null)throw Error(st(160));FI(d,p,c),vi=null,gs=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(T){Dr(c,t,T)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)BI(t,e),t=t.sibling}function BI(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ps(t,e),Rs(e),s&4){try{Rp(3,e,e.return),Ky(3,e)}catch(q){Dr(e,e.return,q)}try{Rp(5,e,e.return)}catch(q){Dr(e,e.return,q)}}break;case 1:ps(t,e),Rs(e),s&512&&n!==null&&ah(n,n.return);break;case 5:if(ps(t,e),Rs(e),s&512&&n!==null&&ah(n,n.return),e.flags&32){var c=e.stateNode;try{Kp(c,"")}catch(q){Dr(e,e.return,q)}}if(s&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,p=n!==null?n.memoizedProps:d,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&sE(c,d),P0(l,p);var T=P0(l,d);for(p=0;p<b.length;p+=2){var k=b[p],I=b[p+1];k==="style"?hE(c,I):k==="dangerouslySetInnerHTML"?uE(c,I):k==="children"?Kp(c,I):i1(c,k,I,T)}switch(l){case"input":b0(c,d);break;case"textarea":aE(c,d);break;case"select":var M=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var D=d.value;D!=null?gh(c,!!d.multiple,D,!1):M!==!!d.multiple&&(d.defaultValue!=null?gh(c,!!d.multiple,d.defaultValue,!0):gh(c,!!d.multiple,d.multiple?[]:"",!1))}c[of]=d}catch(q){Dr(e,e.return,q)}}break;case 6:if(ps(t,e),Rs(e),s&4){if(e.stateNode===null)throw Error(st(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(q){Dr(e,e.return,q)}}break;case 3:if(ps(t,e),Rs(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Qp(t.containerInfo)}catch(q){Dr(e,e.return,q)}break;case 4:ps(t,e),Rs(e);break;case 13:ps(t,e),Rs(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(F1=Br())),s&4&&GC(e);break;case 22:if(k=n!==null&&n.memoizedState!==null,e.mode&1?(Di=(T=Di)||k,ps(t,e),Di=T):ps(t,e),Rs(e),s&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!k&&e.mode&1)for(Ht=e,k=e.child;k!==null;){for(I=Ht=k;Ht!==null;){switch(M=Ht,D=M.child,M.tag){case 0:case 11:case 14:case 15:Rp(4,M,M.return);break;case 1:ah(M,M.return);var H=M.stateNode;if(typeof H.componentWillUnmount=="function"){s=M,n=M.return;try{t=s,H.props=t.memoizedProps,H.state=t.memoizedState,H.componentWillUnmount()}catch(q){Dr(s,n,q)}}break;case 5:ah(M,M.return);break;case 22:if(M.memoizedState!==null){KC(I);continue}}D!==null?(D.return=M,Ht=D):KC(I)}k=k.sibling}e:for(k=null,I=e;;){if(I.tag===5){if(k===null){k=I;try{c=I.stateNode,T?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=I.stateNode,b=I.memoizedProps.style,p=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=cE("display",p))}catch(q){Dr(e,e.return,q)}}}else if(I.tag===6){if(k===null)try{I.stateNode.nodeValue=T?"":I.memoizedProps}catch(q){Dr(e,e.return,q)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===e)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;I.sibling===null;){if(I.return===null||I.return===e)break e;k===I&&(k=null),I=I.return}k===I&&(k=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:ps(t,e),Rs(e),s&4&&GC(e);break;case 21:break;default:ps(t,e),Rs(e)}}function Rs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(OI(n)){var s=n;break e}n=n.return}throw Error(st(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(Kp(c,""),s.flags&=-33);var d=qC(e);nb(e,d,c);break;case 3:case 4:var p=s.stateNode.containerInfo,l=qC(e);tb(e,l,p);break;default:throw Error(st(161))}}catch(b){Dr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Q5(e,t,n){Ht=e,$I(e)}function $I(e,t,n){for(var s=(e.mode&1)!==0;Ht!==null;){var c=Ht,d=c.child;if(c.tag===22&&s){var p=c.memoizedState!==null||ag;if(!p){var l=c.alternate,b=l!==null&&l.memoizedState!==null||Di;l=ag;var T=Di;if(ag=p,(Di=b)&&!T)for(Ht=c;Ht!==null;)p=Ht,b=p.child,p.tag===22&&p.memoizedState!==null?XC(c):b!==null?(b.return=p,Ht=b):XC(c);for(;d!==null;)Ht=d,$I(d),d=d.sibling;Ht=c,ag=l,Di=T}ZC(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,Ht=d):ZC(e)}}function ZC(e){for(;Ht!==null;){var t=Ht;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Di||Ky(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Di)if(n===null)s.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);s.componentDidUpdate(c,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&RC(t,d,s);break;case 3:var p=t.updateQueue;if(p!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}RC(t,p,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var T=t.alternate;if(T!==null){var k=T.memoizedState;if(k!==null){var I=k.dehydrated;I!==null&&Qp(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(st(163))}Di||t.flags&512&&eb(t)}catch(M){Dr(t,t.return,M)}}if(t===e){Ht=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ht=n;break}Ht=t.return}}function KC(e){for(;Ht!==null;){var t=Ht;if(t===e){Ht=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ht=n;break}Ht=t.return}}function XC(e){for(;Ht!==null;){var t=Ht;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ky(4,t)}catch(b){Dr(t,n,b)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var c=t.return;try{s.componentDidMount()}catch(b){Dr(t,c,b)}}var d=t.return;try{eb(t)}catch(b){Dr(t,d,b)}break;case 5:var p=t.return;try{eb(t)}catch(b){Dr(t,p,b)}}}catch(b){Dr(t,t.return,b)}if(t===e){Ht=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ht=l;break}Ht=t.return}}var eO=Math.ceil,gy=Ma.ReactCurrentDispatcher,D1=Ma.ReactCurrentOwner,Jo=Ma.ReactCurrentBatchConfig,jn=0,ui=null,qr=null,bi=0,To=0,lh=Fl(0),Yr=0,hf=null,Bu=0,Xy=0,O1=0,zp=null,ro=null,F1=0,Mh=1/0,ya=null,yy=!1,rb=null,Pl=null,lg=!1,xl=null,vy=0,Lp=0,ib=null,Og=-1,Fg=0;function Gi(){return jn&6?Br():Og!==-1?Og:Og=Br()}function kl(e){return e.mode&1?jn&2&&bi!==0?bi&-bi:F5.transition!==null?(Fg===0&&(Fg=SE()),Fg):(e=tr,e!==0||(e=window.event,e=e===void 0?16:AE(e.type)),e):1}function _s(e,t,n,s){if(50<Lp)throw Lp=0,ib=null,Error(st(185));kf(e,n,s),(!(jn&2)||e!==ui)&&(e===ui&&(!(jn&2)&&(Xy|=n),Yr===4&&yl(e,bi)),lo(e,s),n===1&&jn===0&&!(t.mode&1)&&(Mh=Br()+500,qy&&Bl()))}function lo(e,t){var n=e.callbackNode;FD(e,t);var s=ty(e,e===ui?bi:0);if(s===0)n!==null&&oC(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&oC(n),t===1)e.tag===0?O5(YC.bind(null,e)):KE(YC.bind(null,e)),R5(function(){!(jn&6)&&Bl()}),n=null;else{switch(CE(s)){case 1:n=u1;break;case 4:n=bE;break;case 16:n=ey;break;case 536870912:n=wE;break;default:n=ey}n=GI(n,NI.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function NI(e,t){if(Og=-1,Fg=0,jn&6)throw Error(st(327));var n=e.callbackNode;if(bh()&&e.callbackNode!==n)return null;var s=ty(e,e===ui?bi:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=_y(e,s);else{t=s;var c=jn;jn|=2;var d=jI();(ui!==e||bi!==t)&&(ya=null,Mh=Br()+500,Au(e,t));do try{rO();break}catch(l){VI(e,l)}while(!0);w1(),gy.current=d,jn=c,qr!==null?t=0:(ui=null,bi=0,t=Yr)}if(t!==0){if(t===2&&(c=M0(e),c!==0&&(s=c,t=ob(e,c))),t===1)throw n=hf,Au(e,0),yl(e,s),lo(e,Br()),n;if(t===6)yl(e,s);else{if(c=e.current.alternate,!(s&30)&&!tO(c)&&(t=_y(e,s),t===2&&(d=M0(e),d!==0&&(s=d,t=ob(e,d))),t===1))throw n=hf,Au(e,0),yl(e,s),lo(e,Br()),n;switch(e.finishedWork=c,e.finishedLanes=s,t){case 0:case 1:throw Error(st(345));case 2:vu(e,ro,ya);break;case 3:if(yl(e,s),(s&130023424)===s&&(t=F1+500-Br(),10<t)){if(ty(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){Gi(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=$0(vu.bind(null,e,ro,ya),t);break}vu(e,ro,ya);break;case 4:if(yl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,c=-1;0<s;){var p=31-vs(s);d=1<<p,p=t[p],p>c&&(c=p),s&=~d}if(s=c,s=Br()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*eO(s/1960))-s,10<s){e.timeoutHandle=$0(vu.bind(null,e,ro,ya),s);break}vu(e,ro,ya);break;case 5:vu(e,ro,ya);break;default:throw Error(st(329))}}}return lo(e,Br()),e.callbackNode===n?NI.bind(null,e):null}function ob(e,t){var n=zp;return e.current.memoizedState.isDehydrated&&(Au(e,t).flags|=256),e=_y(e,t),e!==2&&(t=ro,ro=n,t!==null&&sb(t)),e}function sb(e){ro===null?ro=e:ro.push.apply(ro,e)}function tO(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var c=n[s],d=c.getSnapshot;c=c.value;try{if(!xs(d(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yl(e,t){for(t&=~O1,t&=~Xy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vs(t),s=1<<n;e[n]=-1,t&=~s}}function YC(e){if(jn&6)throw Error(st(327));bh();var t=ty(e,0);if(!(t&1))return lo(e,Br()),null;var n=_y(e,t);if(e.tag!==0&&n===2){var s=M0(e);s!==0&&(t=s,n=ob(e,s))}if(n===1)throw n=hf,Au(e,0),yl(e,t),lo(e,Br()),n;if(n===6)throw Error(st(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vu(e,ro,ya),lo(e,Br()),null}function B1(e,t){var n=jn;jn|=1;try{return e(t)}finally{jn=n,jn===0&&(Mh=Br()+500,qy&&Bl())}}function $u(e){xl!==null&&xl.tag===0&&!(jn&6)&&bh();var t=jn;jn|=1;var n=Jo.transition,s=tr;try{if(Jo.transition=null,tr=1,e)return e()}finally{tr=s,Jo.transition=n,jn=t,!(jn&6)&&Bl()}}function $1(){To=lh.current,mr(lh)}function Au(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,M5(n)),qr!==null)for(n=qr.return;n!==null;){var s=n;switch(_1(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&sy();break;case 3:Ih(),mr(so),mr(Bi),E1();break;case 5:k1(s);break;case 4:Ih();break;case 13:mr(Tr);break;case 19:mr(Tr);break;case 10:S1(s.type._context);break;case 22:case 23:$1()}n=n.return}if(ui=e,qr=e=El(e.current,null),bi=To=t,Yr=0,hf=null,O1=Xy=Bu=0,ro=zp=null,Su!==null){for(t=0;t<Su.length;t++)if(n=Su[t],s=n.interleaved,s!==null){n.interleaved=null;var c=s.next,d=n.pending;if(d!==null){var p=d.next;d.next=c,s.next=p}n.pending=s}Su=null}return e}function VI(e,t){do{var n=qr;try{if(w1(),zg.current=my,fy){for(var s=kr.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}fy=!1}if(Fu=0,ai=Xr=kr=null,Mp=!1,lf=0,D1.current=null,n===null||n.return===null){Yr=1,hf=t,qr=null;break}e:{var d=e,p=n.return,l=n,b=t;if(t=bi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var T=b,k=l,I=k.tag;if(!(k.mode&1)&&(I===0||I===11||I===15)){var M=k.alternate;M?(k.updateQueue=M.updateQueue,k.memoizedState=M.memoizedState,k.lanes=M.lanes):(k.updateQueue=null,k.memoizedState=null)}var D=BC(p);if(D!==null){D.flags&=-257,$C(D,p,l,d,t),D.mode&1&&FC(d,T,t),t=D,b=T;var H=t.updateQueue;if(H===null){var q=new Set;q.add(b),t.updateQueue=q}else H.add(b);break e}else{if(!(t&1)){FC(d,T,t),N1();break e}b=Error(st(426))}}else if(br&&l.mode&1){var J=BC(p);if(J!==null){!(J.flags&65536)&&(J.flags|=256),$C(J,p,l,d,t),x1(Ah(b,l));break e}}d=b=Ah(b,l),Yr!==4&&(Yr=2),zp===null?zp=[d]:zp.push(d),d=p;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var $=CI(d,b,t);MC(d,$);break e;case 1:l=b;var V=d.type,B=d.stateNode;if(!(d.flags&128)&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Pl===null||!Pl.has(B)))){d.flags|=65536,t&=-t,d.lanes|=t;var G=TI(d,l,t);MC(d,G);break e}}d=d.return}while(d!==null)}WI(n)}catch(ne){t=ne,qr===n&&n!==null&&(qr=n=n.return);continue}break}while(!0)}function jI(){var e=gy.current;return gy.current=my,e===null?my:e}function N1(){(Yr===0||Yr===3||Yr===2)&&(Yr=4),ui===null||!(Bu&268435455)&&!(Xy&268435455)||yl(ui,bi)}function _y(e,t){var n=jn;jn|=2;var s=jI();(ui!==e||bi!==t)&&(ya=null,Au(e,t));do try{nO();break}catch(c){VI(e,c)}while(!0);if(w1(),jn=n,gy.current=s,qr!==null)throw Error(st(261));return ui=null,bi=0,Yr}function nO(){for(;qr!==null;)UI(qr)}function rO(){for(;qr!==null&&!ED();)UI(qr)}function UI(e){var t=qI(e.alternate,e,To);e.memoizedProps=e.pendingProps,t===null?WI(e):qr=t,D1.current=null}function WI(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=X5(n,t),n!==null){n.flags&=32767,qr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Yr=6,qr=null;return}}else if(n=K5(n,t,To),n!==null){qr=n;return}if(t=t.sibling,t!==null){qr=t;return}qr=t=e}while(t!==null);Yr===0&&(Yr=5)}function vu(e,t,n){var s=tr,c=Jo.transition;try{Jo.transition=null,tr=1,iO(e,t,n,s)}finally{Jo.transition=c,tr=s}return null}function iO(e,t,n,s){do bh();while(xl!==null);if(jn&6)throw Error(st(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(st(177));e.callbackNode=null,e.callbackPriority=0;var d=n.lanes|n.childLanes;if(BD(e,d),e===ui&&(qr=ui=null,bi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lg||(lg=!0,GI(ey,function(){return bh(),null})),d=(n.flags&15990)!==0,n.subtreeFlags&15990||d){d=Jo.transition,Jo.transition=null;var p=tr;tr=1;var l=jn;jn|=4,D1.current=null,J5(e,n),BI(n,e),C5(F0),ny=!!O0,F0=O0=null,e.current=n,Q5(n),ID(),jn=l,tr=p,Jo.transition=d}else e.current=n;if(lg&&(lg=!1,xl=e,vy=c),d=e.pendingLanes,d===0&&(Pl=null),RD(n.stateNode),lo(e,Br()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],s(c.value,{componentStack:c.stack,digest:c.digest});if(yy)throw yy=!1,e=rb,rb=null,e;return vy&1&&e.tag!==0&&bh(),d=e.pendingLanes,d&1?e===ib?Lp++:(Lp=0,ib=e):Lp=0,Bl(),null}function bh(){if(xl!==null){var e=CE(vy),t=Jo.transition,n=tr;try{if(Jo.transition=null,tr=16>e?16:e,xl===null)var s=!1;else{if(e=xl,xl=null,vy=0,jn&6)throw Error(st(331));var c=jn;for(jn|=4,Ht=e.current;Ht!==null;){var d=Ht,p=d.child;if(Ht.flags&16){var l=d.deletions;if(l!==null){for(var b=0;b<l.length;b++){var T=l[b];for(Ht=T;Ht!==null;){var k=Ht;switch(k.tag){case 0:case 11:case 15:Rp(8,k,d)}var I=k.child;if(I!==null)I.return=k,Ht=I;else for(;Ht!==null;){k=Ht;var M=k.sibling,D=k.return;if(DI(k),k===T){Ht=null;break}if(M!==null){M.return=D,Ht=M;break}Ht=D}}}var H=d.alternate;if(H!==null){var q=H.child;if(q!==null){H.child=null;do{var J=q.sibling;q.sibling=null,q=J}while(q!==null)}}Ht=d}}if(d.subtreeFlags&2064&&p!==null)p.return=d,Ht=p;else e:for(;Ht!==null;){if(d=Ht,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Rp(9,d,d.return)}var $=d.sibling;if($!==null){$.return=d.return,Ht=$;break e}Ht=d.return}}var V=e.current;for(Ht=V;Ht!==null;){p=Ht;var B=p.child;if(p.subtreeFlags&2064&&B!==null)B.return=p,Ht=B;else e:for(p=V;Ht!==null;){if(l=Ht,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ky(9,l)}}catch(ne){Dr(l,l.return,ne)}if(l===p){Ht=null;break e}var G=l.sibling;if(G!==null){G.return=l.return,Ht=G;break e}Ht=l.return}}if(jn=c,Bl(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(Vy,e)}catch{}s=!0}return s}finally{tr=n,Jo.transition=t}}return!1}function JC(e,t,n){t=Ah(n,t),t=CI(e,t,1),e=Tl(e,t,1),t=Gi(),e!==null&&(kf(e,1,t),lo(e,t))}function Dr(e,t,n){if(e.tag===3)JC(e,e,n);else for(;t!==null;){if(t.tag===3){JC(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Pl===null||!Pl.has(s))){e=Ah(n,e),e=TI(t,e,1),t=Tl(t,e,1),e=Gi(),t!==null&&(kf(t,1,e),lo(t,e));break}}t=t.return}}function oO(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Gi(),e.pingedLanes|=e.suspendedLanes&n,ui===e&&(bi&n)===n&&(Yr===4||Yr===3&&(bi&130023424)===bi&&500>Br()-F1?Au(e,0):O1|=n),lo(e,t)}function HI(e,t){t===0&&(e.mode&1?(t=Jm,Jm<<=1,!(Jm&130023424)&&(Jm=4194304)):t=1);var n=Gi();e=Ca(e,t),e!==null&&(kf(e,t,n),lo(e,n))}function sO(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),HI(e,n)}function aO(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(st(314))}s!==null&&s.delete(t),HI(e,n)}var qI;qI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||so.current)io=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return io=!1,Z5(e,t,n);io=!!(e.flags&131072)}else io=!1,br&&t.flags&1048576&&XE(t,uy,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Dg(e,t),e=t.pendingProps;var c=Ph(t,Bi.current);xh(t,n),c=A1(null,t,s,e,c,n);var d=M1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ao(s)?(d=!0,ay(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,T1(t),c.updater=Zy,t.stateNode=c,c._reactInternals=t,q0(t,s,e,n),t=K0(null,t,s,!0,d,n)):(t.tag=0,br&&d&&v1(t),Hi(null,t,c,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Dg(e,t),e=t.pendingProps,c=s._init,s=c(s._payload),t.type=s,c=t.tag=uO(s),e=ms(s,e),c){case 0:t=Z0(null,t,s,e,n);break e;case 1:t=jC(null,t,s,e,n);break e;case 11:t=NC(null,t,s,e,n);break e;case 14:t=VC(null,t,s,ms(s.type,e),n);break e}throw Error(st(306,s,""))}return t;case 0:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ms(s,c),Z0(e,t,s,c,n);case 1:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ms(s,c),jC(e,t,s,c,n);case 3:e:{if(II(t),e===null)throw Error(st(387));s=t.pendingProps,d=t.memoizedState,c=d.element,nI(e,t),dy(t,s,null,n);var p=t.memoizedState;if(s=p.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=Ah(Error(st(423)),t),t=UC(e,t,s,n,c);break e}else if(s!==c){c=Ah(Error(st(424)),t),t=UC(e,t,s,n,c);break e}else for(Io=Cl(t.stateNode.containerInfo.firstChild),Ao=t,br=!0,ys=null,n=eI(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kh(),s===c){t=Ta(e,t,n);break e}Hi(e,t,s,n)}t=t.child}return t;case 5:return rI(t),e===null&&U0(t),s=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,p=c.children,B0(s,c)?p=null:d!==null&&B0(s,d)&&(t.flags|=32),EI(e,t),Hi(e,t,p,n),t.child;case 6:return e===null&&U0(t),null;case 13:return AI(e,t,n);case 4:return P1(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Eh(t,null,s,n):Hi(e,t,s,n),t.child;case 11:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ms(s,c),NC(e,t,s,c,n);case 7:return Hi(e,t,t.pendingProps,n),t.child;case 8:return Hi(e,t,t.pendingProps.children,n),t.child;case 12:return Hi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,c=t.pendingProps,d=t.memoizedProps,p=c.value,hr(cy,s._currentValue),s._currentValue=p,d!==null)if(xs(d.value,p)){if(d.children===c.children&&!so.current){t=Ta(e,t,n);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){p=d.child;for(var b=l.firstContext;b!==null;){if(b.context===s){if(d.tag===1){b=ba(-1,n&-n),b.tag=2;var T=d.updateQueue;if(T!==null){T=T.shared;var k=T.pending;k===null?b.next=b:(b.next=k.next,k.next=b),T.pending=b}}d.lanes|=n,b=d.alternate,b!==null&&(b.lanes|=n),W0(d.return,n,t),l.lanes|=n;break}b=b.next}}else if(d.tag===10)p=d.type===t.type?null:d.child;else if(d.tag===18){if(p=d.return,p===null)throw Error(st(341));p.lanes|=n,l=p.alternate,l!==null&&(l.lanes|=n),W0(p,n,t),p=d.sibling}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===t){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}Hi(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,s=t.pendingProps.children,xh(t,n),c=ts(c),s=s(c),t.flags|=1,Hi(e,t,s,n),t.child;case 14:return s=t.type,c=ms(s,t.pendingProps),c=ms(s.type,c),VC(e,t,s,c,n);case 15:return PI(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ms(s,c),Dg(e,t),t.tag=1,ao(s)?(e=!0,ay(t)):e=!1,xh(t,n),SI(t,s,c),q0(t,s,c,n),K0(null,t,s,!0,e,n);case 19:return MI(e,t,n);case 22:return kI(e,t,n)}throw Error(st(156,t.tag))};function GI(e,t){return xE(e,t)}function lO(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xo(e,t,n,s){return new lO(e,t,n,s)}function V1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function uO(e){if(typeof e=="function")return V1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===s1)return 11;if(e===a1)return 14}return 2}function El(e,t){var n=e.alternate;return n===null?(n=Xo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bg(e,t,n,s,c,d){var p=2;if(s=e,typeof e=="function")V1(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case Jc:return Mu(n.children,c,d,t);case o1:p=8,c|=8;break;case g0:return e=Xo(12,n,t,c|2),e.elementType=g0,e.lanes=d,e;case y0:return e=Xo(13,n,t,c),e.elementType=y0,e.lanes=d,e;case v0:return e=Xo(19,n,t,c),e.elementType=v0,e.lanes=d,e;case rE:return Yy(n,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tE:p=10;break e;case nE:p=9;break e;case s1:p=11;break e;case a1:p=14;break e;case fl:p=16,s=null;break e}throw Error(st(130,e==null?e:typeof e,""))}return t=Xo(p,n,t,c),t.elementType=e,t.type=s,t.lanes=d,t}function Mu(e,t,n,s){return e=Xo(7,e,s,t),e.lanes=n,e}function Yy(e,t,n,s){return e=Xo(22,e,s,t),e.elementType=rE,e.lanes=n,e.stateNode={isHidden:!1},e}function $x(e,t,n){return e=Xo(6,e,null,t),e.lanes=n,e}function Nx(e,t,n){return t=Xo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cO(e,t,n,s,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xx(0),this.expirationTimes=xx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xx(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function j1(e,t,n,s,c,d,p,l,b){return e=new cO(e,t,n,l,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Xo(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},T1(d),e}function hO(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function ZI(e){if(!e)return Rl;e=e._reactInternals;e:{if(Wu(e)!==e||e.tag!==1)throw Error(st(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ao(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(st(171))}if(e.tag===1){var n=e.type;if(ao(n))return ZE(e,n,t)}return t}function KI(e,t,n,s,c,d,p,l,b){return e=j1(n,s,!0,e,c,d,p,l,b),e.context=ZI(null),n=e.current,s=Gi(),c=kl(n),d=ba(s,c),d.callback=t??null,Tl(n,d,c),e.current.lanes=c,kf(e,c,s),lo(e,s),e}function Jy(e,t,n,s){var c=t.current,d=Gi(),p=kl(c);return n=ZI(n),t.context===null?t.context=n:t.pendingContext=n,t=ba(d,p),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Tl(c,t,p),e!==null&&(_s(e,c,p,d),Rg(e,c,p)),p}function xy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function QC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function U1(e,t){QC(e,t),(e=e.alternate)&&QC(e,t)}function dO(){return null}var XI=typeof reportError=="function"?reportError:function(e){console.error(e)};function W1(e){this._internalRoot=e}Qy.prototype.render=W1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(st(409));Jy(e,t,null,null)};Qy.prototype.unmount=W1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$u(function(){Jy(null,e,null,null)}),t[Sa]=null}};function Qy(e){this._internalRoot=e}Qy.prototype.unstable_scheduleHydration=function(e){if(e){var t=kE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gl.length&&t!==0&&t<gl[n].priority;n++);gl.splice(n,0,e),n===0&&IE(e)}};function H1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ev(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eT(){}function pO(e,t,n,s,c){if(c){if(typeof s=="function"){var d=s;s=function(){var T=xy(p);d.call(T)}}var p=KI(t,s,e,0,null,!1,!1,"",eT);return e._reactRootContainer=p,e[Sa]=p.current,nf(e.nodeType===8?e.parentNode:e),$u(),p}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var l=s;s=function(){var T=xy(b);l.call(T)}}var b=j1(e,0,!1,null,null,!1,!1,"",eT);return e._reactRootContainer=b,e[Sa]=b.current,nf(e.nodeType===8?e.parentNode:e),$u(function(){Jy(t,b,n,s)}),b}function tv(e,t,n,s,c){var d=n._reactRootContainer;if(d){var p=d;if(typeof c=="function"){var l=c;c=function(){var b=xy(p);l.call(b)}}Jy(t,p,e,c)}else p=pO(n,t,e,c,s);return xy(p)}TE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=_p(t.pendingLanes);n!==0&&(c1(t,n|1),lo(t,Br()),!(jn&6)&&(Mh=Br()+500,Bl()))}break;case 13:$u(function(){var s=Ca(e,1);if(s!==null){var c=Gi();_s(s,e,1,c)}}),U1(e,1)}};h1=function(e){if(e.tag===13){var t=Ca(e,134217728);if(t!==null){var n=Gi();_s(t,e,134217728,n)}U1(e,134217728)}};PE=function(e){if(e.tag===13){var t=kl(e),n=Ca(e,t);if(n!==null){var s=Gi();_s(n,e,t,s)}U1(e,t)}};kE=function(){return tr};EE=function(e,t){var n=tr;try{return tr=e,t()}finally{tr=n}};E0=function(e,t,n){switch(t){case"input":if(b0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var c=Hy(s);if(!c)throw Error(st(90));oE(s),b0(s,c)}}}break;case"textarea":aE(e,n);break;case"select":t=n.value,t!=null&&gh(e,!!n.multiple,t,!1)}};fE=B1;mE=$u;var fO={usingClientEntryPoint:!1,Events:[If,nh,Hy,dE,pE,B1]},up={findFiberByHostInstance:wu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mO={bundleType:up.bundleType,version:up.version,rendererPackageName:up.rendererPackageName,rendererConfig:up.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ma.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vE(e),e===null?null:e.stateNode},findFiberByHostInstance:up.findFiberByHostInstance||dO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ug.isDisabled&&ug.supportsFiber)try{Vy=ug.inject(mO),js=ug}catch{}}Lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fO;Lo.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H1(t))throw Error(st(200));return hO(e,t,null,n)};Lo.createRoot=function(e,t){if(!H1(e))throw Error(st(299));var n=!1,s="",c=XI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=j1(e,1,!1,null,null,n,!1,s,c),e[Sa]=t.current,nf(e.nodeType===8?e.parentNode:e),new W1(t)};Lo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(st(188)):(e=Object.keys(e).join(","),Error(st(268,e)));return e=vE(t),e=e===null?null:e.stateNode,e};Lo.flushSync=function(e){return $u(e)};Lo.hydrate=function(e,t,n){if(!ev(t))throw Error(st(200));return tv(null,e,t,!0,n)};Lo.hydrateRoot=function(e,t,n){if(!H1(e))throw Error(st(405));var s=n!=null&&n.hydratedSources||null,c=!1,d="",p=XI;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),t=KI(t,null,e,1,n??null,c,!1,d,p),e[Sa]=t.current,nf(e),s)for(e=0;e<s.length;e++)n=s[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new Qy(t)};Lo.render=function(e,t,n){if(!ev(t))throw Error(st(200));return tv(null,e,t,!1,n)};Lo.unmountComponentAtNode=function(e){if(!ev(e))throw Error(st(40));return e._reactRootContainer?($u(function(){tv(null,null,e,!1,function(){e._reactRootContainer=null,e[Sa]=null})}),!0):!1};Lo.unstable_batchedUpdates=B1;Lo.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!ev(n))throw Error(st(200));if(e==null||e._reactInternals===void 0)throw Error(st(38));return tv(e,t,n,!1,s)};Lo.version="18.3.1-next-f1338f8080-20240426";function YI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YI)}catch(e){console.error(e)}}YI(),Yk.exports=Lo;var Mf=Yk.exports;const cg=Yb(Mf);var JI,tT=Mf;JI=tT.createRoot,tT.hydrateRoot;const gO="modulepreload",yO=function(e){return"/routr/"+e},nT={},vO=function(t,n,s){let c=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),l=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));c=Promise.allSettled(n.map(b=>{if(b=yO(b),b in nT)return;nT[b]=!0;const T=b.endsWith(".css"),k=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${k}`))return;const I=document.createElement("link");if(I.rel=T?"stylesheet":gO,T||(I.as="script"),I.crossOrigin="",I.href=b,l&&I.setAttribute("nonce",l),document.head.appendChild(I),T)return new Promise((M,D)=>{I.addEventListener("load",M),I.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(p){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=p,window.dispatchEvent(l),!l.defaultPrevented)throw p}return c.then(p=>{for(const l of p||[])l.status==="rejected"&&d(l.reason);return t().catch(d)})},QI=W.createContext(null);function q1(){var s;const e=(s=W.useContext(QI))==null?void 0:s.maps,t=W.useContext(Rf);return W.useMemo(()=>({...e,current:t==null?void 0:t.map}),[e,t])}function _O(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return n===c&&s===d}function Os(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Os(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const c of n)if(!t.hasOwnProperty(c)||!Os(e[c],t[c]))return!1;return!0}return!1}function rT(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function iT(e,t){const n=t.viewState||t,s={};if("longitude"in n&&"latitude"in n&&(n.longitude!==e.center.lng||n.latitude!==e.center.lat)){const c=e.center.constructor;s.center=new c(n.longitude,n.latitude)}return"zoom"in n&&n.zoom!==e.zoom&&(s.zoom=n.zoom),"bearing"in n&&n.bearing!==e.bearing&&(s.bearing=n.bearing),"pitch"in n&&n.pitch!==e.pitch&&(s.pitch=n.pitch),n.padding&&e.padding&&!Os(n.padding,e.padding)&&(s.padding=n.padding),s}const xO=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function oT(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const s of e.layers)t[s.id]=s;const n=e.layers.map(s=>{let c=null;"interactive"in s&&(c=Object.assign({},s),delete c.interactive);const d=t[s.ref];if(d){c=c||Object.assign({},s),delete c.ref;for(const p of xO)p in d&&(c[p]=d[p])}return c||s});return{...e,layers:n}}const sT={version:8,sources:{},layers:[]},aT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},lT={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},uT={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},bO=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],wO=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Rh{constructor(t,n,s){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=c=>{const d=this.props[uT[c.type]];d?d(c):c.type==="error"&&console.error(c.error)},this._onCameraEvent=c=>{if(this._internalUpdate)return;c.viewState=this._propsedCameraUpdate||rT(this._map.transform);const d=this.props[lT[c.type]];d&&d(c)},this._onCameraUpdate=c=>this._internalUpdate?c:(this._propsedCameraUpdate=rT(c),iT(c,this.props)),this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[aT[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._MapClass=t,this.props=n,this._initialize(s)}get map(){return this._map}setProps(t){const n=this.props;this.props=t;const s=this._updateSettings(t,n),c=this._updateSize(t),d=this._updateViewState(t);this._updateStyle(t,n),this._updateStyleComponents(t),this._updateHandlers(t,n),(s||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const s=Rh.savedMaps.pop();if(!s)return null;const c=s.map,d=c.getContainer();for(n.className=d.className;d.childNodes.length>0;)n.appendChild(d.childNodes[0]);c._container=n;const p=c._resizeObserver;p&&(p.disconnect(),p.observe(n)),s.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):s._updateViewState(l)),c.isStyleLoaded()?c.fire("load"):c.once("style.load",()=>c.fire("load")),c._update(),s}_initialize(t){const{props:n}=this,{mapStyle:s=sT}=n,c={...n,...n.initialViewState,container:t,style:oT(s)},d=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),n.gl){const l=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=l,n.gl)}const p=new this._MapClass(c);d.padding&&p.setPadding(d.padding),n.cursor&&(p.getCanvas().style.cursor=n.cursor),p.transformCameraUpdate=this._onCameraUpdate,p.on("style.load",()=>{var l;this._styleComponents={light:p.getLight(),sky:p.getSky(),projection:(l=p.getProjection)==null?void 0:l.call(p),terrain:p.getTerrain()},this._updateStyleComponents(this.props)}),p.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const l in aT)p.on(l,this._onPointerEvent);for(const l in lT)p.on(l,this._onCameraEvent);for(const l in uT)p.on(l,this._onEvent);this._map=p}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),Rh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:n}=t;if(n){const s=this._map;if(n.width!==s.transform.width||n.height!==s.transform.height)return s.resize(),!0}return!1}_updateViewState(t){const n=this._map,s=n.transform;if(!n.isMoving()){const d=iT(s,t);if(Object.keys(d).length>0)return this._internalUpdate=!0,n.jumpTo(d),this._internalUpdate=!1,!0}return!1}_updateSettings(t,n){const s=this._map;let c=!1;for(const d of bO)if(d in t&&!Os(t[d],n[d])){c=!0;const p=s[`set${d[0].toUpperCase()}${d.slice(1)}`];p==null||p.call(s,t[d])}return c}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==n.mapStyle){const{mapStyle:s=sT,styleDiffing:c=!0}=t,d={diff:c};"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(oT(s),d)}}_updateStyleComponents({light:t,projection:n,sky:s,terrain:c}){var l,b;const d=this._map,p=this._styleComponents;d.style._loaded&&(t&&!Os(t,p.light)&&(p.light=t,d.setLight(t)),n&&!Os(n,p.projection)&&n!==((l=p.projection)==null?void 0:l.type)&&(p.projection=n,(b=d.setProjection)==null||b.call(d,typeof n=="string"?{type:n}:n)),s&&!Os(s,p.sky)&&(p.sky=s,d.setSky(s)),c!==void 0&&!Os(c,p.terrain)&&(!c||d.getSource(c.source))&&(p.terrain=c,d.setTerrain(c)))}_updateHandlers(t,n){const s=this._map;for(const c of wO){const d=t[c]??!0,p=n[c]??!0;Os(d,p)||(d?s[c].enable(d):s[c].disable())}}_queryRenderedFeatures(t){const n=this._map,{interactiveLayerIds:s=[]}=this.props;try{return n.queryRenderedFeatures(t,{layers:s.filter(n.getLayer.bind(n))})}catch{return[]}}_updateHover(t){var c;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const d=t.type,p=((c=this._hoveredFeatures)==null?void 0:c.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&p&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!p&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}}Rh.savedMaps=[];const SO=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function CO(e){if(!e)return null;const t=e.map,n={getMap:()=>t};for(const s of TO(t))!(s in n)&&!SO.includes(s)&&(n[s]=t[s].bind(t));return n}function TO(e){const t=new Set;let n=e;for(;n;){for(const s of Object.getOwnPropertyNames(n))s[0]!=="_"&&typeof e[s]=="function"&&s!=="fire"&&s!=="setEventedParent"&&t.add(s);n=Object.getPrototypeOf(n)}return Array.from(t)}const PO=typeof document<"u"?W.useLayoutEffect:W.useEffect;function kO(e,t){const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",maxParallelImageRequests:s,workerCount:c,workerUrl:d}=t;n&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(n,p=>{p&&console.error(p)},!0),s!==void 0&&e.setMaxParallelImageRequests(s),c!==void 0&&e.setWorkerCount(c),d!==void 0&&e.setWorkerUrl(d)}const Rf=W.createContext(null);function EO(e,t){const n=W.useContext(QI),[s,c]=W.useState(null),d=W.useRef(),{current:p}=W.useRef({mapLib:null,map:null});W.useEffect(()=>{const T=e.mapLib;let k=!0,I;return Promise.resolve(T||vO(()=>Promise.resolve().then(()=>iH),void 0)).then(M=>{if(!k)return;if(!M)throw new Error("Invalid mapLib");const D="Map"in M?M:M.default;if(!D.Map)throw new Error("Invalid mapLib");if(kO(D,e),!D.supported||D.supported(e))e.reuseMaps&&(I=Rh.reuse(e,d.current)),I||(I=new Rh(D.Map,e,d.current)),p.map=CO(I),p.mapLib=D,c(I),n==null||n.onMapMount(p.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(M=>{const{onError:D}=e;D?D({type:"error",target:null,originalEvent:null,error:M}):console.error(M)}),()=>{k=!1,I&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?I.recycle():I.destroy())}},[]),PO(()=>{s&&s.setProps(e)}),W.useImperativeHandle(t,()=>p.map,[s]);const l=W.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),b={height:"100%"};return W.createElement("div",{id:e.id,ref:d,style:l},s&&W.createElement(Rf.Provider,{value:p},W.createElement("div",{"mapboxgl-children":"",style:b},e.children)))}const IO=W.forwardRef(EO),AO=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ra(e,t){if(!e||!t)return;const n=e.style;for(const s in t){const c=t[s];Number.isFinite(c)&&!AO.test(s)?n[s]=`${c}px`:n[s]=c}}W.memo(W.forwardRef((e,t)=>{const{map:n,mapLib:s}=W.useContext(Rf),c=W.useRef({props:e});c.current.props=e;const d=W.useMemo(()=>{let q=!1;W.Children.forEach(e.children,V=>{V&&(q=!0)});const J={...e,element:q?document.createElement("div"):null},$=new s.Marker(J);return $.setLngLat([e.longitude,e.latitude]),$.getElement().addEventListener("click",V=>{var B,G;(G=(B=c.current.props).onClick)==null||G.call(B,{type:"click",target:$,originalEvent:V})}),$.on("dragstart",V=>{var G,ne;const B=V;B.lngLat=d.getLngLat(),(ne=(G=c.current.props).onDragStart)==null||ne.call(G,B)}),$.on("drag",V=>{var G,ne;const B=V;B.lngLat=d.getLngLat(),(ne=(G=c.current.props).onDrag)==null||ne.call(G,B)}),$.on("dragend",V=>{var G,ne;const B=V;B.lngLat=d.getLngLat(),(ne=(G=c.current.props).onDragEnd)==null||ne.call(G,B)}),$},[]);W.useEffect(()=>(d.addTo(n.getMap()),()=>{d.remove()}),[]);const{longitude:p,latitude:l,offset:b,style:T,draggable:k=!1,popup:I=null,rotation:M=0,rotationAlignment:D="auto",pitchAlignment:H="auto"}=e;return W.useEffect(()=>{Ra(d.getElement(),T)},[T]),W.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==p||d.getLngLat().lat!==l)&&d.setLngLat([p,l]),b&&!_O(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==k&&d.setDraggable(k),d.getRotation()!==M&&d.setRotation(M),d.getRotationAlignment()!==D&&d.setRotationAlignment(D),d.getPitchAlignment()!==H&&d.setPitchAlignment(H),d.getPopup()!==I&&d.setPopup(I),Mf.createPortal(e.children,d.getElement())}));function cT(e){return new Set(e?e.trim().split(/\s+/):[])}W.memo(W.forwardRef((e,t)=>{const{map:n,mapLib:s}=W.useContext(Rf),c=W.useMemo(()=>document.createElement("div"),[]),d=W.useRef({props:e});d.current.props=e;const p=W.useMemo(()=>{const l={...e},b=new s.Popup(l);return b.setLngLat([e.longitude,e.latitude]),b.once("open",T=>{var k,I;(I=(k=d.current.props).onOpen)==null||I.call(k,T)}),b},[]);if(W.useEffect(()=>{const l=b=>{var T,k;(k=(T=d.current.props).onClose)==null||k.call(T,b)};return p.on("close",l),p.setDOMContent(c).addTo(n.getMap()),()=>{p.off("close",l),p.isOpen()&&p.remove()}},[]),W.useEffect(()=>{Ra(p.getElement(),e.style)},[e.style]),W.useImperativeHandle(t,()=>p,[]),p.isOpen()&&((p.getLngLat().lng!==e.longitude||p.getLngLat().lat!==e.latitude)&&p.setLngLat([e.longitude,e.latitude]),e.offset&&!Os(p.options.offset,e.offset)&&p.setOffset(e.offset),(p.options.anchor!==e.anchor||p.options.maxWidth!==e.maxWidth)&&(p.options.anchor=e.anchor,p.setMaxWidth(e.maxWidth)),p.options.className!==e.className)){const l=cT(p.options.className),b=cT(e.className);for(const T of l)b.has(T)||p.removeClassName(T);for(const T of b)l.has(T)||p.addClassName(T);p.options.className=e.className}return Mf.createPortal(e.children,c)}));function Hu(e,t,n,s){const c=W.useContext(Rf),d=W.useMemo(()=>e(c),[]);return W.useEffect(()=>{const p=t,l=null,b=typeof t=="function"?t:null,{map:T}=c;return T.hasControl(d)||(T.addControl(d,p==null?void 0:p.position),l&&l(c)),()=>{b&&b(c),T.hasControl(d)&&T.removeControl(d)}},[]),d}function MO(e){const t=Hu(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return W.useEffect(()=>{Ra(t._container,e.style)},[e.style]),null}W.memo(MO);function RO(e){const t=Hu(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return W.useEffect(()=>{Ra(t._controlContainer,e.style)},[e.style]),null}W.memo(RO);function zO(e,t){const n=W.useRef({props:e}),s=Hu(({mapLib:c})=>{const d=new c.GeolocateControl(e),p=d._setupUI;return d._setupUI=()=>{d._container.hasChildNodes()||p()},d.on("geolocate",l=>{var b,T;(T=(b=n.current.props).onGeolocate)==null||T.call(b,l)}),d.on("error",l=>{var b,T;(T=(b=n.current.props).onError)==null||T.call(b,l)}),d.on("outofmaxbounds",l=>{var b,T;(T=(b=n.current.props).onOutOfMaxBounds)==null||T.call(b,l)}),d.on("trackuserlocationstart",l=>{var b,T;(T=(b=n.current.props).onTrackUserLocationStart)==null||T.call(b,l)}),d.on("trackuserlocationend",l=>{var b,T;(T=(b=n.current.props).onTrackUserLocationEnd)==null||T.call(b,l)}),d},{position:e.position});return n.current.props=e,W.useImperativeHandle(t,()=>s,[]),W.useEffect(()=>{Ra(s._container,e.style)},[e.style]),null}W.memo(W.forwardRef(zO));function LO(e){const t=Hu(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return W.useEffect(()=>{Ra(t._container,e.style)},[e.style]),null}W.memo(LO);function DO(e){const t=Hu(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),n=W.useRef(e),s=n.current;n.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==s.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==s.unit&&t.setUnit(e.unit),W.useEffect(()=>{Ra(t._container,c)},[c]),null}W.memo(DO);function OO(e){const t=Hu(({mapLib:n})=>new n.TerrainControl(e),{position:e.position});return W.useEffect(()=>{Ra(t._container,e.style)},[e.style]),null}W.memo(OO);function FO(e){const t=Hu(({mapLib:n})=>new n.LogoControl(e),{position:e.position});return W.useEffect(()=>{Ra(t._container,e.style)},[e.style]),null}W.memo(FO);const by=[-100,40],$g=1,Ng=10;function BO(e){const t=e.properties,n=[];return t.housenumber&&n.push(t.housenumber),t.street&&n.push(t.street),!t.street&&t.locality&&n.push(t.locality),!t.street&&!t.locality&&t.district&&n.push(t.district),t.city&&n.push(t.city),t.county&&!t.city&&n.push(t.county),t.state&&n.push(t.state),t.country&&n.push(t.country),n.join(", ")||t.name||"Unknown location"}async function $O(){try{const t=await(await fetch("https://ipwho.is/")).json();if(typeof t.latitude=="number"&&typeof t.longitude=="number")return[t.longitude,t.latitude]}catch{}return by}async function NO(e){const n=await(await fetch(`https://photon.komoot.io/api/?q=${encodeURIComponent(e)}&limit=3`)).json();if(!n.features)return[];const s=n.features.map(c=>({id:c.properties.osm_id,coordinates:c.geometry.coordinates,name:BO(c)}));return Array.from(new Map(s.map(c=>[c.id,c])).values())}function VO(){const{current:e}=q1();return W.useEffect(()=>{e&&(async()=>{const t=await $O();t!==by&&e.flyTo({center:t,zoom:8})})()},[e]),e?ye.jsx(ye.Fragment,{}):null}const df={black:"#000",white:"#fff"},jc={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Uc={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Wc={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Hc={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},qc={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},cp={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},jO={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Pa(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>n.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${n} for the full message.`}const nv="$$material";function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wy.apply(null,arguments)}function UO(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function WO(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var HO=function(){function e(n){var s=this;this._insertTag=function(c){var d;s.tags.length===0?s.insertionPoint?d=s.insertionPoint.nextSibling:s.prepend?d=s.container.firstChild:d=s.before:d=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(c,d),s.tags.push(c)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(WO(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=UO(c);try{d.insertRule(s,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var c;return(c=s.parentNode)==null?void 0:c.removeChild(s)}),this.tags=[],this.ctr=0},e}(),Li="-ms-",Sy="-moz-",Gn="-webkit-",eA="comm",G1="rule",Z1="decl",qO="@import",tA="@keyframes",GO="@layer",ZO=Math.abs,rv=String.fromCharCode,KO=Object.assign;function XO(e,t){return xi(e,0)^45?(((t<<2^xi(e,0))<<2^xi(e,1))<<2^xi(e,2))<<2^xi(e,3):0}function nA(e){return e.trim()}function YO(e,t){return(e=t.exec(e))?e[0]:e}function Zn(e,t,n){return e.replace(t,n)}function ab(e,t){return e.indexOf(t)}function xi(e,t){return e.charCodeAt(t)|0}function pf(e,t,n){return e.slice(t,n)}function Fs(e){return e.length}function K1(e){return e.length}function hg(e,t){return t.push(e),e}function JO(e,t){return e.map(t).join("")}var iv=1,zh=1,rA=0,ho=0,Hr=0,Wh="";function ov(e,t,n,s,c,d,p){return{value:e,root:t,parent:n,type:s,props:c,children:d,line:iv,column:zh,length:p,return:""}}function hp(e,t){return KO(ov("",null,null,"",null,null,0),e,{length:-e.length},t)}function QO(){return Hr}function eF(){return Hr=ho>0?xi(Wh,--ho):0,zh--,Hr===10&&(zh=1,iv--),Hr}function Mo(){return Hr=ho<rA?xi(Wh,ho++):0,zh++,Hr===10&&(zh=1,iv++),Hr}function Ws(){return xi(Wh,ho)}function Vg(){return ho}function zf(e,t){return pf(Wh,e,t)}function ff(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function iA(e){return iv=zh=1,rA=Fs(Wh=e),ho=0,[]}function oA(e){return Wh="",e}function jg(e){return nA(zf(ho-1,lb(e===91?e+2:e===40?e+1:e)))}function tF(e){for(;(Hr=Ws())&&Hr<33;)Mo();return ff(e)>2||ff(Hr)>3?"":" "}function nF(e,t){for(;--t&&Mo()&&!(Hr<48||Hr>102||Hr>57&&Hr<65||Hr>70&&Hr<97););return zf(e,Vg()+(t<6&&Ws()==32&&Mo()==32))}function lb(e){for(;Mo();)switch(Hr){case e:return ho;case 34:case 39:e!==34&&e!==39&&lb(Hr);break;case 40:e===41&&lb(e);break;case 92:Mo();break}return ho}function rF(e,t){for(;Mo()&&e+Hr!==57;)if(e+Hr===84&&Ws()===47)break;return"/*"+zf(t,ho-1)+"*"+rv(e===47?e:Mo())}function iF(e){for(;!ff(Ws());)Mo();return zf(e,ho)}function oF(e){return oA(Ug("",null,null,null,[""],e=iA(e),0,[0],e))}function Ug(e,t,n,s,c,d,p,l,b){for(var T=0,k=0,I=p,M=0,D=0,H=0,q=1,J=1,$=1,V=0,B="",G=c,ne=d,re=s,ae=B;J;)switch(H=V,V=Mo()){case 40:if(H!=108&&xi(ae,I-1)==58){ab(ae+=Zn(jg(V),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:ae+=jg(V);break;case 9:case 10:case 13:case 32:ae+=tF(H);break;case 92:ae+=nF(Vg()-1,7);continue;case 47:switch(Ws()){case 42:case 47:hg(sF(rF(Mo(),Vg()),t,n),b);break;default:ae+="/"}break;case 123*q:l[T++]=Fs(ae)*$;case 125*q:case 59:case 0:switch(V){case 0:case 125:J=0;case 59+k:$==-1&&(ae=Zn(ae,/\f/g,"")),D>0&&Fs(ae)-I&&hg(D>32?dT(ae+";",s,n,I-1):dT(Zn(ae," ","")+";",s,n,I-2),b);break;case 59:ae+=";";default:if(hg(re=hT(ae,t,n,T,k,c,l,B,G=[],ne=[],I),d),V===123)if(k===0)Ug(ae,t,re,re,G,d,I,l,ne);else switch(M===99&&xi(ae,3)===110?100:M){case 100:case 108:case 109:case 115:Ug(e,re,re,s&&hg(hT(e,re,re,0,0,c,l,B,c,G=[],I),ne),c,ne,I,l,s?G:ne);break;default:Ug(ae,re,re,re,[""],ne,0,l,ne)}}T=k=D=0,q=$=1,B=ae="",I=p;break;case 58:I=1+Fs(ae),D=H;default:if(q<1){if(V==123)--q;else if(V==125&&q++==0&&eF()==125)continue}switch(ae+=rv(V),V*q){case 38:$=k>0?1:(ae+="\f",-1);break;case 44:l[T++]=(Fs(ae)-1)*$,$=1;break;case 64:Ws()===45&&(ae+=jg(Mo())),M=Ws(),k=I=Fs(B=ae+=iF(Vg())),V++;break;case 45:H===45&&Fs(ae)==2&&(q=0)}}return d}function hT(e,t,n,s,c,d,p,l,b,T,k){for(var I=c-1,M=c===0?d:[""],D=K1(M),H=0,q=0,J=0;H<s;++H)for(var $=0,V=pf(e,I+1,I=ZO(q=p[H])),B=e;$<D;++$)(B=nA(q>0?M[$]+" "+V:Zn(V,/&\f/g,M[$])))&&(b[J++]=B);return ov(e,t,n,c===0?G1:l,b,T,k)}function sF(e,t,n){return ov(e,t,n,eA,rv(QO()),pf(e,2,-2),0)}function dT(e,t,n,s){return ov(e,t,n,Z1,pf(e,0,s),pf(e,s+1,-1),s)}function wh(e,t){for(var n="",s=K1(e),c=0;c<s;c++)n+=t(e[c],c,e,t)||"";return n}function aF(e,t,n,s){switch(e.type){case GO:if(e.children.length)break;case qO:case Z1:return e.return=e.return||e.value;case eA:return"";case tA:return e.return=e.value+"{"+wh(e.children,s)+"}";case G1:e.value=e.props.join(",")}return Fs(n=wh(e.children,s))?e.return=e.value+"{"+n+"}":""}function lF(e){var t=K1(e);return function(n,s,c,d){for(var p="",l=0;l<t;l++)p+=e[l](n,s,c,d)||"";return p}}function uF(e){return function(t){t.root||(t=t.return)&&e(t)}}function sA(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var cF=function(t,n,s){for(var c=0,d=0;c=d,d=Ws(),c===38&&d===12&&(n[s]=1),!ff(d);)Mo();return zf(t,ho)},hF=function(t,n){var s=-1,c=44;do switch(ff(c)){case 0:c===38&&Ws()===12&&(n[s]=1),t[s]+=cF(ho-1,n,s);break;case 2:t[s]+=jg(c);break;case 4:if(c===44){t[++s]=Ws()===58?"&\f":"",n[s]=t[s].length;break}default:t[s]+=rv(c)}while(c=Mo());return t},dF=function(t,n){return oA(hF(iA(t),n))},pT=new WeakMap,pF=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,s=t.parent,c=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!pT.get(s))&&!c){pT.set(t,!0);for(var d=[],p=dF(n,d),l=s.props,b=0,T=0;b<p.length;b++)for(var k=0;k<l.length;k++,T++)t.props[T]=d[b]?p[b].replace(/&\f/g,l[k]):l[k]+" "+p[b]}}},fF=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function aA(e,t){switch(XO(e,t)){case 5103:return Gn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Gn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Gn+e+Sy+e+Li+e+e;case 6828:case 4268:return Gn+e+Li+e+e;case 6165:return Gn+e+Li+"flex-"+e+e;case 5187:return Gn+e+Zn(e,/(\w+).+(:[^]+)/,Gn+"box-$1$2"+Li+"flex-$1$2")+e;case 5443:return Gn+e+Li+"flex-item-"+Zn(e,/flex-|-self/,"")+e;case 4675:return Gn+e+Li+"flex-line-pack"+Zn(e,/align-content|flex-|-self/,"")+e;case 5548:return Gn+e+Li+Zn(e,"shrink","negative")+e;case 5292:return Gn+e+Li+Zn(e,"basis","preferred-size")+e;case 6060:return Gn+"box-"+Zn(e,"-grow","")+Gn+e+Li+Zn(e,"grow","positive")+e;case 4554:return Gn+Zn(e,/([^-])(transform)/g,"$1"+Gn+"$2")+e;case 6187:return Zn(Zn(Zn(e,/(zoom-|grab)/,Gn+"$1"),/(image-set)/,Gn+"$1"),e,"")+e;case 5495:case 3959:return Zn(e,/(image-set\([^]*)/,Gn+"$1$`$1");case 4968:return Zn(Zn(e,/(.+:)(flex-)?(.*)/,Gn+"box-pack:$3"+Li+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Gn+e+e;case 4095:case 3583:case 4068:case 2532:return Zn(e,/(.+)-inline(.+)/,Gn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Fs(e)-1-t>6)switch(xi(e,t+1)){case 109:if(xi(e,t+4)!==45)break;case 102:return Zn(e,/(.+:)(.+)-([^]+)/,"$1"+Gn+"$2-$3$1"+Sy+(xi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~ab(e,"stretch")?aA(Zn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(xi(e,t+1)!==115)break;case 6444:switch(xi(e,Fs(e)-3-(~ab(e,"!important")&&10))){case 107:return Zn(e,":",":"+Gn)+e;case 101:return Zn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Gn+(xi(e,14)===45?"inline-":"")+"box$3$1"+Gn+"$2$3$1"+Li+"$2box$3")+e}break;case 5936:switch(xi(e,t+11)){case 114:return Gn+e+Li+Zn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Gn+e+Li+Zn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Gn+e+Li+Zn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Gn+e+Li+e+e}return e}var mF=function(t,n,s,c){if(t.length>-1&&!t.return)switch(t.type){case Z1:t.return=aA(t.value,t.length);break;case tA:return wh([hp(t,{value:Zn(t.value,"@","@"+Gn)})],c);case G1:if(t.length)return JO(t.props,function(d){switch(YO(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return wh([hp(t,{props:[Zn(d,/:(read-\w+)/,":"+Sy+"$1")]})],c);case"::placeholder":return wh([hp(t,{props:[Zn(d,/:(plac\w+)/,":"+Gn+"input-$1")]}),hp(t,{props:[Zn(d,/:(plac\w+)/,":"+Sy+"$1")]}),hp(t,{props:[Zn(d,/:(plac\w+)/,Li+"input-$1")]})],c)}return""})}},gF=[mF],yF=function(t){var n=t.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(q){var J=q.getAttribute("data-emotion");J.indexOf(" ")!==-1&&(document.head.appendChild(q),q.setAttribute("data-s",""))})}var c=t.stylisPlugins||gF,d={},p,l=[];p=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(q){for(var J=q.getAttribute("data-emotion").split(" "),$=1;$<J.length;$++)d[J[$]]=!0;l.push(q)});var b,T=[pF,fF];{var k,I=[aF,uF(function(q){k.insert(q)})],M=lF(T.concat(c,I)),D=function(J){return wh(oF(J),M)};b=function(J,$,V,B){k=V,D(J?J+"{"+$.styles+"}":$.styles),B&&(H.inserted[$.name]=!0)}}var H={key:n,sheet:new HO({key:n,container:p,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:b};return H.sheet.hydrate(l),H},lA={exports:{}},nr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hi=typeof Symbol=="function"&&Symbol.for,X1=hi?Symbol.for("react.element"):60103,Y1=hi?Symbol.for("react.portal"):60106,sv=hi?Symbol.for("react.fragment"):60107,av=hi?Symbol.for("react.strict_mode"):60108,lv=hi?Symbol.for("react.profiler"):60114,uv=hi?Symbol.for("react.provider"):60109,cv=hi?Symbol.for("react.context"):60110,J1=hi?Symbol.for("react.async_mode"):60111,hv=hi?Symbol.for("react.concurrent_mode"):60111,dv=hi?Symbol.for("react.forward_ref"):60112,pv=hi?Symbol.for("react.suspense"):60113,vF=hi?Symbol.for("react.suspense_list"):60120,fv=hi?Symbol.for("react.memo"):60115,mv=hi?Symbol.for("react.lazy"):60116,_F=hi?Symbol.for("react.block"):60121,xF=hi?Symbol.for("react.fundamental"):60117,bF=hi?Symbol.for("react.responder"):60118,wF=hi?Symbol.for("react.scope"):60119;function Oo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case X1:switch(e=e.type,e){case J1:case hv:case sv:case lv:case av:case pv:return e;default:switch(e=e&&e.$$typeof,e){case cv:case dv:case mv:case fv:case uv:return e;default:return t}}case Y1:return t}}}function uA(e){return Oo(e)===hv}nr.AsyncMode=J1;nr.ConcurrentMode=hv;nr.ContextConsumer=cv;nr.ContextProvider=uv;nr.Element=X1;nr.ForwardRef=dv;nr.Fragment=sv;nr.Lazy=mv;nr.Memo=fv;nr.Portal=Y1;nr.Profiler=lv;nr.StrictMode=av;nr.Suspense=pv;nr.isAsyncMode=function(e){return uA(e)||Oo(e)===J1};nr.isConcurrentMode=uA;nr.isContextConsumer=function(e){return Oo(e)===cv};nr.isContextProvider=function(e){return Oo(e)===uv};nr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===X1};nr.isForwardRef=function(e){return Oo(e)===dv};nr.isFragment=function(e){return Oo(e)===sv};nr.isLazy=function(e){return Oo(e)===mv};nr.isMemo=function(e){return Oo(e)===fv};nr.isPortal=function(e){return Oo(e)===Y1};nr.isProfiler=function(e){return Oo(e)===lv};nr.isStrictMode=function(e){return Oo(e)===av};nr.isSuspense=function(e){return Oo(e)===pv};nr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sv||e===hv||e===lv||e===av||e===pv||e===vF||typeof e=="object"&&e!==null&&(e.$$typeof===mv||e.$$typeof===fv||e.$$typeof===uv||e.$$typeof===cv||e.$$typeof===dv||e.$$typeof===xF||e.$$typeof===bF||e.$$typeof===wF||e.$$typeof===_F)};nr.typeOf=Oo;lA.exports=nr;var SF=lA.exports,cA=SF,CF={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},TF={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},hA={};hA[cA.ForwardRef]=CF;hA[cA.Memo]=TF;var PF=!0;function dA(e,t,n){var s="";return n.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):c&&(s+=c+" ")}),s}var Q1=function(t,n,s){var c=t.key+"-"+n.name;(s===!1||PF===!1)&&t.registered[c]===void 0&&(t.registered[c]=n.styles)},ew=function(t,n,s){Q1(t,n,s);var c=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var d=n;do t.insert(n===d?"."+c:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function kF(e){for(var t=0,n,s=0,c=e.length;c>=4;++s,c-=4)n=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var EF={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},IF=/[A-Z]|^ms/g,AF=/_EMO_([^_]+?)_([^]*?)_EMO_/g,pA=function(t){return t.charCodeAt(1)===45},fT=function(t){return t!=null&&typeof t!="boolean"},Vx=sA(function(e){return pA(e)?e:e.replace(IF,"-$&").toLowerCase()}),mT=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(AF,function(s,c,d){return Bs={name:c,styles:d,next:Bs},c})}return EF[t]!==1&&!pA(t)&&typeof n=="number"&&n!==0?n+"px":n};function mf(e,t,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var c=n;if(c.anim===1)return Bs={name:c.name,styles:c.styles,next:Bs},c.name;var d=n;if(d.styles!==void 0){var p=d.next;if(p!==void 0)for(;p!==void 0;)Bs={name:p.name,styles:p.styles,next:Bs},p=p.next;var l=d.styles+";";return l}return MF(e,t,n)}case"function":{if(e!==void 0){var b=Bs,T=n(e);return Bs=b,mf(e,t,T)}break}}var k=n;if(t==null)return k;var I=t[k];return I!==void 0?I:k}function MF(e,t,n){var s="";if(Array.isArray(n))for(var c=0;c<n.length;c++)s+=mf(e,t,n[c])+";";else for(var d in n){var p=n[d];if(typeof p!="object"){var l=p;t!=null&&t[l]!==void 0?s+=d+"{"+t[l]+"}":fT(l)&&(s+=Vx(d)+":"+mT(d,l)+";")}else if(Array.isArray(p)&&typeof p[0]=="string"&&(t==null||t[p[0]]===void 0))for(var b=0;b<p.length;b++)fT(p[b])&&(s+=Vx(d)+":"+mT(d,p[b])+";");else{var T=mf(e,t,p);switch(d){case"animation":case"animationName":{s+=Vx(d)+":"+T+";";break}default:s+=d+"{"+T+"}"}}}return s}var gT=/label:\s*([^\s;{]+)\s*(;|$)/g,Bs;function Lf(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,c="";Bs=void 0;var d=e[0];if(d==null||d.raw===void 0)s=!1,c+=mf(n,t,d);else{var p=d;c+=p[0]}for(var l=1;l<e.length;l++)if(c+=mf(n,t,e[l]),s){var b=d;c+=b[l]}gT.lastIndex=0;for(var T="",k;(k=gT.exec(c))!==null;)T+="-"+k[1];var I=kF(c)+T;return{name:I,styles:c,next:Bs}}var RF=function(t){return t()},fA=f0.useInsertionEffect?f0.useInsertionEffect:!1,mA=fA||RF,yT=fA||W.useLayoutEffect,gA=W.createContext(typeof HTMLElement<"u"?yF({key:"css"}):null);gA.Provider;var tw=function(t){return W.forwardRef(function(n,s){var c=W.useContext(gA);return t(n,c,s)})},gv=W.createContext({}),nw={}.hasOwnProperty,ub="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",zF=function(t,n){var s={};for(var c in n)nw.call(n,c)&&(s[c]=n[c]);return s[ub]=t,s},LF=function(t){var n=t.cache,s=t.serialized,c=t.isStringTag;return Q1(n,s,c),mA(function(){return ew(n,s,c)}),null},DF=tw(function(e,t,n){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var c=e[ub],d=[s],p="";typeof e.className=="string"?p=dA(t.registered,d,e.className):e.className!=null&&(p=e.className+" ");var l=Lf(d,void 0,W.useContext(gv));p+=t.key+"-"+l.name;var b={};for(var T in e)nw.call(e,T)&&T!=="css"&&T!==ub&&(b[T]=e[T]);return b.className=p,n&&(b.ref=n),W.createElement(W.Fragment,null,W.createElement(LF,{cache:t,serialized:l,isStringTag:typeof c=="string"}),W.createElement(c,b))}),OF=DF,vT=function(t,n){var s=arguments;if(n==null||!nw.call(n,"css"))return W.createElement.apply(void 0,s);var c=s.length,d=new Array(c);d[0]=OF,d[1]=zF(t,n);for(var p=2;p<c;p++)d[p]=s[p];return W.createElement.apply(null,d)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(vT||(vT={}));var FF=tw(function(e,t){var n=e.styles,s=Lf([n],void 0,W.useContext(gv)),c=W.useRef();return yT(function(){var d=t.key+"-global",p=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,b=document.querySelector('style[data-emotion="'+d+" "+s.name+'"]');return t.sheet.tags.length&&(p.before=t.sheet.tags[0]),b!==null&&(l=!0,b.setAttribute("data-emotion",d),p.hydrate([b])),c.current=[p,l],function(){p.flush()}},[t]),yT(function(){var d=c.current,p=d[0],l=d[1];if(l){d[1]=!1;return}if(s.next!==void 0&&ew(t,s.next,!0),p.tags.length){var b=p.tags[p.tags.length-1].nextElementSibling;p.before=b,p.flush()}t.insert("",s,p,!1)},[t,s.name]),null});function rw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lf(t)}function Df(){var e=rw.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var BF=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,$F=sA(function(e){return BF.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),NF=$F,VF=function(t){return t!=="theme"},_T=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?NF:VF},xT=function(t,n,s){var c;if(n){var d=n.shouldForwardProp;c=t.__emotion_forwardProp&&d?function(p){return t.__emotion_forwardProp(p)&&d(p)}:d}return typeof c!="function"&&s&&(c=t.__emotion_forwardProp),c},jF=function(t){var n=t.cache,s=t.serialized,c=t.isStringTag;return Q1(n,s,c),mA(function(){return ew(n,s,c)}),null},UF=function e(t,n){var s=t.__emotion_real===t,c=s&&t.__emotion_base||t,d,p;n!==void 0&&(d=n.label,p=n.target);var l=xT(t,n,s),b=l||_T(c),T=!b("as");return function(){var k=arguments,I=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&I.push("label:"+d+";"),k[0]==null||k[0].raw===void 0)I.push.apply(I,k);else{var M=k[0];I.push(M[0]);for(var D=k.length,H=1;H<D;H++)I.push(k[H],M[H])}var q=tw(function(J,$,V){var B=T&&J.as||c,G="",ne=[],re=J;if(J.theme==null){re={};for(var ae in J)re[ae]=J[ae];re.theme=W.useContext(gv)}typeof J.className=="string"?G=dA($.registered,ne,J.className):J.className!=null&&(G=J.className+" ");var he=Lf(I.concat(ne),$.registered,re);G+=$.key+"-"+he.name,p!==void 0&&(G+=" "+p);var Me=T&&l===void 0?_T(B):b,Ee={};for(var Re in J)T&&Re==="as"||Me(Re)&&(Ee[Re]=J[Re]);return Ee.className=G,V&&(Ee.ref=V),W.createElement(W.Fragment,null,W.createElement(jF,{cache:$,serialized:he,isStringTag:typeof B=="string"}),W.createElement(B,Ee))});return q.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",q.defaultProps=t.defaultProps,q.__emotion_real=q,q.__emotion_base=c,q.__emotion_styles=I,q.__emotion_forwardProp=l,Object.defineProperty(q,"toString",{value:function(){return"."+p}}),q.withComponent=function(J,$){var V=e(J,wy({},n,$,{shouldForwardProp:xT(q,$,!0)}));return V.apply(void 0,I)},q}},WF=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],cb=UF.bind(null);WF.forEach(function(e){cb[e]=cb(e)});function HF(e){return e==null||Object.keys(e).length===0}function qF(e){const{styles:t,defaultTheme:n={}}=e,s=typeof t=="function"?c=>t(HF(c)?n:c):t;return ye.jsx(FF,{styles:s})}function yA(e,t){return cb(e,t)}function GF(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const bT=[];function Il(e){return bT[0]=e,Lf(bT)}var vA={exports:{}},ur={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw=Symbol.for("react.transitional.element"),ow=Symbol.for("react.portal"),yv=Symbol.for("react.fragment"),vv=Symbol.for("react.strict_mode"),_v=Symbol.for("react.profiler"),xv=Symbol.for("react.consumer"),bv=Symbol.for("react.context"),wv=Symbol.for("react.forward_ref"),Sv=Symbol.for("react.suspense"),Cv=Symbol.for("react.suspense_list"),Tv=Symbol.for("react.memo"),Pv=Symbol.for("react.lazy"),ZF=Symbol.for("react.view_transition"),KF=Symbol.for("react.client.reference");function os(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case iw:switch(e=e.type,e){case yv:case _v:case vv:case Sv:case Cv:case ZF:return e;default:switch(e=e&&e.$$typeof,e){case bv:case wv:case Pv:case Tv:return e;case xv:return e;default:return t}}case ow:return t}}}ur.ContextConsumer=xv;ur.ContextProvider=bv;ur.Element=iw;ur.ForwardRef=wv;ur.Fragment=yv;ur.Lazy=Pv;ur.Memo=Tv;ur.Portal=ow;ur.Profiler=_v;ur.StrictMode=vv;ur.Suspense=Sv;ur.SuspenseList=Cv;ur.isContextConsumer=function(e){return os(e)===xv};ur.isContextProvider=function(e){return os(e)===bv};ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iw};ur.isForwardRef=function(e){return os(e)===wv};ur.isFragment=function(e){return os(e)===yv};ur.isLazy=function(e){return os(e)===Pv};ur.isMemo=function(e){return os(e)===Tv};ur.isPortal=function(e){return os(e)===ow};ur.isProfiler=function(e){return os(e)===_v};ur.isStrictMode=function(e){return os(e)===vv};ur.isSuspense=function(e){return os(e)===Sv};ur.isSuspenseList=function(e){return os(e)===Cv};ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===yv||e===_v||e===vv||e===Sv||e===Cv||typeof e=="object"&&e!==null&&(e.$$typeof===Pv||e.$$typeof===Tv||e.$$typeof===bv||e.$$typeof===xv||e.$$typeof===wv||e.$$typeof===KF||e.getModuleId!==void 0)};ur.typeOf=os;vA.exports=ur;var _A=vA.exports;function Ns(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function xA(e){if(W.isValidElement(e)||_A.isValidElementType(e)||!Ns(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=xA(e[n])}),t}function ci(e,t,n={clone:!0}){const s=n.clone?{...e}:e;return Ns(e)&&Ns(t)&&Object.keys(t).forEach(c=>{W.isValidElement(t[c])||_A.isValidElementType(t[c])?s[c]=t[c]:Ns(t[c])&&Object.prototype.hasOwnProperty.call(e,c)&&Ns(e[c])?s[c]=ci(e[c],t[c],n):n.clone?s[c]=Ns(t[c])?xA(t[c]):t[c]:s[c]=t[c]}),s}const XF=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,s)=>n.val-s.val),t.reduce((n,s)=>({...n,[s.key]:s.val}),{})};function YF(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5,...c}=e,d=XF(t),p=Object.keys(d);function l(M){return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${n})`}function b(M){return`@media (max-width:${(typeof t[M]=="number"?t[M]:M)-s/100}${n})`}function T(M,D){const H=p.indexOf(D);return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${n}) and (max-width:${(H!==-1&&typeof t[p[H]]=="number"?t[p[H]]:D)-s/100}${n})`}function k(M){return p.indexOf(M)+1<p.length?T(M,p[p.indexOf(M)+1]):l(M)}function I(M){const D=p.indexOf(M);return D===0?l(p[1]):D===p.length-1?b(p[D]):T(M,p[p.indexOf(M)+1]).replace("@media","@media not all and")}return{keys:p,values:d,up:l,down:b,between:T,only:k,not:I,unit:n,...c}}function wT(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,c)=>{var p,l;const d=/min-width:\s*([0-9.]+)/;return+(((p=s.match(d))==null?void 0:p[1])||0)-+(((l=c.match(d))==null?void 0:l[1])||0)});return n.length?n.reduce((s,c)=>{const d=t[c];return delete s[c],s[c]=d,s},{...t}):t}function JF(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function QF(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,s,c]=n,d=Number.isNaN(+s)?s||0:+s;return e.containerQueries(c).up(d)}function eB(e){const t=(d,p)=>d.replace("@media",p?`@container ${p}`:"@container");function n(d,p){d.up=(...l)=>t(e.breakpoints.up(...l),p),d.down=(...l)=>t(e.breakpoints.down(...l),p),d.between=(...l)=>t(e.breakpoints.between(...l),p),d.only=(...l)=>t(e.breakpoints.only(...l),p),d.not=(...l)=>{const b=t(e.breakpoints.not(...l),p);return b.includes("not all and")?b.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):b}}const s={},c=d=>(n(s,d),s);return n(c),{...e,containerQueries:c}}const tB={borderRadius:4};function Dp(e,t){return t?ci(e,t,{clone:!1}):e}const kv={xs:0,sm:600,md:900,lg:1200,xl:1536},ST={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${kv[e]}px)`},nB={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:kv[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function bs(e,t,n){const s=e.theme||{};if(Array.isArray(t)){const d=s.breakpoints||ST;return t.reduce((p,l,b)=>(p[d.up(d.keys[b])]=n(t[b]),p),{})}if(typeof t=="object"){const d=s.breakpoints||ST;return Object.keys(t).reduce((p,l)=>{if(JF(d.keys,l)){const b=QF(s.containerQueries?s:nB,l);b&&(p[b]=n(t[l],l))}else if(Object.keys(d.values||kv).includes(l)){const b=d.up(l);p[b]=n(t[l],l)}else{const b=l;p[b]=t[b]}return p},{})}return n(t)}function bA(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((s,c)=>{const d=e.up(c);return s[d]={},s},{}))||{}}function hb(e,t){return e.reduce((n,s)=>{const c=n[s];return(!c||Object.keys(c).length===0)&&delete n[s],n},t)}function rB(e,...t){const n=bA(e),s=[n,...t].reduce((c,d)=>ci(c,d),{});return hb(Object.keys(n),s)}function iB(e,t){if(typeof e!="object")return{};const n={},s=Object.keys(t);return Array.isArray(e)?s.forEach((c,d)=>{d<e.length&&(n[c]=!0)}):s.forEach(c=>{e[c]!=null&&(n[c]=!0)}),n}function jx({values:e,breakpoints:t,base:n}){const s=n||iB(e,t),c=Object.keys(s);if(c.length===0)return e;let d;return c.reduce((p,l,b)=>(Array.isArray(e)?(p[l]=e[b]!=null?e[b]:e[d],d=b):typeof e=="object"?(p[l]=e[l]!=null?e[l]:e[d],d=l):p[l]=e,p),{})}function gt(e){if(typeof e!="string")throw new Error(Pa(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Ev(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const s=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(s!=null)return s}return t.split(".").reduce((s,c)=>s&&s[c]!=null?s[c]:null,e)}function Cy(e,t,n,s=n){let c;return typeof e=="function"?c=e(n):Array.isArray(e)?c=e[n]||s:c=Ev(e,n)||s,t&&(c=t(c,s,e)),c}function $r(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:c}=e,d=p=>{if(p[t]==null)return null;const l=p[t],b=p.theme,T=Ev(b,s)||{};return bs(p,l,I=>{let M=Cy(T,c,I);return I===M&&typeof I=="string"&&(M=Cy(T,c,`${t}${I==="default"?"":gt(I)}`,I)),n===!1?M:{[n]:M}})};return d.propTypes={},d.filterProps=[t],d}function oB(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const sB={m:"margin",p:"padding"},aB={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},CT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},lB=oB(e=>{if(e.length>2)if(CT[e])e=CT[e];else return[e];const[t,n]=e.split(""),s=sB[t],c=aB[n]||"";return Array.isArray(c)?c.map(d=>s+d):[s+c]}),sw=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],aw=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...sw,...aw];function Of(e,t,n,s){const c=Ev(e,t,!0)??n;return typeof c=="number"||typeof c=="string"?d=>typeof d=="string"?d:typeof c=="string"?c.startsWith("var(")&&d===0?0:c.startsWith("var(")&&d===1?c:`calc(${d} * ${c})`:c*d:Array.isArray(c)?d=>{if(typeof d=="string")return d;const p=Math.abs(d),l=c[p];return d>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof c=="function"?c:()=>{}}function Iv(e){return Of(e,"spacing",8)}function Nu(e,t){return typeof t=="string"||t==null?t:e(t)}function uB(e,t){return n=>e.reduce((s,c)=>(s[c]=Nu(t,n),s),{})}function cB(e,t,n,s){if(!t.includes(n))return null;const c=lB(n),d=uB(c,s),p=e[n];return bs(e,p,d)}function wA(e,t){const n=Iv(e.theme);return Object.keys(e).map(s=>cB(e,t,s,n)).reduce(Dp,{})}function Mr(e){return wA(e,sw)}Mr.propTypes={};Mr.filterProps=sw;function Rr(e){return wA(e,aw)}Rr.propTypes={};Rr.filterProps=aw;function SA(e=8,t=Iv({spacing:e})){if(e.mui)return e;const n=(...s)=>(s.length===0?[1]:s).map(d=>{const p=t(d);return typeof p=="number"?`${p}px`:p}).join(" ");return n.mui=!0,n}function Av(...e){const t=e.reduce((s,c)=>(c.filterProps.forEach(d=>{s[d]=c}),s),{}),n=s=>Object.keys(s).reduce((c,d)=>t[d]?Dp(c,t[d](s)):c,{});return n.propTypes={},n.filterProps=e.reduce((s,c)=>s.concat(c.filterProps),[]),n}function Ko(e){return typeof e!="number"?e:`${e}px solid`}function ss(e,t){return $r({prop:e,themeKey:"borders",transform:t})}const hB=ss("border",Ko),dB=ss("borderTop",Ko),pB=ss("borderRight",Ko),fB=ss("borderBottom",Ko),mB=ss("borderLeft",Ko),gB=ss("borderColor"),yB=ss("borderTopColor"),vB=ss("borderRightColor"),_B=ss("borderBottomColor"),xB=ss("borderLeftColor"),bB=ss("outline",Ko),wB=ss("outlineColor"),Mv=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Of(e.theme,"shape.borderRadius",4),n=s=>({borderRadius:Nu(t,s)});return bs(e,e.borderRadius,n)}return null};Mv.propTypes={};Mv.filterProps=["borderRadius"];Av(hB,dB,pB,fB,mB,gB,yB,vB,_B,xB,Mv,bB,wB);const Rv=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Of(e.theme,"spacing",8),n=s=>({gap:Nu(t,s)});return bs(e,e.gap,n)}return null};Rv.propTypes={};Rv.filterProps=["gap"];const zv=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Of(e.theme,"spacing",8),n=s=>({columnGap:Nu(t,s)});return bs(e,e.columnGap,n)}return null};zv.propTypes={};zv.filterProps=["columnGap"];const Lv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Of(e.theme,"spacing",8),n=s=>({rowGap:Nu(t,s)});return bs(e,e.rowGap,n)}return null};Lv.propTypes={};Lv.filterProps=["rowGap"];const SB=$r({prop:"gridColumn"}),CB=$r({prop:"gridRow"}),TB=$r({prop:"gridAutoFlow"}),PB=$r({prop:"gridAutoColumns"}),kB=$r({prop:"gridAutoRows"}),EB=$r({prop:"gridTemplateColumns"}),IB=$r({prop:"gridTemplateRows"}),AB=$r({prop:"gridTemplateAreas"}),MB=$r({prop:"gridArea"});Av(Rv,zv,Lv,SB,CB,TB,PB,kB,EB,IB,AB,MB);function Sh(e,t){return t==="grey"?t:e}const RB=$r({prop:"color",themeKey:"palette",transform:Sh}),zB=$r({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Sh}),LB=$r({prop:"backgroundColor",themeKey:"palette",transform:Sh});Av(RB,zB,LB);function Eo(e){return e<=1&&e!==0?`${e*100}%`:e}const DB=$r({prop:"width",transform:Eo}),lw=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var c,d,p,l,b;const s=((p=(d=(c=e.theme)==null?void 0:c.breakpoints)==null?void 0:d.values)==null?void 0:p[n])||kv[n];return s?((b=(l=e.theme)==null?void 0:l.breakpoints)==null?void 0:b.unit)!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Eo(n)}};return bs(e,e.maxWidth,t)}return null};lw.filterProps=["maxWidth"];const OB=$r({prop:"minWidth",transform:Eo}),FB=$r({prop:"height",transform:Eo}),BB=$r({prop:"maxHeight",transform:Eo}),$B=$r({prop:"minHeight",transform:Eo});$r({prop:"size",cssProperty:"width",transform:Eo});$r({prop:"size",cssProperty:"height",transform:Eo});const NB=$r({prop:"boxSizing"});Av(DB,lw,OB,FB,BB,$B,NB);const Ff={border:{themeKey:"borders",transform:Ko},borderTop:{themeKey:"borders",transform:Ko},borderRight:{themeKey:"borders",transform:Ko},borderBottom:{themeKey:"borders",transform:Ko},borderLeft:{themeKey:"borders",transform:Ko},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ko},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Mv},color:{themeKey:"palette",transform:Sh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Sh},backgroundColor:{themeKey:"palette",transform:Sh},p:{style:Rr},pt:{style:Rr},pr:{style:Rr},pb:{style:Rr},pl:{style:Rr},px:{style:Rr},py:{style:Rr},padding:{style:Rr},paddingTop:{style:Rr},paddingRight:{style:Rr},paddingBottom:{style:Rr},paddingLeft:{style:Rr},paddingX:{style:Rr},paddingY:{style:Rr},paddingInline:{style:Rr},paddingInlineStart:{style:Rr},paddingInlineEnd:{style:Rr},paddingBlock:{style:Rr},paddingBlockStart:{style:Rr},paddingBlockEnd:{style:Rr},m:{style:Mr},mt:{style:Mr},mr:{style:Mr},mb:{style:Mr},ml:{style:Mr},mx:{style:Mr},my:{style:Mr},margin:{style:Mr},marginTop:{style:Mr},marginRight:{style:Mr},marginBottom:{style:Mr},marginLeft:{style:Mr},marginX:{style:Mr},marginY:{style:Mr},marginInline:{style:Mr},marginInlineStart:{style:Mr},marginInlineEnd:{style:Mr},marginBlock:{style:Mr},marginBlockStart:{style:Mr},marginBlockEnd:{style:Mr},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Rv},rowGap:{style:Lv},columnGap:{style:zv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Eo},maxWidth:{style:lw},minWidth:{transform:Eo},height:{transform:Eo},maxHeight:{transform:Eo},minHeight:{transform:Eo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function VB(...e){const t=e.reduce((s,c)=>s.concat(Object.keys(c)),[]),n=new Set(t);return e.every(s=>n.size===Object.keys(s).length)}function jB(e,t){return typeof e=="function"?e(t):e}function UB(){function e(n,s,c,d){const p={[n]:s,theme:c},l=d[n];if(!l)return{[n]:s};const{cssProperty:b=n,themeKey:T,transform:k,style:I}=l;if(s==null)return null;if(T==="typography"&&s==="inherit")return{[n]:s};const M=Ev(c,T)||{};return I?I(p):bs(p,s,H=>{let q=Cy(M,k,H);return H===q&&typeof H=="string"&&(q=Cy(M,k,`${n}${H==="default"?"":gt(H)}`,H)),b===!1?q:{[b]:q}})}function t(n){const{sx:s,theme:c={},nested:d}=n||{};if(!s)return null;const p=c.unstable_sxConfig??Ff;function l(b){let T=b;if(typeof b=="function")T=b(c);else if(typeof b!="object")return b;if(!T)return null;const k=bA(c.breakpoints),I=Object.keys(k);let M=k;return Object.keys(T).forEach(D=>{const H=jB(T[D],c);if(H!=null)if(typeof H=="object")if(p[D])M=Dp(M,e(D,H,c,p));else{const q=bs({theme:c},H,J=>({[D]:J}));VB(q,H)?M[D]=t({sx:H,theme:c,nested:!0}):M=Dp(M,q)}else M=Dp(M,e(D,H,c,p))}),!d&&c.modularCssLayers?{"@layer sx":wT(c,hb(I,M))}:wT(c,hb(I,M))}return Array.isArray(s)?s.map(l):l(s)}return t}const Vu=UB();Vu.filterProps=["sx"];function WB(e,t){var s;const n=this;if(n.vars){if(!((s=n.colorSchemes)!=null&&s[e])||typeof n.getColorSchemeSelector!="function")return{};let c=n.getColorSchemeSelector(e);return c==="&"?t:((c.includes("data-")||c.includes("."))&&(c=`*:where(${c.replace(/\s*&$/,"")}) &`),{[c]:t})}return n.palette.mode===e?t:{}}function Dv(e={},...t){const{breakpoints:n={},palette:s={},spacing:c,shape:d={},...p}=e,l=YF(n),b=SA(c);let T=ci({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:b,shape:{...tB,...d}},p);return T=eB(T),T.applyStyles=WB,T=t.reduce((k,I)=>ci(k,I),T),T.unstable_sxConfig={...Ff,...p==null?void 0:p.unstable_sxConfig},T.unstable_sx=function(I){return Vu({sx:I,theme:this})},T}function HB(e){return Object.keys(e).length===0}function qB(e=null){const t=W.useContext(gv);return!t||HB(t)?e:t}const GB=Dv();function Ov(e=GB){return qB(e)}function Ux(e){const t=Il(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function ZB({styles:e,themeId:t,defaultTheme:n={}}){const s=Ov(n),c=t&&s[t]||s;let d=typeof e=="function"?e(c):e;return c.modularCssLayers&&(Array.isArray(d)?d=d.map(p=>Ux(typeof p=="function"?p(c):p)):d=Ux(d)),ye.jsx(qF,{styles:d})}const KB=e=>{var s;const t={systemProps:{},otherProps:{}},n=((s=e==null?void 0:e.theme)==null?void 0:s.unstable_sxConfig)??Ff;return Object.keys(e).forEach(c=>{n[c]?t.systemProps[c]=e[c]:t.otherProps[c]=e[c]}),t};function uw(e){const{sx:t,...n}=e,{systemProps:s,otherProps:c}=KB(n);let d;return Array.isArray(t)?d=[s,...t]:typeof t=="function"?d=(...p)=>{const l=t(...p);return Ns(l)?{...s,...l}:s}:d={...s,...t},{...c,sx:d}}const TT=e=>e,XB=()=>{let e=TT;return{configure(t){e=t},generate(t){return e(t)},reset(){e=TT}}},CA=XB();function TA(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=TA(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Zt(){for(var e,t,n=0,s="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=TA(e))&&(s&&(s+=" "),s+=t);return s}function YB(e={}){const{themeId:t,defaultTheme:n,defaultClassName:s="MuiBox-root",generateClassName:c}=e,d=yA("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(Vu);return W.forwardRef(function(b,T){const k=Ov(n),{className:I,component:M="div",...D}=uw(b);return ye.jsx(d,{as:M,ref:T,className:Zt(I,c?c(s):s),theme:t&&k[t]||k,...D})})}const JB={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function An(e,t,n="Mui"){const s=JB[t];return s?`${n}-${s}`:`${CA.generate(e)}-${t}`}function Pn(e,t,n="Mui"){const s={};return t.forEach(c=>{s[c]=An(e,c,n)}),s}function PA(e){const{variants:t,...n}=e,s={variants:t,style:Il(n),isProcessed:!0};return s.style===n||t&&t.forEach(c=>{typeof c.style!="function"&&(c.style=Il(c.style))}),s}const QB=Dv();function Wx(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Tu(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function e3(e){return e?(t,n)=>n[e]:null}function t3(e,t,n){e.theme=r3(e.theme)?n:e.theme[t]||e.theme}function Wg(e,t,n){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(c=>Wg(e,c,n));if(Array.isArray(s==null?void 0:s.variants)){let c;if(s.isProcessed)c=n?Tu(s.style,n):s.style;else{const{variants:d,...p}=s;c=n?Tu(Il(p),n):p}return kA(e,s.variants,[c],n)}return s!=null&&s.isProcessed?n?Tu(Il(s.style),n):s.style:n?Tu(Il(s),n):s}function kA(e,t,n=[],s=void 0){var d;let c;e:for(let p=0;p<t.length;p+=1){const l=t[p];if(typeof l.props=="function"){if(c??(c={...e,...e.ownerState,ownerState:e.ownerState}),!l.props(c))continue}else for(const b in l.props)if(e[b]!==l.props[b]&&((d=e.ownerState)==null?void 0:d[b])!==l.props[b])continue e;typeof l.style=="function"?(c??(c={...e,...e.ownerState,ownerState:e.ownerState}),n.push(s?Tu(Il(l.style(c)),s):l.style(c))):n.push(s?Tu(Il(l.style),s):l.style)}return n}function EA(e={}){const{themeId:t,defaultTheme:n=QB,rootShouldForwardProp:s=Wx,slotShouldForwardProp:c=Wx}=e;function d(l){t3(l,t,n)}return(l,b={})=>{GF(l,re=>re.filter(ae=>ae!==Vu));const{name:T,slot:k,skipVariantsResolver:I,skipSx:M,overridesResolver:D=e3(o3(k)),...H}=b,q=T&&T.startsWith("Mui")||k?"components":"custom",J=I!==void 0?I:k&&k!=="Root"&&k!=="root"||!1,$=M||!1;let V=Wx;k==="Root"||k==="root"?V=s:k?V=c:i3(l)&&(V=void 0);const B=yA(l,{shouldForwardProp:V,label:n3(),...H}),G=re=>{if(re.__emotion_real===re)return re;if(typeof re=="function")return function(he){return Wg(he,re,he.theme.modularCssLayers?q:void 0)};if(Ns(re)){const ae=PA(re);return function(Me){return ae.variants?Wg(Me,ae,Me.theme.modularCssLayers?q:void 0):Me.theme.modularCssLayers?Tu(ae.style,q):ae.style}}return re},ne=(...re)=>{const ae=[],he=re.map(G),Me=[];if(ae.push(d),T&&D&&Me.push(function(be){var Ue,Le;const ze=(Le=(Ue=be.theme.components)==null?void 0:Ue[T])==null?void 0:Le.styleOverrides;if(!ze)return null;const Te={};for(const Oe in ze)Te[Oe]=Wg(be,ze[Oe],be.theme.modularCssLayers?"theme":void 0);return D(be,Te)}),T&&!J&&Me.push(function(be){var Te,Ue;const _e=be.theme,ze=(Ue=(Te=_e==null?void 0:_e.components)==null?void 0:Te[T])==null?void 0:Ue.variants;return ze?kA(be,ze,[],be.theme.modularCssLayers?"theme":void 0):null}),$||Me.push(Vu),Array.isArray(he[0])){const K=he.shift(),be=new Array(ae.length).fill(""),_e=new Array(Me.length).fill("");let ze;ze=[...be,...K,..._e],ze.raw=[...be,...K.raw,..._e],ae.unshift(ze)}const Ee=[...ae,...he,...Me],Re=B(...Ee);return l.muiName&&(Re.muiName=l.muiName),Re};return B.withConfig&&(ne.withConfig=B.withConfig),ne}}function n3(e,t){return void 0}function r3(e){for(const t in e)return!1;return!0}function i3(e){return typeof e=="string"&&e.charCodeAt(0)>96}function o3(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const s3=EA();function gf(e,t,n=!1){const s={...t};for(const c in e)if(Object.prototype.hasOwnProperty.call(e,c)){const d=c;if(d==="components"||d==="slots")s[d]={...e[d],...s[d]};else if(d==="componentsProps"||d==="slotProps"){const p=e[d],l=t[d];if(!l)s[d]=p||{};else if(!p)s[d]=l;else{s[d]={...l};for(const b in p)if(Object.prototype.hasOwnProperty.call(p,b)){const T=b;s[d][T]=gf(p[T],l[T],n)}}}else d==="className"&&n&&t.className?s.className=Zt(e==null?void 0:e.className,t==null?void 0:t.className):d==="style"&&n&&t.style?s.style={...e==null?void 0:e.style,...t==null?void 0:t.style}:s[d]===void 0&&(s[d]=e[d])}return s}function a3(e){const{theme:t,name:n,props:s}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?s:gf(t.components[n].defaultProps,s)}function l3({props:e,name:t,defaultTheme:n,themeId:s}){let c=Ov(n);return s&&(c=c[s]||c),a3({theme:c,name:t,props:e})}const Xs=typeof window<"u"?W.useLayoutEffect:W.useEffect;function Kc(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function cw(e,t=0,n=1){return Kc(e,t,n)}function u3(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(s=>s+s)),n?`rgb${n.length===4?"a":""}(${n.map((s,c)=>c<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function zl(e){if(e.type)return e;if(e.charAt(0)==="#")return zl(u3(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Pa(9,e));let s=e.substring(t+1,e.length-1),c;if(n==="color"){if(s=s.split(" "),c=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(c))throw new Error(Pa(10,c))}else s=s.split(",");return s=s.map(d=>parseFloat(d)),{type:n,values:s,colorSpace:c}}const c3=e=>{const t=zl(e);return t.values.slice(0,3).map((n,s)=>t.type.includes("hsl")&&s!==0?`${n}%`:n).join(" ")},bp=(e,t)=>{try{return c3(e)}catch{return e}};function Fv(e){const{type:t,colorSpace:n}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((c,d)=>d<3?parseInt(c,10):c):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${n} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function IA(e){e=zl(e);const{values:t}=e,n=t[0],s=t[1]/100,c=t[2]/100,d=s*Math.min(c,1-c),p=(T,k=(T+n/30)%12)=>c-d*Math.max(Math.min(k-3,9-k,1),-1);let l="rgb";const b=[Math.round(p(0)*255),Math.round(p(8)*255),Math.round(p(4)*255)];return e.type==="hsla"&&(l+="a",b.push(t[3])),Fv({type:l,values:b})}function db(e){e=zl(e);let t=e.type==="hsl"||e.type==="hsla"?zl(IA(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function h3(e,t){const n=db(e),s=db(t);return(Math.max(n,s)+.05)/(Math.min(n,s)+.05)}function Ty(e,t){return e=zl(e),t=cw(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Fv(e)}function mu(e,t,n){try{return Ty(e,t)}catch{return e}}function Bv(e,t){if(e=zl(e),t=cw(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Fv(e)}function Jn(e,t,n){try{return Bv(e,t)}catch{return e}}function $v(e,t){if(e=zl(e),t=cw(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Fv(e)}function Qn(e,t,n){try{return $v(e,t)}catch{return e}}function d3(e,t=.15){return db(e)>.5?Bv(e,t):$v(e,t)}function dg(e,t,n){try{return d3(e,t)}catch{return e}}const p3=W.createContext(),Nv=()=>W.useContext(p3)??!1,f3=W.createContext(void 0);function m3(e){const{theme:t,name:n,props:s}=e;if(!t||!t.components||!t.components[n])return s;const c=t.components[n];return c.defaultProps?gf(c.defaultProps,s,t.components.mergeClassNameAndStyle):!c.styleOverrides&&!c.variants?gf(c,s,t.components.mergeClassNameAndStyle):s}function g3({props:e,name:t}){const n=W.useContext(f3);return m3({props:e,name:t,theme:{components:n}})}let PT=0;function y3(e){const[t,n]=W.useState(e),s=e||t;return W.useEffect(()=>{t==null&&(PT+=1,n(`mui-${PT}`))},[t]),s}const v3={...f0},kT=v3.useId;function Bf(e){if(kT!==void 0){const t=kT();return e??t}return y3(e)}const ET={theme:void 0};function _3(e){let t,n;return function(c){let d=t;return(d===void 0||c.theme!==n)&&(ET.theme=c.theme,d=PA(e(ET)),t=d,n=c.theme),d}}function x3(e=""){function t(...s){if(!s.length)return"";const c=s[0];return typeof c=="string"&&!c.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${c}${t(...s.slice(1))})`:`, ${c}`}return(s,...c)=>`var(--${e?`${e}-`:""}${s}${t(...c)})`}const IT=(e,t,n,s=[])=>{let c=e;t.forEach((d,p)=>{p===t.length-1?Array.isArray(c)?c[Number(d)]=n:c&&typeof c=="object"&&(c[d]=n):c&&typeof c=="object"&&(c[d]||(c[d]=s.includes(d)?[]:{}),c=c[d])})},b3=(e,t,n)=>{function s(c,d=[],p=[]){Object.entries(c).forEach(([l,b])=>{(!n||n&&!n([...d,l]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?s(b,[...d,l],Array.isArray(b)?[...p,l]:p):t([...d,l],b,p))})}s(e)},w3=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function Hx(e,t){const{prefix:n,shouldSkipGeneratingVar:s}=t||{},c={},d={},p={};return b3(e,(l,b,T)=>{if((typeof b=="string"||typeof b=="number")&&(!s||!s(l,b))){const k=`--${n?`${n}-`:""}${l.join("-")}`,I=w3(l,b);Object.assign(c,{[k]:I}),IT(d,l,`var(${k})`,T),IT(p,l,`var(${k}, ${I})`,T)}},l=>l[0]==="vars"),{css:c,vars:d,varsWithDefaults:p}}function S3(e,t={}){const{getSelector:n=$,disableCssColorScheme:s,colorSchemeSelector:c,enableContrastVars:d}=t,{colorSchemes:p={},components:l,defaultColorScheme:b="light",...T}=e,{vars:k,css:I,varsWithDefaults:M}=Hx(T,t);let D=M;const H={},{[b]:q,...J}=p;if(Object.entries(J||{}).forEach(([G,ne])=>{const{vars:re,css:ae,varsWithDefaults:he}=Hx(ne,t);D=ci(D,he),H[G]={css:ae,vars:re}}),q){const{css:G,vars:ne,varsWithDefaults:re}=Hx(q,t);D=ci(D,re),H[b]={css:G,vars:ne}}function $(G,ne){var ae,he;let re=c;if(c==="class"&&(re=".%s"),c==="data"&&(re="[data-%s]"),c!=null&&c.startsWith("data-")&&!c.includes("%s")&&(re=`[${c}="%s"]`),G){if(re==="media")return e.defaultColorScheme===G?":root":{[`@media (prefers-color-scheme: ${((he=(ae=p[G])==null?void 0:ae.palette)==null?void 0:he.mode)||G})`]:{":root":ne}};if(re)return e.defaultColorScheme===G?`:root, ${re.replace("%s",String(G))}`:re.replace("%s",String(G))}return":root"}return{vars:D,generateThemeVars:()=>{let G={...k};return Object.entries(H).forEach(([,{vars:ne}])=>{G=ci(G,ne)}),G},generateStyleSheets:()=>{var Me,Ee;const G=[],ne=e.defaultColorScheme||"light";function re(Re,K){Object.keys(K).length&&G.push(typeof Re=="string"?{[Re]:{...K}}:Re)}re(n(void 0,{...I}),I);const{[ne]:ae,...he}=H;if(ae){const{css:Re}=ae,K=(Ee=(Me=p[ne])==null?void 0:Me.palette)==null?void 0:Ee.mode,be=!s&&K?{colorScheme:K,...Re}:{...Re};re(n(ne,{...be}),be)}return Object.entries(he).forEach(([Re,{css:K}])=>{var ze,Te;const be=(Te=(ze=p[Re])==null?void 0:ze.palette)==null?void 0:Te.mode,_e=!s&&be?{colorScheme:be,...K}:{...K};re(n(Re,{..._e}),_e)}),d&&G.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),G}}}function C3(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}function Mn(e,t,n=void 0){const s={};for(const c in e){const d=e[c];let p="",l=!0;for(let b=0;b<d.length;b+=1){const T=d[b];T&&(p+=(l===!0?"":" ")+t(T),l=!1,n&&n[T]&&(p+=" "+n[T]))}s[c]=p}return s}function Hg(e,t){var n,s,c;return W.isValidElement(e)&&t.indexOf(e.type.muiName??((c=(s=(n=e.type)==null?void 0:n._payload)==null?void 0:s.value)==null?void 0:c.muiName))!==-1}const T3=Dv(),P3=s3("div",{name:"MuiStack",slot:"Root"});function k3(e){return l3({props:e,name:"MuiStack",defaultTheme:T3})}function E3(e,t){const n=W.Children.toArray(e).filter(Boolean);return n.reduce((s,c,d)=>(s.push(c),d<n.length-1&&s.push(W.cloneElement(t,{key:`separator-${d}`})),s),[])}const I3=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],A3=({ownerState:e,theme:t})=>{let n={display:"flex",flexDirection:"column",...bs({theme:t},jx({values:e.direction,breakpoints:t.breakpoints.values}),s=>({flexDirection:s}))};if(e.spacing){const s=Iv(t),c=Object.keys(t.breakpoints.values).reduce((b,T)=>((typeof e.spacing=="object"&&e.spacing[T]!=null||typeof e.direction=="object"&&e.direction[T]!=null)&&(b[T]=!0),b),{}),d=jx({values:e.direction,base:c}),p=jx({values:e.spacing,base:c});typeof d=="object"&&Object.keys(d).forEach((b,T,k)=>{if(!d[b]){const M=T>0?d[k[T-1]]:"column";d[b]=M}}),n=ci(n,bs({theme:t},p,(b,T)=>e.useFlexGap?{gap:Nu(s,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${I3(T?d[T]:e.direction)}`]:Nu(s,b)}}))}return n=rB(t.breakpoints,n),n};function M3(e={}){const{createStyledComponent:t=P3,useThemeProps:n=k3,componentName:s="MuiStack"}=e,c=()=>Mn({root:["root"]},b=>An(s,b),{}),d=t(A3);return W.forwardRef(function(b,T){const k=n(b),I=uw(k),{component:M="div",direction:D="column",spacing:H=0,divider:q,children:J,className:$,useFlexGap:V=!1,...B}=I,G={direction:D,spacing:H,useFlexGap:V},ne=c();return ye.jsx(d,{as:M,ownerState:G,ref:T,className:Zt(ne.root,$),...B,children:q?E3(J,q):J})})}function AA(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:df.white,default:df.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const MA=AA();function RA(){return{text:{primary:df.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:df.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const pb=RA();function AT(e,t,n,s){const c=s.light||s,d=s.dark||s*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=$v(e.main,c):t==="dark"&&(e.dark=Bv(e.main,d)))}function MT(e,t,n,s,c){const d=c.light||c,p=c.dark||c*1.5;t[n]||(t.hasOwnProperty(s)?t[n]=t[s]:n==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(d*100).toFixed(0)}%)`:n==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(p*100).toFixed(0)}%)`))}function R3(e="light"){return e==="dark"?{main:Wc[200],light:Wc[50],dark:Wc[400]}:{main:Wc[700],light:Wc[400],dark:Wc[800]}}function z3(e="light"){return e==="dark"?{main:Uc[200],light:Uc[50],dark:Uc[400]}:{main:Uc[500],light:Uc[300],dark:Uc[700]}}function L3(e="light"){return e==="dark"?{main:jc[500],light:jc[300],dark:jc[700]}:{main:jc[700],light:jc[400],dark:jc[800]}}function D3(e="light"){return e==="dark"?{main:Hc[400],light:Hc[300],dark:Hc[700]}:{main:Hc[700],light:Hc[500],dark:Hc[900]}}function O3(e="light"){return e==="dark"?{main:qc[400],light:qc[300],dark:qc[700]}:{main:qc[800],light:qc[500],dark:qc[900]}}function F3(e="light"){return e==="dark"?{main:cp[400],light:cp[300],dark:cp[700]}:{main:"#ed6c02",light:cp[500],dark:cp[900]}}function B3(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function hw(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2,colorSpace:c,...d}=e,p=e.primary||R3(t),l=e.secondary||z3(t),b=e.error||L3(t),T=e.info||D3(t),k=e.success||O3(t),I=e.warning||F3(t);function M(J){return c?B3(J):h3(J,pb.text.primary)>=n?pb.text.primary:MA.text.primary}const D=({color:J,name:$,mainShade:V=500,lightShade:B=300,darkShade:G=700})=>{if(J={...J},!J.main&&J[V]&&(J.main=J[V]),!J.hasOwnProperty("main"))throw new Error(Pa(11,$?` (${$})`:"",V));if(typeof J.main!="string")throw new Error(Pa(12,$?` (${$})`:"",JSON.stringify(J.main)));return c?(MT(c,J,"light",B,s),MT(c,J,"dark",G,s)):(AT(J,"light",B,s),AT(J,"dark",G,s)),J.contrastText||(J.contrastText=M(J.main)),J};let H;return t==="light"?H=AA():t==="dark"&&(H=RA()),ci({common:{...df},mode:t,primary:D({color:p,name:"primary"}),secondary:D({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:D({color:b,name:"error"}),warning:D({color:I,name:"warning"}),info:D({color:T,name:"info"}),success:D({color:k,name:"success"}),grey:jO,contrastThreshold:n,getContrastText:M,augmentColor:D,tonalOffset:s,...H},d)}function $3(e){const t={};return Object.entries(e).forEach(s=>{const[c,d]=s;typeof d=="object"&&(t[c]=`${d.fontStyle?`${d.fontStyle} `:""}${d.fontVariant?`${d.fontVariant} `:""}${d.fontWeight?`${d.fontWeight} `:""}${d.fontStretch?`${d.fontStretch} `:""}${d.fontSize||""}${d.lineHeight?`/${d.lineHeight} `:""}${d.fontFamily||""}`)}),t}function N3(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function V3(e){return Math.round(e*1e5)/1e5}const RT={textTransform:"uppercase"},zT='"Roboto", "Helvetica", "Arial", sans-serif';function j3(e,t){const{fontFamily:n=zT,fontSize:s=14,fontWeightLight:c=300,fontWeightRegular:d=400,fontWeightMedium:p=500,fontWeightBold:l=700,htmlFontSize:b=16,allVariants:T,pxToRem:k,...I}=typeof t=="function"?t(e):t,M=s/14,D=k||(J=>`${J/b*M}rem`),H=(J,$,V,B,G)=>({fontFamily:n,fontWeight:J,fontSize:D($),lineHeight:V,...n===zT?{letterSpacing:`${V3(B/$)}em`}:{},...G,...T}),q={h1:H(c,96,1.167,-1.5),h2:H(c,60,1.2,-.5),h3:H(d,48,1.167,0),h4:H(d,34,1.235,.25),h5:H(d,24,1.334,0),h6:H(p,20,1.6,.15),subtitle1:H(d,16,1.75,.15),subtitle2:H(p,14,1.57,.1),body1:H(d,16,1.5,.15),body2:H(d,14,1.43,.15),button:H(p,14,1.75,.4,RT),caption:H(d,12,1.66,.4),overline:H(d,12,2.66,1,RT),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ci({htmlFontSize:b,pxToRem:D,fontFamily:n,fontSize:s,fontWeightLight:c,fontWeightRegular:d,fontWeightMedium:p,fontWeightBold:l,...q},I,{clone:!1})}const U3=.2,W3=.14,H3=.12;function xr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${U3})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${W3})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${H3})`].join(",")}const q3=["none",xr(0,2,1,-1,0,1,1,0,0,1,3,0),xr(0,3,1,-2,0,2,2,0,0,1,5,0),xr(0,3,3,-2,0,3,4,0,0,1,8,0),xr(0,2,4,-1,0,4,5,0,0,1,10,0),xr(0,3,5,-1,0,5,8,0,0,1,14,0),xr(0,3,5,-1,0,6,10,0,0,1,18,0),xr(0,4,5,-2,0,7,10,1,0,2,16,1),xr(0,5,5,-3,0,8,10,1,0,3,14,2),xr(0,5,6,-3,0,9,12,1,0,3,16,2),xr(0,6,6,-3,0,10,14,1,0,4,18,3),xr(0,6,7,-4,0,11,15,1,0,4,20,3),xr(0,7,8,-4,0,12,17,2,0,5,22,4),xr(0,7,8,-4,0,13,19,2,0,5,24,4),xr(0,7,9,-4,0,14,21,2,0,5,26,4),xr(0,8,9,-5,0,15,22,2,0,6,28,5),xr(0,8,10,-5,0,16,24,2,0,6,30,5),xr(0,8,11,-5,0,17,26,2,0,6,32,5),xr(0,9,11,-5,0,18,28,2,0,7,34,6),xr(0,9,12,-6,0,19,29,2,0,7,36,6),xr(0,10,13,-6,0,20,31,3,0,8,38,7),xr(0,10,13,-6,0,21,33,3,0,8,40,7),xr(0,10,14,-6,0,22,35,3,0,8,42,7),xr(0,11,14,-7,0,23,36,3,0,9,44,8),xr(0,11,15,-7,0,24,38,3,0,9,46,8)],G3={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Z3={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function LT(e){return`${Math.round(e)}ms`}function K3(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function X3(e){const t={...G3,...e.easing},n={...Z3,...e.duration};return{getAutoHeightDuration:K3,create:(c=["all"],d={})=>{const{duration:p=n.standard,easing:l=t.easeInOut,delay:b=0,...T}=d;return(Array.isArray(c)?c:[c]).map(k=>`${k} ${typeof p=="string"?p:LT(p)} ${l} ${typeof b=="string"?b:LT(b)}`).join(",")},...e,easing:t,duration:n}}const Y3={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function J3(e){return Ns(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function zA(e={}){const t={...e};function n(s){const c=Object.entries(s);for(let d=0;d<c.length;d++){const[p,l]=c[d];!J3(l)||p.startsWith("unstable_")?delete s[p]:Ns(l)&&(s[p]={...l},n(s[p]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function DT(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const Q3=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let n=0;for(let s=0;s<t.length;s+=1)n+=+t[s];return n};function e4(e){Object.assign(e,{alpha(t,n){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof n=="string"?`calc(${n})`:n})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:Ty(t,Q3(n))},lighten(t,n){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${DT(n)})`:$v(t,n)},darken(t,n){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${DT(n)})`:Bv(t,n)}})}function fb(e={},...t){const{breakpoints:n,mixins:s={},spacing:c,palette:d={},transitions:p={},typography:l={},shape:b,colorSpace:T,...k}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Pa(20));const I=hw({...d,colorSpace:T}),M=Dv(e);let D=ci(M,{mixins:N3(M.breakpoints,s),palette:I,shadows:q3.slice(),typography:j3(I,l),transitions:X3(p),zIndex:{...Y3}});return D=ci(D,k),D=t.reduce((H,q)=>ci(H,q),D),D.unstable_sxConfig={...Ff,...k==null?void 0:k.unstable_sxConfig},D.unstable_sx=function(q){return Vu({sx:q,theme:this})},D.toRuntimeSource=zA,e4(D),D}function mb(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const t4=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=mb(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function LA(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function DA(e){return e==="dark"?t4:[]}function n4(e){const{palette:t={mode:"light"},opacity:n,overlays:s,colorSpace:c,...d}=e,p=hw({...t,colorSpace:c});return{palette:p,opacity:{...LA(p.mode),...n},overlays:s||DA(p.mode),...d}}function r4(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const i4=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],o4=e=>(t,n)=>{const s=e.rootSelector||":root",c=e.colorSchemeSelector;let d=c;if(c==="class"&&(d=".%s"),c==="data"&&(d="[data-%s]"),c!=null&&c.startsWith("data-")&&!c.includes("%s")&&(d=`[${c}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const p={};return i4(e.cssVarPrefix).forEach(l=>{p[l]=n[l],delete n[l]}),d==="media"?{[s]:n,"@media (prefers-color-scheme: dark)":{[s]:p}}:d?{[d.replace("%s",t)]:p,[`${s}, ${d.replace("%s",t)}`]:n}:{[s]:{...n,...p}}}if(d&&d!=="media")return`${s}, ${d.replace("%s",String(t))}`}else if(t){if(d==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:n}};if(d)return d.replace("%s",String(t))}return s};function s4(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function Ge(e,t,n){!e[t]&&n&&(e[t]=n)}function wp(e){return typeof e!="string"||!e.startsWith("hsl")?e:IA(e)}function ma(e,t){`${t}Channel`in e||(e[`${t}Channel`]=bp(wp(e[t])))}function a4(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const zs=e=>{try{return e()}catch{}},l4=(e="mui")=>x3(e);function qx(e,t,n,s,c){if(!n)return;n=n===!0?{}:n;const d=c==="dark"?"dark":"light";if(!s){t[c]=n4({...n,palette:{mode:d,...n==null?void 0:n.palette},colorSpace:e});return}const{palette:p,...l}=fb({...s,palette:{mode:d,...n==null?void 0:n.palette},colorSpace:e});return t[c]={...n,palette:p,opacity:{...LA(d),...n==null?void 0:n.opacity},overlays:(n==null?void 0:n.overlays)||DA(d)},l}function u4(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:s,disableCssColorScheme:c=!1,cssVarPrefix:d="mui",nativeColor:p=!1,shouldSkipGeneratingVar:l=r4,colorSchemeSelector:b=n.light&&n.dark?"media":void 0,rootSelector:T=":root",...k}=e,I=Object.keys(n)[0],M=s||(n.light&&I!=="light"?"light":I),D=l4(d),{[M]:H,light:q,dark:J,...$}=n,V={...$};let B=H;if((M==="dark"&&!("dark"in n)||M==="light"&&!("light"in n))&&(B=!0),!B)throw new Error(Pa(21,M));let G;p&&(G="oklch");const ne=qx(G,V,B,k,M);q&&!V.light&&qx(G,V,q,void 0,"light"),J&&!V.dark&&qx(G,V,J,void 0,"dark");let re={defaultColorScheme:M,...ne,cssVarPrefix:d,colorSchemeSelector:b,rootSelector:T,getCssVar:D,colorSchemes:V,font:{...$3(ne.typography),...ne.font},spacing:a4(k.spacing)};Object.keys(re.colorSchemes).forEach(Re=>{const K=re.colorSchemes[Re].palette,be=ze=>{const Te=ze.split("-"),Ue=Te[1],Le=Te[2];return D(ze,K[Ue][Le])};K.mode==="light"&&(Ge(K.common,"background","#fff"),Ge(K.common,"onBackground","#000")),K.mode==="dark"&&(Ge(K.common,"background","#000"),Ge(K.common,"onBackground","#fff"));function _e(ze,Te,Ue){if(G){let Le;return ze===mu&&(Le=`transparent ${((1-Ue)*100).toFixed(0)}%`),ze===Jn&&(Le=`#000 ${(Ue*100).toFixed(0)}%`),ze===Qn&&(Le=`#fff ${(Ue*100).toFixed(0)}%`),`color-mix(in ${G}, ${Te}, ${Le})`}return ze(Te,Ue)}if(s4(K,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),K.mode==="light"){Ge(K.Alert,"errorColor",_e(Jn,K.error.light,.6)),Ge(K.Alert,"infoColor",_e(Jn,K.info.light,.6)),Ge(K.Alert,"successColor",_e(Jn,K.success.light,.6)),Ge(K.Alert,"warningColor",_e(Jn,K.warning.light,.6)),Ge(K.Alert,"errorFilledBg",be("palette-error-main")),Ge(K.Alert,"infoFilledBg",be("palette-info-main")),Ge(K.Alert,"successFilledBg",be("palette-success-main")),Ge(K.Alert,"warningFilledBg",be("palette-warning-main")),Ge(K.Alert,"errorFilledColor",zs(()=>K.getContrastText(K.error.main))),Ge(K.Alert,"infoFilledColor",zs(()=>K.getContrastText(K.info.main))),Ge(K.Alert,"successFilledColor",zs(()=>K.getContrastText(K.success.main))),Ge(K.Alert,"warningFilledColor",zs(()=>K.getContrastText(K.warning.main))),Ge(K.Alert,"errorStandardBg",_e(Qn,K.error.light,.9)),Ge(K.Alert,"infoStandardBg",_e(Qn,K.info.light,.9)),Ge(K.Alert,"successStandardBg",_e(Qn,K.success.light,.9)),Ge(K.Alert,"warningStandardBg",_e(Qn,K.warning.light,.9)),Ge(K.Alert,"errorIconColor",be("palette-error-main")),Ge(K.Alert,"infoIconColor",be("palette-info-main")),Ge(K.Alert,"successIconColor",be("palette-success-main")),Ge(K.Alert,"warningIconColor",be("palette-warning-main")),Ge(K.AppBar,"defaultBg",be("palette-grey-100")),Ge(K.Avatar,"defaultBg",be("palette-grey-400")),Ge(K.Button,"inheritContainedBg",be("palette-grey-300")),Ge(K.Button,"inheritContainedHoverBg",be("palette-grey-A100")),Ge(K.Chip,"defaultBorder",be("palette-grey-400")),Ge(K.Chip,"defaultAvatarColor",be("palette-grey-700")),Ge(K.Chip,"defaultIconColor",be("palette-grey-700")),Ge(K.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ge(K.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ge(K.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ge(K.LinearProgress,"primaryBg",_e(Qn,K.primary.main,.62)),Ge(K.LinearProgress,"secondaryBg",_e(Qn,K.secondary.main,.62)),Ge(K.LinearProgress,"errorBg",_e(Qn,K.error.main,.62)),Ge(K.LinearProgress,"infoBg",_e(Qn,K.info.main,.62)),Ge(K.LinearProgress,"successBg",_e(Qn,K.success.main,.62)),Ge(K.LinearProgress,"warningBg",_e(Qn,K.warning.main,.62)),Ge(K.Skeleton,"bg",G?_e(mu,K.text.primary,.11):`rgba(${be("palette-text-primaryChannel")} / 0.11)`),Ge(K.Slider,"primaryTrack",_e(Qn,K.primary.main,.62)),Ge(K.Slider,"secondaryTrack",_e(Qn,K.secondary.main,.62)),Ge(K.Slider,"errorTrack",_e(Qn,K.error.main,.62)),Ge(K.Slider,"infoTrack",_e(Qn,K.info.main,.62)),Ge(K.Slider,"successTrack",_e(Qn,K.success.main,.62)),Ge(K.Slider,"warningTrack",_e(Qn,K.warning.main,.62));const ze=G?_e(Jn,K.background.default,.6825):dg(K.background.default,.8);Ge(K.SnackbarContent,"bg",ze),Ge(K.SnackbarContent,"color",zs(()=>G?pb.text.primary:K.getContrastText(ze))),Ge(K.SpeedDialAction,"fabHoverBg",dg(K.background.paper,.15)),Ge(K.StepConnector,"border",be("palette-grey-400")),Ge(K.StepContent,"border",be("palette-grey-400")),Ge(K.Switch,"defaultColor",be("palette-common-white")),Ge(K.Switch,"defaultDisabledColor",be("palette-grey-100")),Ge(K.Switch,"primaryDisabledColor",_e(Qn,K.primary.main,.62)),Ge(K.Switch,"secondaryDisabledColor",_e(Qn,K.secondary.main,.62)),Ge(K.Switch,"errorDisabledColor",_e(Qn,K.error.main,.62)),Ge(K.Switch,"infoDisabledColor",_e(Qn,K.info.main,.62)),Ge(K.Switch,"successDisabledColor",_e(Qn,K.success.main,.62)),Ge(K.Switch,"warningDisabledColor",_e(Qn,K.warning.main,.62)),Ge(K.TableCell,"border",_e(Qn,_e(mu,K.divider,1),.88)),Ge(K.Tooltip,"bg",_e(mu,K.grey[700],.92))}if(K.mode==="dark"){Ge(K.Alert,"errorColor",_e(Qn,K.error.light,.6)),Ge(K.Alert,"infoColor",_e(Qn,K.info.light,.6)),Ge(K.Alert,"successColor",_e(Qn,K.success.light,.6)),Ge(K.Alert,"warningColor",_e(Qn,K.warning.light,.6)),Ge(K.Alert,"errorFilledBg",be("palette-error-dark")),Ge(K.Alert,"infoFilledBg",be("palette-info-dark")),Ge(K.Alert,"successFilledBg",be("palette-success-dark")),Ge(K.Alert,"warningFilledBg",be("palette-warning-dark")),Ge(K.Alert,"errorFilledColor",zs(()=>K.getContrastText(K.error.dark))),Ge(K.Alert,"infoFilledColor",zs(()=>K.getContrastText(K.info.dark))),Ge(K.Alert,"successFilledColor",zs(()=>K.getContrastText(K.success.dark))),Ge(K.Alert,"warningFilledColor",zs(()=>K.getContrastText(K.warning.dark))),Ge(K.Alert,"errorStandardBg",_e(Jn,K.error.light,.9)),Ge(K.Alert,"infoStandardBg",_e(Jn,K.info.light,.9)),Ge(K.Alert,"successStandardBg",_e(Jn,K.success.light,.9)),Ge(K.Alert,"warningStandardBg",_e(Jn,K.warning.light,.9)),Ge(K.Alert,"errorIconColor",be("palette-error-main")),Ge(K.Alert,"infoIconColor",be("palette-info-main")),Ge(K.Alert,"successIconColor",be("palette-success-main")),Ge(K.Alert,"warningIconColor",be("palette-warning-main")),Ge(K.AppBar,"defaultBg",be("palette-grey-900")),Ge(K.AppBar,"darkBg",be("palette-background-paper")),Ge(K.AppBar,"darkColor",be("palette-text-primary")),Ge(K.Avatar,"defaultBg",be("palette-grey-600")),Ge(K.Button,"inheritContainedBg",be("palette-grey-800")),Ge(K.Button,"inheritContainedHoverBg",be("palette-grey-700")),Ge(K.Chip,"defaultBorder",be("palette-grey-700")),Ge(K.Chip,"defaultAvatarColor",be("palette-grey-300")),Ge(K.Chip,"defaultIconColor",be("palette-grey-300")),Ge(K.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ge(K.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ge(K.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ge(K.LinearProgress,"primaryBg",_e(Jn,K.primary.main,.5)),Ge(K.LinearProgress,"secondaryBg",_e(Jn,K.secondary.main,.5)),Ge(K.LinearProgress,"errorBg",_e(Jn,K.error.main,.5)),Ge(K.LinearProgress,"infoBg",_e(Jn,K.info.main,.5)),Ge(K.LinearProgress,"successBg",_e(Jn,K.success.main,.5)),Ge(K.LinearProgress,"warningBg",_e(Jn,K.warning.main,.5)),Ge(K.Skeleton,"bg",G?_e(mu,K.text.primary,.13):`rgba(${be("palette-text-primaryChannel")} / 0.13)`),Ge(K.Slider,"primaryTrack",_e(Jn,K.primary.main,.5)),Ge(K.Slider,"secondaryTrack",_e(Jn,K.secondary.main,.5)),Ge(K.Slider,"errorTrack",_e(Jn,K.error.main,.5)),Ge(K.Slider,"infoTrack",_e(Jn,K.info.main,.5)),Ge(K.Slider,"successTrack",_e(Jn,K.success.main,.5)),Ge(K.Slider,"warningTrack",_e(Jn,K.warning.main,.5));const ze=G?_e(Qn,K.background.default,.985):dg(K.background.default,.98);Ge(K.SnackbarContent,"bg",ze),Ge(K.SnackbarContent,"color",zs(()=>G?MA.text.primary:K.getContrastText(ze))),Ge(K.SpeedDialAction,"fabHoverBg",dg(K.background.paper,.15)),Ge(K.StepConnector,"border",be("palette-grey-600")),Ge(K.StepContent,"border",be("palette-grey-600")),Ge(K.Switch,"defaultColor",be("palette-grey-300")),Ge(K.Switch,"defaultDisabledColor",be("palette-grey-600")),Ge(K.Switch,"primaryDisabledColor",_e(Jn,K.primary.main,.55)),Ge(K.Switch,"secondaryDisabledColor",_e(Jn,K.secondary.main,.55)),Ge(K.Switch,"errorDisabledColor",_e(Jn,K.error.main,.55)),Ge(K.Switch,"infoDisabledColor",_e(Jn,K.info.main,.55)),Ge(K.Switch,"successDisabledColor",_e(Jn,K.success.main,.55)),Ge(K.Switch,"warningDisabledColor",_e(Jn,K.warning.main,.55)),Ge(K.TableCell,"border",_e(Jn,_e(mu,K.divider,1),.68)),Ge(K.Tooltip,"bg",_e(mu,K.grey[700],.92))}ma(K.background,"default"),ma(K.background,"paper"),ma(K.common,"background"),ma(K.common,"onBackground"),ma(K,"divider"),Object.keys(K).forEach(ze=>{const Te=K[ze];ze!=="tonalOffset"&&Te&&typeof Te=="object"&&(Te.main&&Ge(K[ze],"mainChannel",bp(wp(Te.main))),Te.light&&Ge(K[ze],"lightChannel",bp(wp(Te.light))),Te.dark&&Ge(K[ze],"darkChannel",bp(wp(Te.dark))),Te.contrastText&&Ge(K[ze],"contrastTextChannel",bp(wp(Te.contrastText))),ze==="text"&&(ma(K[ze],"primary"),ma(K[ze],"secondary")),ze==="action"&&(Te.active&&ma(K[ze],"active"),Te.selected&&ma(K[ze],"selected")))})}),re=t.reduce((Re,K)=>ci(Re,K),re);const ae={prefix:d,disableCssColorScheme:c,shouldSkipGeneratingVar:l,getSelector:o4(re),enableContrastVars:p},{vars:he,generateThemeVars:Me,generateStyleSheets:Ee}=S3(re,ae);return re.vars=he,Object.entries(re.colorSchemes[re.defaultColorScheme]).forEach(([Re,K])=>{re[Re]=K}),re.generateThemeVars=Me,re.generateStyleSheets=Ee,re.generateSpacing=function(){return SA(k.spacing,Iv(this))},re.getColorSchemeSelector=C3(b),re.spacing=re.generateSpacing(),re.shouldSkipGeneratingVar=l,re.unstable_sxConfig={...Ff,...k==null?void 0:k.unstable_sxConfig},re.unstable_sx=function(K){return Vu({sx:K,theme:this})},re.toRuntimeSource=zA,re}function OT(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:hw({...n===!0?{}:n.palette,mode:t})})}function OA(e={},...t){const{palette:n,cssVariables:s=!1,colorSchemes:c=n?void 0:{light:!0},defaultColorScheme:d=n==null?void 0:n.mode,...p}=e,l=d||"light",b=c==null?void 0:c[l],T={...c,...n?{[l]:{...typeof b!="boolean"&&b,palette:n}}:void 0};if(s===!1){if(!("colorSchemes"in e))return fb(e,...t);let k=n;"palette"in e||T[l]&&(T[l]!==!0?k=T[l].palette:l==="dark"&&(k={mode:"dark"}));const I=fb({...e,palette:k},...t);return I.defaultColorScheme=l,I.colorSchemes=T,I.palette.mode==="light"&&(I.colorSchemes.light={...T.light!==!0&&T.light,palette:I.palette},OT(I,"dark",T.dark)),I.palette.mode==="dark"&&(I.colorSchemes.dark={...T.dark!==!0&&T.dark,palette:I.palette},OT(I,"light",T.light)),I}return!n&&!("light"in T)&&l==="light"&&(T.light=!0),u4({...p,colorSchemes:T,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const dw=OA();function Vv(){const e=Ov(dw);return e[nv]||e}function jv(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const as=e=>jv(e)&&e!=="classes",ft=EA({themeId:nv,defaultTheme:dw,rootShouldForwardProp:as});function FT(...e){return e.reduce((t,n)=>n==null?t:function(...c){t.apply(this,c),n.apply(this,c)},()=>{})}function c4(e){return ye.jsx(ZB,{...e,defaultTheme:dw,themeId:nv})}function h4(e){return function(n){return ye.jsx(c4,{styles:typeof e=="function"?s=>e({theme:s,...n}):e})}}function d4(){return uw}const xn=_3;function zn(e){return g3(e)}function p4(e){return An("MuiSvgIcon",e)}Pn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const f4=e=>{const{color:t,fontSize:n,classes:s}=e,c={root:["root",t!=="inherit"&&`color${gt(t)}`,`fontSize${gt(n)}`]};return Mn(c,p4,s)},m4=ft("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${gt(n.color)}`],t[`fontSize${gt(n.fontSize)}`]]}})(xn(({theme:e})=>{var t,n,s,c,d,p,l,b,T,k,I,M,D,H;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(c=(t=e.transitions)==null?void 0:t.create)==null?void 0:c.call(t,"fill",{duration:(s=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:s.shorter}),variants:[{props:q=>!q.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((p=(d=e.typography)==null?void 0:d.pxToRem)==null?void 0:p.call(d,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((b=(l=e.typography)==null?void 0:l.pxToRem)==null?void 0:b.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((k=(T=e.typography)==null?void 0:T.pxToRem)==null?void 0:k.call(T,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,q])=>q&&q.main).map(([q])=>{var J,$;return{props:{color:q},style:{color:($=(J=(e.vars??e).palette)==null?void 0:J[q])==null?void 0:$.main}}}),{props:{color:"action"},style:{color:(M=(I=(e.vars??e).palette)==null?void 0:I.action)==null?void 0:M.active}},{props:{color:"disabled"},style:{color:(H=(D=(e.vars??e).palette)==null?void 0:D.action)==null?void 0:H.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),gb=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiSvgIcon"}),{children:c,className:d,color:p="inherit",component:l="svg",fontSize:b="medium",htmlColor:T,inheritViewBox:k=!1,titleAccess:I,viewBox:M="0 0 24 24",...D}=s,H=W.isValidElement(c)&&c.type==="svg",q={...s,color:p,component:l,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:k,viewBox:M,hasSvgAsChild:H},J={};k||(J.viewBox=M);const $=f4(q);return ye.jsxs(m4,{as:l,className:Zt($.root,d),focusable:"false",color:T,"aria-hidden":I?void 0:!0,role:I?"img":void 0,ref:n,...J,...D,...H&&c.props,ownerState:q,children:[H?c.props.children:c,I?ye.jsx("title",{children:I}):null]})});gb.muiName="SvgIcon";function ws(e,t){function n(s,c){return ye.jsx(gb,{"data-testid":void 0,ref:c,...s,children:e})}return n.muiName=gb.muiName,W.memo(W.forwardRef(n))}function FA(e,t=166){let n;function s(...c){const d=()=>{e.apply(this,c)};clearTimeout(n),n=setTimeout(d,t)}return s.clear=()=>{clearTimeout(n)},s}function wi(e){return e&&e.ownerDocument||document}function ka(e){return wi(e).defaultView||window}function yb(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Al(e){const{controlled:t,default:n,name:s,state:c="value"}=e,{current:d}=W.useRef(t!==void 0),[p,l]=W.useState(n),b=d?t:p,T=W.useCallback(k=>{d||l(k)},[]);return[b,T]}function Oi(e){const t=W.useRef(e);return Xs(()=>{t.current=e}),W.useRef((...n)=>(0,t.current)(...n)).current}function Gr(...e){const t=W.useRef(void 0),n=W.useCallback(s=>{const c=e.map(d=>{if(d==null)return null;if(typeof d=="function"){const p=d,l=p(s);return typeof l=="function"?l:()=>{p(null)}}return d.current=s,()=>{d.current=null}});return()=>{c.forEach(d=>d==null?void 0:d())}},e);return W.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=n(s))},e)}function g4(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function BA(e,t){if(!e)return t;function n(p,l){const b={};return Object.keys(l).forEach(T=>{g4(T,l[T])&&typeof p[T]=="function"&&(b[T]=(...k)=>{p[T](...k),l[T](...k)})}),b}if(typeof e=="function"||typeof t=="function")return p=>{const l=typeof t=="function"?t(p):t,b=typeof e=="function"?e({...p,...l}):e,T=Zt(p==null?void 0:p.className,l==null?void 0:l.className,b==null?void 0:b.className),k=n(b,l);return{...l,...b,...k,...!!T&&{className:T},...(l==null?void 0:l.style)&&(b==null?void 0:b.style)&&{style:{...l.style,...b.style}},...(l==null?void 0:l.sx)&&(b==null?void 0:b.sx)&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(b.sx)?b.sx:[b.sx]]}}};const s=t,c=n(e,s),d=Zt(s==null?void 0:s.className,e==null?void 0:e.className);return{...t,...e,...c,...!!d&&{className:d},...(s==null?void 0:s.style)&&(e==null?void 0:e.style)&&{style:{...s.style,...e.style}},...(s==null?void 0:s.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function $A(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function vb(e,t){return vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},vb(e,t)}function NA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,vb(e,t)}const BT={disabled:!1},Py=Vs.createContext(null);var y4=function(t){return t.scrollTop},Sp="unmounted",_u="exited",xu="entering",Xc="entered",_b="exiting",Js=function(e){NA(t,e);function t(s,c){var d;d=e.call(this,s,c)||this;var p=c,l=p&&!p.isMounting?s.enter:s.appear,b;return d.appearStatus=null,s.in?l?(b=_u,d.appearStatus=xu):b=Xc:s.unmountOnExit||s.mountOnEnter?b=Sp:b=_u,d.state={status:b},d.nextCallback=null,d}t.getDerivedStateFromProps=function(c,d){var p=c.in;return p&&d.status===Sp?{status:_u}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(c){var d=null;if(c!==this.props){var p=this.state.status;this.props.in?p!==xu&&p!==Xc&&(d=xu):(p===xu||p===Xc)&&(d=_b)}this.updateStatus(!1,d)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var c=this.props.timeout,d,p,l;return d=p=l=c,c!=null&&typeof c!="number"&&(d=c.exit,p=c.enter,l=c.appear!==void 0?c.appear:p),{exit:d,enter:p,appear:l}},n.updateStatus=function(c,d){if(c===void 0&&(c=!1),d!==null)if(this.cancelNextCallback(),d===xu){if(this.props.unmountOnExit||this.props.mountOnEnter){var p=this.props.nodeRef?this.props.nodeRef.current:cg.findDOMNode(this);p&&y4(p)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===_u&&this.setState({status:Sp})},n.performEnter=function(c){var d=this,p=this.props.enter,l=this.context?this.context.isMounting:c,b=this.props.nodeRef?[l]:[cg.findDOMNode(this),l],T=b[0],k=b[1],I=this.getTimeouts(),M=l?I.appear:I.enter;if(!c&&!p||BT.disabled){this.safeSetState({status:Xc},function(){d.props.onEntered(T)});return}this.props.onEnter(T,k),this.safeSetState({status:xu},function(){d.props.onEntering(T,k),d.onTransitionEnd(M,function(){d.safeSetState({status:Xc},function(){d.props.onEntered(T,k)})})})},n.performExit=function(){var c=this,d=this.props.exit,p=this.getTimeouts(),l=this.props.nodeRef?void 0:cg.findDOMNode(this);if(!d||BT.disabled){this.safeSetState({status:_u},function(){c.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:_b},function(){c.props.onExiting(l),c.onTransitionEnd(p.exit,function(){c.safeSetState({status:_u},function(){c.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(c,d){d=this.setNextCallback(d),this.setState(c,d)},n.setNextCallback=function(c){var d=this,p=!0;return this.nextCallback=function(l){p&&(p=!1,d.nextCallback=null,c(l))},this.nextCallback.cancel=function(){p=!1},this.nextCallback},n.onTransitionEnd=function(c,d){this.setNextCallback(d);var p=this.props.nodeRef?this.props.nodeRef.current:cg.findDOMNode(this),l=c==null&&!this.props.addEndListener;if(!p||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var b=this.props.nodeRef?[this.nextCallback]:[p,this.nextCallback],T=b[0],k=b[1];this.props.addEndListener(T,k)}c!=null&&setTimeout(this.nextCallback,c)},n.render=function(){var c=this.state.status;if(c===Sp)return null;var d=this.props,p=d.children;d.in,d.mountOnEnter,d.unmountOnExit,d.appear,d.enter,d.exit,d.timeout,d.addEndListener,d.onEnter,d.onEntering,d.onEntered,d.onExit,d.onExiting,d.onExited,d.nodeRef;var l=$A(d,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Vs.createElement(Py.Provider,{value:null},typeof p=="function"?p(c,l):Vs.cloneElement(Vs.Children.only(p),l))},t}(Vs.Component);Js.contextType=Py;Js.propTypes={};function Gc(){}Js.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Gc,onEntering:Gc,onEntered:Gc,onExit:Gc,onExiting:Gc,onExited:Gc};Js.UNMOUNTED=Sp;Js.EXITED=_u;Js.ENTERING=xu;Js.ENTERED=Xc;Js.EXITING=_b;function v4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pw(e,t){var n=function(d){return t&&W.isValidElement(d)?t(d):d},s=Object.create(null);return e&&W.Children.map(e,function(c){return c}).forEach(function(c){s[c.key]=n(c)}),s}function _4(e,t){e=e||{},t=t||{};function n(k){return k in t?t[k]:e[k]}var s=Object.create(null),c=[];for(var d in e)d in t?c.length&&(s[d]=c,c=[]):c.push(d);var p,l={};for(var b in t){if(s[b])for(p=0;p<s[b].length;p++){var T=s[b][p];l[s[b][p]]=n(T)}l[b]=n(b)}for(p=0;p<c.length;p++)l[c[p]]=n(c[p]);return l}function Pu(e,t,n){return n[t]!=null?n[t]:e.props[t]}function x4(e,t){return pw(e.children,function(n){return W.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Pu(n,"appear",e),enter:Pu(n,"enter",e),exit:Pu(n,"exit",e)})})}function b4(e,t,n){var s=pw(e.children),c=_4(t,s);return Object.keys(c).forEach(function(d){var p=c[d];if(W.isValidElement(p)){var l=d in t,b=d in s,T=t[d],k=W.isValidElement(T)&&!T.props.in;b&&(!l||k)?c[d]=W.cloneElement(p,{onExited:n.bind(null,p),in:!0,exit:Pu(p,"exit",e),enter:Pu(p,"enter",e)}):!b&&l&&!k?c[d]=W.cloneElement(p,{in:!1}):b&&l&&W.isValidElement(T)&&(c[d]=W.cloneElement(p,{onExited:n.bind(null,p),in:T.props.in,exit:Pu(p,"exit",e),enter:Pu(p,"enter",e)}))}}),c}var w4=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},S4={component:"div",childFactory:function(t){return t}},fw=function(e){NA(t,e);function t(s,c){var d;d=e.call(this,s,c)||this;var p=d.handleExited.bind(v4(d));return d.state={contextValue:{isMounting:!0},handleExited:p,firstRender:!0},d}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(c,d){var p=d.children,l=d.handleExited,b=d.firstRender;return{children:b?x4(c,l):b4(c,p,l),firstRender:!1}},n.handleExited=function(c,d){var p=pw(this.props.children);c.key in p||(c.props.onExited&&c.props.onExited(d),this.mounted&&this.setState(function(l){var b=wy({},l.children);return delete b[c.key],{children:b}}))},n.render=function(){var c=this.props,d=c.component,p=c.childFactory,l=$A(c,["component","childFactory"]),b=this.state.contextValue,T=w4(this.state.children).map(p);return delete l.appear,delete l.enter,delete l.exit,d===null?Vs.createElement(Py.Provider,{value:b},T):Vs.createElement(Py.Provider,{value:b},Vs.createElement(d,l,T))},t}(Vs.Component);fw.propTypes={};fw.defaultProps=S4;const $T={};function VA(e,t){const n=W.useRef($T);return n.current===$T&&(n.current=e(t)),n}const C4=[];function T4(e){W.useEffect(e,C4)}class Uv{constructor(){tp(this,"currentId",null);tp(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});tp(this,"disposeEffect",()=>this.clear)}static create(){return new Uv}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function uh(){const e=VA(Uv.create).current;return T4(e.disposeEffect),e}const jA=e=>e.scrollTop;function ky(e,t){const{timeout:n,easing:s,style:c={}}=e;return{duration:c.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:c.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:c.transitionDelay}}function P4(e){return An("MuiPaper",e)}Pn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const k4=e=>{const{square:t,elevation:n,variant:s,classes:c}=e,d={root:["root",s,!t&&"rounded",s==="elevation"&&`elevation${n}`]};return Mn(d,P4,c)},E4=ft("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(xn(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Wv=W.forwardRef(function(t,n){var D;const s=zn({props:t,name:"MuiPaper"}),c=Vv(),{className:d,component:p="div",elevation:l=1,square:b=!1,variant:T="elevation",...k}=s,I={...s,component:p,elevation:l,square:b,variant:T},M=k4(I);return ye.jsx(E4,{as:p,ownerState:I,className:Zt(M.root,d),ref:n,...k,style:{...T==="elevation"&&{"--Paper-shadow":(c.vars||c).shadows[l],...c.vars&&{"--Paper-overlay":(D=c.vars.overlays)==null?void 0:D[l]},...!c.vars&&c.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Ty("#fff",mb(l))}, ${Ty("#fff",mb(l))})`}},...k.style}})});function Hs(e){return typeof e=="string"}function UA(e,t,n){return e===void 0||Hs(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function WA(e,t,n){return typeof e=="function"?e(t,n):e}function Op(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{n[s]=e[s]}),n}function NT(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function HA(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:s,externalForwardedProps:c,className:d}=e;if(!t){const D=Zt(n==null?void 0:n.className,d,c==null?void 0:c.className,s==null?void 0:s.className),H={...n==null?void 0:n.style,...c==null?void 0:c.style,...s==null?void 0:s.style},q={...n,...c,...s};return D.length>0&&(q.className=D),Object.keys(H).length>0&&(q.style=H),{props:q,internalRef:void 0}}const p=Op({...c,...s}),l=NT(s),b=NT(c),T=t(p),k=Zt(T==null?void 0:T.className,n==null?void 0:n.className,d,c==null?void 0:c.className,s==null?void 0:s.className),I={...T==null?void 0:T.style,...n==null?void 0:n.style,...c==null?void 0:c.style,...s==null?void 0:s.style},M={...T,...n,...b,...l};return k.length>0&&(M.className=k),Object.keys(I).length>0&&(M.style=I),{props:M,internalRef:T.ref}}function er(e,t){const{className:n,elementType:s,ownerState:c,externalForwardedProps:d,internalForwardedProps:p,shouldForwardComponentProp:l=!1,...b}=t,{component:T,slots:k={[e]:void 0},slotProps:I={[e]:void 0},...M}=d,D=k[e]||s,H=WA(I[e],c),{props:{component:q,...J},internalRef:$}=HA({className:n,...b,externalForwardedProps:e==="root"?M:void 0,externalSlotProps:H}),V=Gr($,H==null?void 0:H.ref,t.ref),B=e==="root"?q||T:q,G=UA(D,{...e==="root"&&!T&&!k[e]&&p,...e!=="root"&&!k[e]&&p,...J,...B&&!l&&{as:B},...B&&l&&{component:B},ref:V},c);return[D,G]}function Lh(e){try{return e.matches(":focus-visible")}catch{}return!1}class Ey{constructor(){tp(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Ey}static use(){const t=VA(Ey.create).current,[n,s]=W.useState(!1);return t.shouldMount=n,t.setShouldMount=s,W.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=A4(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function I4(){return Ey.use()}function A4(){let e,t;const n=new Promise((s,c)=>{e=s,t=c});return n.resolve=e,n.reject=t,n}function M4(e){const{className:t,classes:n,pulsate:s=!1,rippleX:c,rippleY:d,rippleSize:p,in:l,onExited:b,timeout:T}=e,[k,I]=W.useState(!1),M=Zt(t,n.ripple,n.rippleVisible,s&&n.ripplePulsate),D={width:p,height:p,top:-(p/2)+d,left:-(p/2)+c},H=Zt(n.child,k&&n.childLeaving,s&&n.childPulsate);return!l&&!k&&I(!0),W.useEffect(()=>{if(!l&&b!=null){const q=setTimeout(b,T);return()=>{clearTimeout(q)}}},[b,l,T]),ye.jsx("span",{className:M,style:D,children:ye.jsx("span",{className:H})})}const qo=Pn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),xb=550,R4=80,z4=Df`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,L4=Df`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,D4=Df`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,O4=ft("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),F4=ft(M4,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${qo.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${z4};
    animation-duration: ${xb}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${qo.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${qo.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${qo.childLeaving} {
    opacity: 0;
    animation-name: ${L4};
    animation-duration: ${xb}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${qo.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${D4};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,B4=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiTouchRipple"}),{center:c=!1,classes:d={},className:p,...l}=s,[b,T]=W.useState([]),k=W.useRef(0),I=W.useRef(null);W.useEffect(()=>{I.current&&(I.current(),I.current=null)},[b]);const M=W.useRef(!1),D=uh(),H=W.useRef(null),q=W.useRef(null),J=W.useCallback(G=>{const{pulsate:ne,rippleX:re,rippleY:ae,rippleSize:he,cb:Me}=G;T(Ee=>[...Ee,ye.jsx(F4,{classes:{ripple:Zt(d.ripple,qo.ripple),rippleVisible:Zt(d.rippleVisible,qo.rippleVisible),ripplePulsate:Zt(d.ripplePulsate,qo.ripplePulsate),child:Zt(d.child,qo.child),childLeaving:Zt(d.childLeaving,qo.childLeaving),childPulsate:Zt(d.childPulsate,qo.childPulsate)},timeout:xb,pulsate:ne,rippleX:re,rippleY:ae,rippleSize:he},k.current)]),k.current+=1,I.current=Me},[d]),$=W.useCallback((G={},ne={},re=()=>{})=>{const{pulsate:ae=!1,center:he=c||ne.pulsate,fakeElement:Me=!1}=ne;if((G==null?void 0:G.type)==="mousedown"&&M.current){M.current=!1;return}(G==null?void 0:G.type)==="touchstart"&&(M.current=!0);const Ee=Me?null:q.current,Re=Ee?Ee.getBoundingClientRect():{width:0,height:0,left:0,top:0};let K,be,_e;if(he||G===void 0||G.clientX===0&&G.clientY===0||!G.clientX&&!G.touches)K=Math.round(Re.width/2),be=Math.round(Re.height/2);else{const{clientX:ze,clientY:Te}=G.touches&&G.touches.length>0?G.touches[0]:G;K=Math.round(ze-Re.left),be=Math.round(Te-Re.top)}if(he)_e=Math.sqrt((2*Re.width**2+Re.height**2)/3),_e%2===0&&(_e+=1);else{const ze=Math.max(Math.abs((Ee?Ee.clientWidth:0)-K),K)*2+2,Te=Math.max(Math.abs((Ee?Ee.clientHeight:0)-be),be)*2+2;_e=Math.sqrt(ze**2+Te**2)}G!=null&&G.touches?H.current===null&&(H.current=()=>{J({pulsate:ae,rippleX:K,rippleY:be,rippleSize:_e,cb:re})},D.start(R4,()=>{H.current&&(H.current(),H.current=null)})):J({pulsate:ae,rippleX:K,rippleY:be,rippleSize:_e,cb:re})},[c,J,D]),V=W.useCallback(()=>{$({},{pulsate:!0})},[$]),B=W.useCallback((G,ne)=>{if(D.clear(),(G==null?void 0:G.type)==="touchend"&&H.current){H.current(),H.current=null,D.start(0,()=>{B(G,ne)});return}H.current=null,T(re=>re.length>0?re.slice(1):re),I.current=ne},[D]);return W.useImperativeHandle(n,()=>({pulsate:V,start:$,stop:B}),[V,$,B]),ye.jsx(O4,{className:Zt(qo.root,d.root,p),ref:q,...l,children:ye.jsx(fw,{component:null,exit:!0,children:b})})});function $4(e){return An("MuiButtonBase",e)}const N4=Pn("MuiButtonBase",["root","disabled","focusVisible"]),V4=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:s,classes:c}=e,p=Mn({root:["root",t&&"disabled",n&&"focusVisible"]},$4,c);return n&&s&&(p.root+=` ${s}`),p},j4=ft("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${N4.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),yf=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiButtonBase"}),{action:c,centerRipple:d=!1,children:p,className:l,component:b="button",disabled:T=!1,disableRipple:k=!1,disableTouchRipple:I=!1,focusRipple:M=!1,focusVisibleClassName:D,LinkComponent:H="a",onBlur:q,onClick:J,onContextMenu:$,onDragLeave:V,onFocus:B,onFocusVisible:G,onKeyDown:ne,onKeyUp:re,onMouseDown:ae,onMouseLeave:he,onMouseUp:Me,onTouchEnd:Ee,onTouchMove:Re,onTouchStart:K,tabIndex:be=0,TouchRippleProps:_e,touchRippleRef:ze,type:Te,...Ue}=s,Le=W.useRef(null),Oe=I4(),Xe=Gr(Oe.ref,ze),[Ye,ut]=W.useState(!1);T&&Ye&&ut(!1),W.useImperativeHandle(c,()=>({focusVisible:()=>{ut(!0),Le.current.focus()}}),[]);const Kt=Oe.shouldMount&&!k&&!T;W.useEffect(()=>{Ye&&M&&!k&&Oe.pulsate()},[k,M,Ye,Oe]);const Vt=ga(Oe,"start",ae,I),tt=ga(Oe,"stop",$,I),Qe=ga(Oe,"stop",V,I),kt=ga(Oe,"stop",Me,I),Xt=ga(Oe,"stop",Ct=>{Ye&&Ct.preventDefault(),he&&he(Ct)},I),jt=ga(Oe,"start",K,I),bt=ga(Oe,"stop",Ee,I),Qt=ga(Oe,"stop",Re,I),Ot=ga(Oe,"stop",Ct=>{Lh(Ct.target)||ut(!1),q&&q(Ct)},!1),Ut=Oi(Ct=>{Le.current||(Le.current=Ct.currentTarget),Lh(Ct.target)&&(ut(!0),G&&G(Ct)),B&&B(Ct)}),Wt=()=>{const Ct=Le.current;return b&&b!=="button"&&!(Ct.tagName==="A"&&Ct.href)},mn=Oi(Ct=>{M&&!Ct.repeat&&Ye&&Ct.key===" "&&Oe.stop(Ct,()=>{Oe.start(Ct)}),Ct.target===Ct.currentTarget&&Wt()&&Ct.key===" "&&Ct.preventDefault(),ne&&ne(Ct),Ct.target===Ct.currentTarget&&Wt()&&Ct.key==="Enter"&&!T&&(Ct.preventDefault(),J&&J(Ct))}),Ce=Oi(Ct=>{M&&Ct.key===" "&&Ye&&!Ct.defaultPrevented&&Oe.stop(Ct,()=>{Oe.pulsate(Ct)}),re&&re(Ct),J&&Ct.target===Ct.currentTarget&&Wt()&&Ct.key===" "&&!Ct.defaultPrevented&&J(Ct)});let un=b;un==="button"&&(Ue.href||Ue.to)&&(un=H);const mt={};un==="button"?(mt.type=Te===void 0?"button":Te,mt.disabled=T):(!Ue.href&&!Ue.to&&(mt.role="button"),T&&(mt["aria-disabled"]=T));const Yt=Gr(n,Le),yt={...s,centerRipple:d,component:b,disabled:T,disableRipple:k,disableTouchRipple:I,focusRipple:M,tabIndex:be,focusVisible:Ye},gn=V4(yt);return ye.jsxs(j4,{as:un,className:Zt(gn.root,l),ownerState:yt,onBlur:Ot,onClick:J,onContextMenu:tt,onFocus:Ut,onKeyDown:mn,onKeyUp:Ce,onMouseDown:Vt,onMouseLeave:Xt,onMouseUp:kt,onDragLeave:Qe,onTouchEnd:bt,onTouchMove:Qt,onTouchStart:jt,ref:Yt,tabIndex:T?-1:be,type:Te,...mt,...Ue,children:[p,Kt?ye.jsx(B4,{ref:Xe,center:d,..._e}):null]})});function ga(e,t,n,s=!1){return Oi(c=>(n&&n(c),s||e[t](c),!0))}function U4(e){return typeof e.main=="string"}function W4(e,t=[]){if(!U4(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function li(e=[]){return([,t])=>t&&W4(t,e)}function H4(e){return An("MuiCircularProgress",e)}Pn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const dl=44,bb=Df`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,wb=Df`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,q4=typeof bb!="string"?rw`
        animation: ${bb} 1.4s linear infinite;
      `:null,G4=typeof wb!="string"?rw`
        animation: ${wb} 1.4s ease-in-out infinite;
      `:null,Z4=e=>{const{classes:t,variant:n,color:s,disableShrink:c}=e,d={root:["root",n,`color${gt(s)}`],svg:["svg"],circle:["circle",`circle${gt(n)}`,c&&"circleDisableShrink"]};return Mn(d,H4,t)},K4=ft("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${gt(n.color)}`]]}})(xn(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:q4||{animation:`${bb} 1.4s linear infinite`}},...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),X4=ft("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Y4=ft("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${gt(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(xn(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:G4||{animation:`${wb} 1.4s ease-in-out infinite`}}]}))),J4=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiCircularProgress"}),{className:c,color:d="primary",disableShrink:p=!1,size:l=40,style:b,thickness:T=3.6,value:k=0,variant:I="indeterminate",...M}=s,D={...s,color:d,disableShrink:p,size:l,thickness:T,value:k,variant:I},H=Z4(D),q={},J={},$={};if(I==="determinate"){const V=2*Math.PI*((dl-T)/2);q.strokeDasharray=V.toFixed(3),$["aria-valuenow"]=Math.round(k),q.strokeDashoffset=`${((100-k)/100*V).toFixed(3)}px`,J.transform="rotate(-90deg)"}return ye.jsx(K4,{className:Zt(H.root,c),style:{width:l,height:l,...J,...b},ownerState:D,ref:n,role:"progressbar",...$,...M,children:ye.jsx(X4,{className:H.svg,ownerState:D,viewBox:`${dl/2} ${dl/2} ${dl} ${dl}`,children:ye.jsx(Y4,{className:H.circle,style:q,ownerState:D,cx:dl,cy:dl,r:(dl-T)/2,fill:"none",strokeWidth:T})})})});function Q4(e){return An("MuiIconButton",e)}const VT=Pn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),e$=e=>{const{classes:t,disabled:n,color:s,edge:c,size:d,loading:p}=e,l={root:["root",p&&"loading",n&&"disabled",s!=="default"&&`color${gt(s)}`,c&&`edge${gt(c)}`,`size${gt(d)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Mn(l,Q4,t)},t$=ft(yf,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${gt(n.color)}`],n.edge&&t[`edge${gt(n.edge)}`],t[`size${gt(n.size)}`]]}})(xn(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),xn(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${VT.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${VT.loading}`]:{color:"transparent"}}))),n$=ft("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),mw=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiIconButton"}),{edge:c=!1,children:d,className:p,color:l="default",disabled:b=!1,disableFocusRipple:T=!1,size:k="medium",id:I,loading:M=null,loadingIndicator:D,...H}=s,q=Bf(I),J=D??ye.jsx(J4,{"aria-labelledby":q,color:"inherit",size:16}),$={...s,edge:c,color:l,disabled:b,disableFocusRipple:T,loading:M,loadingIndicator:J,size:k},V=e$($);return ye.jsxs(t$,{id:M?q:I,className:Zt(V.root,p),centerRipple:!0,focusRipple:!T,disabled:b||M,ref:n,...H,ownerState:$,children:[typeof M=="boolean"&&ye.jsx("span",{className:V.loadingWrapper,style:{display:"contents"},children:ye.jsx(n$,{className:V.loadingIndicator,ownerState:$,children:M&&J})}),d]})}),r$=ws(ye.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function i$(e){return An("MuiTypography",e)}Pn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const o$={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},s$=d4(),a$=e=>{const{align:t,gutterBottom:n,noWrap:s,paragraph:c,variant:d,classes:p}=e,l={root:["root",d,e.align!=="inherit"&&`align${gt(t)}`,n&&"gutterBottom",s&&"noWrap",c&&"paragraph"]};return Mn(l,i$,p)},l$=ft("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${gt(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(xn(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,s])=>n!=="inherit"&&s&&typeof s=="object").map(([n,s])=>({props:{variant:n},style:s})),...Object.entries(e.palette).filter(li()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${gt(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),jT={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Sb=W.forwardRef(function(t,n){const{color:s,...c}=zn({props:t,name:"MuiTypography"}),d=!o$[s],p=s$({...c,...d&&{color:s}}),{align:l="inherit",className:b,component:T,gutterBottom:k=!1,noWrap:I=!1,paragraph:M=!1,variant:D="body1",variantMapping:H=jT,...q}=p,J={...p,align:l,color:s,className:b,component:T,gutterBottom:k,noWrap:I,paragraph:M,variant:D,variantMapping:H},$=T||(M?"p":H[D]||jT[D])||"span",V=a$(J);return ye.jsx(l$,{as:$,ref:n,className:Zt(V.root,b),...q,ownerState:J,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...q.style}})}),u$=e=>{const t=W.useRef({});return W.useEffect(()=>{t.current=e}),t.current};function UT({array1:e,array2:t,parser:n=s=>s}){return e&&t&&e.length===t.length&&e.every((s,c)=>n(s)===n(t[c]))}function WT(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function c$(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:s,matchFrom:c="any",stringify:d,trim:p=!1}=e;return(l,{inputValue:b,getOptionLabel:T})=>{let k=p?b.trim():b;n&&(k=k.toLowerCase()),t&&(k=WT(k));const I=k?l.filter(M=>{let D=(d||T)(M);return n&&(D=D.toLowerCase()),t&&(D=WT(D)),c==="start"?D.startsWith(k):D.includes(k)}):l;return typeof s=="number"?I.slice(0,s):I}}const h$=c$(),HT=5,d$=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))},p$=[];function qT(e,t,n,s){if(t||e==null||s)return"";const c=n(e);return typeof c=="string"?c:""}function f$(e){const{unstable_isActiveElementInListbox:t=d$,unstable_classNamePrefix:n="Mui",autoComplete:s=!1,autoHighlight:c=!1,autoSelect:d=!1,blurOnSelect:p=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:b=!1,componentName:T="useAutocomplete",defaultValue:k=e.multiple?p$:null,disableClearable:I=!1,disableCloseOnSelect:M=!1,disabled:D,disabledItemsFocusable:H=!1,disableListWrap:q=!1,filterOptions:J=h$,filterSelectedOptions:$=!1,freeSolo:V=!1,getOptionDisabled:B,getOptionKey:G,getOptionLabel:ne=Be=>Be.label??Be,groupBy:re,handleHomeEndKeys:ae=!e.freeSolo,id:he,includeInputInList:Me=!1,inputValue:Ee,isOptionEqualToValue:Re=(Be,Ne)=>Be===Ne,multiple:K=!1,onChange:be,onClose:_e,onHighlightChange:ze,onInputChange:Te,onOpen:Ue,open:Le,openOnFocus:Oe=!1,options:Xe,readOnly:Ye=!1,renderValue:ut,selectOnFocus:Kt=!e.freeSolo,value:Vt}=e,tt=Bf(he);let Qe=ne;Qe=Be=>{const Ne=ne(Be);return typeof Ne!="string"?String(Ne):Ne};const kt=W.useRef(!1),Xt=W.useRef(!0),jt=W.useRef(null),bt=W.useRef(null),[Qt,Ot]=W.useState(null),[Ut,Wt]=W.useState(-1),mn=c?0:-1,Ce=W.useRef(mn),un=W.useRef(qT(k??Vt,K,Qe)).current,[mt,Yt]=Al({controlled:Vt,default:k,name:T}),[yt,gn]=Al({controlled:Ee,default:un,name:T,state:"inputValue"}),[Ct,Rn]=W.useState(!1),bn=W.useCallback((Be,Ne,ht)=>{if(!(K?mt.length<Ne.length:Ne!==null)&&!l)return;const Jt=qT(Ne,K,Qe,ut);yt!==Jt&&(gn(Jt),Te&&Te(Be,Jt,ht))},[Qe,yt,K,Te,gn,l,mt,ut]),[qe,nt]=Al({controlled:Le,default:!1,name:T,state:"open"}),[It,Ve]=W.useState(!0),nn=!K&&mt!=null&&yt===Qe(mt),it=qe&&!Ye,ot=it?J(Xe.filter(Be=>!($&&(K?mt:[mt]).some(Ne=>Ne!==null&&Re(Be,Ne)))),{inputValue:nn&&It?"":yt,getOptionLabel:Qe}):[],hn=u$({filteredOptions:ot,value:mt,inputValue:yt});W.useEffect(()=>{const Be=mt!==hn.value;Ct&&!Be||V&&!Be||bn(null,mt,"reset")},[mt,bn,Ct,hn.value,V]);const He=qe&&ot.length>0&&!Ye,vt=Oi(Be=>{if(Be===-1)jt.current.focus();else{const Ne=ut?"data-item-index":"data-tag-index";Qt.querySelector(`[${Ne}="${Be}"]`).focus()}});W.useEffect(()=>{K&&Ut>mt.length-1&&(Wt(-1),vt(-1))},[mt,K,Ut,vt]);function zt(Be,Ne){if(!bt.current||Be<0||Be>=ot.length)return-1;let ht=Be;for(;;){const $t=bt.current.querySelector(`[data-option-index="${ht}"]`),Jt=H?!1:!$t||$t.disabled||$t.getAttribute("aria-disabled")==="true";if($t&&$t.hasAttribute("tabindex")&&!Jt)return ht;if(Ne==="next"?ht=(ht+1)%ot.length:ht=(ht-1+ot.length)%ot.length,ht===Be)return-1}}const Bn=Oi(({event:Be,index:Ne,reason:ht})=>{if(Ce.current=Ne,Ne===-1?jt.current.removeAttribute("aria-activedescendant"):jt.current.setAttribute("aria-activedescendant",`${tt}-option-${Ne}`),ze&&["mouse","keyboard","touch"].includes(ht)&&ze(Be,Ne===-1?null:ot[Ne],ht),!bt.current)return;const $t=bt.current.querySelector(`[role="option"].${n}-focused`);$t&&($t.classList.remove(`${n}-focused`),$t.classList.remove(`${n}-focusVisible`));let Jt=bt.current;if(bt.current.getAttribute("role")!=="listbox"&&(Jt=bt.current.parentElement.querySelector('[role="listbox"]')),!Jt)return;if(Ne===-1){Jt.scrollTop=0;return}const lr=bt.current.querySelector(`[data-option-index="${Ne}"]`);if(lr&&(lr.classList.add(`${n}-focused`),ht==="keyboard"&&lr.classList.add(`${n}-focusVisible`),Jt.scrollHeight>Jt.clientHeight&&ht!=="mouse"&&ht!=="touch")){const on=lr,di=Jt.clientHeight+Jt.scrollTop,Ss=on.offsetTop+on.offsetHeight;Ss>di?Jt.scrollTop=Ss-Jt.clientHeight:on.offsetTop-on.offsetHeight*(re?1.3:0)<Jt.scrollTop&&(Jt.scrollTop=on.offsetTop-on.offsetHeight*(re?1.3:0))}}),Nn=Oi(({event:Be,diff:Ne,direction:ht="next",reason:$t})=>{if(!it)return;const lr=zt((()=>{const on=ot.length-1;if(Ne==="reset")return mn;if(Ne==="start")return 0;if(Ne==="end")return on;const di=Ce.current+Ne;return di<0?di===-1&&Me?-1:q&&Ce.current!==-1||Math.abs(Ne)>1?0:on:di>on?di===on+1&&Me?-1:q||Math.abs(Ne)>1?on:0:di})(),ht);if(Bn({index:lr,reason:$t,event:Be}),s&&Ne!=="reset")if(lr===-1)jt.current.value=yt;else{const on=Qe(ot[lr]);jt.current.value=on,on.toLowerCase().indexOf(yt.toLowerCase())===0&&yt.length>0&&jt.current.setSelectionRange(yt.length,on.length)}}),qt=!UT({array1:hn.filteredOptions,array2:ot,parser:Qe}),At=()=>{const Be=(Ne,ht)=>{const $t=Ne?Qe(Ne):"",Jt=ht?Qe(ht):"";return $t===Jt};if(Ce.current!==-1&&!UT({array1:hn.filteredOptions,array2:ot,parser:Qe})&&hn.inputValue===yt&&(K?mt.length===hn.value.length&&hn.value.every((Ne,ht)=>Qe(mt[ht])===Qe(Ne)):Be(hn.value,mt))){const Ne=hn.filteredOptions[Ce.current];if(Ne)return ot.findIndex(ht=>Qe(ht)===Qe(Ne))}return-1},pn=W.useCallback(()=>{if(!it)return;const Be=At();if(Be!==-1){Ce.current=Be;return}const Ne=K?mt[0]:mt;if(ot.length===0||Ne==null){Nn({diff:"reset"});return}if(bt.current){if(Ne!=null){const ht=ot[Ce.current];if(K&&ht&&mt.findIndex(Jt=>Re(ht,Jt))!==-1)return;const $t=ot.findIndex(Jt=>Re(Jt,Ne));$t===-1?Nn({diff:"reset"}):Bn({index:$t});return}if(Ce.current>=ot.length-1){Bn({index:ot.length-1});return}Bn({index:Ce.current})}},[ot.length,K?!1:mt,$,Nn,Bn,it,yt,K]),Cn=Oi(Be=>{yb(bt,Be),Be&&pn()});W.useEffect(()=>{qt&&pn()},[pn,qt]);const cn=Be=>{qe||(nt(!0),Ve(!0),Ue&&Ue(Be))},se=(Be,Ne)=>{qe&&(nt(!1),_e&&_e(Be,Ne))},U=(Be,Ne,ht,$t)=>{if(K){if(mt.length===Ne.length&&mt.every((Jt,lr)=>Jt===Ne[lr]))return}else if(mt===Ne)return;be&&be(Be,Ne,ht,$t),Yt(Ne)},j=W.useRef(!1),Q=(Be,Ne,ht="selectOption",$t="options")=>{let Jt=ht,lr=Ne;if(K){lr=Array.isArray(mt)?mt.slice():[];const on=lr.findIndex(di=>Re(Ne,di));on===-1?lr.push(Ne):$t!=="freeSolo"&&(lr.splice(on,1),Jt="removeOption")}bn(Be,lr,Jt),U(Be,lr,Jt,{option:Ne}),!M&&(!Be||!Be.ctrlKey&&!Be.metaKey)&&se(Be,Jt),(p===!0||p==="touch"&&j.current||p==="mouse"&&!j.current)&&jt.current.blur()};function ie(Be,Ne){if(Be===-1)return-1;let ht=Be;for(;;){if(Ne==="next"&&ht===mt.length||Ne==="previous"&&ht===-1)return-1;const $t=ut?"data-item-index":"data-tag-index",Jt=Qt.querySelector(`[${$t}="${ht}"]`);if(!Jt||!Jt.hasAttribute("tabindex")||Jt.disabled||Jt.getAttribute("aria-disabled")==="true")ht+=Ne==="next"?1:-1;else return ht}}const ge=(Be,Ne)=>{if(!K)return;yt===""&&se(Be,"toggleInput");let ht=Ut;Ut===-1?yt===""&&Ne==="previous"&&(ht=mt.length-1):(ht+=Ne==="next"?1:-1,ht<0&&(ht=0),ht===mt.length&&(ht=-1)),ht=ie(ht,Ne),Wt(ht),vt(ht)},we=Be=>{kt.current=!0,gn(""),Te&&Te(Be,"","clear"),U(Be,K?[]:null,"clear")},Ie=Be=>Ne=>{if(Be.onKeyDown&&Be.onKeyDown(Ne),!Ne.defaultMuiPrevented&&(Ut!==-1&&!["ArrowLeft","ArrowRight"].includes(Ne.key)&&(Wt(-1),vt(-1)),Ne.which!==229))switch(Ne.key){case"Home":it&&ae&&(Ne.preventDefault(),Nn({diff:"start",direction:"next",reason:"keyboard",event:Ne}));break;case"End":it&&ae&&(Ne.preventDefault(),Nn({diff:"end",direction:"previous",reason:"keyboard",event:Ne}));break;case"PageUp":Ne.preventDefault(),Nn({diff:-HT,direction:"previous",reason:"keyboard",event:Ne}),cn(Ne);break;case"PageDown":Ne.preventDefault(),Nn({diff:HT,direction:"next",reason:"keyboard",event:Ne}),cn(Ne);break;case"ArrowDown":Ne.preventDefault(),Nn({diff:1,direction:"next",reason:"keyboard",event:Ne}),cn(Ne);break;case"ArrowUp":Ne.preventDefault(),Nn({diff:-1,direction:"previous",reason:"keyboard",event:Ne}),cn(Ne);break;case"ArrowLeft":!K&&ut?vt(0):ge(Ne,"previous");break;case"ArrowRight":!K&&ut?vt(-1):ge(Ne,"next");break;case"Enter":if(Ce.current!==-1&&it){const ht=ot[Ce.current],$t=B?B(ht):!1;if(Ne.preventDefault(),$t)return;Q(Ne,ht,"selectOption"),s&&jt.current.setSelectionRange(jt.current.value.length,jt.current.value.length)}else V&&yt!==""&&nn===!1&&(K&&Ne.preventDefault(),Q(Ne,yt,"createOption","freeSolo"));break;case"Escape":it?(Ne.preventDefault(),Ne.stopPropagation(),se(Ne,"escape")):b&&(yt!==""||K&&mt.length>0||ut)&&(Ne.preventDefault(),Ne.stopPropagation(),we(Ne));break;case"Backspace":if(K&&!Ye&&yt===""&&mt.length>0){const ht=Ut===-1?mt.length-1:Ut,$t=mt.slice();$t.splice(ht,1),U(Ne,$t,"removeOption",{option:mt[ht]})}!K&&ut&&!Ye&&(Yt(null),vt(-1));break;case"Delete":if(K&&!Ye&&yt===""&&mt.length>0&&Ut!==-1){const ht=Ut,$t=mt.slice();$t.splice(ht,1),U(Ne,$t,"removeOption",{option:mt[ht]})}!K&&ut&&!Ye&&(Yt(null),vt(-1));break}},me=Be=>{Rn(!0),Oe&&!kt.current&&cn(Be)},$e=Be=>{if(t(bt)){jt.current.focus();return}Rn(!1),Xt.current=!0,kt.current=!1,d&&Ce.current!==-1&&it?Q(Be,ot[Ce.current],"blur"):d&&V&&yt!==""?Q(Be,yt,"blur","freeSolo"):l&&bn(Be,mt,"blur"),se(Be,"blur")},Ze=Be=>{const Ne=Be.target.value;yt!==Ne&&(gn(Ne),Ve(!1),Te&&Te(Be,Ne,"input")),Ne===""?!I&&!K&&U(Be,null,"clear"):cn(Be)},Fe=Be=>{const Ne=Number(Be.currentTarget.getAttribute("data-option-index"));Ce.current!==Ne&&Bn({event:Be,index:Ne,reason:"mouse"})},rt=Be=>{Bn({event:Be,index:Number(Be.currentTarget.getAttribute("data-option-index")),reason:"touch"}),j.current=!0},Lt=Be=>{const Ne=Number(Be.currentTarget.getAttribute("data-option-index"));Q(Be,ot[Ne],"selectOption"),j.current=!1},Gt=Be=>Ne=>{const ht=mt.slice();ht.splice(Be,1),U(Ne,ht,"removeOption",{option:mt[Be]})},wn=Be=>{U(Be,null,"removeOption",{option:mt})},Ft=Be=>{qe?se(Be,"toggleInput"):cn(Be)},rn=Be=>{Be.currentTarget.contains(Be.target)&&Be.target.getAttribute("id")!==tt&&Be.preventDefault()},dn=Be=>{Be.currentTarget.contains(Be.target)&&(jt.current.focus(),Kt&&Xt.current&&jt.current.selectionEnd-jt.current.selectionStart===0&&jt.current.select(),Xt.current=!1)},cr=Be=>{!D&&(yt===""||!qe)&&Ft(Be)};let Un=V&&yt.length>0;Un=Un||(K?mt.length>0:mt!==null);let fn=ot;return re&&(fn=ot.reduce((Be,Ne,ht)=>{const $t=re(Ne);return Be.length>0&&Be[Be.length-1].group===$t?Be[Be.length-1].options.push(Ne):Be.push({key:ht,index:ht,group:$t,options:[Ne]}),Be},[])),D&&Ct&&$e(),{getRootProps:(Be={})=>({...Be,onKeyDown:Ie(Be),onMouseDown:rn,onClick:dn}),getInputLabelProps:()=>({id:`${tt}-label`,htmlFor:tt}),getInputProps:()=>({id:tt,value:yt,onBlur:$e,onFocus:me,onChange:Ze,onMouseDown:cr,"aria-activedescendant":it?"":null,"aria-autocomplete":s?"both":"list","aria-controls":He?`${tt}-listbox`:void 0,"aria-expanded":He,autoComplete:"off",ref:jt,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:D}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:we}),getItemProps:({index:Be=0}={})=>({...K&&{key:Be},...ut?{"data-item-index":Be}:{"data-tag-index":Be},tabIndex:-1,...!Ye&&{onDelete:K?Gt(Be):wn}}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ft}),getTagProps:({index:Be})=>({key:Be,"data-tag-index":Be,tabIndex:-1,...!Ye&&{onDelete:Gt(Be)}}),getListboxProps:()=>({role:"listbox",id:`${tt}-listbox`,"aria-labelledby":`${tt}-label`,ref:Cn,onMouseDown:Be=>{Be.preventDefault()}}),getOptionProps:({index:Be,option:Ne})=>{const ht=(K?mt:[mt]).some(Jt=>Jt!=null&&Re(Ne,Jt)),$t=B?B(Ne):!1;return{key:(G==null?void 0:G(Ne))??Qe(Ne),tabIndex:-1,role:"option",id:`${tt}-option-${Be}`,onMouseMove:Fe,onClick:Lt,onTouchStart:rt,"data-option-index":Be,"aria-disabled":$t,"aria-selected":ht}},id:tt,inputValue:yt,value:mt,dirty:Un,expanded:it&&Qt,popupOpen:it,focused:Ct||Ut!==-1,anchorEl:Qt,setAnchorEl:Ot,focusedItem:Ut,focusedTag:Ut,groupedOptions:fn}}var uo="top",rs="bottom",is="right",co="left",gw="auto",$f=[uo,rs,is,co],Dh="start",vf="end",m$="clippingParents",qA="viewport",dp="popper",g$="reference",GT=$f.reduce(function(e,t){return e.concat([t+"-"+Dh,t+"-"+vf])},[]),GA=[].concat($f,[gw]).reduce(function(e,t){return e.concat([t,t+"-"+Dh,t+"-"+vf])},[]),y$="beforeRead",v$="read",_$="afterRead",x$="beforeMain",b$="main",w$="afterMain",S$="beforeWrite",C$="write",T$="afterWrite",P$=[y$,v$,_$,x$,b$,w$,S$,C$,T$];function Ys(e){return e?(e.nodeName||"").toLowerCase():null}function zo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ju(e){var t=zo(e).Element;return e instanceof t||e instanceof Element}function Qo(e){var t=zo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function yw(e){if(typeof ShadowRoot>"u")return!1;var t=zo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function k$(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},c=t.attributes[n]||{},d=t.elements[n];!Qo(d)||!Ys(d)||(Object.assign(d.style,s),Object.keys(c).forEach(function(p){var l=c[p];l===!1?d.removeAttribute(p):d.setAttribute(p,l===!0?"":l)}))})}function E$(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var c=t.elements[s],d=t.attributes[s]||{},p=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),l=p.reduce(function(b,T){return b[T]="",b},{});!Qo(c)||!Ys(c)||(Object.assign(c.style,l),Object.keys(d).forEach(function(b){c.removeAttribute(b)}))})}}const I$={name:"applyStyles",enabled:!0,phase:"write",fn:k$,effect:E$,requires:["computeStyles"]};function qs(e){return e.split("-")[0]}var Ru=Math.max,Iy=Math.min,Oh=Math.round;function Cb(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ZA(){return!/^((?!chrome|android).)*safari/i.test(Cb())}function Fh(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),c=1,d=1;t&&Qo(e)&&(c=e.offsetWidth>0&&Oh(s.width)/e.offsetWidth||1,d=e.offsetHeight>0&&Oh(s.height)/e.offsetHeight||1);var p=ju(e)?zo(e):window,l=p.visualViewport,b=!ZA()&&n,T=(s.left+(b&&l?l.offsetLeft:0))/c,k=(s.top+(b&&l?l.offsetTop:0))/d,I=s.width/c,M=s.height/d;return{width:I,height:M,top:k,right:T+I,bottom:k+M,left:T,x:T,y:k}}function vw(e){var t=Fh(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function KA(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&yw(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ea(e){return zo(e).getComputedStyle(e)}function A$(e){return["table","td","th"].indexOf(Ys(e))>=0}function $l(e){return((ju(e)?e.ownerDocument:e.document)||window.document).documentElement}function Hv(e){return Ys(e)==="html"?e:e.assignedSlot||e.parentNode||(yw(e)?e.host:null)||$l(e)}function ZT(e){return!Qo(e)||Ea(e).position==="fixed"?null:e.offsetParent}function M$(e){var t=/firefox/i.test(Cb()),n=/Trident/i.test(Cb());if(n&&Qo(e)){var s=Ea(e);if(s.position==="fixed")return null}var c=Hv(e);for(yw(c)&&(c=c.host);Qo(c)&&["html","body"].indexOf(Ys(c))<0;){var d=Ea(c);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return c;c=c.parentNode}return null}function Nf(e){for(var t=zo(e),n=ZT(e);n&&A$(n)&&Ea(n).position==="static";)n=ZT(n);return n&&(Ys(n)==="html"||Ys(n)==="body"&&Ea(n).position==="static")?t:n||M$(e)||t}function _w(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Fp(e,t,n){return Ru(e,Iy(t,n))}function R$(e,t,n){var s=Fp(e,t,n);return s>n?n:s}function XA(){return{top:0,right:0,bottom:0,left:0}}function YA(e){return Object.assign({},XA(),e)}function JA(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var z$=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,YA(typeof t!="number"?t:JA(t,$f))};function L$(e){var t,n=e.state,s=e.name,c=e.options,d=n.elements.arrow,p=n.modifiersData.popperOffsets,l=qs(n.placement),b=_w(l),T=[co,is].indexOf(l)>=0,k=T?"height":"width";if(!(!d||!p)){var I=z$(c.padding,n),M=vw(d),D=b==="y"?uo:co,H=b==="y"?rs:is,q=n.rects.reference[k]+n.rects.reference[b]-p[b]-n.rects.popper[k],J=p[b]-n.rects.reference[b],$=Nf(d),V=$?b==="y"?$.clientHeight||0:$.clientWidth||0:0,B=q/2-J/2,G=I[D],ne=V-M[k]-I[H],re=V/2-M[k]/2+B,ae=Fp(G,re,ne),he=b;n.modifiersData[s]=(t={},t[he]=ae,t.centerOffset=ae-re,t)}}function D$(e){var t=e.state,n=e.options,s=n.element,c=s===void 0?"[data-popper-arrow]":s;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||KA(t.elements.popper,c)&&(t.elements.arrow=c))}const O$={name:"arrow",enabled:!0,phase:"main",fn:L$,effect:D$,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Bh(e){return e.split("-")[1]}var F$={top:"auto",right:"auto",bottom:"auto",left:"auto"};function B$(e,t){var n=e.x,s=e.y,c=t.devicePixelRatio||1;return{x:Oh(n*c)/c||0,y:Oh(s*c)/c||0}}function KT(e){var t,n=e.popper,s=e.popperRect,c=e.placement,d=e.variation,p=e.offsets,l=e.position,b=e.gpuAcceleration,T=e.adaptive,k=e.roundOffsets,I=e.isFixed,M=p.x,D=M===void 0?0:M,H=p.y,q=H===void 0?0:H,J=typeof k=="function"?k({x:D,y:q}):{x:D,y:q};D=J.x,q=J.y;var $=p.hasOwnProperty("x"),V=p.hasOwnProperty("y"),B=co,G=uo,ne=window;if(T){var re=Nf(n),ae="clientHeight",he="clientWidth";if(re===zo(n)&&(re=$l(n),Ea(re).position!=="static"&&l==="absolute"&&(ae="scrollHeight",he="scrollWidth")),re=re,c===uo||(c===co||c===is)&&d===vf){G=rs;var Me=I&&re===ne&&ne.visualViewport?ne.visualViewport.height:re[ae];q-=Me-s.height,q*=b?1:-1}if(c===co||(c===uo||c===rs)&&d===vf){B=is;var Ee=I&&re===ne&&ne.visualViewport?ne.visualViewport.width:re[he];D-=Ee-s.width,D*=b?1:-1}}var Re=Object.assign({position:l},T&&F$),K=k===!0?B$({x:D,y:q},zo(n)):{x:D,y:q};if(D=K.x,q=K.y,b){var be;return Object.assign({},Re,(be={},be[G]=V?"0":"",be[B]=$?"0":"",be.transform=(ne.devicePixelRatio||1)<=1?"translate("+D+"px, "+q+"px)":"translate3d("+D+"px, "+q+"px, 0)",be))}return Object.assign({},Re,(t={},t[G]=V?q+"px":"",t[B]=$?D+"px":"",t.transform="",t))}function $$(e){var t=e.state,n=e.options,s=n.gpuAcceleration,c=s===void 0?!0:s,d=n.adaptive,p=d===void 0?!0:d,l=n.roundOffsets,b=l===void 0?!0:l,T={placement:qs(t.placement),variation:Bh(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,KT(Object.assign({},T,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:p,roundOffsets:b})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,KT(Object.assign({},T,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const N$={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$$,data:{}};var pg={passive:!0};function V$(e){var t=e.state,n=e.instance,s=e.options,c=s.scroll,d=c===void 0?!0:c,p=s.resize,l=p===void 0?!0:p,b=zo(t.elements.popper),T=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&T.forEach(function(k){k.addEventListener("scroll",n.update,pg)}),l&&b.addEventListener("resize",n.update,pg),function(){d&&T.forEach(function(k){k.removeEventListener("scroll",n.update,pg)}),l&&b.removeEventListener("resize",n.update,pg)}}const j$={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:V$,data:{}};var U$={left:"right",right:"left",bottom:"top",top:"bottom"};function qg(e){return e.replace(/left|right|bottom|top/g,function(t){return U$[t]})}var W$={start:"end",end:"start"};function XT(e){return e.replace(/start|end/g,function(t){return W$[t]})}function xw(e){var t=zo(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function bw(e){return Fh($l(e)).left+xw(e).scrollLeft}function H$(e,t){var n=zo(e),s=$l(e),c=n.visualViewport,d=s.clientWidth,p=s.clientHeight,l=0,b=0;if(c){d=c.width,p=c.height;var T=ZA();(T||!T&&t==="fixed")&&(l=c.offsetLeft,b=c.offsetTop)}return{width:d,height:p,x:l+bw(e),y:b}}function q$(e){var t,n=$l(e),s=xw(e),c=(t=e.ownerDocument)==null?void 0:t.body,d=Ru(n.scrollWidth,n.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),p=Ru(n.scrollHeight,n.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),l=-s.scrollLeft+bw(e),b=-s.scrollTop;return Ea(c||n).direction==="rtl"&&(l+=Ru(n.clientWidth,c?c.clientWidth:0)-d),{width:d,height:p,x:l,y:b}}function ww(e){var t=Ea(e),n=t.overflow,s=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+c+s)}function QA(e){return["html","body","#document"].indexOf(Ys(e))>=0?e.ownerDocument.body:Qo(e)&&ww(e)?e:QA(Hv(e))}function Bp(e,t){var n;t===void 0&&(t=[]);var s=QA(e),c=s===((n=e.ownerDocument)==null?void 0:n.body),d=zo(s),p=c?[d].concat(d.visualViewport||[],ww(s)?s:[]):s,l=t.concat(p);return c?l:l.concat(Bp(Hv(p)))}function Tb(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function G$(e,t){var n=Fh(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function YT(e,t,n){return t===qA?Tb(H$(e,n)):ju(t)?G$(t,n):Tb(q$($l(e)))}function Z$(e){var t=Bp(Hv(e)),n=["absolute","fixed"].indexOf(Ea(e).position)>=0,s=n&&Qo(e)?Nf(e):e;return ju(s)?t.filter(function(c){return ju(c)&&KA(c,s)&&Ys(c)!=="body"}):[]}function K$(e,t,n,s){var c=t==="clippingParents"?Z$(e):[].concat(t),d=[].concat(c,[n]),p=d[0],l=d.reduce(function(b,T){var k=YT(e,T,s);return b.top=Ru(k.top,b.top),b.right=Iy(k.right,b.right),b.bottom=Iy(k.bottom,b.bottom),b.left=Ru(k.left,b.left),b},YT(e,p,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function eM(e){var t=e.reference,n=e.element,s=e.placement,c=s?qs(s):null,d=s?Bh(s):null,p=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,b;switch(c){case uo:b={x:p,y:t.y-n.height};break;case rs:b={x:p,y:t.y+t.height};break;case is:b={x:t.x+t.width,y:l};break;case co:b={x:t.x-n.width,y:l};break;default:b={x:t.x,y:t.y}}var T=c?_w(c):null;if(T!=null){var k=T==="y"?"height":"width";switch(d){case Dh:b[T]=b[T]-(t[k]/2-n[k]/2);break;case vf:b[T]=b[T]+(t[k]/2-n[k]/2);break}}return b}function _f(e,t){t===void 0&&(t={});var n=t,s=n.placement,c=s===void 0?e.placement:s,d=n.strategy,p=d===void 0?e.strategy:d,l=n.boundary,b=l===void 0?m$:l,T=n.rootBoundary,k=T===void 0?qA:T,I=n.elementContext,M=I===void 0?dp:I,D=n.altBoundary,H=D===void 0?!1:D,q=n.padding,J=q===void 0?0:q,$=YA(typeof J!="number"?J:JA(J,$f)),V=M===dp?g$:dp,B=e.rects.popper,G=e.elements[H?V:M],ne=K$(ju(G)?G:G.contextElement||$l(e.elements.popper),b,k,p),re=Fh(e.elements.reference),ae=eM({reference:re,element:B,placement:c}),he=Tb(Object.assign({},B,ae)),Me=M===dp?he:re,Ee={top:ne.top-Me.top+$.top,bottom:Me.bottom-ne.bottom+$.bottom,left:ne.left-Me.left+$.left,right:Me.right-ne.right+$.right},Re=e.modifiersData.offset;if(M===dp&&Re){var K=Re[c];Object.keys(Ee).forEach(function(be){var _e=[is,rs].indexOf(be)>=0?1:-1,ze=[uo,rs].indexOf(be)>=0?"y":"x";Ee[be]+=K[ze]*_e})}return Ee}function X$(e,t){t===void 0&&(t={});var n=t,s=n.placement,c=n.boundary,d=n.rootBoundary,p=n.padding,l=n.flipVariations,b=n.allowedAutoPlacements,T=b===void 0?GA:b,k=Bh(s),I=k?l?GT:GT.filter(function(H){return Bh(H)===k}):$f,M=I.filter(function(H){return T.indexOf(H)>=0});M.length===0&&(M=I);var D=M.reduce(function(H,q){return H[q]=_f(e,{placement:q,boundary:c,rootBoundary:d,padding:p})[qs(q)],H},{});return Object.keys(D).sort(function(H,q){return D[H]-D[q]})}function Y$(e){if(qs(e)===gw)return[];var t=qg(e);return[XT(e),t,XT(t)]}function J$(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var c=n.mainAxis,d=c===void 0?!0:c,p=n.altAxis,l=p===void 0?!0:p,b=n.fallbackPlacements,T=n.padding,k=n.boundary,I=n.rootBoundary,M=n.altBoundary,D=n.flipVariations,H=D===void 0?!0:D,q=n.allowedAutoPlacements,J=t.options.placement,$=qs(J),V=$===J,B=b||(V||!H?[qg(J)]:Y$(J)),G=[J].concat(B).reduce(function(Vt,tt){return Vt.concat(qs(tt)===gw?X$(t,{placement:tt,boundary:k,rootBoundary:I,padding:T,flipVariations:H,allowedAutoPlacements:q}):tt)},[]),ne=t.rects.reference,re=t.rects.popper,ae=new Map,he=!0,Me=G[0],Ee=0;Ee<G.length;Ee++){var Re=G[Ee],K=qs(Re),be=Bh(Re)===Dh,_e=[uo,rs].indexOf(K)>=0,ze=_e?"width":"height",Te=_f(t,{placement:Re,boundary:k,rootBoundary:I,altBoundary:M,padding:T}),Ue=_e?be?is:co:be?rs:uo;ne[ze]>re[ze]&&(Ue=qg(Ue));var Le=qg(Ue),Oe=[];if(d&&Oe.push(Te[K]<=0),l&&Oe.push(Te[Ue]<=0,Te[Le]<=0),Oe.every(function(Vt){return Vt})){Me=Re,he=!1;break}ae.set(Re,Oe)}if(he)for(var Xe=H?3:1,Ye=function(tt){var Qe=G.find(function(kt){var Xt=ae.get(kt);if(Xt)return Xt.slice(0,tt).every(function(jt){return jt})});if(Qe)return Me=Qe,"break"},ut=Xe;ut>0;ut--){var Kt=Ye(ut);if(Kt==="break")break}t.placement!==Me&&(t.modifiersData[s]._skip=!0,t.placement=Me,t.reset=!0)}}const Q$={name:"flip",enabled:!0,phase:"main",fn:J$,requiresIfExists:["offset"],data:{_skip:!1}};function JT(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function QT(e){return[uo,is,rs,co].some(function(t){return e[t]>=0})}function eN(e){var t=e.state,n=e.name,s=t.rects.reference,c=t.rects.popper,d=t.modifiersData.preventOverflow,p=_f(t,{elementContext:"reference"}),l=_f(t,{altBoundary:!0}),b=JT(p,s),T=JT(l,c,d),k=QT(b),I=QT(T);t.modifiersData[n]={referenceClippingOffsets:b,popperEscapeOffsets:T,isReferenceHidden:k,hasPopperEscaped:I},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":k,"data-popper-escaped":I})}const tN={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:eN};function nN(e,t,n){var s=qs(e),c=[co,uo].indexOf(s)>=0?-1:1,d=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,p=d[0],l=d[1];return p=p||0,l=(l||0)*c,[co,is].indexOf(s)>=0?{x:l,y:p}:{x:p,y:l}}function rN(e){var t=e.state,n=e.options,s=e.name,c=n.offset,d=c===void 0?[0,0]:c,p=GA.reduce(function(k,I){return k[I]=nN(I,t.rects,d),k},{}),l=p[t.placement],b=l.x,T=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=b,t.modifiersData.popperOffsets.y+=T),t.modifiersData[s]=p}const iN={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:rN};function oN(e){var t=e.state,n=e.name;t.modifiersData[n]=eM({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const sN={name:"popperOffsets",enabled:!0,phase:"read",fn:oN,data:{}};function aN(e){return e==="x"?"y":"x"}function lN(e){var t=e.state,n=e.options,s=e.name,c=n.mainAxis,d=c===void 0?!0:c,p=n.altAxis,l=p===void 0?!1:p,b=n.boundary,T=n.rootBoundary,k=n.altBoundary,I=n.padding,M=n.tether,D=M===void 0?!0:M,H=n.tetherOffset,q=H===void 0?0:H,J=_f(t,{boundary:b,rootBoundary:T,padding:I,altBoundary:k}),$=qs(t.placement),V=Bh(t.placement),B=!V,G=_w($),ne=aN(G),re=t.modifiersData.popperOffsets,ae=t.rects.reference,he=t.rects.popper,Me=typeof q=="function"?q(Object.assign({},t.rects,{placement:t.placement})):q,Ee=typeof Me=="number"?{mainAxis:Me,altAxis:Me}:Object.assign({mainAxis:0,altAxis:0},Me),Re=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,K={x:0,y:0};if(re){if(d){var be,_e=G==="y"?uo:co,ze=G==="y"?rs:is,Te=G==="y"?"height":"width",Ue=re[G],Le=Ue+J[_e],Oe=Ue-J[ze],Xe=D?-he[Te]/2:0,Ye=V===Dh?ae[Te]:he[Te],ut=V===Dh?-he[Te]:-ae[Te],Kt=t.elements.arrow,Vt=D&&Kt?vw(Kt):{width:0,height:0},tt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:XA(),Qe=tt[_e],kt=tt[ze],Xt=Fp(0,ae[Te],Vt[Te]),jt=B?ae[Te]/2-Xe-Xt-Qe-Ee.mainAxis:Ye-Xt-Qe-Ee.mainAxis,bt=B?-ae[Te]/2+Xe+Xt+kt+Ee.mainAxis:ut+Xt+kt+Ee.mainAxis,Qt=t.elements.arrow&&Nf(t.elements.arrow),Ot=Qt?G==="y"?Qt.clientTop||0:Qt.clientLeft||0:0,Ut=(be=Re==null?void 0:Re[G])!=null?be:0,Wt=Ue+jt-Ut-Ot,mn=Ue+bt-Ut,Ce=Fp(D?Iy(Le,Wt):Le,Ue,D?Ru(Oe,mn):Oe);re[G]=Ce,K[G]=Ce-Ue}if(l){var un,mt=G==="x"?uo:co,Yt=G==="x"?rs:is,yt=re[ne],gn=ne==="y"?"height":"width",Ct=yt+J[mt],Rn=yt-J[Yt],bn=[uo,co].indexOf($)!==-1,qe=(un=Re==null?void 0:Re[ne])!=null?un:0,nt=bn?Ct:yt-ae[gn]-he[gn]-qe+Ee.altAxis,It=bn?yt+ae[gn]+he[gn]-qe-Ee.altAxis:Rn,Ve=D&&bn?R$(nt,yt,It):Fp(D?nt:Ct,yt,D?It:Rn);re[ne]=Ve,K[ne]=Ve-yt}t.modifiersData[s]=K}}const uN={name:"preventOverflow",enabled:!0,phase:"main",fn:lN,requiresIfExists:["offset"]};function cN(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function hN(e){return e===zo(e)||!Qo(e)?xw(e):cN(e)}function dN(e){var t=e.getBoundingClientRect(),n=Oh(t.width)/e.offsetWidth||1,s=Oh(t.height)/e.offsetHeight||1;return n!==1||s!==1}function pN(e,t,n){n===void 0&&(n=!1);var s=Qo(t),c=Qo(t)&&dN(t),d=$l(t),p=Fh(e,c,n),l={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(s||!s&&!n)&&((Ys(t)!=="body"||ww(d))&&(l=hN(t)),Qo(t)?(b=Fh(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):d&&(b.x=bw(d))),{x:p.left+l.scrollLeft-b.x,y:p.top+l.scrollTop-b.y,width:p.width,height:p.height}}function fN(e){var t=new Map,n=new Set,s=[];e.forEach(function(d){t.set(d.name,d)});function c(d){n.add(d.name);var p=[].concat(d.requires||[],d.requiresIfExists||[]);p.forEach(function(l){if(!n.has(l)){var b=t.get(l);b&&c(b)}}),s.push(d)}return e.forEach(function(d){n.has(d.name)||c(d)}),s}function mN(e){var t=fN(e);return P$.reduce(function(n,s){return n.concat(t.filter(function(c){return c.phase===s}))},[])}function gN(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function yN(e){var t=e.reduce(function(n,s){var c=n[s.name];return n[s.name]=c?Object.assign({},c,s,{options:Object.assign({},c.options,s.options),data:Object.assign({},c.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var eP={placement:"bottom",modifiers:[],strategy:"absolute"};function tP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function vN(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,c=t.defaultOptions,d=c===void 0?eP:c;return function(l,b,T){T===void 0&&(T=d);var k={placement:"bottom",orderedModifiers:[],options:Object.assign({},eP,d),modifiersData:{},elements:{reference:l,popper:b},attributes:{},styles:{}},I=[],M=!1,D={state:k,setOptions:function($){var V=typeof $=="function"?$(k.options):$;q(),k.options=Object.assign({},d,k.options,V),k.scrollParents={reference:ju(l)?Bp(l):l.contextElement?Bp(l.contextElement):[],popper:Bp(b)};var B=mN(yN([].concat(s,k.options.modifiers)));return k.orderedModifiers=B.filter(function(G){return G.enabled}),H(),D.update()},forceUpdate:function(){if(!M){var $=k.elements,V=$.reference,B=$.popper;if(tP(V,B)){k.rects={reference:pN(V,Nf(B),k.options.strategy==="fixed"),popper:vw(B)},k.reset=!1,k.placement=k.options.placement,k.orderedModifiers.forEach(function(Ee){return k.modifiersData[Ee.name]=Object.assign({},Ee.data)});for(var G=0;G<k.orderedModifiers.length;G++){if(k.reset===!0){k.reset=!1,G=-1;continue}var ne=k.orderedModifiers[G],re=ne.fn,ae=ne.options,he=ae===void 0?{}:ae,Me=ne.name;typeof re=="function"&&(k=re({state:k,options:he,name:Me,instance:D})||k)}}}},update:gN(function(){return new Promise(function(J){D.forceUpdate(),J(k)})}),destroy:function(){q(),M=!0}};if(!tP(l,b))return D;D.setOptions(T).then(function(J){!M&&T.onFirstUpdate&&T.onFirstUpdate(J)});function H(){k.orderedModifiers.forEach(function(J){var $=J.name,V=J.options,B=V===void 0?{}:V,G=J.effect;if(typeof G=="function"){var ne=G({state:k,name:$,instance:D,options:B}),re=function(){};I.push(ne||re)}})}function q(){I.forEach(function(J){return J()}),I=[]}return D}}var _N=[j$,sN,N$,I$,iN,Q$,uN,O$,tN],xN=vN({defaultModifiers:_N});function Ds(e){var I;const{elementType:t,externalSlotProps:n,ownerState:s,skipResolvingSlotProps:c=!1,...d}=e,p=c?{}:WA(n,s),{props:l,internalRef:b}=HA({...d,externalSlotProps:p}),T=Gr(b,p==null?void 0:p.ref,(I=e.additionalProps)==null?void 0:I.ref);return UA(t,{...l,ref:T},s)}function Hh(e){var t;return parseInt(W.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function bN(e){return typeof e=="function"?e():e}const tM=W.forwardRef(function(t,n){const{children:s,container:c,disablePortal:d=!1}=t,[p,l]=W.useState(null),b=Gr(W.isValidElement(s)?Hh(s):null,n);if(Xs(()=>{d||l(bN(c)||document.body)},[c,d]),Xs(()=>{if(p&&!d)return yb(n,p),()=>{yb(n,null)}},[n,p,d]),d){if(W.isValidElement(s)){const T={ref:b};return W.cloneElement(s,T)}return s}return p&&Mf.createPortal(s,p)});function wN(e){return An("MuiPopper",e)}Pn("MuiPopper",["root"]);function SN(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function Pb(e){return typeof e=="function"?e():e}function CN(e){return e.nodeType!==void 0}const TN=e=>{const{classes:t}=e;return Mn({root:["root"]},wN,t)},PN={},kN=W.forwardRef(function(t,n){const{anchorEl:s,children:c,direction:d,disablePortal:p,modifiers:l,open:b,placement:T,popperOptions:k,popperRef:I,slotProps:M={},slots:D={},TransitionProps:H,ownerState:q,...J}=t,$=W.useRef(null),V=Gr($,n),B=W.useRef(null),G=Gr(B,I),ne=W.useRef(G);Xs(()=>{ne.current=G},[G]),W.useImperativeHandle(I,()=>B.current,[]);const re=SN(T,d),[ae,he]=W.useState(re),[Me,Ee]=W.useState(Pb(s));W.useEffect(()=>{B.current&&B.current.forceUpdate()}),W.useEffect(()=>{s&&Ee(Pb(s))},[s]),Xs(()=>{if(!Me||!b)return;const ze=Le=>{he(Le.placement)};let Te=[{name:"preventOverflow",options:{altBoundary:p}},{name:"flip",options:{altBoundary:p}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Le})=>{ze(Le)}}];l!=null&&(Te=Te.concat(l)),k&&k.modifiers!=null&&(Te=Te.concat(k.modifiers));const Ue=xN(Me,$.current,{placement:re,...k,modifiers:Te});return ne.current(Ue),()=>{Ue.destroy(),ne.current(null)}},[Me,p,l,b,k,re]);const Re={placement:ae};H!==null&&(Re.TransitionProps=H);const K=TN(t),be=D.root??"div",_e=Ds({elementType:be,externalSlotProps:M.root,externalForwardedProps:J,additionalProps:{role:"tooltip",ref:V},ownerState:t,className:K.root});return ye.jsx(be,{..._e,children:typeof c=="function"?c(Re):c})}),EN=W.forwardRef(function(t,n){const{anchorEl:s,children:c,container:d,direction:p="ltr",disablePortal:l=!1,keepMounted:b=!1,modifiers:T,open:k,placement:I="bottom",popperOptions:M=PN,popperRef:D,style:H,transition:q=!1,slotProps:J={},slots:$={},...V}=t,[B,G]=W.useState(!0),ne=()=>{G(!1)},re=()=>{G(!0)};if(!b&&!k&&(!q||B))return null;let ae;if(d)ae=d;else if(s){const Ee=Pb(s);ae=Ee&&CN(Ee)?wi(Ee).body:wi(null).body}const he=!k&&b&&(!q||B)?"none":void 0,Me=q?{in:k,onEnter:ne,onExited:re}:void 0;return ye.jsx(tM,{disablePortal:l,container:ae,children:ye.jsx(kN,{anchorEl:s,direction:p,disablePortal:l,modifiers:T,ref:n,open:q?!B:k,placement:I,popperOptions:M,popperRef:D,slotProps:J,slots:$,...V,style:{position:"fixed",top:0,left:0,display:he,...H},TransitionProps:Me,children:c})})}),IN=ft(EN,{name:"MuiPopper",slot:"Root"})({}),qv=W.forwardRef(function(t,n){const s=Nv(),c=zn({props:t,name:"MuiPopper"}),{anchorEl:d,component:p,components:l,componentsProps:b,container:T,disablePortal:k,keepMounted:I,modifiers:M,open:D,placement:H,popperOptions:q,popperRef:J,transition:$,slots:V,slotProps:B,...G}=c,ne=(V==null?void 0:V.root)??(l==null?void 0:l.Root),re={anchorEl:d,container:T,disablePortal:k,keepMounted:I,modifiers:M,open:D,placement:H,popperOptions:q,popperRef:J,transition:$,...G};return ye.jsx(IN,{as:p,direction:s?"rtl":"ltr",slots:{root:ne},slotProps:B??b,...re,ref:n})});function AN(e){return An("MuiListSubheader",e)}Pn("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const MN=e=>{const{classes:t,color:n,disableGutters:s,inset:c,disableSticky:d}=e,p={root:["root",n!=="default"&&`color${gt(n)}`,!s&&"gutters",c&&"inset",!d&&"sticky"]};return Mn(p,AN,t)},RN=ft("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${gt(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(xn(({theme:e})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(e.vars||e).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:72}},{props:({ownerState:t})=>!t.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper}}]}))),kb=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiListSubheader"}),{className:c,color:d="default",component:p="li",disableGutters:l=!1,disableSticky:b=!1,inset:T=!1,...k}=s,I={...s,color:d,component:p,disableGutters:l,disableSticky:b,inset:T},M=MN(I);return ye.jsx(RN,{as:p,className:Zt(M.root,c),ref:n,ownerState:I,...k})});kb&&(kb.muiSkipListHighlight=!0);const zN=ws(ye.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function LN(e){return An("MuiChip",e)}const Ln=Pn("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),DN=e=>{const{classes:t,disabled:n,size:s,color:c,iconColor:d,onDelete:p,clickable:l,variant:b}=e,T={root:["root",b,n&&"disabled",`size${gt(s)}`,`color${gt(c)}`,l&&"clickable",l&&`clickableColor${gt(c)}`,p&&"deletable",p&&`deletableColor${gt(c)}`,`${b}${gt(c)}`],label:["label",`label${gt(s)}`],avatar:["avatar",`avatar${gt(s)}`,`avatarColor${gt(c)}`],icon:["icon",`icon${gt(s)}`,`iconColor${gt(d)}`],deleteIcon:["deleteIcon",`deleteIcon${gt(s)}`,`deleteIconColor${gt(c)}`,`deleteIcon${gt(b)}Color${gt(c)}`]};return Mn(T,LN,t)},ON=ft("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:s,iconColor:c,clickable:d,onDelete:p,size:l,variant:b}=n;return[{[`& .${Ln.avatar}`]:t.avatar},{[`& .${Ln.avatar}`]:t[`avatar${gt(l)}`]},{[`& .${Ln.avatar}`]:t[`avatarColor${gt(s)}`]},{[`& .${Ln.icon}`]:t.icon},{[`& .${Ln.icon}`]:t[`icon${gt(l)}`]},{[`& .${Ln.icon}`]:t[`iconColor${gt(c)}`]},{[`& .${Ln.deleteIcon}`]:t.deleteIcon},{[`& .${Ln.deleteIcon}`]:t[`deleteIcon${gt(l)}`]},{[`& .${Ln.deleteIcon}`]:t[`deleteIconColor${gt(s)}`]},{[`& .${Ln.deleteIcon}`]:t[`deleteIcon${gt(b)}Color${gt(s)}`]},t.root,t[`size${gt(l)}`],t[`color${gt(s)}`],d&&t.clickable,d&&s!=="default"&&t[`clickableColor${gt(s)})`],p&&t.deletable,p&&s!=="default"&&t[`deletableColor${gt(s)}`],t[b],t[`${b}${gt(s)}`]]}})(xn(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Ln.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Ln.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${Ln.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Ln.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Ln.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Ln.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Ln.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.alpha((e.vars||e).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.alpha((e.vars||e).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Ln.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Ln.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(li(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText,[`& .${Ln.deleteIcon}`]:{color:e.alpha((e.vars||e).palette[n].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${Ln.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${Ln.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Ln.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}}},...Object.entries(e.palette).filter(li(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${Ln.focusVisible}`]:{background:(e.vars||e).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`)},[`&.${Ln.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(li(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${Ln.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Ln.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Ln.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Ln.avatar}`]:{marginLeft:4},[`& .${Ln.avatarSmall}`]:{marginLeft:2},[`& .${Ln.icon}`]:{marginLeft:4},[`& .${Ln.iconSmall}`]:{marginLeft:2},[`& .${Ln.deleteIcon}`]:{marginRight:5},[`& .${Ln.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(li()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(e.vars||e).palette[n].main,border:`1px solid ${e.alpha((e.vars||e).palette[n].main,.7)}`,[`&.${Ln.clickable}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)},[`&.${Ln.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.focusOpacity)},[`& .${Ln.deleteIcon}`]:{color:e.alpha((e.vars||e).palette[n].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].main}}}}))]}})),FN=ft("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:s}=n;return[t.label,t[`label${gt(s)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function nP(e){return e.key==="Backspace"||e.key==="Delete"}const BN=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiChip"}),{avatar:c,className:d,clickable:p,color:l="default",component:b,deleteIcon:T,disabled:k=!1,icon:I,label:M,onClick:D,onDelete:H,onKeyDown:q,onKeyUp:J,size:$="medium",variant:V="filled",tabIndex:B,skipFocusWhenDisabled:G=!1,slots:ne={},slotProps:re={},...ae}=s,he=W.useRef(null),Me=Gr(he,n),Ee=Qe=>{Qe.stopPropagation(),H&&H(Qe)},Re=Qe=>{Qe.currentTarget===Qe.target&&nP(Qe)&&Qe.preventDefault(),q&&q(Qe)},K=Qe=>{Qe.currentTarget===Qe.target&&H&&nP(Qe)&&H(Qe),J&&J(Qe)},be=p!==!1&&D?!0:p,_e=be||H?yf:b||"div",ze={...s,component:_e,disabled:k,size:$,color:l,iconColor:W.isValidElement(I)&&I.props.color||l,onDelete:!!H,clickable:be,variant:V},Te=DN(ze),Ue=_e===yf?{component:b||"div",focusVisibleClassName:Te.focusVisible,...H&&{disableRipple:!0}}:{};let Le=null;H&&(Le=T&&W.isValidElement(T)?W.cloneElement(T,{className:Zt(T.props.className,Te.deleteIcon),onClick:Ee}):ye.jsx(zN,{className:Te.deleteIcon,onClick:Ee}));let Oe=null;c&&W.isValidElement(c)&&(Oe=W.cloneElement(c,{className:Zt(Te.avatar,c.props.className)}));let Xe=null;I&&W.isValidElement(I)&&(Xe=W.cloneElement(I,{className:Zt(Te.icon,I.props.className)}));const Ye={slots:ne,slotProps:re},[ut,Kt]=er("root",{elementType:ON,externalForwardedProps:{...Ye,...ae},ownerState:ze,shouldForwardComponentProp:!0,ref:Me,className:Zt(Te.root,d),additionalProps:{disabled:be&&k?!0:void 0,tabIndex:G&&k?-1:B,...Ue},getSlotProps:Qe=>({...Qe,onClick:kt=>{var Xt;(Xt=Qe.onClick)==null||Xt.call(Qe,kt),D==null||D(kt)},onKeyDown:kt=>{var Xt;(Xt=Qe.onKeyDown)==null||Xt.call(Qe,kt),Re(kt)},onKeyUp:kt=>{var Xt;(Xt=Qe.onKeyUp)==null||Xt.call(Qe,kt),K(kt)}})}),[Vt,tt]=er("label",{elementType:FN,externalForwardedProps:Ye,ownerState:ze,className:Te.label});return ye.jsxs(ut,{as:_e,...Kt,children:[Oe||Xe,ye.jsx(Vt,{...tt,children:M}),Le]})});function fg(e){return parseInt(e,10)||0}const $N={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function NN(e){for(const t in e)return!1;return!0}function rP(e){return NN(e)||e.outerHeightStyle===0&&!e.overflowing}const VN=W.forwardRef(function(t,n){const{onChange:s,maxRows:c,minRows:d=1,style:p,value:l,...b}=t,{current:T}=W.useRef(l!=null),k=W.useRef(null),I=Gr(n,k),M=W.useRef(null),D=W.useRef(null),H=W.useCallback(()=>{const B=k.current,G=D.current;if(!B||!G)return;const re=ka(B).getComputedStyle(B);if(re.width==="0px")return{outerHeightStyle:0,overflowing:!1};G.style.width=re.width,G.value=B.value||t.placeholder||"x",G.value.slice(-1)===`
`&&(G.value+=" ");const ae=re.boxSizing,he=fg(re.paddingBottom)+fg(re.paddingTop),Me=fg(re.borderBottomWidth)+fg(re.borderTopWidth),Ee=G.scrollHeight;G.value="x";const Re=G.scrollHeight;let K=Ee;d&&(K=Math.max(Number(d)*Re,K)),c&&(K=Math.min(Number(c)*Re,K)),K=Math.max(K,Re);const be=K+(ae==="border-box"?he+Me:0),_e=Math.abs(K-Ee)<=1;return{outerHeightStyle:be,overflowing:_e}},[c,d,t.placeholder]),q=Oi(()=>{const B=k.current,G=H();if(!B||!G||rP(G))return!1;const ne=G.outerHeightStyle;return M.current!=null&&M.current!==ne}),J=W.useCallback(()=>{const B=k.current,G=H();if(!B||!G||rP(G))return;const ne=G.outerHeightStyle;M.current!==ne&&(M.current=ne,B.style.height=`${ne}px`),B.style.overflow=G.overflowing?"hidden":""},[H]),$=W.useRef(-1);Xs(()=>{const B=FA(J),G=k==null?void 0:k.current;if(!G)return;const ne=ka(G);ne.addEventListener("resize",B);let re;return typeof ResizeObserver<"u"&&(re=new ResizeObserver(()=>{q()&&(re.unobserve(G),cancelAnimationFrame($.current),J(),$.current=requestAnimationFrame(()=>{re.observe(G)}))}),re.observe(G)),()=>{B.clear(),cancelAnimationFrame($.current),ne.removeEventListener("resize",B),re&&re.disconnect()}},[H,J,q]),Xs(()=>{J()});const V=B=>{T||J();const G=B.target,ne=G.value.length,re=G.value.endsWith(`
`),ae=G.selectionStart===ne;re&&ae&&G.setSelectionRange(ne,ne),s&&s(B)};return ye.jsxs(W.Fragment,{children:[ye.jsx("textarea",{value:l,onChange:V,ref:I,rows:d,style:p,...b}),ye.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:D,tabIndex:-1,style:{...$N.shadow,...p,paddingTop:0,paddingBottom:0}})]})});function qu({props:e,states:t,muiFormControl:n}){return t.reduce((s,c)=>(s[c]=e[c],n&&typeof e[c]>"u"&&(s[c]=n[c]),s),{})}const Sw=W.createContext(void 0);function Nl(){return W.useContext(Sw)}function iP(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Ay(e,t=!1){return e&&(iP(e.value)&&e.value!==""||t&&iP(e.defaultValue)&&e.defaultValue!=="")}function jN(e){return e.startAdornment}function UN(e){return An("MuiInputBase",e)}const Po=Pn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var oP;const Gv=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${gt(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Zv=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},WN=e=>{const{classes:t,color:n,disabled:s,error:c,endAdornment:d,focused:p,formControl:l,fullWidth:b,hiddenLabel:T,multiline:k,readOnly:I,size:M,startAdornment:D,type:H}=e,q={root:["root",`color${gt(n)}`,s&&"disabled",c&&"error",b&&"fullWidth",p&&"focused",l&&"formControl",M&&M!=="medium"&&`size${gt(M)}`,k&&"multiline",D&&"adornedStart",d&&"adornedEnd",T&&"hiddenLabel",I&&"readOnly"],input:["input",s&&"disabled",H==="search"&&"inputTypeSearch",k&&"inputMultiline",M==="small"&&"inputSizeSmall",T&&"inputHiddenLabel",D&&"inputAdornedStart",d&&"inputAdornedEnd",I&&"readOnly"]};return Mn(q,UN,t)},Kv=ft("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Gv})(xn(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Po.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),Xv=ft("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Zv})(xn(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},s={opacity:"0 !important"},c=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Po.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":c,"&:focus::-moz-placeholder":c,"&:focus::-ms-input-placeholder":c},[`&.${Po.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:d})=>!d.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:d})=>d.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),sP=h4({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Cw=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiInputBase"}),{"aria-describedby":c,autoComplete:d,autoFocus:p,className:l,color:b,components:T={},componentsProps:k={},defaultValue:I,disabled:M,disableInjectingGlobalStyles:D,endAdornment:H,error:q,fullWidth:J=!1,id:$,inputComponent:V="input",inputProps:B={},inputRef:G,margin:ne,maxRows:re,minRows:ae,multiline:he=!1,name:Me,onBlur:Ee,onChange:Re,onClick:K,onFocus:be,onKeyDown:_e,onKeyUp:ze,placeholder:Te,readOnly:Ue,renderSuffix:Le,rows:Oe,size:Xe,slotProps:Ye={},slots:ut={},startAdornment:Kt,type:Vt="text",value:tt,...Qe}=s,kt=B.value!=null?B.value:tt,{current:Xt}=W.useRef(kt!=null),jt=W.useRef(),bt=W.useCallback(ot=>{},[]),Qt=Gr(jt,G,B.ref,bt),[Ot,Ut]=W.useState(!1),Wt=Nl(),mn=qu({props:s,muiFormControl:Wt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});mn.focused=Wt?Wt.focused:Ot,W.useEffect(()=>{!Wt&&M&&Ot&&(Ut(!1),Ee&&Ee())},[Wt,M,Ot,Ee]);const Ce=Wt&&Wt.onFilled,un=Wt&&Wt.onEmpty,mt=W.useCallback(ot=>{Ay(ot)?Ce&&Ce():un&&un()},[Ce,un]);Xs(()=>{Xt&&mt({value:kt})},[kt,mt,Xt]);const Yt=ot=>{be&&be(ot),B.onFocus&&B.onFocus(ot),Wt&&Wt.onFocus?Wt.onFocus(ot):Ut(!0)},yt=ot=>{Ee&&Ee(ot),B.onBlur&&B.onBlur(ot),Wt&&Wt.onBlur?Wt.onBlur(ot):Ut(!1)},gn=(ot,...hn)=>{if(!Xt){const He=ot.target||jt.current;if(He==null)throw new Error(Pa(1));mt({value:He.value})}B.onChange&&B.onChange(ot,...hn),Re&&Re(ot,...hn)};W.useEffect(()=>{mt(jt.current)},[]);const Ct=ot=>{jt.current&&ot.currentTarget===ot.target&&jt.current.focus(),K&&K(ot)};let Rn=V,bn=B;he&&Rn==="input"&&(Oe?bn={type:void 0,minRows:Oe,maxRows:Oe,...bn}:bn={type:void 0,maxRows:re,minRows:ae,...bn},Rn=VN);const qe=ot=>{mt(ot.animationName==="mui-auto-fill-cancel"?jt.current:{value:"x"})};W.useEffect(()=>{Wt&&Wt.setAdornedStart(!!Kt)},[Wt,Kt]);const nt={...s,color:mn.color||"primary",disabled:mn.disabled,endAdornment:H,error:mn.error,focused:mn.focused,formControl:Wt,fullWidth:J,hiddenLabel:mn.hiddenLabel,multiline:he,size:mn.size,startAdornment:Kt,type:Vt},It=WN(nt),Ve=ut.root||T.Root||Kv,nn=Ye.root||k.root||{},it=ut.input||T.Input||Xv;return bn={...bn,...Ye.input??k.input},ye.jsxs(W.Fragment,{children:[!D&&typeof sP=="function"&&(oP||(oP=ye.jsx(sP,{}))),ye.jsxs(Ve,{...nn,ref:n,onClick:Ct,...Qe,...!Hs(Ve)&&{ownerState:{...nt,...nn.ownerState}},className:Zt(It.root,nn.className,l,Ue&&"MuiInputBase-readOnly"),children:[Kt,ye.jsx(Sw.Provider,{value:null,children:ye.jsx(it,{"aria-invalid":mn.error,"aria-describedby":c,autoComplete:d,autoFocus:p,defaultValue:I,disabled:mn.disabled,id:$,onAnimationStart:qe,name:Me,placeholder:Te,readOnly:Ue,required:mn.required,rows:Oe,value:kt,onKeyDown:_e,onKeyUp:ze,type:Vt,...bn,...!Hs(it)&&{as:Rn,ownerState:{...nt,...bn.ownerState}},ref:Qt,className:Zt(It.input,bn.className,Ue&&"MuiInputBase-readOnly"),onBlur:yt,onChange:gn,onFocus:Yt})}),H,Le?Le({...mn,startAdornment:Kt}):null]})]})});function HN(e){return An("MuiInput",e)}const vl={...Po,...Pn("MuiInput",["root","underline","input"])};function qN(e){return An("MuiOutlinedInput",e)}const Wo={...Po,...Pn("MuiOutlinedInput",["root","notchedOutline","input"])};function GN(e){return An("MuiFilledInput",e)}const ko={...Po,...Pn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},nM=ws(ye.jsx("path",{d:"M7 10l5 5 5-5z"}));function ZN(e){return An("MuiAutocomplete",e)}const In=Pn("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var aP,lP;const KN=e=>{const{classes:t,disablePortal:n,expanded:s,focused:c,fullWidth:d,hasClearIcon:p,hasPopupIcon:l,inputFocused:b,popupOpen:T,size:k}=e,I={root:["root",s&&"expanded",c&&"focused",d&&"fullWidth",p&&"hasClearIcon",l&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",b&&"inputFocused"],tag:["tag",`tagSize${gt(k)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",T&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return Mn(I,ZN,t)},XN=ft("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:s,hasClearIcon:c,hasPopupIcon:d,inputFocused:p,size:l}=n;return[{[`& .${In.tag}`]:t.tag},{[`& .${In.tag}`]:t[`tagSize${gt(l)}`]},{[`& .${In.inputRoot}`]:t.inputRoot},{[`& .${In.input}`]:t.input},{[`& .${In.input}`]:p&&t.inputFocused},t.root,s&&t.fullWidth,d&&t.hasPopupIcon,c&&t.hasClearIcon]}})({[`&.${In.focused} .${In.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${In.clearIndicator}`]:{visibility:"visible"}},[`& .${In.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${In.inputRoot}`]:{[`.${In.hasPopupIcon}&, .${In.hasClearIcon}&`]:{paddingRight:30},[`.${In.hasPopupIcon}.${In.hasClearIcon}&`]:{paddingRight:56},[`& .${In.input}`]:{width:0,minWidth:30}},[`& .${vl.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${vl.root}.${Po.sizeSmall}`]:{[`& .${vl.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Wo.root}`]:{padding:9,[`.${In.hasPopupIcon}&, .${In.hasClearIcon}&`]:{paddingRight:39},[`.${In.hasPopupIcon}.${In.hasClearIcon}&`]:{paddingRight:65},[`& .${In.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${In.endAdornment}`]:{right:9}},[`& .${Wo.root}.${Po.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${In.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${ko.root}`]:{paddingTop:19,paddingLeft:8,[`.${In.hasPopupIcon}&, .${In.hasClearIcon}&`]:{paddingRight:39},[`.${In.hasPopupIcon}.${In.hasClearIcon}&`]:{paddingRight:65},[`& .${ko.input}`]:{padding:"7px 4px"},[`& .${In.endAdornment}`]:{right:9}},[`& .${ko.root}.${Po.sizeSmall}`]:{paddingBottom:1,[`& .${ko.input}`]:{padding:"2.5px 4px"}},[`& .${Po.hiddenLabel}`]:{paddingTop:8},[`& .${ko.root}.${Po.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${In.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${ko.root}.${Po.hiddenLabel}.${Po.sizeSmall}`]:{[`& .${In.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${In.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${In.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${In.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${In.inputRoot}`]:{flexWrap:"wrap"}}}]}),YN=ft("div",{name:"MuiAutocomplete",slot:"EndAdornment"})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),JN=ft(mw,{name:"MuiAutocomplete",slot:"ClearIndicator"})({marginRight:-2,padding:4,visibility:"hidden"}),QN=ft(mw,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),e6=ft(qv,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${In.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(xn(({theme:e})=>({zIndex:(e.vars||e).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),t6=ft(Wv,{name:"MuiAutocomplete",slot:"Paper"})(xn(({theme:e})=>({...e.typography.body1,overflow:"auto"}))),n6=ft("div",{name:"MuiAutocomplete",slot:"Loading"})(xn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),r6=ft("div",{name:"MuiAutocomplete",slot:"NoOptions"})(xn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),i6=ft("ul",{name:"MuiAutocomplete",slot:"Listbox"})(xn(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${In.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${In.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${In.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${In.focused}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${In.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}}}}))),o6=ft(kb,{name:"MuiAutocomplete",slot:"GroupLabel"})(xn(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8}))),s6=ft("ul",{name:"MuiAutocomplete",slot:"GroupUl"})({padding:0,[`& .${In.option}`]:{paddingLeft:24}}),uP=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiAutocomplete"}),{autoComplete:c=!1,autoHighlight:d=!1,autoSelect:p=!1,blurOnSelect:l=!1,ChipProps:b,className:T,clearIcon:k=aP||(aP=ye.jsx(r$,{fontSize:"small"})),clearOnBlur:I=!s.freeSolo,clearOnEscape:M=!1,clearText:D="Clear",closeText:H="Close",componentsProps:q,defaultValue:J=s.multiple?[]:null,disableClearable:$=!1,disableCloseOnSelect:V=!1,disabled:B=!1,disabledItemsFocusable:G=!1,disableListWrap:ne=!1,disablePortal:re=!1,filterOptions:ae,filterSelectedOptions:he=!1,forcePopupIcon:Me="auto",freeSolo:Ee=!1,fullWidth:Re=!1,getLimitTagsText:K=vn=>`+${vn}`,getOptionDisabled:be,getOptionKey:_e,getOptionLabel:ze,isOptionEqualToValue:Te,groupBy:Ue,handleHomeEndKeys:Le=!s.freeSolo,id:Oe,includeInputInList:Xe=!1,inputValue:Ye,limitTags:ut=-1,ListboxComponent:Kt,ListboxProps:Vt,loading:tt=!1,loadingText:Qe="Loading…",multiple:kt=!1,noOptionsText:Xt="No options",onChange:jt,onClose:bt,onHighlightChange:Qt,onInputChange:Ot,onOpen:Ut,open:Wt,openOnFocus:mn=!1,openText:Ce="Open",options:un,PaperComponent:mt,PopperComponent:Yt,popupIcon:yt=lP||(lP=ye.jsx(nM,{})),readOnly:gn=!1,renderGroup:Ct,renderInput:Rn,renderOption:bn,renderTags:qe,renderValue:nt,selectOnFocus:It=!s.freeSolo,size:Ve="medium",slots:nn={},slotProps:it={},value:ot,...hn}=s,{getRootProps:He,getInputProps:vt,getInputLabelProps:zt,getPopupIndicatorProps:Bn,getClearProps:Nn,getItemProps:qt,getListboxProps:At,getOptionProps:pn,value:Cn,dirty:cn,expanded:se,id:U,popupOpen:j,focused:Q,focusedItem:ie,anchorEl:ge,setAnchorEl:we,inputValue:Ie,groupedOptions:me}=f$({...s,componentName:"Autocomplete"}),$e=!$&&!B&&cn&&!gn,Ze=(!Ee||Me===!0)&&Me!==!1,{onMouseDown:Fe}=vt(),{ref:rt,...Lt}=At(),wn=ze||(vn=>vn.label??vn),Ft={...s,disablePortal:re,expanded:se,focused:Q,fullWidth:Re,getOptionLabel:wn,hasClearIcon:$e,hasPopupIcon:Ze,inputFocused:ie===-1,popupOpen:j,size:Ve},rn=KN(Ft),dn={slots:{paper:mt,popper:Yt,...nn},slotProps:{chip:b,listbox:Vt,...q,...it}},[cr,Un]=er("listbox",{elementType:i6,externalForwardedProps:dn,ownerState:Ft,className:rn.listbox,additionalProps:Lt,ref:rt}),[fn,Be]=er("paper",{elementType:Wv,externalForwardedProps:dn,ownerState:Ft,className:rn.paper}),[Ne,ht]=er("popper",{elementType:qv,externalForwardedProps:dn,ownerState:Ft,className:rn.popper,additionalProps:{disablePortal:re,style:{width:ge?ge.clientWidth:null},role:"presentation",anchorEl:ge,open:j}});let $t;const Jt=vn=>({className:rn.tag,disabled:B,...qt(vn)});if(kt?Cn.length>0&&(qe?$t=qe(Cn,Jt,Ft):nt?$t=nt(Cn,Jt,Ft):$t=Cn.map((vn,gr)=>{const{key:pi,...$i}=Jt({index:gr});return ye.jsx(BN,{label:wn(vn),size:Ve,...$i,...dn.slotProps.chip},pi)})):nt&&Cn!=null&&($t=nt(Cn,Jt,Ft)),ut>-1&&Array.isArray($t)){const vn=$t.length-ut;!Q&&vn>0&&($t=$t.splice(0,ut),$t.push(ye.jsx("span",{className:rn.tag,children:K(vn)},$t.length)))}const on=Ct||(vn=>ye.jsxs("li",{children:[ye.jsx(o6,{className:rn.groupLabel,ownerState:Ft,component:"div",children:vn.group}),ye.jsx(s6,{className:rn.groupUl,ownerState:Ft,children:vn.children})]},vn.key)),Ss=bn||((vn,gr)=>{const{key:pi,...$i}=vn;return ye.jsx("li",{...$i,children:wn(gr)},pi)}),Jr=(vn,gr)=>{const pi=pn({option:vn,index:gr});return Ss({...pi,className:rn.option},vn,{selected:pi["aria-selected"],index:gr,inputValue:Ie},Ft)},Nr=dn.slotProps.clearIndicator,za=dn.slotProps.popupIndicator;return ye.jsxs(W.Fragment,{children:[ye.jsx(XN,{ref:n,className:Zt(rn.root,T),ownerState:Ft,...He(hn),children:Rn({id:U,disabled:B,fullWidth:!0,size:Ve==="small"?"small":void 0,InputLabelProps:zt(),InputProps:{ref:we,className:rn.inputRoot,startAdornment:$t,onMouseDown:vn=>{vn.target===vn.currentTarget&&Fe(vn)},...($e||Ze)&&{endAdornment:ye.jsxs(YN,{className:rn.endAdornment,ownerState:Ft,children:[$e?ye.jsx(JN,{...Nn(),"aria-label":D,title:D,ownerState:Ft,...Nr,className:Zt(rn.clearIndicator,Nr==null?void 0:Nr.className),children:k}):null,Ze?ye.jsx(QN,{...Bn(),disabled:B,"aria-label":j?H:Ce,title:j?H:Ce,ownerState:Ft,...za,className:Zt(rn.popupIndicator,za==null?void 0:za.className),children:yt}):null]})}},inputProps:{className:rn.input,disabled:B,readOnly:gn,...vt()}})}),ge?ye.jsx(e6,{as:Ne,...ht,children:ye.jsxs(t6,{as:fn,...Be,children:[tt&&me.length===0?ye.jsx(n6,{className:rn.loading,ownerState:Ft,children:Qe}):null,me.length===0&&!Ee&&!tt?ye.jsx(r6,{className:rn.noOptions,ownerState:Ft,role:"presentation",onMouseDown:vn=>{vn.preventDefault()},children:Xt}):null,me.length>0?ye.jsx(cr,{as:Kt,...Un,children:me.map((vn,gr)=>Ue?on({key:vn.key,group:vn.group,children:vn.options.map((pi,$i)=>Jr(pi,vn.index+$i))}):Jr(vn,gr))}):null]})}):null]})}),a6={entering:{opacity:1},entered:{opacity:1}},l6=W.forwardRef(function(t,n){const s=Vv(),c={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:d,appear:p=!0,children:l,easing:b,in:T,onEnter:k,onEntered:I,onEntering:M,onExit:D,onExited:H,onExiting:q,style:J,timeout:$=c,TransitionComponent:V=Js,...B}=t,G=W.useRef(null),ne=Gr(G,Hh(l),n),re=_e=>ze=>{if(_e){const Te=G.current;ze===void 0?_e(Te):_e(Te,ze)}},ae=re(M),he=re((_e,ze)=>{jA(_e);const Te=ky({style:J,timeout:$,easing:b},{mode:"enter"});_e.style.webkitTransition=s.transitions.create("opacity",Te),_e.style.transition=s.transitions.create("opacity",Te),k&&k(_e,ze)}),Me=re(I),Ee=re(q),Re=re(_e=>{const ze=ky({style:J,timeout:$,easing:b},{mode:"exit"});_e.style.webkitTransition=s.transitions.create("opacity",ze),_e.style.transition=s.transitions.create("opacity",ze),D&&D(_e)}),K=re(H),be=_e=>{d&&d(G.current,_e)};return ye.jsx(V,{appear:p,in:T,nodeRef:G,onEnter:he,onEntered:Me,onEntering:ae,onExit:Re,onExited:K,onExiting:Ee,addEndListener:be,timeout:$,...B,children:(_e,{ownerState:ze,...Te})=>W.cloneElement(l,{style:{opacity:0,visibility:_e==="exited"&&!T?"hidden":void 0,...a6[_e],...J,...l.props.style},ref:ne,...Te})})});function u6(e){return An("MuiBackdrop",e)}Pn("MuiBackdrop",["root","invisible"]);const c6=e=>{const{classes:t,invisible:n}=e;return Mn({root:["root",n&&"invisible"]},u6,t)},h6=ft("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),d6=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiBackdrop"}),{children:c,className:d,component:p="div",invisible:l=!1,open:b,components:T={},componentsProps:k={},slotProps:I={},slots:M={},TransitionComponent:D,transitionDuration:H,...q}=s,J={...s,component:p,invisible:l},$=c6(J),V={transition:D,root:T.Root,...M},B={...k,...I},G={component:p,slots:V,slotProps:B},[ne,re]=er("root",{elementType:h6,externalForwardedProps:G,className:Zt($.root,d),ownerState:J}),[ae,he]=er("transition",{elementType:l6,externalForwardedProps:G,ownerState:J});return ye.jsx(ae,{in:b,timeout:H,...q,...he,children:ye.jsx(ne,{"aria-hidden":!0,...re,classes:$,ref:n,children:c})})}),p6=Pn("MuiBox",["root"]),f6=OA(),m6=YB({themeId:nv,defaultTheme:f6,defaultClassName:p6.root,generateClassName:CA.generate});function g6(e){return W.Children.toArray(e).filter(t=>W.isValidElement(t))}function y6(e){return An("MuiCard",e)}Pn("MuiCard",["root"]);const v6=e=>{const{classes:t}=e;return Mn({root:["root"]},y6,t)},_6=ft(Wv,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),x6=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiCard"}),{className:c,raised:d=!1,...p}=s,l={...s,raised:d},b=v6(l);return ye.jsx(_6,{className:Zt(b.root,c),elevation:d?8:void 0,ref:n,ownerState:l,...p})});function b6(e){return An("MuiCardContent",e)}Pn("MuiCardContent",["root"]);const w6=e=>{const{classes:t}=e;return Mn({root:["root"]},b6,t)},S6=ft("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),C6=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiCardContent"}),{className:c,component:d="div",...p}=s,l={...s,component:d},b=w6(l);return ye.jsx(S6,{as:d,className:Zt(b.root,c),ownerState:l,ref:n,...p})});function T6(e){return An("PrivateSwitchBase",e)}Pn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const P6=e=>{const{classes:t,checked:n,disabled:s,edge:c}=e,d={root:["root",n&&"checked",s&&"disabled",c&&`edge${gt(c)}`],input:["input"]};return Mn(d,T6,t)},k6=ft(yf,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),E6=ft("input",{name:"MuiSwitchBase",shouldForwardProp:as})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),I6=W.forwardRef(function(t,n){const{autoFocus:s,checked:c,checkedIcon:d,defaultChecked:p,disabled:l,disableFocusRipple:b=!1,edge:T=!1,icon:k,id:I,inputProps:M,inputRef:D,name:H,onBlur:q,onChange:J,onFocus:$,readOnly:V,required:B=!1,tabIndex:G,type:ne,value:re,slots:ae={},slotProps:he={},...Me}=t,[Ee,Re]=Al({controlled:c,default:!!p,name:"SwitchBase",state:"checked"}),K=Nl(),be=tt=>{$&&$(tt),K&&K.onFocus&&K.onFocus(tt)},_e=tt=>{q&&q(tt),K&&K.onBlur&&K.onBlur(tt)},ze=tt=>{if(tt.nativeEvent.defaultPrevented)return;const Qe=tt.target.checked;Re(Qe),J&&J(tt,Qe)};let Te=l;K&&typeof Te>"u"&&(Te=K.disabled);const Ue=ne==="checkbox"||ne==="radio",Le={...t,checked:Ee,disabled:Te,disableFocusRipple:b,edge:T},Oe=P6(Le),Xe={slots:ae,slotProps:{input:M,...he}},[Ye,ut]=er("root",{ref:n,elementType:k6,className:Oe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Xe,component:"span",...Me},getSlotProps:tt=>({...tt,onFocus:Qe=>{var kt;(kt=tt.onFocus)==null||kt.call(tt,Qe),be(Qe)},onBlur:Qe=>{var kt;(kt=tt.onBlur)==null||kt.call(tt,Qe),_e(Qe)}}),ownerState:Le,additionalProps:{centerRipple:!0,focusRipple:!b,disabled:Te,role:void 0,tabIndex:null}}),[Kt,Vt]=er("input",{ref:D,elementType:E6,className:Oe.input,externalForwardedProps:Xe,getSlotProps:tt=>({...tt,onChange:Qe=>{var kt;(kt=tt.onChange)==null||kt.call(tt,Qe),ze(Qe)}}),ownerState:Le,additionalProps:{autoFocus:s,checked:c,defaultChecked:p,disabled:Te,id:Ue?I:void 0,name:H,readOnly:V,required:B,tabIndex:G,type:ne,...ne==="checkbox"&&re===void 0?{}:{value:re}}});return ye.jsxs(Ye,{...ut,children:[ye.jsx(Kt,{...Vt}),Ee?d:k]})}),A6=ws(ye.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),M6=ws(ye.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),R6=ws(ye.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function z6(e){return An("MuiCheckbox",e)}const Gx=Pn("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),L6=e=>{const{classes:t,indeterminate:n,color:s,size:c}=e,d={root:["root",n&&"indeterminate",`color${gt(s)}`,`size${gt(c)}`]},p=Mn(d,z6,t);return{...t,...p}},D6=ft(I6,{shouldForwardProp:e=>as(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${gt(n.size)}`],n.color!=="default"&&t[`color${gt(n.color)}`]]}})(xn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t},style:{[`&.${Gx.checked}, &.${Gx.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${Gx.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),O6=ye.jsx(M6,{}),F6=ye.jsx(A6,{}),B6=ye.jsx(R6,{}),$6=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiCheckbox"}),{checkedIcon:c=O6,color:d="primary",icon:p=F6,indeterminate:l=!1,indeterminateIcon:b=B6,inputProps:T,size:k="medium",disableRipple:I=!1,className:M,slots:D={},slotProps:H={},...q}=s,J=l?b:p,$=l?b:c,V={...s,disableRipple:I,color:d,indeterminate:l,size:k},B=L6(V),G=H.input??T,[ne,re]=er("root",{ref:n,elementType:D6,className:Zt(B.root,M),shouldForwardComponentProp:!0,externalForwardedProps:{slots:D,slotProps:H,...q},ownerState:V,additionalProps:{type:"checkbox",icon:W.cloneElement(J,{fontSize:J.props.fontSize??k}),checkedIcon:W.cloneElement($,{fontSize:$.props.fontSize??k}),disableRipple:I,slots:D,slotProps:{input:BA(typeof G=="function"?G(V):G,{"data-indeterminate":l})}}});return ye.jsx(ne,{...re,classes:B})});function rM(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function N6(e){const t=wi(e);return t.body===e?ka(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function $p(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function cP(e){return parseInt(ka(e).getComputedStyle(e).paddingRight,10)||0}function V6(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),s=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||s}function hP(e,t,n,s,c){const d=[t,n,...s];[].forEach.call(e.children,p=>{const l=!d.includes(p),b=!V6(p);l&&b&&$p(p,c)})}function Zx(e,t){let n=-1;return e.some((s,c)=>t(s)?(n=c,!0):!1),n}function j6(e,t){const n=[],s=e.container;if(!t.disableScrollLock){if(N6(s)){const p=rM(ka(s));n.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${cP(s)+p}px`;const l=wi(s).querySelectorAll(".mui-fixed");[].forEach.call(l,b=>{n.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${cP(b)+p}px`})}let d;if(s.parentNode instanceof DocumentFragment)d=wi(s).body;else{const p=s.parentElement,l=ka(s);d=(p==null?void 0:p.nodeName)==="HTML"&&l.getComputedStyle(p).overflowY==="scroll"?p:s}n.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{n.forEach(({value:d,el:p,property:l})=>{d?p.style.setProperty(l,d):p.style.removeProperty(l)})}}function U6(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class W6{constructor(){this.modals=[],this.containers=[]}add(t,n){let s=this.modals.indexOf(t);if(s!==-1)return s;s=this.modals.length,this.modals.push(t),t.modalRef&&$p(t.modalRef,!1);const c=U6(n);hP(n,t.mount,t.modalRef,c,!0);const d=Zx(this.containers,p=>p.container===n);return d!==-1?(this.containers[d].modals.push(t),s):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:c}),s)}mount(t,n){const s=Zx(this.containers,d=>d.modals.includes(t)),c=this.containers[s];c.restore||(c.restore=j6(c,n))}remove(t,n=!0){const s=this.modals.indexOf(t);if(s===-1)return s;const c=Zx(this.containers,p=>p.modals.includes(t)),d=this.containers[c];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(s,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&$p(t.modalRef,n),hP(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(c,1);else{const p=d.modals[d.modals.length-1];p.modalRef&&$p(p.modalRef,!1)}return s}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const H6=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function q6(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function G6(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=s=>e.ownerDocument.querySelector(`input[type="radio"]${s}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function Z6(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||G6(e))}function K6(e){const t=[],n=[];return Array.from(e.querySelectorAll(H6)).forEach((s,c)=>{const d=q6(s);d===-1||!Z6(s)||(d===0?t.push(s):n.push({documentOrder:c,tabIndex:d,node:s}))}),n.sort((s,c)=>s.tabIndex===c.tabIndex?s.documentOrder-c.documentOrder:s.tabIndex-c.tabIndex).map(s=>s.node).concat(t)}function X6(){return!0}function Y6(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:s=!1,disableRestoreFocus:c=!1,getTabbable:d=K6,isEnabled:p=X6,open:l}=e,b=W.useRef(!1),T=W.useRef(null),k=W.useRef(null),I=W.useRef(null),M=W.useRef(null),D=W.useRef(!1),H=W.useRef(null),q=Gr(Hh(t),H),J=W.useRef(null);W.useEffect(()=>{!l||!H.current||(D.current=!n)},[n,l]),W.useEffect(()=>{if(!l||!H.current)return;const B=wi(H.current);return H.current.contains(B.activeElement)||(H.current.hasAttribute("tabIndex")||H.current.setAttribute("tabIndex","-1"),D.current&&H.current.focus()),()=>{c||(I.current&&I.current.focus&&(b.current=!0,I.current.focus()),I.current=null)}},[l]),W.useEffect(()=>{if(!l||!H.current)return;const B=wi(H.current),G=ae=>{J.current=ae,!(s||!p()||ae.key!=="Tab")&&B.activeElement===H.current&&ae.shiftKey&&(b.current=!0,k.current&&k.current.focus())},ne=()=>{var Me,Ee;const ae=H.current;if(ae===null)return;if(!B.hasFocus()||!p()||b.current){b.current=!1;return}if(ae.contains(B.activeElement)||s&&B.activeElement!==T.current&&B.activeElement!==k.current)return;if(B.activeElement!==M.current)M.current=null;else if(M.current!==null)return;if(!D.current)return;let he=[];if((B.activeElement===T.current||B.activeElement===k.current)&&(he=d(H.current)),he.length>0){const Re=!!((Me=J.current)!=null&&Me.shiftKey&&((Ee=J.current)==null?void 0:Ee.key)==="Tab"),K=he[0],be=he[he.length-1];typeof K!="string"&&typeof be!="string"&&(Re?be.focus():K.focus())}else ae.focus()};B.addEventListener("focusin",ne),B.addEventListener("keydown",G,!0);const re=setInterval(()=>{B.activeElement&&B.activeElement.tagName==="BODY"&&ne()},50);return()=>{clearInterval(re),B.removeEventListener("focusin",ne),B.removeEventListener("keydown",G,!0)}},[n,s,c,p,l,d]);const $=B=>{I.current===null&&(I.current=B.relatedTarget),D.current=!0,M.current=B.target;const G=t.props.onFocus;G&&G(B)},V=B=>{I.current===null&&(I.current=B.relatedTarget),D.current=!0};return ye.jsxs(W.Fragment,{children:[ye.jsx("div",{tabIndex:l?0:-1,onFocus:V,ref:T,"data-testid":"sentinelStart"}),W.cloneElement(t,{ref:q,onFocus:$}),ye.jsx("div",{tabIndex:l?0:-1,onFocus:V,ref:k,"data-testid":"sentinelEnd"})]})}function J6(e){return typeof e=="function"?e():e}function Q6(e){return e?e.props.hasOwnProperty("in"):!1}const dP=()=>{},mg=new W6;function eV(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:s=!1,closeAfterTransition:c=!1,onTransitionEnter:d,onTransitionExited:p,children:l,onClose:b,open:T,rootRef:k}=e,I=W.useRef({}),M=W.useRef(null),D=W.useRef(null),H=Gr(D,k),[q,J]=W.useState(!T),$=Q6(l);let V=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(V=!1);const B=()=>wi(M.current),G=()=>(I.current.modalRef=D.current,I.current.mount=M.current,I.current),ne=()=>{mg.mount(G(),{disableScrollLock:s}),D.current&&(D.current.scrollTop=0)},re=Oi(()=>{const ze=J6(t)||B().body;mg.add(G(),ze),D.current&&ne()}),ae=()=>mg.isTopModal(G()),he=Oi(ze=>{M.current=ze,ze&&(T&&ae()?ne():D.current&&$p(D.current,V))}),Me=W.useCallback(()=>{mg.remove(G(),V)},[V]);W.useEffect(()=>()=>{Me()},[Me]),W.useEffect(()=>{T?re():(!$||!c)&&Me()},[T,Me,$,c,re]);const Ee=ze=>Te=>{var Ue;(Ue=ze.onKeyDown)==null||Ue.call(ze,Te),!(Te.key!=="Escape"||Te.which===229||!ae())&&(n||(Te.stopPropagation(),b&&b(Te,"escapeKeyDown")))},Re=ze=>Te=>{var Ue;(Ue=ze.onClick)==null||Ue.call(ze,Te),Te.target===Te.currentTarget&&b&&b(Te,"backdropClick")};return{getRootProps:(ze={})=>{const Te=Op(e);delete Te.onTransitionEnter,delete Te.onTransitionExited;const Ue={...Te,...ze};return{role:"presentation",...Ue,onKeyDown:Ee(Ue),ref:H}},getBackdropProps:(ze={})=>{const Te=ze;return{"aria-hidden":!0,...Te,onClick:Re(Te),open:T}},getTransitionProps:()=>{const ze=()=>{J(!1),d&&d()},Te=()=>{J(!0),p&&p(),c&&Me()};return{onEnter:FT(ze,(l==null?void 0:l.props.onEnter)??dP),onExited:FT(Te,(l==null?void 0:l.props.onExited)??dP)}},rootRef:H,portalRef:he,isTopModal:ae,exited:q,hasTransition:$}}function tV(e){return An("MuiModal",e)}Pn("MuiModal",["root","hidden","backdrop"]);const nV=e=>{const{open:t,exited:n,classes:s}=e;return Mn({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},tV,s)},rV=ft("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(xn(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),iV=ft(d6,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),oV=W.forwardRef(function(t,n){const s=zn({name:"MuiModal",props:t}),{BackdropComponent:c=iV,BackdropProps:d,classes:p,className:l,closeAfterTransition:b=!1,children:T,container:k,component:I,components:M={},componentsProps:D={},disableAutoFocus:H=!1,disableEnforceFocus:q=!1,disableEscapeKeyDown:J=!1,disablePortal:$=!1,disableRestoreFocus:V=!1,disableScrollLock:B=!1,hideBackdrop:G=!1,keepMounted:ne=!1,onClose:re,onTransitionEnter:ae,onTransitionExited:he,open:Me,slotProps:Ee={},slots:Re={},theme:K,...be}=s,_e={...s,closeAfterTransition:b,disableAutoFocus:H,disableEnforceFocus:q,disableEscapeKeyDown:J,disablePortal:$,disableRestoreFocus:V,disableScrollLock:B,hideBackdrop:G,keepMounted:ne},{getRootProps:ze,getBackdropProps:Te,getTransitionProps:Ue,portalRef:Le,isTopModal:Oe,exited:Xe,hasTransition:Ye}=eV({..._e,rootRef:n}),ut={..._e,exited:Xe},Kt=nV(ut),Vt={};if(T.props.tabIndex===void 0&&(Vt.tabIndex="-1"),Ye){const{onEnter:bt,onExited:Qt}=Ue();Vt.onEnter=bt,Vt.onExited=Qt}const tt={slots:{root:M.Root,backdrop:M.Backdrop,...Re},slotProps:{...D,...Ee}},[Qe,kt]=er("root",{ref:n,elementType:rV,externalForwardedProps:{...tt,...be,component:I},getSlotProps:ze,ownerState:ut,className:Zt(l,Kt==null?void 0:Kt.root,!ut.open&&ut.exited&&(Kt==null?void 0:Kt.hidden))}),[Xt,jt]=er("backdrop",{ref:d==null?void 0:d.ref,elementType:c,externalForwardedProps:tt,shouldForwardComponentProp:!0,additionalProps:d,getSlotProps:bt=>Te({...bt,onClick:Qt=>{bt!=null&&bt.onClick&&bt.onClick(Qt)}}),className:Zt(d==null?void 0:d.className,Kt==null?void 0:Kt.backdrop),ownerState:ut});return!ne&&!Me&&(!Ye||Xe)?null:ye.jsx(tM,{ref:Le,container:k,disablePortal:$,children:ye.jsxs(Qe,{...kt,children:[!G&&c?ye.jsx(Xt,{...jt}):null,ye.jsx(Y6,{disableEnforceFocus:q,disableAutoFocus:H,disableRestoreFocus:V,isEnabled:Oe,open:Me,children:W.cloneElement(T,Vt)})]})})});function sV(e){return An("MuiDivider",e)}Pn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const aV=e=>{const{absolute:t,children:n,classes:s,flexItem:c,light:d,orientation:p,textAlign:l,variant:b}=e;return Mn({root:["root",t&&"absolute",b,d&&"light",p==="vertical"&&"vertical",c&&"flexItem",n&&"withChildren",n&&p==="vertical"&&"withChildrenVertical",l==="right"&&p!=="vertical"&&"textAlignRight",l==="left"&&p!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",p==="vertical"&&"wrapperVertical"]},sV,s)},lV=ft("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(xn(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),uV=ft("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(xn(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),My=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiDivider"}),{absolute:c=!1,children:d,className:p,orientation:l="horizontal",component:b=d||l==="vertical"?"div":"hr",flexItem:T=!1,light:k=!1,role:I=b!=="hr"?"separator":void 0,textAlign:M="center",variant:D="fullWidth",...H}=s,q={...s,absolute:c,component:b,flexItem:T,light:k,orientation:l,role:I,textAlign:M,variant:D},J=aV(q);return ye.jsx(lV,{as:b,className:Zt(J.root,p),role:I,ref:n,ownerState:q,"aria-orientation":I==="separator"&&(b!=="hr"||l==="vertical")?l:void 0,...H,children:d?ye.jsx(uV,{className:J.wrapper,ownerState:q,children:d}):null})});My&&(My.muiSkipListHighlight=!0);const cV=e=>{const{classes:t,disableUnderline:n,startAdornment:s,endAdornment:c,size:d,hiddenLabel:p,multiline:l}=e,b={root:["root",!n&&"underline",s&&"adornedStart",c&&"adornedEnd",d==="small"&&`size${gt(d)}`,p&&"hiddenLabel",l&&"multiline"],input:["input"]},T=Mn(b,GN,t);return{...t,...T}},hV=ft(Kv,{shouldForwardProp:e=>as(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Gv(e,t),!n.disableUnderline&&t.underline]}})(xn(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",c=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",d=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:c,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},[`&.${ko.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},[`&.${ko.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:d},variants:[{props:({ownerState:p})=>!p.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ko.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ko.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ko.disabled}, .${ko.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${ko.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(li()).map(([p])=>{var l;return{props:{disableUnderline:!1,color:p},style:{"&::after":{borderBottom:`2px solid ${(l=(e.vars||e).palette[p])==null?void 0:l.main}`}}}}),{props:({ownerState:p})=>p.startAdornment,style:{paddingLeft:12}},{props:({ownerState:p})=>p.endAdornment,style:{paddingRight:12}},{props:({ownerState:p})=>p.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:p,size:l})=>p.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:p})=>p.multiline&&p.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:p})=>p.multiline&&p.hiddenLabel&&p.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),dV=ft(Xv,{name:"MuiFilledInput",slot:"Input",overridesResolver:Zv})(xn(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),Tw=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiFilledInput"}),{disableUnderline:c=!1,components:d={},componentsProps:p,fullWidth:l=!1,hiddenLabel:b,inputComponent:T="input",multiline:k=!1,slotProps:I,slots:M={},type:D="text",...H}=s,q={...s,disableUnderline:c,fullWidth:l,inputComponent:T,multiline:k,type:D},J=cV(s),$={root:{ownerState:q},input:{ownerState:q}},V=I??p?ci($,I??p):$,B=M.root??d.Root??hV,G=M.input??d.Input??dV;return ye.jsx(Cw,{slots:{root:B,input:G},slotProps:V,fullWidth:l,inputComponent:T,multiline:k,ref:n,type:D,...H,classes:J})});Tw.muiName="Input";function pV(e){return An("MuiFormControl",e)}Pn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const fV=e=>{const{classes:t,margin:n,fullWidth:s}=e,c={root:["root",n!=="none"&&`margin${gt(n)}`,s&&"fullWidth"]};return Mn(c,pV,t)},mV=ft("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`margin${gt(n.margin)}`],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),gV=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiFormControl"}),{children:c,className:d,color:p="primary",component:l="div",disabled:b=!1,error:T=!1,focused:k,fullWidth:I=!1,hiddenLabel:M=!1,margin:D="none",required:H=!1,size:q="medium",variant:J="outlined",...$}=s,V={...s,color:p,component:l,disabled:b,error:T,fullWidth:I,hiddenLabel:M,margin:D,required:H,size:q,variant:J},B=fV(V),[G,ne]=W.useState(()=>{let ze=!1;return c&&W.Children.forEach(c,Te=>{if(!Hg(Te,["Input","Select"]))return;const Ue=Hg(Te,["Select"])?Te.props.input:Te;Ue&&jN(Ue.props)&&(ze=!0)}),ze}),[re,ae]=W.useState(()=>{let ze=!1;return c&&W.Children.forEach(c,Te=>{Hg(Te,["Input","Select"])&&(Ay(Te.props,!0)||Ay(Te.props.inputProps,!0))&&(ze=!0)}),ze}),[he,Me]=W.useState(!1);b&&he&&Me(!1);const Ee=k!==void 0&&!b?k:he;let Re;W.useRef(!1);const K=W.useCallback(()=>{ae(!0)},[]),be=W.useCallback(()=>{ae(!1)},[]),_e=W.useMemo(()=>({adornedStart:G,setAdornedStart:ne,color:p,disabled:b,error:T,filled:re,focused:Ee,fullWidth:I,hiddenLabel:M,size:q,onBlur:()=>{Me(!1)},onFocus:()=>{Me(!0)},onEmpty:be,onFilled:K,registerEffect:Re,required:H,variant:J}),[G,p,b,T,re,Ee,I,M,Re,be,K,H,q,J]);return ye.jsx(Sw.Provider,{value:_e,children:ye.jsx(mV,{as:l,ownerState:V,className:Zt(B.root,d),ref:n,...$,children:c})})});function yV(e){return An("MuiFormControlLabel",e)}const Cp=Pn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),vV=e=>{const{classes:t,disabled:n,labelPlacement:s,error:c,required:d}=e,p={root:["root",n&&"disabled",`labelPlacement${gt(s)}`,c&&"error",d&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",c&&"error"]};return Mn(p,yV,t)},_V=ft("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Cp.label}`]:t.label},t.root,t[`labelPlacement${gt(n.labelPlacement)}`]]}})(xn(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Cp.disabled}`]:{cursor:"default"},[`& .${Cp.label}`]:{[`&.${Cp.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),xV=ft("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(xn(({theme:e})=>({[`&.${Cp.error}`]:{color:(e.vars||e).palette.error.main}}))),bV=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiFormControlLabel"}),{checked:c,className:d,componentsProps:p={},control:l,disabled:b,disableTypography:T,inputRef:k,label:I,labelPlacement:M="end",name:D,onChange:H,required:q,slots:J={},slotProps:$={},value:V,...B}=s,G=Nl(),ne=b??l.props.disabled??(G==null?void 0:G.disabled),re=q??l.props.required,ae={disabled:ne,required:re};["checked","name","onChange","value","inputRef"].forEach(ze=>{typeof l.props[ze]>"u"&&typeof s[ze]<"u"&&(ae[ze]=s[ze])});const he=qu({props:s,muiFormControl:G,states:["error"]}),Me={...s,disabled:ne,labelPlacement:M,required:re,error:he.error},Ee=vV(Me),Re={slots:J,slotProps:{...p,...$}},[K,be]=er("typography",{elementType:Sb,externalForwardedProps:Re,ownerState:Me});let _e=I;return _e!=null&&_e.type!==Sb&&!T&&(_e=ye.jsx(K,{component:"span",...be,className:Zt(Ee.label,be==null?void 0:be.className),children:_e})),ye.jsxs(_V,{className:Zt(Ee.root,d),ownerState:Me,ref:n,...B,children:[W.cloneElement(l,ae),re?ye.jsxs("div",{children:[_e,ye.jsxs(xV,{ownerState:Me,"aria-hidden":!0,className:Ee.asterisk,children:[" ","*"]})]}):_e]})});function wV(e){return An("MuiFormHelperText",e)}const pP=Pn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var fP;const SV=e=>{const{classes:t,contained:n,size:s,disabled:c,error:d,filled:p,focused:l,required:b}=e,T={root:["root",c&&"disabled",d&&"error",s&&`size${gt(s)}`,n&&"contained",l&&"focused",p&&"filled",b&&"required"]};return Mn(T,wV,t)},CV=ft("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${gt(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(xn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${pP.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${pP.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),TV=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiFormHelperText"}),{children:c,className:d,component:p="p",disabled:l,error:b,filled:T,focused:k,margin:I,required:M,variant:D,...H}=s,q=Nl(),J=qu({props:s,muiFormControl:q,states:["variant","size","disabled","error","filled","focused","required"]}),$={...s,component:p,contained:J.variant==="filled"||J.variant==="outlined",variant:J.variant,size:J.size,disabled:J.disabled,error:J.error,filled:J.filled,focused:J.focused,required:J.required};delete $.ownerState;const V=SV($);return ye.jsx(CV,{as:p,className:Zt(V.root,d),ref:n,...H,ownerState:$,children:c===" "?fP||(fP=ye.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):c})});function PV(e){return An("MuiFormLabel",e)}const Np=Pn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),kV=e=>{const{classes:t,color:n,focused:s,disabled:c,error:d,filled:p,required:l}=e,b={root:["root",`color${gt(n)}`,c&&"disabled",d&&"error",p&&"filled",s&&"focused",l&&"required"],asterisk:["asterisk",d&&"error"]};return Mn(b,PV,t)},EV=ft("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color==="secondary"&&t.colorSecondary,n.filled&&t.filled]}})(xn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t},style:{[`&.${Np.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${Np.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Np.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),IV=ft("span",{name:"MuiFormLabel",slot:"Asterisk"})(xn(({theme:e})=>({[`&.${Np.error}`]:{color:(e.vars||e).palette.error.main}}))),AV=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiFormLabel"}),{children:c,className:d,color:p,component:l="label",disabled:b,error:T,filled:k,focused:I,required:M,...D}=s,H=Nl(),q=qu({props:s,muiFormControl:H,states:["color","required","focused","disabled","error","filled"]}),J={...s,color:q.color||"primary",component:l,disabled:q.disabled,error:q.error,filled:q.filled,focused:q.focused,required:q.required},$=kV(J);return ye.jsxs(EV,{as:l,ownerState:J,className:Zt($.root,d),ref:n,...D,children:[c,q.required&&ye.jsxs(IV,{ownerState:J,"aria-hidden":!0,className:$.asterisk,children:[" ","*"]})]})});function Eb(e){return`scale(${e}, ${e**2})`}const MV={entering:{opacity:1,transform:Eb(1)},entered:{opacity:1,transform:"none"}},Kx=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Ry=W.forwardRef(function(t,n){const{addEndListener:s,appear:c=!0,children:d,easing:p,in:l,onEnter:b,onEntered:T,onEntering:k,onExit:I,onExited:M,onExiting:D,style:H,timeout:q="auto",TransitionComponent:J=Js,...$}=t,V=uh(),B=W.useRef(),G=Vv(),ne=W.useRef(null),re=Gr(ne,Hh(d),n),ae=ze=>Te=>{if(ze){const Ue=ne.current;Te===void 0?ze(Ue):ze(Ue,Te)}},he=ae(k),Me=ae((ze,Te)=>{jA(ze);const{duration:Ue,delay:Le,easing:Oe}=ky({style:H,timeout:q,easing:p},{mode:"enter"});let Xe;q==="auto"?(Xe=G.transitions.getAutoHeightDuration(ze.clientHeight),B.current=Xe):Xe=Ue,ze.style.transition=[G.transitions.create("opacity",{duration:Xe,delay:Le}),G.transitions.create("transform",{duration:Kx?Xe:Xe*.666,delay:Le,easing:Oe})].join(","),b&&b(ze,Te)}),Ee=ae(T),Re=ae(D),K=ae(ze=>{const{duration:Te,delay:Ue,easing:Le}=ky({style:H,timeout:q,easing:p},{mode:"exit"});let Oe;q==="auto"?(Oe=G.transitions.getAutoHeightDuration(ze.clientHeight),B.current=Oe):Oe=Te,ze.style.transition=[G.transitions.create("opacity",{duration:Oe,delay:Ue}),G.transitions.create("transform",{duration:Kx?Oe:Oe*.666,delay:Kx?Ue:Ue||Oe*.333,easing:Le})].join(","),ze.style.opacity=0,ze.style.transform=Eb(.75),I&&I(ze)}),be=ae(M),_e=ze=>{q==="auto"&&V.start(B.current||0,ze),s&&s(ne.current,ze)};return ye.jsx(J,{appear:c,in:l,nodeRef:ne,onEnter:Me,onEntered:Ee,onEntering:he,onExit:K,onExited:be,onExiting:Re,addEndListener:_e,timeout:q==="auto"?null:q,...$,children:(ze,{ownerState:Te,...Ue})=>W.cloneElement(d,{style:{opacity:0,transform:Eb(.75),visibility:ze==="exited"&&!l?"hidden":void 0,...MV[ze],...H,...d.props.style},ref:re,...Ue})})});Ry&&(Ry.muiSupportAuto=!0);const RV=e=>{const{classes:t,disableUnderline:n}=e,c=Mn({root:["root",!n&&"underline"],input:["input"]},HN,t);return{...t,...c}},zV=ft(Kv,{shouldForwardProp:e=>as(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Gv(e,t),!n.disableUnderline&&t.underline]}})(xn(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:s})=>s.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:s})=>!s.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${vl.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${vl.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${vl.disabled}, .${vl.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${vl.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(li()).map(([s])=>({props:{color:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[s].main}`}}}))]}})),LV=ft(Xv,{name:"MuiInput",slot:"Input",overridesResolver:Zv})({}),Pw=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiInput"}),{disableUnderline:c=!1,components:d={},componentsProps:p,fullWidth:l=!1,inputComponent:b="input",multiline:T=!1,slotProps:k,slots:I={},type:M="text",...D}=s,H=RV(s),J={root:{ownerState:{disableUnderline:c}}},$=k??p?ci(k??p,J):J,V=I.root??d.Root??zV,B=I.input??d.Input??LV;return ye.jsx(Cw,{slots:{root:V,input:B},slotProps:$,fullWidth:l,inputComponent:b,multiline:T,ref:n,type:M,...D,classes:H})});Pw.muiName="Input";function DV(e){return An("MuiInputLabel",e)}Pn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const OV=e=>{const{classes:t,formControl:n,size:s,shrink:c,disableAnimation:d,variant:p,required:l}=e,b={root:["root",n&&"formControl",!d&&"animated",c&&"shrink",s&&s!=="medium"&&`size${gt(s)}`,p],asterisk:[l&&"asterisk"]},T=Mn(b,DV,t);return{...t,...T}},FV=ft(AV,{shouldForwardProp:e=>as(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Np.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(xn(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:s})=>t==="filled"&&n.shrink&&s==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),BV=W.forwardRef(function(t,n){const s=zn({name:"MuiInputLabel",props:t}),{disableAnimation:c=!1,margin:d,shrink:p,variant:l,className:b,...T}=s,k=Nl();let I=p;typeof I>"u"&&k&&(I=k.filled||k.focused||k.adornedStart);const M=qu({props:s,muiFormControl:k,states:["size","variant","required","focused"]}),D={...s,disableAnimation:c,formControl:k,shrink:I,size:M.size,variant:M.variant,required:M.required,focused:M.focused},H=OV(D);return ye.jsx(FV,{"data-shrink":I,ref:n,className:Zt(H.root,b),...T,ownerState:D,classes:H})}),Vp=W.createContext({});function $V(e){return An("MuiList",e)}Pn("MuiList",["root","padding","dense","subheader"]);const NV=e=>{const{classes:t,disablePadding:n,dense:s,subheader:c}=e;return Mn({root:["root",!n&&"padding",s&&"dense",c&&"subheader"]},$V,t)},VV=ft("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),jV=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiList"}),{children:c,className:d,component:p="ul",dense:l=!1,disablePadding:b=!1,subheader:T,...k}=s,I=W.useMemo(()=>({dense:l}),[l]),M={...s,component:p,dense:l,disablePadding:b},D=NV(M);return ye.jsx(Vp.Provider,{value:I,children:ye.jsxs(VV,{as:p,className:Zt(D.root,d),ref:n,ownerState:M,...k,children:[T,c]})})});function UV(e){return An("MuiListItem",e)}Pn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const WV=Pn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function HV(e){return An("MuiListItemSecondaryAction",e)}Pn("MuiListItemSecondaryAction",["root","disableGutters"]);const qV=e=>{const{disableGutters:t,classes:n}=e;return Mn({root:["root",t&&"disableGutters"]},HV,n)},GV=ft("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),iM=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiListItemSecondaryAction"}),{className:c,...d}=s,p=W.useContext(Vp),l={...s,disableGutters:p.disableGutters},b=qV(l);return ye.jsx(GV,{className:Zt(b.root,c),ownerState:l,ref:n,...d})});iM.muiName="ListItemSecondaryAction";const ZV=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]},KV=e=>{const{alignItems:t,classes:n,dense:s,disableGutters:c,disablePadding:d,divider:p,hasSecondaryAction:l}=e;return Mn({root:["root",s&&"dense",!c&&"gutters",!d&&"padding",p&&"divider",t==="flex-start"&&"alignItemsFlexStart",l&&"secondaryAction"],container:["container"]},UV,n)},XV=ft("div",{name:"MuiListItem",slot:"Root",overridesResolver:ZV})(xn(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${WV.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),YV=ft("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),jp=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiListItem"}),{alignItems:c="center",children:d,className:p,component:l,components:b={},componentsProps:T={},ContainerComponent:k="li",ContainerProps:{className:I,...M}={},dense:D=!1,disableGutters:H=!1,disablePadding:q=!1,divider:J=!1,secondaryAction:$,slotProps:V={},slots:B={},...G}=s,ne=W.useContext(Vp),re=W.useMemo(()=>({dense:D||ne.dense||!1,alignItems:c,disableGutters:H}),[c,ne.dense,D,H]),ae=W.useRef(null),he=W.Children.toArray(d),Me=he.length&&Hg(he[he.length-1],["ListItemSecondaryAction"]),Ee={...s,alignItems:c,dense:re.dense,disableGutters:H,disablePadding:q,divider:J,hasSecondaryAction:Me},Re=KV(Ee),K=Gr(ae,n),be=B.root||b.Root||XV,_e=V.root||T.root||{},ze={className:Zt(Re.root,_e.className,p),...G};let Te=l||"li";return Me?(Te=!ze.component&&!l?"div":Te,k==="li"&&(Te==="li"?Te="div":ze.component==="li"&&(ze.component="div")),ye.jsx(Vp.Provider,{value:re,children:ye.jsxs(YV,{as:k,className:Zt(Re.container,I),ref:K,ownerState:Ee,...M,children:[ye.jsx(be,{..._e,...!Hs(be)&&{as:Te,ownerState:{...Ee,..._e.ownerState}},...ze,children:he}),he.pop()]})})):ye.jsx(Vp.Provider,{value:re,children:ye.jsxs(be,{..._e,as:Te,ref:K,...!Hs(be)&&{ownerState:{...Ee,..._e.ownerState}},...ze,children:[he,$&&ye.jsx(iM,{children:$})]})})});function Xx(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function mP(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function oM(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function pp(e,t,n,s,c,d){let p=!1,l=c(e,t,t?n:!1);for(;l;){if(l===e.firstChild){if(p)return!1;p=!0}const b=s?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!oM(l,d)||b)l=c(e,l,n);else return l.focus(),!0}return!1}const JV=W.forwardRef(function(t,n){const{actions:s,autoFocus:c=!1,autoFocusItem:d=!1,children:p,className:l,disabledItemsFocusable:b=!1,disableListWrap:T=!1,onKeyDown:k,variant:I="selectedMenu",...M}=t,D=W.useRef(null),H=W.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Xs(()=>{c&&D.current.focus()},[c]),W.useImperativeHandle(s,()=>({adjustStyleForScrollbar:(B,{direction:G})=>{const ne=!D.current.style.width;if(B.clientHeight<D.current.clientHeight&&ne){const re=`${rM(ka(B))}px`;D.current.style[G==="rtl"?"paddingLeft":"paddingRight"]=re,D.current.style.width=`calc(100% + ${re})`}return D.current}}),[]);const q=B=>{const G=D.current,ne=B.key;if(B.ctrlKey||B.metaKey||B.altKey){k&&k(B);return}const ae=wi(G).activeElement;if(ne==="ArrowDown")B.preventDefault(),pp(G,ae,T,b,Xx);else if(ne==="ArrowUp")B.preventDefault(),pp(G,ae,T,b,mP);else if(ne==="Home")B.preventDefault(),pp(G,null,T,b,Xx);else if(ne==="End")B.preventDefault(),pp(G,null,T,b,mP);else if(ne.length===1){const he=H.current,Me=ne.toLowerCase(),Ee=performance.now();he.keys.length>0&&(Ee-he.lastTime>500?(he.keys=[],he.repeating=!0,he.previousKeyMatched=!0):he.repeating&&Me!==he.keys[0]&&(he.repeating=!1)),he.lastTime=Ee,he.keys.push(Me);const Re=ae&&!he.repeating&&oM(ae,he);he.previousKeyMatched&&(Re||pp(G,ae,!1,b,Xx,he))?B.preventDefault():he.previousKeyMatched=!1}k&&k(B)},J=Gr(D,n);let $=-1;W.Children.forEach(p,(B,G)=>{if(!W.isValidElement(B)){$===G&&($+=1,$>=p.length&&($=-1));return}B.props.disabled||(I==="selectedMenu"&&B.props.selected||$===-1)&&($=G),$===G&&(B.props.disabled||B.props.muiSkipListHighlight||B.type.muiSkipListHighlight)&&($+=1,$>=p.length&&($=-1))});const V=W.Children.map(p,(B,G)=>{if(G===$){const ne={};return d&&(ne.autoFocus=!0),B.props.tabIndex===void 0&&I==="selectedMenu"&&(ne.tabIndex=0),W.cloneElement(B,ne)}return B});return ye.jsx(jV,{role:"menu",ref:J,className:l,onKeyDown:q,tabIndex:c?0:-1,...M,children:V})});function QV(e){return An("MuiPopover",e)}Pn("MuiPopover",["root","paper"]);function gP(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function yP(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function vP(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function gg(e){return typeof e=="function"?e():e}const ej=e=>{const{classes:t}=e;return Mn({root:["root"],paper:["paper"]},QV,t)},tj=ft(oV,{name:"MuiPopover",slot:"Root"})({}),sM=ft(Wv,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),nj=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiPopover"}),{action:c,anchorEl:d,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:b="anchorEl",children:T,className:k,container:I,elevation:M=8,marginThreshold:D=16,open:H,PaperProps:q={},slots:J={},slotProps:$={},transformOrigin:V={vertical:"top",horizontal:"left"},TransitionComponent:B,transitionDuration:G="auto",TransitionProps:ne={},disableScrollLock:re=!1,...ae}=s,he=W.useRef(),Me={...s,anchorOrigin:p,anchorReference:b,elevation:M,marginThreshold:D,transformOrigin:V,TransitionComponent:B,transitionDuration:G,TransitionProps:ne},Ee=ej(Me),Re=W.useCallback(()=>{if(b==="anchorPosition")return l;const bt=gg(d),Ot=(bt&&bt.nodeType===1?bt:wi(he.current).body).getBoundingClientRect();return{top:Ot.top+gP(Ot,p.vertical),left:Ot.left+yP(Ot,p.horizontal)}},[d,p.horizontal,p.vertical,l,b]),K=W.useCallback(bt=>({vertical:gP(bt,V.vertical),horizontal:yP(bt,V.horizontal)}),[V.horizontal,V.vertical]),be=W.useCallback(bt=>{const Qt={width:bt.offsetWidth,height:bt.offsetHeight},Ot=K(Qt);if(b==="none")return{top:null,left:null,transformOrigin:vP(Ot)};const Ut=Re();let Wt=Ut.top-Ot.vertical,mn=Ut.left-Ot.horizontal;const Ce=Wt+Qt.height,un=mn+Qt.width,mt=ka(gg(d)),Yt=mt.innerHeight-D,yt=mt.innerWidth-D;if(D!==null&&Wt<D){const gn=Wt-D;Wt-=gn,Ot.vertical+=gn}else if(D!==null&&Ce>Yt){const gn=Ce-Yt;Wt-=gn,Ot.vertical+=gn}if(D!==null&&mn<D){const gn=mn-D;mn-=gn,Ot.horizontal+=gn}else if(un>yt){const gn=un-yt;mn-=gn,Ot.horizontal+=gn}return{top:`${Math.round(Wt)}px`,left:`${Math.round(mn)}px`,transformOrigin:vP(Ot)}},[d,b,Re,K,D]),[_e,ze]=W.useState(H),Te=W.useCallback(()=>{const bt=he.current;if(!bt)return;const Qt=be(bt);Qt.top!==null&&bt.style.setProperty("top",Qt.top),Qt.left!==null&&(bt.style.left=Qt.left),bt.style.transformOrigin=Qt.transformOrigin,ze(!0)},[be]);W.useEffect(()=>(re&&window.addEventListener("scroll",Te),()=>window.removeEventListener("scroll",Te)),[d,re,Te]);const Ue=()=>{Te()},Le=()=>{ze(!1)};W.useEffect(()=>{H&&Te()}),W.useImperativeHandle(c,()=>H?{updatePosition:()=>{Te()}}:null,[H,Te]),W.useEffect(()=>{if(!H)return;const bt=FA(()=>{Te()}),Qt=ka(gg(d));return Qt.addEventListener("resize",bt),()=>{bt.clear(),Qt.removeEventListener("resize",bt)}},[d,H,Te]);let Oe=G;const Xe={slots:{transition:B,...J},slotProps:{transition:ne,paper:q,...$}},[Ye,ut]=er("transition",{elementType:Ry,externalForwardedProps:Xe,ownerState:Me,getSlotProps:bt=>({...bt,onEntering:(Qt,Ot)=>{var Ut;(Ut=bt.onEntering)==null||Ut.call(bt,Qt,Ot),Ue()},onExited:Qt=>{var Ot;(Ot=bt.onExited)==null||Ot.call(bt,Qt),Le()}}),additionalProps:{appear:!0,in:H}});G==="auto"&&!Ye.muiSupportAuto&&(Oe=void 0);const Kt=I||(d?wi(gg(d)).body:void 0),[Vt,{slots:tt,slotProps:Qe,...kt}]=er("root",{ref:n,elementType:tj,externalForwardedProps:{...Xe,...ae},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:J.backdrop},slotProps:{backdrop:BA(typeof $.backdrop=="function"?$.backdrop(Me):$.backdrop,{invisible:!0})},container:Kt,open:H},ownerState:Me,className:Zt(Ee.root,k)}),[Xt,jt]=er("paper",{ref:he,className:Ee.paper,elementType:sM,externalForwardedProps:Xe,shouldForwardComponentProp:!0,additionalProps:{elevation:M,style:_e?void 0:{opacity:0}},ownerState:Me});return ye.jsx(Vt,{...kt,...!Hs(Vt)&&{slots:tt,slotProps:Qe,disableScrollLock:re},children:ye.jsx(Ye,{...ut,timeout:Oe,children:ye.jsx(Xt,{...jt,children:T})})})});function rj(e){return An("MuiMenu",e)}Pn("MuiMenu",["root","paper","list"]);const ij={vertical:"top",horizontal:"right"},oj={vertical:"top",horizontal:"left"},sj=e=>{const{classes:t}=e;return Mn({root:["root"],paper:["paper"],list:["list"]},rj,t)},aj=ft(nj,{shouldForwardProp:e=>as(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),lj=ft(sM,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),uj=ft(JV,{name:"MuiMenu",slot:"List"})({outline:0}),cj=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiMenu"}),{autoFocus:c=!0,children:d,className:p,disableAutoFocusItem:l=!1,MenuListProps:b={},onClose:T,open:k,PaperProps:I={},PopoverClasses:M,transitionDuration:D="auto",TransitionProps:{onEntering:H,...q}={},variant:J="selectedMenu",slots:$={},slotProps:V={},...B}=s,G=Nv(),ne={...s,autoFocus:c,disableAutoFocusItem:l,MenuListProps:b,onEntering:H,PaperProps:I,transitionDuration:D,TransitionProps:q,variant:J},re=sj(ne),ae=c&&!l&&k,he=W.useRef(null),Me=(Oe,Xe)=>{he.current&&he.current.adjustStyleForScrollbar(Oe,{direction:G?"rtl":"ltr"}),H&&H(Oe,Xe)},Ee=Oe=>{Oe.key==="Tab"&&(Oe.preventDefault(),T&&T(Oe,"tabKeyDown"))};let Re=-1;W.Children.map(d,(Oe,Xe)=>{W.isValidElement(Oe)&&(Oe.props.disabled||(J==="selectedMenu"&&Oe.props.selected||Re===-1)&&(Re=Xe))});const K={slots:$,slotProps:{list:b,transition:q,paper:I,...V}},be=Ds({elementType:$.root,externalSlotProps:V.root,ownerState:ne,className:[re.root,p]}),[_e,ze]=er("paper",{className:re.paper,elementType:lj,externalForwardedProps:K,shouldForwardComponentProp:!0,ownerState:ne}),[Te,Ue]=er("list",{className:Zt(re.list,b.className),elementType:uj,shouldForwardComponentProp:!0,externalForwardedProps:K,getSlotProps:Oe=>({...Oe,onKeyDown:Xe=>{var Ye;Ee(Xe),(Ye=Oe.onKeyDown)==null||Ye.call(Oe,Xe)}}),ownerState:ne}),Le=typeof K.slotProps.transition=="function"?K.slotProps.transition(ne):K.slotProps.transition;return ye.jsx(aj,{onClose:T,anchorOrigin:{vertical:"bottom",horizontal:G?"right":"left"},transformOrigin:G?ij:oj,slots:{root:$.root,paper:_e,backdrop:$.backdrop,...$.transition&&{transition:$.transition}},slotProps:{root:be,paper:ze,backdrop:typeof V.backdrop=="function"?V.backdrop(ne):V.backdrop,transition:{...Le,onEntering:(...Oe)=>{var Xe;Me(...Oe),(Xe=Le==null?void 0:Le.onEntering)==null||Xe.call(Le,...Oe)}}},open:k,ref:n,transitionDuration:D,ownerState:ne,...B,classes:M,children:ye.jsx(Te,{actions:he,autoFocus:c&&(Re===-1||l),autoFocusItem:ae,variant:J,...Ue,children:d})})});function hj(e){return An("MuiNativeSelect",e)}const kw=Pn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),dj=e=>{const{classes:t,variant:n,disabled:s,multiple:c,open:d,error:p}=e,l={select:["select",n,s&&"disabled",c&&"multiple",p&&"error"],icon:["icon",`icon${gt(n)}`,d&&"iconOpen",s&&"disabled"]};return Mn(l,hj,t)},aM=ft("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${kw.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),pj=ft(aM,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:as,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${kw.multiple}`]:t.multiple}]}})({}),lM=ft("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${kw.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),fj=ft(lM,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${gt(n.variant)}`],n.open&&t.iconOpen]}})({}),mj=W.forwardRef(function(t,n){const{className:s,disabled:c,error:d,IconComponent:p,inputRef:l,variant:b="standard",...T}=t,k={...t,disabled:c,variant:b,error:d},I=dj(k);return ye.jsxs(W.Fragment,{children:[ye.jsx(pj,{ownerState:k,className:Zt(I.select,s),disabled:c,ref:l||n,...T}),t.multiple?null:ye.jsx(fj,{as:p,ownerState:k,className:I.icon})]})});var _P;const gj=ft("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:as})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),yj=ft("legend",{name:"MuiNotchedOutlined",shouldForwardProp:as})(xn(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function vj(e){const{children:t,classes:n,className:s,label:c,notched:d,...p}=e,l=c!=null&&c!=="",b={...e,notched:d,withLabel:l};return ye.jsx(gj,{"aria-hidden":!0,className:s,ownerState:b,...p,children:ye.jsx(yj,{ownerState:b,children:l?ye.jsx("span",{children:c}):_P||(_P=ye.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const _j=e=>{const{classes:t}=e,s=Mn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},qN,t);return{...t,...s}},xj=ft(Kv,{shouldForwardProp:e=>as(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Gv})(xn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Wo.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Wo.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${Wo.focused} .${Wo.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(li()).map(([n])=>({props:{color:n},style:{[`&.${Wo.focused} .${Wo.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${Wo.error} .${Wo.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Wo.disabled} .${Wo.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:s})=>n.multiline&&s==="small",style:{padding:"8.5px 14px"}}]}})),bj=ft(vj,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(xn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),wj=ft(Xv,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Zv})(xn(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),Ew=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiOutlinedInput"}),{components:c={},fullWidth:d=!1,inputComponent:p="input",label:l,multiline:b=!1,notched:T,slots:k={},slotProps:I={},type:M="text",...D}=s,H=_j(s),q=Nl(),J=qu({props:s,muiFormControl:q,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),$={...s,color:J.color||"primary",disabled:J.disabled,error:J.error,focused:J.focused,formControl:q,fullWidth:d,hiddenLabel:J.hiddenLabel,multiline:b,size:J.size,type:M},V=k.root??c.Root??xj,B=k.input??c.Input??wj,[G,ne]=er("notchedOutline",{elementType:bj,className:H.notchedOutline,shouldForwardComponentProp:!0,ownerState:$,externalForwardedProps:{slots:k,slotProps:I},additionalProps:{label:l!=null&&l!==""&&J.required?ye.jsxs(W.Fragment,{children:[l," ","*"]}):l}});return ye.jsx(Cw,{slots:{root:V,input:B},slotProps:I,renderSuffix:re=>ye.jsx(G,{...ne,notched:typeof T<"u"?T:!!(re.startAdornment||re.filled||re.focused)}),fullWidth:d,inputComponent:p,multiline:b,ref:n,type:M,...D,classes:{...H,notchedOutline:null}})});Ew.muiName="Input";const Sj={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function uM(e){return An("MuiSelect",e)}const fp=Pn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var xP;const Cj=ft(aM,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${fp.select}`]:t.select},{[`&.${fp.select}`]:t[n.variant]},{[`&.${fp.error}`]:t.error},{[`&.${fp.multiple}`]:t.multiple}]}})({[`&.${fp.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Tj=ft(lM,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${gt(n.variant)}`],n.open&&t.iconOpen]}})({}),Pj=ft("input",{shouldForwardProp:e=>jv(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function bP(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function kj(e){return e==null||typeof e=="string"&&!e.trim()}const Ej=e=>{const{classes:t,variant:n,disabled:s,multiple:c,open:d,error:p}=e,l={select:["select",n,s&&"disabled",c&&"multiple",p&&"error"],icon:["icon",`icon${gt(n)}`,d&&"iconOpen",s&&"disabled"],nativeInput:["nativeInput"]};return Mn(l,uM,t)},Ij=W.forwardRef(function(t,n){var zt,Bn,Nn,qt;const{"aria-describedby":s,"aria-label":c,autoFocus:d,autoWidth:p,children:l,className:b,defaultOpen:T,defaultValue:k,disabled:I,displayEmpty:M,error:D=!1,IconComponent:H,inputRef:q,labelId:J,MenuProps:$={},multiple:V,name:B,onBlur:G,onChange:ne,onClose:re,onFocus:ae,onOpen:he,open:Me,readOnly:Ee,renderValue:Re,required:K,SelectDisplayProps:be={},tabIndex:_e,type:ze,value:Te,variant:Ue="standard",...Le}=t,[Oe,Xe]=Al({controlled:Te,default:k,name:"Select"}),[Ye,ut]=Al({controlled:Me,default:T,name:"Select"}),Kt=W.useRef(null),Vt=W.useRef(null),[tt,Qe]=W.useState(null),{current:kt}=W.useRef(Me!=null),[Xt,jt]=W.useState(),bt=Gr(n,q),Qt=W.useCallback(At=>{Vt.current=At,At&&Qe(At)},[]),Ot=tt==null?void 0:tt.parentNode;W.useImperativeHandle(bt,()=>({focus:()=>{Vt.current.focus()},node:Kt.current,value:Oe}),[Oe]),W.useEffect(()=>{T&&Ye&&tt&&!kt&&(jt(p?null:Ot.clientWidth),Vt.current.focus())},[tt,p]),W.useEffect(()=>{d&&Vt.current.focus()},[d]),W.useEffect(()=>{if(!J)return;const At=wi(Vt.current).getElementById(J);if(At){const pn=()=>{getSelection().isCollapsed&&Vt.current.focus()};return At.addEventListener("click",pn),()=>{At.removeEventListener("click",pn)}}},[J]);const Ut=(At,pn)=>{At?he&&he(pn):re&&re(pn),kt||(jt(p?null:Ot.clientWidth),ut(At))},Wt=At=>{At.button===0&&(At.preventDefault(),Vt.current.focus(),Ut(!0,At))},mn=At=>{Ut(!1,At)},Ce=W.Children.toArray(l),un=At=>{const pn=Ce.find(Cn=>Cn.props.value===At.target.value);pn!==void 0&&(Xe(pn.props.value),ne&&ne(At,pn))},mt=At=>pn=>{let Cn;if(pn.currentTarget.hasAttribute("tabindex")){if(V){Cn=Array.isArray(Oe)?Oe.slice():[];const cn=Oe.indexOf(At.props.value);cn===-1?Cn.push(At.props.value):Cn.splice(cn,1)}else Cn=At.props.value;if(At.props.onClick&&At.props.onClick(pn),Oe!==Cn&&(Xe(Cn),ne)){const cn=pn.nativeEvent||pn,se=new cn.constructor(cn.type,cn);Object.defineProperty(se,"target",{writable:!0,value:{value:Cn,name:B}}),ne(se,At)}V||Ut(!1,pn)}},Yt=At=>{Ee||[" ","ArrowUp","ArrowDown","Enter"].includes(At.key)&&(At.preventDefault(),Ut(!0,At))},yt=tt!==null&&Ye,gn=At=>{!yt&&G&&(Object.defineProperty(At,"target",{writable:!0,value:{value:Oe,name:B}}),G(At))};delete Le["aria-invalid"];let Ct,Rn;const bn=[];let qe=!1;(Ay({value:Oe})||M)&&(Re?Ct=Re(Oe):qe=!0);const nt=Ce.map(At=>{if(!W.isValidElement(At))return null;let pn;if(V){if(!Array.isArray(Oe))throw new Error(Pa(2));pn=Oe.some(Cn=>bP(Cn,At.props.value)),pn&&qe&&bn.push(At.props.children)}else pn=bP(Oe,At.props.value),pn&&qe&&(Rn=At.props.children);return W.cloneElement(At,{"aria-selected":pn?"true":"false",onClick:mt(At),onKeyUp:Cn=>{Cn.key===" "&&Cn.preventDefault(),At.props.onKeyUp&&At.props.onKeyUp(Cn)},role:"option",selected:pn,value:void 0,"data-value":At.props.value})});qe&&(V?bn.length===0?Ct=null:Ct=bn.reduce((At,pn,Cn)=>(At.push(pn),Cn<bn.length-1&&At.push(", "),At),[]):Ct=Rn);let It=Xt;!p&&kt&&tt&&(It=Ot.clientWidth);let Ve;typeof _e<"u"?Ve=_e:Ve=I?null:0;const nn=be.id||(B?`mui-component-select-${B}`:void 0),it={...t,variant:Ue,value:Oe,open:yt,error:D},ot=Ej(it),hn={...$.PaperProps,...typeof((zt=$.slotProps)==null?void 0:zt.paper)=="function"?$.slotProps.paper(it):(Bn=$.slotProps)==null?void 0:Bn.paper},He={...$.MenuListProps,...typeof((Nn=$.slotProps)==null?void 0:Nn.list)=="function"?$.slotProps.list(it):(qt=$.slotProps)==null?void 0:qt.list},vt=Bf();return ye.jsxs(W.Fragment,{children:[ye.jsx(Cj,{as:"div",ref:Qt,tabIndex:Ve,role:"combobox","aria-controls":yt?vt:void 0,"aria-disabled":I?"true":void 0,"aria-expanded":yt?"true":"false","aria-haspopup":"listbox","aria-label":c,"aria-labelledby":[J,nn].filter(Boolean).join(" ")||void 0,"aria-describedby":s,"aria-required":K?"true":void 0,"aria-invalid":D?"true":void 0,onKeyDown:Yt,onMouseDown:I||Ee?null:Wt,onBlur:gn,onFocus:ae,...be,ownerState:it,className:Zt(be.className,ot.select,b),id:nn,children:kj(Ct)?xP||(xP=ye.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):Ct}),ye.jsx(Pj,{"aria-invalid":D,value:Array.isArray(Oe)?Oe.join(","):Oe,name:B,ref:Kt,"aria-hidden":!0,onChange:un,tabIndex:-1,disabled:I,className:ot.nativeInput,autoFocus:d,required:K,...Le,ownerState:it}),ye.jsx(Tj,{as:H,className:ot.icon,ownerState:it}),ye.jsx(cj,{id:`menu-${B||""}`,anchorEl:Ot,open:yt,onClose:mn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...$,slotProps:{...$.slotProps,list:{"aria-labelledby":J,role:"listbox","aria-multiselectable":V?"true":void 0,disableListWrap:!0,id:vt,...He},paper:{...hn,style:{minWidth:It,...hn!=null?hn.style:null}}},children:nt})]})}),Aj=e=>{const{classes:t}=e,s=Mn({root:["root"]},uM,t);return{...t,...s}},Iw={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>as(e)&&e!=="variant"},Mj=ft(Pw,Iw)(""),Rj=ft(Ew,Iw)(""),zj=ft(Tw,Iw)(""),cM=W.forwardRef(function(t,n){const s=zn({name:"MuiSelect",props:t}),{autoWidth:c=!1,children:d,classes:p={},className:l,defaultOpen:b=!1,displayEmpty:T=!1,IconComponent:k=nM,id:I,input:M,inputProps:D,label:H,labelId:q,MenuProps:J,multiple:$=!1,native:V=!1,onClose:B,onOpen:G,open:ne,renderValue:re,SelectDisplayProps:ae,variant:he="outlined",...Me}=s,Ee=V?mj:Ij,Re=Nl(),K=qu({props:s,muiFormControl:Re,states:["variant","error"]}),be=K.variant||he,_e={...s,variant:be,classes:p},ze=Aj(_e),{root:Te,...Ue}=ze,Le=M||{standard:ye.jsx(Mj,{ownerState:_e}),outlined:ye.jsx(Rj,{label:H,ownerState:_e}),filled:ye.jsx(zj,{ownerState:_e})}[be],Oe=Gr(n,Hh(Le));return ye.jsx(W.Fragment,{children:W.cloneElement(Le,{inputComponent:Ee,inputProps:{children:d,error:K.error,IconComponent:k,variant:be,type:void 0,multiple:$,...V?{id:I}:{autoWidth:c,defaultOpen:b,displayEmpty:T,labelId:q,MenuProps:J,onClose:B,onOpen:G,open:ne,renderValue:re,SelectDisplayProps:{id:I,...ae}},...D,classes:D?ci(Ue,D.classes):Ue,...M?M.props.inputProps:{}},...($&&V||T)&&be==="outlined"?{notched:!0}:{},ref:Oe,className:Zt(Le.props.className,l,ze.root),...!M&&{variant:be},...Me})})});cM.muiName="Select";function Lj(e,t,n=(s,c)=>s===c){return e.length===t.length&&e.every((s,c)=>n(s,t[c]))}const Dj=2;function Zc(e,t,n,s,c){return n===1?Math.min(e+t,c):Math.max(e-t,s)}function hM(e,t){return e-t}function wP(e,t){const{index:n}=e.reduce((s,c,d)=>{const p=Math.abs(t-c);return s===null||p<s.distance||p===s.distance?{distance:p,index:d}:s},null)??{};return n}function yg(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let s=0;s<n.changedTouches.length;s+=1){const c=n.changedTouches[s];if(c.identifier===t.current)return{x:c.clientX,y:c.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function zy(e,t,n){return(e-t)*100/(n-t)}function Oj(e,t,n){return(n-t)*e+t}function Fj(e){if(Math.abs(e)<1){const n=e.toExponential().split("e-"),s=n[0].split(".")[1];return(s?s.length:0)+parseInt(n[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function Bj(e,t,n){const s=Math.round((e-n)/t)*t+n;return Number(s.toFixed(Fj(t)))}function SP({values:e,newValue:t,index:n}){const s=e.slice();return s[n]=t,s.sort(hM)}function vg({sliderRef:e,activeIndex:t,setActive:n}){var c,d,p;const s=wi(e.current);(!((c=e.current)!=null&&c.contains(s.activeElement))||Number((d=s==null?void 0:s.activeElement)==null?void 0:d.getAttribute("data-index"))!==t)&&((p=e.current)==null||p.querySelector(`[type="range"][data-index="${t}"]`).focus()),n&&n(t)}function _g(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?Lj(e,t):!1}const $j={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Nj=e=>e;let xg;function CP(){return xg===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?xg=CSS.supports("touch-action","none"):xg=!0),xg}function Vj(e){const{"aria-labelledby":t,defaultValue:n,disabled:s=!1,disableSwap:c=!1,isRtl:d=!1,marks:p=!1,max:l=100,min:b=0,name:T,onChange:k,onChangeCommitted:I,orientation:M="horizontal",rootRef:D,scale:H=Nj,step:q=1,shiftStep:J=10,tabIndex:$,value:V}=e,B=W.useRef(void 0),[G,ne]=W.useState(-1),[re,ae]=W.useState(-1),[he,Me]=W.useState(!1),Ee=W.useRef(0),Re=W.useRef(null),[K,be]=Al({controlled:V,default:n??b,name:"Slider"}),_e=k&&((qe,nt,It)=>{const Ve=qe.nativeEvent||qe,nn=new Ve.constructor(Ve.type,Ve);Object.defineProperty(nn,"target",{writable:!0,value:{value:nt,name:T}}),Re.current=nt,k(nn,nt,It)}),ze=Array.isArray(K);let Te=ze?K.slice().sort(hM):[K];Te=Te.map(qe=>qe==null?b:Kc(qe,b,l));const Ue=p===!0&&q!==null?[...Array(Math.floor((l-b)/q)+1)].map((qe,nt)=>({value:b+q*nt})):p||[],Le=Ue.map(qe=>qe.value),[Oe,Xe]=W.useState(-1),Ye=W.useRef(null),ut=Gr(D,Ye),Kt=qe=>nt=>{var Ve;const It=Number(nt.currentTarget.getAttribute("data-index"));Lh(nt.target)&&Xe(It),ae(It),(Ve=qe==null?void 0:qe.onFocus)==null||Ve.call(qe,nt)},Vt=qe=>nt=>{var It;Lh(nt.target)||Xe(-1),ae(-1),(It=qe==null?void 0:qe.onBlur)==null||It.call(qe,nt)},tt=(qe,nt)=>{const It=Number(qe.currentTarget.getAttribute("data-index")),Ve=Te[It],nn=Le.indexOf(Ve);let it=nt;if(Ue&&q==null){const ot=Le[Le.length-1];it>=ot?it=ot:it<=Le[0]?it=Le[0]:it=it<Ve?Le[nn-1]:Le[nn+1]}if(it=Kc(it,b,l),ze){c&&(it=Kc(it,Te[It-1]||-1/0,Te[It+1]||1/0));const ot=it;it=SP({values:Te,newValue:it,index:It});let hn=It;c||(hn=it.indexOf(ot)),vg({sliderRef:Ye,activeIndex:hn})}be(it),Xe(It),_e&&!_g(it,K)&&_e(qe,it,It),I&&I(qe,Re.current??it)},Qe=qe=>nt=>{var It;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(nt.key)){nt.preventDefault();const Ve=Number(nt.currentTarget.getAttribute("data-index")),nn=Te[Ve];let it=null;if(q!=null){const ot=nt.shiftKey?J:q;switch(nt.key){case"ArrowUp":it=Zc(nn,ot,1,b,l);break;case"ArrowRight":it=Zc(nn,ot,d?-1:1,b,l);break;case"ArrowDown":it=Zc(nn,ot,-1,b,l);break;case"ArrowLeft":it=Zc(nn,ot,d?1:-1,b,l);break;case"PageUp":it=Zc(nn,J,1,b,l);break;case"PageDown":it=Zc(nn,J,-1,b,l);break;case"Home":it=b;break;case"End":it=l;break}}else if(Ue){const ot=Le[Le.length-1],hn=Le.indexOf(nn),He=[d?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],vt=[d?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];He.includes(nt.key)?hn===0?it=Le[0]:it=Le[hn-1]:vt.includes(nt.key)&&(hn===Le.length-1?it=ot:it=Le[hn+1])}it!=null&&tt(nt,it)}(It=qe==null?void 0:qe.onKeyDown)==null||It.call(qe,nt)};Xs(()=>{var qe;s&&Ye.current.contains(document.activeElement)&&((qe=document.activeElement)==null||qe.blur())},[s]),s&&G!==-1&&ne(-1),s&&Oe!==-1&&Xe(-1);const kt=qe=>nt=>{var It;(It=qe.onChange)==null||It.call(qe,nt),tt(nt,nt.target.valueAsNumber)},Xt=W.useRef(void 0);let jt=M;d&&M==="horizontal"&&(jt+="-reverse");const bt=({finger:qe,move:nt=!1})=>{const{current:It}=Ye,{width:Ve,height:nn,bottom:it,left:ot}=It.getBoundingClientRect();let hn;jt.startsWith("vertical")?hn=(it-qe.y)/nn:hn=(qe.x-ot)/Ve,jt.includes("-reverse")&&(hn=1-hn);let He;if(He=Oj(hn,b,l),q)He=Bj(He,q,b);else{const zt=wP(Le,He);He=Le[zt]}He=Kc(He,b,l);let vt=0;if(ze){nt?vt=Xt.current:vt=wP(Te,He),c&&(He=Kc(He,Te[vt-1]||-1/0,Te[vt+1]||1/0));const zt=He;He=SP({values:Te,newValue:He,index:vt}),c&&nt||(vt=He.indexOf(zt),Xt.current=vt)}return{newValue:He,activeIndex:vt}},Qt=Oi(qe=>{const nt=yg(qe,B);if(!nt)return;if(Ee.current+=1,qe.type==="mousemove"&&qe.buttons===0){Ot(qe);return}const{newValue:It,activeIndex:Ve}=bt({finger:nt,move:!0});vg({sliderRef:Ye,activeIndex:Ve,setActive:ne}),be(It),!he&&Ee.current>Dj&&Me(!0),_e&&!_g(It,K)&&_e(qe,It,Ve)}),Ot=Oi(qe=>{const nt=yg(qe,B);if(Me(!1),!nt)return;const{newValue:It}=bt({finger:nt,move:!0});ne(-1),qe.type==="touchend"&&ae(-1),I&&I(qe,Re.current??It),B.current=void 0,Wt()}),Ut=Oi(qe=>{if(s)return;CP()||qe.preventDefault();const nt=qe.changedTouches[0];nt!=null&&(B.current=nt.identifier);const It=yg(qe,B);if(It!==!1){const{newValue:nn,activeIndex:it}=bt({finger:It});vg({sliderRef:Ye,activeIndex:it,setActive:ne}),be(nn),_e&&!_g(nn,K)&&_e(qe,nn,it)}Ee.current=0;const Ve=wi(Ye.current);Ve.addEventListener("touchmove",Qt,{passive:!0}),Ve.addEventListener("touchend",Ot,{passive:!0})}),Wt=W.useCallback(()=>{const qe=wi(Ye.current);qe.removeEventListener("mousemove",Qt),qe.removeEventListener("mouseup",Ot),qe.removeEventListener("touchmove",Qt),qe.removeEventListener("touchend",Ot)},[Ot,Qt]);W.useEffect(()=>{const{current:qe}=Ye;return qe.addEventListener("touchstart",Ut,{passive:CP()}),()=>{qe.removeEventListener("touchstart",Ut),Wt()}},[Wt,Ut]),W.useEffect(()=>{s&&Wt()},[s,Wt]);const mn=qe=>nt=>{var nn;if((nn=qe.onMouseDown)==null||nn.call(qe,nt),s||nt.defaultPrevented||nt.button!==0)return;nt.preventDefault();const It=yg(nt,B);if(It!==!1){const{newValue:it,activeIndex:ot}=bt({finger:It});vg({sliderRef:Ye,activeIndex:ot,setActive:ne}),be(it),_e&&!_g(it,K)&&_e(nt,it,ot)}Ee.current=0;const Ve=wi(Ye.current);Ve.addEventListener("mousemove",Qt,{passive:!0}),Ve.addEventListener("mouseup",Ot)},Ce=zy(ze?Te[0]:b,b,l),un=zy(Te[Te.length-1],b,l)-Ce,mt=(qe={})=>{const nt=Op(qe),It={onMouseDown:mn(nt||{})},Ve={...nt,...It};return{...qe,ref:ut,...Ve}},Yt=qe=>nt=>{var Ve;(Ve=qe.onMouseOver)==null||Ve.call(qe,nt);const It=Number(nt.currentTarget.getAttribute("data-index"));ae(It)},yt=qe=>nt=>{var It;(It=qe.onMouseLeave)==null||It.call(qe,nt),ae(-1)},gn=(qe={})=>{const nt=Op(qe),It={onMouseOver:Yt(nt||{}),onMouseLeave:yt(nt||{})};return{...qe,...nt,...It}},Ct=qe=>({pointerEvents:G!==-1&&G!==qe?"none":void 0});let Rn;return M==="vertical"&&(Rn=d?"vertical-rl":"vertical-lr"),{active:G,axis:jt,axisProps:$j,dragging:he,focusedThumbIndex:Oe,getHiddenInputProps:(qe={})=>{const nt=Op(qe),It={onChange:kt(nt||{}),onFocus:Kt(nt||{}),onBlur:Vt(nt||{}),onKeyDown:Qe(nt||{})},Ve={...nt,...It};return{tabIndex:$,"aria-labelledby":t,"aria-orientation":M,"aria-valuemax":H(l),"aria-valuemin":H(b),name:T,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:s,...qe,...Ve,style:{...Sj,direction:d?"rtl":"ltr",width:"100%",height:"100%",writingMode:Rn}}},getRootProps:mt,getThumbProps:gn,marks:Ue,open:re,range:ze,rootRef:ut,trackLeap:un,trackOffset:Ce,values:Te,getThumbStyle:Ct}}const jj=e=>!e||!Hs(e);function Uj(e){return An("MuiSlider",e)}const Yo=Pn("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Wj=e=>{const{open:t}=e;return{offset:Zt(t&&Yo.valueLabelOpen),circle:Yo.valueLabelCircle,label:Yo.valueLabelLabel}};function Hj(e){const{children:t,className:n,value:s}=e,c=Wj(e);return t?W.cloneElement(t,{className:t.props.className},ye.jsxs(W.Fragment,{children:[t.props.children,ye.jsx("span",{className:Zt(c.offset,n),"aria-hidden":!0,children:ye.jsx("span",{className:c.circle,children:ye.jsx("span",{className:c.label,children:s})})})]})):null}function TP(e){return e}const qj=ft("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${gt(n.color)}`],n.size!=="medium"&&t[`size${gt(n.size)}`],n.marked&&t.marked,n.orientation==="vertical"&&t.vertical,n.track==="inverted"&&t.trackInverted,n.track===!1&&t.trackFalse]}})(xn(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Yo.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Yo.dragging}`]:{[`& .${Yo.thumb}, & .${Yo.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Gj=ft("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Zj=ft("span",{name:"MuiSlider",slot:"Track"})(xn(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:e.lighten(e.palette[t].main,.62),borderColor:e.lighten(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[t].main,.5)})}}}))]}))),Kj=ft("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${gt(n.color)}`],n.size!=="medium"&&t[`thumbSize${gt(n.size)}`]]}})(xn(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Yo.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${Yo.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[t].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Yo.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[t].main,.16)}`}}}))]}))),Xj=ft(Hj,{name:"MuiSlider",slot:"ValueLabel"})(xn(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Yo.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Yo.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Yj=ft("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>jv(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})(xn(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),Jj=ft("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>jv(e)&&e!=="markLabelActive"})(xn(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),Qj=e=>{const{disabled:t,dragging:n,marked:s,orientation:c,track:d,classes:p,color:l,size:b}=e,T={root:["root",t&&"disabled",n&&"dragging",s&&"marked",c==="vertical"&&"vertical",d==="inverted"&&"trackInverted",d===!1&&"trackFalse",l&&`color${gt(l)}`,b&&`size${gt(b)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",b&&`thumbSize${gt(b)}`,l&&`thumbColor${gt(l)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Mn(T,Uj,p)},e8=({children:e})=>e,t8=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiSlider"}),c=Nv(),{"aria-label":d,"aria-valuetext":p,"aria-labelledby":l,component:b="span",components:T={},componentsProps:k={},color:I="primary",classes:M,className:D,disableSwap:H=!1,disabled:q=!1,getAriaLabel:J,getAriaValueText:$,marks:V=!1,max:B=100,min:G=0,name:ne,onChange:re,onChangeCommitted:ae,orientation:he="horizontal",shiftStep:Me=10,size:Ee="medium",step:Re=1,scale:K=TP,slotProps:be,slots:_e,tabIndex:ze,track:Te="normal",value:Ue,valueLabelDisplay:Le="off",valueLabelFormat:Oe=TP,...Xe}=s,Ye={...s,isRtl:c,max:B,min:G,classes:M,disabled:q,disableSwap:H,orientation:he,marks:V,color:I,size:Ee,step:Re,shiftStep:Me,scale:K,track:Te,valueLabelDisplay:Le,valueLabelFormat:Oe},{axisProps:ut,getRootProps:Kt,getHiddenInputProps:Vt,getThumbProps:tt,open:Qe,active:kt,axis:Xt,focusedThumbIndex:jt,range:bt,dragging:Qt,marks:Ot,values:Ut,trackOffset:Wt,trackLeap:mn,getThumbStyle:Ce}=Vj({...Ye,rootRef:n});Ye.marked=Ot.length>0&&Ot.some(cn=>cn.label),Ye.dragging=Qt,Ye.focusedThumbIndex=jt;const un=Qj(Ye),mt=(_e==null?void 0:_e.root)??T.Root??qj,Yt=(_e==null?void 0:_e.rail)??T.Rail??Gj,yt=(_e==null?void 0:_e.track)??T.Track??Zj,gn=(_e==null?void 0:_e.thumb)??T.Thumb??Kj,Ct=(_e==null?void 0:_e.valueLabel)??T.ValueLabel??Xj,Rn=(_e==null?void 0:_e.mark)??T.Mark??Yj,bn=(_e==null?void 0:_e.markLabel)??T.MarkLabel??Jj,qe=(_e==null?void 0:_e.input)??T.Input??"input",nt=(be==null?void 0:be.root)??k.root,It=(be==null?void 0:be.rail)??k.rail,Ve=(be==null?void 0:be.track)??k.track,nn=(be==null?void 0:be.thumb)??k.thumb,it=(be==null?void 0:be.valueLabel)??k.valueLabel,ot=(be==null?void 0:be.mark)??k.mark,hn=(be==null?void 0:be.markLabel)??k.markLabel,He=(be==null?void 0:be.input)??k.input,vt=Ds({elementType:mt,getSlotProps:Kt,externalSlotProps:nt,externalForwardedProps:Xe,additionalProps:{...jj(mt)&&{as:b}},ownerState:{...Ye,...nt==null?void 0:nt.ownerState},className:[un.root,D]}),zt=Ds({elementType:Yt,externalSlotProps:It,ownerState:Ye,className:un.rail}),Bn=Ds({elementType:yt,externalSlotProps:Ve,additionalProps:{style:{...ut[Xt].offset(Wt),...ut[Xt].leap(mn)}},ownerState:{...Ye,...Ve==null?void 0:Ve.ownerState},className:un.track}),Nn=Ds({elementType:gn,getSlotProps:tt,externalSlotProps:nn,ownerState:{...Ye,...nn==null?void 0:nn.ownerState},className:un.thumb}),qt=Ds({elementType:Ct,externalSlotProps:it,ownerState:{...Ye,...it==null?void 0:it.ownerState},className:un.valueLabel}),At=Ds({elementType:Rn,externalSlotProps:ot,ownerState:Ye,className:un.mark}),pn=Ds({elementType:bn,externalSlotProps:hn,ownerState:Ye,className:un.markLabel}),Cn=Ds({elementType:qe,getSlotProps:Vt,externalSlotProps:He,ownerState:Ye});return ye.jsxs(mt,{...vt,children:[ye.jsx(Yt,{...zt}),ye.jsx(yt,{...Bn}),Ot.filter(cn=>cn.value>=G&&cn.value<=B).map((cn,se)=>{const U=zy(cn.value,G,B),j=ut[Xt].offset(U);let Q;return Te===!1?Q=Ut.includes(cn.value):Q=Te==="normal"&&(bt?cn.value>=Ut[0]&&cn.value<=Ut[Ut.length-1]:cn.value<=Ut[0])||Te==="inverted"&&(bt?cn.value<=Ut[0]||cn.value>=Ut[Ut.length-1]:cn.value>=Ut[0]),ye.jsxs(W.Fragment,{children:[ye.jsx(Rn,{"data-index":se,...At,...!Hs(Rn)&&{markActive:Q},style:{...j,...At.style},className:Zt(At.className,Q&&un.markActive)}),cn.label!=null?ye.jsx(bn,{"aria-hidden":!0,"data-index":se,...pn,...!Hs(bn)&&{markLabelActive:Q},style:{...j,...pn.style},className:Zt(un.markLabel,pn.className,Q&&un.markLabelActive),children:cn.label}):null]},se)}),Ut.map((cn,se)=>{const U=zy(cn,G,B),j=ut[Xt].offset(U),Q=Le==="off"?e8:Ct;return ye.jsx(Q,{...!Hs(Q)&&{valueLabelFormat:Oe,valueLabelDisplay:Le,value:typeof Oe=="function"?Oe(K(cn),se):Oe,index:se,open:Qe===se||kt===se||Le==="on",disabled:q},...qt,children:ye.jsx(gn,{"data-index":se,...Nn,className:Zt(un.thumb,Nn.className,kt===se&&un.active,jt===se&&un.focusVisible),style:{...j,...Ce(se),...Nn.style},children:ye.jsx(qe,{"data-index":se,"aria-label":J?J(se):d,"aria-valuenow":K(cn),"aria-labelledby":l,"aria-valuetext":$?$(K(cn),se):p,value:Ut[se],...Cn})})},se)})]})});function n8(e){return An("MuiTooltip",e)}const zr=Pn("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function r8(e){return Math.round(e*1e5)/1e5}const i8=e=>{const{classes:t,disableInteractive:n,arrow:s,touch:c,placement:d}=e,p={popper:["popper",!n&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",c&&"touch",`tooltipPlacement${gt(d.split("-")[0])}`],arrow:["arrow"]};return Mn(p,n8,t)},o8=ft(qv,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(xn(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${zr.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${zr.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${zr.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${zr.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${zr.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${zr.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${zr.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${zr.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),s8=ft("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${gt(n.placement.split("-")[0])}`]]}})(xn(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${zr.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${zr.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${zr.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${zr.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${r8(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${zr.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${zr.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${zr.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${zr.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${zr.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${zr.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${zr.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${zr.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${zr.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${zr.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),a8=ft("span",{name:"MuiTooltip",slot:"Arrow"})(xn(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let bg=!1;const PP=new Uv;let mp={x:0,y:0};function wg(e,t){return(n,...s)=>{t&&t(n,...s),e(n,...s)}}const Yx=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiTooltip"}),{arrow:c=!1,children:d,classes:p,components:l={},componentsProps:b={},describeChild:T=!1,disableFocusListener:k=!1,disableHoverListener:I=!1,disableInteractive:M=!1,disableTouchListener:D=!1,enterDelay:H=100,enterNextDelay:q=0,enterTouchDelay:J=700,followCursor:$=!1,id:V,leaveDelay:B=0,leaveTouchDelay:G=1500,onClose:ne,onOpen:re,open:ae,placement:he="bottom",PopperComponent:Me,PopperProps:Ee={},slotProps:Re={},slots:K={},title:be,TransitionComponent:_e,TransitionProps:ze,...Te}=s,Ue=W.isValidElement(d)?d:ye.jsx("span",{children:d}),Le=Vv(),Oe=Nv(),[Xe,Ye]=W.useState(),[ut,Kt]=W.useState(null),Vt=W.useRef(!1),tt=M||$,Qe=uh(),kt=uh(),Xt=uh(),jt=uh(),[bt,Qt]=Al({controlled:ae,default:!1,name:"Tooltip",state:"open"});let Ot=bt;const Ut=Bf(V),Wt=W.useRef(),mn=Oi(()=>{Wt.current!==void 0&&(document.body.style.WebkitUserSelect=Wt.current,Wt.current=void 0),jt.clear()});W.useEffect(()=>mn,[mn]);const Ce=ie=>{PP.clear(),bg=!0,Qt(!0),re&&!Ot&&re(ie)},un=Oi(ie=>{PP.start(800+B,()=>{bg=!1}),Qt(!1),ne&&Ot&&ne(ie),Qe.start(Le.transitions.duration.shortest,()=>{Vt.current=!1})}),mt=ie=>{Vt.current&&ie.type!=="touchstart"||(Xe&&Xe.removeAttribute("title"),kt.clear(),Xt.clear(),H||bg&&q?kt.start(bg?q:H,()=>{Ce(ie)}):Ce(ie))},Yt=ie=>{kt.clear(),Xt.start(B,()=>{un(ie)})},[,yt]=W.useState(!1),gn=ie=>{Lh(ie.target)||(yt(!1),Yt(ie))},Ct=ie=>{Xe||Ye(ie.currentTarget),Lh(ie.target)&&(yt(!0),mt(ie))},Rn=ie=>{Vt.current=!0;const ge=Ue.props;ge.onTouchStart&&ge.onTouchStart(ie)},bn=ie=>{Rn(ie),Xt.clear(),Qe.clear(),mn(),Wt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",jt.start(J,()=>{document.body.style.WebkitUserSelect=Wt.current,mt(ie)})},qe=ie=>{Ue.props.onTouchEnd&&Ue.props.onTouchEnd(ie),mn(),Xt.start(G,()=>{un(ie)})};W.useEffect(()=>{if(!Ot)return;function ie(ge){ge.key==="Escape"&&un(ge)}return document.addEventListener("keydown",ie),()=>{document.removeEventListener("keydown",ie)}},[un,Ot]);const nt=Gr(Hh(Ue),Ye,n);!be&&be!==0&&(Ot=!1);const It=W.useRef(),Ve=ie=>{const ge=Ue.props;ge.onMouseMove&&ge.onMouseMove(ie),mp={x:ie.clientX,y:ie.clientY},It.current&&It.current.update()},nn={},it=typeof be=="string";T?(nn.title=!Ot&&it&&!I?be:null,nn["aria-describedby"]=Ot?Ut:null):(nn["aria-label"]=it?be:null,nn["aria-labelledby"]=Ot&&!it?Ut:null);const ot={...nn,...Te,...Ue.props,className:Zt(Te.className,Ue.props.className),onTouchStart:Rn,ref:nt,...$?{onMouseMove:Ve}:{}},hn={};D||(ot.onTouchStart=bn,ot.onTouchEnd=qe),I||(ot.onMouseOver=wg(mt,ot.onMouseOver),ot.onMouseLeave=wg(Yt,ot.onMouseLeave),tt||(hn.onMouseOver=mt,hn.onMouseLeave=Yt)),k||(ot.onFocus=wg(Ct,ot.onFocus),ot.onBlur=wg(gn,ot.onBlur),tt||(hn.onFocus=Ct,hn.onBlur=gn));const He={...s,isRtl:Oe,arrow:c,disableInteractive:tt,placement:he,PopperComponentProp:Me,touch:Vt.current},vt=typeof Re.popper=="function"?Re.popper(He):Re.popper,zt=W.useMemo(()=>{var ge,we;let ie=[{name:"arrow",enabled:!!ut,options:{element:ut,padding:4}}];return(ge=Ee.popperOptions)!=null&&ge.modifiers&&(ie=ie.concat(Ee.popperOptions.modifiers)),(we=vt==null?void 0:vt.popperOptions)!=null&&we.modifiers&&(ie=ie.concat(vt.popperOptions.modifiers)),{...Ee.popperOptions,...vt==null?void 0:vt.popperOptions,modifiers:ie}},[ut,Ee.popperOptions,vt==null?void 0:vt.popperOptions]),Bn=i8(He),Nn=typeof Re.transition=="function"?Re.transition(He):Re.transition,qt={slots:{popper:l.Popper,transition:l.Transition??_e,tooltip:l.Tooltip,arrow:l.Arrow,...K},slotProps:{arrow:Re.arrow??b.arrow,popper:{...Ee,...vt??b.popper},tooltip:Re.tooltip??b.tooltip,transition:{...ze,...Nn??b.transition}}},[At,pn]=er("popper",{elementType:o8,externalForwardedProps:qt,ownerState:He,className:Zt(Bn.popper,Ee==null?void 0:Ee.className)}),[Cn,cn]=er("transition",{elementType:Ry,externalForwardedProps:qt,ownerState:He}),[se,U]=er("tooltip",{elementType:s8,className:Bn.tooltip,externalForwardedProps:qt,ownerState:He}),[j,Q]=er("arrow",{elementType:a8,className:Bn.arrow,externalForwardedProps:qt,ownerState:He,ref:Kt});return ye.jsxs(W.Fragment,{children:[W.cloneElement(Ue,ot),ye.jsx(At,{as:Me??qv,placement:he,anchorEl:$?{getBoundingClientRect:()=>({top:mp.y,left:mp.x,right:mp.x,bottom:mp.y,width:0,height:0})}:Xe,popperRef:It,open:Xe?Ot:!1,id:Ut,transition:!0,...hn,...pn,popperOptions:zt,children:({TransitionProps:ie})=>ye.jsx(Cn,{timeout:Le.transitions.duration.shorter,...ie,...cn,children:ye.jsxs(se,{...U,children:[be,c?ye.jsx(j,{...Q}):null]})})})]})}),Ib=M3({createStyledComponent:ft("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>zn({props:e,name:"MuiStack"})});function l8(e){return An("MuiTextField",e)}Pn("MuiTextField",["root"]);const u8={standard:Pw,filled:Tw,outlined:Ew},c8=e=>{const{classes:t}=e;return Mn({root:["root"]},l8,t)},h8=ft(gV,{name:"MuiTextField",slot:"Root"})({}),Ly=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiTextField"}),{autoComplete:c,autoFocus:d=!1,children:p,className:l,color:b="primary",defaultValue:T,disabled:k=!1,error:I=!1,FormHelperTextProps:M,fullWidth:D=!1,helperText:H,id:q,InputLabelProps:J,inputProps:$,InputProps:V,inputRef:B,label:G,maxRows:ne,minRows:re,multiline:ae=!1,name:he,onBlur:Me,onChange:Ee,onFocus:Re,placeholder:K,required:be=!1,rows:_e,select:ze=!1,SelectProps:Te,slots:Ue={},slotProps:Le={},type:Oe,value:Xe,variant:Ye="outlined",...ut}=s,Kt={...s,autoFocus:d,color:b,disabled:k,error:I,fullWidth:D,multiline:ae,required:be,select:ze,variant:Ye},Vt=c8(Kt),tt=Bf(q),Qe=H&&tt?`${tt}-helper-text`:void 0,kt=G&&tt?`${tt}-label`:void 0,Xt=u8[Ye],jt={slots:Ue,slotProps:{input:V,inputLabel:J,htmlInput:$,formHelperText:M,select:Te,...Le}},bt={},Qt=jt.slotProps.inputLabel;Ye==="outlined"&&(Qt&&typeof Qt.shrink<"u"&&(bt.notched=Qt.shrink),bt.label=G),ze&&((!Te||!Te.native)&&(bt.id=void 0),bt["aria-describedby"]=void 0);const[Ot,Ut]=er("root",{elementType:h8,shouldForwardComponentProp:!0,externalForwardedProps:{...jt,...ut},ownerState:Kt,className:Zt(Vt.root,l),ref:n,additionalProps:{disabled:k,error:I,fullWidth:D,required:be,color:b,variant:Ye}}),[Wt,mn]=er("input",{elementType:Xt,externalForwardedProps:jt,additionalProps:bt,ownerState:Kt}),[Ce,un]=er("inputLabel",{elementType:BV,externalForwardedProps:jt,ownerState:Kt}),[mt,Yt]=er("htmlInput",{elementType:"input",externalForwardedProps:jt,ownerState:Kt}),[yt,gn]=er("formHelperText",{elementType:TV,externalForwardedProps:jt,ownerState:Kt}),[Ct,Rn]=er("select",{elementType:cM,externalForwardedProps:jt,ownerState:Kt}),bn=ye.jsx(Wt,{"aria-describedby":Qe,autoComplete:c,autoFocus:d,defaultValue:T,fullWidth:D,multiline:ae,name:he,rows:_e,maxRows:ne,minRows:re,type:Oe,value:Xe,id:tt,inputRef:B,onBlur:Me,onChange:Ee,onFocus:Re,placeholder:K,inputProps:Yt,slots:{input:Ue.htmlInput?mt:void 0},...mn});return ye.jsxs(Ot,{...Ut,children:[G!=null&&G!==""&&ye.jsx(Ce,{htmlFor:tt,id:kt,...un,children:G}),ze?ye.jsx(Ct,{"aria-describedby":Qe,id:tt,labelId:kt,value:Xe,input:bn,...Rn,children:p}):bn,H&&ye.jsx(yt,{id:Qe,...gn,children:H})]})});function d8(e){return An("MuiToggleButton",e)}const ku=Pn("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),dM=W.createContext({}),pM=W.createContext(void 0);function p8(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.includes(e):e===t}const f8=e=>{const{classes:t,fullWidth:n,selected:s,disabled:c,size:d,color:p}=e,l={root:["root",s&&"selected",c&&"disabled",n&&"fullWidth",`size${gt(d)}`,p]};return Mn(l,d8,t)},m8=ft(yf,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`size${gt(n.size)}`]]}})(xn(({theme:e})=>({...e.typography.button,borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active,[`&.${ku.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${ku.selected}`]:{color:(e.vars||e).palette.text.primary,backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity)}}}}},...Object.entries(e.palette).filter(li()).map(([t])=>({props:{color:t},style:{[`&.${ku.selected}`]:{color:(e.vars||e).palette[t].main,backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:e.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:e.typography.pxToRem(15)}}]}))),Jx=W.forwardRef(function(t,n){const{value:s,...c}=W.useContext(dM),d=W.useContext(pM),p=gf({...c,selected:p8(t.value,s)},t),l=zn({props:p,name:"MuiToggleButton"}),{children:b,className:T,color:k="standard",disabled:I=!1,disableFocusRipple:M=!1,fullWidth:D=!1,onChange:H,onClick:q,selected:J,size:$="medium",value:V,...B}=l,G={...l,color:k,disabled:I,disableFocusRipple:M,fullWidth:D,size:$},ne=f8(G),re=he=>{q&&(q(he,V),he.defaultPrevented)||H&&H(he,V)},ae=d||"";return ye.jsx(m8,{className:Zt(c.className,ne.root,T,ae),disabled:I,focusRipple:!M,ref:n,onClick:re,onChange:H,value:V,ownerState:G,"aria-pressed":J,...B,children:b})});function g8(e){return An("MuiToggleButtonGroup",e)}const pr=Pn("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),y8=e=>{const{classes:t,orientation:n,fullWidth:s,disabled:c}=e,d={root:["root",n,s&&"fullWidth"],grouped:["grouped",`grouped${gt(n)}`,c&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Mn(d,g8,t)},v8=ft("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${pr.grouped}`]:t.grouped},{[`& .${pr.grouped}`]:t[`grouped${gt(n.orientation)}`]},{[`& .${pr.firstButton}`]:t.firstButton},{[`& .${pr.lastButton}`]:t.lastButton},{[`& .${pr.middleButton}`]:t.middleButton},t.root,n.orientation==="vertical"&&t.vertical,n.fullWidth&&t.fullWidth]}})(xn(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${pr.grouped}`]:{[`&.${pr.selected} + .${pr.grouped}.${pr.selected}`]:{borderTop:0,marginTop:0}},[`& .${pr.firstButton},& .${pr.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${pr.lastButton},& .${pr.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${pr.lastButton}.${ku.disabled},& .${pr.middleButton}.${ku.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${pr.grouped}`]:{[`&.${pr.selected} + .${pr.grouped}.${pr.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${pr.firstButton},& .${pr.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${pr.lastButton},& .${pr.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${pr.lastButton}.${ku.disabled},& .${pr.middleButton}.${ku.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),_8=W.forwardRef(function(t,n){const s=zn({props:t,name:"MuiToggleButtonGroup"}),{children:c,className:d,color:p="standard",disabled:l=!1,exclusive:b=!1,fullWidth:T=!1,onChange:k,orientation:I="horizontal",size:M="medium",value:D,...H}=s,q={...s,disabled:l,fullWidth:T,orientation:I,size:M},J=y8(q),$=W.useCallback((ae,he)=>{if(!k)return;const Me=D&&D.indexOf(he);let Ee;D&&Me>=0?(Ee=D.slice(),Ee.splice(Me,1)):Ee=D?D.concat(he):[he],k(ae,Ee)},[k,D]),V=W.useCallback((ae,he)=>{k&&k(ae,D===he?null:he)},[k,D]),B=W.useMemo(()=>({className:J.grouped,onChange:b?V:$,value:D,size:M,fullWidth:T,color:p,disabled:l}),[J.grouped,b,V,$,D,M,T,p,l]),G=g6(c),ne=G.length,re=ae=>{const he=ae===0,Me=ae===ne-1;return he&&Me?"":he?J.firstButton:Me?J.lastButton:J.middleButton};return ye.jsx(v8,{role:"group",className:Zt(J.root,d),ref:n,ownerState:q,...H,children:ye.jsx(dM.Provider,{value:B,children:G.map((ae,he)=>ye.jsx(pM.Provider,{value:re(he),children:ae},he))})})}),Aw=W.createContext({});function Mw(e){const t=W.useRef(null);return t.current===null&&(t.current=e()),t.current}const Rw=typeof window<"u",fM=Rw?W.useLayoutEffect:W.useEffect,Yv=W.createContext(null);function zw(e,t){e.indexOf(t)===-1&&e.push(t)}function Lw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ia=(e,t,n)=>n>t?t:n<e?e:n;let Dw=()=>{};const Aa={},mM=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function gM(e){return typeof e=="object"&&e!==null}const yM=e=>/^0[^.\s]+$/u.test(e);function Ow(e){let t;return()=>(t===void 0&&(t=e()),t)}const es=e=>e,x8=(e,t)=>n=>t(e(n)),Vf=(...e)=>e.reduce(x8),xf=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s};class Fw{constructor(){this.subscriptions=[]}add(t){return zw(this.subscriptions,t),()=>Lw(this.subscriptions,t)}notify(t,n,s){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,n,s);else for(let d=0;d<c;d++){const p=this.subscriptions[d];p&&p(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gs=e=>e*1e3,Zs=e=>e/1e3;function vM(e,t){return t?e*(1e3/t):0}const _M=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,b8=1e-7,w8=12;function S8(e,t,n,s,c){let d,p,l=0;do p=t+(n-t)/2,d=_M(p,s,c)-e,d>0?n=p:t=p;while(Math.abs(d)>b8&&++l<w8);return p}function jf(e,t,n,s){if(e===t&&n===s)return es;const c=d=>S8(d,0,1,e,n);return d=>d===0||d===1?d:_M(c(d),t,s)}const xM=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,bM=e=>t=>1-e(1-t),wM=jf(.33,1.53,.69,.99),Bw=bM(wM),SM=xM(Bw),CM=e=>(e*=2)<1?.5*Bw(e):.5*(2-Math.pow(2,-10*(e-1))),$w=e=>1-Math.sin(Math.acos(e)),TM=bM($w),PM=xM($w),C8=jf(.42,0,1,1),T8=jf(0,0,.58,1),kM=jf(.42,0,.58,1),P8=e=>Array.isArray(e)&&typeof e[0]!="number",EM=e=>Array.isArray(e)&&typeof e[0]=="number",k8={linear:es,easeIn:C8,easeInOut:kM,easeOut:T8,circIn:$w,circInOut:PM,circOut:TM,backIn:Bw,backInOut:SM,backOut:wM,anticipate:CM},E8=e=>typeof e=="string",kP=e=>{if(EM(e)){Dw(e.length===4);const[t,n,s,c]=e;return jf(t,n,s,c)}else if(E8(e))return k8[e];return e},Sg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function I8(e,t){let n=new Set,s=new Set,c=!1,d=!1;const p=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function b(k){p.has(k)&&(T.schedule(k),e()),k(l)}const T={schedule:(k,I=!1,M=!1)=>{const H=M&&c?n:s;return I&&p.add(k),H.has(k)||H.add(k),k},cancel:k=>{s.delete(k),p.delete(k)},process:k=>{if(l=k,c){d=!0;return}c=!0,[n,s]=[s,n],n.forEach(b),n.clear(),c=!1,d&&(d=!1,T.process(k))}};return T}const A8=40;function IM(e,t){let n=!1,s=!0;const c={delta:0,timestamp:0,isProcessing:!1},d=()=>n=!0,p=Sg.reduce((B,G)=>(B[G]=I8(d),B),{}),{setup:l,read:b,resolveKeyframes:T,preUpdate:k,update:I,preRender:M,render:D,postRender:H}=p,q=()=>{const B=Aa.useManualTiming?c.timestamp:performance.now();n=!1,Aa.useManualTiming||(c.delta=s?1e3/60:Math.max(Math.min(B-c.timestamp,A8),1)),c.timestamp=B,c.isProcessing=!0,l.process(c),b.process(c),T.process(c),k.process(c),I.process(c),M.process(c),D.process(c),H.process(c),c.isProcessing=!1,n&&t&&(s=!1,e(q))},J=()=>{n=!0,s=!0,c.isProcessing||e(q)};return{schedule:Sg.reduce((B,G)=>{const ne=p[G];return B[G]=(re,ae=!1,he=!1)=>(n||J(),ne.schedule(re,ae,he)),B},{}),cancel:B=>{for(let G=0;G<Sg.length;G++)p[Sg[G]].cancel(B)},state:c,steps:p}}const{schedule:wr,cancel:Ll,state:_i,steps:Qx}=IM(typeof requestAnimationFrame<"u"?requestAnimationFrame:es,!0);let Gg;function M8(){Gg=void 0}const oo={now:()=>(Gg===void 0&&oo.set(_i.isProcessing||Aa.useManualTiming?_i.timestamp:performance.now()),Gg),set:e=>{Gg=e,queueMicrotask(M8)}},AM=e=>t=>typeof t=="string"&&t.startsWith(e),Nw=AM("--"),R8=AM("var(--"),Vw=e=>R8(e)?z8.test(e.split("/*")[0].trim()):!1,z8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,qh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},bf={...qh,transform:e=>Ia(0,1,e)},Cg={...qh,default:1},Up=e=>Math.round(e*1e5)/1e5,jw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function L8(e){return e==null}const D8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Uw=(e,t)=>n=>!!(typeof n=="string"&&D8.test(n)&&n.startsWith(e)||t&&!L8(n)&&Object.prototype.hasOwnProperty.call(n,t)),MM=(e,t,n)=>s=>{if(typeof s!="string")return s;const[c,d,p,l]=s.match(jw);return{[e]:parseFloat(c),[t]:parseFloat(d),[n]:parseFloat(p),alpha:l!==void 0?parseFloat(l):1}},O8=e=>Ia(0,255,e),e0={...qh,transform:e=>Math.round(O8(e))},Eu={test:Uw("rgb","red"),parse:MM("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+e0.transform(e)+", "+e0.transform(t)+", "+e0.transform(n)+", "+Up(bf.transform(s))+")"};function F8(e){let t="",n="",s="",c="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),c=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),c=e.substring(4,5),t+=t,n+=n,s+=s,c+=c),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:c?parseInt(c,16)/255:1}}const Ab={test:Uw("#"),parse:F8,transform:Eu.transform},Uf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),pl=Uf("deg"),Ks=Uf("%"),yn=Uf("px"),B8=Uf("vh"),$8=Uf("vw"),EP={...Ks,parse:e=>Ks.parse(e)/100,transform:e=>Ks.transform(e*100)},ch={test:Uw("hsl","hue"),parse:MM("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Ks.transform(Up(t))+", "+Ks.transform(Up(n))+", "+Up(bf.transform(s))+")"},Wr={test:e=>Eu.test(e)||Ab.test(e)||ch.test(e),parse:e=>Eu.test(e)?Eu.parse(e):ch.test(e)?ch.parse(e):Ab.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Eu.transform(e):ch.transform(e),getAnimatableNone:e=>{const t=Wr.parse(e);return t.alpha=0,Wr.transform(t)}},N8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function V8(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(jw))==null?void 0:t.length)||0)+(((n=e.match(N8))==null?void 0:n.length)||0)>0}const RM="number",zM="color",j8="var",U8="var(",IP="${}",W8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wf(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},c=[];let d=0;const l=t.replace(W8,b=>(Wr.test(b)?(s.color.push(d),c.push(zM),n.push(Wr.parse(b))):b.startsWith(U8)?(s.var.push(d),c.push(j8),n.push(b)):(s.number.push(d),c.push(RM),n.push(parseFloat(b))),++d,IP)).split(IP);return{values:n,split:l,indexes:s,types:c}}function LM(e){return wf(e).values}function DM(e){const{split:t,types:n}=wf(e),s=t.length;return c=>{let d="";for(let p=0;p<s;p++)if(d+=t[p],c[p]!==void 0){const l=n[p];l===RM?d+=Up(c[p]):l===zM?d+=Wr.transform(c[p]):d+=c[p]}return d}}const H8=e=>typeof e=="number"?0:Wr.test(e)?Wr.getAnimatableNone(e):e;function q8(e){const t=LM(e);return DM(e)(t.map(H8))}const Dl={test:V8,parse:LM,createTransformer:DM,getAnimatableNone:q8};function t0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function G8({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let c=0,d=0,p=0;if(!t)c=d=p=n;else{const l=n<.5?n*(1+t):n+t-n*t,b=2*n-l;c=t0(b,l,e+1/3),d=t0(b,l,e),p=t0(b,l,e-1/3)}return{red:Math.round(c*255),green:Math.round(d*255),blue:Math.round(p*255),alpha:s}}function Dy(e,t){return n=>n>0?t:e}const Pr=(e,t,n)=>e+(t-e)*n,n0=(e,t,n)=>{const s=e*e,c=n*(t*t-s)+s;return c<0?0:Math.sqrt(c)},Z8=[Ab,Eu,ch],K8=e=>Z8.find(t=>t.test(e));function AP(e){const t=K8(e);if(!t)return!1;let n=t.parse(e);return t===ch&&(n=G8(n)),n}const MP=(e,t)=>{const n=AP(e),s=AP(t);if(!n||!s)return Dy(e,t);const c={...n};return d=>(c.red=n0(n.red,s.red,d),c.green=n0(n.green,s.green,d),c.blue=n0(n.blue,s.blue,d),c.alpha=Pr(n.alpha,s.alpha,d),Eu.transform(c))},Mb=new Set(["none","hidden"]);function X8(e,t){return Mb.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Y8(e,t){return n=>Pr(e,t,n)}function Ww(e){return typeof e=="number"?Y8:typeof e=="string"?Vw(e)?Dy:Wr.test(e)?MP:eU:Array.isArray(e)?OM:typeof e=="object"?Wr.test(e)?MP:J8:Dy}function OM(e,t){const n=[...e],s=n.length,c=e.map((d,p)=>Ww(d)(d,t[p]));return d=>{for(let p=0;p<s;p++)n[p]=c[p](d);return n}}function J8(e,t){const n={...e,...t},s={};for(const c in n)e[c]!==void 0&&t[c]!==void 0&&(s[c]=Ww(e[c])(e[c],t[c]));return c=>{for(const d in s)n[d]=s[d](c);return n}}function Q8(e,t){const n=[],s={color:0,var:0,number:0};for(let c=0;c<t.values.length;c++){const d=t.types[c],p=e.indexes[d][s[d]],l=e.values[p]??0;n[c]=l,s[d]++}return n}const eU=(e,t)=>{const n=Dl.createTransformer(t),s=wf(e),c=wf(t);return s.indexes.var.length===c.indexes.var.length&&s.indexes.color.length===c.indexes.color.length&&s.indexes.number.length>=c.indexes.number.length?Mb.has(e)&&!c.values.length||Mb.has(t)&&!s.values.length?X8(e,t):Vf(OM(Q8(s,c),c.values),n):Dy(e,t)};function FM(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Pr(e,t,n):Ww(e)(e,t)}const tU=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>wr.update(t,n),stop:()=>Ll(t),now:()=>_i.isProcessing?_i.timestamp:oo.now()}},BM=(e,t,n=10)=>{let s="";const c=Math.max(Math.round(t/n),2);for(let d=0;d<c;d++)s+=Math.round(e(d/(c-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Oy=2e4;function Hw(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<Oy;)t+=n,s=e.next(t);return t>=Oy?1/0:t}function nU(e,t=100,n){const s=n({...e,keyframes:[0,t]}),c=Math.min(Hw(s),Oy);return{type:"keyframes",ease:d=>s.next(c*d).value/t,duration:Zs(c)}}const rU=5;function $M(e,t,n){const s=Math.max(t-rU,0);return vM(n-e(s),t-s)}const Lr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},r0=.001;function iU({duration:e=Lr.duration,bounce:t=Lr.bounce,velocity:n=Lr.velocity,mass:s=Lr.mass}){let c,d,p=1-t;p=Ia(Lr.minDamping,Lr.maxDamping,p),e=Ia(Lr.minDuration,Lr.maxDuration,Zs(e)),p<1?(c=T=>{const k=T*p,I=k*e,M=k-n,D=Rb(T,p),H=Math.exp(-I);return r0-M/D*H},d=T=>{const I=T*p*e,M=I*n+n,D=Math.pow(p,2)*Math.pow(T,2)*e,H=Math.exp(-I),q=Rb(Math.pow(T,2),p);return(-c(T)+r0>0?-1:1)*((M-D)*H)/q}):(c=T=>{const k=Math.exp(-T*e),I=(T-n)*e+1;return-r0+k*I},d=T=>{const k=Math.exp(-T*e),I=(n-T)*(e*e);return k*I});const l=5/e,b=sU(c,d,l);if(e=Gs(e),isNaN(b))return{stiffness:Lr.stiffness,damping:Lr.damping,duration:e};{const T=Math.pow(b,2)*s;return{stiffness:T,damping:p*2*Math.sqrt(s*T),duration:e}}}const oU=12;function sU(e,t,n){let s=n;for(let c=1;c<oU;c++)s=s-e(s)/t(s);return s}function Rb(e,t){return e*Math.sqrt(1-t*t)}const aU=["duration","bounce"],lU=["stiffness","damping","mass"];function RP(e,t){return t.some(n=>e[n]!==void 0)}function uU(e){let t={velocity:Lr.velocity,stiffness:Lr.stiffness,damping:Lr.damping,mass:Lr.mass,isResolvedFromDuration:!1,...e};if(!RP(e,lU)&&RP(e,aU))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),c=s*s,d=2*Ia(.05,1,1-(e.bounce||0))*Math.sqrt(c);t={...t,mass:Lr.mass,stiffness:c,damping:d}}else{const n=iU(e);t={...t,...n,mass:Lr.mass},t.isResolvedFromDuration=!0}return t}function Fy(e=Lr.visualDuration,t=Lr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:c}=n;const d=n.keyframes[0],p=n.keyframes[n.keyframes.length-1],l={done:!1,value:d},{stiffness:b,damping:T,mass:k,duration:I,velocity:M,isResolvedFromDuration:D}=uU({...n,velocity:-Zs(n.velocity||0)}),H=M||0,q=T/(2*Math.sqrt(b*k)),J=p-d,$=Zs(Math.sqrt(b/k)),V=Math.abs(J)<5;s||(s=V?Lr.restSpeed.granular:Lr.restSpeed.default),c||(c=V?Lr.restDelta.granular:Lr.restDelta.default);let B;if(q<1){const ne=Rb($,q);B=re=>{const ae=Math.exp(-q*$*re);return p-ae*((H+q*$*J)/ne*Math.sin(ne*re)+J*Math.cos(ne*re))}}else if(q===1)B=ne=>p-Math.exp(-$*ne)*(J+(H+$*J)*ne);else{const ne=$*Math.sqrt(q*q-1);B=re=>{const ae=Math.exp(-q*$*re),he=Math.min(ne*re,300);return p-ae*((H+q*$*J)*Math.sinh(he)+ne*J*Math.cosh(he))/ne}}const G={calculatedDuration:D&&I||null,next:ne=>{const re=B(ne);if(D)l.done=ne>=I;else{let ae=ne===0?H:0;q<1&&(ae=ne===0?Gs(H):$M(B,ne,re));const he=Math.abs(ae)<=s,Me=Math.abs(p-re)<=c;l.done=he&&Me}return l.value=l.done?p:re,l},toString:()=>{const ne=Math.min(Hw(G),Oy),re=BM(ae=>G.next(ne*ae).value,ne,30);return ne+"ms "+re},toTransition:()=>{}};return G}Fy.applyToOptions=e=>{const t=nU(e,100,Fy);return e.ease=t.ease,e.duration=Gs(t.duration),e.type="keyframes",e};function zb({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:c=10,bounceStiffness:d=500,modifyTarget:p,min:l,max:b,restDelta:T=.5,restSpeed:k}){const I=e[0],M={done:!1,value:I},D=he=>l!==void 0&&he<l||b!==void 0&&he>b,H=he=>l===void 0?b:b===void 0||Math.abs(l-he)<Math.abs(b-he)?l:b;let q=n*t;const J=I+q,$=p===void 0?J:p(J);$!==J&&(q=$-I);const V=he=>-q*Math.exp(-he/s),B=he=>$+V(he),G=he=>{const Me=V(he),Ee=B(he);M.done=Math.abs(Me)<=T,M.value=M.done?$:Ee};let ne,re;const ae=he=>{D(M.value)&&(ne=he,re=Fy({keyframes:[M.value,H(M.value)],velocity:$M(B,he,M.value),damping:c,stiffness:d,restDelta:T,restSpeed:k}))};return ae(0),{calculatedDuration:null,next:he=>{let Me=!1;return!re&&ne===void 0&&(Me=!0,G(he),ae(he)),ne!==void 0&&he>=ne?re.next(he-ne):(!Me&&G(he),M)}}}function cU(e,t,n){const s=[],c=n||Aa.mix||FM,d=e.length-1;for(let p=0;p<d;p++){let l=c(e[p],e[p+1]);if(t){const b=Array.isArray(t)?t[p]||es:t;l=Vf(b,l)}s.push(l)}return s}function hU(e,t,{clamp:n=!0,ease:s,mixer:c}={}){const d=e.length;if(Dw(d===t.length),d===1)return()=>t[0];if(d===2&&t[0]===t[1])return()=>t[1];const p=e[0]===e[1];e[0]>e[d-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=cU(t,s,c),b=l.length,T=k=>{if(p&&k<e[0])return t[0];let I=0;if(b>1)for(;I<e.length-2&&!(k<e[I+1]);I++);const M=xf(e[I],e[I+1],k);return l[I](M)};return n?k=>T(Ia(e[0],e[d-1],k)):T}function dU(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const c=xf(0,t,s);e.push(Pr(n,1,c))}}function pU(e){const t=[0];return dU(t,e.length-1),t}function fU(e,t){return e.map(n=>n*t)}function mU(e,t){return e.map(()=>t||kM).splice(0,e.length-1)}function Wp({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const c=P8(s)?s.map(kP):kP(s),d={done:!1,value:t[0]},p=fU(n&&n.length===t.length?n:pU(t),e),l=hU(p,t,{ease:Array.isArray(c)?c:mU(t,c)});return{calculatedDuration:e,next:b=>(d.value=l(b),d.done=b>=e,d)}}const gU=e=>e!==null;function qw(e,{repeat:t,repeatType:n="loop"},s,c=1){const d=e.filter(gU),l=c<0||t&&n!=="loop"&&t%2===1?0:d.length-1;return!l||s===void 0?d[l]:s}const yU={decay:zb,inertia:zb,tween:Wp,keyframes:Wp,spring:Fy};function NM(e){typeof e.type=="string"&&(e.type=yU[e.type])}class Gw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const vU=e=>e/100;class Zw extends Gw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,c;const{motionValue:n}=this.options;n&&n.updatedAt!==oo.now()&&this.tick(oo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(c=(s=this.options).onStop)==null||c.call(s))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;NM(t);const{type:n=Wp,repeat:s=0,repeatDelay:c=0,repeatType:d,velocity:p=0}=t;let{keyframes:l}=t;const b=n||Wp;b!==Wp&&typeof l[0]!="number"&&(this.mixKeyframes=Vf(vU,FM(l[0],l[1])),l=[0,100]);const T=b({...t,keyframes:l});d==="mirror"&&(this.mirroredGenerator=b({...t,keyframes:[...l].reverse(),velocity:-p})),T.calculatedDuration===null&&(T.calculatedDuration=Hw(T));const{calculatedDuration:k}=T;this.calculatedDuration=k,this.resolvedDuration=k+c,this.totalDuration=this.resolvedDuration*(s+1)-c,this.generator=T}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:s,totalDuration:c,mixKeyframes:d,mirroredGenerator:p,resolvedDuration:l,calculatedDuration:b}=this;if(this.startTime===null)return s.next(0);const{delay:T=0,keyframes:k,repeat:I,repeatType:M,repeatDelay:D,type:H,onUpdate:q,finalKeyframe:J}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const $=this.currentTime-T*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?$<0:$>c;this.currentTime=Math.max($,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let B=this.currentTime,G=s;if(I){const he=Math.min(this.currentTime,c)/l;let Me=Math.floor(he),Ee=he%1;!Ee&&he>=1&&(Ee=1),Ee===1&&Me--,Me=Math.min(Me,I+1),!!(Me%2)&&(M==="reverse"?(Ee=1-Ee,D&&(Ee-=D/l)):M==="mirror"&&(G=p)),B=Ia(0,1,Ee)*l}const ne=V?{done:!1,value:k[0]}:G.next(B);d&&(ne.value=d(ne.value));let{done:re}=ne;!V&&b!==null&&(re=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const ae=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&re);return ae&&H!==zb&&(ne.value=qw(k,this.options,J,this.speed)),q&&q(ne.value),ae&&this.finish(),ne}then(t,n){return this.finished.then(t,n)}get duration(){return Zs(this.calculatedDuration)}get time(){return Zs(this.currentTime)}set time(t){var n;t=Gs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(oo.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Zs(this.currentTime))}play(){var c,d;if(this.isStopped)return;const{driver:t=tU,startTime:n}=this.options;this.driver||(this.driver=t(p=>this.tick(p))),(d=(c=this.options).onPlay)==null||d.call(c);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(oo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function _U(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Iu=e=>e*180/Math.PI,Lb=e=>{const t=Iu(Math.atan2(e[1],e[0]));return Db(t)},xU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Lb,rotateZ:Lb,skewX:e=>Iu(Math.atan(e[1])),skewY:e=>Iu(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Db=e=>(e=e%360,e<0&&(e+=360),e),zP=Lb,LP=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),DP=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),bU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:LP,scaleY:DP,scale:e=>(LP(e)+DP(e))/2,rotateX:e=>Db(Iu(Math.atan2(e[6],e[5]))),rotateY:e=>Db(Iu(Math.atan2(-e[2],e[0]))),rotateZ:zP,rotate:zP,skewX:e=>Iu(Math.atan(e[4])),skewY:e=>Iu(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Ob(e){return e.includes("scale")?1:0}function Fb(e,t){if(!e||e==="none")return Ob(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,c;if(n)s=bU,c=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=xU,c=l}if(!c)return Ob(t);const d=s[t],p=c[1].split(",").map(SU);return typeof d=="function"?d(p):p[d]}const wU=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Fb(n,t)};function SU(e){return parseFloat(e.trim())}const Gh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zh=new Set(Gh),OP=e=>e===qh||e===yn,CU=new Set(["x","y","z"]),TU=Gh.filter(e=>!CU.has(e));function PU(e){const t=[];return TU.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const zu={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Fb(t,"x"),y:(e,{transform:t})=>Fb(t,"y")};zu.translateX=zu.x;zu.translateY=zu.y;const Lu=new Set;let Bb=!1,$b=!1,Nb=!1;function VM(){if($b){const e=Array.from(Lu).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const c=PU(s);c.length&&(n.set(s,c),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const c=n.get(s);c&&c.forEach(([d,p])=>{var l;(l=s.getValue(d))==null||l.set(p)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}$b=!1,Bb=!1,Lu.forEach(e=>e.complete(Nb)),Lu.clear()}function jM(){Lu.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&($b=!0)})}function kU(){Nb=!0,jM(),VM(),Nb=!1}class Kw{constructor(t,n,s,c,d,p=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=c,this.element=d,this.isAsync=p}scheduleResolve(){this.state="scheduled",this.isAsync?(Lu.add(this),Bb||(Bb=!0,wr.read(jM),wr.resolveKeyframes(VM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:c}=this;if(t[0]===null){const d=c==null?void 0:c.get(),p=t[t.length-1];if(d!==void 0)t[0]=d;else if(s&&n){const l=s.readValue(n,p);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=p),c&&d===void 0&&c.set(t[0])}_U(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Lu.delete(this)}cancel(){this.state==="scheduled"&&(Lu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const EU=e=>e.startsWith("--");function IU(e,t,n){EU(t)?e.style.setProperty(t,n):e.style[t]=n}const AU=Ow(()=>window.ScrollTimeline!==void 0),MU={};function RU(e,t){const n=Ow(e);return()=>MU[t]??n()}const UM=RU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Tp=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,FP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Tp([0,.65,.55,1]),circOut:Tp([.55,0,1,.45]),backIn:Tp([.31,.01,.66,-.59]),backOut:Tp([.33,1.53,.69,.99])};function WM(e,t){if(e)return typeof e=="function"?UM()?BM(e,t):"ease-out":EM(e)?Tp(e):Array.isArray(e)?e.map(n=>WM(n,t)||FP.easeOut):FP[e]}function zU(e,t,n,{delay:s=0,duration:c=300,repeat:d=0,repeatType:p="loop",ease:l="easeOut",times:b}={},T=void 0){const k={[t]:n};b&&(k.offset=b);const I=WM(l,c);Array.isArray(I)&&(k.easing=I);const M={delay:s,duration:c,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:d+1,direction:p==="reverse"?"alternate":"normal"};return T&&(M.pseudoElement=T),e.animate(k,M)}function HM(e){return typeof e=="function"&&"applyToOptions"in e}function LU({type:e,...t}){return HM(e)&&UM()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class DU extends Gw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:s,keyframes:c,pseudoElement:d,allowFlatten:p=!1,finalKeyframe:l,onComplete:b}=t;this.isPseudoElement=!!d,this.allowFlatten=p,this.options=t,Dw(typeof t.type!="string");const T=LU(t);this.animation=zU(n,s,c,T,d),T.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!d){const k=qw(c,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(k):IU(n,s,k),this.animation.cancel()}b==null||b(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,s;const t=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return Zs(Number(t))}get time(){return Zs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Gs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&AU()?(this.animation.timeline=t,es):n(this)}}const qM={anticipate:CM,backInOut:SM,circInOut:PM};function OU(e){return e in qM}function FU(e){typeof e.ease=="string"&&OU(e.ease)&&(e.ease=qM[e.ease])}const BP=10;class BU extends DU{constructor(t){FU(t),NM(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:s,onComplete:c,element:d,...p}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new Zw({...p,autoplay:!1}),b=Gs(this.finishedTime??this.time);n.setWithVelocity(l.sample(b-BP).value,l.sample(b).value,BP),l.stop()}}const $P=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Dl.test(e)||e==="0")&&!e.startsWith("url("));function $U(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function NU(e,t,n,s){const c=e[0];if(c===null)return!1;if(t==="display"||t==="visibility")return!0;const d=e[e.length-1],p=$P(c,t),l=$P(d,t);return!p||!l?!1:$U(e)||(n==="spring"||HM(n))&&s}function Vb(e){e.duration=0,e.type}const VU=new Set(["opacity","clipPath","filter","transform"]),jU=Ow(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function UU(e){var k;const{motionValue:t,name:n,repeatDelay:s,repeatType:c,damping:d,type:p}=e;if(!(((k=t==null?void 0:t.owner)==null?void 0:k.current)instanceof HTMLElement))return!1;const{onUpdate:b,transformTemplate:T}=t.owner.getProps();return jU()&&n&&VU.has(n)&&(n!=="transform"||!T)&&!b&&!s&&c!=="mirror"&&d!==0&&p!=="inertia"}const WU=40;class HU extends Gw{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:c=0,repeatDelay:d=0,repeatType:p="loop",keyframes:l,name:b,motionValue:T,element:k,...I}){var H;super(),this.stop=()=>{var q,J;this._animation&&(this._animation.stop(),(q=this.stopTimeline)==null||q.call(this)),(J=this.keyframeResolver)==null||J.cancel()},this.createdAt=oo.now();const M={autoplay:t,delay:n,type:s,repeat:c,repeatDelay:d,repeatType:p,name:b,motionValue:T,element:k,...I},D=(k==null?void 0:k.KeyframeResolver)||Kw;this.keyframeResolver=new D(l,(q,J,$)=>this.onKeyframesResolved(q,J,M,!$),b,T,k),(H=this.keyframeResolver)==null||H.scheduleResolve()}onKeyframesResolved(t,n,s,c){this.keyframeResolver=void 0;const{name:d,type:p,velocity:l,delay:b,isHandoff:T,onUpdate:k}=s;this.resolvedAt=oo.now(),NU(t,d,p,l)||((Aa.instantAnimations||!b)&&(k==null||k(qw(t,s,n))),t[0]=t[t.length-1],Vb(s),s.repeat=0);const M={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>WU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:t},D=!T&&UU(M)?new BU({...M,element:M.motionValue.owner.current}):new Zw(M);D.finished.then(()=>this.notifyFinished()).catch(es),this.pendingTimeline&&(this.stopTimeline=D.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=D}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),kU()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const qU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function GU(e){const t=qU.exec(e);if(!t)return[,];const[,n,s,c]=t;return[`--${n??s}`,c]}function GM(e,t,n=1){const[s,c]=GU(e);if(!s)return;const d=window.getComputedStyle(t).getPropertyValue(s);if(d){const p=d.trim();return mM(p)?parseFloat(p):p}return Vw(c)?GM(c,t,n+1):c}function Xw(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const ZM=new Set(["width","height","top","left","right","bottom",...Gh]),ZU={test:e=>e==="auto",parse:e=>e},KM=e=>t=>t.test(e),XM=[qh,yn,Ks,pl,$8,B8,ZU],NP=e=>XM.find(KM(e));function KU(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||yM(e):!0}const XU=new Set(["brightness","contrast","saturate","opacity"]);function YU(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(jw)||[];if(!s)return e;const c=n.replace(s,"");let d=XU.has(t)?1:0;return s!==n&&(d*=100),t+"("+d+c+")"}const JU=/\b([a-z-]*)\(.*?\)/gu,jb={...Dl,getAnimatableNone:e=>{const t=e.match(JU);return t?t.map(YU).join(" "):e}},VP={...qh,transform:Math.round},QU={rotate:pl,rotateX:pl,rotateY:pl,rotateZ:pl,scale:Cg,scaleX:Cg,scaleY:Cg,scaleZ:Cg,skew:pl,skewX:pl,skewY:pl,distance:yn,translateX:yn,translateY:yn,translateZ:yn,x:yn,y:yn,z:yn,perspective:yn,transformPerspective:yn,opacity:bf,originX:EP,originY:EP,originZ:yn},Yw={borderWidth:yn,borderTopWidth:yn,borderRightWidth:yn,borderBottomWidth:yn,borderLeftWidth:yn,borderRadius:yn,radius:yn,borderTopLeftRadius:yn,borderTopRightRadius:yn,borderBottomRightRadius:yn,borderBottomLeftRadius:yn,width:yn,maxWidth:yn,height:yn,maxHeight:yn,top:yn,right:yn,bottom:yn,left:yn,padding:yn,paddingTop:yn,paddingRight:yn,paddingBottom:yn,paddingLeft:yn,margin:yn,marginTop:yn,marginRight:yn,marginBottom:yn,marginLeft:yn,backgroundPositionX:yn,backgroundPositionY:yn,...QU,zIndex:VP,fillOpacity:bf,strokeOpacity:bf,numOctaves:VP},e9={...Yw,color:Wr,backgroundColor:Wr,outlineColor:Wr,fill:Wr,stroke:Wr,borderColor:Wr,borderTopColor:Wr,borderRightColor:Wr,borderBottomColor:Wr,borderLeftColor:Wr,filter:jb,WebkitFilter:jb},YM=e=>e9[e];function JM(e,t){let n=YM(e);return n!==jb&&(n=Dl),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const t9=new Set(["auto","none","0"]);function n9(e,t,n){let s=0,c;for(;s<e.length&&!c;){const d=e[s];typeof d=="string"&&!t9.has(d)&&wf(d).values.length&&(c=e[s]),s++}if(c&&n)for(const d of t)e[d]=JM(n,c)}class r9 extends Kw{constructor(t,n,s,c,d){super(t,n,s,c,d,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let b=0;b<t.length;b++){let T=t[b];if(typeof T=="string"&&(T=T.trim(),Vw(T))){const k=GM(T,n.current);k!==void 0&&(t[b]=k),b===t.length-1&&(this.finalKeyframe=T)}}if(this.resolveNoneKeyframes(),!ZM.has(s)||t.length!==2)return;const[c,d]=t,p=NP(c),l=NP(d);if(p!==l)if(OP(p)&&OP(l))for(let b=0;b<t.length;b++){const T=t[b];typeof T=="string"&&(t[b]=parseFloat(T))}else zu[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let c=0;c<t.length;c++)(t[c]===null||KU(t[c]))&&s.push(c);s.length&&n9(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zu[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const c=n[n.length-1];c!==void 0&&t.getValue(s,c).jump(c,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const c=t.getValue(n);c&&c.jump(this.measuredOrigin,!1);const d=s.length-1,p=s[d];s[d]=zu[n](t.measureViewportBox(),window.getComputedStyle(t.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([b,T])=>{t.getValue(b).set(T)}),this.resolveNoneKeyframes()}}function i9(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let s=document;const c=(n==null?void 0:n[e])??s.querySelectorAll(e);return c?Array.from(c):[]}return Array.from(e)}const QM=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function eR(e){return gM(e)&&"offsetHeight"in e}const jP=30,o9=e=>!isNaN(parseFloat(e));class s9{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var d;const c=oo.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((d=this.events.change)==null||d.notify(this.current),this.dependents))for(const p of this.dependents)p.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=oo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=o9(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Fw);const s=this.events[t].add(n);return t==="change"?()=>{s(),wr.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=oo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>jP)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jP);return vM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $h(e,t){return new s9(e,t)}const{schedule:Jw}=IM(queueMicrotask,!1),fs={x:!1,y:!1};function tR(){return fs.x||fs.y}function a9(e){return e==="x"||e==="y"?fs[e]?null:(fs[e]=!0,()=>{fs[e]=!1}):fs.x||fs.y?null:(fs.x=fs.y=!0,()=>{fs.x=fs.y=!1})}function nR(e,t){const n=i9(e),s=new AbortController,c={passive:!0,...t,signal:s.signal};return[n,c,()=>s.abort()]}function UP(e){return!(e.pointerType==="touch"||tR())}function l9(e,t,n={}){const[s,c,d]=nR(e,n),p=l=>{if(!UP(l))return;const{target:b}=l,T=t(b,l);if(typeof T!="function"||!b)return;const k=I=>{UP(I)&&(T(I),b.removeEventListener("pointerleave",k))};b.addEventListener("pointerleave",k,c)};return s.forEach(l=>{l.addEventListener("pointerenter",p,c)}),d}const rR=(e,t)=>t?e===t?!0:rR(e,t.parentElement):!1,Qw=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,u9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function c9(e){return u9.has(e.tagName)||e.tabIndex!==-1}const Zg=new WeakSet;function WP(e){return t=>{t.key==="Enter"&&e(t)}}function i0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const h9=(e,t)=>{const n=e.currentTarget;if(!n)return;const s=WP(()=>{if(Zg.has(n))return;i0(n,"down");const c=WP(()=>{i0(n,"up")}),d=()=>i0(n,"cancel");n.addEventListener("keyup",c,t),n.addEventListener("blur",d,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function HP(e){return Qw(e)&&!tR()}function d9(e,t,n={}){const[s,c,d]=nR(e,n),p=l=>{const b=l.currentTarget;if(!HP(l))return;Zg.add(b);const T=t(b,l),k=(D,H)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",M),Zg.has(b)&&Zg.delete(b),HP(D)&&typeof T=="function"&&T(D,{success:H})},I=D=>{k(D,b===window||b===document||n.useGlobalTarget||rR(b,D.target))},M=D=>{k(D,!1)};window.addEventListener("pointerup",I,c),window.addEventListener("pointercancel",M,c)};return s.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",p,c),eR(l)&&(l.addEventListener("focus",T=>h9(T,c)),!c9(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),d}function iR(e){return gM(e)&&"ownerSVGElement"in e}function p9(e){return iR(e)&&e.tagName==="svg"}const Fi=e=>!!(e&&e.getVelocity),f9=[...XM,Wr,Dl],m9=e=>f9.find(KM(e)),eS=W.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class g9 extends W.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,c=eR(s)&&s.offsetWidth||0,d=this.props.sizeRef.current;d.height=n.offsetHeight||0,d.width=n.offsetWidth||0,d.top=n.offsetTop,d.left=n.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function y9({children:e,isPresent:t,anchorX:n,root:s}){const c=W.useId(),d=W.useRef(null),p=W.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=W.useContext(eS);return W.useInsertionEffect(()=>{const{width:b,height:T,top:k,left:I,right:M}=p.current;if(t||!d.current||!b||!T)return;const D=n==="left"?`left: ${I}`:`right: ${M}`;d.current.dataset.motionPopId=c;const H=document.createElement("style");l&&(H.nonce=l);const q=s??document.head;return q.appendChild(H),H.sheet&&H.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${b}px !important;
            height: ${T}px !important;
            ${D}px !important;
            top: ${k}px !important;
          }
        `),()=>{q.contains(H)&&q.removeChild(H)}},[t]),ye.jsx(g9,{isPresent:t,childRef:d,sizeRef:p,children:W.cloneElement(e,{ref:d})})}const v9=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:c,presenceAffectsLayout:d,mode:p,anchorX:l,root:b})=>{const T=Mw(_9),k=W.useId();let I=!0,M=W.useMemo(()=>(I=!1,{id:k,initial:t,isPresent:n,custom:c,onExitComplete:D=>{T.set(D,!0);for(const H of T.values())if(!H)return;s&&s()},register:D=>(T.set(D,!1),()=>T.delete(D))}),[n,T,s]);return d&&I&&(M={...M}),W.useMemo(()=>{T.forEach((D,H)=>T.set(H,!1))},[n]),W.useEffect(()=>{!n&&!T.size&&s&&s()},[n]),p==="popLayout"&&(e=ye.jsx(y9,{isPresent:n,anchorX:l,root:b,children:e})),ye.jsx(Yv.Provider,{value:M,children:e})};function _9(){return new Map}function oR(e=!0){const t=W.useContext(Yv);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:c}=t,d=W.useId();W.useEffect(()=>{if(e)return c(d)},[e]);const p=W.useCallback(()=>e&&s&&s(d),[d,s,e]);return!n&&s?[!1,p]:[!0]}const Tg=e=>e.key||"";function qP(e){const t=[];return W.Children.forEach(e,n=>{W.isValidElement(n)&&t.push(n)}),t}const sR=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:c=!0,mode:d="sync",propagate:p=!1,anchorX:l="left",root:b})=>{const[T,k]=oR(p),I=W.useMemo(()=>qP(e),[e]),M=p&&!T?[]:I.map(Tg),D=W.useRef(!0),H=W.useRef(I),q=Mw(()=>new Map),[J,$]=W.useState(I),[V,B]=W.useState(I);fM(()=>{D.current=!1,H.current=I;for(let re=0;re<V.length;re++){const ae=Tg(V[re]);M.includes(ae)?q.delete(ae):q.get(ae)!==!0&&q.set(ae,!1)}},[V,M.length,M.join("-")]);const G=[];if(I!==J){let re=[...I];for(let ae=0;ae<V.length;ae++){const he=V[ae],Me=Tg(he);M.includes(Me)||(re.splice(ae,0,he),G.push(he))}return d==="wait"&&G.length&&(re=G),B(qP(re)),$(I),null}const{forceRender:ne}=W.useContext(Aw);return ye.jsx(ye.Fragment,{children:V.map(re=>{const ae=Tg(re),he=p&&!T?!1:I===V||M.includes(ae),Me=()=>{if(q.has(ae))q.set(ae,!0);else return;let Ee=!0;q.forEach(Re=>{Re||(Ee=!1)}),Ee&&(ne==null||ne(),B(H.current),p&&(k==null||k()),s&&s())};return ye.jsx(v9,{isPresent:he,initial:!D.current||n?void 0:!1,custom:t,presenceAffectsLayout:c,mode:d,root:b,onExitComplete:he?void 0:Me,anchorX:l,children:re},ae)})})},aR=W.createContext({strict:!1}),GP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nh={};for(const e in GP)Nh[e]={isEnabled:t=>GP[e].some(n=>!!t[n])};function x9(e){for(const t in e)Nh[t]={...Nh[t],...e[t]}}const b9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function By(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||b9.has(e)}let lR=e=>!By(e);function w9(e){typeof e=="function"&&(lR=t=>t.startsWith("on")?!By(t):e(t))}try{w9(require("@emotion/is-prop-valid").default)}catch{}function S9(e,t,n){const s={};for(const c in e)c==="values"&&typeof e.values=="object"||(lR(c)||n===!0&&By(c)||!t&&!By(c)||e.draggable&&c.startsWith("onDrag"))&&(s[c]=e[c]);return s}const Jv=W.createContext({});function Qv(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Sf(e){return typeof e=="string"||Array.isArray(e)}const tS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nS=["initial",...tS];function e_(e){return Qv(e.animate)||nS.some(t=>Sf(e[t]))}function uR(e){return!!(e_(e)||e.variants)}function C9(e,t){if(e_(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Sf(n)?n:void 0,animate:Sf(s)?s:void 0}}return e.inherit!==!1?t:{}}function T9(e){const{initial:t,animate:n}=C9(e,W.useContext(Jv));return W.useMemo(()=>({initial:t,animate:n}),[ZP(t),ZP(n)])}function ZP(e){return Array.isArray(e)?e.join(" "):e}const Cf={};function P9(e){for(const t in e)Cf[t]=e[t],Nw(t)&&(Cf[t].isCSSVariable=!0)}function cR(e,{layout:t,layoutId:n}){return Zh.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Cf[e]||e==="opacity")}const k9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},E9=Gh.length;function I9(e,t,n){let s="",c=!0;for(let d=0;d<E9;d++){const p=Gh[d],l=e[p];if(l===void 0)continue;let b=!0;if(typeof l=="number"?b=l===(p.startsWith("scale")?1:0):b=parseFloat(l)===0,!b||n){const T=QM(l,Yw[p]);if(!b){c=!1;const k=k9[p]||p;s+=`${k}(${T}) `}n&&(t[p]=T)}}return s=s.trim(),n?s=n(t,c?"":s):c&&(s="none"),s}function rS(e,t,n){const{style:s,vars:c,transformOrigin:d}=e;let p=!1,l=!1;for(const b in t){const T=t[b];if(Zh.has(b)){p=!0;continue}else if(Nw(b)){c[b]=T;continue}else{const k=QM(T,Yw[b]);b.startsWith("origin")?(l=!0,d[b]=k):s[b]=k}}if(t.transform||(p||n?s.transform=I9(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:b="50%",originY:T="50%",originZ:k=0}=d;s.transformOrigin=`${b} ${T} ${k}`}}const iS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hR(e,t,n){for(const s in t)!Fi(t[s])&&!cR(s,n)&&(e[s]=t[s])}function A9({transformTemplate:e},t){return W.useMemo(()=>{const n=iS();return rS(n,t,e),Object.assign({},n.vars,n.style)},[t])}function M9(e,t){const n=e.style||{},s={};return hR(s,n,e),Object.assign(s,A9(e,t)),s}function R9(e,t){const n={},s=M9(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const z9={offset:"stroke-dashoffset",array:"stroke-dasharray"},L9={offset:"strokeDashoffset",array:"strokeDasharray"};function D9(e,t,n=1,s=0,c=!0){e.pathLength=1;const d=c?z9:L9;e[d.offset]=yn.transform(-s);const p=yn.transform(t),l=yn.transform(n);e[d.array]=`${p} ${l}`}function dR(e,{attrX:t,attrY:n,attrScale:s,pathLength:c,pathSpacing:d=1,pathOffset:p=0,...l},b,T,k){if(rS(e,l,T),b){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:I,style:M}=e;I.transform&&(M.transform=I.transform,delete I.transform),(M.transform||I.transformOrigin)&&(M.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),M.transform&&(M.transformBox=(k==null?void 0:k.transformBox)??"fill-box",delete I.transformBox),t!==void 0&&(I.x=t),n!==void 0&&(I.y=n),s!==void 0&&(I.scale=s),c!==void 0&&D9(I,c,d,p,!1)}const pR=()=>({...iS(),attrs:{}}),fR=e=>typeof e=="string"&&e.toLowerCase()==="svg";function O9(e,t,n,s){const c=W.useMemo(()=>{const d=pR();return dR(d,t,fR(s),e.transformTemplate,e.style),{...d.attrs,style:{...d.style}}},[t]);if(e.style){const d={};hR(d,e.style,e),c.style={...d,...c.style}}return c}const F9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oS(e){return typeof e!="string"||e.includes("-")?!1:!!(F9.indexOf(e)>-1||/[A-Z]/u.test(e))}function B9(e,t,n,{latestValues:s},c,d=!1){const l=(oS(e)?O9:R9)(t,s,c,e),b=S9(t,typeof e=="string",d),T=e!==W.Fragment?{...b,...l,ref:n}:{},{children:k}=t,I=W.useMemo(()=>Fi(k)?k.get():k,[k]);return W.createElement(e,{...T,children:I})}function KP(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function sS(e,t,n,s){if(typeof t=="function"){const[c,d]=KP(s);t=t(n!==void 0?n:e.custom,c,d)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[c,d]=KP(s);t=t(n!==void 0?n:e.custom,c,d)}return t}function Kg(e){return Fi(e)?e.get():e}function $9({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,c){return{latestValues:N9(n,s,c,e),renderState:t()}}function N9(e,t,n,s){const c={},d=s(e,{});for(const M in d)c[M]=Kg(d[M]);let{initial:p,animate:l}=e;const b=e_(e),T=uR(e);t&&T&&!b&&e.inherit!==!1&&(p===void 0&&(p=t.initial),l===void 0&&(l=t.animate));let k=n?n.initial===!1:!1;k=k||p===!1;const I=k?l:p;if(I&&typeof I!="boolean"&&!Qv(I)){const M=Array.isArray(I)?I:[I];for(let D=0;D<M.length;D++){const H=sS(e,M[D]);if(H){const{transitionEnd:q,transition:J,...$}=H;for(const V in $){let B=$[V];if(Array.isArray(B)){const G=k?B.length-1:0;B=B[G]}B!==null&&(c[V]=B)}for(const V in q)c[V]=q[V]}}}return c}const mR=e=>(t,n)=>{const s=W.useContext(Jv),c=W.useContext(Yv),d=()=>$9(e,t,s,c);return n?d():Mw(d)};function aS(e,t,n){var d;const{style:s}=e,c={};for(const p in s)(Fi(s[p])||t.style&&Fi(t.style[p])||cR(p,e)||((d=n==null?void 0:n.getValue(p))==null?void 0:d.liveStyle)!==void 0)&&(c[p]=s[p]);return c}const V9=mR({scrapeMotionValuesFromProps:aS,createRenderState:iS});function gR(e,t,n){const s=aS(e,t,n);for(const c in e)if(Fi(e[c])||Fi(t[c])){const d=Gh.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;s[d]=e[c]}return s}const j9=mR({scrapeMotionValuesFromProps:gR,createRenderState:pR}),U9=Symbol.for("motionComponentSymbol");function hh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function W9(e,t,n){return W.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):hh(n)&&(n.current=s))},[t])}const lS=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H9="framerAppearId",yR="data-"+lS(H9),vR=W.createContext({});function q9(e,t,n,s,c){var q,J;const{visualElement:d}=W.useContext(Jv),p=W.useContext(aR),l=W.useContext(Yv),b=W.useContext(eS).reducedMotion,T=W.useRef(null);s=s||p.renderer,!T.current&&s&&(T.current=s(e,{visualState:t,parent:d,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:b}));const k=T.current,I=W.useContext(vR);k&&!k.projection&&c&&(k.type==="html"||k.type==="svg")&&G9(T.current,n,c,I);const M=W.useRef(!1);W.useInsertionEffect(()=>{k&&M.current&&k.update(n,l)});const D=n[yR],H=W.useRef(!!D&&!((q=window.MotionHandoffIsComplete)!=null&&q.call(window,D))&&((J=window.MotionHasOptimisedAnimation)==null?void 0:J.call(window,D)));return fM(()=>{k&&(M.current=!0,window.MotionIsMounted=!0,k.updateFeatures(),k.scheduleRenderMicrotask(),H.current&&k.animationState&&k.animationState.animateChanges())}),W.useEffect(()=>{k&&(!H.current&&k.animationState&&k.animationState.animateChanges(),H.current&&(queueMicrotask(()=>{var $;($=window.MotionHandoffMarkAsComplete)==null||$.call(window,D)}),H.current=!1),k.enteringChildren=void 0)}),k}function G9(e,t,n,s){const{layoutId:c,layout:d,drag:p,dragConstraints:l,layoutScroll:b,layoutRoot:T,layoutCrossfade:k}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:_R(e.parent)),e.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!p||l&&hh(l),visualElement:e,animationType:typeof d=="string"?d:"both",initialPromotionConfig:s,crossfade:k,layoutScroll:b,layoutRoot:T})}function _R(e){if(e)return e.options.allowProjection!==!1?e.projection:_R(e.parent)}function o0(e,{forwardMotionProps:t=!1}={},n,s){n&&x9(n);const c=oS(e)?j9:V9;function d(l,b){let T;const k={...W.useContext(eS),...l,layoutId:Z9(l)},{isStatic:I}=k,M=T9(l),D=c(l,I);if(!I&&Rw){K9();const H=X9(k);T=H.MeasureLayout,M.visualElement=q9(e,D,k,s,H.ProjectionNode)}return ye.jsxs(Jv.Provider,{value:M,children:[T&&M.visualElement?ye.jsx(T,{visualElement:M.visualElement,...k}):null,B9(e,l,W9(D,M.visualElement,b),D,I,t)]})}d.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const p=W.forwardRef(d);return p[U9]=e,p}function Z9({layoutId:e}){const t=W.useContext(Aw).id;return t&&e!==void 0?t+"-"+e:e}function K9(e,t){W.useContext(aR).strict}function X9(e){const{drag:t,layout:n}=Nh;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function Y9(e,t){if(typeof Proxy>"u")return o0;const n=new Map,s=(d,p)=>o0(d,p,e,t),c=(d,p)=>s(d,p);return new Proxy(c,{get:(d,p)=>p==="create"?s:(n.has(p)||n.set(p,o0(p,void 0,e,t)),n.get(p))})}function xR({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function J9({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Q9(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function s0(e){return e===void 0||e===1}function Ub({scale:e,scaleX:t,scaleY:n}){return!s0(e)||!s0(t)||!s0(n)}function bu(e){return Ub(e)||bR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function bR(e){return XP(e.x)||XP(e.y)}function XP(e){return e&&e!=="0%"}function $y(e,t,n){const s=e-n,c=t*s;return n+c}function YP(e,t,n,s,c){return c!==void 0&&(e=$y(e,c,s)),$y(e,n,s)+t}function Wb(e,t=0,n=1,s,c){e.min=YP(e.min,t,n,s,c),e.max=YP(e.max,t,n,s,c)}function wR(e,{x:t,y:n}){Wb(e.x,t.translate,t.scale,t.originPoint),Wb(e.y,n.translate,n.scale,n.originPoint)}const JP=.999999999999,QP=1.0000000000001;function eW(e,t,n,s=!1){const c=n.length;if(!c)return;t.x=t.y=1;let d,p;for(let l=0;l<c;l++){d=n[l],p=d.projectionDelta;const{visualElement:b}=d.options;b&&b.props.style&&b.props.style.display==="contents"||(s&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ph(e,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),p&&(t.x*=p.x.scale,t.y*=p.y.scale,wR(e,p)),s&&bu(d.latestValues)&&ph(e,d.latestValues))}t.x<QP&&t.x>JP&&(t.x=1),t.y<QP&&t.y>JP&&(t.y=1)}function dh(e,t){e.min=e.min+t,e.max=e.max+t}function ek(e,t,n,s,c=.5){const d=Pr(e.min,e.max,c);Wb(e,t,n,d,s)}function ph(e,t){ek(e.x,t.x,t.scaleX,t.scale,t.originX),ek(e.y,t.y,t.scaleY,t.scale,t.originY)}function SR(e,t){return xR(Q9(e.getBoundingClientRect(),t))}function tW(e,t,n){const s=SR(e,n),{scroll:c}=t;return c&&(dh(s.x,c.offset.x),dh(s.y,c.offset.y)),s}const tk=()=>({translate:0,scale:1,origin:0,originPoint:0}),fh=()=>({x:tk(),y:tk()}),nk=()=>({min:0,max:0}),Fr=()=>({x:nk(),y:nk()}),Hb={current:null},CR={current:!1};function nW(){if(CR.current=!0,!!Rw)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Hb.current=e.matches;e.addEventListener("change",t),t()}else Hb.current=!1}const rW=new WeakMap;function iW(e,t,n){for(const s in t){const c=t[s],d=n[s];if(Fi(c))e.addValue(s,c);else if(Fi(d))e.addValue(s,$h(c,{owner:e}));else if(d!==c)if(e.hasValue(s)){const p=e.getValue(s);p.liveStyle===!0?p.jump(c):p.hasAnimated||p.set(c)}else{const p=e.getStaticValue(s);e.addValue(s,$h(p!==void 0?p:c,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const rk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class oW{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:c,blockInitialAnimation:d,visualState:p},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Kw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const M=oo.now();this.renderScheduledAt<M&&(this.renderScheduledAt=M,wr.render(this.render,!1,!0))};const{latestValues:b,renderState:T}=p;this.latestValues=b,this.baseTarget={...b},this.initialValues=n.initial?{...b}:{},this.renderState=T,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=l,this.blockInitialAnimation=!!d,this.isControllingVariants=e_(n),this.isVariantNode=uR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:k,...I}=this.scrapeMotionValuesFromProps(n,{},this);for(const M in I){const D=I[M];b[M]!==void 0&&Fi(D)&&D.set(b[M])}}mount(t){var n;this.current=t,rW.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,c)=>this.bindToMotionValue(c,s)),CR.current||nW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hb.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Ll(this.notifyUpdate),Ll(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Zh.has(t);s&&this.onBindTransform&&this.onBindTransform();const c=n.on("change",p=>{this.latestValues[t]=p,this.props.onUpdate&&wr.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{c(),d&&d(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Nh){const n=Nh[t];if(!n)continue;const{isEnabled:s,Feature:c}=n;if(!this.features[t]&&c&&s(this.props)&&(this.features[t]=new c(this)),this.features[t]){const d=this.features[t];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<rk.length;s++){const c=rk[s];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const d="on"+c,p=t[d];p&&(this.propEventSubscriptions[c]=this.on(c,p))}this.prevMotionValues=iW(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=$h(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(mM(s)||yM(s))?s=parseFloat(s):!m9(s)&&Dl.test(n)&&(s=JM(t,n)),this.setBaseTarget(t,Fi(s)?s.get():s)),Fi(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var d;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const p=sS(this.props,n,(d=this.presenceContext)==null?void 0:d.custom);p&&(s=p[t])}if(n&&s!==void 0)return s;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!Fi(c)?c:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Fw),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Jw.render(this.render)}}class TR extends oW{constructor(){super(...arguments),this.KeyframeResolver=r9}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Fi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function PR(e,{style:t,vars:n},s,c){const d=e.style;let p;for(p in t)d[p]=t[p];c==null||c.applyProjectionStyles(d,s);for(p in n)d.setProperty(p,n[p])}function sW(e){return window.getComputedStyle(e)}class aW extends TR{constructor(){super(...arguments),this.type="html",this.renderInstance=PR}readValueFromInstance(t,n){var s;if(Zh.has(n))return(s=this.projection)!=null&&s.isProjecting?Ob(n):wU(t,n);{const c=sW(t),d=(Nw(n)?c.getPropertyValue(n):c[n])||0;return typeof d=="string"?d.trim():d}}measureInstanceViewportBox(t,{transformPagePoint:n}){return SR(t,n)}build(t,n,s){rS(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return aS(t,n,s)}}const kR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lW(e,t,n,s){PR(e,t,void 0,s);for(const c in t.attrs)e.setAttribute(kR.has(c)?c:lS(c),t.attrs[c])}class uW extends TR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Fr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Zh.has(n)){const s=YM(n);return s&&s.default||0}return n=kR.has(n)?n:lS(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return gR(t,n,s)}build(t,n,s){dR(t,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,n,s,c){lW(t,n,s,c)}mount(t){this.isSVGTag=fR(t.tagName),super.mount(t)}}const cW=(e,t)=>oS(e)?new uW(t):new aW(t,{allowProjection:e!==W.Fragment});function Ch(e,t,n){const s=e.getProps();return sS(s,t,n!==void 0?n:s.custom,e)}const qb=e=>Array.isArray(e);function hW(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,$h(n))}function dW(e){return qb(e)?e[e.length-1]||0:e}function pW(e,t){const n=Ch(e,t);let{transitionEnd:s={},transition:c={},...d}=n||{};d={...d,...s};for(const p in d){const l=dW(d[p]);hW(e,p,l)}}function fW(e){return!!(Fi(e)&&e.add)}function Gb(e,t){const n=e.getValue("willChange");if(fW(n))return n.add(t);if(!n&&Aa.WillChange){const s=new Aa.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function ER(e){return e.props[yR]}const mW=e=>e!==null;function gW(e,{repeat:t,repeatType:n="loop"},s){const c=e.filter(mW),d=t&&n!=="loop"&&t%2===1?0:c.length-1;return c[d]}const yW={type:"spring",stiffness:500,damping:25,restSpeed:10},vW=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),_W={type:"keyframes",duration:.8},xW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bW=(e,{keyframes:t})=>t.length>2?_W:Zh.has(e)?e.startsWith("scale")?vW(t[1]):yW:xW;function wW({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:c,repeat:d,repeatType:p,repeatDelay:l,from:b,elapsed:T,...k}){return!!Object.keys(k).length}const uS=(e,t,n,s={},c,d)=>p=>{const l=Xw(s,e)||{},b=l.delay||s.delay||0;let{elapsed:T=0}=s;T=T-Gs(b);const k={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-T,onUpdate:M=>{t.set(M),l.onUpdate&&l.onUpdate(M)},onComplete:()=>{p(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:d?void 0:c};wW(l)||Object.assign(k,bW(e,k)),k.duration&&(k.duration=Gs(k.duration)),k.repeatDelay&&(k.repeatDelay=Gs(k.repeatDelay)),k.from!==void 0&&(k.keyframes[0]=k.from);let I=!1;if((k.type===!1||k.duration===0&&!k.repeatDelay)&&(Vb(k),k.delay===0&&(I=!0)),(Aa.instantAnimations||Aa.skipAnimations)&&(I=!0,Vb(k),k.delay=0),k.allowFlatten=!l.type&&!l.ease,I&&!d&&t.get()!==void 0){const M=gW(k.keyframes,l);if(M!==void 0){wr.update(()=>{k.onUpdate(M),k.onComplete()});return}}return l.isSync?new Zw(k):new HU(k)};function SW({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function IR(e,t,{delay:n=0,transitionOverride:s,type:c}={}){let{transition:d=e.getDefaultTransition(),transitionEnd:p,...l}=t;s&&(d=s);const b=[],T=c&&e.animationState&&e.animationState.getState()[c];for(const k in l){const I=e.getValue(k,e.latestValues[k]??null),M=l[k];if(M===void 0||T&&SW(T,k))continue;const D={delay:n,...Xw(d||{},k)},H=I.get();if(H!==void 0&&!I.isAnimating&&!Array.isArray(M)&&M===H&&!D.velocity)continue;let q=!1;if(window.MotionHandoffAnimation){const $=ER(e);if($){const V=window.MotionHandoffAnimation($,k,wr);V!==null&&(D.startTime=V,q=!0)}}Gb(e,k),I.start(uS(k,I,M,e.shouldReduceMotion&&ZM.has(k)?{type:!1}:D,e,q));const J=I.animation;J&&b.push(J)}return p&&Promise.all(b).then(()=>{wr.update(()=>{p&&pW(e,p)})}),b}function AR(e,t,n,s=0,c=1){const d=Array.from(e).sort((T,k)=>T.sortNodePosition(k)).indexOf(t),p=e.size,l=(p-1)*s;return typeof n=="function"?n(d,p):c===1?d*s:l-d*s}function Zb(e,t,n={}){var b;const s=Ch(e,t,n.type==="exit"?(b=e.presenceContext)==null?void 0:b.custom:void 0);let{transition:c=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(c=n.transitionOverride);const d=s?()=>Promise.all(IR(e,s,n)):()=>Promise.resolve(),p=e.variantChildren&&e.variantChildren.size?(T=0)=>{const{delayChildren:k=0,staggerChildren:I,staggerDirection:M}=c;return CW(e,t,T,k,I,M,n)}:()=>Promise.resolve(),{when:l}=c;if(l){const[T,k]=l==="beforeChildren"?[d,p]:[p,d];return T().then(()=>k())}else return Promise.all([d(),p(n.delay)])}function CW(e,t,n=0,s=0,c=0,d=1,p){const l=[];for(const b of e.variantChildren)b.notify("AnimationStart",t),l.push(Zb(b,t,{...p,delay:n+(typeof s=="function"?0:s)+AR(e.variantChildren,b,s,c,d)}).then(()=>b.notify("AnimationComplete",t)));return Promise.all(l)}function TW(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const c=t.map(d=>Zb(e,d,n));s=Promise.all(c)}else if(typeof t=="string")s=Zb(e,t,n);else{const c=typeof t=="function"?Ch(e,t,n.custom):t;s=Promise.all(IR(e,c,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}function MR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const PW=nS.length;function RR(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?RR(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<PW;n++){const s=nS[n],c=e.props[s];(Sf(c)||c===!1)&&(t[s]=c)}return t}const kW=[...tS].reverse(),EW=tS.length;function IW(e){return t=>Promise.all(t.map(({animation:n,options:s})=>TW(e,n,s)))}function AW(e){let t=IW(e),n=ik(),s=!0;const c=b=>(T,k)=>{var M;const I=Ch(e,k,b==="exit"?(M=e.presenceContext)==null?void 0:M.custom:void 0);if(I){const{transition:D,transitionEnd:H,...q}=I;T={...T,...q,...H}}return T};function d(b){t=b(e)}function p(b){const{props:T}=e,k=RR(e.parent)||{},I=[],M=new Set;let D={},H=1/0;for(let J=0;J<EW;J++){const $=kW[J],V=n[$],B=T[$]!==void 0?T[$]:k[$],G=Sf(B),ne=$===b?V.isActive:null;ne===!1&&(H=J);let re=B===k[$]&&B!==T[$]&&G;if(re&&s&&e.manuallyAnimateOnMount&&(re=!1),V.protectedKeys={...D},!V.isActive&&ne===null||!B&&!V.prevProp||Qv(B)||typeof B=="boolean")continue;const ae=MW(V.prevProp,B);let he=ae||$===b&&V.isActive&&!re&&G||J>H&&G,Me=!1;const Ee=Array.isArray(B)?B:[B];let Re=Ee.reduce(c($),{});ne===!1&&(Re={});const{prevResolvedValues:K={}}=V,be={...K,...Re},_e=Ue=>{he=!0,M.has(Ue)&&(Me=!0,M.delete(Ue)),V.needsAnimating[Ue]=!0;const Le=e.getValue(Ue);Le&&(Le.liveStyle=!1)};for(const Ue in be){const Le=Re[Ue],Oe=K[Ue];if(D.hasOwnProperty(Ue))continue;let Xe=!1;qb(Le)&&qb(Oe)?Xe=!MR(Le,Oe):Xe=Le!==Oe,Xe?Le!=null?_e(Ue):M.add(Ue):Le!==void 0&&M.has(Ue)?_e(Ue):V.protectedKeys[Ue]=!0}V.prevProp=B,V.prevResolvedValues=Re,V.isActive&&(D={...D,...Re}),s&&e.blockInitialAnimation&&(he=!1);const ze=re&&ae;he&&(!ze||Me)&&I.push(...Ee.map(Ue=>{const Le={type:$};if(typeof Ue=="string"&&s&&!ze&&e.manuallyAnimateOnMount&&e.parent){const{parent:Oe}=e,Xe=Ch(Oe,Ue);if(Oe.enteringChildren&&Xe){const{delayChildren:Ye}=Xe.transition||{};Le.delay=AR(Oe.enteringChildren,e,Ye)}}return{animation:Ue,options:Le}}))}if(M.size){const J={};if(typeof T.initial!="boolean"){const $=Ch(e,Array.isArray(T.initial)?T.initial[0]:T.initial);$&&$.transition&&(J.transition=$.transition)}M.forEach($=>{const V=e.getBaseTarget($),B=e.getValue($);B&&(B.liveStyle=!0),J[$]=V??null}),I.push({animation:J})}let q=!!I.length;return s&&(T.initial===!1||T.initial===T.animate)&&!e.manuallyAnimateOnMount&&(q=!1),s=!1,q?t(I):Promise.resolve()}function l(b,T){var I;if(n[b].isActive===T)return Promise.resolve();(I=e.variantChildren)==null||I.forEach(M=>{var D;return(D=M.animationState)==null?void 0:D.setActive(b,T)}),n[b].isActive=T;const k=p(b);for(const M in n)n[M].protectedKeys={};return k}return{animateChanges:p,setActive:l,setAnimateFunction:d,getState:()=>n,reset:()=>{n=ik(),s=!0}}}function MW(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!MR(t,e):!1}function gu(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ik(){return{animate:gu(!0),whileInView:gu(),whileHover:gu(),whileTap:gu(),whileDrag:gu(),whileFocus:gu(),exit:gu()}}class Vl{constructor(t){this.isMounted=!1,this.node=t}update(){}}class RW extends Vl{constructor(t){super(t),t.animationState||(t.animationState=AW(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Qv(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let zW=0;class LW extends Vl{constructor(){super(...arguments),this.id=zW++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const c=this.node.animationState.setActive("exit",!t);n&&!t&&c.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const DW={animation:{Feature:RW},exit:{Feature:LW}};function Tf(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function Wf(e){return{point:{x:e.pageX,y:e.pageY}}}const OW=e=>t=>Qw(t)&&e(t,Wf(t));function Hp(e,t,n,s){return Tf(e,t,OW(n),s)}const zR=1e-4,FW=1-zR,BW=1+zR,LR=.01,$W=0-LR,NW=0+LR;function qi(e){return e.max-e.min}function VW(e,t,n){return Math.abs(e-t)<=n}function ok(e,t,n,s=.5){e.origin=s,e.originPoint=Pr(t.min,t.max,e.origin),e.scale=qi(n)/qi(t),e.translate=Pr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=FW&&e.scale<=BW||isNaN(e.scale))&&(e.scale=1),(e.translate>=$W&&e.translate<=NW||isNaN(e.translate))&&(e.translate=0)}function qp(e,t,n,s){ok(e.x,t.x,n.x,s?s.originX:void 0),ok(e.y,t.y,n.y,s?s.originY:void 0)}function sk(e,t,n){e.min=n.min+t.min,e.max=e.min+qi(t)}function jW(e,t,n){sk(e.x,t.x,n.x),sk(e.y,t.y,n.y)}function ak(e,t,n){e.min=t.min-n.min,e.max=e.min+qi(t)}function Gp(e,t,n){ak(e.x,t.x,n.x),ak(e.y,t.y,n.y)}function Ho(e){return[e("x"),e("y")]}const DR=({current:e})=>e?e.ownerDocument.defaultView:null,lk=(e,t)=>Math.abs(e-t);function UW(e,t){const n=lk(e.x,t.x),s=lk(e.y,t.y);return Math.sqrt(n**2+s**2)}class OR{constructor(t,n,{transformPagePoint:s,contextWindow:c=window,dragSnapToOrigin:d=!1,distanceThreshold:p=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=l0(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,H=UW(M.offset,{x:0,y:0})>=this.distanceThreshold;if(!D&&!H)return;const{point:q}=M,{timestamp:J}=_i;this.history.push({...q,timestamp:J});const{onStart:$,onMove:V}=this.handlers;D||($&&$(this.lastMoveEvent,M),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,M)},this.handlePointerMove=(M,D)=>{this.lastMoveEvent=M,this.lastMoveEventInfo=a0(D,this.transformPagePoint),wr.update(this.updatePoint,!0)},this.handlePointerUp=(M,D)=>{this.end();const{onEnd:H,onSessionEnd:q,resumeAnimation:J}=this.handlers;if(this.dragSnapToOrigin&&J&&J(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const $=l0(M.type==="pointercancel"?this.lastMoveEventInfo:a0(D,this.transformPagePoint),this.history);this.startEvent&&H&&H(M,$),q&&q(M,$)},!Qw(t))return;this.dragSnapToOrigin=d,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=p,this.contextWindow=c||window;const l=Wf(t),b=a0(l,this.transformPagePoint),{point:T}=b,{timestamp:k}=_i;this.history=[{...T,timestamp:k}];const{onSessionStart:I}=n;I&&I(t,l0(b,this.history)),this.removeListeners=Vf(Hp(this.contextWindow,"pointermove",this.handlePointerMove),Hp(this.contextWindow,"pointerup",this.handlePointerUp),Hp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ll(this.updatePoint)}}function a0(e,t){return t?{point:t(e.point)}:e}function uk(e,t){return{x:e.x-t.x,y:e.y-t.y}}function l0({point:e},t){return{point:e,delta:uk(e,FR(t)),offset:uk(e,WW(t)),velocity:HW(t,.1)}}function WW(e){return e[0]}function FR(e){return e[e.length-1]}function HW(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const c=FR(e);for(;n>=0&&(s=e[n],!(c.timestamp-s.timestamp>Gs(t)));)n--;if(!s)return{x:0,y:0};const d=Zs(c.timestamp-s.timestamp);if(d===0)return{x:0,y:0};const p={x:(c.x-s.x)/d,y:(c.y-s.y)/d};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function qW(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Pr(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Pr(n,e,s.max):Math.min(e,n)),e}function ck(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function GW(e,{top:t,left:n,bottom:s,right:c}){return{x:ck(e.x,n,c),y:ck(e.y,t,s)}}function hk(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function ZW(e,t){return{x:hk(e.x,t.x),y:hk(e.y,t.y)}}function KW(e,t){let n=.5;const s=qi(e),c=qi(t);return c>s?n=xf(t.min,t.max-s,e.min):s>c&&(n=xf(e.min,e.max-c,t.min)),Ia(0,1,n)}function XW(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Kb=.35;function YW(e=Kb){return e===!1?e=0:e===!0&&(e=Kb),{x:dk(e,"left","right"),y:dk(e,"top","bottom")}}function dk(e,t,n){return{min:pk(e,t),max:pk(e,n)}}function pk(e,t){return typeof e=="number"?e:e[t]||0}const JW=new WeakMap;class QW{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const d=I=>{const{dragSnapToOrigin:M}=this.getProps();M?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wf(I).point)},p=(I,M)=>{const{drag:D,dragPropagation:H,onDragStart:q}=this.getProps();if(D&&!H&&(this.openDragLock&&this.openDragLock(),this.openDragLock=a9(D),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=M,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ho($=>{let V=this.getAxisMotionValue($).get()||0;if(Ks.test(V)){const{projection:B}=this.visualElement;if(B&&B.layout){const G=B.layout.layoutBox[$];G&&(V=qi(G)*(parseFloat(V)/100))}}this.originPoint[$]=V}),q&&wr.postRender(()=>q(I,M)),Gb(this.visualElement,"transform");const{animationState:J}=this.visualElement;J&&J.setActive("whileDrag",!0)},l=(I,M)=>{this.latestPointerEvent=I,this.latestPanInfo=M;const{dragPropagation:D,dragDirectionLock:H,onDirectionLock:q,onDrag:J}=this.getProps();if(!D&&!this.openDragLock)return;const{offset:$}=M;if(H&&this.currentDirection===null){this.currentDirection=e7($),this.currentDirection!==null&&q&&q(this.currentDirection);return}this.updateAxis("x",M.point,$),this.updateAxis("y",M.point,$),this.visualElement.render(),J&&J(I,M)},b=(I,M)=>{this.latestPointerEvent=I,this.latestPanInfo=M,this.stop(I,M),this.latestPointerEvent=null,this.latestPanInfo=null},T=()=>Ho(I=>{var M;return this.getAnimationState(I)==="paused"&&((M=this.getAxisMotionValue(I).animation)==null?void 0:M.play())}),{dragSnapToOrigin:k}=this.getProps();this.panSession=new OR(t,{onSessionStart:d,onStart:p,onMove:l,onSessionEnd:b,resumeAnimation:T},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:k,distanceThreshold:s,contextWindow:DR(this.visualElement)})}stop(t,n){const s=t||this.latestPointerEvent,c=n||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!c||!s)return;const{velocity:p}=c;this.startAnimation(p);const{onDragEnd:l}=this.getProps();l&&wr.postRender(()=>l(s,c))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:c}=this.getProps();if(!s||!Pg(t,c,this.currentDirection))return;const d=this.getAxisMotionValue(t);let p=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(p=qW(p,this.constraints[t],this.elastic[t])),d.set(p)}resolveConstraints(){var d;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(d=this.visualElement.projection)==null?void 0:d.layout,c=this.constraints;t&&hh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=GW(s.layoutBox,t):this.constraints=!1,this.elastic=YW(n),c!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ho(p=>{this.constraints!==!1&&this.getAxisMotionValue(p)&&(this.constraints[p]=XW(s.layoutBox[p],this.constraints[p]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!hh(t))return!1;const s=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const d=tW(s,c.root,this.visualElement.getTransformPagePoint());let p=ZW(c.layout.layoutBox,d);if(n){const l=n(J9(p));this.hasMutatedConstraints=!!l,l&&(p=xR(l))}return p}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:c,dragTransition:d,dragSnapToOrigin:p,onDragTransitionEnd:l}=this.getProps(),b=this.constraints||{},T=Ho(k=>{if(!Pg(k,n,this.currentDirection))return;let I=b&&b[k]||{};p&&(I={min:0,max:0});const M=c?200:1e6,D=c?40:1e7,H={type:"inertia",velocity:s?t[k]:0,bounceStiffness:M,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...d,...I};return this.startAxisValueAnimation(k,H)});return Promise.all(T).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return Gb(this.visualElement,t),s.start(uS(t,s,0,n,this.visualElement,!1))}stopAnimation(){Ho(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ho(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),c=s[n];return c||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Ho(n=>{const{drag:s}=this.getProps();if(!Pg(n,s,this.currentDirection))return;const{projection:c}=this.visualElement,d=this.getAxisMotionValue(n);if(c&&c.layout){const{min:p,max:l}=c.layout.layoutBox[n];d.set(t[n]-Pr(p,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!hh(n)||!s||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Ho(p=>{const l=this.getAxisMotionValue(p);if(l&&this.constraints!==!1){const b=l.get();c[p]=KW({min:b,max:b},this.constraints[p])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ho(p=>{if(!Pg(p,t,null))return;const l=this.getAxisMotionValue(p),{min:b,max:T}=this.constraints[p];l.set(Pr(b,T,c[p]))})}addListeners(){if(!this.visualElement.current)return;JW.set(this.visualElement,this);const t=this.visualElement.current,n=Hp(t,"pointerdown",b=>{const{drag:T,dragListener:k=!0}=this.getProps();T&&k&&this.start(b)}),s=()=>{const{dragConstraints:b}=this.getProps();hh(b)&&b.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,d=c.addEventListener("measure",s);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),wr.read(s);const p=Tf(window,"resize",()=>this.scalePositionWithinConstraints()),l=c.addEventListener("didUpdate",({delta:b,hasLayoutChanged:T})=>{this.isDragging&&T&&(Ho(k=>{const I=this.getAxisMotionValue(k);I&&(this.originPoint[k]+=b[k].translate,I.set(I.get()+b[k].translate))}),this.visualElement.render())});return()=>{p(),n(),d(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:c=!1,dragConstraints:d=!1,dragElastic:p=Kb,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:c,dragConstraints:d,dragElastic:p,dragMomentum:l}}}function Pg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function e7(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class t7 extends Vl{constructor(t){super(t),this.removeGroupControls=es,this.removeListeners=es,this.controls=new QW(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||es}unmount(){this.removeGroupControls(),this.removeListeners()}}const fk=e=>(t,n)=>{e&&wr.postRender(()=>e(t,n))};class n7 extends Vl{constructor(){super(...arguments),this.removePointerDownListener=es}onPointerDown(t){this.session=new OR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:c}=this.node.getProps();return{onSessionStart:fk(t),onStart:fk(n),onMove:s,onEnd:(d,p)=>{delete this.session,c&&wr.postRender(()=>c(d,p))}}}mount(){this.removePointerDownListener=Hp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mk(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const gp={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(yn.test(e))e=parseFloat(e);else return e;const n=mk(e,t.target.x),s=mk(e,t.target.y);return`${n}% ${s}%`}},r7={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,c=Dl.parse(e);if(c.length>5)return s;const d=Dl.createTransformer(e),p=typeof c[0]!="number"?1:0,l=n.x.scale*t.x,b=n.y.scale*t.y;c[0+p]/=l,c[1+p]/=b;const T=Pr(l,b,.5);return typeof c[2+p]=="number"&&(c[2+p]/=T),typeof c[3+p]=="number"&&(c[3+p]/=T),d(c)}};let u0=!1;class i7 extends W.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:c}=this.props,{projection:d}=t;P9(o7),d&&(n.group&&n.group.add(d),s&&s.register&&c&&s.register(d),u0&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),Xg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:c,isPresent:d}=this.props,{projection:p}=s;return p&&(p.isPresent=d,u0=!0,c||t.layoutDependency!==n||n===void 0||t.isPresent!==d?p.willUpdate():this.safeToRemove(),t.isPresent!==d&&(d?p.promote():p.relegate()||wr.postRender(()=>{const l=p.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Jw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:c}=t;u0=!0,c&&(c.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(c),s&&s.deregister&&s.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function BR(e){const[t,n]=oR(),s=W.useContext(Aw);return ye.jsx(i7,{...e,layoutGroup:s,switchLayoutGroup:W.useContext(vR),isPresent:t,safeToRemove:n})}const o7={borderRadius:{...gp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gp,borderTopRightRadius:gp,borderBottomLeftRadius:gp,borderBottomRightRadius:gp,boxShadow:r7};function s7(e,t,n){const s=Fi(e)?e:$h(e);return s.start(uS("",s,t,n)),s.animation}const a7=(e,t)=>e.depth-t.depth;class l7{constructor(){this.children=[],this.isDirty=!1}add(t){zw(this.children,t),this.isDirty=!0}remove(t){Lw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(a7),this.isDirty=!1,this.children.forEach(t)}}function u7(e,t){const n=oo.now(),s=({timestamp:c})=>{const d=c-n;d>=t&&(Ll(s),e(d-t))};return wr.setup(s,!0),()=>Ll(s)}const $R=["TopLeft","TopRight","BottomLeft","BottomRight"],c7=$R.length,gk=e=>typeof e=="string"?parseFloat(e):e,yk=e=>typeof e=="number"||yn.test(e);function h7(e,t,n,s,c,d){c?(e.opacity=Pr(0,n.opacity??1,d7(s)),e.opacityExit=Pr(t.opacity??1,0,p7(s))):d&&(e.opacity=Pr(t.opacity??1,n.opacity??1,s));for(let p=0;p<c7;p++){const l=`border${$R[p]}Radius`;let b=vk(t,l),T=vk(n,l);if(b===void 0&&T===void 0)continue;b||(b=0),T||(T=0),b===0||T===0||yk(b)===yk(T)?(e[l]=Math.max(Pr(gk(b),gk(T),s),0),(Ks.test(T)||Ks.test(b))&&(e[l]+="%")):e[l]=T}(t.rotate||n.rotate)&&(e.rotate=Pr(t.rotate||0,n.rotate||0,s))}function vk(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const d7=NR(0,.5,TM),p7=NR(.5,.95,es);function NR(e,t,n){return s=>s<e?0:s>t?1:n(xf(e,t,s))}function _k(e,t){e.min=t.min,e.max=t.max}function Uo(e,t){_k(e.x,t.x),_k(e.y,t.y)}function xk(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function bk(e,t,n,s,c){return e-=t,e=$y(e,1/n,s),c!==void 0&&(e=$y(e,1/c,s)),e}function f7(e,t=0,n=1,s=.5,c,d=e,p=e){if(Ks.test(t)&&(t=parseFloat(t),t=Pr(p.min,p.max,t/100)-p.min),typeof t!="number")return;let l=Pr(d.min,d.max,s);e===d&&(l-=t),e.min=bk(e.min,t,n,l,c),e.max=bk(e.max,t,n,l,c)}function wk(e,t,[n,s,c],d,p){f7(e,t[n],t[s],t[c],t.scale,d,p)}const m7=["x","scaleX","originX"],g7=["y","scaleY","originY"];function Sk(e,t,n,s){wk(e.x,t,m7,n?n.x:void 0,s?s.x:void 0),wk(e.y,t,g7,n?n.y:void 0,s?s.y:void 0)}function Ck(e){return e.translate===0&&e.scale===1}function VR(e){return Ck(e.x)&&Ck(e.y)}function Tk(e,t){return e.min===t.min&&e.max===t.max}function y7(e,t){return Tk(e.x,t.x)&&Tk(e.y,t.y)}function Pk(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function jR(e,t){return Pk(e.x,t.x)&&Pk(e.y,t.y)}function kk(e){return qi(e.x)/qi(e.y)}function Ek(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class v7{constructor(){this.members=[]}add(t){zw(this.members,t),t.scheduleRender()}remove(t){if(Lw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(c=>t===c);if(n===0)return!1;let s;for(let c=n;c>=0;c--){const d=this.members[c];if(d.isPresent!==!1){s=d;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _7(e,t,n){let s="";const c=e.x.translate/t.x,d=e.y.translate/t.y,p=(n==null?void 0:n.z)||0;if((c||d||p)&&(s=`translate3d(${c}px, ${d}px, ${p}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:T,rotate:k,rotateX:I,rotateY:M,skewX:D,skewY:H}=n;T&&(s=`perspective(${T}px) ${s}`),k&&(s+=`rotate(${k}deg) `),I&&(s+=`rotateX(${I}deg) `),M&&(s+=`rotateY(${M}deg) `),D&&(s+=`skewX(${D}deg) `),H&&(s+=`skewY(${H}deg) `)}const l=e.x.scale*t.x,b=e.y.scale*t.y;return(l!==1||b!==1)&&(s+=`scale(${l}, ${b})`),s||"none"}const c0=["","X","Y","Z"],x7=1e3;let b7=0;function h0(e,t,n,s){const{latestValues:c}=t;c[e]&&(n[e]=c[e],t.setStaticValue(e,0),s&&(s[e]=0))}function UR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=ER(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:c,layoutId:d}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",wr,!(c||d))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&UR(s)}function WR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:c}){return class{constructor(p={},l=t==null?void 0:t()){this.id=b7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(C7),this.nodes.forEach(E7),this.nodes.forEach(I7),this.nodes.forEach(T7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let b=0;b<this.path.length;b++)this.path[b].shouldResetTransform=!0;this.root===this&&(this.nodes=new l7)}addEventListener(p,l){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new Fw),this.eventHandlers.get(p).add(l)}notifyListeners(p,...l){const b=this.eventHandlers.get(p);b&&b.notify(...l)}hasListeners(p){return this.eventHandlers.has(p)}mount(p){if(this.instance)return;this.isSVG=iR(p)&&!p9(p),this.instance=p;const{layoutId:l,layout:b,visualElement:T}=this.options;if(T&&!T.current&&T.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(b||l)&&(this.isLayoutDirty=!0),e){let k,I=0;const M=()=>this.root.updateBlockedByResize=!1;wr.read(()=>{I=window.innerWidth}),e(p,()=>{const D=window.innerWidth;D!==I&&(I=D,this.root.updateBlockedByResize=!0,k&&k(),k=u7(M,250),Xg.hasAnimatedSinceResize&&(Xg.hasAnimatedSinceResize=!1,this.nodes.forEach(Mk)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&T&&(l||b)&&this.addEventListener("didUpdate",({delta:k,hasLayoutChanged:I,hasRelativeLayoutChanged:M,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const H=this.options.transition||T.getDefaultTransition()||L7,{onLayoutAnimationStart:q,onLayoutAnimationComplete:J}=T.getProps(),$=!this.targetLayout||!jR(this.targetLayout,D),V=!I&&M;if(this.options.layoutRoot||this.resumeFrom||V||I&&($||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={...Xw(H,"layout"),onPlay:q,onComplete:J};(T.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(k,V)}else I||Mk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ll(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(A7),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&UR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let k=0;k<this.path.length;k++){const I=this.path[k];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:l,layout:b}=this.options;if(l===void 0&&!b)return;const T=this.getTransformTemplate();this.prevTransformTemplateValue=T?T(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ik);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ak);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(k7),this.nodes.forEach(w7),this.nodes.forEach(S7)):this.nodes.forEach(Ak),this.clearAllSnapshots();const l=oo.now();_i.delta=Ia(0,1e3/60,l-_i.timestamp),_i.timestamp=l,_i.isProcessing=!0,Qx.update.process(_i),Qx.preRender.process(_i),Qx.render.process(_i),_i.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(P7),this.sharedNodes.forEach(M7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qi(this.snapshot.measuredBox.x)&&!qi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let b=0;b<this.path.length;b++)this.path[b].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Fr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(l=!1),l&&this.instance){const b=s(this.instance);this.scroll={animationId:this.root.animationId,phase:p,isRoot:b,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!c)return;const p=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!VR(this.projectionDelta),b=this.getTransformTemplate(),T=b?b(this.latestValues,""):void 0,k=T!==this.prevTransformTemplateValue;p&&this.instance&&(l||bu(this.latestValues)||k)&&(c(this.instance,T),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const l=this.measurePageBox();let b=this.removeElementScroll(l);return p&&(b=this.removeTransform(b)),D7(b),{animationId:this.root.animationId,measuredBox:l,layoutBox:b,latestValues:{},source:this.id}}measurePageBox(){var T;const{visualElement:p}=this.options;if(!p)return Fr();const l=p.measureViewportBox();if(!(((T=this.scroll)==null?void 0:T.wasRoot)||this.path.some(O7))){const{scroll:k}=this.root;k&&(dh(l.x,k.offset.x),dh(l.y,k.offset.y))}return l}removeElementScroll(p){var b;const l=Fr();if(Uo(l,p),(b=this.scroll)!=null&&b.wasRoot)return l;for(let T=0;T<this.path.length;T++){const k=this.path[T],{scroll:I,options:M}=k;k!==this.root&&I&&M.layoutScroll&&(I.wasRoot&&Uo(l,p),dh(l.x,I.offset.x),dh(l.y,I.offset.y))}return l}applyTransform(p,l=!1){const b=Fr();Uo(b,p);for(let T=0;T<this.path.length;T++){const k=this.path[T];!l&&k.options.layoutScroll&&k.scroll&&k!==k.root&&ph(b,{x:-k.scroll.offset.x,y:-k.scroll.offset.y}),bu(k.latestValues)&&ph(b,k.latestValues)}return bu(this.latestValues)&&ph(b,this.latestValues),b}removeTransform(p){const l=Fr();Uo(l,p);for(let b=0;b<this.path.length;b++){const T=this.path[b];if(!T.instance||!bu(T.latestValues))continue;Ub(T.latestValues)&&T.updateSnapshot();const k=Fr(),I=T.measurePageBox();Uo(k,I),Sk(l,T.latestValues,T.snapshot?T.snapshot.layoutBox:void 0,k)}return bu(this.latestValues)&&Sk(l,this.latestValues),l}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_i.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){var M;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==l;if(!(p||b&&this.isSharedProjectionDirty||this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:k,layoutId:I}=this.options;if(!(!this.layout||!(k||I))){if(this.resolvedRelativeTargetAt=_i.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fr(),this.relativeTargetOrigin=Fr(),Gp(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),Uo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Fr(),this.targetWithTransforms=Fr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Uo(this.target,this.layout.layoutBox),wR(this.target,this.targetDelta)):Uo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fr(),this.relativeTargetOrigin=Fr(),Gp(this.relativeTargetOrigin,this.target,D.target),Uo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ub(this.parent.latestValues)||bR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var H;const p=this.getLead(),l=!!this.resumingFrom||this!==p;let b=!0;if((this.isProjectionDirty||(H=this.parent)!=null&&H.isProjectionDirty)&&(b=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===_i.timestamp&&(b=!1),b)return;const{layout:T,layoutId:k}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(T||k))return;Uo(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,M=this.treeScale.y;eW(this.layoutCorrected,this.treeScale,this.path,l),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=Fr());const{target:D}=p;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xk(this.prevProjectionDelta.x,this.projectionDelta.x),xk(this.prevProjectionDelta.y,this.projectionDelta.y)),qp(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==M||!Ek(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ek(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),p){const b=this.getStack();b&&b.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fh(),this.projectionDelta=fh(),this.projectionDeltaWithTransform=fh()}setAnimationOrigin(p,l=!1){const b=this.snapshot,T=b?b.latestValues:{},k={...this.latestValues},I=fh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const M=Fr(),D=b?b.source:void 0,H=this.layout?this.layout.source:void 0,q=D!==H,J=this.getStack(),$=!J||J.members.length<=1,V=!!(q&&!$&&this.options.crossfade===!0&&!this.path.some(z7));this.animationProgress=0;let B;this.mixTargetDelta=G=>{const ne=G/1e3;Rk(I.x,p.x,ne),Rk(I.y,p.y,ne),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gp(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),R7(this.relativeTarget,this.relativeTargetOrigin,M,ne),B&&y7(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=Fr()),Uo(B,this.relativeTarget)),q&&(this.animationValues=k,h7(k,T,this.latestValues,ne,V,$)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){var l,b,T;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(T=(b=this.resumingFrom)==null?void 0:b.currentAnimation)==null||T.stop(),this.pendingAnimation&&(Ll(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wr.update(()=>{Xg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$h(0)),this.currentAnimation=s7(this.motionValue,[0,1e3],{...p,velocity:0,isSync:!0,onUpdate:k=>{this.mixTargetDelta(k),p.onUpdate&&p.onUpdate(k)},onStop:()=>{},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(x7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:l,target:b,layout:T,latestValues:k}=p;if(!(!l||!b||!T)){if(this!==p&&this.layout&&T&&HR(this.options.animationType,this.layout.layoutBox,T.layoutBox)){b=this.target||Fr();const I=qi(this.layout.layoutBox.x);b.x.min=p.target.x.min,b.x.max=b.x.min+I;const M=qi(this.layout.layoutBox.y);b.y.min=p.target.y.min,b.y.max=b.y.min+M}Uo(l,b),ph(l,k),qp(this.projectionDeltaWithTransform,this.layoutCorrected,l,k)}}registerSharedNode(p,l){this.sharedNodes.has(p)||this.sharedNodes.set(p,new v7),this.sharedNodes.get(p).add(l);const T=l.options.initialPromotionConfig;l.promote({transition:T?T.transition:void 0,preserveFollowOpacity:T&&T.shouldPreserveFollowOpacity?T.shouldPreserveFollowOpacity(l):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){var l;const{layoutId:p}=this.options;return p?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:p}=this.options;return p?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:l,preserveFollowOpacity:b}={}){const T=this.getStack();T&&T.promote(this,b),p&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetSkewAndRotation(){const{visualElement:p}=this.options;if(!p)return;let l=!1;const{latestValues:b}=p;if((b.z||b.rotate||b.rotateX||b.rotateY||b.rotateZ||b.skewX||b.skewY)&&(l=!0),!l)return;const T={};b.z&&h0("z",p,T,this.animationValues);for(let k=0;k<c0.length;k++)h0(`rotate${c0[k]}`,p,T,this.animationValues),h0(`skew${c0[k]}`,p,T,this.animationValues);p.render();for(const k in T)p.setStaticValue(k,T[k]),this.animationValues&&(this.animationValues[k]=T[k]);p.scheduleRender()}applyProjectionStyles(p,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){p.visibility="hidden";return}const b=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,p.visibility="",p.opacity="",p.pointerEvents=Kg(l==null?void 0:l.pointerEvents)||"",p.transform=b?b(this.latestValues,""):"none";return}const T=this.getLead();if(!this.projectionDelta||!this.layout||!T.target){this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Kg(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!bu(this.latestValues)&&(p.transform=b?b({},""):"none",this.hasProjected=!1);return}p.visibility="";const k=T.animationValues||T.latestValues;this.applyTransformsToTarget();let I=_7(this.projectionDeltaWithTransform,this.treeScale,k);b&&(I=b(k,I)),p.transform=I;const{x:M,y:D}=this.projectionDelta;p.transformOrigin=`${M.origin*100}% ${D.origin*100}% 0`,T.animationValues?p.opacity=T===this?k.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:k.opacityExit:p.opacity=T===this?k.opacity!==void 0?k.opacity:"":k.opacityExit!==void 0?k.opacityExit:0;for(const H in Cf){if(k[H]===void 0)continue;const{correct:q,applyTo:J,isCSSVariable:$}=Cf[H],V=I==="none"?k[H]:q(k[H],T);if(J){const B=J.length;for(let G=0;G<B;G++)p[J[G]]=V}else $?this.options.visualElement.renderState.vars[H]=V:p[H]=V}this.options.layoutId&&(p.pointerEvents=T===this?Kg(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>{var l;return(l=p.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Ik),this.root.sharedNodes.clear()}}}function w7(e){e.updateLayout()}function S7(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:c}=e.layout,{animationType:d}=e.options,p=t.source!==e.layout.source;d==="size"?Ho(I=>{const M=p?t.measuredBox[I]:t.layoutBox[I],D=qi(M);M.min=s[I].min,M.max=M.min+D}):HR(d,t.layoutBox,s)&&Ho(I=>{const M=p?t.measuredBox[I]:t.layoutBox[I],D=qi(s[I]);M.max=M.min+D,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[I].max=e.relativeTarget[I].min+D)});const l=fh();qp(l,s,t.layoutBox);const b=fh();p?qp(b,e.applyTransform(c,!0),t.measuredBox):qp(b,s,t.layoutBox);const T=!VR(l);let k=!1;if(!e.resumeFrom){const I=e.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:M,layout:D}=I;if(M&&D){const H=Fr();Gp(H,t.layoutBox,M.layoutBox);const q=Fr();Gp(q,s,D.layoutBox),jR(H,q)||(k=!0),I.options.layoutRoot&&(e.relativeTarget=q,e.relativeTargetOrigin=H,e.relativeParent=I)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:b,layoutDelta:l,hasLayoutChanged:T,hasRelativeLayoutChanged:k})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function C7(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function T7(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function P7(e){e.clearSnapshot()}function Ik(e){e.clearMeasurements()}function Ak(e){e.isLayoutDirty=!1}function k7(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Mk(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function E7(e){e.resolveTargetDelta()}function I7(e){e.calcProjection()}function A7(e){e.resetSkewAndRotation()}function M7(e){e.removeLeadSnapshot()}function Rk(e,t,n){e.translate=Pr(t.translate,0,n),e.scale=Pr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function zk(e,t,n,s){e.min=Pr(t.min,n.min,s),e.max=Pr(t.max,n.max,s)}function R7(e,t,n,s){zk(e.x,t.x,n.x,s),zk(e.y,t.y,n.y,s)}function z7(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const L7={duration:.45,ease:[.4,0,.1,1]},Lk=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Dk=Lk("applewebkit/")&&!Lk("chrome/")?Math.round:es;function Ok(e){e.min=Dk(e.min),e.max=Dk(e.max)}function D7(e){Ok(e.x),Ok(e.y)}function HR(e,t,n){return e==="position"||e==="preserve-aspect"&&!VW(kk(t),kk(n),.2)}function O7(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const F7=WR({attachResizeListener:(e,t)=>Tf(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),d0={current:void 0},qR=WR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!d0.current){const e=new F7({});e.mount(window),e.setOptions({layoutScroll:!0}),d0.current=e}return d0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),B7={pan:{Feature:n7},drag:{Feature:t7,ProjectionNode:qR,MeasureLayout:BR}};function Fk(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const c="onHover"+n,d=s[c];d&&wr.postRender(()=>d(t,Wf(t)))}class $7 extends Vl{mount(){const{current:t}=this.node;t&&(this.unmount=l9(t,(n,s)=>(Fk(this.node,s,"Start"),c=>Fk(this.node,c,"End"))))}unmount(){}}class N7 extends Vl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vf(Tf(this.node.current,"focus",()=>this.onFocus()),Tf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Bk(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const c="onTap"+(n==="End"?"":n),d=s[c];d&&wr.postRender(()=>d(t,Wf(t)))}class V7 extends Vl{mount(){const{current:t}=this.node;t&&(this.unmount=d9(t,(n,s)=>(Bk(this.node,s,"Start"),(c,{success:d})=>Bk(this.node,c,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xb=new WeakMap,p0=new WeakMap,j7=e=>{const t=Xb.get(e.target);t&&t(e)},U7=e=>{e.forEach(j7)};function W7({root:e,...t}){const n=e||document;p0.has(n)||p0.set(n,{});const s=p0.get(n),c=JSON.stringify(t);return s[c]||(s[c]=new IntersectionObserver(U7,{root:e,...t})),s[c]}function H7(e,t,n){const s=W7(t);return Xb.set(e,n),s.observe(e),()=>{Xb.delete(e),s.unobserve(e)}}const q7={some:0,all:1};class G7 extends Vl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:c="some",once:d}=t,p={root:n?n.current:void 0,rootMargin:s,threshold:typeof c=="number"?c:q7[c]},l=b=>{const{isIntersecting:T}=b;if(this.isInView===T||(this.isInView=T,d&&!T&&this.hasEnteredView))return;T&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",T);const{onViewportEnter:k,onViewportLeave:I}=this.node.getProps(),M=T?k:I;M&&M(b)};return H7(this.node.current,p,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Z7(t,n))&&this.startObserver()}unmount(){}}function Z7({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const K7={inView:{Feature:G7},tap:{Feature:V7},focus:{Feature:N7},hover:{Feature:$7}},X7={layout:{ProjectionNode:qR,MeasureLayout:BR}},Y7={...DW,...K7,...B7,...X7},GR=Y9(Y7,cW),J7=ws(ye.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),Q7=ws(ye.jsx("path",{d:"M13 1.07V9h7c0-4.08-3.05-7.44-7-7.93M4 15c0 4.42 3.58 8 8 8s8-3.58 8-8v-4H4zm7-13.93C7.05 1.56 4 4.92 4 9h7z"})),eH=ws(ye.jsx("path",{d:"M7 11v2h10v-2zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}));function tH(){const{current:e}=q1(),[t,n]=W.useState("mouse"),s=(c,d)=>{d!==null&&n(d)};return W.useEffect(()=>{e&&e.on("click",c=>{console.log("A click event occurred at:",c.lngLat)})},[e]),e?ye.jsx(ye.Fragment,{children:ye.jsxs(_8,{value:t,exclusive:!0,onChange:s,"aria-label":"drawing tools",size:"small",children:[ye.jsx(Yx,{title:"Mouse",children:ye.jsx(Jx,{value:"mouse","aria-label":"mouse",children:ye.jsx(Q7,{})})}),ye.jsx(Yx,{title:"Pen",children:ye.jsx(Jx,{value:"brush","aria-label":"brush",children:ye.jsx(J7,{})})}),ye.jsx(Yx,{title:"Erase",children:ye.jsx(Jx,{value:"eraser","aria-label":"eraser",children:ye.jsx(eH,{})})})]})}):null}function nH({range:e,setRange:t}){return ye.jsxs(m6,{sx:{width:"100%"},children:[ye.jsxs(Ib,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:1,children:[ye.jsx(Sb,{children:"Range"}),ye.jsxs(Ib,{direction:"row",spacing:1,children:[ye.jsx(Ly,{size:"small",value:e[0],onChange:n=>{const s=Number(n.target.value);isNaN(s)||t([s,e[1]])},type:"number",sx:{width:70},slotProps:{htmlInput:{min:$g,max:Ng}}}),ye.jsx(Ly,{size:"small",value:e[1],onChange:n=>{const s=Number(n.target.value);isNaN(s)||t([e[0],s])},type:"number",sx:{width:70},slotProps:{htmlInput:{min:$g,max:Ng}}})]})]}),ye.jsx(t8,{min:$g,max:Ng,value:e,onChange:(n,s)=>t(s),valueLabelDisplay:"auto",getAriaLabel:()=>"Route range"})]})}var ZR={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(n,s){e.exports=s()})(WL,function(){var n={},s={};function c(p,l,b){if(s[p]=b,p==="index"){var T="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",k={};return s.shared(k),s.index(n,k),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([T],{type:"text/javascript"}))),n}}c("shared",["exports"],function(p){function l(o,i,a,h){return new(a||(a=Promise))(function(g,_){function x(A){try{C(h.next(A))}catch(R){_(R)}}function w(A){try{C(h.throw(A))}catch(R){_(R)}}function C(A){var R;A.done?g(A.value):(R=A.value,R instanceof a?R:new a(function(L){L(R)})).then(x,w)}C((h=h.apply(o,i||[])).next())})}function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var T=k;function k(o,i){this.x=o,this.y=i}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,i){return this.clone()._rotateAround(o,i)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var i=o.x-this.x,a=o.y-this.y;return i*i+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,i){return Math.atan2(this.x*i-this.y*o,this.x*o+this.y*i)},_matMult:function(o){var i=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=i,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var i=Math.cos(o),a=Math.sin(o),h=a*this.x+i*this.y;return this.x=i*this.x-a*this.y,this.y=h,this},_rotateAround:function(o,i){var a=Math.cos(o),h=Math.sin(o),g=i.y+h*(this.x-i.x)+a*(this.y-i.y);return this.x=i.x+a*(this.x-i.x)-h*(this.y-i.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(o){return o instanceof k?o:Array.isArray(o)?new k(o[0],o[1]):o};var I=b(T),M=D;function D(o,i,a,h){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=i,this.p2x=a,this.p2y=h}D.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,i){if(i===void 0&&(i=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,h=0;h<8;h++){var g=this.sampleCurveX(a)-o;if(Math.abs(g)<i)return a;var _=this.sampleCurveDerivativeX(a);if(Math.abs(_)<1e-6)break;a-=g/_}var x=0,w=1;for(a=o,h=0;h<20&&(g=this.sampleCurveX(a),!(Math.abs(g-o)<i));h++)o>g?x=a:w=a,a=.5*(w-x)+x;return a},solve:function(o,i){return this.sampleCurveY(this.solveCurveX(o,i))}};var H=b(M);let q,J;function $(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function V(){if(J==null&&(J=!1,$())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let h=0;h<5*5;h++){const g=4*h;i.fillStyle=`rgb(${g},${g+1},${g+2})`,i.fillRect(h%5,Math.floor(h/5),1,1)}const a=i.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&a[h]!==h){J=!0;break}}}return J||!1}function B(o,i,a,h){const g=new H(o,i,a,h);return _=>g.solve(_)}const G=B(.25,.1,.25,1);function ne(o,i,a){return Math.min(a,Math.max(i,o))}function re(o,i,a){const h=a-i,g=((o-i)%h+h)%h+i;return g===i?a:g}function ae(o,...i){for(const a of i)for(const h in a)o[h]=a[h];return o}let he=1;function Me(o,i,a){const h={};for(const g in o)h[g]=i.call(this,o[g],g,o);return h}function Ee(o,i,a){const h={};for(const g in o)i.call(this,o[g],g,o)&&(h[g]=o[g]);return h}function Re(o){return Array.isArray(o)?o.map(Re):typeof o=="object"&&o?Me(o,Re):o}const K={};function be(o){K[o]||(typeof console<"u"&&console.warn(o),K[o]=!0)}function _e(o,i,a){return(a.y-o.y)*(i.x-o.x)>(i.y-o.y)*(a.x-o.x)}function ze(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let Te=null;function Ue(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Oe(o,i,a,h,g){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(o,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),C=new Uint8ClampedArray(h*g*4);if(yield _.copyTo(C,function(A,R,L,N,Z){const Y=4*Math.max(-R,0),ee=(Math.max(0,L)-L)*N*4+Y,ue=4*N,de=Math.max(0,R),Ae=Math.max(0,L);return{rect:{x:de,y:Ae,width:Math.min(A.width,R+N)-de,height:Math.min(A.height,L+Z)-Ae},layout:[{offset:ee,stride:ue}]}}(o,i,a,h,g)),w)for(let A=0;A<C.length;A+=4){const R=C[A];C[A]=C[A+2],C[A+2]=R}return C}finally{_.close()}})}let Xe,Ye;const ut="AbortError";function Kt(){return new Error(ut)}const Vt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function tt(o){return Vt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const Qe="global-dispatcher";class kt extends Error{constructor(i,a,h,g){super(`AJAXError: ${a} (${i}): ${h}`),this.status=i,this.statusText=a,this.url=h,this.body=g}}const Xt=()=>ze(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,jt=function(o,i){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=tt(o.url);if(h)return h(o,i);if(ze(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:Qe},i)}if(!(/^file:/.test(a=o.url)||/^file:/.test(Xt())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return l(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:Xt(),signal:g.signal});h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const A=yield x.blob();throw new kt(x.status,x.statusText,h.url,A)}let w;w=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const C=yield w;if(g.signal.aborted)throw Kt();return{data:C,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,i);if(ze(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:Qe},i)}var a;return function(h,g){return new Promise((_,x)=>{var w;const C=new XMLHttpRequest;C.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(C.responseType="arraybuffer");for(const A in h.headers)C.setRequestHeader(A,h.headers[A]);h.type==="json"&&(C.responseType="text",!((w=h.headers)===null||w===void 0)&&w.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=h.credentials==="include",C.onerror=()=>{x(new Error(C.statusText))},C.onload=()=>{if(!g.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let A=C.response;if(h.type==="json")try{A=JSON.parse(C.response)}catch(R){return void x(R)}_({data:A,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const A=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});x(new kt(C.status,C.statusText,h.url,A))}},g.signal.addEventListener("abort",()=>{C.abort(),x(Kt())}),C.send(h.body)})}(o,i)};function bt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const i=new URL(o),a=window.location;return i.protocol===a.protocol&&i.host===a.host}function Qt(o,i,a){a[o]&&a[o].indexOf(i)!==-1||(a[o]=a[o]||[],a[o].push(i))}function Ot(o,i,a){if(a&&a[o]){const h=a[o].indexOf(i);h!==-1&&a[o].splice(h,1)}}class Ut{constructor(i,a={}){ae(this,a),this.type=i}}class Wt extends Ut{constructor(i,a={}){super("error",ae({error:i},a))}}class mn{on(i,a){return this._listeners=this._listeners||{},Qt(i,a,this._listeners),this}off(i,a){return Ot(i,a,this._listeners),Ot(i,a,this._oneTimeListeners),this}once(i,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Qt(i,a,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,a){typeof i=="string"&&(i=new Ut(i,a||{}));const h=i.type;if(this.listens(h)){i.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const w of g)w.call(this,i);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const w of _)Ot(h,w,this._oneTimeListeners),w.call(this,i);const x=this._eventedParent;x&&(ae(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Wt&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,a){return this._eventedParent=i,this._eventedParentData=a,this}}var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const un=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function mt(o,i){const a={};for(const h in o)h!=="ref"&&(a[h]=o[h]);return un.forEach(h=>{h in i&&(a[h]=i[h])}),a}function Yt(o,i){if(Array.isArray(o)){if(!Array.isArray(i)||o.length!==i.length)return!1;for(let a=0;a<o.length;a++)if(!Yt(o[a],i[a]))return!1;return!0}if(typeof o=="object"&&o!==null&&i!==null){if(typeof i!="object"||Object.keys(o).length!==Object.keys(i).length)return!1;for(const a in o)if(!Yt(o[a],i[a]))return!1;return!0}return o===i}function yt(o,i){o.push(i)}function gn(o,i,a){yt(a,{command:"addSource",args:[o,i[o]]})}function Ct(o,i,a){yt(i,{command:"removeSource",args:[o]}),a[o]=!0}function Rn(o,i,a,h){Ct(o,a,h),gn(o,i,a)}function bn(o,i,a){let h;for(h in o[a])if(Object.prototype.hasOwnProperty.call(o[a],h)&&h!=="data"&&!Yt(o[a][h],i[a][h]))return!1;for(h in i[a])if(Object.prototype.hasOwnProperty.call(i[a],h)&&h!=="data"&&!Yt(o[a][h],i[a][h]))return!1;return!0}function qe(o,i,a,h,g,_){o=o||{},i=i||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(Yt(o[x],i[x])||a.push({command:_,args:[h,x,i[x],g]}));for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Yt(o[x],i[x])||a.push({command:_,args:[h,x,i[x],g]}))}function nt(o){return o.id}function It(o,i){return o[i.id]=i,o}class Ve{constructor(i,a,h,g){this.message=(i?`${i}: `:"")+h,g&&(this.identifier=g),a!=null&&a.__line__&&(this.line=a.__line__)}}function nn(o,...i){for(const a of i)for(const h in a)o[h]=a[h];return o}class it extends Error{constructor(i,a){super(a),this.message=a,this.key=i}}class ot{constructor(i,a=[]){this.parent=i,this.bindings={};for(const[h,g]of a)this.bindings[h]=g}concat(i){return new ot(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const hn={kind:"null"},He={kind:"number"},vt={kind:"string"},zt={kind:"boolean"},Bn={kind:"color"},Nn={kind:"object"},qt={kind:"value"},At={kind:"collator"},pn={kind:"formatted"},Cn={kind:"padding"},cn={kind:"resolvedImage"},se={kind:"variableAnchorOffsetCollection"};function U(o,i){return{kind:"array",itemType:o,N:i}}function j(o){if(o.kind==="array"){const i=j(o.itemType);return typeof o.N=="number"?`array<${i}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${i}>`}return o.kind}const Q=[hn,He,vt,zt,Bn,pn,Nn,U(qt),Cn,cn,se];function ie(o,i){if(i.kind==="error")return null;if(o.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!ie(o.itemType,i.itemType))&&(typeof o.N!="number"||o.N===i.N))return null}else{if(o.kind===i.kind)return null;if(o.kind==="value"){for(const a of Q)if(!ie(a,i))return null}}return`Expected ${j(o)} but found ${j(i)} instead.`}function ge(o,i){return i.some(a=>a.kind===o.kind)}function we(o,i){return i.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}function Ie(o,i){return o.kind==="array"&&i.kind==="array"?o.itemType.kind===i.itemType.kind&&typeof o.N=="number":o.kind===i.kind}const me=.96422,$e=.82521,Ze=4/29,Fe=6/29,rt=3*Fe*Fe,Lt=Fe*Fe*Fe,Gt=Math.PI/180,wn=180/Math.PI;function Ft(o){return(o%=360)<0&&(o+=360),o}function rn([o,i,a,h]){let g,_;const x=cr((.2225045*(o=dn(o))+.7168786*(i=dn(i))+.0606169*(a=dn(a)))/1);o===i&&i===a?g=_=x:(g=cr((.4360747*o+.3850649*i+.1430804*a)/me),_=cr((.0139322*o+.0971045*i+.7141733*a)/$e));const w=116*x-16;return[w<0?0:w,500*(g-x),200*(x-_),h]}function dn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function cr(o){return o>Lt?Math.pow(o,1/3):o/rt+Ze}function Un([o,i,a,h]){let g=(o+16)/116,_=isNaN(i)?g:g+i/500,x=isNaN(a)?g:g-a/200;return g=1*Be(g),_=me*Be(_),x=$e*Be(x),[fn(3.1338561*_-1.6168667*g-.4906146*x),fn(-.9787684*_+1.9161415*g+.033454*x),fn(.0719453*_-.2289914*g+1.4052427*x),h]}function fn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Be(o){return o>Fe?o*o*o:rt*(o-Ze)}function Ne(o){return parseInt(o.padEnd(2,o),16)/255}function ht(o,i){return $t(i?o/100:o,0,1)}function $t(o,i,a){return Math.min(Math.max(i,o),a)}function Jt(o){return!o.some(Number.isNaN)}const lr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class on{constructor(i,a,h,g=1,_=!0){this.r=i,this.g=a,this.b=h,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[i,a,h,g]))}static parse(i){if(i instanceof on)return i;if(typeof i!="string")return;const a=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=lr[h];if(g){const[x,w,C]=g;return[x/255,w/255,C/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let w=1;return[Ne(h.slice(w,w+=x)),Ne(h.slice(w,w+=x)),Ne(h.slice(w,w+=x)),Ne(h.slice(w,w+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,C,A,R,L,N,Z,Y,ee,ue,de,Ae]=x,xe=[R||" ",Z||" ",ue].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const ke=[A,N,ee].join(""),je=ke==="%%%"?100:ke===""?255:0;if(je){const Je=[$t(+C/je,0,1),$t(+L/je,0,1),$t(+Y/je,0,1),de?ht(+de,Ae):1];if(Jt(Je))return Je}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,w,C,A,R,L,N,Z,Y]=_,ee=[C||" ",R||" ",N].join("");if(ee==="  "||ee==="  /"||ee===",,"||ee===",,,"){const ue=[+w,$t(+A,0,100),$t(+L,0,100),Z?ht(+Z,Y):1];if(Jt(ue))return function([de,Ae,xe,ke]){function je(Je){const wt=(Je+de/30)%12,en=Ae*Math.min(xe,1-xe);return xe-en*Math.max(-1,Math.min(wt-3,9-wt,1))}return de=Ft(de),Ae/=100,xe/=100,[je(0),je(8),je(4),ke]}(ue)}}}(i);return a?new on(...a,!1):void 0}get rgb(){const{r:i,g:a,b:h,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[i/_,a/_,h/_,g])}get hcl(){return this.overwriteGetter("hcl",function(i){const[a,h,g,_]=rn(i),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?Ft(Math.atan2(g,h)*wn):NaN,x,a,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",rn(this.rgb))}overwriteGetter(i,a){return Object.defineProperty(this,i,{value:a}),a}toString(){const[i,a,h,g]=this.rgb;return`rgba(${[i,a,h].map(_=>Math.round(255*_)).join(",")},${g})`}}on.black=new on(0,0,0,1),on.white=new on(1,1,1,1),on.transparent=new on(0,0,0,0),on.red=new on(1,0,0,1);class di{constructor(i,a,h){this.sensitivity=i?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,a){return this.collator.compare(i,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ss{constructor(i,a,h,g,_){this.text=i,this.image=a,this.scale=h,this.fontStack=g,this.textColor=_}}class Jr{constructor(i){this.sections=i}static fromString(i){return new Jr([new Ss(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Jr?i:Jr.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Nr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Nr)return i;if(typeof i=="number")return new Nr([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const a of i)if(typeof a!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Nr(i)}}toString(){return JSON.stringify(this.values)}}const za=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class vn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof vn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let a=0;a<i.length;a+=2){const h=i[a],g=i[a+1];if(typeof h!="string"||!za.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new vn(i)}}toString(){return JSON.stringify(this.values)}}class gr{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new gr({name:i,available:!1}):null}}function pi(o,i,a,h){return typeof o=="number"&&o>=0&&o<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,i,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,i,a,h]:[o,i,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $i(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof on||o instanceof di||o instanceof Jr||o instanceof Nr||o instanceof vn||o instanceof gr)return!0;if(Array.isArray(o)){for(const i of o)if(!$i(i))return!1;return!0}if(typeof o=="object"){for(const i in o)if(!$i(o[i]))return!1;return!0}return!1}function Ir(o){if(o===null)return hn;if(typeof o=="string")return vt;if(typeof o=="boolean")return zt;if(typeof o=="number")return He;if(o instanceof on)return Bn;if(o instanceof di)return At;if(o instanceof Jr)return pn;if(o instanceof Nr)return Cn;if(o instanceof vn)return se;if(o instanceof gr)return cn;if(Array.isArray(o)){const i=o.length;let a;for(const h of o){const g=Ir(h);if(a){if(a===g)continue;a=qt;break}a=g}return U(a||qt,i)}return Nn}function jl(o){const i=typeof o;return o===null?"":i==="string"||i==="number"||i==="boolean"?String(o):o instanceof on||o instanceof Jr||o instanceof Nr||o instanceof vn||o instanceof gr?o.toString():JSON.stringify(o)}class po{constructor(i,a){this.type=i,this.value=a}static parse(i,a){if(i.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!$i(i[1]))return a.error("invalid value");const h=i[1];let g=Ir(h);const _=a.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new po(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Sr{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const Gu={string:vt,number:He,boolean:zt,object:Nn};class fo{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");let h,g=1;const _=i[0];if(_==="array"){let w,C;if(i.length>2){const A=i[1];if(typeof A!="string"||!(A in Gu)||A==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);w=Gu[A],g++}else w=qt;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return a.error('The length argument to "array" must be a positive integer literal',2);C=i[2],g++}h=U(w,C)}else{if(!Gu[_])throw new Error(`Types doesn't contain name = ${_}`);h=Gu[_]}const x=[];for(;g<i.length;g++){const w=a.parse(i[g],g,qt);if(!w)return null;x.push(w)}return new fo(h,x)}evaluate(i){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(i);if(!ie(this.type,Ir(h)))return h;if(a===this.args.length-1)throw new Sr(`Expected value to be of type ${j(this.type)}, but found ${j(Ir(h))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Kh={"to-boolean":zt,"to-color":Bn,"to-number":He,"to-string":vt};class mo{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const h=i[0];if(!Kh[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&i.length!==2)return a.error("Expected one argument.");const g=Kh[h],_=[];for(let x=1;x<i.length;x++){const w=a.parse(i[x],x,qt);if(!w)return null;_.push(w)}return new mo(g,_)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let a,h;for(const g of this.args){if(a=g.evaluate(i),h=null,a instanceof on)return a;if(typeof a=="string"){const _=i.parseColor(a);if(_)return _}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:pi(a[0],a[1],a[2],a[3]),!h))return new on(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Sr(h||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const h of this.args){a=h.evaluate(i);const g=Nr.parse(a);if(g)return g}throw new Sr(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const h of this.args){a=h.evaluate(i);const g=vn.parse(a);if(g)return g}throw new Sr(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const h of this.args){if(a=h.evaluate(i),a===null)return 0;const g=Number(a);if(!isNaN(g))return g}throw new Sr(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return Jr.fromString(jl(this.args[0].evaluate(i)));case"resolvedImage":return gr.fromString(jl(this.args[0].evaluate(i)));default:return jl(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const t_=["Unknown","Point","LineString","Polygon"];class Zu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?t_[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let a=this._parseColorCache[i];return a||(a=this._parseColorCache[i]=on.parse(i)),a}}class Qs{constructor(i,a,h=[],g,_=new ot,x=[]){this.registry=i,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=a}parse(i,a,h,g,_={}){return a?this.concat(a,h,g)._parse(i,_):this._parse(i,_)}_parse(i,a){function h(g,_,x){return x==="assert"?new fo(_,[g]):x==="coerce"?new mo(_,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=i[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(i,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,C=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||C.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(w.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(w,C))return null}else x=h(x,w,a.typeAnnotation||"coerce");else x=h(x,w,a.typeAnnotation||"coerce");else x=h(x,w,a.typeAnnotation||"coerce");else x=h(x,w,a.typeAnnotation||"assert")}if(!(x instanceof po)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new Zu;try{x=new po(x.type,x.evaluate(w))}catch(C){return this.error(C.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,a,h){const g=typeof i=="number"?this.path.concat(i):this.path,_=h?this.scope.concat(h):this.scope;return new Qs(this.registry,this._isConstant,g,a||null,_,this.errors)}error(i,...a){const h=`${this.key}${a.map(g=>`[${g}]`).join("")}`;this.errors.push(new it(h,i))}checkSubtype(i,a){const h=ie(i,a);return h&&this.error(h),h}}class Cs{constructor(i,a){this.type=a.type,this.bindings=[].concat(i),this.result=a}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const a of this.bindings)i(a[1]);i(this.result)}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let _=1;_<i.length-1;_+=2){const x=i[_];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",_);const w=a.parse(i[_+1],_+1);if(!w)return null;h.push([x,w])}const g=a.parse(i[i.length-1],i.length-1,a.expectedType,h);return g?new Cs(h,g):null}outputDefined(){return this.result.outputDefined()}}class $n{constructor(i,a){this.type=a.type,this.name=i,this.boundExpression=a}static parse(i,a){if(i.length!==2||typeof i[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=i[1];return a.scope.has(h)?new $n(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Xh{constructor(i,a,h){this.type=i,this.index=a,this.input=h}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,He),g=a.parse(i[2],2,U(a.expectedType||qt));return h&&g?new Xh(g.type.itemType,h,g):null}evaluate(i){const a=this.index.evaluate(i),h=this.input.evaluate(i);if(a<0)throw new Sr(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new Sr(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new Sr(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Yh{constructor(i,a){this.type=zt,this.needle=i,this.haystack=a}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,qt),g=a.parse(i[2],2,qt);return h&&g?ge(h.type,[zt,vt,He,hn,qt])?new Yh(h,g):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(h.type)} instead`):null}evaluate(i){const a=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!h)return!1;if(!we(a,["boolean","string","number","null"]))throw new Sr(`Expected first argument to be of type boolean, string, number or null, but found ${j(Ir(a))} instead.`);if(!we(h,["string","array"]))throw new Sr(`Expected second argument to be of type array or string, but found ${j(Ir(h))} instead.`);return h.indexOf(a)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class La{constructor(i,a,h){this.type=He,this.needle=i,this.haystack=a,this.fromIndex=h}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,qt),g=a.parse(i[2],2,qt);if(!h||!g)return null;if(!ge(h.type,[zt,vt,He,hn,qt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(h.type)} instead`);if(i.length===4){const _=a.parse(i[3],3,He);return _?new La(h,g,_):null}return new La(h,g)}evaluate(i){const a=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!we(a,["boolean","string","number","null"]))throw new Sr(`Expected first argument to be of type boolean, string, number or null, but found ${j(Ir(a))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(i)),we(h,["string"])){const _=h.indexOf(a,g);return _===-1?-1:[...h.slice(0,_)].length}if(we(h,["array"]))return h.indexOf(a,g);throw new Sr(`Expected second argument to be of type array or string, but found ${j(Ir(h))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Jh{constructor(i,a,h,g,_,x){this.inputType=i,this.type=a,this.input=h,this.cases=g,this.outputs=_,this.otherwise=x}static parse(i,a){if(i.length<5)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return a.error("Expected an even number of arguments.");let h,g;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);const _={},x=[];for(let A=2;A<i.length-1;A+=2){let R=i[A];const L=i[A+1];Array.isArray(R)||(R=[R]);const N=a.concat(A);if(R.length===0)return N.error("Expected at least one branch label.");for(const Y of R){if(typeof Y!="number"&&typeof Y!="string")return N.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return N.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return N.error("Numeric branch labels must be integer values.");if(h){if(N.checkSubtype(h,Ir(Y)))return null}else h=Ir(Y);if(_[String(Y)]!==void 0)return N.error("Branch labels must be unique.");_[String(Y)]=x.length}const Z=a.parse(L,A,g);if(!Z)return null;g=g||Z.type,x.push(Z)}const w=a.parse(i[1],1,qt);if(!w)return null;const C=a.parse(i[i.length-1],i.length-1,g);return C?w.type.kind!=="value"&&a.concat(1).checkSubtype(h,w.type)?null:new Jh(h,g,w,_,x,C):null}evaluate(i){const a=this.input.evaluate(i);return(Ir(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class Ku{constructor(i,a,h){this.type=i,this.branches=a,this.otherwise=h}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const g=[];for(let x=1;x<i.length-1;x+=2){const w=a.parse(i[x],x,zt);if(!w)return null;const C=a.parse(i[x+1],x+1,h);if(!C)return null;g.push([w,C]),h=h||C.type}const _=a.parse(i[i.length-1],i.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new Ku(h,g,_)}evaluate(i){for(const[a,h]of this.branches)if(a.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[a,h]of this.branches)i(a),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Ul{constructor(i,a,h,g){this.type=i,this.input=a,this.beginIndex=h,this.endIndex=g}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,qt),g=a.parse(i[2],2,He);if(!h||!g)return null;if(!ge(h.type,[U(qt),vt,qt]))return a.error(`Expected first argument to be of type array or string, but found ${j(h.type)} instead`);if(i.length===4){const _=a.parse(i[3],3,He);return _?new Ul(h.type,h,g,_):null}return new Ul(h.type,h,g)}evaluate(i){const a=this.input.evaluate(i),h=this.beginIndex.evaluate(i);let g;if(this.endIndex&&(g=this.endIndex.evaluate(i)),we(a,["string"]))return[...a].slice(h,g).join("");if(we(a,["array"]))return a.slice(h,g);throw new Sr(`Expected first argument to be of type array or string, but found ${j(Ir(a))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function Xu(o,i){const a=o.length-1;let h,g,_=0,x=a,w=0;for(;_<=x;)if(w=Math.floor((_+x)/2),h=o[w],g=o[w+1],h<=i){if(w===a||i<g)return w;_=w+1}else{if(!(h>i))throw new Sr("Input is not a number.");x=w-1}return 0}class Da{constructor(i,a,h){this.type=i,this.input=a,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(i,a){if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(i[1],1,He);if(!h)return null;const g=[];let _=null;a.expectedType&&a.expectedType.kind!=="value"&&(_=a.expectedType);for(let x=1;x<i.length;x+=2){const w=x===1?-1/0:i[x],C=i[x+1],A=x,R=x+1;if(typeof w!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(g.length&&g[g.length-1][0]>=w)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const L=a.parse(C,R,_);if(!L)return null;_=_||L.type,g.push([w,L])}return new Da(_,h,g)}evaluate(i){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=a[0])return h[0].evaluate(i);const _=a.length;return g>=a[_-1]?h[_-1].evaluate(i):h[Xu(a,g)].evaluate(i)}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Hf(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var n_=qf;function qf(o,i,a,h){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=i,this.p2x=a,this.p2y=h}qf.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,i){if(i===void 0&&(i=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,h=0;h<8;h++){var g=this.sampleCurveX(a)-o;if(Math.abs(g)<i)return a;var _=this.sampleCurveDerivativeX(a);if(Math.abs(_)<1e-6)break;a-=g/_}var x=0,w=1;for(a=o,h=0;h<20&&(g=this.sampleCurveX(a),!(Math.abs(g-o)<i));h++)o>g?x=a:w=a,a=.5*(w-x)+x;return a},solve:function(o,i){return this.sampleCurveY(this.solveCurveX(o,i))}};var r_=Hf(n_);function ea(o,i,a){return o+a*(i-o)}function Wl(o,i,a){return o.map((h,g)=>ea(h,i[g],a))}const Ci={number:ea,color:function(o,i,a,h="rgb"){switch(h){case"rgb":{const[g,_,x,w]=Wl(o.rgb,i.rgb,a);return new on(g,_,x,w,!1)}case"hcl":{const[g,_,x,w]=o.hcl,[C,A,R,L]=i.hcl;let N,Z;if(isNaN(g)||isNaN(C))isNaN(g)?isNaN(C)?N=NaN:(N=C,x!==1&&x!==0||(Z=A)):(N=g,R!==1&&R!==0||(Z=_));else{let Ae=C-g;C>g&&Ae>180?Ae-=360:C<g&&g-C>180&&(Ae+=360),N=g+a*Ae}const[Y,ee,ue,de]=function([Ae,xe,ke,je]){return Ae=isNaN(Ae)?0:Ae*Gt,Un([ke,Math.cos(Ae)*xe,Math.sin(Ae)*xe,je])}([N,Z??ea(_,A,a),ea(x,R,a),ea(w,L,a)]);return new on(Y,ee,ue,de,!1)}case"lab":{const[g,_,x,w]=Un(Wl(o.lab,i.lab,a));return new on(g,_,x,w,!1)}}},array:Wl,padding:function(o,i,a){return new Nr(Wl(o.values,i.values,a))},variableAnchorOffsetCollection:function(o,i,a){const h=o.values,g=i.values;if(h.length!==g.length)throw new Sr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${i.toString()}`);const _=[];for(let x=0;x<h.length;x+=2){if(h[x]!==g[x])throw new Sr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${g[x]}`);_.push(h[x]);const[w,C]=h[x+1],[A,R]=g[x+1];_.push([ea(w,A,a),ea(C,R,a)])}return new vn(_)}};class Ti{constructor(i,a,h,g,_){this.type=i,this.operator=a,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,w]of _)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(i,a,h,g){let _=0;if(i.name==="exponential")_=Yu(a,i.base,h,g);else if(i.name==="linear")_=Yu(a,1,h,g);else if(i.name==="cubic-bezier"){const x=i.controlPoints;_=new r_(x[0],x[1],x[2],x[3]).solve(Yu(a,1,h,g))}return _}static parse(i,a){let[h,g,_,...x]=i;if(!Array.isArray(g)||g.length===0)return a.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const A=g[1];if(typeof A!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:A}}else{if(g[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const A=g.slice(1);if(A.length!==4||A.some(R=>typeof R!="number"||R<0||R>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:A}}}if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(_=a.parse(_,2,He),!_)return null;const w=[];let C=null;h==="interpolate-hcl"||h==="interpolate-lab"?C=Bn:a.expectedType&&a.expectedType.kind!=="value"&&(C=a.expectedType);for(let A=0;A<x.length;A+=2){const R=x[A],L=x[A+1],N=A+3,Z=A+4;if(typeof R!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(w.length&&w[w.length-1][0]>=R)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',N);const Y=a.parse(L,Z,C);if(!Y)return null;C=C||Y.type,w.push([R,Y])}return Ie(C,He)||Ie(C,Bn)||Ie(C,Cn)||Ie(C,se)||Ie(C,U(He))?new Ti(C,h,g,_,w):a.error(`Type ${j(C)} is not interpolatable.`)}evaluate(i){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=a[0])return h[0].evaluate(i);const _=a.length;if(g>=a[_-1])return h[_-1].evaluate(i);const x=Xu(a,g),w=Ti.interpolationFactor(this.interpolation,g,a[x],a[x+1]),C=h[x].evaluate(i),A=h[x+1].evaluate(i);switch(this.operator){case"interpolate":return Ci[this.type.kind](C,A,w);case"interpolate-hcl":return Ci.color(C,A,w,"hcl");case"interpolate-lab":return Ci.color(C,A,w,"lab")}}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Yu(o,i,a,h){const g=h-a,_=o-a;return g===0?0:i===1?_/g:(Math.pow(i,_)-1)/(Math.pow(i,g)-1)}class Ju{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expectected at least one argument.");let h=null;const g=a.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const w of i.slice(1)){const C=a.parse(w,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!C)return null;h=h||C.type,_.push(C)}if(!h)throw new Error("No output type");const x=g&&_.some(w=>ie(g,w.type));return new Ju(x?qt:h,_)}evaluate(i){let a,h=null,g=0;for(const _ of this.args)if(g++,h=_.evaluate(i),h&&h instanceof gr&&!h.available&&(a||(a=h.name),h=null,g===this.args.length&&(h=a)),h!==null)break;return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function Qu(o,i){return o==="=="||o==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Gf(o,i,a,h){return h.compare(i,a)===0}function Oa(o,i,a){const h=o!=="=="&&o!=="!=";return class KR{constructor(_,x,w){this.type=zt,this.lhs=_,this.rhs=x,this.collator=w,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const w=_[0];let C=x.parse(_[1],1,qt);if(!C)return null;if(!Qu(w,C.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${j(C.type)}'.`);let A=x.parse(_[2],2,qt);if(!A)return null;if(!Qu(w,A.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${j(A.type)}'.`);if(C.type.kind!==A.type.kind&&C.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${j(C.type)}' and '${j(A.type)}'.`);h&&(C.type.kind==="value"&&A.type.kind!=="value"?C=new fo(A.type,[C]):C.type.kind!=="value"&&A.type.kind==="value"&&(A=new fo(C.type,[A])));let R=null;if(_.length===4){if(C.type.kind!=="string"&&A.type.kind!=="string"&&C.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(R=x.parse(_[3],3,At),!R)return null}return new KR(C,A,R)}evaluate(_){const x=this.lhs.evaluate(_),w=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const C=Ir(x),A=Ir(w);if(C.kind!==A.kind||C.kind!=="string"&&C.kind!=="number")throw new Sr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${C.kind}, ${A.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const C=Ir(x),A=Ir(w);if(C.kind!=="string"||A.kind!=="string")return i(_,x,w)}return this.collator?a(_,x,w,this.collator.evaluate(_)):i(_,x,w)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const i_=Oa("==",function(o,i,a){return i===a},Gf),Zf=Oa("!=",function(o,i,a){return i!==a},function(o,i,a,h){return!Gf(0,i,a,h)}),Kf=Oa("<",function(o,i,a){return i<a},function(o,i,a,h){return h.compare(i,a)<0}),o_=Oa(">",function(o,i,a){return i>a},function(o,i,a,h){return h.compare(i,a)>0}),s_=Oa("<=",function(o,i,a){return i<=a},function(o,i,a,h){return h.compare(i,a)<=0}),Xf=Oa(">=",function(o,i,a){return i>=a},function(o,i,a,h){return h.compare(i,a)>=0});class Hl{constructor(i,a,h){this.type=At,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=a}static parse(i,a){if(i.length!==2)return a.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const g=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,zt);if(!g)return null;const _=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,zt);if(!_)return null;let x=null;return h.locale&&(x=a.parse(h.locale,1,vt),!x)?null:new Hl(g,_,x)}evaluate(i){return new di(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class Qh{constructor(i,a,h,g,_){this.type=vt,this.number=i,this.locale=a,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(i,a){if(i.length!==3)return a.error("Expected two arguments.");const h=a.parse(i[1],1,He);if(!h)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return a.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=a.parse(g.locale,1,vt),!_))return null;let x=null;if(g.currency&&(x=a.parse(g.currency,1,vt),!x))return null;let w=null;if(g["min-fraction-digits"]&&(w=a.parse(g["min-fraction-digits"],1,He),!w))return null;let C=null;return g["max-fraction-digits"]&&(C=a.parse(g["max-fraction-digits"],1,He),!C)?null:new Qh(h,_,x,w,C)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class ec{constructor(i){this.type=pn,this.sections=i}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=i.length-1;++x){const w=i[x];if(_&&typeof w=="object"&&!Array.isArray(w)){_=!1;let C=null;if(w["font-scale"]&&(C=a.parse(w["font-scale"],1,He),!C))return null;let A=null;if(w["text-font"]&&(A=a.parse(w["text-font"],1,U(vt)),!A))return null;let R=null;if(w["text-color"]&&(R=a.parse(w["text-color"],1,Bn),!R))return null;const L=g[g.length-1];L.scale=C,L.font=A,L.textColor=R}else{const C=a.parse(i[x],1,qt);if(!C)return null;const A=C.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:C,scale:null,font:null,textColor:null})}}return new ec(g)}evaluate(i){return new Jr(this.sections.map(a=>{const h=a.content.evaluate(i);return Ir(h)===cn?new Ss("",h,null,null,null):new Ss(jl(h),null,a.scale?a.scale.evaluate(i):null,a.font?a.font.evaluate(i).join(","):null,a.textColor?a.textColor.evaluate(i):null)}))}eachChild(i){for(const a of this.sections)i(a.content),a.scale&&i(a.scale),a.font&&i(a.font),a.textColor&&i(a.textColor)}outputDefined(){return!1}}class ed{constructor(i){this.type=cn,this.input=i}static parse(i,a){if(i.length!==2)return a.error("Expected two arguments.");const h=a.parse(i[1],1,vt);return h?new ed(h):a.error("No image name provided.")}evaluate(i){const a=this.input.evaluate(i),h=gr.fromString(a);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(a)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}}class td{constructor(i){this.type=He,this.input=i}static parse(i,a){if(i.length!==2)return a.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=a.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${j(h.type)} instead.`):new td(h):null}evaluate(i){const a=this.input.evaluate(i);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new Sr(`Expected value to be of type string or array, but found ${j(Ir(a))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Fo=8192;function a_(o,i){const a=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(a*g*Fo),Math.round(h*g*Fo)]}function nd(o,i){const a=Math.pow(2,i.z);return[(g=(o[0]/Fo+i.x)/a,360*g-180),(h=(o[1]/Fo+i.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function ta(o,i){o[0]=Math.min(o[0],i[0]),o[1]=Math.min(o[1],i[1]),o[2]=Math.max(o[2],i[0]),o[3]=Math.max(o[3],i[1])}function Ts(o,i){return!(o[0]<=i[0]||o[2]>=i[2]||o[1]<=i[1]||o[3]>=i[3])}function Vn(o,i,a){const h=o[0]-i[0],g=o[1]-i[1],_=o[0]-a[0],x=o[1]-a[1];return h*x-_*g==0&&h*_<=0&&g*x<=0}function tc(o,i,a,h){return(g=[h[0]-a[0],h[1]-a[1]])[0]*(_=[i[0]-o[0],i[1]-o[1]])[1]-g[1]*_[0]!=0&&!(!Jf(o,i,a,h)||!Jf(a,h,o,i));var g,_}function l_(o,i,a){for(const h of a)for(let g=0;g<h.length-1;++g)if(tc(o,i,h[g],h[g+1]))return!0;return!1}function Fa(o,i,a=!1){let h=!1;for(const w of i)for(let C=0;C<w.length-1;C++){if(Vn(o,w[C],w[C+1]))return a;(_=w[C])[1]>(g=o)[1]!=(x=w[C+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(h=!h)}var g,_,x;return h}function u_(o,i){for(const a of i)if(Fa(o,a))return!0;return!1}function Yf(o,i){for(const a of o)if(!Fa(a,i))return!1;for(let a=0;a<o.length-1;++a)if(l_(o[a],o[a+1],i))return!1;return!0}function c_(o,i){for(const a of i)if(Yf(o,a))return!0;return!1}function Jf(o,i,a,h){const g=h[0]-a[0],_=h[1]-a[1],x=(o[0]-a[0])*_-g*(o[1]-a[1]),w=(i[0]-a[0])*_-g*(i[1]-a[1]);return x>0&&w<0||x<0&&w>0}function rd(o,i,a){const h=[];for(let g=0;g<o.length;g++){const _=[];for(let x=0;x<o[g].length;x++){const w=a_(o[g][x],a);ta(i,w),_.push(w)}h.push(_)}return h}function Qf(o,i,a){const h=[];for(let g=0;g<o.length;g++){const _=rd(o[g],i,a);h.push(_)}return h}function em(o,i,a,h){if(o[0]<a[0]||o[0]>a[2]){const g=.5*h;let _=o[0]-a[0]>g?-h:a[0]-o[0]>g?h:0;_===0&&(_=o[0]-a[2]>g?-h:a[2]-o[0]>g?h:0),o[0]+=_}ta(i,o)}function tm(o,i,a,h){const g=Math.pow(2,h.z)*Fo,_=[h.x*Fo,h.y*Fo],x=[];for(const w of o)for(const C of w){const A=[C.x+_[0],C.y+_[1]];em(A,i,a,g),x.push(A)}return x}function nm(o,i,a,h){const g=Math.pow(2,h.z)*Fo,_=[h.x*Fo,h.y*Fo],x=[];for(const C of o){const A=[];for(const R of C){const L=[R.x+_[0],R.y+_[1]];ta(i,L),A.push(L)}x.push(A)}if(i[2]-i[0]<=g/2){(w=i)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const C of x)for(const A of C)em(A,i,a,g)}var w;return x}class na{constructor(i,a){this.type=zt,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if($i(i[1])){const h=i[1];if(h.type==="FeatureCollection"){const g=[];for(const _ of h.features){const{type:x,coordinates:w}=_.geometry;x==="Polygon"&&g.push(w),x==="MultiPolygon"&&g.push(...w)}if(g.length)return new na(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new na(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new na(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(a,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const w=rd(h.coordinates,_,x),C=tm(a.geometry(),g,_,x);if(!Ts(g,_))return!1;for(const A of C)if(!Fa(A,w))return!1}if(h.type==="MultiPolygon"){const w=Qf(h.coordinates,_,x),C=tm(a.geometry(),g,_,x);if(!Ts(g,_))return!1;for(const A of C)if(!u_(A,w))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(a,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const w=rd(h.coordinates,_,x),C=nm(a.geometry(),g,_,x);if(!Ts(g,_))return!1;for(const A of C)if(!Yf(A,w))return!1}if(h.type==="MultiPolygon"){const w=Qf(h.coordinates,_,x),C=nm(a.geometry(),g,_,x);if(!Ts(g,_))return!1;for(const A of C)if(!c_(A,w))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let rm=class{constructor(o=[],i=(a,h)=>a<h?-1:a>h?1:0){if(this.data=o,this.length=this.data.length,this.compare=i,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:i,compare:a}=this,h=i[o];for(;o>0;){const g=o-1>>1,_=i[g];if(a(h,_)>=0)break;i[o]=_,o=g}i[o]=h}_down(o){const{data:i,compare:a}=this,h=this.length>>1,g=i[o];for(;o<h;){let _=1+(o<<1);const x=_+1;if(x<this.length&&a(i[x],i[_])<0&&(_=x),a(i[_],g)>=0)break;i[o]=i[_],o=_}i[o]=g}};function h_(o,i,a,h,g){im(o,i,a,h||o.length-1,g||d_)}function im(o,i,a,h,g){for(;h>a;){if(h-a>600){var _=h-a+1,x=i-a+1,w=Math.log(_),C=.5*Math.exp(2*w/3),A=.5*Math.sqrt(w*C*(_-C)/_)*(x-_/2<0?-1:1);im(o,i,Math.max(a,Math.floor(i-x*C/_+A)),Math.min(h,Math.floor(i+(_-x)*C/_+A)),g)}var R=o[i],L=a,N=h;for(ql(o,a,i),g(o[h],R)>0&&ql(o,a,h);L<N;){for(ql(o,L,N),L++,N--;g(o[L],R)<0;)L++;for(;g(o[N],R)>0;)N--}g(o[a],R)===0?ql(o,a,N):ql(o,++N,h),N<=i&&(a=N+1),i<=N&&(h=N-1)}}function ql(o,i,a){var h=o[i];o[i]=o[a],o[a]=h}function d_(o,i){return o<i?-1:o>i?1:0}function nc(o,i){if(o.length<=1)return[o];const a=[];let h,g;for(const _ of o){const x=f_(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(h&&a.push(h),h=[_]):h.push(_))}if(h&&a.push(h),i>1)for(let _=0;_<a.length;_++)a[_].length<=i||(h_(a[_],i,1,a[_].length-1,p_),a[_]=a[_].slice(0,i));return a}function p_(o,i){return i.area-o.area}function f_(o){let i=0;for(let a,h,g=0,_=o.length,x=_-1;g<_;x=g++)a=o[g],h=o[x],i+=(h.x-a.x)*(a.y+h.y);return i}const om=1/298.257223563,sm=om*(2-om),am=Math.PI/180;class id{constructor(i){const a=6378.137*am*1e3,h=Math.cos(i*am),g=1/(1-sm*(1-h*h)),_=Math.sqrt(g);this.kx=a*_*h,this.ky=a*_*g*(1-sm)}distance(i,a){const h=this.wrap(i[0]-a[0])*this.kx,g=(i[1]-a[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(i,a){let h,g,_,x,w=1/0;for(let C=0;C<i.length-1;C++){let A=i[C][0],R=i[C][1],L=this.wrap(i[C+1][0]-A)*this.kx,N=(i[C+1][1]-R)*this.ky,Z=0;L===0&&N===0||(Z=(this.wrap(a[0]-A)*this.kx*L+(a[1]-R)*this.ky*N)/(L*L+N*N),Z>1?(A=i[C+1][0],R=i[C+1][1]):Z>0&&(A+=L/this.kx*Z,R+=N/this.ky*Z)),L=this.wrap(a[0]-A)*this.kx,N=(a[1]-R)*this.ky;const Y=L*L+N*N;Y<w&&(w=Y,h=A,g=R,_=C,x=Z)}return{point:[h,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function lm(o,i){return i[0]-o[0]}function rc(o){return o[1]-o[0]+1}function ls(o,i){return o[1]>=o[0]&&o[1]<i}function od(o,i){if(o[0]>o[1])return[null,null];const a=rc(o);if(i){if(a===2)return[o,null];const g=Math.floor(a/2);return[[o[0],o[0]+g],[o[0]+g,o[1]]]}if(a===1)return[o,null];const h=Math.floor(a/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function sd(o,i){if(!ls(i,o.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let h=i[0];h<=i[1];++h)ta(a,o[h]);return a}function ad(o){const i=[1/0,1/0,-1/0,-1/0];for(const a of o)for(const h of a)ta(i,h);return i}function ic(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function ld(o,i,a){if(!ic(o)||!ic(i))return NaN;let h=0,g=0;return o[2]<i[0]&&(h=i[0]-o[2]),o[0]>i[2]&&(h=o[0]-i[2]),o[1]>i[3]&&(g=o[1]-i[3]),o[3]<i[1]&&(g=i[1]-o[3]),a.distance([0,0],[h,g])}function ra(o,i,a){const h=a.pointOnLine(i,o);return a.distance(o,h.point)}function ud(o,i,a,h,g){const _=Math.min(ra(o,[a,h],g),ra(i,[a,h],g)),x=Math.min(ra(a,[o,i],g),ra(h,[o,i],g));return Math.min(_,x)}function m_(o,i,a,h,g){if(!ls(i,o.length)||!ls(h,a.length))return 1/0;let _=1/0;for(let x=i[0];x<i[1];++x){const w=o[x],C=o[x+1];for(let A=h[0];A<h[1];++A){const R=a[A],L=a[A+1];if(tc(w,C,R,L))return 0;_=Math.min(_,ud(w,C,R,L,g))}}return _}function yr(o,i,a,h,g){if(!ls(i,o.length)||!ls(h,a.length))return NaN;let _=1/0;for(let x=i[0];x<=i[1];++x)for(let w=h[0];w<=h[1];++w)if(_=Math.min(_,g.distance(o[x],a[w])),_===0)return _;return _}function g_(o,i,a){if(Fa(o,i,!0))return 0;let h=1/0;for(const g of i){const _=g[0],x=g[g.length-1];if(_!==x&&(h=Math.min(h,ra(o,[x,_],a)),h===0))return h;const w=a.pointOnLine(g,o);if(h=Math.min(h,a.distance(o,w.point)),h===0)return h}return h}function Sn(o,i,a,h){if(!ls(i,o.length))return NaN;for(let _=i[0];_<=i[1];++_)if(Fa(o[_],a,!0))return 0;let g=1/0;for(let _=i[0];_<i[1];++_){const x=o[_],w=o[_+1];for(const C of a)for(let A=0,R=C.length,L=R-1;A<R;L=A++){const N=C[L],Z=C[A];if(tc(x,w,N,Z))return 0;g=Math.min(g,ud(x,w,N,Z,h))}}return g}function oc(o,i){for(const a of o)for(const h of a)if(Fa(h,i,!0))return!0;return!1}function Xn(o,i,a,h=1/0){const g=ad(o),_=ad(i);if(h!==1/0&&ld(g,_,a)>=h)return h;if(Ts(g,_)){if(oc(o,i))return 0}else if(oc(i,o))return 0;let x=1/0;for(const w of o)for(let C=0,A=w.length,R=A-1;C<A;R=C++){const L=w[R],N=w[C];for(const Z of i)for(let Y=0,ee=Z.length,ue=ee-1;Y<ee;ue=Y++){const de=Z[ue],Ae=Z[Y];if(tc(L,N,de,Ae))return 0;x=Math.min(x,ud(L,N,de,Ae,a))}}return x}function Wn(o,i,a,h,g,_){if(!_)return;const x=ld(sd(h,_),g,a);x<i&&o.push([x,_,[0,0]])}function ia(o,i,a,h,g,_,x){if(!_||!x)return;const w=ld(sd(h,_),sd(g,x),a);w<i&&o.push([w,_,x])}function Gl(o,i,a,h,g=1/0){let _=Math.min(h.distance(o[0],a[0][0]),g);if(_===0)return _;const x=new rm([[0,[0,o.length-1],[0,0]]],lm),w=ad(a);for(;x.length>0;){const C=x.pop();if(C[0]>=_)continue;const A=C[1],R=i?50:100;if(rc(A)<=R){if(!ls(A,o.length))return NaN;if(i){const L=Sn(o,A,a,h);if(isNaN(L)||L===0)return L;_=Math.min(_,L)}else for(let L=A[0];L<=A[1];++L){const N=g_(o[L],a,h);if(_=Math.min(_,N),_===0)return 0}}else{const L=od(A,i);Wn(x,_,h,o,w,L[0]),Wn(x,_,h,o,w,L[1])}}return _}function Zl(o,i,a,h,g,_=1/0){let x=Math.min(_,g.distance(o[0],a[0]));if(x===0)return x;const w=new rm([[0,[0,o.length-1],[0,a.length-1]]],lm);for(;w.length>0;){const C=w.pop();if(C[0]>=x)continue;const A=C[1],R=C[2],L=i?50:100,N=h?50:100;if(rc(A)<=L&&rc(R)<=N){if(!ls(A,o.length)&&ls(R,a.length))return NaN;let Z;if(i&&h)Z=m_(o,A,a,R,g),x=Math.min(x,Z);else if(i&&!h){const Y=o.slice(A[0],A[1]+1);for(let ee=R[0];ee<=R[1];++ee)if(Z=ra(a[ee],Y,g),x=Math.min(x,Z),x===0)return x}else if(!i&&h){const Y=a.slice(R[0],R[1]+1);for(let ee=A[0];ee<=A[1];++ee)if(Z=ra(o[ee],Y,g),x=Math.min(x,Z),x===0)return x}else Z=yr(o,A,a,R,g),x=Math.min(x,Z)}else{const Z=od(A,i),Y=od(R,h);ia(w,x,g,o,a,Z[0],Y[0]),ia(w,x,g,o,a,Z[0],Y[1]),ia(w,x,g,o,a,Z[1],Y[0]),ia(w,x,g,o,a,Z[1],Y[1])}}return x}function cd(o){return o.type==="MultiPolygon"?o.coordinates.map(i=>({type:"Polygon",coordinates:i})):o.type==="MultiLineString"?o.coordinates.map(i=>({type:"LineString",coordinates:i})):o.type==="MultiPoint"?o.coordinates.map(i=>({type:"Point",coordinates:i})):[o]}class oa{constructor(i,a){this.type=He,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if($i(i[1])){const h=i[1];if(h.type==="FeatureCollection")return new oa(h,h.features.map(g=>cd(g.geometry)).flat());if(h.type==="Feature")return new oa(h,cd(h.geometry));if("type"in h&&"coordinates"in h)return new oa(h,cd(h))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(a,h){const g=a.geometry(),_=g.flat().map(C=>nd([C.x,C.y],a.canonical));if(g.length===0)return NaN;const x=new id(_[0][1]);let w=1/0;for(const C of h){switch(C.type){case"Point":w=Math.min(w,Zl(_,!1,[C.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,Zl(_,!1,C.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,Gl(_,!1,C.coordinates,x,w))}if(w===0)return w}return w}(i,this.geometries);if(i.geometryType()==="LineString")return function(a,h){const g=a.geometry(),_=g.flat().map(C=>nd([C.x,C.y],a.canonical));if(g.length===0)return NaN;const x=new id(_[0][1]);let w=1/0;for(const C of h){switch(C.type){case"Point":w=Math.min(w,Zl(_,!0,[C.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,Zl(_,!0,C.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,Gl(_,!0,C.coordinates,x,w))}if(w===0)return w}return w}(i,this.geometries);if(i.geometryType()==="Polygon")return function(a,h){const g=a.geometry();if(g.length===0||g[0].length===0)return NaN;const _=nc(g,0).map(C=>C.map(A=>A.map(R=>nd([R.x,R.y],a.canonical)))),x=new id(_[0][0][0][1]);let w=1/0;for(const C of h)for(const A of _){switch(C.type){case"Point":w=Math.min(w,Gl([C.coordinates],!1,A,x,w));break;case"LineString":w=Math.min(w,Gl(C.coordinates,!0,A,x,w));break;case"Polygon":w=Math.min(w,Xn(A,C.coordinates,x,w))}if(w===0)return w}return w}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ba={"==":i_,"!=":Zf,">":o_,"<":Kf,">=":Xf,"<=":s_,array:fo,at:Xh,boolean:fo,case:Ku,coalesce:Ju,collator:Hl,format:ec,image:ed,in:Yh,"index-of":La,interpolate:Ti,"interpolate-hcl":Ti,"interpolate-lab":Ti,length:td,let:Cs,literal:po,match:Jh,number:fo,"number-format":Qh,object:fo,slice:Ul,step:Da,string:fo,"to-boolean":mo,"to-color":mo,"to-number":mo,"to-string":mo,var:$n,within:na,distance:oa};class Xi{constructor(i,a,h,g){this.name=i,this.type=a,this._evaluate=h,this.args=g}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,a){const h=i[0],g=Xi.definitions[h];if(!g)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,w=x.filter(([A])=>!Array.isArray(A)||A.length===i.length-1);let C=null;for(const[A,R]of w){C=new Qs(a.registry,Kl,a.path,null,a.scope);const L=[];let N=!1;for(let Z=1;Z<i.length;Z++){const Y=i[Z],ee=Array.isArray(A)?A[Z-1]:A.type,ue=C.parse(Y,1+L.length,ee);if(!ue){N=!0;break}L.push(ue)}if(!N)if(Array.isArray(A)&&A.length!==L.length)C.error(`Expected ${A.length} arguments, but found ${L.length} instead.`);else{for(let Z=0;Z<L.length;Z++){const Y=Array.isArray(A)?A[Z]:A.type,ee=L[Z];C.concat(Z+1).checkSubtype(Y,ee.type)}if(C.errors.length===0)return new Xi(h,_,R,L)}}if(w.length===1)a.errors.push(...C.errors);else{const A=(w.length?w:x).map(([L])=>{return N=L,Array.isArray(N)?`(${N.map(j).join(", ")})`:`(${j(N.type)}...)`;var N}).join(" | "),R=[];for(let L=1;L<i.length;L++){const N=a.parse(i[L],1+R.length);if(!N)return null;R.push(j(N.type))}a.error(`Expected arguments of type ${A}, but found (${R.join(", ")}) instead.`)}return null}static register(i,a){Xi.definitions=a;for(const h in a)i[h]=Xi}}function hd(o,[i,a,h,g]){i=i.evaluate(o),a=a.evaluate(o),h=h.evaluate(o);const _=g?g.evaluate(o):1,x=pi(i,a,h,_);if(x)throw new Sr(x);return new on(i/255,a/255,h/255,_,!1)}function dd(o,i){return o in i}function pd(o,i){const a=i[o];return a===void 0?null:a}function sa(o){return{type:o}}function Kl(o){if(o instanceof $n)return Kl(o.boundExpression);if(o instanceof Xi&&o.name==="error"||o instanceof Hl||o instanceof na||o instanceof oa)return!1;const i=o instanceof mo||o instanceof fo;let a=!0;return o.eachChild(h=>{a=i?a&&Kl(h):a&&h instanceof po}),!!a&&Xl(o)&&Yl(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Xl(o){if(o instanceof Xi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof na||o instanceof oa)return!1;let i=!0;return o.eachChild(a=>{i&&!Xl(a)&&(i=!1)}),i}function $a(o){if(o instanceof Xi&&o.name==="feature-state")return!1;let i=!0;return o.eachChild(a=>{i&&!$a(a)&&(i=!1)}),i}function Yl(o,i){if(o instanceof Xi&&i.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(h=>{a&&!Yl(h,i)&&(a=!1)}),a}function sc(o){return{result:"success",value:o}}function Na(o){return{result:"error",value:o}}function Va(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function um(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function fd(o){return!!o.expression&&o.expression.interpolated}function On(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function ac(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function y_(o){return o}function cm(o,i){const a=i.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",g=h||!(h||o.property!==void 0),_=o.type||(fd(i)?"exponential":"interval");if(a||i.type==="padding"){const R=a?on.parse:Nr.parse;(o=nn({},o)).stops&&(o.stops=o.stops.map(L=>[L[0],R(L[1])])),o.default=R(o.default?o.default:i.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let w,C,A;if(_==="exponential")w=dm;else if(_==="interval")w=lc;else if(_==="categorical"){w=hm,C=Object.create(null);for(const R of o.stops)C[R[0]]=R[1];A=typeof o.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);w=pm}if(h){const R={},L=[];for(let Y=0;Y<o.stops.length;Y++){const ee=o.stops[Y],ue=ee[0].zoom;R[ue]===void 0&&(R[ue]={zoom:ue,type:o.type,property:o.property,default:o.default,stops:[]},L.push(ue)),R[ue].stops.push([ee[0].value,ee[1]])}const N=[];for(const Y of L)N.push([R[Y].zoom,cm(R[Y],i)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:Ti.interpolationFactor.bind(void 0,Z),zoomStops:N.map(Y=>Y[0]),evaluate:({zoom:Y},ee)=>dm({stops:N,base:o.base},i,Y).evaluate(Y,ee)}}if(g){const R=_==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:Ti.interpolationFactor.bind(void 0,R),zoomStops:o.stops.map(L=>L[0]),evaluate:({zoom:L})=>w(o,i,L,C,A)}}return{kind:"source",evaluate(R,L){const N=L&&L.properties?L.properties[o.property]:void 0;return N===void 0?ja(o.default,i.default):w(o,i,N,C,A)}}}function ja(o,i,a){return o!==void 0?o:i!==void 0?i:a!==void 0?a:void 0}function hm(o,i,a,h,g){return ja(typeof a===g?h[a]:void 0,o.default,i.default)}function lc(o,i,a){if(On(a)!=="number")return ja(o.default,i.default);const h=o.stops.length;if(h===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[h-1][0])return o.stops[h-1][1];const g=Xu(o.stops.map(_=>_[0]),a);return o.stops[g][1]}function dm(o,i,a){const h=o.base!==void 0?o.base:1;if(On(a)!=="number")return ja(o.default,i.default);const g=o.stops.length;if(g===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[g-1][0])return o.stops[g-1][1];const _=Xu(o.stops.map(R=>R[0]),a),x=function(R,L,N,Z){const Y=Z-N,ee=R-N;return Y===0?0:L===1?ee/Y:(Math.pow(L,ee)-1)/(Math.pow(L,Y)-1)}(a,h,o.stops[_][0],o.stops[_+1][0]),w=o.stops[_][1],C=o.stops[_+1][1],A=Ci[i.type]||y_;return typeof w.evaluate=="function"?{evaluate(...R){const L=w.evaluate.apply(void 0,R),N=C.evaluate.apply(void 0,R);if(L!==void 0&&N!==void 0)return A(L,N,x,o.colorSpace)}}:A(w,C,x,o.colorSpace)}function pm(o,i,a){switch(i.type){case"color":a=on.parse(a);break;case"formatted":a=Jr.fromString(a.toString());break;case"resolvedImage":a=gr.fromString(a.toString());break;case"padding":a=Nr.parse(a);break;default:On(a)===i.type||i.type==="enum"&&i.values[a]||(a=void 0)}return ja(a,o.default,i.default)}Xi.register(Ba,{error:[{kind:"error"},[vt],(o,[i])=>{throw new Sr(i.evaluate(o))}],typeof:[vt,[qt],(o,[i])=>j(Ir(i.evaluate(o)))],"to-rgba":[U(He,4),[Bn],(o,[i])=>{const[a,h,g,_]=i.evaluate(o).rgb;return[255*a,255*h,255*g,_]}],rgb:[Bn,[He,He,He],hd],rgba:[Bn,[He,He,He,He],hd],has:{type:zt,overloads:[[[vt],(o,[i])=>dd(i.evaluate(o),o.properties())],[[vt,Nn],(o,[i,a])=>dd(i.evaluate(o),a.evaluate(o))]]},get:{type:qt,overloads:[[[vt],(o,[i])=>pd(i.evaluate(o),o.properties())],[[vt,Nn],(o,[i,a])=>pd(i.evaluate(o),a.evaluate(o))]]},"feature-state":[qt,[vt],(o,[i])=>pd(i.evaluate(o),o.featureState||{})],properties:[Nn,[],o=>o.properties()],"geometry-type":[vt,[],o=>o.geometryType()],id:[qt,[],o=>o.id()],zoom:[He,[],o=>o.globals.zoom],"heatmap-density":[He,[],o=>o.globals.heatmapDensity||0],"line-progress":[He,[],o=>o.globals.lineProgress||0],accumulated:[qt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[He,sa(He),(o,i)=>{let a=0;for(const h of i)a+=h.evaluate(o);return a}],"*":[He,sa(He),(o,i)=>{let a=1;for(const h of i)a*=h.evaluate(o);return a}],"-":{type:He,overloads:[[[He,He],(o,[i,a])=>i.evaluate(o)-a.evaluate(o)],[[He],(o,[i])=>-i.evaluate(o)]]},"/":[He,[He,He],(o,[i,a])=>i.evaluate(o)/a.evaluate(o)],"%":[He,[He,He],(o,[i,a])=>i.evaluate(o)%a.evaluate(o)],ln2:[He,[],()=>Math.LN2],pi:[He,[],()=>Math.PI],e:[He,[],()=>Math.E],"^":[He,[He,He],(o,[i,a])=>Math.pow(i.evaluate(o),a.evaluate(o))],sqrt:[He,[He],(o,[i])=>Math.sqrt(i.evaluate(o))],log10:[He,[He],(o,[i])=>Math.log(i.evaluate(o))/Math.LN10],ln:[He,[He],(o,[i])=>Math.log(i.evaluate(o))],log2:[He,[He],(o,[i])=>Math.log(i.evaluate(o))/Math.LN2],sin:[He,[He],(o,[i])=>Math.sin(i.evaluate(o))],cos:[He,[He],(o,[i])=>Math.cos(i.evaluate(o))],tan:[He,[He],(o,[i])=>Math.tan(i.evaluate(o))],asin:[He,[He],(o,[i])=>Math.asin(i.evaluate(o))],acos:[He,[He],(o,[i])=>Math.acos(i.evaluate(o))],atan:[He,[He],(o,[i])=>Math.atan(i.evaluate(o))],min:[He,sa(He),(o,i)=>Math.min(...i.map(a=>a.evaluate(o)))],max:[He,sa(He),(o,i)=>Math.max(...i.map(a=>a.evaluate(o)))],abs:[He,[He],(o,[i])=>Math.abs(i.evaluate(o))],round:[He,[He],(o,[i])=>{const a=i.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[He,[He],(o,[i])=>Math.floor(i.evaluate(o))],ceil:[He,[He],(o,[i])=>Math.ceil(i.evaluate(o))],"filter-==":[zt,[vt,qt],(o,[i,a])=>o.properties()[i.value]===a.value],"filter-id-==":[zt,[qt],(o,[i])=>o.id()===i.value],"filter-type-==":[zt,[vt],(o,[i])=>o.geometryType()===i.value],"filter-<":[zt,[vt,qt],(o,[i,a])=>{const h=o.properties()[i.value],g=a.value;return typeof h==typeof g&&h<g}],"filter-id-<":[zt,[qt],(o,[i])=>{const a=o.id(),h=i.value;return typeof a==typeof h&&a<h}],"filter->":[zt,[vt,qt],(o,[i,a])=>{const h=o.properties()[i.value],g=a.value;return typeof h==typeof g&&h>g}],"filter-id->":[zt,[qt],(o,[i])=>{const a=o.id(),h=i.value;return typeof a==typeof h&&a>h}],"filter-<=":[zt,[vt,qt],(o,[i,a])=>{const h=o.properties()[i.value],g=a.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[zt,[qt],(o,[i])=>{const a=o.id(),h=i.value;return typeof a==typeof h&&a<=h}],"filter->=":[zt,[vt,qt],(o,[i,a])=>{const h=o.properties()[i.value],g=a.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[zt,[qt],(o,[i])=>{const a=o.id(),h=i.value;return typeof a==typeof h&&a>=h}],"filter-has":[zt,[qt],(o,[i])=>i.value in o.properties()],"filter-has-id":[zt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[zt,[U(vt)],(o,[i])=>i.value.indexOf(o.geometryType())>=0],"filter-id-in":[zt,[U(qt)],(o,[i])=>i.value.indexOf(o.id())>=0],"filter-in-small":[zt,[vt,U(qt)],(o,[i,a])=>a.value.indexOf(o.properties()[i.value])>=0],"filter-in-large":[zt,[vt,U(qt)],(o,[i,a])=>function(h,g,_,x){for(;_<=x;){const w=_+x>>1;if(g[w]===h)return!0;g[w]>h?x=w-1:_=w+1}return!1}(o.properties()[i.value],a.value,0,a.value.length-1)],all:{type:zt,overloads:[[[zt,zt],(o,[i,a])=>i.evaluate(o)&&a.evaluate(o)],[sa(zt),(o,i)=>{for(const a of i)if(!a.evaluate(o))return!1;return!0}]]},any:{type:zt,overloads:[[[zt,zt],(o,[i,a])=>i.evaluate(o)||a.evaluate(o)],[sa(zt),(o,i)=>{for(const a of i)if(a.evaluate(o))return!0;return!1}]]},"!":[zt,[zt],(o,[i])=>!i.evaluate(o)],"is-supported-script":[zt,[vt],(o,[i])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(i.evaluate(o))}],upcase:[vt,[vt],(o,[i])=>i.evaluate(o).toUpperCase()],downcase:[vt,[vt],(o,[i])=>i.evaluate(o).toLowerCase()],concat:[vt,sa(qt),(o,i)=>i.map(a=>jl(a.evaluate(o))).join("")],"resolved-locale":[vt,[At],(o,[i])=>i.evaluate(o).resolvedLocale()]});class uc{constructor(i,a){var h;this.expression=i,this._warningHistory={},this._evaluator=new Zu,this._defaultValue=a?(h=a).type==="color"&&ac(h.default)?new on(0,0,0,0):h.type==="color"?on.parse(h.default)||null:h.type==="padding"?Nr.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?vn.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(i,a,h,g,_,x){return this._evaluator.globals=i,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(i,a,h,g,_,x){this._evaluator.globals=i,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Sr(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function cc(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ba}function Ua(o,i){const a=new Qs(Ba,Kl,[],i?function(g){const _={color:Bn,string:vt,number:He,enum:vt,boolean:zt,formatted:pn,padding:Cn,resolvedImage:cn,variableAnchorOffsetCollection:se};return g.type==="array"?U(_[g.value]||qt,g.length):_[g.type]}(i):void 0),h=a.parse(o,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?sc(new uc(h,i)):Na(a.errors)}class Wa{constructor(i,a){this.kind=i,this._styleExpression=a,this.isStateDependent=i!=="constant"&&!$a(a.expression)}evaluateWithoutErrorHandling(i,a,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(i,a,h,g,_,x)}evaluate(i,a,h,g,_,x){return this._styleExpression.evaluate(i,a,h,g,_,x)}}class Ha{constructor(i,a,h,g){this.kind=i,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=i!=="camera"&&!$a(a.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,a,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(i,a,h,g,_,x)}evaluate(i,a,h,g,_,x){return this._styleExpression.evaluate(i,a,h,g,_,x)}interpolationFactor(i,a,h){return this.interpolationType?Ti.interpolationFactor(this.interpolationType,i,a,h):0}}function md(o,i){const a=Ua(o,i);if(a.result==="error")return a;const h=a.value.expression,g=Xl(h);if(!g&&!Va(i))return Na([new it("","data expressions not supported")]);const _=Yl(h,["zoom"]);if(!_&&!um(i))return Na([new it("","zoom expressions not supported")]);const x=Jl(h);return x||_?x instanceof it?Na([x]):x instanceof Ti&&!fd(i)?Na([new it("",'"interpolate" expressions cannot be used with this property')]):sc(x?new Ha(g?"camera":"composite",a.value,x.labels,x instanceof Ti?x.interpolation:void 0):new Wa(g?"constant":"source",a.value)):Na([new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class qa{constructor(i,a){this._parameters=i,this._specification=a,nn(this,cm(this._parameters,this._specification))}static deserialize(i){return new qa(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Jl(o){let i=null;if(o instanceof Cs)i=Jl(o.result);else if(o instanceof Ju){for(const a of o.args)if(i=Jl(a),i)break}else(o instanceof Da||o instanceof Ti)&&o.input instanceof Xi&&o.input.name==="zoom"&&(i=o);return i instanceof it||o.eachChild(a=>{const h=Jl(a);h instanceof it?i=h:!i&&h?i=new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&h&&i!==h&&(i=new it("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function hc(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const i of o.slice(1))if(!hc(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const dc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gd(o){if(o==null)return{filter:()=>!0,needGeometry:!1};hc(o)||(o=pc(o));const i=Ua(o,dc);if(i.result==="error")throw new Error(i.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,h,g)=>i.value.evaluate(a,h,{},g),needGeometry:fm(o)}}function v_(o,i){return o<i?-1:o>i?1:0}function fm(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let i=1;i<o.length;i++)if(fm(o[i]))return!0;return!1}function pc(o){if(!o)return!0;const i=o[0];return o.length<=1?i!=="any":i==="=="?yd(o[1],o[2],"=="):i==="!="?Qr(yd(o[1],o[2],"==")):i==="<"||i===">"||i==="<="||i===">="?yd(o[1],o[2],i):i==="any"?(a=o.slice(1),["any"].concat(a.map(pc))):i==="all"?["all"].concat(o.slice(1).map(pc)):i==="none"?["all"].concat(o.slice(1).map(pc).map(Qr)):i==="in"?Ql(o[1],o.slice(2)):i==="!in"?Qr(Ql(o[1],o.slice(2))):i==="has"?eu(o[1]):i!=="!has"||Qr(eu(o[1]));var a}function yd(o,i,a){switch(o){case"$type":return[`filter-type-${a}`,i];case"$id":return[`filter-id-${a}`,i];default:return[`filter-${a}`,o,i]}}function Ql(o,i){if(i.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(a=>typeof a!=typeof i[0])?["filter-in-large",o,["literal",i.sort(v_)]]:["filter-in-small",o,["literal",i]]}}function eu(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Qr(o){return["!",o]}function aa(o){const i=typeof o;if(i==="number"||i==="boolean"||i==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let g="[";for(const _ of o)g+=`${aa(_)},`;return`${g}]`}const a=Object.keys(o).sort();let h="{";for(let g=0;g<a.length;g++)h+=`${JSON.stringify(a[g])}:${aa(o[a[g]])},`;return`${h}}`}function mm(o){let i="";for(const a of un)i+=`/${aa(o[a])}`;return i}function gm(o){const i=o.value;return i?[new Ve(o.key,i,"constants have been deprecated as of v8")]:[]}function vr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function go(o){if(Array.isArray(o))return o.map(go);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const i={};for(const a in o)i[a]=go(o[a]);return i}return vr(o)}function Ni(o){const i=o.key,a=o.value,h=o.valueSpec||{},g=o.objectElementValidators||{},_=o.style,x=o.styleSpec,w=o.validateSpec;let C=[];const A=On(a);if(A!=="object")return[new Ve(i,a,`object expected, ${A} found`)];for(const R in a){const L=R.split(".")[0],N=h[L]||h["*"];let Z;if(g[L])Z=g[L];else if(h[L])Z=w;else if(g["*"])Z=g["*"];else{if(!h["*"]){C.push(new Ve(i,a[R],`unknown property "${R}"`));continue}Z=w}C=C.concat(Z({key:(i&&`${i}.`)+R,value:a[R],valueSpec:N,style:_,styleSpec:x,object:a,objectKey:R,validateSpec:w},a))}for(const R in h)g[R]||h[R].required&&h[R].default===void 0&&a[R]===void 0&&C.push(new Ve(i,a,`missing required property "${R}"`));return C}function tu(o){const i=o.value,a=o.valueSpec,h=o.style,g=o.styleSpec,_=o.key,x=o.arrayElementValidator||o.validateSpec;if(On(i)!=="array")return[new Ve(_,i,`array expected, ${On(i)} found`)];if(a.length&&i.length!==a.length)return[new Ve(_,i,`array length ${a.length} expected, length ${i.length} found`)];if(a["min-length"]&&i.length<a["min-length"])return[new Ve(_,i,`array length at least ${a["min-length"]} expected, length ${i.length} found`)];let w={type:a.value,values:a.values};g.$version<7&&(w.function=a.function),On(a.value)==="object"&&(w=a.value);let C=[];for(let A=0;A<i.length;A++)C=C.concat(x({array:i,arrayIndex:A,value:i[A],valueSpec:w,validateSpec:o.validateSpec,style:h,styleSpec:g,key:`${_}[${A}]`}));return C}function vd(o){const i=o.key,a=o.value,h=o.valueSpec;let g=On(a);return g==="number"&&a!=a&&(g="NaN"),g!=="number"?[new Ve(i,a,`number expected, ${g} found`)]:"minimum"in h&&a<h.minimum?[new Ve(i,a,`${a} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&a>h.maximum?[new Ve(i,a,`${a} is greater than the maximum value ${h.maximum}`)]:[]}function fc(o){const i=o.valueSpec,a=vr(o.value.type);let h,g,_,x={};const w=a!=="categorical"&&o.value.property===void 0,C=!w,A=On(o.value.stops)==="array"&&On(o.value.stops[0])==="array"&&On(o.value.stops[0][0])==="object",R=Ni({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Z){if(a==="identity")return[new Ve(Z.key,Z.value,'identity function may not have a "stops" property')];let Y=[];const ee=Z.value;return Y=Y.concat(tu({key:Z.key,value:ee,valueSpec:Z.valueSpec,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,arrayElementValidator:L})),On(ee)==="array"&&ee.length===0&&Y.push(new Ve(Z.key,ee,"array must have at least one stop")),Y},default:function(Z){return Z.validateSpec({key:Z.key,value:Z.value,valueSpec:i,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec})}}});return a==="identity"&&w&&R.push(new Ve(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||R.push(new Ve(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!fd(o.valueSpec)&&R.push(new Ve(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(C&&!Va(o.valueSpec)?R.push(new Ve(o.key,o.value,"property functions not supported")):w&&!um(o.valueSpec)&&R.push(new Ve(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!A||o.value.property!==void 0||R.push(new Ve(o.key,o.value,'"property" property is required')),R;function L(Z){let Y=[];const ee=Z.value,ue=Z.key;if(On(ee)!=="array")return[new Ve(ue,ee,`array expected, ${On(ee)} found`)];if(ee.length!==2)return[new Ve(ue,ee,`array length 2 expected, length ${ee.length} found`)];if(A){if(On(ee[0])!=="object")return[new Ve(ue,ee,`object expected, ${On(ee[0])} found`)];if(ee[0].zoom===void 0)return[new Ve(ue,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new Ve(ue,ee,"object stop key must have value")];if(_&&_>vr(ee[0].zoom))return[new Ve(ue,ee[0].zoom,"stop zoom values must appear in ascending order")];vr(ee[0].zoom)!==_&&(_=vr(ee[0].zoom),g=void 0,x={}),Y=Y.concat(Ni({key:`${ue}[0]`,value:ee[0],valueSpec:{zoom:{}},validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{zoom:vd,value:N}}))}else Y=Y.concat(N({key:`${ue}[0]`,value:ee[0],validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec},ee));return cc(go(ee[1]))?Y.concat([new Ve(`${ue}[1]`,ee[1],"expressions are not allowed in function stops.")]):Y.concat(Z.validateSpec({key:`${ue}[1]`,value:ee[1],valueSpec:i,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec}))}function N(Z,Y){const ee=On(Z.value),ue=vr(Z.value),de=Z.value!==null?Z.value:Y;if(h){if(ee!==h)return[new Ve(Z.key,de,`${ee} stop domain type must match previous stop domain type ${h}`)]}else h=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new Ve(Z.key,de,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&a!=="categorical"){let Ae=`number expected, ${ee} found`;return Va(i)&&a===void 0&&(Ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ve(Z.key,de,Ae)]}return a!=="categorical"||ee!=="number"||isFinite(ue)&&Math.floor(ue)===ue?a!=="categorical"&&ee==="number"&&g!==void 0&&ue<g?[new Ve(Z.key,de,"stop domain values must appear in ascending order")]:(g=ue,a==="categorical"&&ue in x?[new Ve(Z.key,de,"stop domain values must be unique")]:(x[ue]=!0,[])):[new Ve(Z.key,de,`integer expected, found ${ue}`)]}}function Ga(o){const i=(o.expressionContext==="property"?md:Ua)(go(o.value),o.valueSpec);if(i.result==="error")return i.value.map(h=>new Ve(`${o.key}${h.key}`,o.value,h.message));const a=i.value.expression||i.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new Ve(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!$a(a))return[new Ve(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!$a(a))return[new Ve(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Yl(a,["zoom","feature-state"]))return[new Ve(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Xl(a))return[new Ve(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function us(o){const i=o.key,a=o.value,h=o.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(vr(a))===-1&&g.push(new Ve(i,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(vr(a))===-1&&g.push(new Ve(i,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),g}function _d(o){return hc(go(o.value))?Ga(nn({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):mc(o)}function mc(o){const i=o.value,a=o.key;if(On(i)!=="array")return[new Ve(a,i,`array expected, ${On(i)} found`)];const h=o.styleSpec;let g,_=[];if(i.length<1)return[new Ve(a,i,"filter array must have at least 1 element")];switch(_=_.concat(us({key:`${a}[0]`,value:i[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),vr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&vr(i[1])==="$type"&&_.push(new Ve(a,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&_.push(new Ve(a,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(g=On(i[1]),g!=="string"&&_.push(new Ve(`${a}[1]`,i[1],`string expected, ${g} found`)));for(let x=2;x<i.length;x++)g=On(i[x]),vr(i[1])==="$type"?_=_.concat(us({key:`${a}[${x}]`,value:i[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Ve(`${a}[${x}]`,i[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)_=_.concat(mc({key:`${a}[${x}]`,value:i[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":g=On(i[1]),i.length!==2?_.push(new Ve(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Ve(`${a}[1]`,i[1],`string expected, ${g} found`))}return _}function xd(o,i){const a=o.key,h=o.validateSpec,g=o.style,_=o.styleSpec,x=o.value,w=o.objectKey,C=_[`${i}_${o.layerType}`];if(!C)return[];const A=w.match(/^(.*)-transition$/);if(i==="paint"&&A&&C[A[1]]&&C[A[1]].transition)return h({key:a,value:x,valueSpec:_.transition,style:g,styleSpec:_});const R=o.valueSpec||C[w];if(!R)return[new Ve(a,x,`unknown property "${w}"`)];let L;if(On(x)==="string"&&Va(R)&&!R.tokens&&(L=/^{([^}]+)}$/.exec(x)))return[new Ve(a,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];const N=[];return o.layerType==="symbol"&&(w==="text-field"&&g&&!g.glyphs&&N.push(new Ve(a,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&ac(go(x))&&vr(x.type)==="identity"&&N.push(new Ve(a,x,'"text-font" does not support identity functions'))),N.concat(h({key:o.key,value:x,valueSpec:R,style:g,styleSpec:_,expressionContext:"property",propertyType:i,propertyKey:w}))}function gc(o){return xd(o,"paint")}function bd(o){return xd(o,"layout")}function wd(o){let i=[];const a=o.value,h=o.key,g=o.style,_=o.styleSpec;a.type||a.ref||i.push(new Ve(h,a,'either "type" or "ref" is required'));let x=vr(a.type);const w=vr(a.ref);if(a.id){const C=vr(a.id);for(let A=0;A<o.arrayIndex;A++){const R=g.layers[A];vr(R.id)===C&&i.push(new Ve(h,a.id,`duplicate layer id "${a.id}", previously used at line ${R.id.__line__}`))}}if("ref"in a){let C;["type","source","source-layer","filter","layout"].forEach(A=>{A in a&&i.push(new Ve(h,a[A],`"${A}" is prohibited for ref layers`))}),g.layers.forEach(A=>{vr(A.id)===w&&(C=A)}),C?C.ref?i.push(new Ve(h,a.ref,"ref cannot reference another ref layer")):x=vr(C.type):i.push(new Ve(h,a.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(a.source){const C=g.sources&&g.sources[a.source],A=C&&vr(C.type);C?A==="vector"&&x==="raster"?i.push(new Ve(h,a.source,`layer "${a.id}" requires a raster source`)):A!=="raster-dem"&&x==="hillshade"?i.push(new Ve(h,a.source,`layer "${a.id}" requires a raster-dem source`)):A==="raster"&&x!=="raster"?i.push(new Ve(h,a.source,`layer "${a.id}" requires a vector source`)):A!=="vector"||a["source-layer"]?A==="raster-dem"&&x!=="hillshade"?i.push(new Ve(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||A==="geojson"&&C.lineMetrics||i.push(new Ve(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Ve(h,a,`layer "${a.id}" must specify a "source-layer"`)):i.push(new Ve(h,a.source,`source "${a.source}" not found`))}else i.push(new Ve(h,a,'missing required property "source"'));return i=i.concat(Ni({key:h,value:a,valueSpec:_.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:a.type,valueSpec:_.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:a,objectKey:"type"}),filter:_d,layout:C=>Ni({layer:a,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":A=>bd(nn({layerType:x},A))}}),paint:C=>Ni({layer:a,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":A=>gc(nn({layerType:x},A))}})}})),i}function la(o){const i=o.value,a=o.key,h=On(i);return h!=="string"?[new Ve(a,i,`string expected, ${h} found`)]:[]}const yc={promoteId:function({key:o,value:i}){if(On(i)==="string")return la({key:o,value:i});{const a=[];for(const h in i)a.push(...la({key:`${o}.${h}`,value:i[h]}));return a}}};function nu(o){const i=o.value,a=o.key,h=o.styleSpec,g=o.style,_=o.validateSpec;if(!i.type)return[new Ve(a,i,'"type" is required')];const x=vr(i.type);let w;switch(x){case"vector":case"raster":return w=Ni({key:a,value:i,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:yc,validateSpec:_}),w;case"raster-dem":return w=function(C){var A;const R=(A=C.sourceName)!==null&&A!==void 0?A:"",L=C.value,N=C.styleSpec,Z=N.source_raster_dem,Y=C.style;let ee=[];const ue=On(L);if(L===void 0)return ee;if(ue!=="object")return ee.push(new Ve("source_raster_dem",L,`object expected, ${ue} found`)),ee;const de=vr(L.encoding)==="custom",Ae=["redFactor","greenFactor","blueFactor","baseShift"],xe=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const ke in L)!de&&Ae.includes(ke)?ee.push(new Ve(ke,L[ke],`In "${R}": "${ke}" is only valid when "encoding" is set to "custom". ${xe} encoding found`)):Z[ke]?ee=ee.concat(C.validateSpec({key:ke,value:L[ke],valueSpec:Z[ke],validateSpec:C.validateSpec,style:Y,styleSpec:N})):ee.push(new Ve(ke,L[ke],`unknown property "${ke}"`));return ee}({sourceName:a,value:i,style:o.style,styleSpec:h,validateSpec:_}),w;case"geojson":if(w=Ni({key:a,value:i,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:_,objectElementValidators:yc}),i.cluster)for(const C in i.clusterProperties){const[A,R]=i.clusterProperties[C],L=typeof A=="string"?[A,["accumulated"],["get",C]]:A;w.push(...Ga({key:`${a}.${C}.map`,value:R,expressionContext:"cluster-map"})),w.push(...Ga({key:`${a}.${C}.reduce`,value:L,expressionContext:"cluster-reduce"}))}return w;case"video":return Ni({key:a,value:i,valueSpec:h.source_video,style:g,validateSpec:_,styleSpec:h});case"image":return Ni({key:a,value:i,valueSpec:h.source_image,style:g,validateSpec:_,styleSpec:h});case"canvas":return[new Ve(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return us({key:`${a}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Sd(o){const i=o.value,a=o.styleSpec,h=a.light,g=o.style;let _=[];const x=On(i);if(i===void 0)return _;if(x!=="object")return _=_.concat([new Ve("light",i,`object expected, ${x} found`)]),_;for(const w in i){const C=w.match(/^(.*)-transition$/);_=_.concat(C&&h[C[1]]&&h[C[1]].transition?o.validateSpec({key:w,value:i[w],valueSpec:a.transition,validateSpec:o.validateSpec,style:g,styleSpec:a}):h[w]?o.validateSpec({key:w,value:i[w],valueSpec:h[w],validateSpec:o.validateSpec,style:g,styleSpec:a}):[new Ve(w,i[w],`unknown property "${w}"`)])}return _}function Cd(o){const i=o.value,a=o.styleSpec,h=a.sky,g=o.style,_=On(i);if(i===void 0)return[];if(_!=="object")return[new Ve("sky",i,`object expected, ${_} found`)];let x=[];for(const w in i)x=x.concat(h[w]?o.validateSpec({key:w,value:i[w],valueSpec:h[w],style:g,styleSpec:a}):[new Ve(w,i[w],`unknown property "${w}"`)]);return x}function Td(o){const i=o.value,a=o.styleSpec,h=a.terrain,g=o.style;let _=[];const x=On(i);if(i===void 0)return _;if(x!=="object")return _=_.concat([new Ve("terrain",i,`object expected, ${x} found`)]),_;for(const w in i)_=_.concat(h[w]?o.validateSpec({key:w,value:i[w],valueSpec:h[w],validateSpec:o.validateSpec,style:g,styleSpec:a}):[new Ve(w,i[w],`unknown property "${w}"`)]);return _}function Pd(o){let i=[];const a=o.value,h=o.key;if(Array.isArray(a)){const g=[],_=[];for(const x in a)a[x].id&&g.includes(a[x].id)&&i.push(new Ve(h,a,`all the sprites' ids must be unique, but ${a[x].id} is duplicated`)),g.push(a[x].id),a[x].url&&_.includes(a[x].url)&&i.push(new Ve(h,a,`all the sprites' URLs must be unique, but ${a[x].url} is duplicated`)),_.push(a[x].url),i=i.concat(Ni({key:`${h}[${x}]`,value:a[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return i}return la({key:h,value:a})}const vc={"*":()=>[],array:tu,boolean:function(o){const i=o.value,a=o.key,h=On(i);return h!=="boolean"?[new Ve(a,i,`boolean expected, ${h} found`)]:[]},number:vd,color:function(o){const i=o.key,a=o.value,h=On(a);return h!=="string"?[new Ve(i,a,`color expected, ${h} found`)]:on.parse(String(a))?[]:[new Ve(i,a,`color expected, "${a}" found`)]},constants:gm,enum:us,filter:_d,function:fc,layer:wd,object:Ni,source:nu,light:Sd,sky:Cd,terrain:Td,projection:function(o){const i=o.value,a=o.styleSpec,h=a.projection,g=o.style,_=On(i);if(i===void 0)return[];if(_!=="object")return[new Ve("projection",i,`object expected, ${_} found`)];let x=[];for(const w in i)x=x.concat(h[w]?o.validateSpec({key:w,value:i[w],valueSpec:h[w],style:g,styleSpec:a}):[new Ve(w,i[w],`unknown property "${w}"`)]);return x},string:la,formatted:function(o){return la(o).length===0?[]:Ga(o)},resolvedImage:function(o){return la(o).length===0?[]:Ga(o)},padding:function(o){const i=o.key,a=o.value;if(On(a)==="array"){if(a.length<1||a.length>4)return[new Ve(i,a,`padding requires 1 to 4 values; ${a.length} values found`)];const h={type:"number"};let g=[];for(let _=0;_<a.length;_++)g=g.concat(o.validateSpec({key:`${i}[${_}]`,value:a[_],validateSpec:o.validateSpec,valueSpec:h}));return g}return vd({key:i,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const i=o.key,a=o.value,h=On(a),g=o.styleSpec;if(h!=="array"||a.length<1||a.length%2!=0)return[new Ve(i,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<a.length;x+=2)_=_.concat(us({key:`${i}[${x}]`,value:a[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(tu({key:`${i}[${x+1}]`,value:a[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:g}));return _},sprite:Pd};function ru(o){const i=o.value,a=o.valueSpec,h=o.styleSpec;return o.validateSpec=ru,a.expression&&ac(vr(i))?fc(o):a.expression&&cc(go(i))?Ga(o):a.type&&vc[a.type]?vc[a.type](o):Ni(nn({},o,{valueSpec:a.type?h[a.type]:a}))}function ym(o){const i=o.value,a=o.key,h=la(o);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new Ve(a,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new Ve(a,i,'"glyphs" url must include a "{range}" token'))),h}function Yi(o,i=Ce){let a=[];return a=a.concat(ru({key:"",value:o,valueSpec:i.$root,styleSpec:i,style:o,validateSpec:ru,objectElementValidators:{glyphs:ym,"*":()=>[]}})),o.constants&&(a=a.concat(gm({key:"constants",value:o.constants}))),kd(a)}function Bo(o){return function(i){return o({...i,validateSpec:ru})}}function kd(o){return[].concat(o).sort((i,a)=>i.line-a.line)}function yo(o){return function(...i){return kd(o.apply(this,i))}}Yi.source=yo(Bo(nu)),Yi.sprite=yo(Bo(Pd)),Yi.glyphs=yo(Bo(ym)),Yi.light=yo(Bo(Sd)),Yi.sky=yo(Bo(Cd)),Yi.terrain=yo(Bo(Td)),Yi.layer=yo(Bo(wd)),Yi.filter=yo(Bo(_d)),Yi.paintProperty=yo(Bo(gc)),Yi.layoutProperty=yo(Bo(bd));const ua=Yi,__=ua.light,x_=ua.sky,vm=ua.paintProperty,_m=ua.layoutProperty;function Ed(o,i){let a=!1;if(i&&i.length)for(const h of i)o.fire(new Wt(new Error(h.message))),a=!0;return a}class Za{constructor(i,a,h){const g=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const x=new Int32Array(this.arrayBuffer);i=x[0],this.d=(a=x[1])+2*(h=x[2]);for(let C=0;C<this.d*this.d;C++){const A=x[3+C],R=x[3+C+1];g.push(A===R?null:x.subarray(A,R))}const w=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=a+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=i,this.padding=h,this.scale=a/i,this.uid=0;const _=h/a*i;this.min=-_,this.max=i+_}insert(i,a,h,g,_){this._forEachCell(a,h,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,a,h,g,_,x){this.cells[_].push(x)}query(i,a,h,g,_){const x=this.min,w=this.max;if(i<=x&&a<=x&&w<=h&&w<=g&&!_)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(i,a,h,g,this._queryCell,C,{},_),C}}_queryCell(i,a,h,g,_,x,w,C){const A=this.cells[_];if(A!==null){const R=this.keys,L=this.bboxes;for(let N=0;N<A.length;N++){const Z=A[N];if(w[Z]===void 0){const Y=4*Z;(C?C(L[Y+0],L[Y+1],L[Y+2],L[Y+3]):i<=L[Y+2]&&a<=L[Y+3]&&h>=L[Y+0]&&g>=L[Y+1])?(w[Z]=!0,x.push(R[Z])):w[Z]=!1}}}}_forEachCell(i,a,h,g,_,x,w,C){const A=this._convertToCellCoord(i),R=this._convertToCellCoord(a),L=this._convertToCellCoord(h),N=this._convertToCellCoord(g);for(let Z=A;Z<=L;Z++)for(let Y=R;Y<=N;Y++){const ee=this.d*Y+Z;if((!C||C(this._convertFromCellCoord(Z),this._convertFromCellCoord(Y),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(Y+1)))&&_.call(this,i,a,h,g,ee,x,w,C))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,a=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(a+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=a;for(let x=0;x<i.length;x++){const w=i[x];g[3+x]=_,g.set(w,_),_+=w.length}return g[3+i.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+i.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(i,a){const h=i.toArrayBuffer();return a&&a.push(h),{buffer:h}}static deserialize(i){return new Za(i.buffer)}}const Ji={};function Pt(o,i,a={}){if(Ji[o])throw new Error(`${o} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:o,writeable:!1}),Ji[o]={klass:i,omit:a.omit||[],shallow:a.shallow||[]}}Pt("Object",Object),Pt("TransferableGridIndex",Za),Pt("Color",on),Pt("Error",Error),Pt("AJAXError",kt),Pt("ResolvedImage",gr),Pt("StylePropertyFunction",qa),Pt("StyleExpression",uc,{omit:["_evaluator"]}),Pt("ZoomDependentExpression",Ha),Pt("ZoomConstantExpression",Wa),Pt("CompoundExpression",Xi,{omit:["_evaluate"]});for(const o in Ba)Ba[o]._classRegistryKey||Pt(`Expression_${o}`,Ba[o]);function _c(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Id(o){return o.$name||o.constructor._classRegistryKey}function xm(o){return!function(i){if(i===null||typeof i!="object")return!1;const a=Id(i);return!(!a||a==="Object")}(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||_c(o)||Ue(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function Ka(o,i){if(xm(o))return(_c(o)||Ue(o))&&i&&i.push(o),ArrayBuffer.isView(o)&&i&&i.push(o.buffer),o instanceof ImageData&&i&&i.push(o.data.buffer),o;if(Array.isArray(o)){const _=[];for(const x of o)_.push(Ka(x,i));return _}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const a=Id(o);if(!a)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!Ji[a])throw new Error(`${a} is not registered.`);const{klass:h}=Ji[a],g=h.serialize?h.serialize(o,i):{};if(h.serialize){if(i&&g===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in o){if(!o.hasOwnProperty(_)||Ji[a].omit.indexOf(_)>=0)continue;const x=o[_];g[_]=Ji[a].shallow.indexOf(_)>=0?x:Ka(x,i)}o instanceof Error&&(g.message=o.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(g.$name=a),g}function Xa(o){if(xm(o))return o;if(Array.isArray(o))return o.map(Xa);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const i=Id(o)||"Object";if(!Ji[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:a}=Ji[i];if(!a)throw new Error(`can't deserialize unregistered class ${i}`);if(a.deserialize)return a.deserialize(o);const h=Object.create(a.prototype);for(const g of Object.keys(o)){if(g==="$name")continue;const _=o[g];h[g]=Ji[i].shallow.indexOf(g)>=0?_:Xa(_)}return h}class Ad{constructor(){this.first=!0}update(i,a){const h=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=h,!0))}}const kn={"Latin-1 Supplement":o=>o>=128&&o<=255,"Hangul Jamo":o=>o>=4352&&o<=4607,Khmer:o=>o>=6016&&o<=6143,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Katakana:o=>o>=12448&&o<=12543,Kanbun:o=>o>=12688&&o<=12703,"CJK Strokes":o=>o>=12736&&o<=12783,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"Private Use Area":o=>o>=57344&&o<=63743,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Md(o){for(const i of o)if(zd(i.charCodeAt(0)))return!0;return!1}function b_(o){for(const i of o)if(!Ya(i.charCodeAt(0)))return!1;return!0}function Rd(o){const i=o.map(a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch{return null}}).filter(a=>a);return new RegExp(i.join("|"),"u")}const w_=Rd(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ya(o){return!w_.test(String.fromCodePoint(o))}const bm=Rd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function zd(o){return!(o!==746&&o!==747&&(o<4352||!(kn["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||kn["CJK Compatibility"](o)||kn["CJK Strokes"](o)||!(!kn["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||kn["Enclosed CJK Letters and Months"](o)||kn["Ideographic Description Characters"](o)||kn.Kanbun(o)||kn.Katakana(o)&&o!==12540||!(!kn["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!kn["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||kn["Vertical Forms"](o)||kn["Yijing Hexagram Symbols"](o)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(o))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(o))||bm.test(String.fromCodePoint(o)))))}function wm(o){return!(zd(o)||function(i){return!!(kn["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||kn["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||kn["Letterlike Symbols"](i)||kn["Number Forms"](i)||kn["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||kn["Control Pictures"](i)&&i!==9251||kn["Optical Character Recognition"](i)||kn["Enclosed Alphanumerics"](i)||kn["Geometric Shapes"](i)||kn["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||kn["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||kn["CJK Symbols and Punctuation"](i)||kn.Katakana(i)||kn["Private Use Area"](i)||kn["CJK Compatibility Forms"](i)||kn["Small Form Variants"](i)||kn["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(o))}const S_=Rd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ld(o){return S_.test(String.fromCodePoint(o))}function C_(o,i){return!(!i&&Ld(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||kn.Khmer(o))}function T_(o){for(const i of o)if(Ld(i.charCodeAt(0)))return!0;return!1}const Vi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class rr{constructor(i,a){this.zoom=i,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ad,this.transition={})}isSupportedScript(i){return function(a,h){for(const g of a)if(!C_(g.charCodeAt(0),h))return!1;return!0}(i,Vi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,a=i-Math.floor(i),h=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class Ja{constructor(i,a){this.property=i,this.value=a,this.expression=function(h,g){if(ac(h))return new qa(h,g);if(cc(h)){const _=md(h,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return g.type==="color"&&typeof h=="string"?_=on.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(_=vn.parse(h)):_=Nr.parse(h),{kind:"constant",evaluate:()=>_}}}(a===void 0?i.specification.default:a,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,a,h){return this.property.possiblyEvaluate(this,i,a,h)}}class xc{constructor(i){this.property=i,this.value=new Ja(i,void 0)}transitioned(i,a){return new Sm(this.property,this.value,a,ae({},i.transition,this.transition),i.now)}untransitioned(){return new Sm(this.property,this.value,null,{},0)}}class bc{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Re(this._values[i].value.value)}setValue(i,a){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new xc(this._values[i].property)),this._values[i].value=new Ja(this._values[i].property,a===null?void 0:Re(a))}getTransition(i){return Re(this._values[i].transition)}setTransition(i,a){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new xc(this._values[i].property)),this._values[i].transition=Re(a)||void 0}serialize(){const i={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(i[a]=h);const g=this.getTransition(a);g!==void 0&&(i[`${a}-transition`]=g)}return i}transitioned(i,a){const h=new iu(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(i,a._values[g]);return h}untransitioned(){const i=new iu(this._properties);for(const a of Object.keys(this._values))i._values[a]=this._values[a].untransitioned();return i}}class Sm{constructor(i,a,h,g,_){this.property=i,this.value=a,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,i.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(i,a,h){const g=i.now||0,_=this.value.possiblyEvaluate(i,a,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(i,a,h);{const w=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,a,h),_,function(C){if(C<=0)return 0;if(C>=1)return 1;const A=C*C,R=A*C;return 4*(C<.5?R:3*(C-A)+R-.75)}(w))}}return _}}class iu{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,a,h){const g=new su(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(i,a,h);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class ou{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Re(this._values[i].value)}setValue(i,a){this._values[i]=new Ja(this._values[i].property,a===null?void 0:Re(a))}serialize(){const i={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(i[a]=h)}return i}possiblyEvaluate(i,a,h){const g=new su(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(i,a,h);return g}}class $o{constructor(i,a,h){this.property=i,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,a,h,g){return this.property.evaluate(this.value,this.parameters,i,a,h,g)}}class su{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Mt{constructor(i){this.specification=i}possiblyEvaluate(i,a){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(a)}interpolate(i,a,h){const g=Ci[this.specification.type];return g?g(i,a,h):i}}class tn{constructor(i,a){this.specification=i,this.overrides=a}possiblyEvaluate(i,a,h,g){return new $o(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(a,null,{},h,g)}:i.expression,a)}interpolate(i,a,h){if(i.value.kind!=="constant"||a.value.kind!=="constant")return i;if(i.value.value===void 0||a.value.value===void 0)return new $o(this,{kind:"constant",value:void 0},i.parameters);const g=Ci[this.specification.type];if(g){const _=g(i.value.value,a.value.value,h);return new $o(this,{kind:"constant",value:_},i.parameters)}return i}evaluate(i,a,h,g,_,x){return i.kind==="constant"?i.value:i.evaluate(a,h,g,_,x)}}class wc extends tn{possiblyEvaluate(i,a,h,g){if(i.value===void 0)return new $o(this,{kind:"constant",value:void 0},a);if(i.expression.kind==="constant"){const _=i.expression.evaluate(a,null,{},h,g),x=i.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,w=this._calculate(x,x,x,a);return new $o(this,{kind:"constant",value:w},a)}if(i.expression.kind==="camera"){const _=this._calculate(i.expression.evaluate({zoom:a.zoom-1}),i.expression.evaluate({zoom:a.zoom}),i.expression.evaluate({zoom:a.zoom+1}),a);return new $o(this,{kind:"constant",value:_},a)}return new $o(this,i.expression,a)}evaluate(i,a,h,g,_,x){if(i.kind==="source"){const w=i.evaluate(a,h,g,_,x);return this._calculate(w,w,w,a)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(a.zoom)-1},h,g),i.evaluate({zoom:Math.floor(a.zoom)},h,g),i.evaluate({zoom:Math.floor(a.zoom)+1},h,g),a):i.value}_calculate(i,a,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:h,to:a}}interpolate(i){return i}}class Sc{constructor(i){this.specification=i}possiblyEvaluate(i,a,h,g){if(i.value!==void 0){if(i.expression.kind==="constant"){const _=i.expression.evaluate(a,null,{},h,g);return this._calculate(_,_,_,a)}return this._calculate(i.expression.evaluate(new rr(Math.floor(a.zoom-1),a)),i.expression.evaluate(new rr(Math.floor(a.zoom),a)),i.expression.evaluate(new rr(Math.floor(a.zoom+1),a)),a)}}_calculate(i,a,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:h,to:a}}interpolate(i){return i}}class Dd{constructor(i){this.specification=i}possiblyEvaluate(i,a,h,g){return!!i.expression.evaluate(a,null,{},h,g)}interpolate(){return!1}}class v{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in i){const h=i[a];h.specification.overridable&&this.overridableProperties.push(a);const g=this.defaultPropertyValues[a]=new Ja(h,void 0),_=this.defaultTransitionablePropertyValues[a]=new xc(h);this.defaultTransitioningPropertyValues[a]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=g.possiblyEvaluate({})}}}Pt("DataDrivenProperty",tn),Pt("DataConstantProperty",Mt),Pt("CrossFadedDataDrivenProperty",wc),Pt("CrossFadedProperty",Sc),Pt("ColorRampProperty",Dd);const r="-transition";class u extends mn{constructor(i,a){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),a.layout&&(this._unevaluatedLayout=new ou(a.layout)),a.paint)){this._transitionablePaint=new bc(a.paint);for(const h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(const h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new su(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,a,h={}){a!=null&&this._validate(_m,`layers.${this.id}.layout.${i}`,i,a,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,a):this.visibility=a)}getPaintProperty(i){return i.endsWith(r)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,a,h={}){if(a!=null&&this._validate(vm,`layers.${this.id}.paint.${i}`,i,a,h))return!1;if(i.endsWith(r))return this._transitionablePaint.setTransition(i.slice(0,-11),a||void 0),!1;{const g=this._transitionablePaint._values[i],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(i,a),this._handleSpecialPaintPropertyUpdate(i);const C=this._transitionablePaint._values[i].value;return C.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(i,w,C)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,a,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,a){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,a)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Ee(i,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(i,a,h,g,_={}){return(!_||_.validate!==!1)&&Ed(this,i.call(ua,{key:a,layerType:this.type,objectKey:h,value:g,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const a=this.paint.get(i);if(a instanceof $o&&Va(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class m{constructor(i,a){this._structArray=i,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,a){return i._trim(),a&&(i.isTransferred=!0,a.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const a=Object.create(this.prototype);return a.arrayBuffer=i.arrayBuffer,a.length=i.length,a.capacity=i.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function S(o,i=1){let a=0,h=0;return{members:o.map(g=>{const _=f[g.type].BYTES_PER_ELEMENT,x=a=P(a,Math.max(i,_)),w=g.components||1;return h=Math.max(h,_),a+=_*w,{name:g.name,type:g.type,components:w,offset:x}}),size:P(a,Math.max(h,i)),alignment:i}}function P(o,i){return Math.ceil(o/i)*i}class E extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a){const h=this.length;return this.resize(h+1),this.emplace(h,i,a)}emplace(i,a,h){const g=2*i;return this.int16[g+0]=a,this.int16[g+1]=h,i}}E.prototype.bytesPerElement=4,Pt("StructArrayLayout2i4",E);class z extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h)}emplace(i,a,h,g){const _=3*i;return this.int16[_+0]=a,this.int16[_+1]=h,this.int16[_+2]=g,i}}z.prototype.bytesPerElement=6,Pt("StructArrayLayout3i6",z);class O extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,h,g)}emplace(i,a,h,g,_){const x=4*i;return this.int16[x+0]=a,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=_,i}}O.prototype.bytesPerElement=8,Pt("StructArrayLayout4i8",O);class F extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,h,g,_,x)}emplace(i,a,h,g,_,x,w){const C=6*i;return this.int16[C+0]=a,this.int16[C+1]=h,this.int16[C+2]=g,this.int16[C+3]=_,this.int16[C+4]=x,this.int16[C+5]=w,i}}F.prototype.bytesPerElement=12,Pt("StructArrayLayout2i4i12",F);class X extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,h,g,_,x)}emplace(i,a,h,g,_,x,w){const C=4*i,A=8*i;return this.int16[C+0]=a,this.int16[C+1]=h,this.uint8[A+4]=g,this.uint8[A+5]=_,this.uint8[A+6]=x,this.uint8[A+7]=w,i}}X.prototype.bytesPerElement=8,Pt("StructArrayLayout2i4ub8",X);class te extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a){const h=this.length;return this.resize(h+1),this.emplace(h,i,a)}emplace(i,a,h){const g=2*i;return this.float32[g+0]=a,this.float32[g+1]=h,i}}te.prototype.bytesPerElement=8,Pt("StructArrayLayout2f8",te);class oe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_,x,w,C,A,R){const L=this.length;return this.resize(L+1),this.emplace(L,i,a,h,g,_,x,w,C,A,R)}emplace(i,a,h,g,_,x,w,C,A,R,L){const N=10*i;return this.uint16[N+0]=a,this.uint16[N+1]=h,this.uint16[N+2]=g,this.uint16[N+3]=_,this.uint16[N+4]=x,this.uint16[N+5]=w,this.uint16[N+6]=C,this.uint16[N+7]=A,this.uint16[N+8]=R,this.uint16[N+9]=L,i}}oe.prototype.bytesPerElement=20,Pt("StructArrayLayout10ui20",oe);class ce extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_,x,w,C,A,R,L,N){const Z=this.length;return this.resize(Z+1),this.emplace(Z,i,a,h,g,_,x,w,C,A,R,L,N)}emplace(i,a,h,g,_,x,w,C,A,R,L,N,Z){const Y=12*i;return this.int16[Y+0]=a,this.int16[Y+1]=h,this.int16[Y+2]=g,this.int16[Y+3]=_,this.uint16[Y+4]=x,this.uint16[Y+5]=w,this.uint16[Y+6]=C,this.uint16[Y+7]=A,this.int16[Y+8]=R,this.int16[Y+9]=L,this.int16[Y+10]=N,this.int16[Y+11]=Z,i}}ce.prototype.bytesPerElement=24,Pt("StructArrayLayout4i4ui4i24",ce);class pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h)}emplace(i,a,h,g){const _=3*i;return this.float32[_+0]=a,this.float32[_+1]=h,this.float32[_+2]=g,i}}pe.prototype.bytesPerElement=12,Pt("StructArrayLayout3f12",pe);class fe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint32[1*i+0]=a,i}}fe.prototype.bytesPerElement=4,Pt("StructArrayLayout1ul4",fe);class ve extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_,x,w,C,A){const R=this.length;return this.resize(R+1),this.emplace(R,i,a,h,g,_,x,w,C,A)}emplace(i,a,h,g,_,x,w,C,A,R){const L=10*i,N=5*i;return this.int16[L+0]=a,this.int16[L+1]=h,this.int16[L+2]=g,this.int16[L+3]=_,this.int16[L+4]=x,this.int16[L+5]=w,this.uint32[N+3]=C,this.uint16[L+8]=A,this.uint16[L+9]=R,i}}ve.prototype.bytesPerElement=20,Pt("StructArrayLayout6i1ul2ui20",ve);class le extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,h,g,_,x)}emplace(i,a,h,g,_,x,w){const C=6*i;return this.int16[C+0]=a,this.int16[C+1]=h,this.int16[C+2]=g,this.int16[C+3]=_,this.int16[C+4]=x,this.int16[C+5]=w,i}}le.prototype.bytesPerElement=12,Pt("StructArrayLayout2i2i2i12",le);class Se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,i,a,h,g,_)}emplace(i,a,h,g,_,x){const w=4*i,C=8*i;return this.float32[w+0]=a,this.float32[w+1]=h,this.float32[w+2]=g,this.int16[C+6]=_,this.int16[C+7]=x,i}}Se.prototype.bytesPerElement=16,Pt("StructArrayLayout2f1f2i16",Se);class Pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,h,g,_,x)}emplace(i,a,h,g,_,x,w){const C=16*i,A=4*i,R=8*i;return this.uint8[C+0]=a,this.uint8[C+1]=h,this.float32[A+1]=g,this.float32[A+2]=_,this.int16[R+6]=x,this.int16[R+7]=w,i}}Pe.prototype.bytesPerElement=16,Pt("StructArrayLayout2ub2f2i16",Pe);class De extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h)}emplace(i,a,h,g){const _=3*i;return this.uint16[_+0]=a,this.uint16[_+1]=h,this.uint16[_+2]=g,i}}De.prototype.bytesPerElement=6,Pt("StructArrayLayout3ui6",De);class Ke extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_,x,w,C,A,R,L,N,Z,Y,ee,ue,de){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,i,a,h,g,_,x,w,C,A,R,L,N,Z,Y,ee,ue,de)}emplace(i,a,h,g,_,x,w,C,A,R,L,N,Z,Y,ee,ue,de,Ae){const xe=24*i,ke=12*i,je=48*i;return this.int16[xe+0]=a,this.int16[xe+1]=h,this.uint16[xe+2]=g,this.uint16[xe+3]=_,this.uint32[ke+2]=x,this.uint32[ke+3]=w,this.uint32[ke+4]=C,this.uint16[xe+10]=A,this.uint16[xe+11]=R,this.uint16[xe+12]=L,this.float32[ke+7]=N,this.float32[ke+8]=Z,this.uint8[je+36]=Y,this.uint8[je+37]=ee,this.uint8[je+38]=ue,this.uint32[ke+10]=de,this.int16[xe+22]=Ae,i}}Ke.prototype.bytesPerElement=48,Pt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ke);class et extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,_,x,w,C,A,R,L,N,Z,Y,ee,ue,de,Ae,xe,ke,je,Je,wt,en,_t,dt,Bt,Et){const Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,i,a,h,g,_,x,w,C,A,R,L,N,Z,Y,ee,ue,de,Ae,xe,ke,je,Je,wt,en,_t,dt,Bt,Et)}emplace(i,a,h,g,_,x,w,C,A,R,L,N,Z,Y,ee,ue,de,Ae,xe,ke,je,Je,wt,en,_t,dt,Bt,Et,Tt){const We=32*i,Nt=16*i;return this.int16[We+0]=a,this.int16[We+1]=h,this.int16[We+2]=g,this.int16[We+3]=_,this.int16[We+4]=x,this.int16[We+5]=w,this.int16[We+6]=C,this.int16[We+7]=A,this.uint16[We+8]=R,this.uint16[We+9]=L,this.uint16[We+10]=N,this.uint16[We+11]=Z,this.uint16[We+12]=Y,this.uint16[We+13]=ee,this.uint16[We+14]=ue,this.uint16[We+15]=de,this.uint16[We+16]=Ae,this.uint16[We+17]=xe,this.uint16[We+18]=ke,this.uint16[We+19]=je,this.uint16[We+20]=Je,this.uint16[We+21]=wt,this.uint16[We+22]=en,this.uint32[Nt+12]=_t,this.float32[Nt+13]=dt,this.float32[Nt+14]=Bt,this.uint16[We+30]=Et,this.uint16[We+31]=Tt,i}}et.prototype.bytesPerElement=64,Pt("StructArrayLayout8i15ui1ul2f2ui64",et);class pt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.float32[1*i+0]=a,i}}pt.prototype.bytesPerElement=4,Pt("StructArrayLayout1f4",pt);class St extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h)}emplace(i,a,h,g){const _=3*i;return this.uint16[6*i+0]=a,this.float32[_+1]=h,this.float32[_+2]=g,i}}St.prototype.bytesPerElement=12,Pt("StructArrayLayout1ui2f12",St);class lt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h)}emplace(i,a,h,g){const _=4*i;return this.uint32[2*i+0]=a,this.uint16[_+2]=h,this.uint16[_+3]=g,i}}lt.prototype.bytesPerElement=8,Pt("StructArrayLayout1ul2ui8",lt);class at extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a){const h=this.length;return this.resize(h+1),this.emplace(h,i,a)}emplace(i,a,h){const g=2*i;return this.uint16[g+0]=a,this.uint16[g+1]=h,i}}at.prototype.bytesPerElement=4,Pt("StructArrayLayout2ui4",at);class Rt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint16[1*i+0]=a,i}}Rt.prototype.bytesPerElement=2,Pt("StructArrayLayout1ui2",Rt);class ln extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,h,g)}emplace(i,a,h,g,_){const x=4*i;return this.float32[x+0]=a,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=_,i}}ln.prototype.bytesPerElement=16,Pt("StructArrayLayout4f16",ln);class ct extends m{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new I(this.anchorPointX,this.anchorPointY)}}ct.prototype.size=20;class xt extends ve{get(i){return new ct(this,i)}}Pt("CollisionBoxArray",xt);class sn extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}sn.prototype.size=48;class ir extends Ke{get(i){return new sn(this,i)}}Pt("PlacedSymbolArray",ir);class _n extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}_n.prototype.size=64;class Tn extends et{get(i){return new _n(this,i)}}Pt("SymbolInstanceArray",Tn);class or extends pt{getoffsetX(i){return this.float32[1*i+0]}}Pt("GlyphOffsetArray",or);class ei extends z{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Pt("SymbolLineVertexArray",ei);class vo extends m{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}vo.prototype.size=12;class sr extends St{get(i){return new vo(this,i)}}Pt("TextAnchorOffsetArray",sr);class Pi extends m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Pi.prototype.size=8;class fi extends lt{get(i){return new Pi(this,i)}}Pt("FeatureIndexArray",fi);class ti extends E{}class mi extends E{}class No extends E{}class Qa extends F{}class Cc extends X{}class el extends te{}class Qi extends oe{}class Tc extends ce{}class Od extends pe{}class eo extends fe{}class to extends le{}class Ps extends Pe{}class _o extends De{}class Zr extends at{}const ni=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:ji}=ni;class En{constructor(i=[]){this.segments=i}prepareSegment(i,a,h,g){let _=this.segments[this.segments.length-1];return i>En.MAX_VERTEX_ARRAY_LENGTH&&be(`Max vertices per segment is ${En.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!_||_.vertexLength+i>En.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const i of this.segments)for(const a in i.vaos)i.vaos[a].destroy()}static simpleSegment(i,a,h,g){return new En([{vertexOffset:i,primitiveOffset:a,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function ca(o,i){return 256*(o=ne(Math.floor(o),0,255))+ne(Math.floor(i),0,255)}En.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt("SegmentVector",En);const tl=S([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var nl={exports:{}},Cm={exports:{}};Cm.exports=function(o,i){var a,h,g,_,x,w,C,A;for(h=o.length-(a=3&o.length),g=i,x=3432918353,w=461845907,A=0;A<h;)C=255&o.charCodeAt(A)|(255&o.charCodeAt(++A))<<8|(255&o.charCodeAt(++A))<<16|(255&o.charCodeAt(++A))<<24,++A,g=27492+(65535&(_=5*(65535&(g=(g^=C=(65535&(C=(C=(65535&C)*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*w+(((C>>>16)*w&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(C=0,a){case 3:C^=(255&o.charCodeAt(A+2))<<16;case 2:C^=(255&o.charCodeAt(A+1))<<8;case 1:g^=C=(65535&(C=(C=(65535&(C^=255&o.charCodeAt(A)))*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*w+(((C>>>16)*w&65535)<<16)&4294967295}return g^=o.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var P_=Cm.exports,Tm={exports:{}};Tm.exports=function(o,i){for(var a,h=o.length,g=i^h,_=0;h>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(a>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:g^=(255&o.charCodeAt(_+2))<<16;case 2:g^=(255&o.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&o.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var ks=P_,Pm=Tm.exports;nl.exports=ks,nl.exports.murmur3=ks,nl.exports.murmur2=Pm;var Pc=b(nl.exports);class au{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,a,h,g){this.ids.push(kc(i)),this.positions.push(a,h,g)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=kc(i);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=a?g=x:h=x+1}const _=[];for(;this.ids[h]===a;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(i,a){const h=new Float64Array(i.ids),g=new Uint32Array(i.positions);return Ec(h,g,0,h.length-1),a&&a.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(i){const a=new au;return a.ids=i.ids,a.positions=i.positions,a.indexed=!0,a}}function kc(o){const i=+o;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Pc(String(o))}function Ec(o,i,a,h){for(;a<h;){const g=o[a+h>>1];let _=a-1,x=h+1;for(;;){do _++;while(o[_]<g);do x--;while(o[x]>g);if(_>=x)break;rl(o,_,x),rl(i,3*_,3*x),rl(i,3*_+1,3*x+1),rl(i,3*_+2,3*x+2)}x-a<h-x?(Ec(o,i,a,x),a=x+1):(Ec(o,i,x+1,h),h=x)}}function rl(o,i,a){const h=o[i];o[i]=o[a],o[a]=h}Pt("FeaturePositionMap",au);class lu{constructor(i,a){this.gl=i.gl,this.location=a}}class km extends lu{constructor(i,a){super(i,a),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class cS extends lu{constructor(i,a){super(i,a),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class hS extends lu{constructor(i,a){super(i,a),this.current=on.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const XR=new Float32Array(16);function k_(o){return[ca(255*o.r,255*o.g),ca(255*o.b,255*o.a)]}class Fd{constructor(i,a,h){this.value=i,this.uniformNames=a.map(g=>`u_${g}`),this.type=h}setUniform(i,a,h){i.set(h.constantOr(this.value))}getBinding(i,a,h){return this.type==="color"?new hS(i,a):new km(i,a)}}class Ic{constructor(i,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=i.tlbr}setUniform(i,a,h,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&i.set(_)}getBinding(i,a,h){return h.substr(0,9)==="u_pattern"?new cS(i,a):new km(i,a)}}class ha{constructor(i,a,h,g){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(i,a,h,g,_){const x=this.paintVertexArray.length,w=this.expression.evaluate(new rr(0),a,{},g,[],_);this.paintVertexArray.resize(i),this._setPaintValue(x,i,w)}updatePaintArray(i,a,h,g){const _=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(i,a,_)}_setPaintValue(i,a,h){if(this.type==="color"){const g=k_(h);for(let _=i;_<a;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=i;g<a;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class cs{constructor(i,a,h,g,_,x){this.expression=i,this.uniformNames=a.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,a,h,g,_){const x=this.expression.evaluate(new rr(this.zoom),a,{},g,[],_),w=this.expression.evaluate(new rr(this.zoom+1),a,{},g,[],_),C=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(C,i,x,w)}updatePaintArray(i,a,h,g){const _=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(i,a,_,x)}_setPaintValue(i,a,h,g){if(this.type==="color"){const _=k_(h),x=k_(g);for(let w=i;w<a;w++)this.paintVertexArray.emplace(w,_[0],_[1],x[0],x[1])}else{for(let _=i;_<a;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,a){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,g=ne(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);i.set(g)}getBinding(i,a,h){return new km(i,a)}}class il{constructor(i,a,h,g,_,x){this.expression=i,this.type=a,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(i,a,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(g,i,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(i,a,h,g,_){this._setPaintValues(i,a,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(i,a,h,g){if(!g||!h)return;const{min:_,mid:x,max:w}=h,C=g[_],A=g[x],R=g[w];if(C&&A&&R)for(let L=i;L<a;L++)this.zoomInPaintVertexArray.emplace(L,A.tl[0],A.tl[1],A.br[0],A.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],A.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(L,A.tl[0],A.tl[1],A.br[0],A.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],A.pixelRatio,R.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,tl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,tl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class dS{constructor(i,a,h){this.binders={},this._buffers=[];const g=[];for(const _ in i.paint._values){if(!h(_))continue;const x=i.paint.get(_);if(!(x instanceof $o&&Va(x.property.specification)))continue;const w=YR(_,i.type),C=x.value,A=x.property.specification.type,R=x.property.useIntegerZoom,L=x.property.specification["property-type"],N=L==="cross-faded"||L==="cross-faded-data-driven";if(C.kind==="constant")this.binders[_]=N?new Ic(C.value,w):new Fd(C.value,w,A),g.push(`/u_${_}`);else if(C.kind==="source"||N){const Z=pS(_,A,"source");this.binders[_]=N?new il(C,A,R,a,Z,i.id):new ha(C,w,A,Z),g.push(`/a_${_}`)}else{const Z=pS(_,A,"composite");this.binders[_]=new cs(C,w,A,R,a,Z),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(i){const a=this.binders[i];return a instanceof ha||a instanceof cs?a.maxValue:0}populatePaintArrays(i,a,h,g,_){for(const x in this.binders){const w=this.binders[x];(w instanceof ha||w instanceof cs||w instanceof il)&&w.populatePaintArray(i,a,h,g,_)}}setConstantPatternPositions(i,a){for(const h in this.binders){const g=this.binders[h];g instanceof Ic&&g.setConstantPatternPositions(i,a)}}updatePaintArrays(i,a,h,g,_){let x=!1;for(const w in i){const C=a.getPositions(w);for(const A of C){const R=h.feature(A.index);for(const L in this.binders){const N=this.binders[L];if((N instanceof ha||N instanceof cs||N instanceof il)&&N.expression.isStateDependent===!0){const Z=g.paint.get(L);N.expression=Z.value,N.updatePaintArray(A.start,A.end,R,i[w],_),x=!0}}}}return x}defines(){const i=[];for(const a in this.binders){const h=this.binders[a];(h instanceof Fd||h instanceof Ic)&&i.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return i}getBinderAttributes(){const i=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof ha||h instanceof cs)for(let g=0;g<h.paintVertexAttributes.length;g++)i.push(h.paintVertexAttributes[g].name);else if(h instanceof il)for(let g=0;g<tl.members.length;g++)i.push(tl.members[g].name)}return i}getBinderUniforms(){const i=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof Fd||h instanceof Ic||h instanceof cs)for(const g of h.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,a){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof Fd||_ instanceof Ic||_ instanceof cs){for(const x of _.uniformNames)if(a[x]){const w=_.getBinding(i,a[x],x);h.push({name:x,property:g,binding:w})}}}return h}setUniforms(i,a,h,g){for(const{name:_,property:x,binding:w}of a)this.binders[x].setUniform(w,g,h.get(x),_)}updatePaintBuffers(i){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(i&&h instanceof il){const g=i.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof ha||h instanceof cs)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(i){for(const a in this.binders){const h=this.binders[a];(h instanceof ha||h instanceof cs||h instanceof il)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const a=this.binders[i];(a instanceof ha||a instanceof cs||a instanceof il)&&a.destroy()}}}class uu{constructor(i,a,h=()=>!0){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new dS(g,a,h);this.needsUpload=!1,this._featureMap=new au,this._bufferOffset=0}populatePaintArrays(i,a,h,g,_,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(i,a,g,_,x);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,a,h,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(i,this._featureMap,a,_,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function YR(o,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${i}-`,"").replace(/-/g,"_")]}function pS(o,i,a){const h={color:{source:te,composite:ln},number:{source:pt,composite:te}},g=function(_){return{"line-pattern":{source:Qi,composite:Qi},"fill-pattern":{source:Qi,composite:Qi},"fill-extrusion-pattern":{source:Qi,composite:Qi}}[_]}(o);return g&&g[a]||h[i][a]}Pt("ConstantBinder",Fd),Pt("CrossFadedConstantBinder",Ic),Pt("SourceExpressionBinder",ha),Pt("CrossFadedCompositeBinder",il),Pt("CompositeExpressionBinder",cs),Pt("ProgramConfiguration",dS,{omit:["_buffers"]}),Pt("ProgramConfigurationSet",uu);const Ar=8192,E_=Math.pow(2,14)-1,fS=-E_-1;function cu(o){const i=Ar/o.extent,a=o.loadGeometry();for(let h=0;h<a.length;h++){const g=a[h];for(let _=0;_<g.length;_++){const x=g[_],w=Math.round(x.x*i),C=Math.round(x.y*i);x.x=ne(w,fS,E_),x.y=ne(C,fS,E_),(w<x.x||w>x.x+1||C<x.y||C>x.y+1)&&be("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function hu(o,i){return{type:o.type,id:o.id,properties:o.properties,geometry:i?cu(o):[]}}function Em(o,i,a,h,g){o.emplaceBack(2*i+(h+1)/2,2*a+(g+1)/2)}class I_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new mi,this.indexArray=new _o,this.segments=new En,this.programConfigurations=new uu(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,h){const g=this.layers[0],_=[];let x=null,w=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:C,id:A,index:R,sourceLayerIndex:L}of i){const N=this.layers[0]._featureFilter.needGeometry,Z=hu(C,N);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),Z,h))continue;const Y=w?x.evaluate(Z,{},h):void 0,ee={id:A,properties:C.properties,type:C.type,sourceLayerIndex:L,index:R,geometry:N?Z.geometry:cu(C),patterns:{},sortKey:Y};_.push(ee)}w&&_.sort((C,A)=>C.sortKey-A.sortKey);for(const C of _){const{geometry:A,index:R,sourceLayerIndex:L}=C,N=i[R].feature;this.addFeature(C,A,R,h),a.featureIndex.insert(N,A,R,L,this.index)}}update(i,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ji),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,a,h,g){for(const _ of a)for(const x of _){const w=x.x,C=x.y;if(w<0||w>=Ar||C<0||C>=Ar)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),R=A.vertexLength;Em(this.layoutVertexArray,w,C,-1,-1),Em(this.layoutVertexArray,w,C,1,-1),Em(this.layoutVertexArray,w,C,1,1),Em(this.layoutVertexArray,w,C,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},g)}}function mS(o,i){for(let a=0;a<o.length;a++)if(Ac(i,o[a]))return!0;for(let a=0;a<i.length;a++)if(Ac(o,i[a]))return!0;return!!A_(o,i)}function JR(o,i,a){return!!Ac(o,i)||!!M_(i,o,a)}function gS(o,i){if(o.length===1)return vS(i,o[0]);for(let a=0;a<i.length;a++){const h=i[a];for(let g=0;g<h.length;g++)if(Ac(o,h[g]))return!0}for(let a=0;a<o.length;a++)if(vS(i,o[a]))return!0;for(let a=0;a<i.length;a++)if(A_(o,i[a]))return!0;return!1}function QR(o,i,a){if(o.length>1){if(A_(o,i))return!0;for(let h=0;h<i.length;h++)if(M_(i[h],o,a))return!0}for(let h=0;h<o.length;h++)if(M_(o[h],i,a))return!0;return!1}function A_(o,i){if(o.length===0||i.length===0)return!1;for(let a=0;a<o.length-1;a++){const h=o[a],g=o[a+1];for(let _=0;_<i.length-1;_++)if(ez(h,g,i[_],i[_+1]))return!0}return!1}function ez(o,i,a,h){return _e(o,a,h)!==_e(i,a,h)&&_e(o,i,a)!==_e(o,i,h)}function M_(o,i,a){const h=a*a;if(i.length===1)return o.distSqr(i[0])<h;for(let g=1;g<i.length;g++)if(yS(o,i[g-1],i[g])<h)return!0;return!1}function yS(o,i,a){const h=i.distSqr(a);if(h===0)return o.distSqr(i);const g=((o.x-i.x)*(a.x-i.x)+(o.y-i.y)*(a.y-i.y))/h;return o.distSqr(g<0?i:g>1?a:a.sub(i)._mult(g)._add(i))}function vS(o,i){let a,h,g,_=!1;for(let x=0;x<o.length;x++){a=o[x];for(let w=0,C=a.length-1;w<a.length;C=w++)h=a[w],g=a[C],h.y>i.y!=g.y>i.y&&i.x<(g.x-h.x)*(i.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function Ac(o,i){let a=!1;for(let h=0,g=o.length-1;h<o.length;g=h++){const _=o[h],x=o[g];_.y>i.y!=x.y>i.y&&i.x<(x.x-_.x)*(i.y-_.y)/(x.y-_.y)+_.x&&(a=!a)}return a}function tz(o,i,a){const h=a[0],g=a[2];if(o.x<h.x&&i.x<h.x||o.x>g.x&&i.x>g.x||o.y<h.y&&i.y<h.y||o.y>g.y&&i.y>g.y)return!1;const _=_e(o,i,a[0]);return _!==_e(o,i,a[1])||_!==_e(o,i,a[2])||_!==_e(o,i,a[3])}function Bd(o,i,a){const h=i.paint.get(o).value;return h.kind==="constant"?h.value:a.programConfigurations.get(i.id).getMaxValue(o)}function Im(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Am(o,i,a,h,g){if(!i[0]&&!i[1])return o;const _=I.convert(i)._mult(g);a==="viewport"&&_._rotate(-h);const x=[];for(let w=0;w<o.length;w++)x.push(o[w].sub(_));return x}let _S,xS;Pt("CircleBucket",I_,{omit:["layers"]});var nz={get paint(){return xS=xS||new v({"circle-radius":new tn(Ce.paint_circle["circle-radius"]),"circle-color":new tn(Ce.paint_circle["circle-color"]),"circle-blur":new tn(Ce.paint_circle["circle-blur"]),"circle-opacity":new tn(Ce.paint_circle["circle-opacity"]),"circle-translate":new Mt(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new Mt(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mt(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mt(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new tn(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new tn(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new tn(Ce.paint_circle["circle-stroke-opacity"])})},get layout(){return _S=_S||new v({"circle-sort-key":new tn(Ce.layout_circle["circle-sort-key"])})}},ki=1e-6,Mc=typeof Float32Array<"u"?Float32Array:Array;function R_(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function bS(o,i,a){var h=i[0],g=i[1],_=i[2],x=i[3],w=i[4],C=i[5],A=i[6],R=i[7],L=i[8],N=i[9],Z=i[10],Y=i[11],ee=i[12],ue=i[13],de=i[14],Ae=i[15],xe=a[0],ke=a[1],je=a[2],Je=a[3];return o[0]=xe*h+ke*w+je*L+Je*ee,o[1]=xe*g+ke*C+je*N+Je*ue,o[2]=xe*_+ke*A+je*Z+Je*de,o[3]=xe*x+ke*R+je*Y+Je*Ae,o[4]=(xe=a[4])*h+(ke=a[5])*w+(je=a[6])*L+(Je=a[7])*ee,o[5]=xe*g+ke*C+je*N+Je*ue,o[6]=xe*_+ke*A+je*Z+Je*de,o[7]=xe*x+ke*R+je*Y+Je*Ae,o[8]=(xe=a[8])*h+(ke=a[9])*w+(je=a[10])*L+(Je=a[11])*ee,o[9]=xe*g+ke*C+je*N+Je*ue,o[10]=xe*_+ke*A+je*Z+Je*de,o[11]=xe*x+ke*R+je*Y+Je*Ae,o[12]=(xe=a[12])*h+(ke=a[13])*w+(je=a[14])*L+(Je=a[15])*ee,o[13]=xe*g+ke*C+je*N+Je*ue,o[14]=xe*_+ke*A+je*Z+Je*de,o[15]=xe*x+ke*R+je*Y+Je*Ae,o}Math.hypot||(Math.hypot=function(){for(var o=0,i=arguments.length;i--;)o+=arguments[i]*arguments[i];return Math.sqrt(o)});var $d,rz=bS;function Mm(o,i,a){var h=i[0],g=i[1],_=i[2],x=i[3];return o[0]=a[0]*h+a[4]*g+a[8]*_+a[12]*x,o[1]=a[1]*h+a[5]*g+a[9]*_+a[13]*x,o[2]=a[2]*h+a[6]*g+a[10]*_+a[14]*x,o[3]=a[3]*h+a[7]*g+a[11]*_+a[15]*x,o}$d=new Mc(4),Mc!=Float32Array&&($d[0]=0,$d[1]=0,$d[2]=0,$d[3]=0);class iz extends u{constructor(i){super(i,nz)}createBucket(i){return new I_(i)}queryRadius(i){const a=i;return Bd("circle-radius",this,a)+Bd("circle-stroke-width",this,a)+Im(this.paint.get("circle-translate"))}queryIntersectsFeature(i,a,h,g,_,x,w,C){const A=Am(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),R=this.paint.get("circle-radius").evaluate(a,h)+this.paint.get("circle-stroke-width").evaluate(a,h),L=this.paint.get("circle-pitch-alignment")==="map",N=L?A:function(Y,ee){return Y.map(ue=>wS(ue,ee))}(A,C),Z=L?R*w:R;for(const Y of g)for(const ee of Y){const ue=L?ee:wS(ee,C);let de=Z;const Ae=Mm([],[ee.x,ee.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?de*=Ae[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(de*=x.cameraToCenterDistance/Ae[3]),JR(N,ue,de))return!0}return!1}}function wS(o,i){const a=Mm([],[o.x,o.y,0,1],i);return new I(a[0]/a[3],a[1]/a[3])}class SS extends I_{}let CS;Pt("HeatmapBucket",SS,{omit:["layers"]});var oz={get paint(){return CS=CS||new v({"heatmap-radius":new tn(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new tn(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mt(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dd(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mt(Ce.paint_heatmap["heatmap-opacity"])})}};function z_(o,{width:i,height:a},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*a*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${i*a*h}`)}else g=new Uint8Array(i*a*h);return o.width=i,o.height=a,o.data=g,o}function TS(o,{width:i,height:a},h){if(i===o.width&&a===o.height)return;const g=z_({},{width:i,height:a},h);L_(o,g,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,i),height:Math.min(o.height,a)},h),o.width=i,o.height=a,o.data=g.data}function L_(o,i,a,h,g,_){if(g.width===0||g.height===0)return i;if(g.width>o.width||g.height>o.height||a.x>o.width-g.width||a.y>o.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||h.x>i.width-g.width||h.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,w=i.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<g.height;C++){const A=((a.y+C)*o.width+a.x)*_,R=((h.y+C)*i.width+h.x)*_;for(let L=0;L<g.width*_;L++)w[R+L]=x[A+L]}return i}class Nd{constructor(i,a){z_(this,i,1,a)}resize(i){TS(this,i,1)}clone(){return new Nd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,h,g,_){L_(i,a,h,g,_,1)}}class xo{constructor(i,a){z_(this,i,4,a)}resize(i){TS(this,i,4)}replace(i,a){a?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new xo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,h,g,_){L_(i,a,h,g,_,4)}}function PS(o){const i={},a=o.resolution||256,h=o.clips?o.clips.length:1,g=o.image||new xo({width:a,height:h});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const _=(x,w,C)=>{i[o.evaluationKey]=C;const A=o.expression.evaluate(i);g.data[x+w+0]=Math.floor(255*A.r/A.a),g.data[x+w+1]=Math.floor(255*A.g/A.a),g.data[x+w+2]=Math.floor(255*A.b/A.a),g.data[x+w+3]=Math.floor(255*A.a)};if(o.clips)for(let x=0,w=0;x<h;++x,w+=4*a)for(let C=0,A=0;C<a;C++,A+=4){const R=C/(a-1),{start:L,end:N}=o.clips[x];_(w,A,L*(1-R)+N*R)}else for(let x=0,w=0;x<a;x++,w+=4)_(0,w,x/(a-1));return g}Pt("AlphaImage",Nd),Pt("RGBAImage",xo);const D_="big-fb";class sz extends u{createBucket(i){return new SS(i)}constructor(i){super(i,oz),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=PS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(D_)&&this.heatmapFbos.delete(D_)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let kS;var az={get paint(){return kS=kS||new v({"hillshade-illumination-direction":new Mt(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mt(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mt(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mt(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mt(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mt(Ce.paint_hillshade["hillshade-accent-color"])})}};class lz extends u{constructor(i){super(i,az)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const uz=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:cz}=uz;function ES(o,i,a=2){const h=i&&i.length,g=h?i[0]*a:o.length;let _=IS(o,0,g,a,!0);const x=[];if(!_||_.next===_.prev)return x;let w,C,A;if(h&&(_=function(R,L,N,Z){const Y=[];for(let ee=0,ue=L.length;ee<ue;ee++){const de=IS(R,L[ee]*Z,ee<ue-1?L[ee+1]*Z:R.length,Z,!1);de===de.next&&(de.steiner=!0),Y.push(vz(de))}Y.sort(mz);for(let ee=0;ee<Y.length;ee++)N=gz(Y[ee],N);return N}(o,i,_,a)),o.length>80*a){w=1/0,C=1/0;let R=-1/0,L=-1/0;for(let N=a;N<g;N+=a){const Z=o[N],Y=o[N+1];Z<w&&(w=Z),Y<C&&(C=Y),Z>R&&(R=Z),Y>L&&(L=Y)}A=Math.max(R-w,L-C),A=A!==0?32767/A:0}return Vd(_,x,a,w,C,A,0),x}function IS(o,i,a,h,g){let _;if(g===function(x,w,C,A){let R=0;for(let L=w,N=C-A;L<C;L+=A)R+=(x[N]-x[L])*(x[L+1]+x[N+1]),N=L;return R}(o,i,a,h)>0)for(let x=i;x<a;x+=h)_=RS(x/h|0,o[x],o[x+1],_);else for(let x=a-h;x>=i;x-=h)_=RS(x/h|0,o[x],o[x+1],_);return _&&Rm(_,_.next)&&(Ud(_),_=_.next),_}function du(o,i){if(!o)return o;i||(i=o);let a,h=o;do if(a=!1,h.steiner||!Rm(h,h.next)&&Cr(h.prev,h,h.next)!==0)h=h.next;else{if(Ud(h),h=i=h.prev,h===h.next)break;a=!0}while(a||h!==i);return i}function Vd(o,i,a,h,g,_,x){if(!o)return;!x&&_&&function(C,A,R,L){let N=C;do N.z===0&&(N.z=O_(N.x,N.y,A,R,L)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==C);N.prevZ.nextZ=null,N.prevZ=null,function(Z){let Y,ee=1;do{let ue,de=Z;Z=null;let Ae=null;for(Y=0;de;){Y++;let xe=de,ke=0;for(let Je=0;Je<ee&&(ke++,xe=xe.nextZ,xe);Je++);let je=ee;for(;ke>0||je>0&&xe;)ke!==0&&(je===0||!xe||de.z<=xe.z)?(ue=de,de=de.nextZ,ke--):(ue=xe,xe=xe.nextZ,je--),Ae?Ae.nextZ=ue:Z=ue,ue.prevZ=Ae,Ae=ue;de=xe}Ae.nextZ=null,ee*=2}while(Y>1)}(N)}(o,h,g,_);let w=o;for(;o.prev!==o.next;){const C=o.prev,A=o.next;if(_?dz(o,h,g,_):hz(o))i.push(C.i,o.i,A.i),Ud(o),o=A.next,w=A.next;else if((o=A)===w){x?x===1?Vd(o=pz(du(o),i),i,a,h,g,_,2):x===2&&fz(o,i,a,h,g,_):Vd(du(o),i,a,h,g,_,1);break}}}function hz(o){const i=o.prev,a=o,h=o.next;if(Cr(i,a,h)>=0)return!1;const g=i.x,_=a.x,x=h.x,w=i.y,C=a.y,A=h.y,R=g<_?g<x?g:x:_<x?_:x,L=w<C?w<A?w:A:C<A?C:A,N=g>_?g>x?g:x:_>x?_:x,Z=w>C?w>A?w:A:C>A?C:A;let Y=h.next;for(;Y!==i;){if(Y.x>=R&&Y.x<=N&&Y.y>=L&&Y.y<=Z&&Rc(g,w,_,C,x,A,Y.x,Y.y)&&Cr(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function dz(o,i,a,h){const g=o.prev,_=o,x=o.next;if(Cr(g,_,x)>=0)return!1;const w=g.x,C=_.x,A=x.x,R=g.y,L=_.y,N=x.y,Z=w<C?w<A?w:A:C<A?C:A,Y=R<L?R<N?R:N:L<N?L:N,ee=w>C?w>A?w:A:C>A?C:A,ue=R>L?R>N?R:N:L>N?L:N,de=O_(Z,Y,i,a,h),Ae=O_(ee,ue,i,a,h);let xe=o.prevZ,ke=o.nextZ;for(;xe&&xe.z>=de&&ke&&ke.z<=Ae;){if(xe.x>=Z&&xe.x<=ee&&xe.y>=Y&&xe.y<=ue&&xe!==g&&xe!==x&&Rc(w,R,C,L,A,N,xe.x,xe.y)&&Cr(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,ke.x>=Z&&ke.x<=ee&&ke.y>=Y&&ke.y<=ue&&ke!==g&&ke!==x&&Rc(w,R,C,L,A,N,ke.x,ke.y)&&Cr(ke.prev,ke,ke.next)>=0))return!1;ke=ke.nextZ}for(;xe&&xe.z>=de;){if(xe.x>=Z&&xe.x<=ee&&xe.y>=Y&&xe.y<=ue&&xe!==g&&xe!==x&&Rc(w,R,C,L,A,N,xe.x,xe.y)&&Cr(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;ke&&ke.z<=Ae;){if(ke.x>=Z&&ke.x<=ee&&ke.y>=Y&&ke.y<=ue&&ke!==g&&ke!==x&&Rc(w,R,C,L,A,N,ke.x,ke.y)&&Cr(ke.prev,ke,ke.next)>=0)return!1;ke=ke.nextZ}return!0}function pz(o,i){let a=o;do{const h=a.prev,g=a.next.next;!Rm(h,g)&&AS(h,a,a.next,g)&&jd(h,g)&&jd(g,h)&&(i.push(h.i,a.i,g.i),Ud(a),Ud(a.next),a=o=g),a=a.next}while(a!==o);return du(a)}function fz(o,i,a,h,g,_){let x=o;do{let w=x.next.next;for(;w!==x.prev;){if(x.i!==w.i&&_z(x,w)){let C=MS(x,w);return x=du(x,x.next),C=du(C,C.next),Vd(x,i,a,h,g,_,0),void Vd(C,i,a,h,g,_,0)}w=w.next}x=x.next}while(x!==o)}function mz(o,i){return o.x-i.x}function gz(o,i){const a=function(g,_){let x=_;const w=g.x,C=g.y;let A,R=-1/0;do{if(C<=x.y&&C>=x.next.y&&x.next.y!==x.y){const ee=x.x+(C-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(ee<=w&&ee>R&&(R=ee,A=x.x<x.next.x?x:x.next,ee===w))return A}x=x.next}while(x!==_);if(!A)return null;const L=A,N=A.x,Z=A.y;let Y=1/0;x=A;do{if(w>=x.x&&x.x>=N&&w!==x.x&&Rc(C<Z?w:R,C,N,Z,C<Z?R:w,C,x.x,x.y)){const ee=Math.abs(C-x.y)/(w-x.x);jd(x,g)&&(ee<Y||ee===Y&&(x.x>A.x||x.x===A.x&&yz(A,x)))&&(A=x,Y=ee)}x=x.next}while(x!==L);return A}(o,i);if(!a)return i;const h=MS(a,o);return du(h,h.next),du(a,a.next)}function yz(o,i){return Cr(o.prev,o,i.prev)<0&&Cr(i.next,o,o.next)<0}function O_(o,i,a,h,g){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function vz(o){let i=o,a=o;do(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next;while(i!==o);return a}function Rc(o,i,a,h,g,_,x,w){return(g-x)*(i-w)>=(o-x)*(_-w)&&(o-x)*(h-w)>=(a-x)*(i-w)&&(a-x)*(_-w)>=(g-x)*(h-w)}function _z(o,i){return o.next.i!==i.i&&o.prev.i!==i.i&&!function(a,h){let g=a;do{if(g.i!==a.i&&g.next.i!==a.i&&g.i!==h.i&&g.next.i!==h.i&&AS(g,g.next,a,h))return!0;g=g.next}while(g!==a);return!1}(o,i)&&(jd(o,i)&&jd(i,o)&&function(a,h){let g=a,_=!1;const x=(a.x+h.x)/2,w=(a.y+h.y)/2;do g.y>w!=g.next.y>w&&g.next.y!==g.y&&x<(g.next.x-g.x)*(w-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==a);return _}(o,i)&&(Cr(o.prev,o,i.prev)||Cr(o,i.prev,i))||Rm(o,i)&&Cr(o.prev,o,o.next)>0&&Cr(i.prev,i,i.next)>0)}function Cr(o,i,a){return(i.y-o.y)*(a.x-i.x)-(i.x-o.x)*(a.y-i.y)}function Rm(o,i){return o.x===i.x&&o.y===i.y}function AS(o,i,a,h){const g=Lm(Cr(o,i,a)),_=Lm(Cr(o,i,h)),x=Lm(Cr(a,h,o)),w=Lm(Cr(a,h,i));return g!==_&&x!==w||!(g!==0||!zm(o,a,i))||!(_!==0||!zm(o,h,i))||!(x!==0||!zm(a,o,h))||!(w!==0||!zm(a,i,h))}function zm(o,i,a){return i.x<=Math.max(o.x,a.x)&&i.x>=Math.min(o.x,a.x)&&i.y<=Math.max(o.y,a.y)&&i.y>=Math.min(o.y,a.y)}function Lm(o){return o>0?1:o<0?-1:0}function jd(o,i){return Cr(o.prev,o,o.next)<0?Cr(o,i,o.next)>=0&&Cr(o,o.prev,i)>=0:Cr(o,i,o.prev)<0||Cr(o,o.next,i)<0}function MS(o,i){const a=F_(o.i,o.x,o.y),h=F_(i.i,i.x,i.y),g=o.next,_=i.prev;return o.next=i,i.prev=o,a.next=g,g.prev=a,h.next=a,a.prev=h,_.next=h,h.prev=_,h}function RS(o,i,a,h){const g=F_(o,i,a);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function Ud(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function F_(o,i,a){return{i:o,x:i,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function B_(o,i,a){const h=a.patternDependencies;let g=!1;for(const _ of i){const x=_.paint.get(`${o}-pattern`);x.isConstant()||(g=!0);const w=x.constantOr(null);w&&(g=!0,h[w.to]=!0,h[w.from]=!0)}return g}function $_(o,i,a,h,g){const _=g.patternDependencies;for(const x of i){const w=x.paint.get(`${o}-pattern`).value;if(w.kind!=="constant"){let C=w.evaluate({zoom:h-1},a,{},g.availableImages),A=w.evaluate({zoom:h},a,{},g.availableImages),R=w.evaluate({zoom:h+1},a,{},g.availableImages);C=C&&C.name?C.name:C,A=A&&A.name?A.name:A,R=R&&R.name?R.name:R,_[C]=!0,_[A]=!0,_[R]=!0,a.patterns[x.id]={min:C,mid:A,max:R}}}return a}class N_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new No,this.indexArray=new _o,this.indexArray2=new Zr,this.programConfigurations=new uu(i.layers,i.zoom),this.segments=new En,this.segments2=new En,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,h){this.hasPattern=B_("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:w,id:C,index:A,sourceLayerIndex:R}of i){const L=this.layers[0]._featureFilter.needGeometry,N=hu(w,L);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),N,h))continue;const Z=_?g.evaluate(N,{},h,a.availableImages):void 0,Y={id:C,properties:w.properties,type:w.type,sourceLayerIndex:R,index:A,geometry:L?N.geometry:cu(w),patterns:{},sortKey:Z};x.push(Y)}_&&x.sort((w,C)=>w.sortKey-C.sortKey);for(const w of x){const{geometry:C,index:A,sourceLayerIndex:R}=w;if(this.hasPattern){const L=$_("fill",this.layers,w,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(w,C,A,h,{});a.featureIndex.insert(i[A].feature,C,A,R,this.index)}}update(i,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,h)}addFeatures(i,a,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,cz),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,a,h,g,_){for(const x of nc(a,500)){let w=0;for(const Z of x)w+=Z.length;const C=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),A=C.vertexLength,R=[],L=[];for(const Z of x){if(Z.length===0)continue;Z!==x[0]&&L.push(R.length/2);const Y=this.segments2.prepareSegment(Z.length,this.layoutVertexArray,this.indexArray2),ee=Y.vertexLength;this.layoutVertexArray.emplaceBack(Z[0].x,Z[0].y),this.indexArray2.emplaceBack(ee+Z.length-1,ee),R.push(Z[0].x),R.push(Z[0].y);for(let ue=1;ue<Z.length;ue++)this.layoutVertexArray.emplaceBack(Z[ue].x,Z[ue].y),this.indexArray2.emplaceBack(ee+ue-1,ee+ue),R.push(Z[ue].x),R.push(Z[ue].y);Y.vertexLength+=Z.length,Y.primitiveLength+=Z.length}const N=ES(R,L);for(let Z=0;Z<N.length;Z+=3)this.indexArray.emplaceBack(A+N[Z],A+N[Z+1],A+N[Z+2]);C.vertexLength+=w,C.primitiveLength+=N.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,_,g)}}let zS,LS;Pt("FillBucket",N_,{omit:["layers","patternFeatures"]});var xz={get paint(){return LS=LS||new v({"fill-antialias":new Mt(Ce.paint_fill["fill-antialias"]),"fill-opacity":new tn(Ce.paint_fill["fill-opacity"]),"fill-color":new tn(Ce.paint_fill["fill-color"]),"fill-outline-color":new tn(Ce.paint_fill["fill-outline-color"]),"fill-translate":new Mt(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new Mt(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new wc(Ce.paint_fill["fill-pattern"])})},get layout(){return zS=zS||new v({"fill-sort-key":new tn(Ce.layout_fill["fill-sort-key"])})}};class bz extends u{constructor(i){super(i,xz)}recalculate(i,a){super.recalculate(i,a);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new N_(i)}queryRadius(){return Im(this.paint.get("fill-translate"))}queryIntersectsFeature(i,a,h,g,_,x,w){return gS(Am(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),g)}isTileClipped(){return!0}}const wz=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Sz=S([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Cz}=wz;var ol={},Tz=T,DS=zc;function zc(o,i,a,h,g){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=g,o.readFields(Pz,this,i)}function Pz(o,i,a){o==1?i.id=a.readVarint():o==2?function(h,g){for(var _=h.readVarint()+h.pos;h.pos<_;){var x=g._keys[h.readVarint()],w=g._values[h.readVarint()];g.properties[x]=w}}(a,i):o==3?i.type=a.readVarint():o==4&&(i._geometry=a.pos)}function kz(o){for(var i,a,h=0,g=0,_=o.length,x=_-1;g<_;x=g++)h+=((a=o[x]).x-(i=o[g]).x)*(i.y+a.y);return h}zc.types=["Unknown","Point","LineString","Polygon"],zc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var i,a=o.readVarint()+o.pos,h=1,g=0,_=0,x=0,w=[];o.pos<a;){if(g<=0){var C=o.readVarint();h=7&C,g=C>>3}if(g--,h===1||h===2)_+=o.readSVarint(),x+=o.readSVarint(),h===1&&(i&&w.push(i),i=[]),i.push(new Tz(_,x));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&w.push(i),w},zc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var i=o.readVarint()+o.pos,a=1,h=0,g=0,_=0,x=1/0,w=-1/0,C=1/0,A=-1/0;o.pos<i;){if(h<=0){var R=o.readVarint();a=7&R,h=R>>3}if(h--,a===1||a===2)(g+=o.readSVarint())<x&&(x=g),g>w&&(w=g),(_+=o.readSVarint())<C&&(C=_),_>A&&(A=_);else if(a!==7)throw new Error("unknown command "+a)}return[x,C,w,A]},zc.prototype.toGeoJSON=function(o,i,a){var h,g,_=this.extent*Math.pow(2,a),x=this.extent*o,w=this.extent*i,C=this.loadGeometry(),A=zc.types[this.type];function R(Z){for(var Y=0;Y<Z.length;Y++){var ee=Z[Y];Z[Y]=[360*(ee.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(ee.y+w)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(h=0;h<C.length;h++)L[h]=C[h][0];R(C=L);break;case 2:for(h=0;h<C.length;h++)R(C[h]);break;case 3:for(C=function(Z){var Y=Z.length;if(Y<=1)return[Z];for(var ee,ue,de=[],Ae=0;Ae<Y;Ae++){var xe=kz(Z[Ae]);xe!==0&&(ue===void 0&&(ue=xe<0),ue===xe<0?(ee&&de.push(ee),ee=[Z[Ae]]):ee.push(Z[Ae]))}return ee&&de.push(ee),de}(C),h=0;h<C.length;h++)for(g=0;g<C[h].length;g++)R(C[h][g])}C.length===1?C=C[0]:A="Multi"+A;var N={type:"Feature",geometry:{type:A,coordinates:C},properties:this.properties};return"id"in this&&(N.id=this.id),N};var Ez=DS,OS=FS;function FS(o,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Iz,this,i),this.length=this._features.length}function Iz(o,i,a){o===15?i.version=a.readVarint():o===1?i.name=a.readString():o===5?i.extent=a.readVarint():o===2?i._features.push(a.pos):o===3?i._keys.push(a.readString()):o===4&&i._values.push(function(h){for(var g=null,_=h.readVarint()+h.pos;h.pos<_;){var x=h.readVarint()>>3;g=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return g}(a))}FS.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var i=this._pbf.readVarint()+this._pbf.pos;return new Ez(this._pbf,i,this.extent,this._keys,this._values)};var Az=OS;function Mz(o,i,a){if(o===3){var h=new Az(a,a.readVarint()+a.pos);h.length&&(i[h.name]=h)}}ol.VectorTile=function(o,i){this.layers=o.readFields(Mz,{},i)},ol.VectorTileFeature=DS,ol.VectorTileLayer=OS;const Rz=ol.VectorTileFeature.types,V_=Math.pow(2,13);function Wd(o,i,a,h,g,_,x,w){o.emplaceBack(i,a,2*Math.floor(h*V_)+x,g*V_*2,_*V_*2,Math.round(w))}class j_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Qa,this.centroidVertexArray=new ti,this.indexArray=new _o,this.programConfigurations=new uu(i.layers,i.zoom),this.segments=new En,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,h){this.features=[],this.hasPattern=B_("fill-extrusion",this.layers,a);for(const{feature:g,id:_,index:x,sourceLayerIndex:w}of i){const C=this.layers[0]._featureFilter.needGeometry,A=hu(g,C);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),A,h))continue;const R={id:_,sourceLayerIndex:w,index:x,geometry:C?A.geometry:cu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push($_("fill-extrusion",this.layers,R,this.zoom,a)):this.addFeature(R,R.geometry,x,h,{}),a.featureIndex.insert(g,R.geometry,x,w,this.index,!0)}}addFeatures(i,a,h){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,a,h)}}update(i,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Cz),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,Sz.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,a,h,g,_){for(const x of nc(a,500)){const w={x:0,y:0,vertexCount:0};let C=0;for(const Y of x)C+=Y.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Y of x){if(Y.length===0||Lz(Y))continue;let ee=0;for(let ue=0;ue<Y.length;ue++){const de=Y[ue];if(ue>=1){const Ae=Y[ue-1];if(!zz(de,Ae)){A.vertexLength+4>En.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xe=de.sub(Ae)._perp()._unit(),ke=Ae.dist(de);ee+ke>32768&&(ee=0),Wd(this.layoutVertexArray,de.x,de.y,xe.x,xe.y,0,0,ee),Wd(this.layoutVertexArray,de.x,de.y,xe.x,xe.y,0,1,ee),w.x+=2*de.x,w.y+=2*de.y,w.vertexCount+=2,ee+=ke,Wd(this.layoutVertexArray,Ae.x,Ae.y,xe.x,xe.y,0,0,ee),Wd(this.layoutVertexArray,Ae.x,Ae.y,xe.x,xe.y,0,1,ee),w.x+=2*Ae.x,w.y+=2*Ae.y,w.vertexCount+=2;const je=A.vertexLength;this.indexArray.emplaceBack(je,je+2,je+1),this.indexArray.emplaceBack(je+1,je+2,je+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+C>En.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),Rz[i.type]!=="Polygon")continue;const R=[],L=[],N=A.vertexLength;for(const Y of x)if(Y.length!==0){Y!==x[0]&&L.push(R.length/2);for(let ee=0;ee<Y.length;ee++){const ue=Y[ee];Wd(this.layoutVertexArray,ue.x,ue.y,0,0,1,1,0),w.x+=ue.x,w.y+=ue.y,w.vertexCount+=1,R.push(ue.x),R.push(ue.y)}}const Z=ES(R,L);for(let Y=0;Y<Z.length;Y+=3)this.indexArray.emplaceBack(N+Z[Y],N+Z[Y+2],N+Z[Y+1]);A.primitiveLength+=Z.length/3,A.vertexLength+=C;for(let Y=0;Y<w.vertexCount;Y++){const ee=Math.floor(w.x/w.vertexCount),ue=Math.floor(w.y/w.vertexCount);this.centroidVertexArray.emplaceBack(ee,ue)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,_,g)}}function zz(o,i){return o.x===i.x&&(o.x<0||o.x>Ar)||o.y===i.y&&(o.y<0||o.y>Ar)}function Lz(o){return o.every(i=>i.x<0)||o.every(i=>i.x>Ar)||o.every(i=>i.y<0)||o.every(i=>i.y>Ar)}let BS;Pt("FillExtrusionBucket",j_,{omit:["layers","features"]});var Dz={get paint(){return BS=BS||new v({"fill-extrusion-opacity":new Mt(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new tn(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mt(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mt(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wc(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new tn(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new tn(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Mt(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Oz extends u{constructor(i){super(i,Dz)}createBucket(i){return new j_(i)}queryRadius(){return Im(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,a,h,g,_,x,w,C){const A=Am(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),R=this.paint.get("fill-extrusion-height").evaluate(a,h),L=this.paint.get("fill-extrusion-base").evaluate(a,h),N=function(Y,ee,ue,de){const Ae=[];for(const xe of Y){const ke=[xe.x,xe.y,0,1];Mm(ke,ke,ee),Ae.push(new I(ke[0]/ke[3],ke[1]/ke[3]))}return Ae}(A,C),Z=function(Y,ee,ue,de){const Ae=[],xe=[],ke=de[8]*ee,je=de[9]*ee,Je=de[10]*ee,wt=de[11]*ee,en=de[8]*ue,_t=de[9]*ue,dt=de[10]*ue,Bt=de[11]*ue;for(const Et of Y){const Tt=[],We=[];for(const Nt of Et){const Dt=Nt.x,an=Nt.y,Kn=de[0]*Dt+de[4]*an+de[12],qn=de[1]*Dt+de[5]*an+de[13],Vr=de[2]*Dt+de[6]*an+de[14],Vo=de[3]*Dt+de[7]*an+de[15],ii=Vr+Je,jr=Vo+wt,Ei=Kn+en,Ii=qn+_t,Ai=Vr+dt,_r=Vo+Bt,Ur=new I((Kn+ke)/jr,(qn+je)/jr);Ur.z=ii/jr,Tt.push(Ur);const gi=new I(Ei/_r,Ii/_r);gi.z=Ai/_r,We.push(gi)}Ae.push(Tt),xe.push(We)}return[Ae,xe]}(g,L,R,C);return function(Y,ee,ue){let de=1/0;gS(ue,ee)&&(de=$S(ue,ee[0]));for(let Ae=0;Ae<ee.length;Ae++){const xe=ee[Ae],ke=Y[Ae];for(let je=0;je<xe.length-1;je++){const Je=xe[je],wt=[Je,xe[je+1],ke[je+1],ke[je],Je];mS(ue,wt)&&(de=Math.min(de,$S(ue,wt)))}}return de!==1/0&&de}(Z[0],Z[1],N)}}function Hd(o,i){return o.x*i.x+o.y*i.y}function $S(o,i){if(o.length===1){let a=0;const h=i[a++];let g;for(;!g||h.equals(g);)if(g=i[a++],!g)return 1/0;for(;a<i.length;a++){const _=i[a],x=o[0],w=g.sub(h),C=_.sub(h),A=x.sub(h),R=Hd(w,w),L=Hd(w,C),N=Hd(C,C),Z=Hd(A,w),Y=Hd(A,C),ee=R*N-L*L,ue=(N*Z-L*Y)/ee,de=(R*Y-L*Z)/ee,Ae=h.z*(1-ue-de)+g.z*ue+_.z*de;if(isFinite(Ae))return Ae}return 1/0}{let a=1/0;for(const h of i)a=Math.min(a,h.z);return a}}const Fz=S([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Bz}=Fz,$z=S([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Nz}=$z,Vz=ol.VectorTileFeature.types,jz=Math.cos(Math.PI/180*37.5),NS=Math.pow(2,14)/.5;class U_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Cc,this.layoutVertexArray2=new el,this.indexArray=new _o,this.programConfigurations=new uu(i.layers,i.zoom),this.segments=new En,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,h){this.hasPattern=B_("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:w,id:C,index:A,sourceLayerIndex:R}of i){const L=this.layers[0]._featureFilter.needGeometry,N=hu(w,L);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),N,h))continue;const Z=_?g.evaluate(N,{},h):void 0,Y={id:C,properties:w.properties,type:w.type,sourceLayerIndex:R,index:A,geometry:L?N.geometry:cu(w),patterns:{},sortKey:Z};x.push(Y)}_&&x.sort((w,C)=>w.sortKey-C.sortKey);for(const w of x){const{geometry:C,index:A,sourceLayerIndex:R}=w;if(this.hasPattern){const L=$_("line",this.layers,w,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(w,C,A,h,{});a.featureIndex.insert(i[A].feature,C,A,R,this.index)}}update(i,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,h)}addFeatures(i,a,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,Nz)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Bz),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,a,h,g,_){const x=this.layers[0].layout,w=x.get("line-join").evaluate(i,{}),C=x.get("line-cap"),A=x.get("line-miter-limit"),R=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const L of a)this.addLine(L,i,w,C,A,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,_,g)}addLine(i,a,h,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<i.length-1;de++)this.totalDistance+=i[de].dist(i[de+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=Vz[a.type]==="Polygon";let C=i.length;for(;C>=2&&i[C-1].equals(i[C-2]);)C--;let A=0;for(;A<C-1&&i[A].equals(i[A+1]);)A++;if(C<(w?3:2))return;h==="bevel"&&(_=1.05);const R=this.overscaling<=16?15*Ar/(512*this.overscaling):0,L=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let N,Z,Y,ee,ue;this.e1=this.e2=-1,w&&(N=i[C-2],ue=i[A].sub(N)._unit()._perp());for(let de=A;de<C;de++){if(Y=de===C-1?w?i[A+1]:void 0:i[de+1],Y&&i[de].equals(Y))continue;ue&&(ee=ue),N&&(Z=N),N=i[de],ue=Y?Y.sub(N)._unit()._perp():ee,ee=ee||ue;let Ae=ee.add(ue);Ae.x===0&&Ae.y===0||Ae._unit();const xe=ee.x*ue.x+ee.y*ue.y,ke=Ae.x*ue.x+Ae.y*ue.y,je=ke!==0?1/ke:1/0,Je=2*Math.sqrt(2-2*ke),wt=ke<jz&&Z&&Y,en=ee.x*ue.y-ee.y*ue.x>0;if(wt&&de>A){const Bt=N.dist(Z);if(Bt>2*R){const Et=N.sub(N.sub(Z)._mult(R/Bt)._round());this.updateDistance(Z,Et),this.addCurrentVertex(Et,ee,0,0,L),Z=Et}}const _t=Z&&Y;let dt=_t?h:w?"butt":g;if(_t&&dt==="round"&&(je<x?dt="miter":je<=2&&(dt="fakeround")),dt==="miter"&&je>_&&(dt="bevel"),dt==="bevel"&&(je>2&&(dt="flipbevel"),je<_&&(dt="miter")),Z&&this.updateDistance(Z,N),dt==="miter")Ae._mult(je),this.addCurrentVertex(N,Ae,0,0,L);else if(dt==="flipbevel"){if(je>100)Ae=ue.mult(-1);else{const Bt=je*ee.add(ue).mag()/ee.sub(ue).mag();Ae._perp()._mult(Bt*(en?-1:1))}this.addCurrentVertex(N,Ae,0,0,L),this.addCurrentVertex(N,Ae.mult(-1),0,0,L)}else if(dt==="bevel"||dt==="fakeround"){const Bt=-Math.sqrt(je*je-1),Et=en?Bt:0,Tt=en?0:Bt;if(Z&&this.addCurrentVertex(N,ee,Et,Tt,L),dt==="fakeround"){const We=Math.round(180*Je/Math.PI/20);for(let Nt=1;Nt<We;Nt++){let Dt=Nt/We;if(Dt!==.5){const Kn=Dt-.5;Dt+=Dt*Kn*(Dt-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Kn*Kn+(.848013+xe*(.215638*xe-1.06021)))}const an=ue.sub(ee)._mult(Dt)._add(ee)._unit()._mult(en?-1:1);this.addHalfVertex(N,an.x,an.y,!1,en,0,L)}}Y&&this.addCurrentVertex(N,ue,-Et,-Tt,L)}else if(dt==="butt")this.addCurrentVertex(N,Ae,0,0,L);else if(dt==="square"){const Bt=Z?1:-1;this.addCurrentVertex(N,Ae,Bt,Bt,L)}else dt==="round"&&(Z&&(this.addCurrentVertex(N,ee,0,0,L),this.addCurrentVertex(N,ee,1,1,L,!0)),Y&&(this.addCurrentVertex(N,ue,-1,-1,L,!0),this.addCurrentVertex(N,ue,0,0,L)));if(wt&&de<C-1){const Bt=N.dist(Y);if(Bt>2*R){const Et=N.add(Y.sub(N)._mult(R/Bt)._round());this.updateDistance(N,Et),this.addCurrentVertex(Et,ue,0,0,L),N=Et}}}}addCurrentVertex(i,a,h,g,_,x=!1){const w=a.y*g-a.x,C=-a.y-a.x*g;this.addHalfVertex(i,a.x+a.y*h,a.y-a.x*h,x,!1,h,_),this.addHalfVertex(i,w,C,x,!0,-g,_),this.distance>NS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,a,h,g,_,x))}addHalfVertex({x:i,y:a},h,g,_,x,w,C){const A=.5*(this.lineClips?this.scaledDistance*(NS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(_?1:0),(a<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(w===0?0:w<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),C.primitiveLength++),x?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,a){this.distance+=i.dist(a),this.updateScaledDistance()}}let VS,jS;Pt("LineBucket",U_,{omit:["layers","patternFeatures"]});var US={get paint(){return jS=jS||new v({"line-opacity":new tn(Ce.paint_line["line-opacity"]),"line-color":new tn(Ce.paint_line["line-color"]),"line-translate":new Mt(Ce.paint_line["line-translate"]),"line-translate-anchor":new Mt(Ce.paint_line["line-translate-anchor"]),"line-width":new tn(Ce.paint_line["line-width"]),"line-gap-width":new tn(Ce.paint_line["line-gap-width"]),"line-offset":new tn(Ce.paint_line["line-offset"]),"line-blur":new tn(Ce.paint_line["line-blur"]),"line-dasharray":new Sc(Ce.paint_line["line-dasharray"]),"line-pattern":new wc(Ce.paint_line["line-pattern"]),"line-gradient":new Dd(Ce.paint_line["line-gradient"])})},get layout(){return VS=VS||new v({"line-cap":new Mt(Ce.layout_line["line-cap"]),"line-join":new tn(Ce.layout_line["line-join"]),"line-miter-limit":new Mt(Ce.layout_line["line-miter-limit"]),"line-round-limit":new Mt(Ce.layout_line["line-round-limit"]),"line-sort-key":new tn(Ce.layout_line["line-sort-key"])})}};class Uz extends tn{possiblyEvaluate(i,a){return a=new rr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(i,a)}evaluate(i,a,h,g){return a=ae({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(i,a,h,g)}}let Dm;class Wz extends u{constructor(i){super(i,US),this.gradientVersion=0,Dm||(Dm=new Uz(US.paint.properties["line-width"].specification),Dm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof Da,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,a){super.recalculate(i,a),this.paint._values["line-floorwidth"]=Dm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new U_(i)}queryRadius(i){const a=i,h=WS(Bd("line-width",this,a),Bd("line-gap-width",this,a)),g=Bd("line-offset",this,a);return h/2+Math.abs(g)+Im(this.paint.get("line-translate"))}queryIntersectsFeature(i,a,h,g,_,x,w){const C=Am(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),A=w/2*WS(this.paint.get("line-width").evaluate(a,h),this.paint.get("line-gap-width").evaluate(a,h)),R=this.paint.get("line-offset").evaluate(a,h);return R&&(g=function(L,N){const Z=[];for(let Y=0;Y<L.length;Y++){const ee=L[Y],ue=[];for(let de=0;de<ee.length;de++){const Ae=ee[de-1],xe=ee[de],ke=ee[de+1],je=de===0?new I(0,0):xe.sub(Ae)._unit()._perp(),Je=de===ee.length-1?new I(0,0):ke.sub(xe)._unit()._perp(),wt=je._add(Je)._unit(),en=wt.x*Je.x+wt.y*Je.y;en!==0&&wt._mult(1/en),ue.push(wt._mult(N)._add(xe))}Z.push(ue)}return Z}(g,R*w)),function(L,N,Z){for(let Y=0;Y<N.length;Y++){const ee=N[Y];if(L.length>=3){for(let ue=0;ue<ee.length;ue++)if(Ac(L,ee[ue]))return!0}if(QR(L,ee,Z))return!0}return!1}(C,g,A)}isTileClipped(){return!0}}function WS(o,i){return i>0?i+2*o:o}const Hz=S([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qz=S([{name:"a_projected_pos",components:3,type:"Float32"}],4);S([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Gz=S([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);S([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const HS=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Zz=S([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Kz(o,i,a){return o.sections.forEach(h=>{h.text=function(g,_,x){const w=_.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?g=g.toLocaleUpperCase():w==="lowercase"&&(g=g.toLocaleLowerCase()),Vi.applyArabicShaping&&(g=Vi.applyArabicShaping(g)),g}(h.text,i,a)}),o}S([{name:"triangle",components:3,type:"Uint16"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),S([{type:"Float32",name:"offsetX"}]),S([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),S([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const qd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Or=24,qS=Hn,GS=function(o,i,a,h,g){var _,x,w=8*g-h-1,C=(1<<w)-1,A=C>>1,R=-7,L=g-1,N=-1,Z=o[i+L];for(L+=N,_=Z&(1<<-R)-1,Z>>=-R,R+=w;R>0;_=256*_+o[i+L],L+=N,R-=8);for(x=_&(1<<-R)-1,_>>=-R,R+=h;R>0;x=256*x+o[i+L],L+=N,R-=8);if(_===0)_=1-A;else{if(_===C)return x?NaN:1/0*(Z?-1:1);x+=Math.pow(2,h),_-=A}return(Z?-1:1)*x*Math.pow(2,_-h)},ZS=function(o,i,a,h,g,_){var x,w,C,A=8*_-g-1,R=(1<<A)-1,L=R>>1,N=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=0,Y=1,ee=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(w=isNaN(i)?1:0,x=R):(x=Math.floor(Math.log(i)/Math.LN2),i*(C=Math.pow(2,-x))<1&&(x--,C*=2),(i+=x+L>=1?N/C:N*Math.pow(2,1-L))*C>=2&&(x++,C/=2),x+L>=R?(w=0,x=R):x+L>=1?(w=(i*C-1)*Math.pow(2,g),x+=L):(w=i*Math.pow(2,L-1)*Math.pow(2,g),x=0));g>=8;o[a+Z]=255&w,Z+=Y,w/=256,g-=8);for(x=x<<g|w,A+=g;A>0;o[a+Z]=255&x,Z+=Y,x/=256,A-=8);o[a+Z-Y]|=128*ee};function Hn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Hn.Varint=0,Hn.Fixed64=1,Hn.Bytes=2,Hn.Fixed32=5;var W_=4294967296,KS=1/W_,XS=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function da(o){return o.type===Hn.Bytes?o.readVarint()+o.pos:o.pos+1}function Lc(o,i,a){return a?4294967296*i+(o>>>0):4294967296*(i>>>0)+(o>>>0)}function YS(o,i,a){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));a.realloc(h);for(var g=a.pos-1;g>=o;g--)a.buf[g+h]=a.buf[g]}function Xz(o,i){for(var a=0;a<o.length;a++)i.writeVarint(o[a])}function Yz(o,i){for(var a=0;a<o.length;a++)i.writeSVarint(o[a])}function Jz(o,i){for(var a=0;a<o.length;a++)i.writeFloat(o[a])}function Qz(o,i){for(var a=0;a<o.length;a++)i.writeDouble(o[a])}function eL(o,i){for(var a=0;a<o.length;a++)i.writeBoolean(o[a])}function tL(o,i){for(var a=0;a<o.length;a++)i.writeFixed32(o[a])}function nL(o,i){for(var a=0;a<o.length;a++)i.writeSFixed32(o[a])}function rL(o,i){for(var a=0;a<o.length;a++)i.writeFixed64(o[a])}function iL(o,i){for(var a=0;a<o.length;a++)i.writeSFixed64(o[a])}function Om(o,i){return(o[i]|o[i+1]<<8|o[i+2]<<16)+16777216*o[i+3]}function Dc(o,i,a){o[a]=i,o[a+1]=i>>>8,o[a+2]=i>>>16,o[a+3]=i>>>24}function JS(o,i){return(o[i]|o[i+1]<<8|o[i+2]<<16)+(o[i+3]<<24)}Hn.prototype={destroy:function(){this.buf=null},readFields:function(o,i,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),g=h>>3,_=this.pos;this.type=7&h,o(g,i,this),this.pos===_&&this.skip(h)}return i},readMessage:function(o,i){return this.readFields(o,i,this.readVarint()+this.pos)},readFixed32:function(){var o=Om(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=JS(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Om(this.buf,this.pos)+Om(this.buf,this.pos+4)*W_;return this.pos+=8,o},readSFixed64:function(){var o=Om(this.buf,this.pos)+JS(this.buf,this.pos+4)*W_;return this.pos+=8,o},readFloat:function(){var o=GS(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=GS(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var i,a,h=this.buf;return i=127&(a=h[this.pos++]),a<128?i:(i|=(127&(a=h[this.pos++]))<<7,a<128?i:(i|=(127&(a=h[this.pos++]))<<14,a<128?i:(i|=(127&(a=h[this.pos++]))<<21,a<128?i:function(g,_,x){var w,C,A=x.buf;if(w=(112&(C=A[x.pos++]))>>4,C<128||(w|=(127&(C=A[x.pos++]))<<3,C<128)||(w|=(127&(C=A[x.pos++]))<<10,C<128)||(w|=(127&(C=A[x.pos++]))<<17,C<128)||(w|=(127&(C=A[x.pos++]))<<24,C<128)||(w|=(1&(C=A[x.pos++]))<<31,C<128))return Lc(g,w,_);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(a=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,i=this.pos;return this.pos=o,o-i>=12&&XS?function(a,h,g){return XS.decode(a.subarray(h,g))}(this.buf,i,o):function(a,h,g){for(var _="",x=h;x<g;){var w,C,A,R=a[x],L=null,N=R>239?4:R>223?3:R>191?2:1;if(x+N>g)break;N===1?R<128&&(L=R):N===2?(192&(w=a[x+1]))==128&&(L=(31&R)<<6|63&w)<=127&&(L=null):N===3?(C=a[x+2],(192&(w=a[x+1]))==128&&(192&C)==128&&((L=(15&R)<<12|(63&w)<<6|63&C)<=2047||L>=55296&&L<=57343)&&(L=null)):N===4&&(C=a[x+2],A=a[x+3],(192&(w=a[x+1]))==128&&(192&C)==128&&(192&A)==128&&((L=(15&R)<<18|(63&w)<<12|(63&C)<<6|63&A)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,N=1):L>65535&&(L-=65536,_+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),_+=String.fromCharCode(L),x+=N}return _}(this.buf,i,o)},readBytes:function(){var o=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,o);return this.pos=o,i},readPackedVarint:function(o,i){if(this.type!==Hn.Bytes)return o.push(this.readVarint(i));var a=da(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(i));return o},readPackedSVarint:function(o){if(this.type!==Hn.Bytes)return o.push(this.readSVarint());var i=da(this);for(o=o||[];this.pos<i;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Hn.Bytes)return o.push(this.readBoolean());var i=da(this);for(o=o||[];this.pos<i;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Hn.Bytes)return o.push(this.readFloat());var i=da(this);for(o=o||[];this.pos<i;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Hn.Bytes)return o.push(this.readDouble());var i=da(this);for(o=o||[];this.pos<i;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Hn.Bytes)return o.push(this.readFixed32());var i=da(this);for(o=o||[];this.pos<i;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Hn.Bytes)return o.push(this.readSFixed32());var i=da(this);for(o=o||[];this.pos<i;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Hn.Bytes)return o.push(this.readFixed64());var i=da(this);for(o=o||[];this.pos<i;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Hn.Bytes)return o.push(this.readSFixed64());var i=da(this);for(o=o||[];this.pos<i;)o.push(this.readSFixed64());return o},skip:function(o){var i=7&o;if(i===Hn.Varint)for(;this.buf[this.pos++]>127;);else if(i===Hn.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Hn.Fixed32)this.pos+=4;else{if(i!==Hn.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(o,i){this.writeVarint(o<<3|i)},realloc:function(o){for(var i=this.length||16;i<this.pos+o;)i*=2;if(i!==this.length){var a=new Uint8Array(i);a.set(this.buf),this.buf=a,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Dc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Dc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Dc(this.buf,-1&o,this.pos),Dc(this.buf,Math.floor(o*KS),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Dc(this.buf,-1&o,this.pos),Dc(this.buf,Math.floor(o*KS),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(i,a){var h,g;if(i>=0?(h=i%4294967296|0,g=i/4294967296|0):(g=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,g=g+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(_,x,w){w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,w.buf[w.pos]=127&(_>>>=7)}(h,0,a),function(_,x){var w=(7&_)<<4;x.buf[x.pos++]|=w|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(g,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var i=this.pos;this.pos=function(h,g,_){for(var x,w,C=0;C<g.length;C++){if((x=g.charCodeAt(C))>55295&&x<57344){if(!w){x>56319||C+1===g.length?(h[_++]=239,h[_++]=191,h[_++]=189):w=x;continue}if(x<56320){h[_++]=239,h[_++]=191,h[_++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(h[_++]=239,h[_++]=191,h[_++]=189,w=null);x<128?h[_++]=x:(x<2048?h[_++]=x>>6|192:(x<65536?h[_++]=x>>12|224:(h[_++]=x>>18|240,h[_++]=x>>12&63|128),h[_++]=x>>6&63|128),h[_++]=63&x|128)}return _}(this.buf,o,this.pos);var a=this.pos-i;a>=128&&YS(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),ZS(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),ZS(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var i=o.length;this.writeVarint(i),this.realloc(i);for(var a=0;a<i;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,i){this.pos++;var a=this.pos;o(i,this);var h=this.pos-a;h>=128&&YS(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,i,a){this.writeTag(o,Hn.Bytes),this.writeRawMessage(i,a)},writePackedVarint:function(o,i){i.length&&this.writeMessage(o,Xz,i)},writePackedSVarint:function(o,i){i.length&&this.writeMessage(o,Yz,i)},writePackedBoolean:function(o,i){i.length&&this.writeMessage(o,eL,i)},writePackedFloat:function(o,i){i.length&&this.writeMessage(o,Jz,i)},writePackedDouble:function(o,i){i.length&&this.writeMessage(o,Qz,i)},writePackedFixed32:function(o,i){i.length&&this.writeMessage(o,tL,i)},writePackedSFixed32:function(o,i){i.length&&this.writeMessage(o,nL,i)},writePackedFixed64:function(o,i){i.length&&this.writeMessage(o,rL,i)},writePackedSFixed64:function(o,i){i.length&&this.writeMessage(o,iL,i)},writeBytesField:function(o,i){this.writeTag(o,Hn.Bytes),this.writeBytes(i)},writeFixed32Field:function(o,i){this.writeTag(o,Hn.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(o,i){this.writeTag(o,Hn.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(o,i){this.writeTag(o,Hn.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(o,i){this.writeTag(o,Hn.Fixed64),this.writeSFixed64(i)},writeVarintField:function(o,i){this.writeTag(o,Hn.Varint),this.writeVarint(i)},writeSVarintField:function(o,i){this.writeTag(o,Hn.Varint),this.writeSVarint(i)},writeStringField:function(o,i){this.writeTag(o,Hn.Bytes),this.writeString(i)},writeFloatField:function(o,i){this.writeTag(o,Hn.Fixed32),this.writeFloat(i)},writeDoubleField:function(o,i){this.writeTag(o,Hn.Fixed64),this.writeDouble(i)},writeBooleanField:function(o,i){this.writeVarintField(o,!!i)}};var H_=b(qS);const q_=3;function oL(o,i,a){o===1&&a.readMessage(sL,i)}function sL(o,i,a){if(o===3){const{id:h,bitmap:g,width:_,height:x,left:w,top:C,advance:A}=a.readMessage(aL,{});i.push({id:h,bitmap:new Nd({width:_+2*q_,height:x+2*q_},g),metrics:{width:_,height:x,left:w,top:C,advance:A}})}}function aL(o,i,a){o===1?i.id=a.readVarint():o===2?i.bitmap=a.readBytes():o===3?i.width=a.readVarint():o===4?i.height=a.readVarint():o===5?i.left=a.readSVarint():o===6?i.top=a.readSVarint():o===7&&(i.advance=a.readVarint())}const QS=q_;function e2(o){let i=0,a=0;for(const x of o)i+=x.w*x.h,a=Math.max(a,x.w);o.sort((x,w)=>w.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),a),h:1/0}];let g=0,_=0;for(const x of o)for(let w=h.length-1;w>=0;w--){const C=h[w];if(!(x.w>C.w||x.h>C.h)){if(x.x=C.x,x.y=C.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===C.w&&x.h===C.h){const A=h.pop();w<h.length&&(h[w]=A)}else x.h===C.h?(C.x+=x.w,C.w-=x.w):x.w===C.w?(C.y+=x.h,C.h-=x.h):(h.push({x:C.x+x.w,y:C.y,w:C.w-x.w,h:x.h}),C.y+=x.h,C.h-=x.h);break}}return{w:g,h:_,fill:i/(g*_)||0}}const Ui=1;class G_{constructor(i,{pixelRatio:a,version:h,stretchX:g,stretchY:_,content:x,textFitWidth:w,textFitHeight:C}){this.paddedRect=i,this.pixelRatio=a,this.stretchX=g,this.stretchY=_,this.content=x,this.version=h,this.textFitWidth=w,this.textFitHeight=C}get tl(){return[this.paddedRect.x+Ui,this.paddedRect.y+Ui]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ui,this.paddedRect.y+this.paddedRect.h-Ui]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ui)/this.pixelRatio,(this.paddedRect.h-2*Ui)/this.pixelRatio]}}class t2{constructor(i,a){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(i,h,_),this.addImages(a,g,_);const{w:x,h:w}=e2(_),C=new xo({width:x||1,height:w||1});for(const A in i){const R=i[A],L=h[A].paddedRect;xo.copy(R.data,C,{x:0,y:0},{x:L.x+Ui,y:L.y+Ui},R.data)}for(const A in a){const R=a[A],L=g[A].paddedRect,N=L.x+Ui,Z=L.y+Ui,Y=R.data.width,ee=R.data.height;xo.copy(R.data,C,{x:0,y:0},{x:N,y:Z},R.data),xo.copy(R.data,C,{x:0,y:ee-1},{x:N,y:Z-1},{width:Y,height:1}),xo.copy(R.data,C,{x:0,y:0},{x:N,y:Z+ee},{width:Y,height:1}),xo.copy(R.data,C,{x:Y-1,y:0},{x:N-1,y:Z},{width:1,height:ee}),xo.copy(R.data,C,{x:0,y:0},{x:N+Y,y:Z},{width:1,height:ee})}this.image=C,this.iconPositions=h,this.patternPositions=g}addImages(i,a,h){for(const g in i){const _=i[g],x={x:0,y:0,w:_.data.width+2*Ui,h:_.data.height+2*Ui};h.push(x),a[g]=new G_(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(i,a){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),a)}patchUpdatedImage(i,a,h){if(!i||!a||i.version===a.version)return;i.version=a.version;const[g,_]=i.tl;h.update(a.data,void 0,{x:g,y:_})}}var sl;Pt("ImagePosition",G_),Pt("ImageAtlas",t2),p.ah=void 0,(sl=p.ah||(p.ah={}))[sl.none=0]="none",sl[sl.horizontal=1]="horizontal",sl[sl.vertical=2]="vertical",sl[sl.horizontalOnly=3]="horizontalOnly";const Gd=-17;class Zd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,a){const h=new Zd;return h.scale=i||1,h.fontStack=a,h}static forImage(i){const a=new Zd;return a.imageName=i,a}}class Oc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,a){const h=new Oc;for(let g=0;g<i.sections.length;g++){const _=i.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,a)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let a="";for(let h=0;h<i.length;h++){const g=i.charCodeAt(h+1)||null,_=i.charCodeAt(h-1)||null;a+=g&&wm(g)&&!qd[i[h+1]]||_&&wm(_)&&!qd[i[h-1]]||!qd[i[h]]?i[h]:qd[i[h]]}return a}(this.text)}trim(){let i=0;for(let h=0;h<this.text.length&&Bm[this.text.charCodeAt(h)];h++)i++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&Bm[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(i,a),this.sectionIndex=this.sectionIndex.slice(i,a)}substring(i,a){const h=new Oc;return h.text=this.text.substring(i,a),h.sectionIndex=this.sectionIndex.slice(i,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,a)=>Math.max(i,this.sections[a].scale),0)}addTextSection(i,a){this.text+=i.text,this.sections.push(Zd.forText(i.scale,i.fontStack||a));const h=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(h)}addImageSection(i){const a=i.image?i.image.name:"";if(a.length===0)return void be("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Zd.forImage(a)),this.sectionIndex.push(this.sections.length-1)):be("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fm(o,i,a,h,g,_,x,w,C,A,R,L,N,Z,Y){const ee=Oc.fromFeature(o,g);let ue;L===p.ah.vertical&&ee.verticalizePunctuation();const{processBidirectionalText:de,processStyledBidirectionalText:Ae}=Vi;if(de&&ee.sections.length===1){ue=[];const je=de(ee.toString(),Z_(ee,A,_,i,h,Z));for(const Je of je){const wt=new Oc;wt.text=Je,wt.sections=ee.sections;for(let en=0;en<Je.length;en++)wt.sectionIndex.push(0);ue.push(wt)}}else if(Ae){ue=[];const je=Ae(ee.text,ee.sectionIndex,Z_(ee,A,_,i,h,Z));for(const Je of je){const wt=new Oc;wt.text=Je[0],wt.sectionIndex=Je[1],wt.sections=ee.sections,ue.push(wt)}}else ue=function(je,Je){const wt=[],en=je.text;let _t=0;for(const dt of Je)wt.push(je.substring(_t,dt)),_t=dt;return _t<en.length&&wt.push(je.substring(_t,en.length)),wt}(ee,Z_(ee,A,_,i,h,Z));const xe=[],ke={positionedLines:xe,text:ee.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(je,Je,wt,en,_t,dt,Bt,Et,Tt,We,Nt,Dt){let an=0,Kn=Gd,qn=0,Vr=0;const Vo=Et==="right"?1:Et==="left"?0:.5;let ii=0;for(const _r of _t){_r.trim();const Ur=_r.getMaxScale(),gi=(Ur-1)*Or,oi={positionedGlyphs:[],lineOffset:0};je.positionedLines[ii]=oi;const Mi=oi.positionedGlyphs;let si=0;if(!_r.length()){Kn+=dt,++ii;continue}for(let Wi=0;Wi<_r.length();Wi++){const Fn=_r.getSection(Wi),Yn=_r.getSectionIndex(Wi),ar=_r.getCharCode(Wi);let no=0,dr=null,Nc=null,Is=null,As=Or;const jo=!(Tt===p.ah.horizontal||!Nt&&!zd(ar)||Nt&&(Bm[ar]||(jr=ar,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(jr)))));if(Fn.imageName){const So=en[Fn.imageName];if(!So)continue;Is=Fn.imageName,je.iconsInText=je.iconsInText||!0,Nc=So.paddedRect;const Kr=So.displaySize;Fn.scale=Fn.scale*Or/Dt,dr={width:Kr[0],height:Kr[1],left:Ui,top:-QS,advance:jo?Kr[1]:Kr[0]},no=gi+(Or-Kr[1]*Fn.scale),As=dr.advance;const pa=jo?Kr[0]*Fn.scale-Or*Ur:Kr[1]*Fn.scale-Or*Ur;pa>0&&pa>si&&(si=pa)}else{const So=wt[Fn.fontStack],Kr=So&&So[ar];if(Kr&&Kr.rect)Nc=Kr.rect,dr=Kr.metrics;else{const pa=Je[Fn.fontStack],ep=pa&&pa[ar];if(!ep)continue;dr=ep.metrics}no=(Ur-Fn.scale)*Or}jo?(je.verticalizable=!0,Mi.push({glyph:ar,imageName:Is,x:an,y:Kn+no,vertical:jo,scale:Fn.scale,fontStack:Fn.fontStack,sectionIndex:Yn,metrics:dr,rect:Nc}),an+=As*Fn.scale+We):(Mi.push({glyph:ar,imageName:Is,x:an,y:Kn+no,vertical:jo,scale:Fn.scale,fontStack:Fn.fontStack,sectionIndex:Yn,metrics:dr,rect:Nc}),an+=dr.advance*Fn.scale+We)}Mi.length!==0&&(qn=Math.max(an-We,qn),hL(Mi,0,Mi.length-1,Vo,si)),an=0;const wo=dt*Ur+si;oi.lineOffset=Math.max(si,gi),Kn+=wo,Vr=Math.max(wo,Vr),++ii}var jr;const Ei=Kn-Gd,{horizontalAlign:Ii,verticalAlign:Ai}=K_(Bt);(function(_r,Ur,gi,oi,Mi,si,wo,Wi,Fn){const Yn=(Ur-gi)*Mi;let ar=0;ar=si!==wo?-Wi*oi-Gd:(-oi*Fn+.5)*wo;for(const no of _r)for(const dr of no.positionedGlyphs)dr.x+=Yn,dr.y+=ar})(je.positionedLines,Vo,Ii,Ai,qn,Vr,dt,Ei,_t.length),je.top+=-Ai*Ei,je.bottom=je.top+Ei,je.left+=-Ii*qn,je.right=je.left+qn}(ke,i,a,h,ue,x,w,C,L,A,N,Y),!function(je){for(const Je of je)if(Je.positionedGlyphs.length!==0)return!1;return!0}(xe)&&ke}const Bm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lL={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},uL={40:!0};function n2(o,i,a,h,g,_){if(i.imageName){const x=h[i.imageName];return x?x.displaySize[0]*i.scale*Or/_+g:0}{const x=a[i.fontStack],w=x&&x[o];return w?w.metrics.advance*i.scale+g:0}}function r2(o,i,a,h){const g=Math.pow(o-i,2);return h?o<i?g/2:2*g:g+Math.abs(a)*a}function cL(o,i,a){let h=0;return o===10&&(h-=1e4),a&&(h+=150),o!==40&&o!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function i2(o,i,a,h,g,_){let x=null,w=r2(i,a,g,_);for(const C of h){const A=r2(i-C.x,a,g,_)+C.badness;A<=w&&(x=C,w=A)}return{index:o,x:i,priorBreak:x,badness:w}}function o2(o){return o?o2(o.priorBreak).concat(o.index):[]}function Z_(o,i,a,h,g,_){if(!o)return[];const x=[],w=function(L,N,Z,Y,ee,ue){let de=0;for(let Ae=0;Ae<L.length();Ae++){const xe=L.getSection(Ae);de+=n2(L.getCharCode(Ae),xe,Y,ee,N,ue)}return de/Math.max(1,Math.ceil(de/Z))}(o,i,a,h,g,_),C=o.text.indexOf("​")>=0;let A=0;for(let L=0;L<o.length();L++){const N=o.getSection(L),Z=o.getCharCode(L);if(Bm[Z]||(A+=n2(Z,N,h,g,i,_)),L<o.length()-1){const Y=!((R=Z)<11904)&&(!!kn["CJK Compatibility Forms"](R)||!!kn["CJK Compatibility"](R)||!!kn["CJK Strokes"](R)||!!kn["CJK Symbols and Punctuation"](R)||!!kn["Enclosed CJK Letters and Months"](R)||!!kn["Halfwidth and Fullwidth Forms"](R)||!!kn["Ideographic Description Characters"](R)||!!kn["Vertical Forms"](R)||bm.test(String.fromCodePoint(R)));(lL[Z]||Y||N.imageName||L!==o.length()-2&&uL[o.getCharCode(L+1)])&&x.push(i2(L+1,A,w,x,cL(Z,o.getCharCode(L+1),Y&&C),!1))}}var R;return o2(i2(o.length(),A,w,x,0,!0))}function K_(o){let i=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:i,verticalAlign:a}}function hL(o,i,a,h,g){if(!h&&!g)return;const _=o[a],x=(o[a].x+_.metrics.advance*_.scale)*h;for(let w=i;w<=a;w++)o[w].x-=x,o[w].y+=g}function dL(o,i,a){const{horizontalAlign:h,verticalAlign:g}=K_(a),_=i[0]-o.displaySize[0]*h,x=i[1]-o.displaySize[1]*g;return{image:o,top:x,bottom:x+o.displaySize[1],left:_,right:_+o.displaySize[0]}}function s2(o){var i,a;let h=o.left,g=o.top,_=o.right-h,x=o.bottom-g;const w=(i=o.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",C=(a=o.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",A=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(C==="proportional"){if(w==="stretchOnly"&&_/x<A||w==="proportional"){const R=Math.ceil(x*A);h*=R/_,_=R}}else if(w==="proportional"&&C==="stretchOnly"&&A!==0&&_/x>A){const R=Math.ceil(_/A);g*=R/x,x=R}return{x1:h,y1:g,x2:h+_,y2:g+x}}function a2(o,i,a,h,g,_){const x=o.image;let w;if(x.content){const ue=x.content,de=x.pixelRatio||1;w=[ue[0]/de,ue[1]/de,x.displaySize[0]-ue[2]/de,x.displaySize[1]-ue[3]/de]}const C=i.left*_,A=i.right*_;let R,L,N,Z;a==="width"||a==="both"?(Z=g[0]+C-h[3],L=g[0]+A+h[1]):(Z=g[0]+(C+A-x.displaySize[0])/2,L=Z+x.displaySize[0]);const Y=i.top*_,ee=i.bottom*_;return a==="height"||a==="both"?(R=g[1]+Y-h[0],N=g[1]+ee+h[2]):(R=g[1]+(Y+ee-x.displaySize[1])/2,N=R+x.displaySize[1]),{image:x,top:R,right:L,bottom:N,left:Z,collisionPadding:w}}const Kd=255,Es=128,al=Kd*Es;function l2(o,i){const{expression:a}=i;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new rr(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=a;let _=0;for(;_<h.length&&h[_]<=o;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const w=h[_],C=h[x];return a.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:C,interpolationType:g}:{kind:"camera",minZoom:w,maxZoom:C,minSize:a.evaluate(new rr(w)),maxSize:a.evaluate(new rr(C)),interpolationType:g}}}function X_(o,i,a){let h="never";const g=o.get(i);return g?h=g:o.get(a)&&(h="always"),h}const pL=ol.VectorTileFeature.types,fL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $m(o,i,a,h,g,_,x,w,C,A,R,L,N){const Z=w?Math.min(al,Math.round(w[0])):0,Y=w?Math.min(al,Math.round(w[1])):0;o.emplaceBack(i,a,Math.round(32*h),Math.round(32*g),_,x,(Z<<1)+(C?1:0),Y,16*A,16*R,256*L,256*N)}function Y_(o,i,a){o.emplaceBack(i.x,i.y,a),o.emplaceBack(i.x,i.y,a),o.emplaceBack(i.x,i.y,a),o.emplaceBack(i.x,i.y,a)}function mL(o){for(const i of o.sections)if(T_(i.text))return!0;return!1}class J_{constructor(i){this.layoutVertexArray=new Tc,this.indexArray=new _o,this.programConfigurations=i,this.segments=new En,this.dynamicLayoutVertexArray=new Od,this.opacityVertexArray=new eo,this.hasVisibleVertices=!1,this.placedSymbolArray=new ir}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,a,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Hz.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,qz.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,fL,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pt("SymbolBuffers",J_);class Q_{constructor(i,a,h){this.layoutVertexArray=new i,this.layoutAttributes=a,this.indexArray=new h,this.segments=new En,this.collisionVertexArray=new Ps}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,Gz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pt("CollisionBuffers",Q_);class Fc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=R_([]),this.placementViewportMatrix=R_([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=l2(this.zoom,a["text-size"]),this.iconSizeData=l2(this.zoom,a["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=X_(h,"text-overlap","text-allow-overlap")!=="never"||X_(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>p.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID}createArrays(){this.text=new J_(new uu(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new J_(new uu(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new or,this.lineVertexArray=new ei,this.symbolInstances=new Tn,this.textAnchorOffsets=new sr}calculateGlyphDependencies(i,a,h,g,_){for(let x=0;x<i.length;x++)if(a[i.charCodeAt(x)]=!0,(h||g)&&_){const w=qd[i.charAt(x)];w&&(a[w.charCodeAt(0)]=!0)}}populate(i,a,h){const g=this.layers[0],_=g.layout,x=_.get("text-font"),w=_.get("text-field"),C=_.get("icon-image"),A=(w.value.kind!=="constant"||w.value.value instanceof Jr&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),R=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,L=_.get("symbol-sort-key");if(this.features=[],!A&&!R)return;const N=a.iconDependencies,Z=a.glyphDependencies,Y=a.availableImages,ee=new rr(this.zoom);for(const{feature:ue,id:de,index:Ae,sourceLayerIndex:xe}of i){const ke=g._featureFilter.needGeometry,je=hu(ue,ke);if(!g._featureFilter.filter(ee,je,h))continue;let Je,wt;if(ke||(je.geometry=cu(ue)),A){const _t=g.getValueAndResolveTokens("text-field",je,h,Y),dt=Jr.factory(_t),Bt=this.hasRTLText=this.hasRTLText||mL(dt);(!Bt||Vi.getRTLTextPluginStatus()==="unavailable"||Bt&&Vi.isParsed())&&(Je=Kz(dt,g,je))}if(R){const _t=g.getValueAndResolveTokens("icon-image",je,h,Y);wt=_t instanceof gr?_t:gr.fromString(_t)}if(!Je&&!wt)continue;const en=this.sortFeaturesByKey?L.evaluate(je,{},h):void 0;if(this.features.push({id:de,text:Je,icon:wt,index:Ae,sourceLayerIndex:xe,geometry:je.geometry,properties:ue.properties,type:pL[ue.type],sortKey:en}),wt&&(N[wt.name]=!0),Je){const _t=x.evaluate(je,{},h).join(","),dt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(p.ah.vertical)>=0;for(const Bt of Je.sections)if(Bt.image)N[Bt.image.name]=!0;else{const Et=Md(Je.toString()),Tt=Bt.fontStack||_t,We=Z[Tt]=Z[Tt]||{};this.calculateGlyphDependencies(Bt.text,We,dt,this.allowVerticalPlacement,Et)}}}_.get("symbol-placement")==="line"&&(this.features=function(ue){const de={},Ae={},xe=[];let ke=0;function je(_t){xe.push(ue[_t]),ke++}function Je(_t,dt,Bt){const Et=Ae[_t];return delete Ae[_t],Ae[dt]=Et,xe[Et].geometry[0].pop(),xe[Et].geometry[0]=xe[Et].geometry[0].concat(Bt[0]),Et}function wt(_t,dt,Bt){const Et=de[dt];return delete de[dt],de[_t]=Et,xe[Et].geometry[0].shift(),xe[Et].geometry[0]=Bt[0].concat(xe[Et].geometry[0]),Et}function en(_t,dt,Bt){const Et=Bt?dt[0][dt[0].length-1]:dt[0][0];return`${_t}:${Et.x}:${Et.y}`}for(let _t=0;_t<ue.length;_t++){const dt=ue[_t],Bt=dt.geometry,Et=dt.text?dt.text.toString():null;if(!Et){je(_t);continue}const Tt=en(Et,Bt),We=en(Et,Bt,!0);if(Tt in Ae&&We in de&&Ae[Tt]!==de[We]){const Nt=wt(Tt,We,Bt),Dt=Je(Tt,We,xe[Nt].geometry);delete de[Tt],delete Ae[We],Ae[en(Et,xe[Dt].geometry,!0)]=Dt,xe[Nt].geometry=null}else Tt in Ae?Je(Tt,We,Bt):We in de?wt(Tt,We,Bt):(je(_t),de[Tt]=ke-1,Ae[We]=ke-1)}return xe.filter(_t=>_t.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ue,de)=>ue.sortKey-de.sortKey)}update(i,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,a,this.layers,h),this.icon.programConfigurations.updatePaintArrays(i,a,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,a){const h=this.lineVertexArray.length;if(i.segment!==void 0){let g=i.dist(a[i.segment+1]),_=i.dist(a[i.segment]);const x={};for(let w=i.segment+1;w<a.length;w++)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:g},w<a.length-1&&(g+=a[w+1].dist(a[w]));for(let w=i.segment||0;w>=0;w--)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:_},w>0&&(_+=a[w-1].dist(a[w]));for(let w=0;w<a.length;w++){const C=x[w];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,a,h,g,_,x,w,C,A,R,L,N){const Z=i.indexArray,Y=i.layoutVertexArray,ee=i.segments.prepareSegment(4*a.length,Y,Z,this.canOverlap?x.sortKey:void 0),ue=this.glyphOffsetArray.length,de=ee.vertexLength,Ae=this.allowVerticalPlacement&&w===p.ah.vertical?Math.PI/2:0,xe=x.text&&x.text.sections;for(let ke=0;ke<a.length;ke++){const{tl:je,tr:Je,bl:wt,br:en,tex:_t,pixelOffsetTL:dt,pixelOffsetBR:Bt,minFontScaleX:Et,minFontScaleY:Tt,glyphOffset:We,isSDF:Nt,sectionIndex:Dt}=a[ke],an=ee.vertexLength,Kn=We[1];$m(Y,C.x,C.y,je.x,Kn+je.y,_t.x,_t.y,h,Nt,dt.x,dt.y,Et,Tt),$m(Y,C.x,C.y,Je.x,Kn+Je.y,_t.x+_t.w,_t.y,h,Nt,Bt.x,dt.y,Et,Tt),$m(Y,C.x,C.y,wt.x,Kn+wt.y,_t.x,_t.y+_t.h,h,Nt,dt.x,Bt.y,Et,Tt),$m(Y,C.x,C.y,en.x,Kn+en.y,_t.x+_t.w,_t.y+_t.h,h,Nt,Bt.x,Bt.y,Et,Tt),Y_(i.dynamicLayoutVertexArray,C,Ae),Z.emplaceBack(an,an+1,an+2),Z.emplaceBack(an+1,an+2,an+3),ee.vertexLength+=4,ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(We[0]),ke!==a.length-1&&Dt===a[ke+1].sectionIndex||i.programConfigurations.populatePaintArrays(Y.length,x,x.index,{},N,xe&&xe[Dt])}i.placedSymbolArray.emplaceBack(C.x,C.y,ue,this.glyphOffsetArray.length-ue,de,A,R,C.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],w,0,!1,0,L)}_addCollisionDebugVertex(i,a,h,g,_,x){return a.emplaceBack(0,0),i.emplaceBack(h.x,h.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(i,a,h,g,_,x,w){const C=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),A=C.vertexLength,R=_.layoutVertexArray,L=_.collisionVertexArray,N=w.anchorX,Z=w.anchorY;this._addCollisionDebugVertex(R,L,x,N,Z,new I(i,a)),this._addCollisionDebugVertex(R,L,x,N,Z,new I(h,a)),this._addCollisionDebugVertex(R,L,x,N,Z,new I(h,g)),this._addCollisionDebugVertex(R,L,x,N,Z,new I(i,g)),C.vertexLength+=4;const Y=_.indexArray;Y.emplaceBack(A,A+1),Y.emplaceBack(A+1,A+2),Y.emplaceBack(A+2,A+3),Y.emplaceBack(A+3,A),C.primitiveLength+=4}addDebugCollisionBoxes(i,a,h,g){for(let _=i;_<a;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Q_(to,HS.members,Zr),this.iconCollisionBox=new Q_(to,HS.members,Zr);for(let i=0;i<this.symbolInstances.length;i++){const a=this.symbolInstances.get(i);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(i,a,h,g,_,x,w,C,A){const R={};for(let L=a;L<h;L++){const N=i.get(L);R.textBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},R.textFeatureIndex=N.featureIndex;break}for(let L=g;L<_;L++){const N=i.get(L);R.verticalTextBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},R.verticalTextFeatureIndex=N.featureIndex;break}for(let L=x;L<w;L++){const N=i.get(L);R.iconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},R.iconFeatureIndex=N.featureIndex;break}for(let L=C;L<A;L++){const N=i.get(L);R.verticalIconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},R.verticalIconFeatureIndex=N.featureIndex;break}return R}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,a){const h=i.placedSymbolArray.get(a),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)i.indexArray.emplaceBack(_,_+1,_+2),i.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(i),h=Math.cos(i),g=[],_=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const C=this.symbolInstances.get(w);g.push(0|Math.round(a*C.anchorX+h*C.anchorY)),_.push(C.featureIndex)}return x.sort((w,C)=>g[w]-g[C]||_[C]-_[w]),x}addToSortKeyRanges(i,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let u2,c2;Pt("SymbolBucket",Fc,{omit:["layers","collisionBoxArray","features","compareText"]}),Fc.MAX_GLYPHS=65535,Fc.addDynamicAttributes=Y_;var ex={get paint(){return c2=c2||new v({"icon-opacity":new tn(Ce.paint_symbol["icon-opacity"]),"icon-color":new tn(Ce.paint_symbol["icon-color"]),"icon-halo-color":new tn(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new tn(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new tn(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new Mt(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mt(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new tn(Ce.paint_symbol["text-opacity"]),"text-color":new tn(Ce.paint_symbol["text-color"],{runtimeType:Bn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new tn(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new tn(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new tn(Ce.paint_symbol["text-halo-blur"]),"text-translate":new Mt(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new Mt(Ce.paint_symbol["text-translate-anchor"])})},get layout(){return u2=u2||new v({"symbol-placement":new Mt(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new Mt(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mt(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new tn(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mt(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Mt(Ce.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Mt(Ce.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Mt(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mt(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mt(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new tn(Ce.layout_symbol["icon-size"]),"icon-text-fit":new Mt(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Mt(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new tn(Ce.layout_symbol["icon-image"]),"icon-rotate":new tn(Ce.layout_symbol["icon-rotate"]),"icon-padding":new tn(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new Mt(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new tn(Ce.layout_symbol["icon-offset"]),"icon-anchor":new tn(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mt(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mt(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mt(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new tn(Ce.layout_symbol["text-field"]),"text-font":new tn(Ce.layout_symbol["text-font"]),"text-size":new tn(Ce.layout_symbol["text-size"]),"text-max-width":new tn(Ce.layout_symbol["text-max-width"]),"text-line-height":new Mt(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new tn(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new tn(Ce.layout_symbol["text-justify"]),"text-radial-offset":new tn(Ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Mt(Ce.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new tn(Ce.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new tn(Ce.layout_symbol["text-anchor"]),"text-max-angle":new Mt(Ce.layout_symbol["text-max-angle"]),"text-writing-mode":new Mt(Ce.layout_symbol["text-writing-mode"]),"text-rotate":new tn(Ce.layout_symbol["text-rotate"]),"text-padding":new Mt(Ce.layout_symbol["text-padding"]),"text-keep-upright":new Mt(Ce.layout_symbol["text-keep-upright"]),"text-transform":new tn(Ce.layout_symbol["text-transform"]),"text-offset":new tn(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new Mt(Ce.layout_symbol["text-allow-overlap"]),"text-overlap":new Mt(Ce.layout_symbol["text-overlap"]),"text-ignore-placement":new Mt(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new Mt(Ce.layout_symbol["text-optional"])})}};class h2{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:hn,this.defaultValue=i}evaluate(i){if(i.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(i.formattedSection))return a.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt("FormatSectionOverride",h2,{omit:["defaultValue"]});class Nm extends u{constructor(i){super(i,ex)}recalculate(i,a){if(super.recalculate(i,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,a,h,g){const _=this.layout.get(i).evaluate(a,{},h,g),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||cc(x.value)||!_?_:function(w,C){return C.replace(/{([^{}]+)}/g,(A,R)=>w&&R in w?String(w[R]):"")}(a.properties,_)}createBucket(i){return new Fc(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of ex.paint.overridableProperties){if(!Nm.hasPaintOverride(this.layout,i))continue;const a=this.paint.get(i),h=new h2(a),g=new uc(h,a.property.specification);let _=null;_=a.value.kind==="constant"||a.value.kind==="source"?new Wa("source",g):new Ha("composite",g,a.value.zoomStops),this.paint._values[i]=new $o(a.property,_,a.parameters)}}_handleOverridablePaintPropertyUpdate(i,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&Nm.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,a){const h=i.get("text-field"),g=ex.paint.properties[a];let _=!1;const x=w=>{for(const C of w)if(g.overrides&&g.overrides.hasOverride(C))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Jr)x(h.value.value.sections);else if(h.value.kind==="source"){const w=A=>{_||(A instanceof po&&Ir(A.value)===pn?x(A.value.sections):A instanceof ec?x(A.sections):A.eachChild(w))},C=h.value;C._styleExpression&&w(C._styleExpression.expression)}return _}}let d2;var gL={get paint(){return d2=d2||new v({"background-color":new Mt(Ce.paint_background["background-color"]),"background-pattern":new Sc(Ce.paint_background["background-pattern"]),"background-opacity":new Mt(Ce.paint_background["background-opacity"])})}};class yL extends u{constructor(i){super(i,gL)}}let p2;var vL={get paint(){return p2=p2||new v({"raster-opacity":new Mt(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new Mt(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mt(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mt(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new Mt(Ce.paint_raster["raster-saturation"]),"raster-contrast":new Mt(Ce.paint_raster["raster-contrast"]),"raster-resampling":new Mt(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new Mt(Ce.paint_raster["raster-fade-duration"])})}};class _L extends u{constructor(i){super(i,vL)}}class xL extends u{constructor(i){super(i,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class bL{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const tx=63710088e-1;class ll{constructor(i,a){if(isNaN(i)||isNaN(a))throw new Error(`Invalid LngLat object: (${i}, ${a})`);if(this.lng=+i,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ll(re(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const a=Math.PI/180,h=this.lat*a,g=i.lat*a,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((i.lng-this.lng)*a);return tx*Math.acos(Math.min(_,1))}static convert(i){if(i instanceof ll)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new ll(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new ll(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const f2=2*Math.PI*tx;function m2(o){return f2*Math.cos(o*Math.PI/180)}function g2(o){return(180+o)/360}function y2(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function v2(o,i){return o/m2(i)}function nx(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Xd{constructor(i,a,h=0){this.x=+i,this.y=+a,this.z=+h}static fromLngLat(i,a=0){const h=ll.convert(i);return new Xd(g2(h.lng),y2(h.lat),v2(a,h.lat))}toLngLat(){return new ll(360*this.x-180,nx(this.y))}toAltitude(){return this.z*m2(nx(this.y))}meterInMercatorCoordinateUnits(){return 1/f2*(i=nx(this.y),1/Math.cos(i*Math.PI/180));var i}}function _2(o,i,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[o*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class rx{constructor(i,a,h){if(!function(g,_,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))}(i,a,h))throw new Error(`x=${a}, y=${h}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=a,this.y=h,this.key=Yd(0,i,i,a,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,a,h){const g=(x=this.y,w=this.z,C=_2(256*(_=this.x),256*(x=Math.pow(2,w)-x-1),w),A=_2(256*(_+1),256*(x+1),w),C[0]+","+C[1]+","+A[0]+","+A[1]);var _,x,w,C,A;const R=function(L,N,Z){let Y,ee="";for(let ue=L;ue>0;ue--)Y=1<<ue-1,ee+=(N&Y?1:0)+(Z&Y?2:0);return ee}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,g)}isChildOf(i){const a=this.z-i.z;return a>0&&i.x===this.x>>a&&i.y===this.y>>a}getTilePoint(i){const a=Math.pow(2,this.z);return new I((i.x*a-this.x)*Ar,(i.y*a-this.y)*Ar)}toString(){return`${this.z}/${this.x}/${this.y}`}}class x2{constructor(i,a){this.wrap=i,this.canonical=a,this.key=Yd(i,a.z,a.z,a.x,a.y)}}class bo{constructor(i,a,h,g,_){if(i<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${h}`);this.overscaledZ=i,this.wrap=a,this.canonical=new rx(h,+g,+_),this.key=Yd(a,i,h,g,_)}clone(){return new bo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-i;return i>this.canonical.z?new bo(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new bo(i,this.wrap,i,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(i,a){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-i;return i>this.canonical.z?Yd(this.wrap*+a,i,this.canonical.z,this.canonical.x,this.canonical.y):Yd(this.wrap*+a,i,i,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const a=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>a&&i.canonical.y===this.canonical.y>>a}children(i){if(this.overscaledZ>=i)return[new bo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new bo(a,this.wrap,a,h,g),new bo(a,this.wrap,a,h+1,g),new bo(a,this.wrap,a,h,g+1),new bo(a,this.wrap,a,h+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new bo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new bo(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new x2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Xd(i.x-this.wrap,i.y))}}function Yd(o,i,a,h,g){(o*=2)<0&&(o=-1*o-1);const _=1<<a;return(_*_*o+_*g+h).toString(36)+a.toString(36)+i.toString(36)}Pt("CanonicalTileID",rx),Pt("OverscaledTileID",bo,{omit:["posMatrix"]});class b2{constructor(i,a,h,g=1,_=1,x=1,w=0){if(this.uid=i,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void be(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const C=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<C;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(C,A)]=this.data[this._idx(C-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,C)]=this.data[this._idx(A,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<C;A++)for(let R=0;R<C;R++){const L=this.get(A,R);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(i,a){const h=new Uint8Array(this.data.buffer),g=4*this._idx(i,a);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,a){if(i<-1||i>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(i+1)}unpack(i,a,h){return i*this.redFactor+a*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new xo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,a,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=a*this.dim,_=a*this.dim+this.dim,x=h*this.dim,w=h*this.dim+this.dim;switch(a){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:x=w-1;break;case 1:w=x+1}const C=-a*this.dim,A=-h*this.dim;for(let R=x;R<w;R++)for(let L=g;L<_;L++)this.data[this._idx(L,R)]=i.data[this._idx(L+C,R+A)]}}Pt("DEMData",b2);class w2{constructor(i){this._stringToNumber={},this._numberToString=[];for(let a=0;a<i.length;a++){const h=i[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class S2{constructor(i,a,h,g,_){this.type="Feature",this._vectorTileFeature=i,i._z=a,i._x=h,i._y=g,this.properties=i.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(i[a]=this[a]);return i}}class C2{constructor(i,a){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Za(Ar,16,0),this.grid3D=new Za(Ar,16,0),this.featureIndexArray=new fi,this.promoteId=a}insert(i,a,h,g,_,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_);const C=x?this.grid3D:this.grid;for(let A=0;A<a.length;A++){const R=a[A],L=[1/0,1/0,-1/0,-1/0];for(let N=0;N<R.length;N++){const Z=R[N];L[0]=Math.min(L[0],Z.x),L[1]=Math.min(L[1],Z.y),L[2]=Math.max(L[2],Z.x),L[3]=Math.max(L[3],Z.y)}L[0]<Ar&&L[1]<Ar&&L[2]>=0&&L[3]>=0&&C.insert(w,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ol.VectorTile(new H_(this.rawTileData)).layers,this.sourceLayerCoder=new w2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,a,h,g){this.loadVTLayers();const _=i.params||{},x=Ar/i.tileSize/i.scale,w=gd(_.filter),C=i.queryGeometry,A=i.queryPadding*x,R=P2(C),L=this.grid.query(R.minX-A,R.minY-A,R.maxX+A,R.maxY+A),N=P2(i.cameraQueryGeometry),Z=this.grid3D.query(N.minX-A,N.minY-A,N.maxX+A,N.maxY+A,(ue,de,Ae,xe)=>function(ke,je,Je,wt,en){for(const dt of ke)if(je<=dt.x&&Je<=dt.y&&wt>=dt.x&&en>=dt.y)return!0;const _t=[new I(je,Je),new I(je,en),new I(wt,en),new I(wt,Je)];if(ke.length>2){for(const dt of _t)if(Ac(ke,dt))return!0}for(let dt=0;dt<ke.length-1;dt++)if(tz(ke[dt],ke[dt+1],_t))return!0;return!1}(i.cameraQueryGeometry,ue-A,de-A,Ae+A,xe+A));for(const ue of Z)L.push(ue);L.sort(wL);const Y={};let ee;for(let ue=0;ue<L.length;ue++){const de=L[ue];if(de===ee)continue;ee=de;const Ae=this.featureIndexArray.get(de);let xe=null;this.loadMatchingFeature(Y,Ae.bucketIndex,Ae.sourceLayerIndex,Ae.featureIndex,w,_.layers,_.availableImages,a,h,g,(ke,je,Je)=>(xe||(xe=cu(ke)),je.queryIntersectsFeature(C,ke,Je,xe,this.z,i.transform,x,i.pixelPosMatrix)))}return Y}loadMatchingFeature(i,a,h,g,_,x,w,C,A,R,L){const N=this.bucketLayerIDs[a];if(x&&!function(ue,de){for(let Ae=0;Ae<ue.length;Ae++)if(de.indexOf(ue[Ae])>=0)return!0;return!1}(x,N))return;const Z=this.sourceLayerCoder.decode(h),Y=this.vtLayers[Z].feature(g);if(_.needGeometry){const ue=hu(Y,!0);if(!_.filter(new rr(this.tileID.overscaledZ),ue,this.tileID.canonical))return}else if(!_.filter(new rr(this.tileID.overscaledZ),Y))return;const ee=this.getId(Y,Z);for(let ue=0;ue<N.length;ue++){const de=N[ue];if(x&&x.indexOf(de)<0)continue;const Ae=C[de];if(!Ae)continue;let xe={};ee&&R&&(xe=R.getState(Ae.sourceLayer||"_geojsonTileLayer",ee));const ke=ae({},A[de]);ke.paint=T2(ke.paint,Ae.paint,Y,xe,w),ke.layout=T2(ke.layout,Ae.layout,Y,xe,w);const je=!L||L(Y,Ae,xe);if(!je)continue;const Je=new S2(Y,this.z,this.x,this.y,ee);Je.layer=ke;let wt=i[de];wt===void 0&&(wt=i[de]=[]),wt.push({featureIndex:g,feature:Je,intersectionZ:je})}}lookupSymbolFeatures(i,a,h,g,_,x,w,C){const A={};this.loadVTLayers();const R=gd(_);for(const L of i)this.loadMatchingFeature(A,h,g,L,R,x,w,C,a);return A}hasLayer(i){for(const a of this.bucketLayerIDs)for(const h of a)if(i===h)return!0;return!1}getId(i,a){let h=i.id;return this.promoteId&&(h=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function T2(o,i,a,h,g){return Me(o,(_,x)=>{const w=i instanceof su?i.get(x):null;return w&&w.evaluate?w.evaluate(a,h,g):w})}function P2(o){let i=1/0,a=1/0,h=-1/0,g=-1/0;for(const _ of o)i=Math.min(i,_.x),a=Math.min(a,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return{minX:i,minY:a,maxX:h,maxY:g}}function wL(o,i){return i-o}function k2(o,i,a,h,g){const _=[];for(let x=0;x<o.length;x++){const w=o[x];let C;for(let A=0;A<w.length-1;A++){let R=w[A],L=w[A+1];R.x<i&&L.x<i||(R.x<i?R=new I(i,R.y+(i-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x<i&&(L=new I(i,R.y+(i-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y<a&&L.y<a||(R.y<a?R=new I(R.x+(a-R.y)/(L.y-R.y)*(L.x-R.x),a)._round():L.y<a&&(L=new I(R.x+(a-R.y)/(L.y-R.y)*(L.x-R.x),a)._round()),R.x>=h&&L.x>=h||(R.x>=h?R=new I(h,R.y+(h-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x>=h&&(L=new I(h,R.y+(h-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y>=g&&L.y>=g||(R.y>=g?R=new I(R.x+(g-R.y)/(L.y-R.y)*(L.x-R.x),g)._round():L.y>=g&&(L=new I(R.x+(g-R.y)/(L.y-R.y)*(L.x-R.x),g)._round()),C&&R.equals(C[C.length-1])||(C=[R],_.push(C)),C.push(L)))))}}return _}Pt("FeatureIndex",C2,{omit:["rawTileData","sourceLayerCoder"]});class ul extends I{constructor(i,a,h,g){super(i,a),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new ul(this.x,this.y,this.angle,this.segment)}}function E2(o,i,a,h,g){if(i.segment===void 0||a===0)return!0;let _=i,x=i.segment+1,w=0;for(;w>-a/2;){if(x--,x<0)return!1;w-=o[x].dist(_),_=o[x]}w+=o[x].dist(o[x+1]),x++;const C=[];let A=0;for(;w<a/2;){const R=o[x],L=o[x+1];if(!L)return!1;let N=o[x-1].angleTo(R)-R.angleTo(L);for(N=Math.abs((N+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:w,angleDelta:N}),A+=N;w-C[0].distance>h;)A-=C.shift().angleDelta;if(A>g)return!1;x++,w+=R.dist(L)}return!0}function I2(o){let i=0;for(let a=0;a<o.length-1;a++)i+=o[a].dist(o[a+1]);return i}function A2(o,i,a){return o?.6*i*a:0}function M2(o,i){return Math.max(o?o.right-o.left:0,i?i.right-i.left:0)}function SL(o,i,a,h,g,_){const x=A2(a,g,_),w=M2(a,h)*_;let C=0;const A=I2(o)/2;for(let R=0;R<o.length-1;R++){const L=o[R],N=o[R+1],Z=L.dist(N);if(C+Z>A){const Y=(A-C)/Z,ee=Ci.number(L.x,N.x,Y),ue=Ci.number(L.y,N.y,Y),de=new ul(ee,ue,N.angleTo(L),R);return de._round(),!x||E2(o,de,w,x,i)?de:void 0}C+=Z}}function CL(o,i,a,h,g,_,x,w,C){const A=A2(h,_,x),R=M2(h,g),L=R*x,N=o[0].x===0||o[0].x===C||o[0].y===0||o[0].y===C;return i-L<i/4&&(i=L+i/4),R2(o,N?i/2*w%i:(R/2+2*_)*x*w%i,i,A,a,L,N,!1,C)}function R2(o,i,a,h,g,_,x,w,C){const A=_/2,R=I2(o);let L=0,N=i-a,Z=[];for(let Y=0;Y<o.length-1;Y++){const ee=o[Y],ue=o[Y+1],de=ee.dist(ue),Ae=ue.angleTo(ee);for(;N+a<L+de;){N+=a;const xe=(N-L)/de,ke=Ci.number(ee.x,ue.x,xe),je=Ci.number(ee.y,ue.y,xe);if(ke>=0&&ke<C&&je>=0&&je<C&&N-A>=0&&N+A<=R){const Je=new ul(ke,je,Ae,Y);Je._round(),h&&!E2(o,Je,_,h,g)||Z.push(Je)}}L+=de}return w||Z.length||x||(Z=R2(o,L/2,a,h,g,_,x,!0,C)),Z}Pt("Anchor",ul);const Bc=Ui;function z2(o,i,a,h){const g=[],_=o.image,x=_.pixelRatio,w=_.paddedRect.w-2*Bc,C=_.paddedRect.h-2*Bc;let A={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const R=_.stretchX||[[0,w]],L=_.stretchY||[[0,C]],N=(We,Nt)=>We+Nt[1]-Nt[0],Z=R.reduce(N,0),Y=L.reduce(N,0),ee=w-Z,ue=C-Y;let de=0,Ae=Z,xe=0,ke=Y,je=0,Je=ee,wt=0,en=ue;if(_.content&&h){const We=_.content,Nt=We[2]-We[0],Dt=We[3]-We[1];(_.textFitWidth||_.textFitHeight)&&(A=s2(o)),de=Vm(R,0,We[0]),xe=Vm(L,0,We[1]),Ae=Vm(R,We[0],We[2]),ke=Vm(L,We[1],We[3]),je=We[0]-de,wt=We[1]-xe,Je=Nt-Ae,en=Dt-ke}const _t=A.x1,dt=A.y1,Bt=A.x2-_t,Et=A.y2-dt,Tt=(We,Nt,Dt,an)=>{const Kn=jm(We.stretch-de,Ae,Bt,_t),qn=Um(We.fixed-je,Je,We.stretch,Z),Vr=jm(Nt.stretch-xe,ke,Et,dt),Vo=Um(Nt.fixed-wt,en,Nt.stretch,Y),ii=jm(Dt.stretch-de,Ae,Bt,_t),jr=Um(Dt.fixed-je,Je,Dt.stretch,Z),Ei=jm(an.stretch-xe,ke,Et,dt),Ii=Um(an.fixed-wt,en,an.stretch,Y),Ai=new I(Kn,Vr),_r=new I(ii,Vr),Ur=new I(ii,Ei),gi=new I(Kn,Ei),oi=new I(qn/x,Vo/x),Mi=new I(jr/x,Ii/x),si=i*Math.PI/180;if(si){const Fn=Math.sin(si),Yn=Math.cos(si),ar=[Yn,-Fn,Fn,Yn];Ai._matMult(ar),_r._matMult(ar),gi._matMult(ar),Ur._matMult(ar)}const wo=We.stretch+We.fixed,Wi=Nt.stretch+Nt.fixed;return{tl:Ai,tr:_r,bl:gi,br:Ur,tex:{x:_.paddedRect.x+Bc+wo,y:_.paddedRect.y+Bc+Wi,w:Dt.stretch+Dt.fixed-wo,h:an.stretch+an.fixed-Wi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:oi,pixelOffsetBR:Mi,minFontScaleX:Je/x/Bt,minFontScaleY:en/x/Et,isSDF:a}};if(h&&(_.stretchX||_.stretchY)){const We=L2(R,ee,Z),Nt=L2(L,ue,Y);for(let Dt=0;Dt<We.length-1;Dt++){const an=We[Dt],Kn=We[Dt+1];for(let qn=0;qn<Nt.length-1;qn++)g.push(Tt(an,Nt[qn],Kn,Nt[qn+1]))}}else g.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:C+1}));return g}function Vm(o,i,a){let h=0;for(const g of o)h+=Math.max(i,Math.min(a,g[1]))-Math.max(i,Math.min(a,g[0]));return h}function L2(o,i,a){const h=[{fixed:-Bc,stretch:0}];for(const[g,_]of o){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return h.push({fixed:i+Bc,stretch:a}),h}function jm(o,i,a,h){return o/i*a+h}function Um(o,i,a,h){return o-i*a/h}class Wm{constructor(i,a,h,g,_,x,w,C,A,R){var L;if(this.boxStartIndex=i.length,A){let N=x.top,Z=x.bottom;const Y=x.collisionPadding;Y&&(N-=Y[1],Z+=Y[3]);let ee=Z-N;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{const N=!((L=x.image)===null||L===void 0)&&L.content&&(x.image.textFitWidth||x.image.textFitHeight)?s2(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};N.y1=N.y1*w-C[0],N.y2=N.y2*w+C[2],N.x1=N.x1*w-C[3],N.x2=N.x2*w+C[1];const Z=x.collisionPadding;if(Z&&(N.x1-=Z[0]*w,N.y1-=Z[1]*w,N.x2+=Z[2]*w,N.y2+=Z[3]*w),R){const Y=new I(N.x1,N.y1),ee=new I(N.x2,N.y1),ue=new I(N.x1,N.y2),de=new I(N.x2,N.y2),Ae=R*Math.PI/180;Y._rotate(Ae),ee._rotate(Ae),ue._rotate(Ae),de._rotate(Ae),N.x1=Math.min(Y.x,ee.x,ue.x,de.x),N.x2=Math.max(Y.x,ee.x,ue.x,de.x),N.y1=Math.min(Y.y,ee.y,ue.y,de.y),N.y2=Math.max(Y.y,ee.y,ue.y,de.y)}i.emplaceBack(a.x,a.y,N.x1,N.y1,N.x2,N.y2,h,g,_)}this.boxEndIndex=i.length}}class TL{constructor(i=[],a=(h,g)=>h<g?-1:h>g?1:0){if(this.data=i,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:a,compare:h}=this,g=a[i];for(;i>0;){const _=i-1>>1,x=a[_];if(h(g,x)>=0)break;a[i]=x,i=_}a[i]=g}_down(i){const{data:a,compare:h}=this,g=this.length>>1,_=a[i];for(;i<g;){let x=1+(i<<1);const w=x+1;if(w<this.length&&h(a[w],a[x])<0&&(x=w),h(a[x],_)>=0)break;a[i]=a[x],i=x}a[i]=_}}function PL(o,i=1,a=!1){let h=1/0,g=1/0,_=-1/0,x=-1/0;const w=o[0];for(let Z=0;Z<w.length;Z++){const Y=w[Z];(!Z||Y.x<h)&&(h=Y.x),(!Z||Y.y<g)&&(g=Y.y),(!Z||Y.x>_)&&(_=Y.x),(!Z||Y.y>x)&&(x=Y.y)}const C=Math.min(_-h,x-g);let A=C/2;const R=new TL([],kL);if(C===0)return new I(h,g);for(let Z=h;Z<_;Z+=C)for(let Y=g;Y<x;Y+=C)R.push(new $c(Z+A,Y+A,A,o));let L=function(Z){let Y=0,ee=0,ue=0;const de=Z[0];for(let Ae=0,xe=de.length,ke=xe-1;Ae<xe;ke=Ae++){const je=de[Ae],Je=de[ke],wt=je.x*Je.y-Je.x*je.y;ee+=(je.x+Je.x)*wt,ue+=(je.y+Je.y)*wt,Y+=3*wt}return new $c(ee/Y,ue/Y,0,Z)}(o),N=R.length;for(;R.length;){const Z=R.pop();(Z.d>L.d||!L.d)&&(L=Z,a&&console.log("found best %d after %d probes",Math.round(1e4*Z.d)/1e4,N)),Z.max-L.d<=i||(A=Z.h/2,R.push(new $c(Z.p.x-A,Z.p.y-A,A,o)),R.push(new $c(Z.p.x+A,Z.p.y-A,A,o)),R.push(new $c(Z.p.x-A,Z.p.y+A,A,o)),R.push(new $c(Z.p.x+A,Z.p.y+A,A,o)),N+=4)}return a&&(console.log(`num probes: ${N}`),console.log(`best distance: ${L.d}`)),L.p}function kL(o,i){return i.max-o.max}function $c(o,i,a,h){this.p=new I(o,i),this.h=a,this.d=function(g,_){let x=!1,w=1/0;for(let C=0;C<_.length;C++){const A=_[C];for(let R=0,L=A.length,N=L-1;R<L;N=R++){const Z=A[R],Y=A[N];Z.y>g.y!=Y.y>g.y&&g.x<(Y.x-Z.x)*(g.y-Z.y)/(Y.y-Z.y)+Z.x&&(x=!x),w=Math.min(w,yS(g,Z,Y))}}return(x?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var ri;p.aq=void 0,(ri=p.aq||(p.aq={}))[ri.center=1]="center",ri[ri.left=2]="left",ri[ri.right=3]="right",ri[ri.top=4]="top",ri[ri.bottom=5]="bottom",ri[ri["top-left"]=6]="top-left",ri[ri["top-right"]=7]="top-right",ri[ri["bottom-left"]=8]="bottom-left",ri[ri["bottom-right"]=9]="bottom-right";const cl=7,ix=Number.POSITIVE_INFINITY;function D2(o,i){return i[1]!==ix?function(a,h,g){let _=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),a){case"top-right":case"top-left":case"top":x=g-cl;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+cl}switch(a){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(o,i[0],i[1]):function(a,h){let g=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(a){case"top-right":case"top-left":_=x-cl;break;case"bottom-right":case"bottom-left":_=-x+cl;break;case"bottom":_=-h+cl;break;case"top":_=h-cl}switch(a){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,_]}(o,i[0])}function O2(o,i,a){var h;const g=o.layout,_=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(i,{},a);if(_){const w=_.values,C=[];for(let A=0;A<w.length;A+=2){const R=C[A]=w[A],L=w[A+1].map(N=>N*Or);R.startsWith("top")?L[1]-=cl:R.startsWith("bottom")&&(L[1]+=cl),C[A+1]=L}return new vn(C)}const x=g.get("text-variable-anchor");if(x){let w;w=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(i,{},a)*Or,ix]:g.get("text-offset").evaluate(i,{},a).map(A=>A*Or);const C=[];for(const A of x)C.push(A,D2(A,w));return new vn(C)}return null}function ox(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function EL(o,i,a,h,g,_,x,w,C,A,R){let L=_.textMaxSize.evaluate(i,{});L===void 0&&(L=x);const N=o.layers[0].layout,Z=N.get("icon-offset").evaluate(i,{},R),Y=B2(a.horizontal),ee=x/24,ue=o.tilePixelRatio*ee,de=o.tilePixelRatio*L/24,Ae=o.tilePixelRatio*w,xe=o.tilePixelRatio*N.get("symbol-spacing"),ke=N.get("text-padding")*o.tilePixelRatio,je=function(We,Nt,Dt,an=1){const Kn=We.get("icon-padding").evaluate(Nt,{},Dt),qn=Kn&&Kn.values;return[qn[0]*an,qn[1]*an,qn[2]*an,qn[3]*an]}(N,i,R,o.tilePixelRatio),Je=N.get("text-max-angle")/180*Math.PI,wt=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point",en=N.get("icon-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",_t=N.get("symbol-placement"),dt=xe/2,Bt=N.get("icon-text-fit");let Et;h&&Bt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(Et=a2(h,a.vertical,Bt,N.get("icon-text-fit-padding"),Z,ee)),Y&&(h=a2(h,Y,Bt,N.get("icon-text-fit-padding"),Z,ee)));const Tt=(We,Nt)=>{Nt.x<0||Nt.x>=Ar||Nt.y<0||Nt.y>=Ar||function(Dt,an,Kn,qn,Vr,Vo,ii,jr,Ei,Ii,Ai,_r,Ur,gi,oi,Mi,si,wo,Wi,Fn,Yn,ar,no,dr,Nc){const Is=Dt.addToLineVertexArray(an,Kn);let As,jo,So,Kr,pa=0,ep=0,j2=0,U2=0,px=-1,fx=-1;const fa={};let W2=Pc("");if(Dt.allowVerticalPlacement&&qn.vertical){const yi=jr.layout.get("text-rotate").evaluate(Yn,{},dr)+90;So=new Wm(Ei,an,Ii,Ai,_r,qn.vertical,Ur,gi,oi,yi),ii&&(Kr=new Wm(Ei,an,Ii,Ai,_r,ii,si,wo,oi,yi))}if(Vr){const yi=jr.layout.get("icon-rotate").evaluate(Yn,{}),Co=jr.layout.get("icon-text-fit")!=="none",pu=z2(Vr,yi,no,Co),ds=ii?z2(ii,yi,no,Co):void 0;jo=new Wm(Ei,an,Ii,Ai,_r,Vr,si,wo,!1,yi),pa=4*pu.length;const fu=Dt.iconSizeData;let Ms=null;fu.kind==="source"?(Ms=[Es*jr.layout.get("icon-size").evaluate(Yn,{})],Ms[0]>al&&be(`${Dt.layerIds[0]}: Value for "icon-size" is >= ${Kd}. Reduce your "icon-size".`)):fu.kind==="composite"&&(Ms=[Es*ar.compositeIconSizes[0].evaluate(Yn,{},dr),Es*ar.compositeIconSizes[1].evaluate(Yn,{},dr)],(Ms[0]>al||Ms[1]>al)&&be(`${Dt.layerIds[0]}: Value for "icon-size" is >= ${Kd}. Reduce your "icon-size".`)),Dt.addSymbols(Dt.icon,pu,Ms,Fn,Wi,Yn,p.ah.none,an,Is.lineStartIndex,Is.lineLength,-1,dr),px=Dt.icon.placedSymbolArray.length-1,ds&&(ep=4*ds.length,Dt.addSymbols(Dt.icon,ds,Ms,Fn,Wi,Yn,p.ah.vertical,an,Is.lineStartIndex,Is.lineLength,-1,dr),fx=Dt.icon.placedSymbolArray.length-1)}const H2=Object.keys(qn.horizontal);for(const yi of H2){const Co=qn.horizontal[yi];if(!As){W2=Pc(Co.text);const ds=jr.layout.get("text-rotate").evaluate(Yn,{},dr);As=new Wm(Ei,an,Ii,Ai,_r,Co,Ur,gi,oi,ds)}const pu=Co.positionedLines.length===1;if(j2+=F2(Dt,an,Co,Vo,jr,oi,Yn,Mi,Is,qn.vertical?p.ah.horizontal:p.ah.horizontalOnly,pu?H2:[yi],fa,px,ar,dr),pu)break}qn.vertical&&(U2+=F2(Dt,an,qn.vertical,Vo,jr,oi,Yn,Mi,Is,p.ah.vertical,["vertical"],fa,fx,ar,dr));const ML=As?As.boxStartIndex:Dt.collisionBoxArray.length,RL=As?As.boxEndIndex:Dt.collisionBoxArray.length,zL=So?So.boxStartIndex:Dt.collisionBoxArray.length,LL=So?So.boxEndIndex:Dt.collisionBoxArray.length,DL=jo?jo.boxStartIndex:Dt.collisionBoxArray.length,OL=jo?jo.boxEndIndex:Dt.collisionBoxArray.length,FL=Kr?Kr.boxStartIndex:Dt.collisionBoxArray.length,BL=Kr?Kr.boxEndIndex:Dt.collisionBoxArray.length;let hs=-1;const qm=(yi,Co)=>yi&&yi.circleDiameter?Math.max(yi.circleDiameter,Co):Co;hs=qm(As,hs),hs=qm(So,hs),hs=qm(jo,hs),hs=qm(Kr,hs);const q2=hs>-1?1:0;q2&&(hs*=Nc/Or),Dt.glyphOffsetArray.length>=Fc.MAX_GLYPHS&&be("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Yn.sortKey!==void 0&&Dt.addToSortKeyRanges(Dt.symbolInstances.length,Yn.sortKey);const $L=O2(jr,Yn,dr),[NL,VL]=function(yi,Co){const pu=yi.length,ds=Co==null?void 0:Co.values;if((ds==null?void 0:ds.length)>0)for(let fu=0;fu<ds.length;fu+=2){const Ms=ds[fu+1];yi.emplaceBack(p.aq[ds[fu]],Ms[0],Ms[1])}return[pu,yi.length]}(Dt.textAnchorOffsets,$L);Dt.symbolInstances.emplaceBack(an.x,an.y,fa.right>=0?fa.right:-1,fa.center>=0?fa.center:-1,fa.left>=0?fa.left:-1,fa.vertical||-1,px,fx,W2,ML,RL,zL,LL,DL,OL,FL,BL,Ii,j2,U2,pa,ep,q2,0,Ur,hs,NL,VL)}(o,Nt,We,a,h,g,Et,o.layers[0],o.collisionBoxArray,i.index,i.sourceLayerIndex,o.index,ue,[ke,ke,ke,ke],wt,C,Ae,je,en,Z,i,_,A,R,x)};if(_t==="line")for(const We of k2(i.geometry,0,0,Ar,Ar)){const Nt=CL(We,xe,Je,a.vertical||Y,h,24,de,o.overscaling,Ar);for(const Dt of Nt)Y&&IL(o,Y.text,dt,Dt)||Tt(We,Dt)}else if(_t==="line-center"){for(const We of i.geometry)if(We.length>1){const Nt=SL(We,Je,a.vertical||Y,h,24,de);Nt&&Tt(We,Nt)}}else if(i.type==="Polygon")for(const We of nc(i.geometry,0)){const Nt=PL(We,16);Tt(We[0],new ul(Nt.x,Nt.y,0))}else if(i.type==="LineString")for(const We of i.geometry)Tt(We,new ul(We[0].x,We[0].y,0));else if(i.type==="Point")for(const We of i.geometry)for(const Nt of We)Tt([Nt],new ul(Nt.x,Nt.y,0))}function F2(o,i,a,h,g,_,x,w,C,A,R,L,N,Z,Y){const ee=function(Ae,xe,ke,je,Je,wt,en,_t){const dt=je.layout.get("text-rotate").evaluate(wt,{})*Math.PI/180,Bt=[];for(const Et of xe.positionedLines)for(const Tt of Et.positionedGlyphs){if(!Tt.rect)continue;const We=Tt.rect||{};let Nt=QS+1,Dt=!0,an=1,Kn=0;const qn=(Je||_t)&&Tt.vertical,Vr=Tt.metrics.advance*Tt.scale/2;if(_t&&xe.verticalizable&&(Kn=Et.lineOffset/2-(Tt.imageName?-(Or-Tt.metrics.width*Tt.scale)/2:(Tt.scale-1)*Or)),Tt.imageName){const Fn=en[Tt.imageName];Dt=Fn.sdf,an=Fn.pixelRatio,Nt=Ui/an}const Vo=Je?[Tt.x+Vr,Tt.y]:[0,0];let ii=Je?[0,0]:[Tt.x+Vr+ke[0],Tt.y+ke[1]-Kn],jr=[0,0];qn&&(jr=ii,ii=[0,0]);const Ei=Tt.metrics.isDoubleResolution?2:1,Ii=(Tt.metrics.left-Nt)*Tt.scale-Vr+ii[0],Ai=(-Tt.metrics.top-Nt)*Tt.scale+ii[1],_r=Ii+We.w/Ei*Tt.scale/an,Ur=Ai+We.h/Ei*Tt.scale/an,gi=new I(Ii,Ai),oi=new I(_r,Ai),Mi=new I(Ii,Ur),si=new I(_r,Ur);if(qn){const Fn=new I(-Vr,Vr-Gd),Yn=-Math.PI/2,ar=Or/2-Vr,no=new I(5-Gd-ar,-(Tt.imageName?ar:0)),dr=new I(...jr);gi._rotateAround(Yn,Fn)._add(no)._add(dr),oi._rotateAround(Yn,Fn)._add(no)._add(dr),Mi._rotateAround(Yn,Fn)._add(no)._add(dr),si._rotateAround(Yn,Fn)._add(no)._add(dr)}if(dt){const Fn=Math.sin(dt),Yn=Math.cos(dt),ar=[Yn,-Fn,Fn,Yn];gi._matMult(ar),oi._matMult(ar),Mi._matMult(ar),si._matMult(ar)}const wo=new I(0,0),Wi=new I(0,0);Bt.push({tl:gi,tr:oi,bl:Mi,br:si,tex:We,writingMode:xe.writingMode,glyphOffset:Vo,sectionIndex:Tt.sectionIndex,isSDF:Dt,pixelOffsetTL:wo,pixelOffsetBR:Wi,minFontScaleX:0,minFontScaleY:0})}return Bt}(0,a,w,g,_,x,h,o.allowVerticalPlacement),ue=o.textSizeData;let de=null;ue.kind==="source"?(de=[Es*g.layout.get("text-size").evaluate(x,{})],de[0]>al&&be(`${o.layerIds[0]}: Value for "text-size" is >= ${Kd}. Reduce your "text-size".`)):ue.kind==="composite"&&(de=[Es*Z.compositeTextSizes[0].evaluate(x,{},Y),Es*Z.compositeTextSizes[1].evaluate(x,{},Y)],(de[0]>al||de[1]>al)&&be(`${o.layerIds[0]}: Value for "text-size" is >= ${Kd}. Reduce your "text-size".`)),o.addSymbols(o.text,ee,de,w,_,x,A,i,C.lineStartIndex,C.lineLength,N,Y);for(const Ae of R)L[Ae]=o.text.placedSymbolArray.length-1;return 4*ee.length}function B2(o){for(const i in o)return o[i];return null}function IL(o,i,a,h){const g=o.compareText;if(i in g){const _=g[i];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<a)return!0}else g[i]=[];return g[i].push(h),!1}const $2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class sx{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,h]=new Uint8Array(i,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=$2[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[w]=new Uint32Array(i,4,1);return new sx(w,x,_,i)}constructor(i,a=64,h=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const _=$2.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,w=i*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-w%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+C,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+C),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+C,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=i)}add(i,a){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=a,h}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return ax(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,a,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:w}=this,C=[0,_.length-1,0],A=[];for(;C.length;){const R=C.pop()||0,L=C.pop()||0,N=C.pop()||0;if(L-N<=w){for(let ue=N;ue<=L;ue++){const de=x[2*ue],Ae=x[2*ue+1];de>=i&&de<=h&&Ae>=a&&Ae<=g&&A.push(_[ue])}continue}const Z=N+L>>1,Y=x[2*Z],ee=x[2*Z+1];Y>=i&&Y<=h&&ee>=a&&ee<=g&&A.push(_[Z]),(R===0?i<=Y:a<=ee)&&(C.push(N),C.push(Z-1),C.push(1-R)),(R===0?h>=Y:g>=ee)&&(C.push(Z+1),C.push(L),C.push(1-R))}return A}within(i,a,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,w=[0,g.length-1,0],C=[],A=h*h;for(;w.length;){const R=w.pop()||0,L=w.pop()||0,N=w.pop()||0;if(L-N<=x){for(let ue=N;ue<=L;ue++)V2(_[2*ue],_[2*ue+1],i,a)<=A&&C.push(g[ue]);continue}const Z=N+L>>1,Y=_[2*Z],ee=_[2*Z+1];V2(Y,ee,i,a)<=A&&C.push(g[Z]),(R===0?i-h<=Y:a-h<=ee)&&(w.push(N),w.push(Z-1),w.push(1-R)),(R===0?i+h>=Y:a+h>=ee)&&(w.push(Z+1),w.push(L),w.push(1-R))}return C}}function ax(o,i,a,h,g,_){if(g-h<=a)return;const x=h+g>>1;N2(o,i,x,h,g,_),ax(o,i,a,h,x-1,1-_),ax(o,i,a,x+1,g,1-_)}function N2(o,i,a,h,g,_){for(;g>h;){if(g-h>600){const A=g-h+1,R=a-h+1,L=Math.log(A),N=.5*Math.exp(2*L/3),Z=.5*Math.sqrt(L*N*(A-N)/A)*(R-A/2<0?-1:1);N2(o,i,a,Math.max(h,Math.floor(a-R*N/A+Z)),Math.min(g,Math.floor(a+(A-R)*N/A+Z)),_)}const x=i[2*a+_];let w=h,C=g;for(Jd(o,i,h,a),i[2*g+_]>x&&Jd(o,i,h,g);w<C;){for(Jd(o,i,w,C),w++,C--;i[2*w+_]<x;)w++;for(;i[2*C+_]>x;)C--}i[2*h+_]===x?Jd(o,i,h,C):(C++,Jd(o,i,C,g)),C<=a&&(h=C+1),a<=C&&(g=C-1)}}function Jd(o,i,a,h){lx(o,a,h),lx(i,2*a,2*h),lx(i,2*a+1,2*h+1)}function lx(o,i,a){const h=o[i];o[i]=o[a],o[a]=h}function V2(o,i,a,h){const g=o-a,_=i-h;return g*g+_*_}var ux;p.bg=void 0,(ux=p.bg||(p.bg={})).create="create",ux.load="load",ux.fullLoad="fullLoad";let Hm=null,Qd=[];const cx=1e3/60,hx="loadTime",dx="fullLoadTime",AL={mark(o){performance.mark(o)},frame(o){const i=o;Hm!=null&&Qd.push(i-Hm),Hm=i},clearMetrics(){Hm=null,Qd=[],performance.clearMeasures(hx),performance.clearMeasures(dx);for(const o in p.bg)performance.clearMarks(p.bg[o])},getPerformanceMetrics(){performance.measure(hx,p.bg.create,p.bg.load),performance.measure(dx,p.bg.create,p.bg.fullLoad);const o=performance.getEntriesByName(hx)[0].duration,i=performance.getEntriesByName(dx)[0].duration,a=Qd.length,h=1/(Qd.reduce((_,x)=>_+x,0)/a/1e3),g=Qd.filter(_=>_>cx).reduce((_,x)=>_+(x-cx)/cx,0);return{loadTime:o,fullLoadTime:i,fps:h,percentDroppedFrames:g/(a+g)*100,totalFrames:a}}};p.$=class extends O{},p.A=Mc,p.B=x_,p.C=function(o){if(Te==null){const i=o.navigator?o.navigator.userAgent:null;Te=!!o.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Te},p.D=Mt,p.E=mn,p.F=class{constructor(o,i){this.target=o,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new bL(()=>this.process()),this.subscription=function(a,h,g,_){return a.addEventListener(h,g,!1),{unsubscribe:()=>{a.removeEventListener(h,g,!1)}}}(this.target,"message",a=>this.receive(a)),this.globalScope=ze(self)?o:window}registerMessageHandler(o,i){this.messageHandlers[o]=i}sendAsync(o,i){return new Promise((a,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:a,reject:h},i&&i.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const w={id:g,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const _=[],x=Object.assign(Object.assign({},o),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Ka(o.data,_)});this.target.postMessage(x,{transfer:_})})}receive(o){const i=o.data,a=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[a];const h=this.abortControllers[a];return delete this.abortControllers[a],void(h&&h.abort())}if(ze(self)||i.mustQueue)return this.tasks[a]=i,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,i)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),i=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(o,i)}processTask(o,i){return l(this,void 0,void 0,function*(){if(i.type==="<response>"){const g=this.resolveRejects[o];return delete this.resolveRejects[o],g?void(i.error?g.reject(Xa(i.error)):g.resolve(Xa(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=Xa(i.data),h=new AbortController;this.abortControllers[o]=h;try{const g=yield this.messageHandlers[i.type](i.sourceMapId,a,h);this.completeTask(o,null,g)}catch(g){this.completeTask(o,g)}})}completeTask(o,i,a){const h=[];delete this.abortControllers[o];const g={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Ka(i):null,data:Ka(a,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},p.G=Qe,p.H=function(){var o=new Mc(16);return Mc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},p.I=G_,p.J=function(o,i,a){var h,g,_,x,w,C,A,R,L,N,Z,Y,ee=a[0],ue=a[1],de=a[2];return i===o?(o[12]=i[0]*ee+i[4]*ue+i[8]*de+i[12],o[13]=i[1]*ee+i[5]*ue+i[9]*de+i[13],o[14]=i[2]*ee+i[6]*ue+i[10]*de+i[14],o[15]=i[3]*ee+i[7]*ue+i[11]*de+i[15]):(g=i[1],_=i[2],x=i[3],w=i[4],C=i[5],A=i[6],R=i[7],L=i[8],N=i[9],Z=i[10],Y=i[11],o[0]=h=i[0],o[1]=g,o[2]=_,o[3]=x,o[4]=w,o[5]=C,o[6]=A,o[7]=R,o[8]=L,o[9]=N,o[10]=Z,o[11]=Y,o[12]=h*ee+w*ue+L*de+i[12],o[13]=g*ee+C*ue+N*de+i[13],o[14]=_*ee+A*ue+Z*de+i[14],o[15]=x*ee+R*ue+Y*de+i[15]),o},p.K=function(o,i,a){var h=a[0],g=a[1],_=a[2];return o[0]=i[0]*h,o[1]=i[1]*h,o[2]=i[2]*h,o[3]=i[3]*h,o[4]=i[4]*g,o[5]=i[5]*g,o[6]=i[6]*g,o[7]=i[7]*g,o[8]=i[8]*_,o[9]=i[9]*_,o[10]=i[10]*_,o[11]=i[11]*_,o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o},p.L=bS,p.M=function(o,i){const a={};for(let h=0;h<i.length;h++){const g=i[h];g in o&&(a[g]=o[g])}return a},p.N=ll,p.O=g2,p.P=I,p.Q=y2,p.R=xo,p.S=bo,p.T=bc,p.U=$,p.V=V,p.W=Oe,p.X=Ar,p.Y=S,p.Z=Xd,p._=l,p.a=Vt,p.a$=function(o,i){var a=o[0],h=o[1],g=o[2],_=o[3],x=o[4],w=o[5],C=o[6],A=o[7],R=o[8],L=o[9],N=o[10],Z=o[11],Y=o[12],ee=o[13],ue=o[14],de=o[15],Ae=i[0],xe=i[1],ke=i[2],je=i[3],Je=i[4],wt=i[5],en=i[6],_t=i[7],dt=i[8],Bt=i[9],Et=i[10],Tt=i[11],We=i[12],Nt=i[13],Dt=i[14],an=i[15];return Math.abs(a-Ae)<=ki*Math.max(1,Math.abs(a),Math.abs(Ae))&&Math.abs(h-xe)<=ki*Math.max(1,Math.abs(h),Math.abs(xe))&&Math.abs(g-ke)<=ki*Math.max(1,Math.abs(g),Math.abs(ke))&&Math.abs(_-je)<=ki*Math.max(1,Math.abs(_),Math.abs(je))&&Math.abs(x-Je)<=ki*Math.max(1,Math.abs(x),Math.abs(Je))&&Math.abs(w-wt)<=ki*Math.max(1,Math.abs(w),Math.abs(wt))&&Math.abs(C-en)<=ki*Math.max(1,Math.abs(C),Math.abs(en))&&Math.abs(A-_t)<=ki*Math.max(1,Math.abs(A),Math.abs(_t))&&Math.abs(R-dt)<=ki*Math.max(1,Math.abs(R),Math.abs(dt))&&Math.abs(L-Bt)<=ki*Math.max(1,Math.abs(L),Math.abs(Bt))&&Math.abs(N-Et)<=ki*Math.max(1,Math.abs(N),Math.abs(Et))&&Math.abs(Z-Tt)<=ki*Math.max(1,Math.abs(Z),Math.abs(Tt))&&Math.abs(Y-We)<=ki*Math.max(1,Math.abs(Y),Math.abs(We))&&Math.abs(ee-Nt)<=ki*Math.max(1,Math.abs(ee),Math.abs(Nt))&&Math.abs(ue-Dt)<=ki*Math.max(1,Math.abs(ue),Math.abs(Dt))&&Math.abs(de-an)<=ki*Math.max(1,Math.abs(de),Math.abs(an))},p.a0=En,p.a1=rx,p.a2=Ve,p.a3=o=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(a=>{i.onloadstart=()=>{a(i)};for(const h of o){const g=window.document.createElement("source");bt(h)||(i.crossOrigin="Anonymous"),g.src=h,i.appendChild(g)}})},p.a4=function(){return he++},p.a5=xt,p.a6=Fc,p.a7=gd,p.a8=hu,p.a9=S2,p.aA=function(o){if(o.type==="custom")return new xL(o);switch(o.type){case"background":return new yL(o);case"circle":return new iz(o);case"fill":return new bz(o);case"fill-extrusion":return new Oz(o);case"heatmap":return new sz(o);case"hillshade":return new lz(o);case"line":return new Wz(o);case"raster":return new _L(o);case"symbol":return new Nm(o)}},p.aB=Re,p.aC=function(o,i){if(!o)return[{command:"setStyle",args:[i]}];let a=[];try{if(!Yt(o.version,i.version))return[{command:"setStyle",args:[i]}];Yt(o.center,i.center)||a.push({command:"setCenter",args:[i.center]}),Yt(o.zoom,i.zoom)||a.push({command:"setZoom",args:[i.zoom]}),Yt(o.bearing,i.bearing)||a.push({command:"setBearing",args:[i.bearing]}),Yt(o.pitch,i.pitch)||a.push({command:"setPitch",args:[i.pitch]}),Yt(o.sprite,i.sprite)||a.push({command:"setSprite",args:[i.sprite]}),Yt(o.glyphs,i.glyphs)||a.push({command:"setGlyphs",args:[i.glyphs]}),Yt(o.transition,i.transition)||a.push({command:"setTransition",args:[i.transition]}),Yt(o.light,i.light)||a.push({command:"setLight",args:[i.light]}),Yt(o.terrain,i.terrain)||a.push({command:"setTerrain",args:[i.terrain]}),Yt(o.sky,i.sky)||a.push({command:"setSky",args:[i.sky]}),Yt(o.projection,i.projection)||a.push({command:"setProjection",args:[i.projection]});const h={},g=[];(function(x,w,C,A){let R;for(R in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,R)&&(Object.prototype.hasOwnProperty.call(w,R)||Ct(R,C,A));for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&(Object.prototype.hasOwnProperty.call(x,R)?Yt(x[R],w[R])||(x[R].type==="geojson"&&w[R].type==="geojson"&&bn(x,w,R)?yt(C,{command:"setGeoJSONSourceData",args:[R,w[R].data]}):Rn(R,w,C,A)):gn(R,w,C))})(o.sources,i.sources,g,h);const _=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?a.push({command:"removeLayer",args:[x.id]}):_.push(x)}),a=a.concat(g),function(x,w,C){w=w||[];const A=(x=x||[]).map(nt),R=w.map(nt),L=x.reduce(It,{}),N=w.reduce(It,{}),Z=A.slice(),Y=Object.create(null);let ee,ue,de,Ae,xe;for(let ke=0,je=0;ke<A.length;ke++)ee=A[ke],Object.prototype.hasOwnProperty.call(N,ee)?je++:(yt(C,{command:"removeLayer",args:[ee]}),Z.splice(Z.indexOf(ee,je),1));for(let ke=0,je=0;ke<R.length;ke++)ee=R[R.length-1-ke],Z[Z.length-1-ke]!==ee&&(Object.prototype.hasOwnProperty.call(L,ee)?(yt(C,{command:"removeLayer",args:[ee]}),Z.splice(Z.lastIndexOf(ee,Z.length-je),1)):je++,Ae=Z[Z.length-ke],yt(C,{command:"addLayer",args:[N[ee],Ae]}),Z.splice(Z.length-ke,0,ee),Y[ee]=!0);for(let ke=0;ke<R.length;ke++)if(ee=R[ke],ue=L[ee],de=N[ee],!Y[ee]&&!Yt(ue,de))if(Yt(ue.source,de.source)&&Yt(ue["source-layer"],de["source-layer"])&&Yt(ue.type,de.type)){for(xe in qe(ue.layout,de.layout,C,ee,null,"setLayoutProperty"),qe(ue.paint,de.paint,C,ee,null,"setPaintProperty"),Yt(ue.filter,de.filter)||yt(C,{command:"setFilter",args:[ee,de.filter]}),Yt(ue.minzoom,de.minzoom)&&Yt(ue.maxzoom,de.maxzoom)||yt(C,{command:"setLayerZoomRange",args:[ee,de.minzoom,de.maxzoom]}),ue)Object.prototype.hasOwnProperty.call(ue,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?qe(ue[xe],de[xe],C,ee,xe.slice(6),"setPaintProperty"):Yt(ue[xe],de[xe])||yt(C,{command:"setLayerProperty",args:[ee,xe,de[xe]]}));for(xe in de)Object.prototype.hasOwnProperty.call(de,xe)&&!Object.prototype.hasOwnProperty.call(ue,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?qe(ue[xe],de[xe],C,ee,xe.slice(6),"setPaintProperty"):Yt(ue[xe],de[xe])||yt(C,{command:"setLayerProperty",args:[ee,xe,de[xe]]}))}else yt(C,{command:"removeLayer",args:[ee]}),Ae=Z[Z.lastIndexOf(ee)+1],yt(C,{command:"addLayer",args:[de,Ae]})}(_,i.layers,a)}catch(h){console.warn("Unable to compute style diff:",h),a=[{command:"setStyle",args:[i]}]}return a},p.aD=function(o){const i=[],a=o.id;return a===void 0&&i.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&i.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&i.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),i},p.aE=function o(i,a){if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(let h=0;h<i.length;h++)if(!o(i[h],a[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&a!==null){if(typeof a!="object"||Object.keys(i).length!==Object.keys(a).length)return!1;for(const h in i)if(!o(i[h],a[h]))return!1;return!0}return i===a},p.aF=Me,p.aG=Ee,p.aH=class extends lu{constructor(o,i){super(o,i),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},p.aI=km,p.aJ=class extends lu{constructor(o,i){super(o,i),this.current=XR}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let i=1;i<16;i++)if(o[i]!==this.current[i]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},p.aK=cS,p.aL=hS,p.aM=on,p.aN=class extends lu{constructor(o,i){super(o,i),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},p.aO=class extends lu{constructor(o,i){super(o,i),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},p.aP=function(o,i,a,h,g,_,x){var w=1/(i-a),C=1/(h-g),A=1/(_-x);return o[0]=-2*w,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*C,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*A,o[11]=0,o[12]=(i+a)*w,o[13]=(g+h)*C,o[14]=(x+_)*A,o[15]=1,o},p.aQ=rz,p.aR=class extends Se{},p.aS=Zz,p.aT=class extends De{},p.aU=D_,p.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},p.aW=PS,p.aX=ti,p.aY=_o,p.aZ=class extends Rt{},p.a_=function(o,i){return o[0]===i[0]&&o[1]===i[1]&&o[2]===i[2]&&o[3]===i[3]&&o[4]===i[4]&&o[5]===i[5]&&o[6]===i[6]&&o[7]===i[7]&&o[8]===i[8]&&o[9]===i[9]&&o[10]===i[10]&&o[11]===i[11]&&o[12]===i[12]&&o[13]===i[13]&&o[14]===i[14]&&o[15]===i[15]},p.aa=function(o){const i={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,g,_)=>{const x=g||_;return i[h]=!x||x.toLowerCase(),""}),i["max-age"]){const a=parseInt(i["max-age"],10);isNaN(a)?delete i["max-age"]:i["max-age"]=a}return i},p.ab=function(o,i){const a=[];for(const h in o)h in i||a.push(h);return a},p.ac=ne,p.ad=function(o,i,a){var h=Math.sin(a),g=Math.cos(a),_=i[0],x=i[1],w=i[2],C=i[3],A=i[4],R=i[5],L=i[6],N=i[7];return i!==o&&(o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15]),o[0]=_*g+A*h,o[1]=x*g+R*h,o[2]=w*g+L*h,o[3]=C*g+N*h,o[4]=A*g-_*h,o[5]=R*g-x*h,o[6]=L*g-w*h,o[7]=N*g-C*h,o},p.ae=function(o){var i=new Mc(16);return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i},p.af=Mm,p.ag=function(o,i){let a=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=o,w=g?ne(Ti.interpolationFactor(g,i,_,x),0,1):0;o.kind==="camera"?h=Ci.number(o.minSize,o.maxSize,w):a=w}return{uSizeT:a,uSize:h}},p.ai=function(o,{uSize:i,uSizeT:a},{lowerSize:h,upperSize:g}){return o.kind==="source"?h/Es:o.kind==="composite"?Ci.number(h/Es,g/Es,a):i},p.aj=Y_,p.ak=function(o,i,a,h){const g=i.y-o.y,_=i.x-o.x,x=h.y-a.y,w=h.x-a.x,C=x*_-w*g;if(C===0)return null;const A=(w*(o.y-a.y)-x*(o.x-a.x))/C;return new I(o.x+A*_,o.y+A*g)},p.al=k2,p.am=mS,p.an=R_,p.ao=function(o){let i=1/0,a=1/0,h=-1/0,g=-1/0;for(const _ of o)i=Math.min(i,_.x),a=Math.min(a,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return[i,a,h,g]},p.ap=Or,p.ar=X_,p.as=function(o,i){var a=i[0],h=i[1],g=i[2],_=i[3],x=i[4],w=i[5],C=i[6],A=i[7],R=i[8],L=i[9],N=i[10],Z=i[11],Y=i[12],ee=i[13],ue=i[14],de=i[15],Ae=a*w-h*x,xe=a*C-g*x,ke=a*A-_*x,je=h*C-g*w,Je=h*A-_*w,wt=g*A-_*C,en=R*ee-L*Y,_t=R*ue-N*Y,dt=R*de-Z*Y,Bt=L*ue-N*ee,Et=L*de-Z*ee,Tt=N*de-Z*ue,We=Ae*Tt-xe*Et+ke*Bt+je*dt-Je*_t+wt*en;return We?(o[0]=(w*Tt-C*Et+A*Bt)*(We=1/We),o[1]=(g*Et-h*Tt-_*Bt)*We,o[2]=(ee*wt-ue*Je+de*je)*We,o[3]=(N*Je-L*wt-Z*je)*We,o[4]=(C*dt-x*Tt-A*_t)*We,o[5]=(a*Tt-g*dt+_*_t)*We,o[6]=(ue*ke-Y*wt-de*xe)*We,o[7]=(R*wt-N*ke+Z*xe)*We,o[8]=(x*Et-w*dt+A*en)*We,o[9]=(h*dt-a*Et-_*en)*We,o[10]=(Y*Je-ee*ke+de*Ae)*We,o[11]=(L*ke-R*Je-Z*Ae)*We,o[12]=(w*_t-x*Bt-C*en)*We,o[13]=(a*Bt-h*_t+g*en)*We,o[14]=(ee*xe-Y*je-ue*Ae)*We,o[15]=(R*je-L*xe+N*Ae)*We,o):null},p.at=ox,p.au=K_,p.av=sx,p.aw=function(){const o={},i=Ce.$version;for(const a in Ce.$root){const h=Ce.$root[a];if(h.required){let g=null;g=a==="version"?i:h.type==="array"?[]:{},g!=null&&(o[a]=g)}}return o},p.ax=Ad,p.ay=Xt,p.az=function(o){o=o.slice();const i=Object.create(null);for(let a=0;a<o.length;a++)i[o[a].id]=o[a];for(let a=0;a<o.length;a++)"ref"in o[a]&&(o[a]=mt(o[a],i[o[a].ref]));return o},p.b=Ue,p.b0=function(o,i){return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o},p.b1=function(o,i,a){return o[0]=i[0]*a[0],o[1]=i[1]*a[1],o[2]=i[2]*a[2],o[3]=i[3]*a[3],o},p.b2=function(o,i){return o[0]*i[0]+o[1]*i[1]+o[2]*i[2]+o[3]*i[3]},p.b3=re,p.b4=x2,p.b5=v2,p.b6=function(o,i,a,h,g){var _,x=1/Math.tan(i/2);return o[0]=x/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,g!=null&&g!==1/0?(o[10]=(g+h)*(_=1/(h-g)),o[14]=2*g*h*_):(o[10]=-1,o[14]=-2*h),o},p.b7=function(o,i,a){var h=Math.sin(a),g=Math.cos(a),_=i[4],x=i[5],w=i[6],C=i[7],A=i[8],R=i[9],L=i[10],N=i[11];return i!==o&&(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15]),o[4]=_*g+A*h,o[5]=x*g+R*h,o[6]=w*g+L*h,o[7]=C*g+N*h,o[8]=A*g-_*h,o[9]=R*g-x*h,o[10]=L*g-w*h,o[11]=N*g-C*h,o},p.b8=B,p.b9=G,p.bA=qS,p.bB=function(o){return o.message===ut},p.bC=Ua,p.bD=Vi,p.ba=function(o){return o*Math.PI/180},p.bb=function(o,i){const{x:a,y:h}=Xd.fromLngLat(i);return!(o<0||o>25||h<0||h>=1||a<0||a>=1)},p.bc=function(o,i){return o[0]=i[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=i[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},p.bd=class extends z{},p.be=tx,p.bf=AL,p.bh=kt,p.bi=function(o,i){Vt.REGISTERED_PROTOCOLS[o]=i},p.bj=function(o){delete Vt.REGISTERED_PROTOCOLS[o]},p.bk=function(o,i){const a={};for(let g=0;g<o.length;g++){const _=i&&i[o[g].id]||mm(o[g]);i&&(i[o[g].id]=_);let x=a[_];x||(x=a[_]=[]),x.push(o[g])}const h=[];for(const g in a)h.push(a[g]);return h},p.bl=Pt,p.bm=w2,p.bn=C2,p.bo=t2,p.bp=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Ar/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const i=o.bucket.layers[0],a=i.layout,h=i._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new rr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new rr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new rr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:R}=o.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new rr(A),o.canonical),h["text-size"].possiblyEvaluate(new rr(R),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:R}=o.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new rr(A),o.canonical),h["icon-size"].possiblyEvaluate(new rr(R),o.canonical)]}const _=a.get("text-line-height")*Or,x=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",w=a.get("text-keep-upright"),C=a.get("text-size");for(const A of o.bucket.features){const R=a.get("text-font").evaluate(A,{},o.canonical).join(","),L=C.evaluate(A,{},o.canonical),N=g.layoutTextSize.evaluate(A,{},o.canonical),Z=g.layoutIconSize.evaluate(A,{},o.canonical),Y={horizontal:{},vertical:void 0},ee=A.text;let ue,de=[0,0];if(ee){const ke=ee.toString(),je=a.get("text-letter-spacing").evaluate(A,{},o.canonical)*Or,Je=b_(ke)?je:0,wt=a.get("text-anchor").evaluate(A,{},o.canonical),en=O2(i,A,o.canonical);if(!en){const Et=a.get("text-radial-offset").evaluate(A,{},o.canonical);de=Et?D2(wt,[Et*Or,ix]):a.get("text-offset").evaluate(A,{},o.canonical).map(Tt=>Tt*Or)}let _t=x?"center":a.get("text-justify").evaluate(A,{},o.canonical);const dt=a.get("symbol-placement")==="point"?a.get("text-max-width").evaluate(A,{},o.canonical)*Or:1/0,Bt=()=>{o.bucket.allowVerticalPlacement&&Md(ke)&&(Y.vertical=Fm(ee,o.glyphMap,o.glyphPositions,o.imagePositions,R,dt,_,wt,"left",Je,de,p.ah.vertical,!0,N,L))};if(!x&&en){const Et=new Set;if(_t==="auto")for(let We=0;We<en.values.length;We+=2)Et.add(ox(en.values[We]));else Et.add(_t);let Tt=!1;for(const We of Et)if(!Y.horizontal[We])if(Tt)Y.horizontal[We]=Y.horizontal[0];else{const Nt=Fm(ee,o.glyphMap,o.glyphPositions,o.imagePositions,R,dt,_,"center",We,Je,de,p.ah.horizontal,!1,N,L);Nt&&(Y.horizontal[We]=Nt,Tt=Nt.positionedLines.length===1)}Bt()}else{_t==="auto"&&(_t=ox(wt));const Et=Fm(ee,o.glyphMap,o.glyphPositions,o.imagePositions,R,dt,_,wt,_t,Je,de,p.ah.horizontal,!1,N,L);Et&&(Y.horizontal[_t]=Et),Bt(),Md(ke)&&x&&w&&(Y.vertical=Fm(ee,o.glyphMap,o.glyphPositions,o.imagePositions,R,dt,_,wt,_t,Je,de,p.ah.vertical,!1,N,L))}}let Ae=!1;if(A.icon&&A.icon.name){const ke=o.imageMap[A.icon.name];ke&&(ue=dL(o.imagePositions[A.icon.name],a.get("icon-offset").evaluate(A,{},o.canonical),a.get("icon-anchor").evaluate(A,{},o.canonical)),Ae=!!ke.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Ae:o.bucket.sdfIcons!==Ae&&be("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ke.pixelRatio!==o.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const xe=B2(Y.horizontal)||Y.vertical;o.bucket.iconsInText=!!xe&&xe.iconsInText,(xe||ue)&&EL(o.bucket,A,Y,ue,o.imageMap,g,N,Z,de,Ae,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},p.bq=U_,p.br=N_,p.bs=j_,p.bt=ol,p.bu=H_,p.bv=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},p.bw=function(o,i,a,h,g){return l(this,void 0,void 0,function*(){if(V())try{return yield Oe(o,i,a,h,g)}catch{}return function(_,x,w,C,A){const R=_.width,L=_.height;Xe&&Ye||(Xe=new OffscreenCanvas(R,L),Ye=Xe.getContext("2d",{willReadFrequently:!0})),Xe.width=R,Xe.height=L,Ye.drawImage(_,0,0,R,L);const N=Ye.getImageData(x,w,C,A);return Ye.clearRect(0,0,R,L),N.data}(o,i,a,h,g)})},p.bx=b2,p.by=b,p.bz=T,p.c=Kt,p.d=o=>l(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(i)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),p.e=ae,p.f=o=>new Promise((i,a)=>{const h=new Image;h.onload=()=>{i(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Le})},h.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(g):Le}),p.g=tt,p.h=(o,i)=>jt(ae(o,{type:"json"}),i),p.i=ze,p.j=Wt,p.k=Ut,p.l=(o,i)=>jt(ae(o,{type:"arrayBuffer"}),i),p.m=jt,p.n=function(o){return new H_(o).readFields(oL,[])},p.o=Nd,p.p=e2,p.q=v,p.r=__,p.s=bt,p.t=Ed,p.u=ua,p.v=Ce,p.w=be,p.x=function([o,i,a]){return i+=90,i*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(i)*Math.sin(a),y:o*Math.sin(i)*Math.sin(a),z:o*Math.cos(a)}},p.y=Ci,p.z=rr}),c("worker",["./shared"],function(p){class l{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,j){for(const ie of U){this._layerConfigs[ie.id]=ie;const ge=this._layers[ie.id]=p.aA(ie);ge._featureFilter=p.a7(ge.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(const ie of j)delete this.keyCache[ie],delete this._layerConfigs[ie],delete this._layers[ie];this.familiesBySource={};const Q=p.bk(Object.values(this._layerConfigs),this.keyCache);for(const ie of Q){const ge=ie.map(Fe=>this._layers[Fe.id]),we=ge[0];if(we.visibility==="none")continue;const Ie=we.source||"";let me=this.familiesBySource[Ie];me||(me=this.familiesBySource[Ie]={});const $e=we.sourceLayer||"_geojsonTileLayer";let Ze=me[$e];Ze||(Ze=me[$e]=[]),Ze.push(ge)}}}class b{constructor(U){const j={},Q=[];for(const Ie in U){const me=U[Ie],$e=j[Ie]={};for(const Ze in me){const Fe=me[+Ze];if(!Fe||Fe.bitmap.width===0||Fe.bitmap.height===0)continue;const rt={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};Q.push(rt),$e[Ze]={rect:rt,metrics:Fe.metrics}}}const{w:ie,h:ge}=p.p(Q),we=new p.o({width:ie||1,height:ge||1});for(const Ie in U){const me=U[Ie];for(const $e in me){const Ze=me[+$e];if(!Ze||Ze.bitmap.width===0||Ze.bitmap.height===0)continue;const Fe=j[Ie][$e].rect;p.o.copy(Ze.bitmap,we,{x:0,y:0},{x:Fe.x+1,y:Fe.y+1},Ze.bitmap)}}this.image=we,this.positions=j}}p.bl("GlyphAtlas",b);class T{constructor(U){this.tileID=new p.S(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId,this.inFlightDependencies=[]}parse(U,j,Q,ie){return p._(this,void 0,void 0,function*(){this.status="parsing",this.data=U,this.collisionBoxArray=new p.a5;const ge=new p.bm(Object.keys(U.layers).sort()),we=new p.bn(this.tileID,this.promoteId);we.bucketLayerIDs=[];const Ie={},me={featureIndex:we,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q},$e=j.familiesBySource[this.source];for(const fn in $e){const Be=U.layers[fn];if(!Be)continue;Be.version===1&&p.w(`Vector tile source "${this.source}" layer "${fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ne=ge.encode(fn),ht=[];for(let $t=0;$t<Be.length;$t++){const Jt=Be.feature($t),lr=we.getId(Jt,fn);ht.push({feature:Jt,id:lr,index:$t,sourceLayerIndex:Ne})}for(const $t of $e[fn]){const Jt=$t[0];Jt.source!==this.source&&p.w(`layer.source = ${Jt.source} does not equal this.source = ${this.source}`),Jt.minzoom&&this.zoom<Math.floor(Jt.minzoom)||Jt.maxzoom&&this.zoom>=Jt.maxzoom||Jt.visibility!=="none"&&(k($t,this.zoom,Q),(Ie[Jt.id]=Jt.createBucket({index:we.bucketLayerIDs.length,layers:$t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ne,sourceID:this.source})).populate(ht,me,this.tileID.canonical),we.bucketLayerIDs.push($t.map(lr=>lr.id)))}}const Ze=p.aF(me.glyphDependencies,fn=>Object.keys(fn).map(Number));this.inFlightDependencies.forEach(fn=>fn==null?void 0:fn.abort()),this.inFlightDependencies=[];let Fe=Promise.resolve({});if(Object.keys(Ze).length){const fn=new AbortController;this.inFlightDependencies.push(fn),Fe=ie.sendAsync({type:"GG",data:{stacks:Ze,source:this.source,tileID:this.tileID,type:"glyphs"}},fn)}const rt=Object.keys(me.iconDependencies);let Lt=Promise.resolve({});if(rt.length){const fn=new AbortController;this.inFlightDependencies.push(fn),Lt=ie.sendAsync({type:"GI",data:{icons:rt,source:this.source,tileID:this.tileID,type:"icons"}},fn)}const Gt=Object.keys(me.patternDependencies);let wn=Promise.resolve({});if(Gt.length){const fn=new AbortController;this.inFlightDependencies.push(fn),wn=ie.sendAsync({type:"GI",data:{icons:Gt,source:this.source,tileID:this.tileID,type:"patterns"}},fn)}const[Ft,rn,dn]=yield Promise.all([Fe,Lt,wn]),cr=new b(Ft),Un=new p.bo(rn,dn);for(const fn in Ie){const Be=Ie[fn];Be instanceof p.a6?(k(Be.layers,this.zoom,Q),p.bp({bucket:Be,glyphMap:Ft,glyphPositions:cr.positions,imageMap:rn,imagePositions:Un.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Be.hasPattern&&(Be instanceof p.bq||Be instanceof p.br||Be instanceof p.bs)&&(k(Be.layers,this.zoom,Q),Be.addFeatures(me,this.tileID.canonical,Un.patternPositions))}return this.status="done",{buckets:Object.values(Ie).filter(fn=>!fn.isEmpty()),featureIndex:we,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:cr.image,imageAtlas:Un,glyphMap:this.returnDependencies?Ft:null,iconMap:this.returnDependencies?rn:null,glyphPositions:this.returnDependencies?cr.positions:null}})}}function k(se,U,j){const Q=new p.z(U);for(const ie of se)ie.recalculate(Q,j)}class I{constructor(U,j,Q){this.actor=U,this.layerIndex=j,this.availableImages=Q,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(U,j){return p._(this,void 0,void 0,function*(){const Q=yield p.l(U.request,j);try{return{vectorTile:new p.bt.VectorTile(new p.bu(Q.data)),rawData:Q.data,cacheControl:Q.cacheControl,expires:Q.expires}}catch(ie){const ge=new Uint8Array(Q.data);let we=`Unable to parse the tile at ${U.request.url}, `;throw we+=ge[0]===31&&ge[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ie.message}`,new Error(we)}})}loadTile(U){return p._(this,void 0,void 0,function*(){const j=U.uid,Q=!!(U&&U.request&&U.request.collectResourceTiming)&&new p.bv(U.request),ie=new T(U);this.loading[j]=ie;const ge=new AbortController;ie.abort=ge;try{const we=yield this.loadVectorTile(U,ge);if(delete this.loading[j],!we)return null;const Ie=we.rawData,me={};we.expires&&(me.expires=we.expires),we.cacheControl&&(me.cacheControl=we.cacheControl);const $e={};if(Q){const Fe=Q.finish();Fe&&($e.resourceTiming=JSON.parse(JSON.stringify(Fe)))}ie.vectorTile=we.vectorTile;const Ze=ie.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[j]=ie,this.fetching[j]={rawTileData:Ie,cacheControl:me,resourceTiming:$e};try{const Fe=yield Ze;return p.e({rawTileData:Ie.slice(0)},Fe,me,$e)}finally{delete this.fetching[j]}}catch(we){throw delete this.loading[j],ie.status="done",this.loaded[j]=ie,we}})}reloadTile(U){return p._(this,void 0,void 0,function*(){const j=U.uid;if(!this.loaded||!this.loaded[j])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Q=this.loaded[j];if(Q.showCollisionBoxes=U.showCollisionBoxes,Q.status==="parsing"){const ie=yield Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor);let ge;if(this.fetching[j]){const{rawTileData:we,cacheControl:Ie,resourceTiming:me}=this.fetching[j];delete this.fetching[j],ge=p.e({rawTileData:we.slice(0)},ie,Ie,me)}else ge=ie;return ge}if(Q.status==="done"&&Q.vectorTile)return Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(U){return p._(this,void 0,void 0,function*(){const j=this.loading,Q=U.uid;j&&j[Q]&&j[Q].abort&&(j[Q].abort.abort(),delete j[Q])})}removeTile(U){return p._(this,void 0,void 0,function*(){this.loaded&&this.loaded[U.uid]&&delete this.loaded[U.uid]})}}class M{constructor(){this.loaded={}}loadTile(U){return p._(this,void 0,void 0,function*(){const{uid:j,encoding:Q,rawImageData:ie,redFactor:ge,greenFactor:we,blueFactor:Ie,baseShift:me}=U,$e=ie.width+2,Ze=ie.height+2,Fe=p.b(ie)?new p.R({width:$e,height:Ze},yield p.bw(ie,-1,-1,$e,Ze)):ie,rt=new p.bx(j,Fe,Q,ge,we,Ie,me);return this.loaded=this.loaded||{},this.loaded[j]=rt,rt})}removeTile(U){const j=this.loaded,Q=U.uid;j&&j[Q]&&delete j[Q]}}function D(se,U){if(se.length!==0){H(se[0],U);for(var j=1;j<se.length;j++)H(se[j],!U)}}function H(se,U){for(var j=0,Q=0,ie=0,ge=se.length,we=ge-1;ie<ge;we=ie++){var Ie=(se[ie][0]-se[we][0])*(se[we][1]+se[ie][1]),me=j+Ie;Q+=Math.abs(j)>=Math.abs(Ie)?j-me+Ie:Ie-me+j,j=me}j+Q>=0!=!!U&&se.reverse()}var q=p.by(function se(U,j){var Q,ie=U&&U.type;if(ie==="FeatureCollection")for(Q=0;Q<U.features.length;Q++)se(U.features[Q],j);else if(ie==="GeometryCollection")for(Q=0;Q<U.geometries.length;Q++)se(U.geometries[Q],j);else if(ie==="Feature")se(U.geometry,j);else if(ie==="Polygon")D(U.coordinates,j);else if(ie==="MultiPolygon")for(Q=0;Q<U.coordinates.length;Q++)D(U.coordinates[Q],j);return U});const J=p.bt.VectorTileFeature.prototype.toGeoJSON;var $={exports:{}},V=p.bz,B=p.bt.VectorTileFeature,G=ne;function ne(se,U){this.options=U||{},this.features=se,this.length=se.length}function re(se,U){this.id=typeof se.id=="number"?se.id:void 0,this.type=se.type,this.rawGeometry=se.type===1?[se.geometry]:se.geometry,this.properties=se.tags,this.extent=U||4096}ne.prototype.feature=function(se){return new re(this.features[se],this.options.extent)},re.prototype.loadGeometry=function(){var se=this.rawGeometry;this.geometry=[];for(var U=0;U<se.length;U++){for(var j=se[U],Q=[],ie=0;ie<j.length;ie++)Q.push(new V(j[ie][0],j[ie][1]));this.geometry.push(Q)}return this.geometry},re.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var se=this.geometry,U=1/0,j=-1/0,Q=1/0,ie=-1/0,ge=0;ge<se.length;ge++)for(var we=se[ge],Ie=0;Ie<we.length;Ie++){var me=we[Ie];U=Math.min(U,me.x),j=Math.max(j,me.x),Q=Math.min(Q,me.y),ie=Math.max(ie,me.y)}return[U,Q,j,ie]},re.prototype.toGeoJSON=B.prototype.toGeoJSON;var ae=p.bA,he=G;function Me(se){var U=new ae;return function(j,Q){for(var ie in j.layers)Q.writeMessage(3,Ee,j.layers[ie])}(se,U),U.finish()}function Ee(se,U){var j;U.writeVarintField(15,se.version||1),U.writeStringField(1,se.name||""),U.writeVarintField(5,se.extent||4096);var Q={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<se.length;j++)Q.feature=se.feature(j),U.writeMessage(2,Re,Q);var ie=Q.keys;for(j=0;j<ie.length;j++)U.writeStringField(3,ie[j]);var ge=Q.values;for(j=0;j<ge.length;j++)U.writeMessage(4,Te,ge[j])}function Re(se,U){var j=se.feature;j.id!==void 0&&U.writeVarintField(1,j.id),U.writeMessage(2,K,se),U.writeVarintField(3,j.type),U.writeMessage(4,ze,j)}function K(se,U){var j=se.feature,Q=se.keys,ie=se.values,ge=se.keycache,we=se.valuecache;for(var Ie in j.properties){var me=j.properties[Ie],$e=ge[Ie];if(me!==null){$e===void 0&&(Q.push(Ie),ge[Ie]=$e=Q.length-1),U.writeVarint($e);var Ze=typeof me;Ze!=="string"&&Ze!=="boolean"&&Ze!=="number"&&(me=JSON.stringify(me));var Fe=Ze+":"+me,rt=we[Fe];rt===void 0&&(ie.push(me),we[Fe]=rt=ie.length-1),U.writeVarint(rt)}}}function be(se,U){return(U<<3)+(7&se)}function _e(se){return se<<1^se>>31}function ze(se,U){for(var j=se.loadGeometry(),Q=se.type,ie=0,ge=0,we=j.length,Ie=0;Ie<we;Ie++){var me=j[Ie],$e=1;Q===1&&($e=me.length),U.writeVarint(be(1,$e));for(var Ze=Q===3?me.length-1:me.length,Fe=0;Fe<Ze;Fe++){Fe===1&&Q!==1&&U.writeVarint(be(2,Ze-1));var rt=me[Fe].x-ie,Lt=me[Fe].y-ge;U.writeVarint(_e(rt)),U.writeVarint(_e(Lt)),ie+=rt,ge+=Lt}Q===3&&U.writeVarint(be(7,1))}}function Te(se,U){var j=typeof se;j==="string"?U.writeStringField(1,se):j==="boolean"?U.writeBooleanField(7,se):j==="number"&&(se%1!=0?U.writeDoubleField(3,se):se<0?U.writeSVarintField(6,se):U.writeVarintField(5,se))}$.exports=Me,$.exports.fromVectorTileJs=Me,$.exports.fromGeojsonVt=function(se,U){U=U||{};var j={};for(var Q in se)j[Q]=new he(se[Q].features,U),j[Q].name=Q,j[Q].version=U.version,j[Q].extent=U.extent;return Me({layers:j})},$.exports.GeoJSONWrapper=he;var Ue=p.by($.exports);const Le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:se=>se},Oe=Math.fround||(Xe=new Float32Array(1),se=>(Xe[0]=+se,Xe[0]));var Xe;const Ye=3,ut=5,Kt=6;class Vt{constructor(U){this.options=Object.assign(Object.create(Le),U),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(U){const{log:j,minZoom:Q,maxZoom:ie}=this.options;j&&console.time("total time");const ge=`prepare ${U.length} points`;j&&console.time(ge),this.points=U;const we=[];for(let me=0;me<U.length;me++){const $e=U[me];if(!$e.geometry)continue;const[Ze,Fe]=$e.geometry.coordinates,rt=Oe(kt(Ze)),Lt=Oe(Xt(Fe));we.push(rt,Lt,1/0,me,-1,1),this.options.reduce&&we.push(0)}let Ie=this.trees[ie+1]=this._createTree(we);j&&console.timeEnd(ge);for(let me=ie;me>=Q;me--){const $e=+Date.now();Ie=this.trees[me]=this._createTree(this._cluster(Ie,me)),j&&console.log("z%d: %d clusters in %dms",me,Ie.numItems,+Date.now()-$e)}return j&&console.timeEnd("total time"),this}getClusters(U,j){let Q=((U[0]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,U[1]));let ge=U[2]===180?180:((U[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)Q=-180,ge=180;else if(Q>ge){const Fe=this.getClusters([Q,ie,180,we],j),rt=this.getClusters([-180,ie,ge,we],j);return Fe.concat(rt)}const Ie=this.trees[this._limitZoom(j)],me=Ie.range(kt(Q),Xt(we),kt(ge),Xt(ie)),$e=Ie.data,Ze=[];for(const Fe of me){const rt=this.stride*Fe;Ze.push($e[rt+ut]>1?tt($e,rt,this.clusterProps):this.points[$e[rt+Ye]])}return Ze}getChildren(U){const j=this._getOriginId(U),Q=this._getOriginZoom(U),ie="No cluster with the specified id.",ge=this.trees[Q];if(!ge)throw new Error(ie);const we=ge.data;if(j*this.stride>=we.length)throw new Error(ie);const Ie=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),me=ge.within(we[j*this.stride],we[j*this.stride+1],Ie),$e=[];for(const Ze of me){const Fe=Ze*this.stride;we[Fe+4]===U&&$e.push(we[Fe+ut]>1?tt(we,Fe,this.clusterProps):this.points[we[Fe+Ye]])}if($e.length===0)throw new Error(ie);return $e}getLeaves(U,j,Q){const ie=[];return this._appendLeaves(ie,U,j=j||10,Q=Q||0,0),ie}getTile(U,j,Q){const ie=this.trees[this._limitZoom(U)],ge=Math.pow(2,U),{extent:we,radius:Ie}=this.options,me=Ie/we,$e=(Q-me)/ge,Ze=(Q+1+me)/ge,Fe={features:[]};return this._addTileFeatures(ie.range((j-me)/ge,$e,(j+1+me)/ge,Ze),ie.data,j,Q,ge,Fe),j===0&&this._addTileFeatures(ie.range(1-me/ge,$e,1,Ze),ie.data,ge,Q,ge,Fe),j===ge-1&&this._addTileFeatures(ie.range(0,$e,me/ge,Ze),ie.data,-1,Q,ge,Fe),Fe.features.length?Fe:null}getClusterExpansionZoom(U){let j=this._getOriginZoom(U)-1;for(;j<=this.options.maxZoom;){const Q=this.getChildren(U);if(j++,Q.length!==1)break;U=Q[0].properties.cluster_id}return j}_appendLeaves(U,j,Q,ie,ge){const we=this.getChildren(j);for(const Ie of we){const me=Ie.properties;if(me&&me.cluster?ge+me.point_count<=ie?ge+=me.point_count:ge=this._appendLeaves(U,me.cluster_id,Q,ie,ge):ge<ie?ge++:U.push(Ie),U.length===Q)break}return ge}_createTree(U){const j=new p.av(U.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<U.length;Q+=this.stride)j.add(U[Q],U[Q+1]);return j.finish(),j.data=U,j}_addTileFeatures(U,j,Q,ie,ge,we){for(const Ie of U){const me=Ie*this.stride,$e=j[me+ut]>1;let Ze,Fe,rt;if($e)Ze=Qe(j,me,this.clusterProps),Fe=j[me],rt=j[me+1];else{const wn=this.points[j[me+Ye]];Ze=wn.properties;const[Ft,rn]=wn.geometry.coordinates;Fe=kt(Ft),rt=Xt(rn)}const Lt={type:1,geometry:[[Math.round(this.options.extent*(Fe*ge-Q)),Math.round(this.options.extent*(rt*ge-ie))]],tags:Ze};let Gt;Gt=$e||this.options.generateId?j[me+Ye]:this.points[j[me+Ye]].id,Gt!==void 0&&(Lt.id=Gt),we.features.push(Lt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,j){const{radius:Q,extent:ie,reduce:ge,minPoints:we}=this.options,Ie=Q/(ie*Math.pow(2,j)),me=U.data,$e=[],Ze=this.stride;for(let Fe=0;Fe<me.length;Fe+=Ze){if(me[Fe+2]<=j)continue;me[Fe+2]=j;const rt=me[Fe],Lt=me[Fe+1],Gt=U.within(me[Fe],me[Fe+1],Ie),wn=me[Fe+ut];let Ft=wn;for(const rn of Gt){const dn=rn*Ze;me[dn+2]>j&&(Ft+=me[dn+ut])}if(Ft>wn&&Ft>=we){let rn,dn=rt*wn,cr=Lt*wn,Un=-1;const fn=((Fe/Ze|0)<<5)+(j+1)+this.points.length;for(const Be of Gt){const Ne=Be*Ze;if(me[Ne+2]<=j)continue;me[Ne+2]=j;const ht=me[Ne+ut];dn+=me[Ne]*ht,cr+=me[Ne+1]*ht,me[Ne+4]=fn,ge&&(rn||(rn=this._map(me,Fe,!0),Un=this.clusterProps.length,this.clusterProps.push(rn)),ge(rn,this._map(me,Ne)))}me[Fe+4]=fn,$e.push(dn/Ft,cr/Ft,1/0,fn,-1,Ft),ge&&$e.push(Un)}else{for(let rn=0;rn<Ze;rn++)$e.push(me[Fe+rn]);if(Ft>1)for(const rn of Gt){const dn=rn*Ze;if(!(me[dn+2]<=j)){me[dn+2]=j;for(let cr=0;cr<Ze;cr++)$e.push(me[dn+cr])}}}}return $e}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,j,Q){if(U[j+ut]>1){const we=this.clusterProps[U[j+Kt]];return Q?Object.assign({},we):we}const ie=this.points[U[j+Ye]].properties,ge=this.options.map(ie);return Q&&ge===ie?Object.assign({},ge):ge}}function tt(se,U,j){return{type:"Feature",id:se[U+Ye],properties:Qe(se,U,j),geometry:{type:"Point",coordinates:[(Q=se[U],360*(Q-.5)),jt(se[U+1])]}};var Q}function Qe(se,U,j){const Q=se[U+ut],ie=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,ge=se[U+Kt],we=ge===-1?{}:Object.assign({},j[ge]);return Object.assign(we,{cluster:!0,cluster_id:se[U+Ye],point_count:Q,point_count_abbreviated:ie})}function kt(se){return se/360+.5}function Xt(se){const U=Math.sin(se*Math.PI/180),j=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return j<0?0:j>1?1:j}function jt(se){const U=(180-360*se)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function bt(se,U,j,Q){let ie=Q;const ge=U+(j-U>>1);let we,Ie=j-U;const me=se[U],$e=se[U+1],Ze=se[j],Fe=se[j+1];for(let rt=U+3;rt<j;rt+=3){const Lt=Qt(se[rt],se[rt+1],me,$e,Ze,Fe);if(Lt>ie)we=rt,ie=Lt;else if(Lt===ie){const Gt=Math.abs(rt-ge);Gt<Ie&&(we=rt,Ie=Gt)}}ie>Q&&(we-U>3&&bt(se,U,we,Q),se[we+2]=ie,j-we>3&&bt(se,we,j,Q))}function Qt(se,U,j,Q,ie,ge){let we=ie-j,Ie=ge-Q;if(we!==0||Ie!==0){const me=((se-j)*we+(U-Q)*Ie)/(we*we+Ie*Ie);me>1?(j=ie,Q=ge):me>0&&(j+=we*me,Q+=Ie*me)}return we=se-j,Ie=U-Q,we*we+Ie*Ie}function Ot(se,U,j,Q){const ie={id:se??null,type:U,geometry:j,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(U==="Point"||U==="MultiPoint"||U==="LineString")Ut(ie,j);else if(U==="Polygon")Ut(ie,j[0]);else if(U==="MultiLineString")for(const ge of j)Ut(ie,ge);else if(U==="MultiPolygon")for(const ge of j)Ut(ie,ge[0]);return ie}function Ut(se,U){for(let j=0;j<U.length;j+=3)se.minX=Math.min(se.minX,U[j]),se.minY=Math.min(se.minY,U[j+1]),se.maxX=Math.max(se.maxX,U[j]),se.maxY=Math.max(se.maxY,U[j+1])}function Wt(se,U,j,Q){if(!U.geometry)return;const ie=U.geometry.coordinates;if(ie&&ie.length===0)return;const ge=U.geometry.type,we=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2);let Ie=[],me=U.id;if(j.promoteId?me=U.properties[j.promoteId]:j.generateId&&(me=Q||0),ge==="Point")mn(ie,Ie);else if(ge==="MultiPoint")for(const $e of ie)mn($e,Ie);else if(ge==="LineString")Ce(ie,Ie,we,!1);else if(ge==="MultiLineString"){if(j.lineMetrics){for(const $e of ie)Ie=[],Ce($e,Ie,we,!1),se.push(Ot(me,"LineString",Ie,U.properties));return}un(ie,Ie,we,!1)}else if(ge==="Polygon")un(ie,Ie,we,!0);else{if(ge!=="MultiPolygon"){if(ge==="GeometryCollection"){for(const $e of U.geometry.geometries)Wt(se,{id:me,geometry:$e,properties:U.properties},j,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const $e of ie){const Ze=[];un($e,Ze,we,!0),Ie.push(Ze)}}se.push(Ot(me,ge,Ie,U.properties))}function mn(se,U){U.push(mt(se[0]),Yt(se[1]),0)}function Ce(se,U,j,Q){let ie,ge,we=0;for(let me=0;me<se.length;me++){const $e=mt(se[me][0]),Ze=Yt(se[me][1]);U.push($e,Ze,0),me>0&&(we+=Q?(ie*Ze-$e*ge)/2:Math.sqrt(Math.pow($e-ie,2)+Math.pow(Ze-ge,2))),ie=$e,ge=Ze}const Ie=U.length-3;U[2]=1,bt(U,0,Ie,j),U[Ie+2]=1,U.size=Math.abs(we),U.start=0,U.end=U.size}function un(se,U,j,Q){for(let ie=0;ie<se.length;ie++){const ge=[];Ce(se[ie],ge,j,Q),U.push(ge)}}function mt(se){return se/360+.5}function Yt(se){const U=Math.sin(se*Math.PI/180),j=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return j<0?0:j>1?1:j}function yt(se,U,j,Q,ie,ge,we,Ie){if(Q/=U,ge>=(j/=U)&&we<Q)return se;if(we<j||ge>=Q)return null;const me=[];for(const $e of se){const Ze=$e.geometry;let Fe=$e.type;const rt=ie===0?$e.minX:$e.minY,Lt=ie===0?$e.maxX:$e.maxY;if(rt>=j&&Lt<Q){me.push($e);continue}if(Lt<j||rt>=Q)continue;let Gt=[];if(Fe==="Point"||Fe==="MultiPoint")gn(Ze,Gt,j,Q,ie);else if(Fe==="LineString")Ct(Ze,Gt,j,Q,ie,!1,Ie.lineMetrics);else if(Fe==="MultiLineString")bn(Ze,Gt,j,Q,ie,!1);else if(Fe==="Polygon")bn(Ze,Gt,j,Q,ie,!0);else if(Fe==="MultiPolygon")for(const wn of Ze){const Ft=[];bn(wn,Ft,j,Q,ie,!0),Ft.length&&Gt.push(Ft)}if(Gt.length){if(Ie.lineMetrics&&Fe==="LineString"){for(const wn of Gt)me.push(Ot($e.id,Fe,wn,$e.tags));continue}Fe!=="LineString"&&Fe!=="MultiLineString"||(Gt.length===1?(Fe="LineString",Gt=Gt[0]):Fe="MultiLineString"),Fe!=="Point"&&Fe!=="MultiPoint"||(Fe=Gt.length===3?"Point":"MultiPoint"),me.push(Ot($e.id,Fe,Gt,$e.tags))}}return me.length?me:null}function gn(se,U,j,Q,ie){for(let ge=0;ge<se.length;ge+=3){const we=se[ge+ie];we>=j&&we<=Q&&qe(U,se[ge],se[ge+1],se[ge+2])}}function Ct(se,U,j,Q,ie,ge,we){let Ie=Rn(se);const me=ie===0?nt:It;let $e,Ze,Fe=se.start;for(let Ft=0;Ft<se.length-3;Ft+=3){const rn=se[Ft],dn=se[Ft+1],cr=se[Ft+2],Un=se[Ft+3],fn=se[Ft+4],Be=ie===0?rn:dn,Ne=ie===0?Un:fn;let ht=!1;we&&($e=Math.sqrt(Math.pow(rn-Un,2)+Math.pow(dn-fn,2))),Be<j?Ne>j&&(Ze=me(Ie,rn,dn,Un,fn,j),we&&(Ie.start=Fe+$e*Ze)):Be>Q?Ne<Q&&(Ze=me(Ie,rn,dn,Un,fn,Q),we&&(Ie.start=Fe+$e*Ze)):qe(Ie,rn,dn,cr),Ne<j&&Be>=j&&(Ze=me(Ie,rn,dn,Un,fn,j),ht=!0),Ne>Q&&Be<=Q&&(Ze=me(Ie,rn,dn,Un,fn,Q),ht=!0),!ge&&ht&&(we&&(Ie.end=Fe+$e*Ze),U.push(Ie),Ie=Rn(se)),we&&(Fe+=$e)}let rt=se.length-3;const Lt=se[rt],Gt=se[rt+1],wn=ie===0?Lt:Gt;wn>=j&&wn<=Q&&qe(Ie,Lt,Gt,se[rt+2]),rt=Ie.length-3,ge&&rt>=3&&(Ie[rt]!==Ie[0]||Ie[rt+1]!==Ie[1])&&qe(Ie,Ie[0],Ie[1],Ie[2]),Ie.length&&U.push(Ie)}function Rn(se){const U=[];return U.size=se.size,U.start=se.start,U.end=se.end,U}function bn(se,U,j,Q,ie,ge){for(const we of se)Ct(we,U,j,Q,ie,ge,!1)}function qe(se,U,j,Q){se.push(U,j,Q)}function nt(se,U,j,Q,ie,ge){const we=(ge-U)/(Q-U);return qe(se,ge,j+(ie-j)*we,1),we}function It(se,U,j,Q,ie,ge){const we=(ge-j)/(ie-j);return qe(se,U+(Q-U)*we,ge,1),we}function Ve(se,U){const j=[];for(let Q=0;Q<se.length;Q++){const ie=se[Q],ge=ie.type;let we;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")we=nn(ie.geometry,U);else if(ge==="MultiLineString"||ge==="Polygon"){we=[];for(const Ie of ie.geometry)we.push(nn(Ie,U))}else if(ge==="MultiPolygon"){we=[];for(const Ie of ie.geometry){const me=[];for(const $e of Ie)me.push(nn($e,U));we.push(me)}}j.push(Ot(ie.id,ge,we,ie.tags))}return j}function nn(se,U){const j=[];j.size=se.size,se.start!==void 0&&(j.start=se.start,j.end=se.end);for(let Q=0;Q<se.length;Q+=3)j.push(se[Q]+U,se[Q+1],se[Q+2]);return j}function it(se,U){if(se.transformed)return se;const j=1<<se.z,Q=se.x,ie=se.y;for(const ge of se.features){const we=ge.geometry,Ie=ge.type;if(ge.geometry=[],Ie===1)for(let me=0;me<we.length;me+=2)ge.geometry.push(ot(we[me],we[me+1],U,j,Q,ie));else for(let me=0;me<we.length;me++){const $e=[];for(let Ze=0;Ze<we[me].length;Ze+=2)$e.push(ot(we[me][Ze],we[me][Ze+1],U,j,Q,ie));ge.geometry.push($e)}}return se.transformed=!0,se}function ot(se,U,j,Q,ie,ge){return[Math.round(j*(se*Q-ie)),Math.round(j*(U*Q-ge))]}function hn(se,U,j,Q,ie){const ge=U===ie.maxZoom?0:ie.tolerance/((1<<U)*ie.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:se.length,source:null,x:j,y:Q,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ie of se)He(we,Ie,ge,ie);return we}function He(se,U,j,Q){const ie=U.geometry,ge=U.type,we=[];if(se.minX=Math.min(se.minX,U.minX),se.minY=Math.min(se.minY,U.minY),se.maxX=Math.max(se.maxX,U.maxX),se.maxY=Math.max(se.maxY,U.maxY),ge==="Point"||ge==="MultiPoint")for(let Ie=0;Ie<ie.length;Ie+=3)we.push(ie[Ie],ie[Ie+1]),se.numPoints++,se.numSimplified++;else if(ge==="LineString")vt(we,ie,se,j,!1,!1);else if(ge==="MultiLineString"||ge==="Polygon")for(let Ie=0;Ie<ie.length;Ie++)vt(we,ie[Ie],se,j,ge==="Polygon",Ie===0);else if(ge==="MultiPolygon")for(let Ie=0;Ie<ie.length;Ie++){const me=ie[Ie];for(let $e=0;$e<me.length;$e++)vt(we,me[$e],se,j,!0,$e===0)}if(we.length){let Ie=U.tags||null;if(ge==="LineString"&&Q.lineMetrics){Ie={};for(const $e in U.tags)Ie[$e]=U.tags[$e];Ie.mapbox_clip_start=ie.start/ie.size,Ie.mapbox_clip_end=ie.end/ie.size}const me={geometry:we,type:ge==="Polygon"||ge==="MultiPolygon"?3:ge==="LineString"||ge==="MultiLineString"?2:1,tags:Ie};U.id!==null&&(me.id=U.id),se.features.push(me)}}function vt(se,U,j,Q,ie,ge){const we=Q*Q;if(Q>0&&U.size<(ie?we:Q))return void(j.numPoints+=U.length/3);const Ie=[];for(let me=0;me<U.length;me+=3)(Q===0||U[me+2]>we)&&(j.numSimplified++,Ie.push(U[me],U[me+1])),j.numPoints++;ie&&function(me,$e){let Ze=0;for(let Fe=0,rt=me.length,Lt=rt-2;Fe<rt;Lt=Fe,Fe+=2)Ze+=(me[Fe]-me[Lt])*(me[Fe+1]+me[Lt+1]);if(Ze>0===$e)for(let Fe=0,rt=me.length;Fe<rt/2;Fe+=2){const Lt=me[Fe],Gt=me[Fe+1];me[Fe]=me[rt-2-Fe],me[Fe+1]=me[rt-1-Fe],me[rt-2-Fe]=Lt,me[rt-1-Fe]=Gt}}(Ie,ge),se.push(Ie)}const zt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Bn{constructor(U,j){const Q=(j=this.options=function(ge,we){for(const Ie in we)ge[Ie]=we[Ie];return ge}(Object.create(zt),j)).debug;if(Q&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");let ie=function(ge,we){const Ie=[];if(ge.type==="FeatureCollection")for(let me=0;me<ge.features.length;me++)Wt(Ie,ge.features[me],we,me);else Wt(Ie,ge.type==="Feature"?ge:{geometry:ge},we);return Ie}(U,j);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ie=function(ge,we){const Ie=we.buffer/we.extent;let me=ge;const $e=yt(ge,1,-1-Ie,Ie,0,-1,2,we),Ze=yt(ge,1,1-Ie,2+Ie,0,-1,2,we);return($e||Ze)&&(me=yt(ge,1,-Ie,1+Ie,0,-1,2,we)||[],$e&&(me=Ve($e,1).concat(me)),Ze&&(me=me.concat(Ve(Ze,-1)))),me}(ie,j),ie.length&&this.splitTile(ie,0,0,0),Q&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(U,j,Q,ie,ge,we,Ie){const me=[U,j,Q,ie],$e=this.options,Ze=$e.debug;for(;me.length;){ie=me.pop(),Q=me.pop(),j=me.pop(),U=me.pop();const Fe=1<<j,rt=Nn(j,Q,ie);let Lt=this.tiles[rt];if(!Lt&&(Ze>1&&console.time("creation"),Lt=this.tiles[rt]=hn(U,j,Q,ie,$e),this.tileCoords.push({z:j,x:Q,y:ie}),Ze)){Ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,Q,ie,Lt.numFeatures,Lt.numPoints,Lt.numSimplified),console.timeEnd("creation"));const ht=`z${j}`;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(Lt.source=U,ge==null){if(j===$e.indexMaxZoom||Lt.numPoints<=$e.indexMaxPoints)continue}else{if(j===$e.maxZoom||j===ge)continue;if(ge!=null){const ht=ge-j;if(Q!==we>>ht||ie!==Ie>>ht)continue}}if(Lt.source=null,U.length===0)continue;Ze>1&&console.time("clipping");const Gt=.5*$e.buffer/$e.extent,wn=.5-Gt,Ft=.5+Gt,rn=1+Gt;let dn=null,cr=null,Un=null,fn=null,Be=yt(U,Fe,Q-Gt,Q+Ft,0,Lt.minX,Lt.maxX,$e),Ne=yt(U,Fe,Q+wn,Q+rn,0,Lt.minX,Lt.maxX,$e);U=null,Be&&(dn=yt(Be,Fe,ie-Gt,ie+Ft,1,Lt.minY,Lt.maxY,$e),cr=yt(Be,Fe,ie+wn,ie+rn,1,Lt.minY,Lt.maxY,$e),Be=null),Ne&&(Un=yt(Ne,Fe,ie-Gt,ie+Ft,1,Lt.minY,Lt.maxY,$e),fn=yt(Ne,Fe,ie+wn,ie+rn,1,Lt.minY,Lt.maxY,$e),Ne=null),Ze>1&&console.timeEnd("clipping"),me.push(dn||[],j+1,2*Q,2*ie),me.push(cr||[],j+1,2*Q,2*ie+1),me.push(Un||[],j+1,2*Q+1,2*ie),me.push(fn||[],j+1,2*Q+1,2*ie+1)}}getTile(U,j,Q){U=+U,j=+j,Q=+Q;const ie=this.options,{extent:ge,debug:we}=ie;if(U<0||U>24)return null;const Ie=1<<U,me=Nn(U,j=j+Ie&Ie-1,Q);if(this.tiles[me])return it(this.tiles[me],ge);we>1&&console.log("drilling down to z%d-%d-%d",U,j,Q);let $e,Ze=U,Fe=j,rt=Q;for(;!$e&&Ze>0;)Ze--,Fe>>=1,rt>>=1,$e=this.tiles[Nn(Ze,Fe,rt)];return $e&&$e.source?(we>1&&(console.log("found parent tile z%d-%d-%d",Ze,Fe,rt),console.time("drilling down")),this.splitTile($e.source,Ze,Fe,rt,U,j,Q),we>1&&console.timeEnd("drilling down"),this.tiles[me]?it(this.tiles[me],ge):null):null}}function Nn(se,U,j){return 32*((1<<se)*j+U)+se}function qt(se,U){return U?se.properties[U]:se.id}function At(se,U){if(se==null)return!0;if(se.type==="Feature")return qt(se,U)!=null;if(se.type==="FeatureCollection"){const j=new Set;for(const Q of se.features){const ie=qt(Q,U);if(ie==null||j.has(ie))return!1;j.add(ie)}return!0}return!1}function pn(se,U){const j=new Map;if(se!=null)if(se.type==="Feature")j.set(qt(se,U),se);else for(const Q of se.features)j.set(qt(Q,U),Q);return j}class Cn extends I{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(U,j){return p._(this,void 0,void 0,function*(){const Q=U.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ie=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!ie)return null;const ge=new class{constructor(Ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.X,this.length=Ie.length,this._features=Ie}feature(Ie){return new class{constructor(me){this._feature=me,this.extent=p.X,this.type=me.type,this.properties=me.tags,"id"in me&&!isNaN(me.id)&&(this.id=parseInt(me.id,10))}loadGeometry(){if(this._feature.type===1){const me=[];for(const $e of this._feature.geometry)me.push([new p.P($e[0],$e[1])]);return me}{const me=[];for(const $e of this._feature.geometry){const Ze=[];for(const Fe of $e)Ze.push(new p.P(Fe[0],Fe[1]));me.push(Ze)}return me}}toGeoJSON(me,$e,Ze){return J.call(this,me,$e,Ze)}}(this._features[Ie])}}(ie.features);let we=Ue(ge);return we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),{vectorTile:ge,rawData:we.buffer}})}loadData(U){return p._(this,void 0,void 0,function*(){var j;(j=this._pendingRequest)===null||j===void 0||j.abort();const Q=!!(U&&U.request&&U.request.collectResourceTiming)&&new p.bv(U.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(U,this._pendingRequest),this._geoJSONIndex=U.cluster?new Vt(function({superclusterOptions:we,clusterProperties:Ie}){if(!Ie||!we)return we;const me={},$e={},Ze={accumulated:null,zoom:0},Fe={properties:null},rt=Object.keys(Ie);for(const Lt of rt){const[Gt,wn]=Ie[Lt],Ft=p.bC(wn),rn=p.bC(typeof Gt=="string"?[Gt,["accumulated"],["get",Lt]]:Gt);me[Lt]=Ft.value,$e[Lt]=rn.value}return we.map=Lt=>{Fe.properties=Lt;const Gt={};for(const wn of rt)Gt[wn]=me[wn].evaluate(Ze,Fe);return Gt},we.reduce=(Lt,Gt)=>{Fe.properties=Gt;for(const wn of rt)Ze.accumulated=Lt[wn],Lt[wn]=$e[wn].evaluate(Ze,Fe)},we}(U)).load((yield this._pendingData).features):(ie=yield this._pendingData,new Bn(ie,U.geojsonVtOptions)),this.loaded={};const ge={};if(Q){const we=Q.finish();we&&(ge.resourceTiming={},ge.resourceTiming[U.source]=JSON.parse(JSON.stringify(we)))}return ge}catch(ge){if(delete this._pendingRequest,p.bB(ge))return{abandoned:!0};throw ge}var ie})}getData(){return p._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(U){const j=this.loaded;return j&&j[U.uid]?super.reloadTile(U):this.loadTile(U)}loadAndProcessGeoJSON(U,j){return p._(this,void 0,void 0,function*(){let Q=yield this.loadGeoJSON(U,j);if(delete this._pendingRequest,typeof Q!="object")throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(q(Q,!0),U.filter){const ie=p.bC(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ie.result==="error")throw new Error(ie.value.map(we=>`${we.key}: ${we.message}`).join(", "));Q={type:"FeatureCollection",features:Q.features.filter(we=>ie.value.evaluate({zoom:0},we))}}return Q})}loadGeoJSON(U,j){return p._(this,void 0,void 0,function*(){const{promoteId:Q}=U;if(U.request){const ie=yield p.h(U.request,j);return this._dataUpdateable=At(ie.data,Q)?pn(ie.data,Q):void 0,ie.data}if(typeof U.data=="string")try{const ie=JSON.parse(U.data);return this._dataUpdateable=At(ie,Q)?pn(ie,Q):void 0,ie}catch{throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`)}if(!U.dataDiff)throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${U.source}`);return function(ie,ge,we){var Ie,me,$e,Ze;if(ge.removeAll&&ie.clear(),ge.remove)for(const Fe of ge.remove)ie.delete(Fe);if(ge.add)for(const Fe of ge.add){const rt=qt(Fe,we);rt!=null&&ie.set(rt,Fe)}if(ge.update)for(const Fe of ge.update){let rt=ie.get(Fe.id);if(rt==null)continue;const Lt=!Fe.removeAllProperties&&(((Ie=Fe.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0||((me=Fe.addOrUpdateProperties)===null||me===void 0?void 0:me.length)>0);if((Fe.newGeometry||Fe.removeAllProperties||Lt)&&(rt=Object.assign({},rt),ie.set(Fe.id,rt),Lt&&(rt.properties=Object.assign({},rt.properties))),Fe.newGeometry&&(rt.geometry=Fe.newGeometry),Fe.removeAllProperties)rt.properties={};else if((($e=Fe.removeProperties)===null||$e===void 0?void 0:$e.length)>0)for(const Gt of Fe.removeProperties)Object.prototype.hasOwnProperty.call(rt.properties,Gt)&&delete rt.properties[Gt];if(((Ze=Fe.addOrUpdateProperties)===null||Ze===void 0?void 0:Ze.length)>0)for(const{key:Gt,value:wn}of Fe.addOrUpdateProperties)rt.properties[Gt]=wn}}(this._dataUpdateable,U.dataDiff,Q),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(U){return p._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(U){return this._geoJSONIndex.getClusterExpansionZoom(U.clusterId)}getClusterChildren(U){return this._geoJSONIndex.getChildren(U.clusterId)}getClusterLeaves(U){return this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset)}}class cn{constructor(U){this.self=U,this.actor=new p.F(U),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(j,Q)=>{if(this.externalWorkerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.externalWorkerSourceTypes[j]=Q},this.self.addProtocol=p.bi,this.self.removeProtocol=p.bj,this.self.registerRTLTextPlugin=j=>{if(p.bD.isParsed())throw new Error("RTL text plugin already registered.");p.bD.setMethods(j)},this.actor.registerMessageHandler("LDT",(j,Q)=>this._getDEMWorkerSource(j,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RDT",(j,Q)=>p._(this,void 0,void 0,function*(){this._getDEMWorkerSource(j,Q.source).removeTile(Q)})),this.actor.registerMessageHandler("GCEZ",(j,Q)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(j,Q.type,Q.source).getClusterExpansionZoom(Q)})),this.actor.registerMessageHandler("GCC",(j,Q)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(j,Q.type,Q.source).getClusterChildren(Q)})),this.actor.registerMessageHandler("GCL",(j,Q)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(j,Q.type,Q.source).getClusterLeaves(Q)})),this.actor.registerMessageHandler("LD",(j,Q)=>this._getWorkerSource(j,Q.type,Q.source).loadData(Q)),this.actor.registerMessageHandler("GD",(j,Q)=>this._getWorkerSource(j,Q.type,Q.source).getData()),this.actor.registerMessageHandler("LT",(j,Q)=>this._getWorkerSource(j,Q.type,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RT",(j,Q)=>this._getWorkerSource(j,Q.type,Q.source).reloadTile(Q)),this.actor.registerMessageHandler("AT",(j,Q)=>this._getWorkerSource(j,Q.type,Q.source).abortTile(Q)),this.actor.registerMessageHandler("RMT",(j,Q)=>this._getWorkerSource(j,Q.type,Q.source).removeTile(Q)),this.actor.registerMessageHandler("RS",(j,Q)=>p._(this,void 0,void 0,function*(){if(!this.workerSources[j]||!this.workerSources[j][Q.type]||!this.workerSources[j][Q.type][Q.source])return;const ie=this.workerSources[j][Q.type][Q.source];delete this.workerSources[j][Q.type][Q.source],ie.removeSource!==void 0&&ie.removeSource(Q)})),this.actor.registerMessageHandler("RM",j=>p._(this,void 0,void 0,function*(){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j]})),this.actor.registerMessageHandler("SR",(j,Q)=>p._(this,void 0,void 0,function*(){this.referrer=Q})),this.actor.registerMessageHandler("SRPS",(j,Q)=>this._syncRTLPluginState(j,Q)),this.actor.registerMessageHandler("IS",(j,Q)=>p._(this,void 0,void 0,function*(){this.self.importScripts(Q)})),this.actor.registerMessageHandler("SI",(j,Q)=>this._setImages(j,Q)),this.actor.registerMessageHandler("UL",(j,Q)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(j).update(Q.layers,Q.removedIds)})),this.actor.registerMessageHandler("SL",(j,Q)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(j).replace(Q)}))}_setImages(U,j){return p._(this,void 0,void 0,function*(){this.availableImages[U]=j;for(const Q in this.workerSources[U]){const ie=this.workerSources[U][Q];for(const ge in ie)ie[ge].availableImages=j}})}_syncRTLPluginState(U,j){return p._(this,void 0,void 0,function*(){if(p.bD.isParsed())return p.bD.getState();if(j.pluginStatus!=="loading")return p.bD.setState(j),j;const Q=j.pluginURL;if(this.self.importScripts(Q),p.bD.isParsed()){const ie={pluginStatus:"loaded",pluginURL:Q};return p.bD.setState(ie),ie}throw p.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Q}`)})}_getAvailableImages(U){let j=this.availableImages[U];return j||(j=[]),j}_getLayerIndex(U){let j=this.layerIndexes[U];return j||(j=this.layerIndexes[U]=new l),j}_getWorkerSource(U,j,Q){if(this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][j]||(this.workerSources[U][j]={}),!this.workerSources[U][j][Q]){const ie={sendAsync:(ge,we)=>(ge.targetMapId=U,this.actor.sendAsync(ge,we))};switch(j){case"vector":this.workerSources[U][j][Q]=new I(ie,this._getLayerIndex(U),this._getAvailableImages(U));break;case"geojson":this.workerSources[U][j][Q]=new Cn(ie,this._getLayerIndex(U),this._getAvailableImages(U));break;default:this.workerSources[U][j][Q]=new this.externalWorkerSourceTypes[j](ie,this._getLayerIndex(U),this._getAvailableImages(U))}}return this.workerSources[U][j][Q]}_getDEMWorkerSource(U,j){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][j]||(this.demWorkerSources[U][j]=new M),this.demWorkerSources[U][j]}}return p.i(self)&&(self.worker=new cn(self)),cn}),c("index",["exports","./shared"],function(p,l){var b="4.7.1";let T,k;const I={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((r,u)=>{const f=requestAnimationFrame(r);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),u(l.c())})}),getImageData(v,r=0){return this.getImageCanvasContext(v).getImageData(-r,-r,v.width+2*r,v.height+2*r)},getImageCanvasContext(v){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=v.width,r.height=v.height,u.drawImage(v,0,0,v.width,v.height),u},resolveURL:v=>(T||(T=document.createElement("a")),T.href=v,T.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}};class M{static testProp(r){if(!M.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in M.docStyle)return r[u];return r[0]}static create(r,u,f){const m=window.document.createElement(r);return u!==void 0&&(m.className=u),f&&f.appendChild(m),m}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){M.docStyle&&M.selectProp&&(M.userSelect=M.docStyle[M.selectProp],M.docStyle[M.selectProp]="none")}static enableDrag(){M.docStyle&&M.selectProp&&(M.docStyle[M.selectProp]=M.userSelect)}static setTransform(r,u){r.style[M.transformProp]=u}static addEventListener(r,u,f,m={}){r.addEventListener(u,f,"passive"in m?m:m.capture)}static removeEventListener(r,u,f,m={}){r.removeEventListener(u,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",M.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",M.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",M.suppressClickInternal,!0)},0)}static getScale(r){const u=r.getBoundingClientRect();return{x:u.width/r.offsetWidth||1,y:u.height/r.offsetHeight||1,boundingClientRect:u}}static getPoint(r,u,f){const m=u.boundingClientRect;return new l.P((f.clientX-m.left)/u.x-r.clientLeft,(f.clientY-m.top)/u.y-r.clientTop)}static mousePos(r,u){const f=M.getScale(r);return M.getPoint(r,f,u)}static touchPos(r,u){const f=[],m=M.getScale(r);for(let y=0;y<u.length;y++)f.push(M.getPoint(r,m,u[y]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}M.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,M.selectProp=M.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),M.transformProp=M.testProp(["transform","WebkitTransform"]);const D={supported:!1,testSupport:function(v){!J&&q&&($?V(v):H=v)}};let H,q,J=!1,$=!1;function V(v){const r=v.createTexture();v.bindTexture(v.TEXTURE_2D,r);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,q),v.isContextLost())return;D.supported=!0}catch{}v.deleteTexture(r),J=!0}var B;typeof document<"u"&&(q=document.createElement("img"),q.onload=()=>{H&&V(H),H=null,$=!0},q.onerror=()=>{J=!0,H=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let r,u,f,m;v.resetRequestQueue=()=>{r=[],u=0,f=0,m={}},v.addThrottleControl=E=>{const z=f++;return m[z]=E,z},v.removeThrottleControl=E=>{delete m[E],S()},v.getImage=(E,z,O=!0)=>new Promise((F,X)=>{D.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),l.e(E,{type:"image"}),r.push({abortController:z,requestParameters:E,supportImageRefresh:O,state:"queued",onError:te=>{X(te)},onSuccess:te=>{F(te)}}),S()});const y=E=>l._(this,void 0,void 0,function*(){E.state="running";const{requestParameters:z,supportImageRefresh:O,onError:F,onSuccess:X,abortController:te}=E,oe=O===!1&&!l.i(self)&&!l.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((fe,ve)=>fe&&ve==="accept",!0));u++;const ce=oe?P(z,te):l.m(z,te);try{const fe=yield ce;delete E.abortController,E.state="completed",fe.data instanceof HTMLImageElement||l.b(fe.data)?X(fe):fe.data&&X({data:yield(pe=fe.data,typeof createImageBitmap=="function"?l.d(pe):l.f(pe)),cacheControl:fe.cacheControl,expires:fe.expires})}catch(fe){delete E.abortController,F(fe)}finally{u--,S()}var pe}),S=()=>{const E=(()=>{for(const z of Object.keys(m))if(m[z]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=u;z<E&&r.length>0;z++){const O=r.shift();O.abortController.signal.aborted?z--:y(O)}},P=(E,z)=>new Promise((O,F)=>{const X=new Image,te=E.url,oe=E.credentials;oe&&oe==="include"?X.crossOrigin="use-credentials":(oe&&oe==="same-origin"||!l.s(te))&&(X.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{X.src="",F(l.c())}),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,O({data:X})},X.onerror=()=>{X.onerror=X.onload=null,z.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=te})}(B||(B={})),B.resetRequestQueue();class G{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function ne(v){var r=new l.A(3);return r[0]=v[0],r[1]=v[1],r[2]=v[2],r}var re,ae=function(v,r,u){return v[0]=r[0]-u[0],v[1]=r[1]-u[1],v[2]=r[2]-u[2],v};re=new l.A(3),l.A!=Float32Array&&(re[0]=0,re[1]=0,re[2]=0);var he=function(v){var r=v[0],u=v[1];return r*r+u*u};function Me(v){const r=[];if(typeof v=="string")r.push({id:"default",url:v});else if(v&&v.length>0){const u=[];for(const{id:f,url:m}of v){const y=`${f}${m}`;u.indexOf(y)===-1&&(u.push(y),r.push({id:f,url:m}))}}return r}function Ee(v,r,u){const f=v.split("?");return f[0]+=`${r}${u}`,f.join("?")}(function(){var v=new l.A(2);l.A!=Float32Array&&(v[0]=0,v[1]=0)})();class Re{constructor(r,u,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(u,m)}update(r,u,f){const{width:m,height:y}=r,S=!(this.size&&this.size[0]===m&&this.size[1]===y||f),{context:P}=this,{gl:E}=P;if(this.useMipmap=!!(u&&u.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!u||u.premultiply!==!1)),S)this.size=[m,y],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.b(r)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,r):E.texImage2D(E.TEXTURE_2D,0,this.format,m,y,0,this.format,E.UNSIGNED_BYTE,r.data);else{const{x:z,y:O}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.b(r)?E.texSubImage2D(E.TEXTURE_2D,0,z,O,E.RGBA,E.UNSIGNED_BYTE,r):E.texSubImage2D(E.TEXTURE_2D,0,z,O,m,y,E.RGBA,E.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)}bind(r,u,f){const{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),f!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=y.LINEAR),r!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,f||r),this.filter=r),u!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,u),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function K(v){const{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class be extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,promiseResolve:f}of this.requestors)f(this._getImagesForIds(u));this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new l.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let f=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,u){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||u<m[1])return!1;f=m[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const f=u.spriteData,m=f&&f.width||u.data.width,y=f&&f.height||u.data.height;return!(r[0]<0||m<r[0]||r[1]<0||y<r[1]||r[2]<0||m<r[2]||r[3]<0||y<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((u,f)=>{let m=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(m=!1);this.isLoaded()||m?u(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:u})})}_getImagesForIds(r){const u={};for(const f of r){let m=this.getImage(f);m||(this.fire(new l.k("styleimagemissing",{id:f})),m=this.getImage(f)),m?u[f]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:l.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],f=this.getImage(r);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},y=new l.I(m,f);this.patterns[r]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Re(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const y in this.patterns)r.push(this.patterns[y].bin);const{w:u,h:f}=l.p(r),m=this.atlasImage;m.resize({width:u||1,height:f||1});for(const y in this.patterns){const{bin:S}=this.patterns[y],P=S.x+1,E=S.y+1,z=this.getImage(y).data,O=z.width,F=z.height;l.R.copy(z,m,{x:0,y:0},{x:P,y:E},{width:O,height:F}),l.R.copy(z,m,{x:0,y:F-1},{x:P,y:E-1},{width:O,height:1}),l.R.copy(z,m,{x:0,y:0},{x:P,y:E+F},{width:O,height:1}),l.R.copy(z,m,{x:O-1,y:0},{x:P-1,y:E},{width:1,height:F}),l.R.copy(z,m,{x:0,y:0},{x:P+O,y:E},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||l.w(`Image with ID: "${u}" was not found`),K(f)&&this.updateImage(u,f)}}}const _e=1e20;function ze(v,r,u,f,m,y,S,P,E){for(let z=r;z<r+f;z++)Te(v,u*y+z,y,m,S,P,E);for(let z=u;z<u+m;z++)Te(v,z*y+r,1,f,S,P,E)}function Te(v,r,u,f,m,y,S){y[0]=0,S[0]=-_e,S[1]=_e,m[0]=v[r];for(let P=1,E=0,z=0;P<f;P++){m[P]=v[r+P*u];const O=P*P;do{const F=y[E];z=(m[P]-m[F]+O-F*F)/(P-F)/2}while(z<=S[E]&&--E>-1);E++,y[E]=P,S[E]=z,S[E+1]=_e}for(let P=0,E=0;P<f;P++){for(;S[E+1]<P;)E++;const z=y[E],O=P-z;v[r+P*u]=m[z]+O*O}}class Ue{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return l._(this,void 0,void 0,function*(){const u=[];for(const y in r)for(const S of r[y])u.push(this._getAndCacheGlyphsPromise(y,S));const f=yield Promise.all(u),m={};for(const{stack:y,id:S,glyph:P}of f)m[y]||(m[y]={}),m[y][S]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return m})}_getAndCacheGlyphsPromise(r,u){return l._(this,void 0,void 0,function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=f.glyphs[u];if(m!==void 0)return{stack:r,id:u,glyph:m};if(m=this._tinySDF(f,r,u),m)return f.glyphs[u]=m,{stack:r,id:u,glyph:m};const y=Math.floor(u/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[y])return{stack:r,id:u,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[y]){const P=Ue.loadGlyphRange(r,y,this.url,this.requestManager);f.requests[y]=P}const S=yield f.requests[y];for(const P in S)this._doesCharSupportLocalGlyph(+P)||(f.glyphs[+P]=S[+P]);return f.ranges[y]=!0,{stack:r,id:u,glyph:S[u]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,u,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let y=r.tinySDF;if(!y){let P="400";/bold/i.test(u)?P="900":/medium/i.test(u)?P="500":/light/i.test(u)&&(P="200"),y=r.tinySDF=new Ue.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:P})}const S=y.draw(String.fromCharCode(f));return{id:f,bitmap:new l.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ue.loadGlyphRange=function(v,r,u,f){return l._(this,void 0,void 0,function*(){const m=256*r,y=m+255,S=f.transformRequest(u.replace("{fontstack}",v).replace("{range}",`${m}-${y}`),"Glyphs"),P=yield l.l(S,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${y}`);const E={};for(const z of l.n(P.data))E[z.id]=z;return E})},Ue.TinySDF=class{constructor({fontSize:v=24,buffer:r=3,radius:u=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:S="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=u;const P=this.size=v+4*r,E=this._createCanvas(P),z=this.ctx=E.getContext("2d",{willReadFrequently:!0});z.font=`${S} ${y} ${v}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(v){const r=document.createElement("canvas");return r.width=r.height=v,r}draw(v){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(v),S=Math.ceil(u),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-m))),E=Math.min(this.size-this.buffer,S+Math.ceil(f)),z=P+2*this.buffer,O=E+2*this.buffer,F=Math.max(z*O,0),X=new Uint8ClampedArray(F),te={data:X,width:z,height:O,glyphWidth:P,glyphHeight:E,glyphTop:S,glyphLeft:0,glyphAdvance:r};if(P===0||E===0)return te;const{ctx:oe,buffer:ce,gridInner:pe,gridOuter:fe}=this;oe.clearRect(ce,ce,P,E),oe.fillText(v,ce,ce+S);const ve=oe.getImageData(ce,ce,P,E);fe.fill(_e,0,F),pe.fill(0,0,F);for(let le=0;le<E;le++)for(let Se=0;Se<P;Se++){const Pe=ve.data[4*(le*P+Se)+3]/255;if(Pe===0)continue;const De=(le+ce)*z+Se+ce;if(Pe===1)fe[De]=0,pe[De]=_e;else{const Ke=.5-Pe;fe[De]=Ke>0?Ke*Ke:0,pe[De]=Ke<0?Ke*Ke:0}}ze(fe,0,0,z,O,z,this.f,this.v,this.z),ze(pe,ce,ce,P,E,z,this.f,this.v,this.z);for(let le=0;le<F;le++){const Se=Math.sqrt(fe[le])-Math.sqrt(pe[le]);X[le]=Math.round(255-255*(Se/this.radius+this.cutoff))}return te}};class Le{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,u){return l.x(r.expression.evaluate(u))}interpolate(r,u,f){return{x:l.y.number(r.x,u.x,f),y:l.y.number(r.y,u.y,f),z:l.y.number(r.z,u.z,f)}}}let Oe;class Xe extends l.E{constructor(r){super(),Oe=Oe||new l.q({anchor:new l.D(l.v.light.anchor),position:new Le,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Oe),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.r,r,u))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,f){return(!f||f.validate!==!1)&&l.t(this,r.call(l.u,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Ye=new l.q({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class ut extends l.E{constructor(r){super(),this._transitionable=new l.T(Ye),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.z(0))}setSky(r,u={}){if(!this._validate(l.B,r,u)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,f={}){return(f==null?void 0:f.validate)!==!1&&l.t(this,r.call(l.u,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Kt{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const f=r.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,u)),this.dashEntry[f]}getDashRanges(r,u,f){const m=[];let y=r.length%2==1?-r[r.length-1]*f:0,S=r[0]*f,P=!0;m.push({left:y,right:S,isDash:P,zeroLength:r[0]===0});let E=r[0];for(let z=1;z<r.length;z++){P=!P;const O=r[z];y=E*f,E+=O,S=E*f,m.push({left:y,right:S,isDash:P,zeroLength:O===0})}return m}addRoundDash(r,u,f){const m=u/2;for(let y=-f;y<=f;y++){const S=this.width*(this.nextRow+f+y);let P=0,E=r[P];for(let z=0;z<this.width;z++){z/E.right>1&&(E=r[++P]);const O=Math.abs(z-E.left),F=Math.abs(z-E.right),X=Math.min(O,F);let te;const oe=y/f*(m+1);if(E.isDash){const ce=m-Math.abs(oe);te=Math.sqrt(X*X+ce*ce)}else te=m-Math.sqrt(X*X+oe*oe);this.data[S+z]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(r){for(let P=r.length-1;P>=0;--P){const E=r[P],z=r[P+1];E.zeroLength?r.splice(P,1):z&&z.isDash===E.isDash&&(z.left=E.left,r.splice(P,1))}const u=r[0],f=r[r.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const m=this.width*this.nextRow;let y=0,S=r[y];for(let P=0;P<this.width;P++){P/S.right>1&&(S=r[++y]);const E=Math.abs(P-S.left),z=Math.abs(P-S.right),O=Math.min(E,z);this.data[m+P]=Math.max(0,Math.min(255,(S.isDash?O:-O)+128))}}addDash(r,u){const f=u?7:0,m=2*f+1;if(this.nextRow+m>this.height)return l.w("LineAtlas out of space"),null;let y=0;for(let P=0;P<r.length;P++)y+=r[P];if(y!==0){const P=this.width/y,E=this.getDashRanges(r,this.width,P);u?this.addRoundDash(E,P,f):this.addRegularDash(E)}const S={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:y};return this.nextRow+=m,this.dirty=!0,S}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const Vt="maplibre_preloaded_worker_pool";class tt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<tt.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Vt]}numActive(){return Object.keys(this.active).length}}const Qe=Math.floor(I.hardwareConcurrency/2);let kt,Xt;function jt(){return kt||(kt=new tt),kt}tt.workerCount=l.C(globalThis)?Math.max(Math.min(Qe,3),1):1;class bt{constructor(r,u){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=u;const f=this.workerPool.acquire(u);for(let m=0;m<f.length;m++){const y=new l.F(f[m],u);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u){const f=[];for(const m of this.actors)f.push(m.sendAsync({type:r,data:u}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,u){for(const f of this.actors)f.registerMessageHandler(r,u)}}function Qt(){return Xt||(Xt=new bt(jt(),l.G),Xt.registerMessageHandler("GR",(v,r,u)=>l.m(r,u))),Xt}function Ot(v,r){const u=l.H();return l.J(u,u,[1,1,0]),l.K(u,u,[.5*v.width,.5*v.height,1]),l.L(u,u,v.calculatePosMatrix(r.toUnwrapped()))}function Ut(v,r,u,f,m,y){const S=function(F,X,te){if(F)for(const oe of F){const ce=X[oe];if(ce&&ce.source===te&&ce.type==="fill-extrusion")return!0}else for(const oe in X){const ce=X[oe];if(ce.source===te&&ce.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,v.id),P=y.maxPitchScaleFactor(),E=v.tilesIn(f,P,S);E.sort(Wt);const z=[];for(const F of E)z.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(r,u,v._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,m,y,P,Ot(v.transform,F.tileID))});const O=function(F){const X={},te={};for(const oe of F){const ce=oe.queryResults,pe=oe.wrappedTileID,fe=te[pe]=te[pe]||{};for(const ve in ce){const le=ce[ve],Se=fe[ve]=fe[ve]||{},Pe=X[ve]=X[ve]||[];for(const De of le)Se[De.featureIndex]||(Se[De.featureIndex]=!0,Pe.push(De))}}return X}(z);for(const F in O)O[F].forEach(X=>{const te=X.feature,oe=v.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=oe});return O}function Wt(v,r){const u=v.tileID,f=r.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}function mn(v,r,u){return l._(this,void 0,void 0,function*(){let f=v;if(v.url?f=(yield l.h(r.transformRequest(v.url,"Source"),u)).data:yield I.frameAsync(u),!f)return null;const m=l.M(l.e(f,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(m.vectorLayerIds=f.vector_layers.map(y=>y.id)),m})}class Ce{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.N?new l.N(r.lng,r.lat):l.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.N?new l.N(r.lng,r.lat):l.N.convert(r),this}extend(r){const u=this._sw,f=this._ne;let m,y;if(r instanceof l.N)m=r,y=r;else{if(!(r instanceof Ce))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Ce.convert(r)):this.extend(l.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.N.convert(r)):this;if(m=r._sw,y=r._ne,!m||!y)return this}return u||f?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),f.lng=Math.max(y.lng,f.lng),f.lat=Math.max(y.lat,f.lat)):(this._sw=new l.N(m.lng,m.lat),this._ne=new l.N(y.lng,y.lat)),this}getCenter(){return new l.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.N(this.getWest(),this.getNorth())}getSouthEast(){return new l.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:f}=l.N.convert(r);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof Ce?r:r&&new Ce(r)}static fromLngLat(r,u=0){const f=360*u/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new Ce(new l.N(r.lng-m,r.lat-f),new l.N(r.lng+m,r.lat+f))}adjustAntiMeridian(){const r=new l.N(this._sw.lng,this._sw.lat),u=new l.N(this._ne.lng,this._ne.lat);return new Ce(r,r.lng>u.lng?new l.N(u.lng+360,u.lat):u)}}class un{constructor(r,u,f){this.bounds=Ce.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),f=Math.floor(l.O(this.bounds.getWest())*u),m=Math.floor(l.Q(this.bounds.getNorth())*u),y=Math.ceil(l.O(this.bounds.getEast())*u),S=Math.ceil(l.Q(this.bounds.getSouth())*u);return r.x>=f&&r.x<y&&r.y>=m&&r.y<S}}class mt extends l.E{constructor(r,u,f,m){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.M(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield mn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(l.e(this,r),r.bounds&&(this.tileBounds=new un(r.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new l.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(u,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((y,S)=>{r.reloadPromise={resolve:y,reject:S}})}else r.actor=this.dispatcher.getActor(),m="LT";r.abortController=new AbortController;try{const y=yield r.actor.sendAsync({type:m,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,y)}catch(y){if(delete r.abortController,r.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,u){if(u&&u.resourceTiming&&(r.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&r.setExpiryData(u),r.loadVectorData(u,this.map.painter),r.reloadPromise){const f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Yt extends l.E{constructor(r,u,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.M(u,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield mn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(l.e(this,r),r.bounds&&(this.tileBounds=new un(r.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new l.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const f=yield B.getImage(this.map._requestManager.transformRequest(u,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const m=this.map.painter.context,y=m.gl,S=f.data;r.texture=this.map.painter.getTileTexture(S.width),r.texture?r.texture.update(S,{useMipmap:!0}):(r.texture=new Re(m,S,y.RGBA,{useMipmap:!0}),r.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class yt extends Yt{constructor(r,u,f,m){super(r,u,f,m),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(u,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const m=yield B.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){const y=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const S=l.b(y)&&l.U()?y:yield this.readImageNow(y),P={type:this.type,uid:r.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const E=yield r.actor.sendAsync({type:"LDT",data:P});r.dem=E,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.V()){const u=r.width+2,f=r.height+2;try{return new l.R({width:u,height:f},yield l.W(r,-1,-1,u,f))}catch{}}return I.getImageData(r,1)})}_getNeighboringTiles(r){const u=r.canonical,f=Math.pow(2,u.z),m=(u.x-1+f)%f,y=u.x===0?r.wrap-1:r.wrap,S=(u.x+1+f)%f,P=u.x+1===f?r.wrap+1:r.wrap,E={};return E[new l.S(r.overscaledZ,y,u.z,m,u.y).key]={backfilled:!1},E[new l.S(r.overscaledZ,P,u.z,S,u.y).key]={backfilled:!1},u.y>0&&(E[new l.S(r.overscaledZ,y,u.z,m,u.y-1).key]={backfilled:!1},E[new l.S(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},E[new l.S(r.overscaledZ,P,u.z,S,u.y-1).key]={backfilled:!1}),u.y+1<f&&(E[new l.S(r.overscaledZ,y,u.z,m,u.y+1).key]={backfilled:!1},E[new l.S(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},E[new l.S(r.overscaledZ,P,u.z,S,u.y+1).key]={backfilled:!1}),E}unloadTile(r){return l._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class gn extends l.E{constructor(r,u,f,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const y=l.X/this.tileSize;u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*y,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*y,extent:l.X,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.X,radius:(u.clusterRadius||50)*y,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return l._(this,void 0,void 0,function*(){const r=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,u,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:u,offset:f}})}_updateWorkerData(r){return l._(this,void 0,void 0,function*(){const u=l.e({type:this.type},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(I.resolveURL(this._data),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:u});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let m=null;f.resourceTiming&&f.resourceTiming[this.id]&&(m=f.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&l.e(y,{resourceTiming:m}),this.fire(new l.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(r){return l._(this,void 0,void 0,function*(){const u=r.actor?"RT":"LT";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const m=yield this.actor.sendAsync({type:u,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,u==="RT")})}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ct=l.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Rn extends l.E{constructor(r,u,f,m){super(),this.id=r,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}load(r){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield B.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,r&&(this.coordinates=r),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new l.j(u))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(l.Z.fromLngLat);this.tileID=function(m){let y=1/0,S=1/0,P=-1/0,E=-1/0;for(const X of m)y=Math.min(y,X.x),S=Math.min(S,X.y),P=Math.max(P,X.x),E=Math.max(E,X.y);const z=Math.max(P-y,E-S),O=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),F=Math.pow(2,O);return new l.a1(O,Math.floor((y+P)/2*F),Math.floor((S+E)/2*F))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.$,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.X,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.X),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.X,l.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Ct.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Re(r,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,f=!0)}f&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class bn extends Rn{constructor(r,u,f,m){super(r,u,f,m),this.roundZoom=!0,this.type="video",this.options=u}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const u of r.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield l.a3(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new l.j(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.j(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Ct.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new Re(r,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,f=!0)}f&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class qe extends Rn{constructor(r,u,f,m){super(r,u,f,m),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(S=>typeof S!="number"))||this.fire(new l.j(new l.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a2(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,f=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Ct.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Re(u,this.canvas,f.RGBA,{premultiply:!0});let m=!1;for(const y in this.tiles){const S=this.tiles[y];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,m=!0)}m&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const nt={},It=v=>{switch(v){case"geojson":return gn;case"image":return Rn;case"raster":return Yt;case"raster-dem":return yt;case"vector":return mt;case"video":return bn;case"canvas":return qe}return nt[v]},Ve="RTLPluginLoaded";class nn extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Qt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return l._(this,arguments,void 0,function*(u,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=I.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(Ve))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let it=null;function ot(){return it||(it=new nn),it}class hn{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.a4(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,y){const S={};if(!y)return S;for(const P of m){const E=P.layerIds.map(z=>y.getLayer(z)).filter(Boolean);if(E.length!==0){P.layers=E,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(z=>E.filter(O=>O.id===z)[0]));for(const z of E)S[z.id]=P}}return S}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const y=this.buckets[m];if(y instanceof l.a6){if(this.hasSymbolBuckets=!0,!f)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const y=this.buckets[m];if(y instanceof l.a6&&y.hasRTLText){this.hasRTLText=!0,ot().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Re(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Re(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,f,m,y,S,P,E,z,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:S,tileSize:this.tileSize,pixelPosMatrix:O,transform:E,params:P,queryPadding:this.queryPadding*z},r,u,f):{}}querySourceFeatures(r,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),y=u&&u.sourceLayer?u.sourceLayer:"",S=m._geojsonTileLayer||m[y];if(!S)return;const P=l.a7(u&&u.filter),{z:E,x:z,y:O}=this.tileID.canonical,F={z:E,x:z,y:O};for(let X=0;X<S.length;X++){const te=S.feature(X);if(P.needGeometry){const pe=l.a8(te,!0);if(!P.filter(new l.z(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!P.filter(new l.z(this.tileID.overscaledZ),te))continue;const oe=f.getId(te,y),ce=new l.a9(te,E,z,O,oe);ce.tile=F,r.push(ce)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const f=l.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const y=this.expirationTime-u;y?this.expirationTime=f+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const y=this.buckets[m],S=y.layers[0].sourceLayer||"_geojsonTileLayer",P=f[S],E=r[S];if(!P||!E||Object.keys(E).length===0)continue;y.update(E,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=u&&u.style&&u.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<I.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=I.now()+r}setDependencies(r,u){const f={};for(const m of u)f[m]=!0;this.dependencies[r]=f}hasDependency(r,u){for(const f of r){const m=this.dependencies[f];if(m){for(const y of u)if(m[y])return!0}}return!1}}class He{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const y={value:u,timeout:void 0};if(f!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},f)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const f=r.wrapped().key,m=u===void 0?0:this.data[f].indexOf(u),y=this.data[f][m];return this.data[f].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(y.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||u.push(m);for(const f of u)this.remove(f.value.tileID,f)}}class vt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,f){const m=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},l.e(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const y in this.state[r])y!==m&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const y in this.state[r][m])f[y]||(this.deletedStates[r][m][y]=null)}else for(const y in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][y]===null&&delete this.deletedStates[r][m][y]}removeFeatureState(r,u,f){if(this.deletedStates[r]===null)return;const m=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&u!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,u){const f=String(u),m=l.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const y=this.deletedStates[r][u];if(y===null)return{};for(const S in y)delete m[S]}return m}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const y={};for(const S in this.stateChanges[m])this.state[m][S]||(this.state[m][S]={}),l.e(this.state[m][S],this.stateChanges[m][S]),y[S]=this.state[m][S];f[m]=y}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const y={};if(this.deletedStates[m]===null)for(const S in this.state[m])y[S]={},this.state[m][S]={};else for(const S in this.deletedStates[m]){if(this.deletedStates[m][S]===null)this.state[m][S]={};else for(const P of Object.keys(this.deletedStates[m][S]))delete this.state[m][S][P];y[S]=this.state[m][S]}f[m]=f[m]||{},l.e(f[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,u)}}class zt extends l.E{constructor(r,u,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,y,S,P)=>{const E=new(It(y.type))(m,y,S,P);if(E.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${E.id}`);return E})(r,u,f,this),this._tiles={},this._cache=new He(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new vt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u,f){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,u,f)}catch(m){r.state="errored",m.status!==404?this._source.fire(new l.j(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new l.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Bn).map(r=>r.key)}getRenderableIds(r){const u=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&u.push(this._tiles[f]);return r?u.sort((f,m)=>{const y=f.tileID,S=m.tileID,P=new l.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),E=new l.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-S.overscaledZ||E.y-P.y||E.x-P.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(Bn).map(f=>f.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){return l._(this,void 0,void 0,function*(){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=u),yield this._loadTile(f,r,u))})}_tileLoaded(r,u,f){r.timeAdded=I.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const y=u[m];if(r.neighboringTiles&&r.neighboringTiles[y]){const S=this.getTileByID(y);f(r,S),f(S,r)}}function f(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let S=y.tileID.canonical.x-m.tileID.canonical.x;const P=y.tileID.canonical.y-m.tileID.canonical.y,E=Math.pow(2,m.tileID.canonical.z),z=y.tileID.key;S===0&&P===0||Math.abs(P)>1||(Math.abs(S)>1&&(Math.abs(S+E)===1?S+=E:Math.abs(S-E)===1&&(S-=E)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,S,P),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,f,m){for(const y in this._tiles){let S=this._tiles[y];if(m[y]||!S.hasData()||S.tileID.overscaledZ<=u||S.tileID.overscaledZ>f)continue;let P=S.tileID;for(;S&&S.tileID.overscaledZ>u+1;){const z=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[z.key],S&&S.hasData()&&(P=z)}let E=P;for(;E.overscaledZ>u;)if(E=E.scaledTo(E.overscaledZ-1),r[E.key]){m[P.key]=P;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=r.overscaledZ-1;f>=u;f--){const m=r.scaledTo(f),y=this._getLoadedTile(m);if(y)return y}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const f={};for(const m in this._tiles){const y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+u),f[y.tileID.key]=y}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(r,u,f,m,y,S){const P={},E={},z=Object.keys(r),O=I.now();for(const F of z){const X=r[F],te=this._tiles[F];if(!te||te.fadeEndTime!==0&&te.fadeEndTime<=O)continue;const oe=this.findLoadedParent(X,u),ce=this.findLoadedSibling(X),pe=oe||ce||null;pe&&(this._addTile(pe.tileID),P[pe.tileID.key]=pe.tileID),E[F]=X}this._retainLoadedChildren(E,m,f,r);for(const F in P)r[F]||(this._coveredTiles[F]=!0,r[F]=P[F]);if(S){const F={},X={};for(const te of y)this._tiles[te.key].hasData()?F[te.key]=te:X[te.key]=te;for(const te in X){const oe=X[te].children(this._source.maxzoom);this._tiles[oe[0].key]&&this._tiles[oe[1].key]&&this._tiles[oe[2].key]&&this._tiles[oe[3].key]&&(F[oe[0].key]=r[oe[0].key]=oe[0],F[oe[1].key]=r[oe[1].key]=oe[1],F[oe[2].key]=r[oe[2].key]=oe[2],F[oe[3].key]=r[oe[3].key]=oe[3],delete X[te])}for(const te in X){const oe=X[te],ce=this.findLoadedParent(oe,this._source.minzoom),pe=this.findLoadedSibling(oe),fe=ce||pe||null;if(fe){F[fe.tileID.key]=r[fe.tileID.key]=fe.tileID;for(const ve in F)F[ve].isChildOf(fe.tileID)&&delete F[ve]}}for(const te in this._tiles)F[te]||(this._coveredTiles[te]=!0)}}update(r,u){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=u,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new l.S(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(O=>this._source.hasTile(O)))):f=[];const m=r.coveringZoomLevel(this._source),y=Math.max(m-zt.maxOverzooming,this._source.minzoom),S=Math.max(m+zt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const F of f)if(F.canonical.z>this._source.minzoom){const X=F.scaledTo(F.canonical.z-1);O[X.key]=X;const te=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));O[te.key]=te}f=f.concat(Object.values(O))}const P=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=this._updateRetainedTiles(f,m);Nn(this._source.type)&&this._updateCoveredAndRetainedTiles(E,y,S,m,f,u);for(const O in E)this._tiles[O].clearFadeHold();const z=l.ab(this._tiles,E);for(const O of z){const F=this._tiles[O];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){var f;const m={},y={},S=Math.max(u-zt.maxOverzooming,this._source.minzoom),P=Math.max(u+zt.maxUnderzooming,this._source.minzoom),E={};for(const z of r){const O=this._addTile(z);m[z.key]=z,O.hasData()||u<this._source.maxzoom&&(E[z.key]=z)}this._retainLoadedChildren(E,u,P,m);for(const z of r){let O=this._tiles[z.key];if(O.hasData())continue;if(u+1>this._source.maxzoom){const X=z.children(this._source.maxzoom)[0],te=this.getTile(X);if(te&&te.hasData()){m[X.key]=X;continue}}else{const X=z.children(this._source.maxzoom);if(m[X[0].key]&&m[X[1].key]&&m[X[2].key]&&m[X[3].key])continue}let F=O.wasRequested();for(let X=z.overscaledZ-1;X>=S;--X){const te=z.scaledTo(X);if(y[te.key])break;if(y[te.key]=!0,O=this.getTile(te),!O&&F&&(O=this._addTile(te)),O){const oe=O.hasData();if((oe||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||F)&&(m[te.key]=te),F=O.wasRequested(),oe)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}u.push(m.key);const y=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(y),f)break;m=y}for(const y of u)this._loadedParentTiles[y]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const u=this._tiles[r].tileID,f=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=f}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const f=u;return u||(u=new hn(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,r.key,u.state)),u.uses++,this._tiles[r.key]=u,f||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=u.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(r){const u=r.sourceDataType;r.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&u==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,f){const m=[],y=this.transform;if(!y)return m;const S=f?y.getCameraQueryGeometry(r):r,P=r.map(oe=>y.pointCoordinate(oe,this.terrain)),E=S.map(oe=>y.pointCoordinate(oe,this.terrain)),z=this.getIds();let O=1/0,F=1/0,X=-1/0,te=-1/0;for(const oe of E)O=Math.min(O,oe.x),F=Math.min(F,oe.y),X=Math.max(X,oe.x),te=Math.max(te,oe.y);for(let oe=0;oe<z.length;oe++){const ce=this._tiles[z[oe]];if(ce.holdingForFade())continue;const pe=ce.tileID,fe=Math.pow(2,y.zoom-ce.tileID.overscaledZ),ve=u*ce.queryPadding*l.X/ce.tileSize/fe,le=[pe.getTilePoint(new l.Z(O,F)),pe.getTilePoint(new l.Z(X,te))];if(le[0].x-ve<l.X&&le[0].y-ve<l.X&&le[1].x+ve>=0&&le[1].y+ve>=0){const Se=P.map(De=>pe.getTilePoint(De)),Pe=E.map(De=>pe.getTilePoint(De));m.push({tile:ce,tileID:pe,queryGeometry:Se,cameraQueryGeometry:Pe,scale:fe})}}return m}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Nn(this._source.type)){const r=I.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,f){this._state.updateState(r=r||"_geojsonTileLayer",u,f)}removeFeatureState(r,u,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,f)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,f){const m=this._tiles[r];m&&m.setDependencies(u,f)}reloadTilesForDependencies(r,u){for(const f in this._tiles)this._tiles[f].hasDependency(r,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,u))}}function Bn(v,r){const u=Math.abs(2*v.wrap)-+(v.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return v.overscaledZ-r.overscaledZ||f-u||r.canonical.y-v.canonical.y||r.canonical.x-v.canonical.x}function Nn(v){return v==="raster"||v==="image"||v==="video"}zt.maxOverzooming=10,zt.maxUnderzooming=3;class qt{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ac(r,0,1);let u=1,f=this._distances[u];const m=r*this.paddedLength+this.padding;for(;f<m&&u<this._distances.length;)f=this._distances[++u];const y=u-1,S=this._distances[y],P=f-S,E=P>0?(m-S)/P:0;return this.points[y].mult(1-E).add(this.points[u].mult(E))}}function At(v,r){let u=!0;return v==="always"||v!=="never"&&r!=="never"||(u=!1),u}class pn{constructor(r,u,f){const m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(u/f);for(let S=0;S<this.xCellCount*this.yCellCount;S++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,f,m,y){this._forEachCell(u,f,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(r,u,f,m){this._forEachCell(u-m,f-m,u+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,u,f,m,y,S){this.boxCells[y].push(S)}_insertCircleCell(r,u,f,m,y,S){this.circleCells[y].push(S)}_query(r,u,f,m,y,S,P){if(f<0||r>this.width||m<0||u>this.height)return[];const E=[];if(r<=0&&u<=0&&this.width<=f&&this.height<=m){if(y)return[{key:null,x1:r,y1:u,x2:f,y2:m}];for(let z=0;z<this.boxKeys.length;z++)E.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const O=this.circles[3*z],F=this.circles[3*z+1],X=this.circles[3*z+2];E.push({key:this.circleKeys[z],x1:O-X,y1:F-X,x2:O+X,y2:F+X})}}else this._forEachCell(r,u,f,m,this._queryCell,E,{hitTest:y,overlapMode:S,seenUids:{box:{},circle:{}}},P);return E}query(r,u,f,m){return this._query(r,u,f,m,!1,null)}hitTest(r,u,f,m,y,S){return this._query(r,u,f,m,!0,y,S).length>0}hitTestCircle(r,u,f,m,y){const S=r-f,P=r+f,E=u-f,z=u+f;if(P<0||S>this.width||z<0||E>this.height)return!1;const O=[];return this._forEachCell(S,E,P,z,this._queryCellCircle,O,{hitTest:!0,overlapMode:m,circle:{x:r,y:u,radius:f},seenUids:{box:{},circle:{}}},y),O.length>0}_queryCell(r,u,f,m,y,S,P,E){const{seenUids:z,hitTest:O,overlapMode:F}=P,X=this.boxCells[y];if(X!==null){const oe=this.bboxes;for(const ce of X)if(!z.box[ce]){z.box[ce]=!0;const pe=4*ce,fe=this.boxKeys[ce];if(r<=oe[pe+2]&&u<=oe[pe+3]&&f>=oe[pe+0]&&m>=oe[pe+1]&&(!E||E(fe))&&(!O||!At(F,fe.overlapMode))&&(S.push({key:fe,x1:oe[pe],y1:oe[pe+1],x2:oe[pe+2],y2:oe[pe+3]}),O))return!0}}const te=this.circleCells[y];if(te!==null){const oe=this.circles;for(const ce of te)if(!z.circle[ce]){z.circle[ce]=!0;const pe=3*ce,fe=this.circleKeys[ce];if(this._circleAndRectCollide(oe[pe],oe[pe+1],oe[pe+2],r,u,f,m)&&(!E||E(fe))&&(!O||!At(F,fe.overlapMode))){const ve=oe[pe],le=oe[pe+1],Se=oe[pe+2];if(S.push({key:fe,x1:ve-Se,y1:le-Se,x2:ve+Se,y2:le+Se}),O)return!0}}}return!1}_queryCellCircle(r,u,f,m,y,S,P,E){const{circle:z,seenUids:O,overlapMode:F}=P,X=this.boxCells[y];if(X!==null){const oe=this.bboxes;for(const ce of X)if(!O.box[ce]){O.box[ce]=!0;const pe=4*ce,fe=this.boxKeys[ce];if(this._circleAndRectCollide(z.x,z.y,z.radius,oe[pe+0],oe[pe+1],oe[pe+2],oe[pe+3])&&(!E||E(fe))&&!At(F,fe.overlapMode))return S.push(!0),!0}}const te=this.circleCells[y];if(te!==null){const oe=this.circles;for(const ce of te)if(!O.circle[ce]){O.circle[ce]=!0;const pe=3*ce,fe=this.circleKeys[ce];if(this._circlesCollide(oe[pe],oe[pe+1],oe[pe+2],z.x,z.y,z.radius)&&(!E||E(fe))&&!At(F,fe.overlapMode))return S.push(!0),!0}}}_forEachCell(r,u,f,m,y,S,P,E){const z=this._convertToXCellCoord(r),O=this._convertToYCellCoord(u),F=this._convertToXCellCoord(f),X=this._convertToYCellCoord(m);for(let te=z;te<=F;te++)for(let oe=O;oe<=X;oe++)if(y.call(this,r,u,f,m,this.xCellCount*oe+te,S,P,E))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,f,m,y,S){const P=m-r,E=y-u,z=f+S;return z*z>P*P+E*E}_circleAndRectCollide(r,u,f,m,y,S,P){const E=(S-m)/2,z=Math.abs(r-(m+E));if(z>E+f)return!1;const O=(P-y)/2,F=Math.abs(u-(y+O));if(F>O+f)return!1;if(z<=E||F<=O)return!0;const X=z-E,te=F-O;return X*X+te*te<=f*f}}function Cn(v,r,u,f,m){const y=l.H();return r?(l.K(y,y,[1/m,1/m,1]),u||l.ad(y,y,f.angle)):l.L(y,f.labelPlaneMatrix,v),y}function cn(v,r,u,f,m){if(r){const y=l.ae(v);return l.K(y,y,[m,m,1]),u||l.ad(y,y,-f.angle),y}return f.glCoordMatrix}function se(v,r,u,f){let m;f?(m=[v,r,f(v,r),1],l.af(m,m,u)):(m=[v,r,0,1],wn(m,m,u));const y=m[3];return{point:new l.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function U(v,r){return .5+v/r*.5}function j(v,r){return v.x>=-r[0]&&v.x<=r[0]&&v.y>=-r[1]&&v.y<=r[1]}function Q(v,r,u,f,m,y,S,P,E,z,O,F,X,te,oe){const ce=f?v.textSizeData:v.iconSizeData,pe=l.ag(ce,u.transform.zoom),fe=[256/u.width*2+1,256/u.height*2+1],ve=f?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ve.clear();const le=v.lineVertexArray,Se=f?v.text.placedSymbolArray:v.icon.placedSymbolArray,Pe=u.transform.width/u.transform.height;let De=!1;for(let Ke=0;Ke<Se.length;Ke++){const et=Se.get(Ke);if(et.hidden||et.writingMode===l.ah.vertical&&!De){Gt(et.numGlyphs,ve);continue}De=!1;const pt=se(et.anchorX,et.anchorY,r,oe);if(!j(pt.point,fe)){Gt(et.numGlyphs,ve);continue}const St=U(u.transform.cameraToCenterDistance,pt.signedDistanceFromCamera),lt=l.ai(ce,pe,et),at=S?lt/St:lt*St,Rt={getElevation:oe,labelPlaneMatrix:m,lineVertexArray:le,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:z,tileAnchorPoint:new l.P(et.anchorX,et.anchorY),unwrappedTileID:O,width:F,height:X,translation:te},ln=we(Rt,et,at,!1,P,r,y,v.glyphOffsetArray,ve,Pe,E);De=ln.useVertical,(ln.notEnoughRoom||De||ln.needsFlipping&&we(Rt,et,at,!0,P,r,y,v.glyphOffsetArray,ve,Pe,E).notEnoughRoom)&&Gt(et.numGlyphs,ve)}f?v.text.dynamicLayoutVertexBuffer.updateData(ve):v.icon.dynamicLayoutVertexBuffer.updateData(ve)}function ie(v,r,u,f,m,y,S,P){const E=y.glyphStartIndex+y.numGlyphs,z=y.lineStartIndex,O=y.lineStartIndex+y.lineLength,F=r.getoffsetX(y.glyphStartIndex),X=r.getoffsetX(E-1),te=rt(v*F,u,f,m,y.segment,z,O,P,S);if(!te)return null;const oe=rt(v*X,u,f,m,y.segment,z,O,P,S);return oe?P.projectionCache.anyProjectionOccluded?null:{first:te,last:oe}:null}function ge(v,r,u,f){return v===l.ah.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*f?{useVertical:!0}:(v===l.ah.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function we(v,r,u,f,m,y,S,P,E,z,O){const F=u/24,X=r.lineOffsetX*F,te=r.lineOffsetY*F;let oe;if(r.numGlyphs>1){const ce=r.glyphStartIndex+r.numGlyphs,pe=r.lineStartIndex,fe=r.lineStartIndex+r.lineLength,ve=ie(F,P,X,te,f,r,O,v);if(!ve)return{notEnoughRoom:!0};const le=se(ve.first.point.x,ve.first.point.y,S,v.getElevation).point,Se=se(ve.last.point.x,ve.last.point.y,S,v.getElevation).point;if(m&&!f){const Pe=ge(r.writingMode,le,Se,z);if(Pe)return Pe}oe=[ve.first];for(let Pe=r.glyphStartIndex+1;Pe<ce-1;Pe++)oe.push(rt(F*P.getoffsetX(Pe),X,te,f,r.segment,pe,fe,v,O));oe.push(ve.last)}else{if(m&&!f){const pe=se(v.tileAnchorPoint.x,v.tileAnchorPoint.y,y,v.getElevation).point,fe=r.lineStartIndex+r.segment+1,ve=new l.P(v.lineVertexArray.getx(fe),v.lineVertexArray.gety(fe)),le=se(ve.x,ve.y,y,v.getElevation),Se=le.signedDistanceFromCamera>0?le.point:function(De,Ke,et,pt,St,lt){return Ie(De,Ke,et,1,St,lt)}(v.tileAnchorPoint,ve,pe,0,y,v),Pe=ge(r.writingMode,pe,Se,z);if(Pe)return Pe}const ce=rt(F*P.getoffsetX(r.glyphStartIndex),X,te,f,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,v,O);if(!ce||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};oe=[ce]}for(const ce of oe)l.aj(E,ce.point,ce.angle);return{}}function Ie(v,r,u,f,m,y){const S=v.add(v.sub(r)._unit()),P=m!==void 0?se(S.x,S.y,m,y.getElevation).point:$e(S.x,S.y,y).point,E=u.sub(P);return u.add(E._mult(f/E.mag()))}function me(v,r,u){const f=r.projectionCache;if(f.projections[v])return f.projections[v];const m=new l.P(r.lineVertexArray.getx(v),r.lineVertexArray.gety(v)),y=$e(m.x,m.y,r);if(y.signedDistanceFromCamera>0)return f.projections[v]=y.point,f.anyProjectionOccluded=f.anyProjectionOccluded||y.isOccluded,y.point;const S=v-u.direction;return function(P,E,z,O,F){return Ie(P,E,z,O,void 0,F)}(u.distanceFromAnchor===0?r.tileAnchorPoint:new l.P(r.lineVertexArray.getx(S),r.lineVertexArray.gety(S)),m,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,r)}function $e(v,r,u){const f=v+u.translation[0],m=r+u.translation[1];let y;return!u.pitchWithMap&&u.projection.useSpecialProjectionForSymbols?(y=u.projection.projectTileCoordinates(f,m,u.unwrappedTileID,u.getElevation),y.point.x=(.5*y.point.x+.5)*u.width,y.point.y=(.5*-y.point.y+.5)*u.height):(y=se(f,m,u.labelPlaneMatrix,u.getElevation),y.isOccluded=!1),y}function Ze(v,r,u){return v._unit()._perp()._mult(r*u)}function Fe(v,r,u,f,m,y,S,P,E){if(P.projectionCache.offsets[v])return P.projectionCache.offsets[v];const z=u.add(r);if(v+E.direction<f||v+E.direction>=m)return P.projectionCache.offsets[v]=z,z;const O=me(v+E.direction,P,E),F=Ze(O.sub(u),S,E.direction),X=u.add(F),te=O.add(F);return P.projectionCache.offsets[v]=l.ak(y,z,X,te)||z,P.projectionCache.offsets[v]}function rt(v,r,u,f,m,y,S,P,E){const z=f?v-r:v+r;let O=z>0?1:-1,F=0;f&&(O*=-1,F=Math.PI),O<0&&(F+=Math.PI);let X,te=O>0?y+m:y+m+1;P.projectionCache.cachedAnchorPoint?X=P.projectionCache.cachedAnchorPoint:(X=$e(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=X);let oe,ce,pe=X,fe=X,ve=0,le=0;const Se=Math.abs(z),Pe=[];let De;for(;ve+le<=Se;){if(te+=O,te<y||te>=S)return null;ve+=le,fe=pe,ce=oe;const pt={absOffsetX:Se,direction:O,distanceFromAnchor:ve,previousVertex:fe};if(pe=me(te,P,pt),u===0)Pe.push(fe),De=pe.sub(fe);else{let St;const lt=pe.sub(fe);St=lt.mag()===0?Ze(me(te+O,P,pt).sub(pe),u,O):Ze(lt,u,O),ce||(ce=fe.add(St)),oe=Fe(te,St,pe,y,S,ce,u,P,pt),Pe.push(ce),De=oe.sub(ce)}le=De.mag()}const Ke=De._mult((Se-ve)/le)._add(ce||fe),et=F+Math.atan2(pe.y-fe.y,pe.x-fe.x);return Pe.push(Ke),{point:Ke,angle:E?et:0,path:Pe}}const Lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Gt(v,r){for(let u=0;u<v;u++){const f=r.length;r.resize(f+4),r.float32.set(Lt,3*f)}}function wn(v,r,u){const f=r[0],m=r[1];return v[0]=u[0]*f+u[4]*m+u[12],v[1]=u[1]*f+u[5]*m+u[13],v[3]=u[3]*f+u[7]*m+u[15],v}const Ft=100;class rn{constructor(r,u,f=new pn(r.width+200,r.height+200,25),m=new pn(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=u,this.grid=f,this.ignoredGrid=m,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Ft,this.screenBottomBoundary=r.height+Ft,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,f,m,y,S,P,E,z,O,F){const X=r.anchorPointX+E[0],te=r.anchorPointY+E[1],oe=this.projectAndGetPerspectiveRatio(m,X,te,y,O),ce=f*oe.perspectiveRatio;let pe;if(S||P)pe=this._projectCollisionBox(r,ce,m,y,S,P,E,oe,O,F);else{const Pe=oe.point.x+(F?F.x*ce:0),De=oe.point.y+(F?F.y*ce:0);pe={allPointsOccluded:!1,box:[Pe+r.x1*ce,De+r.y1*ce,Pe+r.x2*ce,De+r.y2*ce]}}const[fe,ve,le,Se]=pe.box;return this.mapProjection.useSpecialProjectionForSymbols&&(S?pe.allPointsOccluded:this.mapProjection.isOccluded(X,te,y))||oe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(fe,ve,le,Se)||u!=="always"&&this.grid.hitTest(fe,ve,le,Se,u,z)?{box:[fe,ve,le,Se],placeable:!1,offscreen:!1}:{box:[fe,ve,le,Se],placeable:!0,offscreen:this.isOffscreen(fe,ve,le,Se)}}placeCollisionCircles(r,u,f,m,y,S,P,E,z,O,F,X,te,oe,ce,pe){const fe=[],ve=new l.P(u.anchorX,u.anchorY),le=this.getPerspectiveRatio(S,ve.x,ve.y,P,pe),Se=(F?y/le:y*le)/l.ap,Pe={getElevation:pe,labelPlaneMatrix:E,lineVertexArray:f,pitchWithMap:F,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ve,unwrappedTileID:P,width:this.transform.width,height:this.transform.height,translation:ce},De=ie(Se,m,u.lineOffsetX*Se,u.lineOffsetY*Se,!1,u,!1,Pe);let Ke=!1,et=!1,pt=!0;if(De){const St=.5*te*le+oe,lt=new l.P(-100,-100),at=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Rt=new qt,ln=De.first,ct=De.last;let xt=[];for(let _n=ln.path.length-1;_n>=1;_n--)xt.push(ln.path[_n]);for(let _n=1;_n<ct.path.length;_n++)xt.push(ct.path[_n]);const sn=2.5*St;if(z){const _n=this.projectPathToScreenSpace(xt,Pe,z);xt=_n.some(Tn=>Tn.signedDistanceFromCamera<=0)?[]:_n.map(Tn=>Tn.point)}let ir=[];if(xt.length>0){const _n=xt[0].clone(),Tn=xt[0].clone();for(let or=1;or<xt.length;or++)_n.x=Math.min(_n.x,xt[or].x),_n.y=Math.min(_n.y,xt[or].y),Tn.x=Math.max(Tn.x,xt[or].x),Tn.y=Math.max(Tn.y,xt[or].y);ir=_n.x>=lt.x&&Tn.x<=at.x&&_n.y>=lt.y&&Tn.y<=at.y?[xt]:Tn.x<lt.x||_n.x>at.x||Tn.y<lt.y||_n.y>at.y?[]:l.al([xt],lt.x,lt.y,at.x,at.y)}for(const _n of ir){Rt.reset(_n,.25*St);let Tn=0;Tn=Rt.length<=.5*St?1:Math.ceil(Rt.paddedLength/sn)+1;for(let or=0;or<Tn;or++){const ei=or/Math.max(Tn-1,1),vo=Rt.lerp(ei),sr=vo.x+Ft,Pi=vo.y+Ft;fe.push(sr,Pi,St,0);const fi=sr-St,ti=Pi-St,mi=sr+St,No=Pi+St;if(pt=pt&&this.isOffscreen(fi,ti,mi,No),et=et||this.isInsideGrid(fi,ti,mi,No),r!=="always"&&this.grid.hitTestCircle(sr,Pi,St,r,X)&&(Ke=!0,!O))return{circles:[],offscreen:!1,collisionDetected:Ke}}}}return{circles:!O&&Ke||!et||le<this.perspectiveRatioCutoff?[]:fe,offscreen:pt,collisionDetected:Ke}}projectPathToScreenSpace(r,u,f){return r.map(m=>se(m.x,m.y,f,u.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,m=1/0,y=-1/0,S=-1/0;for(const O of r){const F=new l.P(O.x+Ft,O.y+Ft);f=Math.min(f,F.x),m=Math.min(m,F.y),y=Math.max(y,F.x),S=Math.max(S,F.y),u.push(F)}const P=this.grid.query(f,m,y,S).concat(this.ignoredGrid.query(f,m,y,S)),E={},z={};for(const O of P){const F=O.key;if(E[F.bucketInstanceId]===void 0&&(E[F.bucketInstanceId]={}),E[F.bucketInstanceId][F.featureIndex])continue;const X=[new l.P(O.x1,O.y1),new l.P(O.x2,O.y1),new l.P(O.x2,O.y2),new l.P(O.x1,O.y2)];l.am(u,X)&&(E[F.bucketInstanceId][F.featureIndex]=!0,z[F.bucketInstanceId]===void 0&&(z[F.bucketInstanceId]=[]),z[F.bucketInstanceId].push(F.featureIndex))}return z}insertCollisionBox(r,u,f,m,y,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:S,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,f,m,y,S){const P=f?this.ignoredGrid:this.grid,E={bucketInstanceId:m,featureIndex:y,collisionGroupID:S,overlapMode:u};for(let z=0;z<r.length;z+=4)P.insertCircle(E,r[z],r[z+1],r[z+2])}projectAndGetPerspectiveRatio(r,u,f,m,y){let S;y?(S=[u,f,y(u,f),1],l.af(S,S,r)):(S=[u,f,0,1],wn(S,S,r));const P=S[3];return{point:new l.P((S[0]/P+1)/2*this.transform.width+Ft,(-S[1]/P+1)/2*this.transform.height+Ft),perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}getPerspectiveRatio(r,u,f,m,y){const S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(u,f,m,y):se(u,f,r,y);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(r,u,f,m){return f<Ft||r>=this.screenRightBoundary||m<Ft||u>this.screenBottomBoundary}isInsideGrid(r,u,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.an([]);return l.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,u,f,m,y,S,P,E,z,O){let F=new l.P(1,0),X=new l.P(0,1);const te=new l.P(r.anchorPointX+P[0],r.anchorPointY+P[1]);if(S&&!y){const pt=this.projectAndGetPerspectiveRatio(f,te.x+1,te.y,m,z).point.sub(E.point).unit(),St=Math.atan(pt.y/pt.x)+(pt.x<0?Math.PI:0),lt=Math.sin(St),at=Math.cos(St);F=new l.P(at,lt),X=new l.P(-lt,at)}else if(!S&&y){const pt=-this.transform.angle,St=Math.sin(pt),lt=Math.cos(pt);F=new l.P(lt,St),X=new l.P(-St,lt)}let oe=E.point,ce=u;if(y){oe=te;const pt=this.transform.zoom-Math.floor(this.transform.zoom);ce=Math.pow(2,-pt),ce*=this.mapProjection.getPitchedTextCorrection(this.transform,te,m),O||(ce*=l.ac(.5+E.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}O&&(oe=oe.add(F.mult(O.x*ce)).add(X.mult(O.y*ce)));const pe=r.x1*ce,fe=r.x2*ce,ve=(pe+fe)/2,le=r.y1*ce,Se=r.y2*ce,Pe=(le+Se)/2,De=[{offsetX:pe,offsetY:le},{offsetX:ve,offsetY:le},{offsetX:fe,offsetY:le},{offsetX:fe,offsetY:Pe},{offsetX:fe,offsetY:Se},{offsetX:ve,offsetY:Se},{offsetX:pe,offsetY:Se},{offsetX:pe,offsetY:Pe}];let Ke=[];for(const{offsetX:pt,offsetY:St}of De)Ke.push(new l.P(oe.x+F.x*pt+X.x*St,oe.y+F.y*pt+X.y*St));let et=!1;if(y){const pt=Ke.map(St=>this.projectAndGetPerspectiveRatio(f,St.x,St.y,m,z));et=pt.some(St=>!St.isOccluded),Ke=pt.map(St=>St.point)}else et=!0;return{box:l.ao(Ke),allPointsOccluded:!et}}}function dn(v,r,u){return r*(l.X/(v.tileSize*Math.pow(2,u-v.tileID.overscaledZ)))}class cr{constructor(r,u,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Un{constructor(r,u,f,m,y){this.text=new cr(r?r.text:null,u,f,y),this.icon=new cr(r?r.icon:null,u,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class fn{constructor(r,u,f){this.text=r,this.icon=u,this.skipFade=f}}class Be{constructor(){this.invProjMatrix=l.H(),this.viewportMatrix=l.H(),this.circles=[]}}class Ne{constructor(r,u,f,m,y){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=y}}class ht{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[r]}}function $t(v,r,u,f,m){const{horizontalAlign:y,verticalAlign:S}=l.au(v);return new l.P(-(y-.5)*r+f[0]*m,-(S-.5)*u+f[1]*m)}class Jt{constructor(r,u,f,m,y,S){this.transform=r.clone(),this.terrain=f,this.collisionIndex=new rn(this.transform,u),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new ht(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const u=this.terrain;return u?(f,m)=>u.getElevation(r,f,m):null}getBucketParts(r,u,f,m){const y=f.getBucket(u),S=f.latestFeatureIndex;if(!y||!S||u.id!==y.layerIds[0])return;const P=f.collisionBoxArray,E=y.layers[0].layout,z=y.layers[0].paint,O=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),F=f.tileSize/l.X,X=f.tileID.toUnwrapped(),te=this.transform.calculatePosMatrix(X),oe=E.get("text-pitch-alignment")==="map",ce=E.get("text-rotation-alignment")==="map",pe=dn(f,1,this.transform.zoom),fe=this.collisionIndex.mapProjection.translatePosition(this.transform,f,z.get("text-translate"),z.get("text-translate-anchor")),ve=this.collisionIndex.mapProjection.translatePosition(this.transform,f,z.get("icon-translate"),z.get("icon-translate-anchor")),le=Cn(te,oe,ce,this.transform,pe);let Se=null;if(oe){const De=cn(te,oe,ce,this.transform,pe);Se=l.L([],this.transform.labelPlaneMatrix,De)}this.retainedQueryData[y.bucketInstanceId]=new Ne(y.bucketInstanceId,S,y.sourceLayerIndex,y.index,f.tileID);const Pe={bucket:y,layout:E,translationText:fe,translationIcon:ve,posMatrix:te,unwrappedTileID:X,textLabelPlaneMatrix:le,labelToScreenMatrix:Se,scale:O,textPixelRatio:F,holdingForFade:f.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:l.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(const De of y.sortKeyRanges){const{sortKey:Ke,symbolInstanceStart:et,symbolInstanceEnd:pt}=De;r.push({sortKey:Ke,symbolInstanceStart:et,symbolInstanceEnd:pt,parameters:Pe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Pe})}attemptAnchorPlacement(r,u,f,m,y,S,P,E,z,O,F,X,te,oe,ce,pe,fe,ve,le){const Se=l.aq[r.textAnchor],Pe=[r.textOffset0,r.textOffset1],De=$t(Se,f,m,Pe,y),Ke=this.collisionIndex.placeCollisionBox(u,X,E,z,O,P,S,pe,F.predicate,le,De);if((!ve||this.collisionIndex.placeCollisionBox(ve,X,E,z,O,P,S,fe,F.predicate,le,De).placeable)&&Ke.placeable){let et;if(this.prevPlacement&&this.prevPlacement.variableOffsets[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID].text&&(et=this.prevPlacement.variableOffsets[te.crossTileID].anchor),te.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[te.crossTileID]={textOffset:Pe,width:f,height:m,anchor:Se,textBoxScale:y,prevAnchor:et},this.markUsedJustification(oe,Se,te,ce),oe.allowVerticalPlacement&&(this.markUsedOrientation(oe,ce,te),this.placedOrientations[te.crossTileID]=ce),{shift:De,placedGlyphBoxes:Ke}}}placeLayerBucketPart(r,u,f){const{bucket:m,layout:y,translationText:S,translationIcon:P,posMatrix:E,unwrappedTileID:z,textLabelPlaneMatrix:O,labelToScreenMatrix:F,textPixelRatio:X,holdingForFade:te,collisionBoxArray:oe,partiallyEvaluatedTextSize:ce,collisionGroup:pe}=r.parameters,fe=y.get("text-optional"),ve=y.get("icon-optional"),le=l.ar(y,"text-overlap","text-allow-overlap"),Se=le==="always",Pe=l.ar(y,"icon-overlap","icon-allow-overlap"),De=Pe==="always",Ke=y.get("text-rotation-alignment")==="map",et=y.get("text-pitch-alignment")==="map",pt=y.get("icon-text-fit")!=="none",St=y.get("symbol-z-order")==="viewport-y",lt=Se&&(De||!m.hasIconData()||ve),at=De&&(Se||!m.hasTextData()||fe);!m.collisionArrays&&oe&&m.deserializeCollisionBoxes(oe);const Rt=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),ln=(ct,xt,sn)=>{var ir,_n;if(u[ct.crossTileID])return;if(te)return void(this.placements[ct.crossTileID]=new fn(!1,!1,!1));let Tn=!1,or=!1,ei=!0,vo=null,sr={box:null,placeable:!1,offscreen:null},Pi={placeable:!1},fi=null,ti=null,mi=null,No=0,Qa=0,Cc=0;xt.textFeatureIndex?No=xt.textFeatureIndex:ct.useRuntimeCollisionCircles&&(No=ct.featureIndex),xt.verticalTextFeatureIndex&&(Qa=xt.verticalTextFeatureIndex);const el=xt.textBox;if(el){const eo=Zr=>{let ni=l.ah.horizontal;if(m.allowVerticalPlacement&&!Zr&&this.prevPlacement){const ji=this.prevPlacement.placedOrientations[ct.crossTileID];ji&&(this.placedOrientations[ct.crossTileID]=ji,ni=ji,this.markUsedOrientation(m,ni,ct))}return ni},to=(Zr,ni)=>{if(m.allowVerticalPlacement&&ct.numVerticalGlyphVertices>0&&xt.verticalTextBox){for(const ji of m.writingModes)if(ji===l.ah.vertical?(sr=ni(),Pi=sr):sr=Zr(),sr&&sr.placeable)break}else sr=Zr()},Ps=ct.textAnchorOffsetStartIndex,_o=ct.textAnchorOffsetEndIndex;if(_o===Ps){const Zr=(ni,ji)=>{const En=this.collisionIndex.placeCollisionBox(ni,le,X,E,z,et,Ke,S,pe.predicate,Rt);return En&&En.placeable&&(this.markUsedOrientation(m,ji,ct),this.placedOrientations[ct.crossTileID]=ji),En};to(()=>Zr(el,l.ah.horizontal),()=>{const ni=xt.verticalTextBox;return m.allowVerticalPlacement&&ct.numVerticalGlyphVertices>0&&ni?Zr(ni,l.ah.vertical):{box:null,offscreen:null}}),eo(sr&&sr.placeable)}else{let Zr=l.aq[(_n=(ir=this.prevPlacement)===null||ir===void 0?void 0:ir.variableOffsets[ct.crossTileID])===null||_n===void 0?void 0:_n.anchor];const ni=(En,ca,tl)=>{const nl=En.x2-En.x1,Cm=En.y2-En.y1,P_=ct.textBoxScale,Tm=pt&&Pe==="never"?ca:null;let ks=null,Pm=le==="never"?1:2,Pc="never";Zr&&Pm++;for(let au=0;au<Pm;au++){for(let kc=Ps;kc<_o;kc++){const Ec=m.textAnchorOffsets.get(kc);if(Zr&&Ec.textAnchor!==Zr)continue;const rl=this.attemptAnchorPlacement(Ec,En,nl,Cm,P_,Ke,et,X,E,z,pe,Pc,ct,m,tl,S,P,Tm,Rt);if(rl&&(ks=rl.placedGlyphBoxes,ks&&ks.placeable))return Tn=!0,vo=rl.shift,ks}Zr?Zr=null:Pc=le}return f&&!ks&&(ks={box:this.collisionIndex.placeCollisionBox(el,"always",X,E,z,et,Ke,S,pe.predicate,Rt,new l.P(0,0)).box,offscreen:!1,placeable:!1}),ks};to(()=>ni(el,xt.iconBox,l.ah.horizontal),()=>{const En=xt.verticalTextBox;return m.allowVerticalPlacement&&(!sr||!sr.placeable)&&ct.numVerticalGlyphVertices>0&&En?ni(En,xt.verticalIconBox,l.ah.vertical):{box:null,occluded:!0,offscreen:null}}),sr&&(Tn=sr.placeable,ei=sr.offscreen);const ji=eo(sr&&sr.placeable);if(!Tn&&this.prevPlacement){const En=this.prevPlacement.variableOffsets[ct.crossTileID];En&&(this.variableOffsets[ct.crossTileID]=En,this.markUsedJustification(m,En.anchor,ct,ji))}}}if(fi=sr,Tn=fi&&fi.placeable,ei=fi&&fi.offscreen,ct.useRuntimeCollisionCircles){const eo=m.text.placedSymbolArray.get(ct.centerJustifiedTextSymbolIndex),to=l.ai(m.textSizeData,ce,eo),Ps=y.get("text-padding");ti=this.collisionIndex.placeCollisionCircles(le,eo,m.lineVertexArray,m.glyphOffsetArray,to,E,z,O,F,f,et,pe.predicate,ct.collisionCircleDiameter,Ps,S,Rt),ti.circles.length&&ti.collisionDetected&&!f&&l.w("Collisions detected, but collision boxes are not shown"),Tn=Se||ti.circles.length>0&&!ti.collisionDetected,ei=ei&&ti.offscreen}if(xt.iconFeatureIndex&&(Cc=xt.iconFeatureIndex),xt.iconBox){const eo=to=>this.collisionIndex.placeCollisionBox(to,Pe,X,E,z,et,Ke,P,pe.predicate,Rt,pt&&vo?vo:void 0);Pi&&Pi.placeable&&xt.verticalIconBox?(mi=eo(xt.verticalIconBox),or=mi.placeable):(mi=eo(xt.iconBox),or=mi.placeable),ei=ei&&mi.offscreen}const Qi=fe||ct.numHorizontalGlyphVertices===0&&ct.numVerticalGlyphVertices===0,Tc=ve||ct.numIconVertices===0;Qi||Tc?Tc?Qi||(or=or&&Tn):Tn=or&&Tn:or=Tn=or&&Tn;const Od=or&&mi.placeable;if(Tn&&fi.placeable&&this.collisionIndex.insertCollisionBox(fi.box,le,y.get("text-ignore-placement"),m.bucketInstanceId,Pi&&Pi.placeable&&Qa?Qa:No,pe.ID),Od&&this.collisionIndex.insertCollisionBox(mi.box,Pe,y.get("icon-ignore-placement"),m.bucketInstanceId,Cc,pe.ID),ti&&Tn&&this.collisionIndex.insertCollisionCircles(ti.circles,le,y.get("text-ignore-placement"),m.bucketInstanceId,No,pe.ID),f&&this.storeCollisionData(m.bucketInstanceId,sn,xt,fi,mi,ti),ct.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ct.crossTileID]=new fn(Tn||lt,or||at,ei||m.justReloaded),u[ct.crossTileID]=!0};if(St){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ct=m.getSortedSymbolIndexes(this.transform.angle);for(let xt=ct.length-1;xt>=0;--xt){const sn=ct[xt];ln(m.symbolInstances.get(sn),m.collisionArrays[sn],sn)}}else for(let ct=r.symbolInstanceStart;ct<r.symbolInstanceEnd;ct++)ln(m.symbolInstances.get(ct),m.collisionArrays[ct],ct);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const ct=this.collisionCircleArrays[m.bucketInstanceId];l.as(ct.invProjMatrix,E),ct.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(r,u,f,m,y,S){if(f.textBox||f.iconBox){let P,E;this.collisionBoxArrays.has(r)?P=this.collisionBoxArrays.get(r):(P=new Map,this.collisionBoxArrays.set(r,P)),P.has(u)?E=P.get(u):(E={text:null,icon:null},P.set(u,E)),f.textBox&&(E.text=m.box),f.iconBox&&(E.icon=y.box)}if(S){let P=this.collisionCircleArrays[r];P===void 0&&(P=this.collisionCircleArrays[r]=new Be);for(let E=0;E<S.circles.length;E+=4)P.circles.push(S.circles[E+0]),P.circles.push(S.circles[E+1]),P.circles.push(S.circles[E+2]),P.circles.push(S.collisionDetected?1:0)}}markUsedJustification(r,u,f,m){let y;y=m===l.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.at(u)];const S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const P of S)P>=0&&(r.text.placedSymbolArray.get(P).crossTileID=y>=0&&P!==y?0:f.crossTileID)}markUsedOrientation(r,u,f){const m=u===l.ah.horizontal||u===l.ah.horizontalOnly?u:0,y=u===l.ah.vertical?u:0,S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const P of S)r.text.placedSymbolArray.get(P).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(r):1,y=u?u.opacities:{},S=u?u.variableOffsets:{},P=u?u.placedOrientations:{};for(const E in this.placements){const z=this.placements[E],O=y[E];O?(this.opacities[E]=new Un(O,m,z.text,z.icon),f=f||z.text!==O.text.placed||z.icon!==O.icon.placed):(this.opacities[E]=new Un(null,m,z.text,z.icon,z.skipFade),f=f||z.text||z.icon)}for(const E in y){const z=y[E];if(!this.opacities[E]){const O=new Un(z,m,!1,!1);O.isHidden()||(this.opacities[E]=O,f=f||z.text.placed||z.icon.placed)}}for(const E in S)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=S[E]);for(const E in P)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=P[E]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const f={};for(const m of u){const y=m.getBucket(r);y&&m.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,m.tileID,f,m.collisionBoxArray)}}updateBucketOpacities(r,u,f,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],S=y.layout,P=new Un(null,0,!1,!1,!0),E=S.get("text-allow-overlap"),z=S.get("icon-allow-overlap"),O=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=S.get("text-rotation-alignment")==="map",X=S.get("text-pitch-alignment")==="map",te=S.get("icon-text-fit")!=="none",oe=new Un(null,0,E&&(z||!r.hasIconData()||S.get("icon-optional")),z&&(E||!r.hasTextData()||S.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);const ce=(fe,ve,le)=>{for(let Se=0;Se<ve/4;Se++)fe.opacityVertexArray.emplaceBack(le);fe.hasVisibleVertices=fe.hasVisibleVertices||le!==pi},pe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let fe=0;fe<r.symbolInstances.length;fe++){const ve=r.symbolInstances.get(fe),{numHorizontalGlyphVertices:le,numVerticalGlyphVertices:Se,crossTileID:Pe}=ve;let De=this.opacities[Pe];f[Pe]?De=P:De||(De=oe,this.opacities[Pe]=De),f[Pe]=!0;const Ke=ve.numIconVertices>0,et=this.placedOrientations[ve.crossTileID],pt=et===l.ah.vertical,St=et===l.ah.horizontal||et===l.ah.horizontalOnly;if(le>0||Se>0){const at=gr(De.text);ce(r.text,le,pt?pi:at),ce(r.text,Se,St?pi:at);const Rt=De.text.isHidden();[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach(xt=>{xt>=0&&(r.text.placedSymbolArray.get(xt).hidden=Rt||pt?1:0)}),ve.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ve.verticalPlacedTextSymbolIndex).hidden=Rt||St?1:0);const ln=this.variableOffsets[ve.crossTileID];ln&&this.markUsedJustification(r,ln.anchor,ve,et);const ct=this.placedOrientations[ve.crossTileID];ct&&(this.markUsedJustification(r,"left",ve,ct),this.markUsedOrientation(r,ct,ve))}if(Ke){const at=gr(De.icon),Rt=!(te&&ve.verticalPlacedIconSymbolIndex&&pt);ve.placedIconSymbolIndex>=0&&(ce(r.icon,ve.numIconVertices,Rt?at:pi),r.icon.placedSymbolArray.get(ve.placedIconSymbolIndex).hidden=De.icon.isHidden()),ve.verticalPlacedIconSymbolIndex>=0&&(ce(r.icon,ve.numVerticalIconVertices,Rt?pi:at),r.icon.placedSymbolArray.get(ve.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}const lt=pe&&pe.has(fe)?pe.get(fe):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const at=r.collisionArrays[fe];if(at){let Rt=new l.P(0,0);if(at.textBox||at.verticalTextBox){let ln=!0;if(O){const ct=this.variableOffsets[Pe];ct?(Rt=$t(ct.anchor,ct.width,ct.height,ct.textOffset,ct.textBoxScale),F&&Rt._rotate(X?this.transform.angle:-this.transform.angle)):ln=!1}if(at.textBox||at.verticalTextBox){let ct;at.textBox&&(ct=pt),at.verticalTextBox&&(ct=St),lr(r.textCollisionBox.collisionVertexArray,De.text.placed,!ln||ct,lt.text,Rt.x,Rt.y)}}if(at.iconBox||at.verticalIconBox){const ln=!!(!St&&at.verticalIconBox);let ct;at.iconBox&&(ct=ln),at.verticalIconBox&&(ct=!ln),lr(r.iconCollisionBox.collisionVertexArray,De.icon.placed,ct,lt.icon,te?Rt.x:0,te?Rt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const fe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=fe.invProjMatrix,r.placementViewportMatrix=fe.viewportMatrix,r.collisionCircleArray=fe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function lr(v,r,u,f,m,y){f&&f.length!==0||(f=[0,0,0,0]);const S=f[0]-Ft,P=f[1]-Ft,E=f[2]-Ft,z=f[3]-Ft;v.emplaceBack(r?1:0,u?1:0,m||0,y||0,S,P),v.emplaceBack(r?1:0,u?1:0,m||0,y||0,E,P),v.emplaceBack(r?1:0,u?1:0,m||0,y||0,E,z),v.emplaceBack(r?1:0,u?1:0,m||0,y||0,S,z)}const on=Math.pow(2,25),di=Math.pow(2,24),Ss=Math.pow(2,17),Jr=Math.pow(2,16),Nr=Math.pow(2,9),za=Math.pow(2,8),vn=Math.pow(2,1);function gr(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const r=v.placed?1:0,u=Math.floor(127*v.opacity);return u*on+r*di+u*Ss+r*Jr+u*Nr+r*za+u*vn+r}const pi=0;function $i(){return{isOccluded:(v,r,u)=>!1,getPitchedTextCorrection:(v,r,u)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,r,u,f){throw new Error("Not implemented.")},translatePosition:(v,r,u,f)=>function(m,y,S,P,E=!1){if(!S[0]&&!S[1])return[0,0];const z=E?P==="map"?m.angle:0:P==="viewport"?-m.angle:0;if(z){const O=Math.sin(z),F=Math.cos(z);S=[S[0]*F-S[1]*O,S[0]*O+S[1]*F]}return[E?S[0]:dn(y,S[0],m.zoom),E?S[1]:dn(y,S[1],m.zoom)]}(v,r,u,f),getCircleRadiusCorrection:v=>1}}class Ir{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,f,m,y){const S=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(S,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((P,E)=>P.sortKey-E.sortKey));this._currentPartIndex<S.length;)if(u.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,y())return!0;return!1}}class jl{constructor(r,u,f,m,y,S,P,E){this.placement=new Jt(r,$i(),u,S,P,E),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(r,u,f){const m=I.now(),y=()=>!this._forceFullPlacement&&I.now()-m>2;for(;this._currentPlacementIndex>=0;){const S=u[r[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=P)&&(!S.maxzoom||S.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Ir(S)),this._inProgressLayer.continuePlacement(f[S.source],this.placement,this._showCollisionBoxes,S,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const po=512/l.X/2;class Sr{constructor(r,u,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let y=0;y<u.length;y++){const S=u.get(y),P=S.key,E=m.get(P);E?E.push(S):m.set(P,[S])}for(const[y,S]of m){const P={positions:S.map(E=>({x:Math.floor(E.anchorX*po),y:Math.floor(E.anchorY*po)})),crossTileIDs:S.map(E=>E.crossTileID)};if(P.positions.length>128){const E=new l.av(P.positions.length,16,Uint16Array);for(const{x:z,y:O}of P.positions)E.add(z,O);E.finish(),delete P.positions,P.index=E}this._symbolsByKey[y]=P}}getScaledCoordinates(r,u){const{x:f,y:m,z:y}=this.tileID.canonical,{x:S,y:P,z:E}=u.canonical,z=po/Math.pow(2,E-y),O=(P*l.X+r.anchorY)*z,F=m*l.X*po;return{x:Math.floor((S*l.X+r.anchorX)*z-f*l.X*po),y:Math.floor(O-F)}}findMatches(r,u,f){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let y=0;y<r.length;y++){const S=r.get(y);if(S.crossTileID)continue;const P=this._symbolsByKey[S.key];if(!P)continue;const E=this.getScaledCoordinates(S,u);if(P.index){const z=P.index.range(E.x-m,E.y-m,E.x+m,E.y+m).sort();for(const O of z){const F=P.crossTileIDs[O];if(!f[F]){f[F]=!0,S.crossTileID=F;break}}}else if(P.positions)for(let z=0;z<P.positions.length;z++){const O=P.positions[z],F=P.crossTileIDs[z];if(Math.abs(O.x-E.x)<=m&&Math.abs(O.y-E.y)<=m&&!f[F]){f[F]=!0,S.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Gu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class fo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const f in this.indexes){const m=this.indexes[f],y={};for(const S in m){const P=m[S];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+u),y[P.tileID.key]=P}this.indexes[f]=y}this.lng=r}addBucket(r,u,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<u.symbolInstances.length;y++)u.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const y in this.indexes){const S=this.indexes[y];if(Number(y)>r.overscaledZ)for(const P in S){const E=S[P];E.tileID.isChildOf(r)&&E.findMatches(u.symbolInstances,r,m)}else{const P=S[r.scaledTo(Number(y)).key];P&&P.findMatches(u.symbolInstances,r,m)}}for(let y=0;y<u.symbolInstances.length;y++){const S=u.symbolInstances.get(y);S.crossTileID||(S.crossTileID=f.generate(),m[S.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Sr(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const f of u.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let u=!1;for(const f in this.indexes){const m=this.indexes[f];for(const y in m)r[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[y]),delete m[y],u=!0)}return u}}class Kh{constructor(){this.layerIndexes={},this.crossTileIDs=new Gu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new fo);let y=!1;const S={};m.handleWrapJump(f);for(const P of u){const E=P.getBucket(r);E&&r.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(P.tileID,E,this.crossTileIDs)&&(y=!0),S[E.bucketInstanceId]=!0)}return m.removeStaleBuckets(S)&&(y=!0),y}pruneUnusedLayers(r){const u={};r.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const mo=(v,r)=>l.t(v,r&&r.filter(u=>u.identifier!=="source.canvas")),t_=l.aw();class Zu extends l.E{constructor(r,u={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const m=this.sourceCaches[f].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[f].reload()}},this.map=r,this.dispatcher=new bt(jt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,m)=>this.getGlyphs(f,m)),this.dispatcher.registerMessageHandler("GI",(f,m)=>this.getImages(f,m)),this.imageManager=new be,this.imageManager.setEventedParent(this),this.glyphManager=new Ue(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Kt(256,512),this.crossTileSymbolIndex=new Kh,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.ay()),ot().on(Ve,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const m=this.sourceCaches[f.sourceId];if(!m)return;const y=m.getSource();if(y&&y.vectorLayerIds)for(const S in this._layers){const P=this._layers[S];P.source===y.id&&this._validateLayer(P)}})}loadURL(r,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;l.h(m,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,u,f)}).catch(S=>{this._loadStyleRequest=null,S&&!y.signal.aborted&&this.fire(new l.j(S))})}loadJSON(r,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,I.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(r,u,f)}).catch(()=>{})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(t_,{validate:!1})}_load(r,u,f){var m;const y=u.transformStyle?u.transformStyle(f,r):r;if(!u.validate||!mo(this,l.u(y))){this._loaded=!0,this.stylesheet=y;for(const S in y.sources)this.addSource(S,y.sources[S],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new Xe(this.stylesheet.light),this.sky=new ut(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const r=l.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const f=l.aA(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(r,u=!1,f=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,S,P,E){return l._(this,void 0,void 0,function*(){const z=Me(y),O=P>1?"@2x":"",F={},X={};for(const{id:te,url:oe}of z){const ce=S.transformRequest(Ee(oe,O,".json"),"SpriteJSON");F[te]=l.h(ce,E);const pe=S.transformRequest(Ee(oe,O,".png"),"SpriteImage");X[te]=B.getImage(pe,E)}return yield Promise.all([...Object.values(F),...Object.values(X)]),function(te,oe){return l._(this,void 0,void 0,function*(){const ce={};for(const pe in te){ce[pe]={};const fe=I.getImageCanvasContext((yield oe[pe]).data),ve=(yield te[pe]).data;for(const le in ve){const{width:Se,height:Pe,x:De,y:Ke,sdf:et,pixelRatio:pt,stretchX:St,stretchY:lt,content:at,textFitWidth:Rt,textFitHeight:ln}=ve[le];ce[pe][le]={data:null,pixelRatio:pt,sdf:et,stretchX:St,stretchY:lt,content:at,textFitWidth:Rt,textFitHeight:ln,spriteData:{width:Se,height:Pe,x:De,y:Ke,context:fe}}}}return ce})}(F,X)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const S in y){this._spritesImagesIds[S]=[];const P=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(E=>!(E in y)):[];for(const E of P)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(const E in y[S]){const z=S==="default"?E:`${S}:${E}`;this._spritesImagesIds[S].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,y[S][E],!1):this.imageManager.addImage(z,y[S][E]),u&&(this._changedImages[z]=!0)}}}).catch(y=>{this._spriteRequest=null,m=y,this.fire(new l.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const f=r.sourceLayer;if(!f)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.j(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,u=!1){const f=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u?l.aB(f):f);const m=[];for(const y of r)if(f[y]){const S=u?l.aB(f[y]):f[y];m.push(S)}return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(u){const m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(const S in this._updatedSources){const P=this._updatedSources[S];if(P==="reload")this._reloadSource(S);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const y=this.sourceCaches[m];f[m]=y.used,y.used=!1}for(const m of this._order){const y=this._layers[m];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const m in f){const y=this.sourceCaches[m];!!f[m]!=!!y.used&&y.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){var f;this._checkLoaded();const m=this.serialize();if(r=u.transformStyle?u.transformStyle(m,r):r,((f=u.validate)===null||f===void 0||f)&&mo(this,l.u(r)))return!1;(r=l.aB(r)).layers=l.az(r.layers);const y=l.aC(m,r),S=this._getOperationsToPerform(y);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const P of S.operations)P();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const u=[],f=[];for(const m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":u.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":u.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,m.args));break;case"setSky":u.push(()=>this.setSky.apply(this,m.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":u.push(()=>{});break;default:f.push(m.command)}return{operations:u,unimplemented:f}}addImage(r,u){if(this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.u.source,`sources.${r}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[r]=new zt(r,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new l.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new l.j(new Error(`Layer "${m}" already exists on this map.`)));let y;if(r.type==="custom"){if(mo(this,l.aD(r)))return;y=l.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=l.aB(r),r=l.e(r,{source:m})),this._validate(l.u.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;y=l.aA(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}const S=u?this._order.indexOf(u):this._order.length;if(u&&S===-1)this.fire(new l.j(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(S,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){const P=this._removedLayers[m];delete this._removedLayers[m],P.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new l.j(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===u&&m.maxzoom===f||(u!=null&&(m.minzoom=u),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!l.aE(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.u.filter,`layers.${m.id}.filter`,u,null,f)||(m.filter=l.aB(u),this._updateLayer(m)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.aB(this.getLayer(r).filter)}setLayoutProperty(r,u,f,m={}){this._checkLoaded();const y=this.getLayer(r);y?l.aE(y.getLayoutProperty(u),f)||(y.setLayoutProperty(u,f,m),this._updateLayer(y)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const f=this.getLayer(r);if(f)return f.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,f,m={}){this._checkLoaded();const y=this.getLayer(r);y?l.aE(y.getPaintProperty(u),f)||(y.setPaintProperty(u,f,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const f=r.source,m=r.sourceLayer,y=this.sourceCaches[f];if(y===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const S=y.getSource().type;S==="geojson"&&m?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||m?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,r.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const y=m.getSource().type,S=y==="vector"?r.sourceLayer:void 0;y!=="vector"||S?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(S,r.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,f=r.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.aF(this.sourceCaches,y=>y.serialize()),u=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,m=this.stylesheet;return l.aG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:u,terrain:f},y=>y!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=S=>this._layers[S].type==="fill-extrusion",f={},m=[];for(let S=this._order.length-1;S>=0;S--){const P=this._order[S];if(u(P)){f[P]=S;for(const E of r){const z=E[P];if(z)for(const O of z)m.push(O)}}}m.sort((S,P)=>P.intersectionZ-S.intersectionZ);const y=[];for(let S=this._order.length-1;S>=0;S--){const P=this._order[S];if(u(P))for(let E=m.length-1;E>=0;E--){const z=m[E].feature;if(f[z.layer.id]<S)break;y.push(z),m.pop()}else for(const E of r){const z=E[P];if(z)for(const O of z)y.push(O.feature)}}return y}queryRenderedFeatures(r,u,f){u&&u.filter&&this._validate(l.u.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const P of u.layers){const E=this._layers[P];if(!E)return this.fire(new l.j(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];m[E.source]=!0}}const y=[];u.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const P in this.sourceCaches)u.layers&&!m[P]||y.push(Ut(this.sourceCaches[P],this._layers,S,r,u,f));return this.placement&&y.push(function(P,E,z,O,F,X,te){const oe={},ce=X.queryRenderedSymbols(O),pe=[];for(const fe of Object.keys(ce).map(Number))pe.push(te[fe]);pe.sort(Wt);for(const fe of pe){const ve=fe.featureIndex.lookupSymbolFeatures(ce[fe.bucketInstanceId],E,fe.bucketIndex,fe.sourceLayerIndex,F.filter,F.layers,F.availableImages,P);for(const le in ve){const Se=oe[le]=oe[le]||[],Pe=ve[le];Pe.sort((De,Ke)=>{const et=fe.featureSortOrder;if(et){const pt=et.indexOf(De.featureIndex);return et.indexOf(Ke.featureIndex)-pt}return Ke.featureIndex-De.featureIndex});for(const De of Pe)Se.push(De)}}for(const fe in oe)oe[fe].forEach(ve=>{const le=ve.feature,Se=z[P[fe].source].getFeatureState(le.layer["source-layer"],le.id);le.source=le.layer.source,le.layer["source-layer"]&&(le.sourceLayer=le.layer["source-layer"]),le.state=Se});return oe}(this._layers,S,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,u){u&&u.filter&&this._validate(l.u.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[r];return f?function(m,y){const S=m.getRenderableIds().map(z=>m.getTileByID(z)),P=[],E={};for(let z=0;z<S.length;z++){const O=S[z],F=O.tileID.canonical.key;E[F]||(E[F]=!0,O.querySourceFeatures(P,y))}return P}(f,u):[]}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const S in r)if(!l.aE(r[S],f[S])){m=!0;break}if(!m)return;const y={now:I.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(y)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,u={}){const f=this.getSky();let m=!1;if(!r&&!f)return;if(r&&!f)m=!0;else if(!r&&f)m=!0;else for(const S in r)if(!l.aE(r[S],f[S])){m=!0;break}if(!m)return;const y={now:I.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,u),this.sky.updateTransitions(y)}_validate(r,u,f,m,y={}){return(!y||y.validate!==!1)&&mo(this,r.call(l.u,l.e({key:u,style:this.serialize(),value:f,styleSpec:l.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ot().off(Ve,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,f,m,y=!1){let S=!1,P=!1;const E={};for(const z of this._order){const O=this._layers[z];if(O.type!=="symbol")continue;if(!E[O.source]){const X=this.sourceCaches[O.source];E[O.source]=X.getRenderableIds(!0).map(te=>X.getTileByID(te)).sort((te,oe)=>oe.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(oe.tileID)?-1:1))}const F=this.crossTileSymbolIndex.addLayer(O,E[O.source],r.center.lng);S=S||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(I.now(),r.zoom))&&(this.pauseablePlacement=new jl(r,this.map.terrain,this._order,y,u,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(I.now()),P=!0),S&&this.pauseablePlacement.placement.setStale()),P||S)for(const z of this._order){const O=this._layers[z];O.type==="symbol"&&this.placement.updateLayerOpacities(O,E[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(I.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u){return l._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,u.icons),f})}getGlyphs(r,u){return l._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(u.stacks),m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(l.u.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,f={},m){this._checkLoaded();const y=[{id:r,url:u}],S=[...Me(this.stylesheet.sprite),...y];this._validate(l.u.sprite,"sprite",S,null,f)||(this.stylesheet.sprite=S,this._loadSprite(y,!0,m))}removeSprite(r){this._checkLoaded();const u=Me(this.stylesheet.sprite);if(u.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Me(this.stylesheet.sprite)}setSprite(r,u={},f){this._checkLoaded(),r&&this._validate(l.u.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var Qs=l.Y([{name:"a_pos",type:"Int16",components:2}]);const Cs={prelude:$n(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:$n(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:$n(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:$n(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:$n("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$n(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:$n(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:$n("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$n("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:$n("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:$n(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:$n(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:$n(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:$n(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:$n(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$n(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:$n(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:$n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:$n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:$n(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:$n(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:$n(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:$n(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:$n("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:$n("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:$n("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:$n("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function $n(v,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=y?y.concat(m):m,P={};return{fragmentSource:v=v.replace(u,(E,z,O,F,X)=>(P[X]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${O} ${F} ${X};
#else
uniform ${O} ${F} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${O} ${F} ${X} = u_${X};
#endif
`)),vertexSource:r=r.replace(u,(E,z,O,F,X)=>{const te=F==="float"?"vec2":"vec4",oe=X.match(/color/)?"color":te;return P[X]?z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${O} ${te} a_${X};
varying ${O} ${F} ${X};
#else
uniform ${O} ${F} u_${X};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${O} ${F} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${oe}(a_${X}, u_${X}_t);
#else
    ${O} ${F} ${X} = u_${X};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${O} ${te} a_${X};
#else
uniform ${O} ${F} u_${X};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${O} ${F} ${X} = a_${X};
#else
    ${O} ${F} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${O} ${F} ${X} = unpack_mix_${oe}(a_${X}, u_${X}_t);
#else
    ${O} ${F} ${X} = u_${X};
#endif
`}),staticAttributes:f,staticUniforms:S}}class Xh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,f,m,y,S,P,E,z){this.context=r;let O=this.boundPaintVertexBuffers.length!==m.length;for(let F=0;!O&&F<m.length;F++)this.boundPaintVertexBuffers[F]!==m[F]&&(O=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||O||this.boundIndexBuffer!==y||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==z?this.freshBind(u,f,m,y,S,P,E,z):(r.bindVertexArray.set(this.vao),P&&P.bind(),y&&y.dynamicDraw&&y.bind(),E&&E.bind(),z&&z.bind())}freshBind(r,u,f,m,y,S,P,E){const z=r.numAttributes,O=this.context,F=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=E,u.enableAttributes(F,r);for(const X of f)X.enableAttributes(F,r);S&&S.enableAttributes(F,r),P&&P.enableAttributes(F,r),E&&E.enableAttributes(F,r),u.bind(),u.setVertexAttribPointers(F,r,y);for(const X of f)X.bind(),X.setVertexAttribPointers(F,r,y);S&&(S.bind(),S.setVertexAttribPointers(F,r,y)),m&&m.bind(),P&&(P.bind(),P.setVertexAttribPointers(F,r,y)),E&&(E.bind(),E.setVertexAttribPointers(F,r,y)),O.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Yh=(v,r,u,f,m)=>({u_matrix:v,u_texture:0,u_ele_delta:r,u_fog_matrix:u,u_fog_color:f?f.properties.get("fog-color"):l.aM.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?f.calculateFogBlendOpacity(m):0,u_horizon_color:f?f.properties.get("horizon-color"):l.aM.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1});function La(v){const r=[];for(let u=0;u<v.length;u++){if(v[u]===null)continue;const f=v[u].split(" ");r.push(f.pop())}return r}class Jh{constructor(r,u,f,m,y,S){const P=r.gl;this.program=P.createProgram();const E=La(u.staticAttributes),z=f?f.getBinderAttributes():[],O=E.concat(z),F=Cs.prelude.staticUniforms?La(Cs.prelude.staticUniforms):[],X=u.staticUniforms?La(u.staticUniforms):[],te=f?f.getBinderUniforms():[],oe=F.concat(X).concat(te),ce=[];for(const De of oe)ce.indexOf(De)<0&&ce.push(De);const pe=f?f.defines():[];y&&pe.push("#define OVERDRAW_INSPECTOR;"),S&&pe.push("#define TERRAIN3D;");const fe=pe.concat(Cs.prelude.fragmentSource,u.fragmentSource).join(`
`),ve=pe.concat(Cs.prelude.vertexSource,u.vertexSource).join(`
`),le=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(le,fe),P.compileShader(le),!P.getShaderParameter(le,P.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${P.getShaderInfoLog(le)}`);P.attachShader(this.program,le);const Se=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(Se,ve),P.compileShader(Se),!P.getShaderParameter(Se,P.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${P.getShaderInfoLog(Se)}`);P.attachShader(this.program,Se),this.attributes={};const Pe={};this.numAttributes=O.length;for(let De=0;De<this.numAttributes;De++)O[De]&&(P.bindAttribLocation(this.program,De,O[De]),this.attributes[O[De]]=De);if(P.linkProgram(this.program),!P.getProgramParameter(this.program,P.LINK_STATUS))throw new Error(`Program failed to link: ${P.getProgramInfoLog(this.program)}`);P.deleteShader(Se),P.deleteShader(le);for(let De=0;De<ce.length;De++){const Ke=ce[De];if(Ke&&!Pe[Ke]){const et=P.getUniformLocation(this.program,Ke);et&&(Pe[Ke]=et)}}this.fixedUniforms=m(r,Pe),this.terrainUniforms=((De,Ke)=>({u_depth:new l.aH(De,Ke.u_depth),u_terrain:new l.aH(De,Ke.u_terrain),u_terrain_dim:new l.aI(De,Ke.u_terrain_dim),u_terrain_matrix:new l.aJ(De,Ke.u_terrain_matrix),u_terrain_unpack:new l.aK(De,Ke.u_terrain_unpack),u_terrain_exaggeration:new l.aI(De,Ke.u_terrain_exaggeration)}))(r,Pe),this.binderUniforms=f?f.getUniforms(r,Pe):[]}draw(r,u,f,m,y,S,P,E,z,O,F,X,te,oe,ce,pe,fe,ve){const le=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(y),r.setCullFace(S),E){r.activeTexture.set(le.TEXTURE2),le.bindTexture(le.TEXTURE_2D,E.depthTexture),r.activeTexture.set(le.TEXTURE3),le.bindTexture(le.TEXTURE_2D,E.texture);for(const Pe in this.terrainUniforms)this.terrainUniforms[Pe].set(E[Pe])}for(const Pe in this.fixedUniforms)this.fixedUniforms[Pe].set(P[Pe]);ce&&ce.setUniforms(r,this.binderUniforms,te,{zoom:oe});let Se=0;switch(u){case le.LINES:Se=2;break;case le.TRIANGLES:Se=3;break;case le.LINE_STRIP:Se=1}for(const Pe of X.get()){const De=Pe.vaos||(Pe.vaos={});(De[z]||(De[z]=new Xh)).bind(r,this,O,ce?ce.getPaintVertexBuffers():[],F,Pe.vertexOffset,pe,fe,ve),le.drawElements(u,Pe.primitiveLength*Se,le.UNSIGNED_SHORT,Pe.primitiveOffset*Se*2)}}}function Ku(v,r,u){const f=1/dn(u,1,r.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),y=u.tileSize*Math.pow(2,r.transform.tileZoom)/m,S=y*(u.tileID.canonical.x+u.tileID.wrap*m),P=y*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[S>>16,P>>16],u_pixel_coord_lower:[65535&S,65535&P]}}const Ul=(v,r,u,f)=>{const m=r.style.light,y=m.properties.get("position"),S=[y.x,y.y,y.z],P=function(){var z=new l.A(9);return l.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();m.properties.get("anchor")==="viewport"&&function(z,O){var F=Math.sin(O),X=Math.cos(O);z[0]=X,z[1]=F,z[2]=0,z[3]=-F,z[4]=X,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(P,-r.transform.angle),function(z,O,F){var X=O[0],te=O[1],oe=O[2];z[0]=X*F[0]+te*F[3]+oe*F[6],z[1]=X*F[1]+te*F[4]+oe*F[7],z[2]=X*F[2]+te*F[5]+oe*F[8]}(S,S,P);const E=m.properties.get("color");return{u_matrix:v,u_lightpos:S,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[E.r,E.g,E.b],u_vertical_gradient:+u,u_opacity:f}},Xu=(v,r,u,f,m,y,S)=>l.e(Ul(v,r,u,f),Ku(y,r,S),{u_height_factor:-Math.pow(2,m.overscaledZ)/S.tileSize/8}),Da=v=>({u_matrix:v}),Hf=(v,r,u,f)=>l.e(Da(v),Ku(u,r,f)),n_=(v,r)=>({u_matrix:v,u_world:r}),qf=(v,r,u,f,m)=>l.e(Hf(v,r,u,f),{u_world:m}),r_=(v,r,u,f)=>{const m=v.transform;let y,S;if(f.paint.get("circle-pitch-alignment")==="map"){const P=dn(u,1,m.zoom);y=!0,S=[P,P]}else y=!1,S=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(r.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:S}},ea=(v,r,u)=>({u_matrix:v,u_inv_matrix:r,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}),Wl=(v,r,u=1)=>({u_matrix:v,u_color:r,u_overlay:0,u_overlay_scale:u}),Ci=v=>({u_matrix:v}),Ti=(v,r,u,f)=>({u_matrix:v,u_extrude_scale:dn(r,1,u),u_intensity:f}),Yu=(v,r,u,f)=>{const m=l.H();l.aP(m,0,v.width,v.height,0,0,1);const y=v.context.gl;return{u_matrix:m,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:u,u_color_ramp:f,u_opacity:r.paint.get("heatmap-opacity")}};function Ju(v,r){const u=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new l.Z(0,f/u).toLngLat().lat,new l.Z(0,(f+1)/u).toLngLat().lat]}const Qu=(v,r,u,f)=>{const m=v.transform;return{u_matrix:Kf(v,r,u,f),u_ratio:1/dn(r,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Gf=(v,r,u,f,m)=>l.e(Qu(v,r,u,m),{u_image:0,u_image_height:f}),Oa=(v,r,u,f,m)=>{const y=v.transform,S=Zf(r,y);return{u_matrix:Kf(v,r,u,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/dn(r,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[S,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},i_=(v,r,u,f,m,y)=>{const S=v.lineAtlas,P=Zf(r,v.transform),E=u.layout.get("line-cap")==="round",z=S.getDash(f.from,E),O=S.getDash(f.to,E),F=z.width*m.fromScale,X=O.width*m.toScale;return l.e(Qu(v,r,u,y),{u_patternscale_a:[P/F,-z.height/2],u_patternscale_b:[P/X,-O.height/2],u_sdfgamma:S.width/(256*Math.min(F,X)*v.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:O.y,u_mix:m.t})};function Zf(v,r){return 1/dn(v,1,r.tileZoom)}function Kf(v,r,u,f){return v.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const o_=(v,r,u,f,m)=>{return{u_matrix:v,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(S=m.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:s_(m.paint.get("raster-hue-rotate"))};var y,S};function s_(v){v*=Math.PI/180;const r=Math.sin(v),u=Math.cos(v);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const Xf=(v,r,u,f,m,y,S,P,E,z,O,F,X,te)=>{const oe=S.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:oe.cameraToCenterDistance,u_pitch:oe.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:oe.width/oe.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:P,u_label_plane_matrix:E,u_coord_matrix:z,u_is_text:+F,u_pitch_with_map:+f,u_is_along_line:m,u_is_variable_anchor:y,u_texsize:X,u_texture:0,u_translation:O,u_pitched_scale:te}},Hl=(v,r,u,f,m,y,S,P,E,z,O,F,X,te,oe)=>{const ce=S.transform;return l.e(Xf(v,r,u,f,m,y,S,P,E,z,O,F,X,oe),{u_gamma_scale:f?Math.cos(ce._pitch)*ce.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},Qh=(v,r,u,f,m,y,S,P,E,z,O,F,X,te)=>l.e(Hl(v,r,u,f,m,y,S,P,E,z,O,!0,F,!0,te),{u_texsize_icon:X,u_texture_icon:1}),ec=(v,r,u)=>({u_matrix:v,u_opacity:r,u_color:u}),ed=(v,r,u,f,m,y)=>l.e(function(S,P,E,z){const O=E.imageManager.getPattern(S.from.toString()),F=E.imageManager.getPattern(S.to.toString()),{width:X,height:te}=E.imageManager.getPixelSize(),oe=Math.pow(2,z.tileID.overscaledZ),ce=z.tileSize*Math.pow(2,E.transform.tileZoom)/oe,pe=ce*(z.tileID.canonical.x+z.tileID.wrap*oe),fe=ce*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[X,te],u_mix:P.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/dn(z,1,E.transform.tileZoom),u_pixel_coord_upper:[pe>>16,fe>>16],u_pixel_coord_lower:[65535&pe,65535&fe]}}(f,y,u,m),{u_matrix:v,u_opacity:r}),td={fillExtrusion:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_lightpos:new l.aN(v,r.u_lightpos),u_lightintensity:new l.aI(v,r.u_lightintensity),u_lightcolor:new l.aN(v,r.u_lightcolor),u_vertical_gradient:new l.aI(v,r.u_vertical_gradient),u_opacity:new l.aI(v,r.u_opacity)}),fillExtrusionPattern:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_lightpos:new l.aN(v,r.u_lightpos),u_lightintensity:new l.aI(v,r.u_lightintensity),u_lightcolor:new l.aN(v,r.u_lightcolor),u_vertical_gradient:new l.aI(v,r.u_vertical_gradient),u_height_factor:new l.aI(v,r.u_height_factor),u_image:new l.aH(v,r.u_image),u_texsize:new l.aO(v,r.u_texsize),u_pixel_coord_upper:new l.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(v,r.u_pixel_coord_lower),u_scale:new l.aN(v,r.u_scale),u_fade:new l.aI(v,r.u_fade),u_opacity:new l.aI(v,r.u_opacity)}),fill:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix)}),fillPattern:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_image:new l.aH(v,r.u_image),u_texsize:new l.aO(v,r.u_texsize),u_pixel_coord_upper:new l.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(v,r.u_pixel_coord_lower),u_scale:new l.aN(v,r.u_scale),u_fade:new l.aI(v,r.u_fade)}),fillOutline:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_world:new l.aO(v,r.u_world)}),fillOutlinePattern:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_world:new l.aO(v,r.u_world),u_image:new l.aH(v,r.u_image),u_texsize:new l.aO(v,r.u_texsize),u_pixel_coord_upper:new l.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(v,r.u_pixel_coord_lower),u_scale:new l.aN(v,r.u_scale),u_fade:new l.aI(v,r.u_fade)}),circle:(v,r)=>({u_camera_to_center_distance:new l.aI(v,r.u_camera_to_center_distance),u_scale_with_map:new l.aH(v,r.u_scale_with_map),u_pitch_with_map:new l.aH(v,r.u_pitch_with_map),u_extrude_scale:new l.aO(v,r.u_extrude_scale),u_device_pixel_ratio:new l.aI(v,r.u_device_pixel_ratio),u_matrix:new l.aJ(v,r.u_matrix)}),collisionBox:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_pixel_extrude_scale:new l.aO(v,r.u_pixel_extrude_scale)}),collisionCircle:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_inv_matrix:new l.aJ(v,r.u_inv_matrix),u_camera_to_center_distance:new l.aI(v,r.u_camera_to_center_distance),u_viewport_size:new l.aO(v,r.u_viewport_size)}),debug:(v,r)=>({u_color:new l.aL(v,r.u_color),u_matrix:new l.aJ(v,r.u_matrix),u_overlay:new l.aH(v,r.u_overlay),u_overlay_scale:new l.aI(v,r.u_overlay_scale)}),clippingMask:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix)}),heatmap:(v,r)=>({u_extrude_scale:new l.aI(v,r.u_extrude_scale),u_intensity:new l.aI(v,r.u_intensity),u_matrix:new l.aJ(v,r.u_matrix)}),heatmapTexture:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_world:new l.aO(v,r.u_world),u_image:new l.aH(v,r.u_image),u_color_ramp:new l.aH(v,r.u_color_ramp),u_opacity:new l.aI(v,r.u_opacity)}),hillshade:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_image:new l.aH(v,r.u_image),u_latrange:new l.aO(v,r.u_latrange),u_light:new l.aO(v,r.u_light),u_shadow:new l.aL(v,r.u_shadow),u_highlight:new l.aL(v,r.u_highlight),u_accent:new l.aL(v,r.u_accent)}),hillshadePrepare:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_image:new l.aH(v,r.u_image),u_dimension:new l.aO(v,r.u_dimension),u_zoom:new l.aI(v,r.u_zoom),u_unpack:new l.aK(v,r.u_unpack)}),line:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_ratio:new l.aI(v,r.u_ratio),u_device_pixel_ratio:new l.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new l.aO(v,r.u_units_to_pixels)}),lineGradient:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_ratio:new l.aI(v,r.u_ratio),u_device_pixel_ratio:new l.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new l.aO(v,r.u_units_to_pixels),u_image:new l.aH(v,r.u_image),u_image_height:new l.aI(v,r.u_image_height)}),linePattern:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_texsize:new l.aO(v,r.u_texsize),u_ratio:new l.aI(v,r.u_ratio),u_device_pixel_ratio:new l.aI(v,r.u_device_pixel_ratio),u_image:new l.aH(v,r.u_image),u_units_to_pixels:new l.aO(v,r.u_units_to_pixels),u_scale:new l.aN(v,r.u_scale),u_fade:new l.aI(v,r.u_fade)}),lineSDF:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_ratio:new l.aI(v,r.u_ratio),u_device_pixel_ratio:new l.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new l.aO(v,r.u_units_to_pixels),u_patternscale_a:new l.aO(v,r.u_patternscale_a),u_patternscale_b:new l.aO(v,r.u_patternscale_b),u_sdfgamma:new l.aI(v,r.u_sdfgamma),u_image:new l.aH(v,r.u_image),u_tex_y_a:new l.aI(v,r.u_tex_y_a),u_tex_y_b:new l.aI(v,r.u_tex_y_b),u_mix:new l.aI(v,r.u_mix)}),raster:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_tl_parent:new l.aO(v,r.u_tl_parent),u_scale_parent:new l.aI(v,r.u_scale_parent),u_buffer_scale:new l.aI(v,r.u_buffer_scale),u_fade_t:new l.aI(v,r.u_fade_t),u_opacity:new l.aI(v,r.u_opacity),u_image0:new l.aH(v,r.u_image0),u_image1:new l.aH(v,r.u_image1),u_brightness_low:new l.aI(v,r.u_brightness_low),u_brightness_high:new l.aI(v,r.u_brightness_high),u_saturation_factor:new l.aI(v,r.u_saturation_factor),u_contrast_factor:new l.aI(v,r.u_contrast_factor),u_spin_weights:new l.aN(v,r.u_spin_weights)}),symbolIcon:(v,r)=>({u_is_size_zoom_constant:new l.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(v,r.u_is_size_feature_constant),u_size_t:new l.aI(v,r.u_size_t),u_size:new l.aI(v,r.u_size),u_camera_to_center_distance:new l.aI(v,r.u_camera_to_center_distance),u_pitch:new l.aI(v,r.u_pitch),u_rotate_symbol:new l.aH(v,r.u_rotate_symbol),u_aspect_ratio:new l.aI(v,r.u_aspect_ratio),u_fade_change:new l.aI(v,r.u_fade_change),u_matrix:new l.aJ(v,r.u_matrix),u_label_plane_matrix:new l.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new l.aJ(v,r.u_coord_matrix),u_is_text:new l.aH(v,r.u_is_text),u_pitch_with_map:new l.aH(v,r.u_pitch_with_map),u_is_along_line:new l.aH(v,r.u_is_along_line),u_is_variable_anchor:new l.aH(v,r.u_is_variable_anchor),u_texsize:new l.aO(v,r.u_texsize),u_texture:new l.aH(v,r.u_texture),u_translation:new l.aO(v,r.u_translation),u_pitched_scale:new l.aI(v,r.u_pitched_scale)}),symbolSDF:(v,r)=>({u_is_size_zoom_constant:new l.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(v,r.u_is_size_feature_constant),u_size_t:new l.aI(v,r.u_size_t),u_size:new l.aI(v,r.u_size),u_camera_to_center_distance:new l.aI(v,r.u_camera_to_center_distance),u_pitch:new l.aI(v,r.u_pitch),u_rotate_symbol:new l.aH(v,r.u_rotate_symbol),u_aspect_ratio:new l.aI(v,r.u_aspect_ratio),u_fade_change:new l.aI(v,r.u_fade_change),u_matrix:new l.aJ(v,r.u_matrix),u_label_plane_matrix:new l.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new l.aJ(v,r.u_coord_matrix),u_is_text:new l.aH(v,r.u_is_text),u_pitch_with_map:new l.aH(v,r.u_pitch_with_map),u_is_along_line:new l.aH(v,r.u_is_along_line),u_is_variable_anchor:new l.aH(v,r.u_is_variable_anchor),u_texsize:new l.aO(v,r.u_texsize),u_texture:new l.aH(v,r.u_texture),u_gamma_scale:new l.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new l.aI(v,r.u_device_pixel_ratio),u_is_halo:new l.aH(v,r.u_is_halo),u_translation:new l.aO(v,r.u_translation),u_pitched_scale:new l.aI(v,r.u_pitched_scale)}),symbolTextAndIcon:(v,r)=>({u_is_size_zoom_constant:new l.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(v,r.u_is_size_feature_constant),u_size_t:new l.aI(v,r.u_size_t),u_size:new l.aI(v,r.u_size),u_camera_to_center_distance:new l.aI(v,r.u_camera_to_center_distance),u_pitch:new l.aI(v,r.u_pitch),u_rotate_symbol:new l.aH(v,r.u_rotate_symbol),u_aspect_ratio:new l.aI(v,r.u_aspect_ratio),u_fade_change:new l.aI(v,r.u_fade_change),u_matrix:new l.aJ(v,r.u_matrix),u_label_plane_matrix:new l.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new l.aJ(v,r.u_coord_matrix),u_is_text:new l.aH(v,r.u_is_text),u_pitch_with_map:new l.aH(v,r.u_pitch_with_map),u_is_along_line:new l.aH(v,r.u_is_along_line),u_is_variable_anchor:new l.aH(v,r.u_is_variable_anchor),u_texsize:new l.aO(v,r.u_texsize),u_texsize_icon:new l.aO(v,r.u_texsize_icon),u_texture:new l.aH(v,r.u_texture),u_texture_icon:new l.aH(v,r.u_texture_icon),u_gamma_scale:new l.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new l.aI(v,r.u_device_pixel_ratio),u_is_halo:new l.aH(v,r.u_is_halo),u_translation:new l.aO(v,r.u_translation),u_pitched_scale:new l.aI(v,r.u_pitched_scale)}),background:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_opacity:new l.aI(v,r.u_opacity),u_color:new l.aL(v,r.u_color)}),backgroundPattern:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_opacity:new l.aI(v,r.u_opacity),u_image:new l.aH(v,r.u_image),u_pattern_tl_a:new l.aO(v,r.u_pattern_tl_a),u_pattern_br_a:new l.aO(v,r.u_pattern_br_a),u_pattern_tl_b:new l.aO(v,r.u_pattern_tl_b),u_pattern_br_b:new l.aO(v,r.u_pattern_br_b),u_texsize:new l.aO(v,r.u_texsize),u_mix:new l.aI(v,r.u_mix),u_pattern_size_a:new l.aO(v,r.u_pattern_size_a),u_pattern_size_b:new l.aO(v,r.u_pattern_size_b),u_scale_a:new l.aI(v,r.u_scale_a),u_scale_b:new l.aI(v,r.u_scale_b),u_pixel_coord_upper:new l.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(v,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aI(v,r.u_tile_units_to_pixels)}),terrain:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_texture:new l.aH(v,r.u_texture),u_ele_delta:new l.aI(v,r.u_ele_delta),u_fog_matrix:new l.aJ(v,r.u_fog_matrix),u_fog_color:new l.aL(v,r.u_fog_color),u_fog_ground_blend:new l.aI(v,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.aI(v,r.u_fog_ground_blend_opacity),u_horizon_color:new l.aL(v,r.u_horizon_color),u_horizon_fog_blend:new l.aI(v,r.u_horizon_fog_blend)}),terrainDepth:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_ele_delta:new l.aI(v,r.u_ele_delta)}),terrainCoords:(v,r)=>({u_matrix:new l.aJ(v,r.u_matrix),u_texture:new l.aH(v,r.u_texture),u_terrain_coords_id:new l.aI(v,r.u_terrain_coords_id),u_ele_delta:new l.aI(v,r.u_ele_delta)}),sky:(v,r)=>({u_sky_color:new l.aL(v,r.u_sky_color),u_horizon_color:new l.aL(v,r.u_horizon_color),u_horizon:new l.aI(v,r.u_horizon),u_sky_horizon_blend:new l.aI(v,r.u_sky_horizon_blend)})};class Fo{constructor(r,u,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const a_={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class nd{constructor(r,u,f,m){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=r;const y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let f=0;f<this.attributes.length;f++){const m=u.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,u,f){for(let m=0;m<this.attributes.length;m++){const y=this.attributes[m],S=u.attributes[y.name];S!==void 0&&r.vertexAttribPointer(S,y.components,r[a_[y.type]],!1,this.itemSize,y.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ta=new WeakMap;function Ts(v){var r;if(ta.has(v))return ta.get(v);{const u=(r=v.getParameter(v.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return ta.set(v,u),u}}class Vn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class tc extends Vn{getDefault(){return l.aM.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class l_ extends Vn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Fa extends Vn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class u_ extends Vn{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Yf extends Vn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class c_ extends Vn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Jf extends Vn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class rd extends Vn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Qf extends Vn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class em extends Vn{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class tm extends Vn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class nm extends Vn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class na extends Vn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class rm extends Vn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class h_ extends Vn{getDefault(){return l.aM.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class im extends Vn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ql extends Vn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class d_ extends Vn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class nc extends Vn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class p_ extends Vn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class f_ extends Vn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class om extends Vn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class sm extends Vn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class am extends Vn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class id extends Vn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class lm extends Vn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class rc extends Vn{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ls extends Vn{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const f=this.gl;Ts(f)?f.bindVertexArray(r):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class od extends Vn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class sd extends Vn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class ad extends Vn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class ic extends Vn{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class ld extends ic{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class ra extends ic{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ud extends ic{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class m_{constructor(r,u,f,m,y){this.context=r,this.width=u,this.height=f;const S=r.gl,P=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new ld(r,P),m)this.depthAttachment=y?new ud(r,P):new ra(r,P);else if(y)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class yr{constructor(r,u,f){this.blendFunction=r,this.blendColor=u,this.mask=f}}yr.Replace=[1,0],yr.disabled=new yr(yr.Replace,l.aM.transparent,[!1,!1,!1,!1]),yr.unblended=new yr(yr.Replace,l.aM.transparent,[!0,!0,!0,!0]),yr.alphaBlended=new yr([1,771],l.aM.transparent,[!0,!0,!0,!0]);class g_{constructor(r){var u,f;if(this.gl=r,this.clearColor=new tc(this),this.clearDepth=new l_(this),this.clearStencil=new Fa(this),this.colorMask=new u_(this),this.depthMask=new Yf(this),this.stencilMask=new c_(this),this.stencilFunc=new Jf(this),this.stencilOp=new rd(this),this.stencilTest=new Qf(this),this.depthRange=new em(this),this.depthTest=new tm(this),this.depthFunc=new nm(this),this.blend=new na(this),this.blendFunc=new rm(this),this.blendColor=new h_(this),this.blendEquation=new im(this),this.cullFace=new ql(this),this.cullFaceSide=new d_(this),this.frontFace=new nc(this),this.program=new p_(this),this.activeTexture=new f_(this),this.viewport=new om(this),this.bindFramebuffer=new sm(this),this.bindRenderbuffer=new am(this),this.bindTexture=new id(this),this.bindVertexBuffer=new lm(this),this.bindElementBuffer=new rc(this),this.bindVertexArray=new ls(this),this.pixelStoreUnpack=new od(this),this.pixelStoreUnpackPremultiplyAlpha=new sd(this),this.pixelStoreUnpackFlipY=new ad(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Ts(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new Fo(this,r,u)}createVertexBuffer(r,u,f){return new nd(this,r,u,f)}createRenderbuffer(r,u,f){const m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,r,u,f),this.bindRenderbuffer.set(null),y}createFramebuffer(r,u,f,m){return new m_(this,r,u,f,m)}clear({color:r,depth:u,stencil:f}){const m=this.gl;let y=0;r&&(y|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(y|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(y|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(y)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.aE(r.blendFunction,yr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Ts(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return Ts(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Sn{constructor(r,u,f){this.func=r,this.mask=u,this.range=f}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const oc=7680;class Xn{constructor(r,u,f,m,y,S){this.test=r,this.ref=u,this.mask=f,this.fail=m,this.depthFail=y,this.pass=S}}Xn.disabled=new Xn({func:519,mask:0},0,0,oc,oc,oc);class Wn{constructor(r,u,f){this.enable=r,this.mode=u,this.frontFace=f}}let ia;function Gl(v,r,u,f,m){const y=v.context,S=y.gl,P=v.useProgram("collisionBox"),E=[];let z=0,O=0;for(let fe=0;fe<f.length;fe++){const ve=f[fe],le=r.getTile(ve).getBucket(u);if(!le)continue;const Se=m?le.textCollisionBox:le.iconCollisionBox,Pe=le.collisionCircleArray;if(Pe.length>0){const De=l.H();l.aQ(De,le.placementInvProjMatrix,v.transform.glCoordMatrix),l.aQ(De,De,le.placementViewportMatrix),E.push({circleArray:Pe,circleOffset:O,transform:ve.posMatrix,invTransform:De,coord:ve}),z+=Pe.length/4,O=z}Se&&P.draw(y,S.LINES,Sn.disabled,Xn.disabled,v.colorModeForRenderPass(),Wn.disabled,{u_matrix:ve.posMatrix,u_pixel_extrude_scale:[1/(F=v.transform).width,1/F.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(ve),u.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,null,v.transform.zoom,null,null,Se.collisionVertexBuffer)}var F;if(!m||!E.length)return;const X=v.useProgram("collisionCircle"),te=new l.aR;te.resize(4*z),te._trim();let oe=0;for(const fe of E)for(let ve=0;ve<fe.circleArray.length/4;ve++){const le=4*ve,Se=fe.circleArray[le+0],Pe=fe.circleArray[le+1],De=fe.circleArray[le+2],Ke=fe.circleArray[le+3];te.emplace(oe++,Se,Pe,De,Ke,0),te.emplace(oe++,Se,Pe,De,Ke,1),te.emplace(oe++,Se,Pe,De,Ke,2),te.emplace(oe++,Se,Pe,De,Ke,3)}(!ia||ia.length<2*z)&&(ia=function(fe){const ve=2*fe,le=new l.aT;le.resize(ve),le._trim();for(let Se=0;Se<ve;Se++){const Pe=6*Se;le.uint16[Pe+0]=4*Se+0,le.uint16[Pe+1]=4*Se+1,le.uint16[Pe+2]=4*Se+2,le.uint16[Pe+3]=4*Se+2,le.uint16[Pe+4]=4*Se+3,le.uint16[Pe+5]=4*Se+0}return le}(z));const ce=y.createIndexBuffer(ia,!0),pe=y.createVertexBuffer(te,l.aS.members,!0);for(const fe of E){const ve=ea(fe.transform,fe.invTransform,v.transform);X.draw(y,S.TRIANGLES,Sn.disabled,Xn.disabled,v.colorModeForRenderPass(),Wn.disabled,ve,v.style.map.terrain&&v.style.map.terrain.getTerrainData(fe.coord),u.id,pe,ce,l.a0.simpleSegment(0,2*fe.circleOffset,fe.circleArray.length,fe.circleArray.length/2),null,v.transform.zoom,null,null,null)}pe.destroy(),ce.destroy()}Wn.disabled=new Wn(!1,1029,2305),Wn.backCCW=new Wn(!0,1029,2305);const Zl=l.an(new Float32Array(16));function cd(v,r,u,f,m,y){const{horizontalAlign:S,verticalAlign:P}=l.au(v);return new l.P((-(S-.5)*r/m+f[0])*y,(-(P-.5)*u/m+f[1])*y)}function oa(v,r,u,f,m,y){const S=r.tileAnchorPoint.add(new l.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let P=f.mult(y);u||(P=P.rotate(-m));const E=S.add(P);return se(E.x,E.y,r.labelPlaneMatrix,r.getElevation).point}if(u){const P=$e(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(v),E=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return v.add(f.rotate(E))}return v.add(f)}function Ba(v,r,u,f,m,y,S,P,E,z,O,F,X,te){const oe=v.text.placedSymbolArray,ce=v.text.dynamicLayoutVertexArray,pe=v.icon.dynamicLayoutVertexArray,fe={};ce.clear();for(let ve=0;ve<oe.length;ve++){const le=oe.get(ve),Se=le.hidden||!le.crossTileID||v.allowVerticalPlacement&&!le.placedOrientation?null:f[le.crossTileID];if(Se){const Pe=new l.P(le.anchorX,le.anchorY),De={getElevation:te,width:m.width,height:m.height,labelPlaneMatrix:y,pitchWithMap:u,projection:O,tileAnchorPoint:Pe,translation:F,unwrappedTileID:X},Ke=u?se(Pe.x,Pe.y,S,te):$e(Pe.x,Pe.y,De),et=U(m.cameraToCenterDistance,Ke.signedDistanceFromCamera);let pt=l.ai(v.textSizeData,E,le)*et/l.ap;u&&(pt*=v.tilePixelRatio/P);const{width:St,height:lt,anchor:at,textOffset:Rt,textBoxScale:ln}=Se,ct=cd(at,St,lt,Rt,ln,pt),xt=O.getPitchedTextCorrection(m,Pe.add(new l.P(F[0],F[1])),X),sn=oa(Ke.point,De,r,ct,m.angle,xt),ir=v.allowVerticalPlacement&&le.placedOrientation===l.ah.vertical?Math.PI/2:0;for(let _n=0;_n<le.numGlyphs;_n++)l.aj(ce,sn,ir);z&&le.associatedIconIndex>=0&&(fe[le.associatedIconIndex]={shiftedAnchor:sn,angle:ir})}else Gt(le.numGlyphs,ce)}if(z){pe.clear();const ve=v.icon.placedSymbolArray;for(let le=0;le<ve.length;le++){const Se=ve.get(le);if(Se.hidden)Gt(Se.numGlyphs,pe);else{const Pe=fe[le];if(Pe)for(let De=0;De<Se.numGlyphs;De++)l.aj(pe,Pe.shiftedAnchor,Pe.angle);else Gt(Se.numGlyphs,pe)}}v.icon.dynamicLayoutVertexBuffer.updateData(pe)}v.text.dynamicLayoutVertexBuffer.updateData(ce)}function Xi(v,r,u){return u.iconsInText&&r?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function hd(v,r,u,f,m,y,S,P,E,z,O,F){const X=v.context,te=X.gl,oe=v.transform,ce=$i(),pe=P==="map",fe=E==="map",ve=P!=="viewport"&&u.layout.get("symbol-placement")!=="point",le=pe&&!fe&&!ve,Se=!fe&&ve,Pe=!u.layout.get("symbol-sort-key").isConstant();let De=!1;const Ke=v.depthModeForSublayer(0,Sn.ReadOnly),et=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),pt=[],St=ce.getCircleRadiusCorrection(oe);for(const lt of f){const at=r.getTile(lt),Rt=at.getBucket(u);if(!Rt)continue;const ln=m?Rt.text:Rt.icon;if(!ln||!ln.segments.get().length||!ln.hasVisibleVertices)continue;const ct=ln.programConfigurations.get(u.id),xt=m||Rt.sdfIcons,sn=m?Rt.textSizeData:Rt.iconSizeData,ir=fe||oe.pitch!==0,_n=v.useProgram(Xi(xt,m,Rt),ct),Tn=l.ag(sn,oe.zoom),or=v.style.map.terrain&&v.style.map.terrain.getTerrainData(lt);let ei,vo,sr,Pi,fi=[0,0],ti=null;if(m)vo=at.glyphAtlasTexture,sr=te.LINEAR,ei=at.glyphAtlasTexture.size,Rt.iconsInText&&(fi=at.imageAtlasTexture.size,ti=at.imageAtlasTexture,Pi=ir||v.options.rotating||v.options.zooming||sn.kind==="composite"||sn.kind==="camera"?te.LINEAR:te.NEAREST);else{const En=u.layout.get("icon-size").constantOr(0)!==1||Rt.iconsNeedLinear;vo=at.imageAtlasTexture,sr=xt||v.options.rotating||v.options.zooming||En||ir?te.LINEAR:te.NEAREST,ei=at.imageAtlasTexture.size}const mi=dn(at,1,v.transform.zoom),No=Se?lt.posMatrix:Zl,Qa=Cn(No,fe,pe,v.transform,mi),Cc=cn(No,fe,pe,v.transform,mi),el=cn(lt.posMatrix,fe,pe,v.transform,mi),Qi=ce.translatePosition(v.transform,at,y,S),Tc=et&&Rt.hasTextData(),Od=u.layout.get("icon-text-fit")!=="none"&&Tc&&Rt.hasIconData();if(ve){const En=v.style.map.terrain?(tl,nl)=>v.style.map.terrain.getElevation(lt,tl,nl):null,ca=u.layout.get("text-rotation-alignment")==="map";Q(Rt,lt.posMatrix,v,m,Qa,el,fe,z,ca,ce,lt.toUnwrapped(),oe.width,oe.height,Qi,En)}const eo=lt.posMatrix,to=m&&et||Od,Ps=ve||to?Zl:Qa,_o=Cc,Zr=xt&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ni;ni=xt?Rt.iconsInText?Qh(sn.kind,Tn,le,fe,ve,to,v,eo,Ps,_o,Qi,ei,fi,St):Hl(sn.kind,Tn,le,fe,ve,to,v,eo,Ps,_o,Qi,m,ei,!0,St):Xf(sn.kind,Tn,le,fe,ve,to,v,eo,Ps,_o,Qi,m,ei,St);const ji={program:_n,buffers:ln,uniformValues:ni,atlasTexture:vo,atlasTextureIcon:ti,atlasInterpolation:sr,atlasInterpolationIcon:Pi,isSDF:xt,hasHalo:Zr};if(Pe&&Rt.canOverlap){De=!0;const En=ln.segments.get();for(const ca of En)pt.push({segments:new l.a0([ca]),sortKey:ca.sortKey,state:ji,terrainData:or})}else pt.push({segments:ln.segments,sortKey:0,state:ji,terrainData:or})}De&&pt.sort((lt,at)=>lt.sortKey-at.sortKey);for(const lt of pt){const at=lt.state;if(X.activeTexture.set(te.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,te.CLAMP_TO_EDGE),at.atlasTextureIcon&&(X.activeTexture.set(te.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),at.isSDF){const Rt=at.uniformValues;at.hasHalo&&(Rt.u_is_halo=1,dd(at.buffers,lt.segments,u,v,at.program,Ke,O,F,Rt,lt.terrainData)),Rt.u_is_halo=0}dd(at.buffers,lt.segments,u,v,at.program,Ke,O,F,at.uniformValues,lt.terrainData)}}function dd(v,r,u,f,m,y,S,P,E,z){const O=f.context;m.draw(O,O.gl.TRIANGLES,y,S,P,Wn.disabled,E,z,u.id,v.layoutVertexBuffer,v.indexBuffer,r,u.paint,f.transform.zoom,v.programConfigurations.get(u.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function pd(v,r,u,f){const m=v.context,y=m.gl,S=Xn.disabled,P=new yr([y.ONE,y.ONE],l.aM.transparent,[!0,!0,!0,!0]),E=r.getBucket(u);if(!E)return;const z=f.key;let O=u.heatmapFbos.get(z);O||(O=Kl(m,r.tileSize,r.tileSize),u.heatmapFbos.set(z,O)),m.bindFramebuffer.set(O.framebuffer),m.viewport.set([0,0,r.tileSize,r.tileSize]),m.clear({color:l.aM.transparent});const F=E.programConfigurations.get(u.id),X=v.useProgram("heatmap",F),te=v.style.map.terrain.getTerrainData(f);X.draw(m,y.TRIANGLES,Sn.disabled,S,P,Wn.disabled,Ti(f.posMatrix,r,v.transform.zoom,u.paint.get("heatmap-intensity")),te,u.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,u.paint,v.transform.zoom,F)}function sa(v,r,u){const f=v.context,m=f.gl;f.setColorMode(v.colorModeForRenderPass());const y=Xl(f,r),S=u.key,P=r.heatmapFbos.get(S);P&&(f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,P.colorAttachment.get()),f.activeTexture.set(m.TEXTURE1),y.bind(m.LINEAR,m.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(f,m.TRIANGLES,Sn.disabled,Xn.disabled,v.colorModeForRenderPass(),Wn.disabled,Yu(v,r,0,1),null,r.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,r.paint,v.transform.zoom),P.destroy(),r.heatmapFbos.delete(S))}function Kl(v,r,u){var f,m;const y=v.gl,S=y.createTexture();y.bindTexture(y.TEXTURE_2D,S),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const P=(f=v.HALF_FLOAT)!==null&&f!==void 0?f:y.UNSIGNED_BYTE,E=(m=v.RGBA16F)!==null&&m!==void 0?m:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,E,r,u,0,y.RGBA,P,null);const z=v.createFramebuffer(r,u,!1,!1);return z.colorAttachment.set(S),z}function Xl(v,r){return r.colorRampTexture||(r.colorRampTexture=new Re(v,r.colorRamp,v.gl.RGBA)),r.colorRampTexture}function $a(v,r,u,f,m){if(!u||!f||!f.imageAtlas)return;const y=f.imageAtlas.patternPositions;let S=y[u.to.toString()],P=y[u.from.toString()];if(!S&&P&&(S=P),!P&&S&&(P=S),!S||!P){const E=m.getPaintProperty(r);S=y[E],P=y[E]}S&&P&&v.setConstantPatternPositions(S,P)}function Yl(v,r,u,f,m,y,S){const P=v.context.gl,E="fill-pattern",z=u.paint.get(E),O=z&&z.constantOr(1),F=u.getCrossfadeParameters();let X,te,oe,ce,pe;S?(te=O&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=P.LINES):(te=O?"fillPattern":"fill",X=P.TRIANGLES);const fe=z.constantOr(null);for(const ve of f){const le=r.getTile(ve);if(O&&!le.patternsLoaded())continue;const Se=le.getBucket(u);if(!Se)continue;const Pe=Se.programConfigurations.get(u.id),De=v.useProgram(te,Pe),Ke=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ve);O&&(v.context.activeTexture.set(P.TEXTURE0),le.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),Pe.updatePaintBuffers(F)),$a(Pe,E,fe,le,u);const et=Ke?ve:null,pt=v.translatePosMatrix(et?et.posMatrix:ve.posMatrix,le,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(S){ce=Se.indexBuffer2,pe=Se.segments2;const St=[P.drawingBufferWidth,P.drawingBufferHeight];oe=te==="fillOutlinePattern"&&O?qf(pt,v,F,le,St):n_(pt,St)}else ce=Se.indexBuffer,pe=Se.segments,oe=O?Hf(pt,v,F,le):Da(pt);De.draw(v.context,X,m,v.stencilModeForClipping(ve),y,Wn.disabled,oe,Ke,u.id,Se.layoutVertexBuffer,ce,pe,u.paint,v.transform.zoom,Pe)}}function sc(v,r,u,f,m,y,S){const P=v.context,E=P.gl,z="fill-extrusion-pattern",O=u.paint.get(z),F=O.constantOr(1),X=u.getCrossfadeParameters(),te=u.paint.get("fill-extrusion-opacity"),oe=O.constantOr(null);for(const ce of f){const pe=r.getTile(ce),fe=pe.getBucket(u);if(!fe)continue;const ve=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ce),le=fe.programConfigurations.get(u.id),Se=v.useProgram(F?"fillExtrusionPattern":"fillExtrusion",le);F&&(v.context.activeTexture.set(E.TEXTURE0),pe.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),le.updatePaintBuffers(X)),$a(le,z,oe,pe,u);const Pe=v.translatePosMatrix(ce.posMatrix,pe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),De=u.paint.get("fill-extrusion-vertical-gradient"),Ke=F?Xu(Pe,v,De,te,ce,X,pe):Ul(Pe,v,De,te);Se.draw(P,P.gl.TRIANGLES,m,y,S,Wn.backCCW,Ke,ve,u.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,u.paint,v.transform.zoom,le,v.style.map.terrain&&fe.centroidVertexBuffer)}}function Na(v,r,u,f,m,y,S){const P=v.context,E=P.gl,z=u.fbo;if(!z)return;const O=v.useProgram("hillshade"),F=v.style.map.terrain&&v.style.map.terrain.getTerrainData(r);P.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,z.colorAttachment.get()),O.draw(P,E.TRIANGLES,m,y,S,Wn.disabled,((X,te,oe,ce)=>{const pe=oe.paint.get("hillshade-shadow-color"),fe=oe.paint.get("hillshade-highlight-color"),ve=oe.paint.get("hillshade-accent-color");let le=oe.paint.get("hillshade-illumination-direction")*(Math.PI/180);oe.paint.get("hillshade-illumination-anchor")==="viewport"&&(le-=X.transform.angle);const Se=!X.options.moving;return{u_matrix:ce?ce.posMatrix:X.transform.calculatePosMatrix(te.tileID.toUnwrapped(),Se),u_image:0,u_latrange:Ju(0,te.tileID),u_light:[oe.paint.get("hillshade-exaggeration"),le],u_shadow:pe,u_highlight:fe,u_accent:ve}})(v,u,f,F?r:null),F,f.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Va(v,r,u,f,m,y){const S=v.context,P=S.gl,E=r.dem;if(E&&E.data){const z=E.dim,O=E.stride,F=E.getPixels();if(S.activeTexture.set(P.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(O),r.demTexture){const te=r.demTexture;te.update(F,{premultiply:!1}),te.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else r.demTexture=new Re(S,F,P.RGBA,{premultiply:!1}),r.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);S.activeTexture.set(P.TEXTURE0);let X=r.fbo;if(!X){const te=new Re(S,{width:z,height:z,data:null},P.RGBA);te.bind(P.LINEAR,P.CLAMP_TO_EDGE),X=r.fbo=S.createFramebuffer(z,z,!0,!1),X.colorAttachment.set(te.texture)}S.bindFramebuffer.set(X.framebuffer),S.viewport.set([0,0,z,z]),v.useProgram("hillshadePrepare").draw(S,P.TRIANGLES,f,m,y,Wn.disabled,((te,oe)=>{const ce=oe.stride,pe=l.H();return l.aP(pe,0,l.X,-l.X,0,0,1),l.J(pe,pe,[0,-l.X,0]),{u_matrix:pe,u_image:1,u_dimension:[ce,ce],u_zoom:te.overscaledZ,u_unpack:oe.getUnpackVector()}})(r.tileID,E),null,u.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function um(v,r,u,f,m,y){const S=f.paint.get("raster-fade-duration");if(!y&&S>0){const P=I.now(),E=(P-v.timeAdded)/S,z=r?(P-r.timeAdded)/S:-1,O=u.getSource(),F=m.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),X=!r||Math.abs(r.tileID.overscaledZ-F)>Math.abs(v.tileID.overscaledZ-F),te=X&&v.refreshedUponExpiration?1:l.ac(X?E:1-z,0,1);return v.refreshedUponExpiration&&E>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const fd=new l.aM(1,0,0,1),On=new l.aM(0,1,0,1),ac=new l.aM(0,0,1,1),y_=new l.aM(1,0,1,1),cm=new l.aM(0,1,1,1);function ja(v,r,u,f){lc(v,0,r+u/2,v.transform.width,u,f)}function hm(v,r,u,f){lc(v,r-u/2,0,u,v.transform.height,f)}function lc(v,r,u,f,m,y){const S=v.context,P=S.gl;P.enable(P.SCISSOR_TEST),P.scissor(r*v.pixelRatio,u*v.pixelRatio,f*v.pixelRatio,m*v.pixelRatio),S.clear({color:y}),P.disable(P.SCISSOR_TEST)}function dm(v,r,u){const f=v.context,m=f.gl,y=u.posMatrix,S=v.useProgram("debug"),P=Sn.disabled,E=Xn.disabled,z=v.colorModeForRenderPass(),O="$debug",F=v.style.map.terrain&&v.style.map.terrain.getTerrainData(u);f.activeTexture.set(m.TEXTURE0);const X=r.getTileByID(u.key).latestRawTileData,te=Math.floor((X&&X.byteLength||0)/1024),oe=r.getTile(u).tileSize,ce=512/Math.min(oe,512)*(u.overscaledZ/v.transform.zoom)*.5;let pe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(pe+=` => ${u.overscaledZ}`),function(fe,ve){fe.initDebugOverlayCanvas();const le=fe.debugOverlayCanvas,Se=fe.context.gl,Pe=fe.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,le.width,le.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(ve,5,5),Pe.strokeText(ve,5,5),fe.debugOverlayTexture.update(le),fe.debugOverlayTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}(v,`${pe} ${te}kB`),S.draw(f,m.TRIANGLES,P,E,yr.alphaBlended,Wn.disabled,Wl(y,l.aM.transparent,ce),null,O,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),S.draw(f,m.LINE_STRIP,P,E,z,Wn.disabled,Wl(y,l.aM.red),F,O,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function pm(v,r,u){const f=v.context,m=f.gl,y=v.colorModeForRenderPass(),S=new Sn(m.LEQUAL,Sn.ReadWrite,v.depthRangeFor3D),P=v.useProgram("terrain"),E=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,v.width,v.height]);for(const z of u){const O=v.renderToTexture.getTexture(z),F=r.getTerrainData(z.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,O.texture);const X=v.transform.calculatePosMatrix(z.tileID.toUnwrapped()),te=r.getMeshFrameDelta(v.transform.zoom),oe=v.transform.calculateFogMatrix(z.tileID.toUnwrapped()),ce=Yh(X,te,oe,v.style.sky,v.transform.pitch);P.draw(f,m.TRIANGLES,S,Xn.disabled,y,Wn.backCCW,ce,F,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}}class uc{constructor(r,u,f){this.vertexBuffer=r,this.indexBuffer=u,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class cc{constructor(r,u){this.context=new g_(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=zt.maxUnderzooming+zt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Kh}resize(r,u,f){if(this.width=Math.floor(r*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,u=new l.aX;u.emplaceBack(0,0),u.emplaceBack(l.X,0),u.emplaceBack(0,l.X),u.emplaceBack(l.X,l.X),this.tileExtentBuffer=r.createVertexBuffer(u,Qs.members),this.tileExtentSegments=l.a0.simpleSegment(0,0,4,2);const f=new l.aX;f.emplaceBack(0,0),f.emplaceBack(l.X,0),f.emplaceBack(0,l.X),f.emplaceBack(l.X,l.X),this.debugBuffer=r.createVertexBuffer(f,Qs.members),this.debugSegments=l.a0.simpleSegment(0,0,4,5);const m=new l.$;m.emplaceBack(0,0,0,0),m.emplaceBack(l.X,0,l.X,0),m.emplaceBack(0,l.X,0,l.X),m.emplaceBack(l.X,l.X,l.X,l.X),this.rasterBoundsBuffer=r.createVertexBuffer(m,Ct.members),this.rasterBoundsSegments=l.a0.simpleSegment(0,0,4,2);const y=new l.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(y,Qs.members),this.viewportSegments=l.a0.simpleSegment(0,0,4,2);const S=new l.aZ;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(S);const P=new l.aY;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(P);const E=this.context.gl;this.stencilClearMode=new Xn({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.H();l.aP(f,0,this.width,this.height,0,0,1),l.K(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,Sn.disabled,this.stencilClearMode,yr.disabled,Wn.disabled,Ci(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(yr.disabled),f.setDepthMode(Sn.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of u){const P=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,E=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);y.draw(f,m.TRIANGLES,Sn.disabled,new Xn({func:m.ALWAYS,mask:0},P,255,m.KEEP,m.KEEP,m.REPLACE),yr.disabled,Wn.disabled,Ci(S.posMatrix),E,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new Xn({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new Xn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,f=r.sort((S,P)=>P.overscaledZ-S.overscaledZ),m=f[f.length-1].overscaledZ,y=f[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const S={};for(let P=0;P<y;P++)S[P+m]=new Xn({func:u.GEQUAL,mask:255},P+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=y,[S,f]}return[{[m]:Xn.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new yr([r.CONSTANT_COLOR,r.ONE],new l.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?yr.unblended:yr.alphaBlended}depthModeForSublayer(r,u,f){if(!this.opaquePassEnabledForLayer())return Sn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Sn(f||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(I.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,y={},S={},P={};for(const E in m){const z=m[E];z.used&&z.prepare(this.context),y[E]=z.getVisibleCoordinates(),S[E]=y[E].slice().reverse(),P[E]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let E=0;E<f.length;E++)if(this.style._layers[f[E]].is3D()){this.opaquePassCutoff=E;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const E of f){const z=this.style._layers[E];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const O=S[z.source];(z.type==="custom"||O.length)&&this.renderLayer(this,m[z.source],z,O)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aM.black:l.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(E,z){const O=E.context,F=O.gl,X=((fe,ve,le)=>({u_sky_color:fe.properties.get("sky-color"),u_horizon_color:fe.properties.get("horizon-color"),u_horizon:(ve.height/2+ve.getHorizon())*le,u_sky_horizon_blend:fe.properties.get("sky-horizon-blend")*ve.height/2*le}))(z,E.style.map.transform,E.pixelRatio),te=new Sn(F.LEQUAL,Sn.ReadWrite,[0,1]),oe=Xn.disabled,ce=E.colorModeForRenderPass(),pe=E.useProgram("sky");if(!z.mesh){const fe=new l.aX;fe.emplaceBack(-1,-1),fe.emplaceBack(1,-1),fe.emplaceBack(1,1),fe.emplaceBack(-1,1);const ve=new l.aY;ve.emplaceBack(0,1,2),ve.emplaceBack(0,2,3),z.mesh=new uc(O.createVertexBuffer(fe,Qs.members),O.createIndexBuffer(ve),l.a0.simpleSegment(0,0,fe.length,ve.length))}pe.draw(O,F.TRIANGLES,te,oe,ce,Wn.disabled,X,void 0,"sky",z.mesh.vertexBuffer,z.mesh.indexBuffer,z.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const E=this.style._layers[f[this.currentLayer]],z=m[E.source],O=y[E.source];this._renderTileClippingMasks(E,O),this.renderLayer(this,z,E,O)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const E=this.style._layers[f[this.currentLayer]],z=m[E.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(E))continue;const O=(E.type==="symbol"?P:S)[E.source];this._renderTileClippingMasks(E,y[E.source]),this.renderLayer(this,z,E,O)}if(this.options.showTileBoundaries){const E=function(z,O){let F=null;const X=Object.values(z._layers).flatMap(pe=>pe.source&&!pe.isHidden(O)?[z.sourceCaches[pe.source]]:[]),te=X.filter(pe=>pe.getSource().type==="vector"),oe=X.filter(pe=>pe.getSource().type!=="vector"),ce=pe=>{(!F||F.getSource().maxzoom<pe.getSource().maxzoom)&&(F=pe)};return te.forEach(pe=>ce(pe)),F||oe.forEach(pe=>ce(pe)),F}(this.style,this.transform.zoom);E&&function(z,O,F){for(let X=0;X<F.length;X++)dm(z,O,F[X])}(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(E){const z=E.transform.padding;ja(E,E.transform.height-(z.top||0),3,fd),ja(E,z.bottom||0,3,On),hm(E,z.left||0,3,ac),hm(E,E.transform.width-(z.right||0),3,y_);const O=E.transform.centerPoint;(function(F,X,te,oe){lc(F,X-1,te-10,2,20,oe),lc(F,X-10,te-1,20,2,oe)})(E,O.x,E.transform.height-O.y,cm)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=r?!l.a_(u,f):!l.a$(u,f)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(l.b0(u,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,S){const P=y.context,E=P.gl,z=yr.unblended,O=new Sn(E.LEQUAL,Sn.ReadWrite,[0,1]),F=S.getTerrainMesh(),X=S.sourceCache.getRenderableTiles(),te=y.useProgram("terrainDepth");P.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),P.clear({color:l.aM.transparent,depth:1});for(const oe of X){const ce=S.getTerrainData(oe.tileID),pe={u_matrix:y.transform.calculatePosMatrix(oe.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(y.transform.zoom)};te.draw(P,E.TRIANGLES,O,Xn.disabled,z,Wn.backCCW,pe,ce,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,S){const P=y.context,E=P.gl,z=yr.unblended,O=new Sn(E.LEQUAL,Sn.ReadWrite,[0,1]),F=S.getTerrainMesh(),X=S.getCoordsTexture(),te=S.sourceCache.getRenderableTiles(),oe=y.useProgram("terrainCoords");P.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),P.clear({color:l.aM.transparent,depth:1}),S.coordsIndex=[];for(const ce of te){const pe=S.getTerrainData(ce.tileID);P.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,X.texture);const fe={u_matrix:y.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(y.transform.zoom)};oe.draw(P,E.TRIANGLES,O,Xn.disabled,z,Wn.backCCW,fe,pe,"terrain",F.vertexBuffer,F.indexBuffer,F.segments),S.coordsIndex.push(ce.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(r,u,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(y,S,P,E,z){if(y.renderPass!=="translucent")return;const O=Xn.disabled,F=y.colorModeForRenderPass();(P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,te,oe,ce,pe,fe,ve,le,Se){const Pe=te.transform,De=$i(),Ke=pe==="map",et=fe==="map";for(const pt of X){const St=ce.getTile(pt),lt=St.getBucket(oe);if(!lt||!lt.text||!lt.text.segments.get().length)continue;const at=l.ag(lt.textSizeData,Pe.zoom),Rt=dn(St,1,te.transform.zoom),ln=Cn(pt.posMatrix,et,Ke,te.transform,Rt),ct=oe.layout.get("icon-text-fit")!=="none"&&lt.hasIconData();if(at){const xt=Math.pow(2,Pe.zoom-St.tileID.overscaledZ),sn=te.style.map.terrain?(_n,Tn)=>te.style.map.terrain.getElevation(pt,_n,Tn):null,ir=De.translatePosition(Pe,St,ve,le);Ba(lt,Ke,et,Se,Pe,ln,pt.posMatrix,xt,at,ct,De,ir,pt.toUnwrapped(),sn)}}}(E,y,P,S,P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),z),P.paint.get("icon-opacity").constantOr(1)!==0&&hd(y,S,P,E,!1,P.paint.get("icon-translate"),P.paint.get("icon-translate-anchor"),P.layout.get("icon-rotation-alignment"),P.layout.get("icon-pitch-alignment"),P.layout.get("icon-keep-upright"),O,F),P.paint.get("text-opacity").constantOr(1)!==0&&hd(y,S,P,E,!0,P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.layout.get("text-keep-upright"),O,F),S.map.showCollisionBoxes&&(Gl(y,S,P,E,!0),Gl(y,S,P,E,!1))})(r,u,f,m,this.style.placement.variableOffsets);break;case"circle":(function(y,S,P,E){if(y.renderPass!=="translucent")return;const z=P.paint.get("circle-opacity"),O=P.paint.get("circle-stroke-width"),F=P.paint.get("circle-stroke-opacity"),X=!P.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(O.constantOr(1)===0||F.constantOr(1)===0))return;const te=y.context,oe=te.gl,ce=y.depthModeForSublayer(0,Sn.ReadOnly),pe=Xn.disabled,fe=y.colorModeForRenderPass(),ve=[];for(let le=0;le<E.length;le++){const Se=E[le],Pe=S.getTile(Se),De=Pe.getBucket(P);if(!De)continue;const Ke=De.programConfigurations.get(P.id),et=y.useProgram("circle",Ke),pt=De.layoutVertexBuffer,St=De.indexBuffer,lt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Se),at={programConfiguration:Ke,program:et,layoutVertexBuffer:pt,indexBuffer:St,uniformValues:r_(y,Se,Pe,P),terrainData:lt};if(X){const Rt=De.segments.get();for(const ln of Rt)ve.push({segments:new l.a0([ln]),sortKey:ln.sortKey,state:at})}else ve.push({segments:De.segments,sortKey:0,state:at})}X&&ve.sort((le,Se)=>le.sortKey-Se.sortKey);for(const le of ve){const{programConfiguration:Se,program:Pe,layoutVertexBuffer:De,indexBuffer:Ke,uniformValues:et,terrainData:pt}=le.state;Pe.draw(te,oe.TRIANGLES,ce,pe,fe,Wn.disabled,et,pt,P.id,De,Ke,le.segments,P.paint,y.transform.zoom,Se)}})(r,u,f,m);break;case"heatmap":(function(y,S,P,E){if(P.paint.get("heatmap-opacity")===0)return;const z=y.context;if(y.style.map.terrain){for(const O of E){const F=S.getTile(O);S.hasRenderableParent(O)||(y.renderPass==="offscreen"?pd(y,F,P,O):y.renderPass==="translucent"&&sa(y,P,O))}z.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(O,F,X,te){const oe=O.context,ce=oe.gl,pe=Xn.disabled,fe=new yr([ce.ONE,ce.ONE],l.aM.transparent,[!0,!0,!0,!0]);(function(ve,le,Se){const Pe=ve.gl;ve.activeTexture.set(Pe.TEXTURE1),ve.viewport.set([0,0,le.width/4,le.height/4]);let De=Se.heatmapFbos.get(l.aU);De?(Pe.bindTexture(Pe.TEXTURE_2D,De.colorAttachment.get()),ve.bindFramebuffer.set(De.framebuffer)):(De=Kl(ve,le.width/4,le.height/4),Se.heatmapFbos.set(l.aU,De))})(oe,O,X),oe.clear({color:l.aM.transparent});for(let ve=0;ve<te.length;ve++){const le=te[ve];if(F.hasRenderableParent(le))continue;const Se=F.getTile(le),Pe=Se.getBucket(X);if(!Pe)continue;const De=Pe.programConfigurations.get(X.id),Ke=O.useProgram("heatmap",De),{zoom:et}=O.transform;Ke.draw(oe,ce.TRIANGLES,Sn.disabled,pe,fe,Wn.disabled,Ti(le.posMatrix,Se,et,X.paint.get("heatmap-intensity")),null,X.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,X.paint,O.transform.zoom,De)}oe.viewport.set([0,0,O.width,O.height])}(y,S,P,E):y.renderPass==="translucent"&&function(O,F){const X=O.context,te=X.gl;X.setColorMode(O.colorModeForRenderPass());const oe=F.heatmapFbos.get(l.aU);oe&&(X.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,oe.colorAttachment.get()),X.activeTexture.set(te.TEXTURE1),Xl(X,F).bind(te.LINEAR,te.CLAMP_TO_EDGE),O.useProgram("heatmapTexture").draw(X,te.TRIANGLES,Sn.disabled,Xn.disabled,O.colorModeForRenderPass(),Wn.disabled,Yu(O,F,0,1),null,F.id,O.viewportBuffer,O.quadTriangleIndexBuffer,O.viewportSegments,F.paint,O.transform.zoom))}(y,P)})(r,u,f,m);break;case"line":(function(y,S,P,E){if(y.renderPass!=="translucent")return;const z=P.paint.get("line-opacity"),O=P.paint.get("line-width");if(z.constantOr(1)===0||O.constantOr(1)===0)return;const F=y.depthModeForSublayer(0,Sn.ReadOnly),X=y.colorModeForRenderPass(),te=P.paint.get("line-dasharray"),oe=P.paint.get("line-pattern"),ce=oe.constantOr(1),pe=P.paint.get("line-gradient"),fe=P.getCrossfadeParameters(),ve=ce?"linePattern":te?"lineSDF":pe?"lineGradient":"line",le=y.context,Se=le.gl;let Pe=!0;for(const De of E){const Ke=S.getTile(De);if(ce&&!Ke.patternsLoaded())continue;const et=Ke.getBucket(P);if(!et)continue;const pt=et.programConfigurations.get(P.id),St=y.context.program.get(),lt=y.useProgram(ve,pt),at=Pe||lt.program!==St,Rt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(De),ln=oe.constantOr(null);if(ln&&Ke.imageAtlas){const sn=Ke.imageAtlas,ir=sn.patternPositions[ln.to.toString()],_n=sn.patternPositions[ln.from.toString()];ir&&_n&&pt.setConstantPatternPositions(ir,_n)}const ct=Rt?De:null,xt=ce?Oa(y,Ke,P,fe,ct):te?i_(y,Ke,P,te,fe,ct):pe?Gf(y,Ke,P,et.lineClipsArray.length,ct):Qu(y,Ke,P,ct);if(ce)le.activeTexture.set(Se.TEXTURE0),Ke.imageAtlasTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),pt.updatePaintBuffers(fe);else if(te&&(at||y.lineAtlas.dirty))le.activeTexture.set(Se.TEXTURE0),y.lineAtlas.bind(le);else if(pe){const sn=et.gradients[P.id];let ir=sn.texture;if(P.gradientVersion!==sn.version){let _n=256;if(P.stepInterpolant){const Tn=S.getSource().maxzoom,or=De.canonical.z===Tn?Math.ceil(1<<y.transform.maxZoom-De.canonical.z):1;_n=l.ac(l.aV(et.maxLineLength/l.X*1024*or),256,le.maxTextureSize)}sn.gradient=l.aW({expression:P.gradientExpression(),evaluationKey:"lineProgress",resolution:_n,image:sn.gradient||void 0,clips:et.lineClipsArray}),sn.texture?sn.texture.update(sn.gradient):sn.texture=new Re(le,sn.gradient,Se.RGBA),sn.version=P.gradientVersion,ir=sn.texture}le.activeTexture.set(Se.TEXTURE0),ir.bind(P.stepInterpolant?Se.NEAREST:Se.LINEAR,Se.CLAMP_TO_EDGE)}lt.draw(le,Se.TRIANGLES,F,y.stencilModeForClipping(De),X,Wn.disabled,xt,Rt,P.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,P.paint,y.transform.zoom,pt,et.layoutVertexBuffer2),Pe=!1}})(r,u,f,m);break;case"fill":(function(y,S,P,E){const z=P.paint.get("fill-color"),O=P.paint.get("fill-opacity");if(O.constantOr(1)===0)return;const F=y.colorModeForRenderPass(),X=P.paint.get("fill-pattern"),te=y.opaquePassEnabledForLayer()&&!X.constantOr(1)&&z.constantOr(l.aM.transparent).a===1&&O.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===te){const oe=y.depthModeForSublayer(1,y.renderPass==="opaque"?Sn.ReadWrite:Sn.ReadOnly);Yl(y,S,P,E,oe,F,!1)}if(y.renderPass==="translucent"&&P.paint.get("fill-antialias")){const oe=y.depthModeForSublayer(P.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly);Yl(y,S,P,E,oe,F,!0)}})(r,u,f,m);break;case"fill-extrusion":(function(y,S,P,E){const z=P.paint.get("fill-extrusion-opacity");if(z!==0&&y.renderPass==="translucent"){const O=new Sn(y.context.gl.LEQUAL,Sn.ReadWrite,y.depthRangeFor3D);if(z!==1||P.paint.get("fill-extrusion-pattern").constantOr(1))sc(y,S,P,E,O,Xn.disabled,yr.disabled),sc(y,S,P,E,O,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const F=y.colorModeForRenderPass();sc(y,S,P,E,O,Xn.disabled,F)}}})(r,u,f,m);break;case"hillshade":(function(y,S,P,E){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const z=y.context,O=y.depthModeForSublayer(0,Sn.ReadOnly),F=y.colorModeForRenderPass(),[X,te]=y.renderPass==="translucent"?y.stencilConfigForOverlap(E):[{},E];for(const oe of te){const ce=S.getTile(oe);ce.needsHillshadePrepare!==void 0&&ce.needsHillshadePrepare&&y.renderPass==="offscreen"?Va(y,ce,P,O,Xn.disabled,F):y.renderPass==="translucent"&&Na(y,oe,ce,P,O,X[oe.overscaledZ],F)}z.viewport.set([0,0,y.width,y.height])})(r,u,f,m);break;case"raster":(function(y,S,P,E){if(y.renderPass!=="translucent"||P.paint.get("raster-opacity")===0||!E.length)return;const z=y.context,O=z.gl,F=S.getSource(),X=y.useProgram("raster"),te=y.colorModeForRenderPass(),[oe,ce]=F instanceof Rn?[{},E]:y.stencilConfigForOverlap(E),pe=ce[ce.length-1].overscaledZ,fe=!y.options.moving;for(const ve of ce){const le=y.depthModeForSublayer(ve.overscaledZ-pe,P.paint.get("raster-opacity")===1?Sn.ReadWrite:Sn.ReadOnly,O.LESS),Se=S.getTile(ve);Se.registerFadeDuration(P.paint.get("raster-fade-duration"));const Pe=S.findLoadedParent(ve,0),De=S.findLoadedSibling(ve),Ke=um(Se,Pe||De||null,S,P,y.transform,y.style.map.terrain);let et,pt;const St=P.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;z.activeTexture.set(O.TEXTURE0),Se.texture.bind(St,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(O.TEXTURE1),Pe?(Pe.texture.bind(St,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),et=Math.pow(2,Pe.tileID.overscaledZ-Se.tileID.overscaledZ),pt=[Se.tileID.canonical.x*et%1,Se.tileID.canonical.y*et%1]):Se.texture.bind(St,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),Se.texture.useMipmap&&z.extTextureFilterAnisotropic&&y.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const lt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve),at=lt?ve:null,Rt=at?at.posMatrix:y.transform.calculatePosMatrix(ve.toUnwrapped(),fe),ln=o_(Rt,pt||[0,0],et||1,Ke,P);F instanceof Rn?X.draw(z,O.TRIANGLES,le,Xn.disabled,te,Wn.disabled,ln,lt,P.id,F.boundsBuffer,y.quadTriangleIndexBuffer,F.boundsSegments):X.draw(z,O.TRIANGLES,le,oe[ve.overscaledZ],te,Wn.disabled,ln,lt,P.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(r,u,f,m);break;case"background":(function(y,S,P,E){const z=P.paint.get("background-color"),O=P.paint.get("background-opacity");if(O===0)return;const F=y.context,X=F.gl,te=y.transform,oe=te.tileSize,ce=P.paint.get("background-pattern");if(y.isPatternMissing(ce))return;const pe=!ce&&z.a===1&&O===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==pe)return;const fe=Xn.disabled,ve=y.depthModeForSublayer(0,pe==="opaque"?Sn.ReadWrite:Sn.ReadOnly),le=y.colorModeForRenderPass(),Se=y.useProgram(ce?"backgroundPattern":"background"),Pe=E||te.coveringTiles({tileSize:oe,terrain:y.style.map.terrain});ce&&(F.activeTexture.set(X.TEXTURE0),y.imageManager.bind(y.context));const De=P.getCrossfadeParameters();for(const Ke of Pe){const et=E?Ke.posMatrix:y.transform.calculatePosMatrix(Ke.toUnwrapped()),pt=ce?ed(et,O,y,ce,{tileID:Ke,tileSize:oe},De):ec(et,O,z),St=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke);Se.draw(F,X.TRIANGLES,ve,fe,le,Wn.disabled,pt,St,P.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(y,S,P){const E=y.context,z=P.implementation;if(y.renderPass==="offscreen"){const O=z.prerender;O&&(y.setCustomLayerDefaults(),E.setColorMode(y.colorModeForRenderPass()),O.call(z,E.gl,y.transform.customLayerMatrix()),E.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),E.setColorMode(y.colorModeForRenderPass()),E.setStencilMode(Xn.disabled);const O=z.renderingMode==="3d"?new Sn(y.context.gl.LEQUAL,Sn.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Sn.ReadOnly);E.setDepthMode(O),z.render(E.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),E.setDirty(),y.setBaseState(),E.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,u,f,m,y){if(!f[0]&&!f[1])return r;const S=y?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(S){const z=Math.sin(S),O=Math.cos(S);f=[f[0]*O-f[1]*z,f[0]*z+f[1]*O]}const P=[y?f[0]:dn(u,f[0],this.transform.zoom),y?f[1]:dn(u,f[1],this.transform.zoom),0],E=new Float32Array(16);return l.J(E,r,P),E}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!u||!f}useProgram(r,u){this.cache=this.cache||{};const f=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Jh(this.context,Cs[r],u,td[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Re(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}class Ua{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,f){const m=Math.pow(2,f),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const E=1/(P=l.af([],P,r))[3]/u*m;return l.b1(P,P,[E,E,1/P[3],E])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const E=function(X,te){var oe=te[0],ce=te[1],pe=te[2],fe=oe*oe+ce*ce+pe*pe;return fe>0&&(fe=1/Math.sqrt(fe)),X[0]=te[0]*fe,X[1]=te[1]*fe,X[2]=te[2]*fe,X}([],function(X,te,oe){var ce=te[0],pe=te[1],fe=te[2],ve=oe[0],le=oe[1],Se=oe[2];return X[0]=pe*Se-fe*le,X[1]=fe*ve-ce*Se,X[2]=ce*le-pe*ve,X}([],ae([],y[P[0]],y[P[1]]),ae([],y[P[2]],y[P[1]]))),z=-((O=E)[0]*(F=y[P[1]])[0]+O[1]*F[1]+O[2]*F[2]);var O,F;return E.concat(z)});return new Ua(y,S)}}class Wa{constructor(r,u){this.min=r,this.max=u,this.center=function(f,m,y){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,y){return f[0]=m[0]+y[0],f[1]=m[1]+y[1],f[2]=m[2]+y[2],f}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],f=ne(this.min),m=ne(this.max);for(let y=0;y<u.length;y++)f[y]=u[y]?this.min[y]:this.center[y],m[y]=u[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new Wa(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const y=r.planes[m];let S=0;for(let P=0;P<u.length;P++)l.b2(y,u[P])>=0&&S++;if(S===0)return 0;S!==u.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let P=0;P<r.points.length;P++){const E=r.points[P][m]-this.min[m];y=Math.min(y,E),S=Math.max(S,E)}if(S<0||y>this.max[m]-this.min[m])return 0}return 1}}class Ha{constructor(r=0,u=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=f,this.right=m}interpolate(r,u,f){return u.top!=null&&r.top!=null&&(this.top=l.y.number(r.top,u.top,f)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.y.number(r.bottom,u.bottom,f)),u.left!=null&&r.left!=null&&(this.left=l.y.number(r.left,u.left,f)),u.right!=null&&r.right!=null&&(this.right=l.y.number(r.right,u.right,f)),this}getCenter(r,u){const f=l.ac((this.left+r-this.right)/2,0,r),m=l.ac((this.top+u-this.bottom)/2,0,u);return new l.P(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Ha(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const md=85.051129;class qa{constructor(r,u,f,m,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ha,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new qa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-l.b3(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new l.A(4);return l.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,y){var S=m[0],P=m[1],E=m[2],z=m[3],O=Math.sin(y),F=Math.cos(y);f[0]=S*F+E*O,f[1]=P*F+z*O,f[2]=S*-O+E*F,f[3]=P*-O+z*F}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=l.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,f){this._unmodified=!1,this._edgeInsets.interpolate(r,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new l.b4(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.P(0,0)),m=this.pointCoordinate(new l.P(this.width,0)),y=this.pointCoordinate(new l.P(this.width,this.height)),S=this.pointCoordinate(new l.P(0,this.height)),P=Math.floor(Math.min(f.x,m.x,y.x,S.x)),E=Math.floor(Math.max(f.x,m.x,y.x,S.x)),z=1;for(let O=P-z;O<=E+z;O++)O!==0&&u.push(new l.b4(O,r))}return u}coveringTiles(r){var u,f;let m=this.coveringZoomLevel(r);const y=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),P=l.Z.fromLngLat(this.center),E=Math.pow(2,m),z=[E*S.x,E*S.y,0],O=[E*P.x,E*P.y,0],F=Ua.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m);let X=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=m);const te=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,oe=le=>({aabb:new Wa([le*E,0,0],[(le+1)*E,E,0]),zoom:0,x:0,y:0,wrap:le,fullyVisible:!1}),ce=[],pe=[],fe=m,ve=r.reparseOverscaled?y:m;if(this._renderWorldCopies)for(let le=1;le<=3;le++)ce.push(oe(-le)),ce.push(oe(le));for(ce.push(oe(0));ce.length>0;){const le=ce.pop(),Se=le.x,Pe=le.y;let De=le.fullyVisible;if(!De){const lt=le.aabb.intersects(F);if(lt===0)continue;De=lt===2}const Ke=r.terrain?z:O,et=le.aabb.distanceX(Ke),pt=le.aabb.distanceY(Ke),St=Math.max(Math.abs(et),Math.abs(pt));if(le.zoom===fe||St>te+(1<<fe-le.zoom)-2&&le.zoom>=X){const lt=fe-le.zoom,at=z[0]-.5-(Se<<lt),Rt=z[1]-.5-(Pe<<lt);pe.push({tileID:new l.S(le.zoom===fe?ve:le.zoom,le.wrap,le.zoom,Se,Pe),distanceSq:he([O[0]-.5-Se,O[1]-.5-Pe]),tileDistanceToCamera:Math.sqrt(at*at+Rt*Rt)})}else for(let lt=0;lt<4;lt++){const at=(Se<<1)+lt%2,Rt=(Pe<<1)+(lt>>1),ln=le.zoom+1;let ct=le.aabb.quadrant(lt);if(r.terrain){const xt=new l.S(ln,le.wrap,ln,at,Rt),sn=r.terrain.getMinMaxElevation(xt),ir=(u=sn.minElevation)!==null&&u!==void 0?u:this.elevation,_n=(f=sn.maxElevation)!==null&&f!==void 0?f:this.elevation;ct=new Wa([ct.min[0],ct.min[1],ir],[ct.max[0],ct.max[1],_n])}ce.push({aabb:ct,zoom:ln,x:at,y:Rt,wrap:le.wrap,fullyVisible:De})}}return pe.sort((le,Se)=>le.distanceSq-Se.distanceSq).map(le=>le.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=l.ac(r.lat,-85.051129,md);return new l.P(l.O(r.lng)*this.worldSize,l.Q(u)*this.worldSize)}unproject(r){return new l.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,r),y=r.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-y))return;const S=f+u-y,P=Math.cos(this._pitch)*this.cameraToCenterDistance/S/l.b5(1,m.lat),E=this.scaleZoom(P/this.tileSize);this._elevation=y,this._center=m,this.zoom=E}setLocationAtPoint(r,u){const f=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(r),S=new l.Z(y.x-(f.x-m.x),y.y-(f.y-m.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),u.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return l.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const X=u.pointCoordinate(r);if(X!=null)return X}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];l.af(f,f,this.pixelMatrixInverse),l.af(m,m,this.pixelMatrixInverse);const y=f[3],S=m[3],P=f[1]/y,E=m[1]/S,z=f[2]/y,O=m[2]/S,F=z===O?0:(0-z)/(O-z);return new l.Z(l.y.number(f[0]/y,m[0]/S,F)/this.worldSize,l.y.number(P,E,F)/this.worldSize)}coordinatePoint(r,u=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.af(m,m,f),new l.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Ce().extend(this.pointLocation(new l.P(0,r))).extend(this.pointLocation(new l.P(this.width,r))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ce([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,md])}calculateTileMatrix(r){const u=r.canonical,f=this.worldSize/this.zoomScale(u.z),m=u.x+Math.pow(2,u.z)*r.wrap,y=l.an(new Float64Array(16));return l.J(y,y,[m*f,u.y*f,0]),l.K(y,y,[f/l.X,f/l.X,1]),y}calculatePosMatrix(r,u=!1){const f=r.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const y=this.calculateTileMatrix(r);return l.L(y,u?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),m[f]=new Float32Array(y),m[f]}calculateFogMatrix(r){const u=r.key,f=this._fogMatrixCache;if(f[u])return f[u];const m=this.calculateTileMatrix(r);return l.L(m,this.fogMatrix,m),f[u]=new Float32Array(m),f[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,u){u=l.ac(+u,this.minZoom,this.maxZoom);const f={center:new l.N(r.lng,r.lat),zoom:u};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const le=179.9999999999;m=[-le,le]}const y=this.tileSize*this.zoomScale(f.zoom);let S=0,P=y,E=0,z=y,O=0,F=0;const{x:X,y:te}=this.size;if(this.latRange){const le=this.latRange;S=l.Q(le[1])*y,P=l.Q(le[0])*y,P-S<te&&(O=te/(P-S))}m&&(E=l.b3(l.O(m[0])*y,0,y),z=l.b3(l.O(m[1])*y,0,y),z<E&&(z+=y),z-E<X&&(F=X/(z-E)));const{x:oe,y:ce}=this.project.call({worldSize:y},r);let pe,fe;const ve=Math.max(F||0,O||0);if(ve){const le=new l.P(F?(z+E)/2:oe,O?(P+S)/2:ce);return f.center=this.unproject.call({worldSize:y},le).wrap(),f.zoom+=this.scaleZoom(ve),f}if(this.latRange){const le=te/2;ce-le<S&&(fe=S+le),ce+le>P&&(fe=P-le)}if(m){const le=(E+z)/2;let Se=oe;this._renderWorldCopies&&(Se=l.b3(oe,le-y/2,le+y/2));const Pe=X/2;Se-Pe<E&&(pe=E+Pe),Se+Pe>z&&(pe=z-Pe)}if(pe!==void 0||fe!==void 0){const le=new l.P(pe??oe,fe??ce);f.center=this.unproject.call({worldSize:y},le).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:u,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=u,this.zoom=f,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b5(1,this.center.lat)*this.worldSize;let m=l.an(new Float64Array(16));l.K(m,m,[this.width/2,-this.height/2,1]),l.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.an(new Float64Array(16)),l.K(m,m,[1,-1,1]),l.J(m,m,[-1,-1,0]),l.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),P=y-S*this._pixelPerMeter/Math.cos(this._pitch),E=S<0?P:y,z=Math.PI/2+this._pitch,O=this._fov*(.5+r.y/this.height),F=Math.sin(O)*E/Math.sin(l.ac(Math.PI-z-O,.01,Math.PI-.01)),X=this.getHorizon(),te=2*Math.atan(X/this.cameraToCenterDistance)*(.5+r.y/(2*X)),oe=Math.sin(te)*E/Math.sin(l.ac(Math.PI-z-te,.01,Math.PI-.01)),ce=Math.min(F,oe);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ce+E),this.nearZ=this.height/50,m=new Float64Array(16),l.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,this.projectionMatrix=l.ae(m),l.K(m,m,[1,-1,1]),l.J(m,m,[0,0,-this.cameraToCenterDistance]),l.b7(m,m,this._pitch),l.ad(m,m,this.angle),l.J(m,m,[-u,-f,0]),this.mercatorMatrix=l.K([],m,[this.worldSize,this.worldSize,this.worldSize]),l.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.L(new Float64Array(16),this.labelPlaneMatrix,m),l.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=l.as([],m),this.fogMatrix=new Float64Array(16),l.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,l.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b7(this.fogMatrix,this.fogMatrix,this._pitch),l.ad(this.fogMatrix,this.fogMatrix,this.angle),l.J(this.fogMatrix,this.fogMatrix,[-u,-f,0]),l.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=l.L(new Float64Array(16),this.labelPlaneMatrix,m);const pe=this.width%2/2,fe=this.height%2/2,ve=Math.cos(this.angle),le=Math.sin(this.angle),Se=u-Math.round(u)+ve*pe+le*fe,Pe=f-Math.round(f)+ve*fe+le*pe,De=new Float64Array(m);if(l.J(De,De,[Se>.5?Se-1:Se,Pe>.5?Pe-1:Pe,0]),this.alignedModelViewProjectionMatrix=De,m=l.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.af(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let f=u.x,m=u.y,y=u.x,S=u.y;for(const P of r)f=Math.min(f,P.x),m=Math.min(m,P.y),y=Math.max(y,P.x),S=Math.max(S,P.y);return[new l.P(f,m),new l.P(y,m),new l.P(y,S),new l.P(f,S),new l.P(f,m)]}}lngLatToCameraDepth(r,u){const f=this.locationCoordinate(r),m=[f.x*this.worldSize,f.y*this.worldSize,u,1];return l.af(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function Jl(v,r){let u,f=!1,m=null,y=null;const S=()=>{m=null,f&&(v.apply(y,u),m=setTimeout(S,r),f=!1)};return(...P)=>(f=!0,y=this,u=P,m||S(),m)}class hc{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const f=u.join("/");let m=f;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${f}`);let y=window.location.hash.replace(m,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let S=window.location.href.replace(/(#.+)?$/,y);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Jl(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),S=Math.round(u.lng*y)/y,P=Math.round(u.lat*y)/y,E=this._map.getBearing(),z=this._map.getPitch();let O="";if(O+=r?`/${S}/${P}/${f}`:`${f}/${P}/${S}`,(E||z)&&(O+="/"+Math.round(10*E)/10),z&&(O+=`/${Math.round(z)}`),this._hashName){const F=this._hashName;let X=!1;const te=window.location.hash.slice(1).split("&").map(oe=>{const ce=oe.split("=")[0];return ce===F?(X=!0,`${ce}=${O}`):oe}).filter(oe=>oe);return X||te.push(`${F}=${O}`),`#${te.join("&")}`}return`#${O}`}}const dc={linearity:.3,easing:l.b8(0,0,.3,1)},gd=l.e({deceleration:2500,maxSpeed:1400},dc),v_=l.e({deceleration:20,maxSpeed:1400},dc),fm=l.e({deceleration:1e3,maxSpeed:360},dc),pc=l.e({deceleration:1e3,maxSpeed:90},dc);class yd{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:I.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=I.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)u.zoom+=y.zoomDelta||0,u.bearing+=y.bearingDelta||0,u.pitch+=y.pitchDelta||0,y.panDelta&&u.pan._add(y.panDelta),y.around&&(u.around=y.around),y.pinchAround&&(u.pinchAround=y.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const y=eu(u.pan.mag(),f,l.e({},gd,r||{}));m.offset=u.pan.mult(y.amount/u.pan.mag()),m.center=this._map.transform.center,Ql(m,y)}if(u.zoom){const y=eu(u.zoom,f,v_);m.zoom=this._map.transform.zoom+y.amount,Ql(m,y)}if(u.bearing){const y=eu(u.bearing,f,fm);m.bearing=this._map.transform.bearing+l.ac(y.amount,-179,179),Ql(m,y)}if(u.pitch){const y=eu(u.pitch,f,pc);m.pitch=this._map.transform.pitch+y.amount,Ql(m,y)}if(m.zoom||m.bearing){const y=u.pinchAround===void 0?u.around:u.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),l.e(m,{noMoveStart:!0})}}function Ql(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function eu(v,r,u){const{maxSpeed:f,linearity:m,deceleration:y}=u,S=l.ac(v*m/(r/1e3),-f,f),P=Math.abs(S)/(y*m);return{easing:u.easing,duration:1e3*P,amount:S*(P/2)}}class Qr extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f,m={}){const y=M.mousePos(u.getCanvas(),f),S=u.unproject(y);super(r,l.e({point:y,lngLat:S,originalEvent:f},m)),this._defaultPrevented=!1,this.target=u}}class aa extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){const m=r==="touchend"?f.changedTouches:f.touches,y=M.touchPos(u.getCanvasContainer(),m),S=y.map(E=>u.unproject(E)),P=y.reduce((E,z,O,F)=>E.add(z.div(F.length)),new l.P(0,0));super(r,{points:y,point:P,lngLats:S,lngLat:u.unproject(P),originalEvent:f}),this._defaultPrevented=!1}}class mm extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class gm{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new mm(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new Qr(r.type,this._map,r))}mouseup(r){this._map.fire(new Qr(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Qr(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Qr(r.type,this._map,r))}mouseover(r){this._map.fire(new Qr(r.type,this._map,r))}mouseout(r){this._map.fire(new Qr(r.type,this._map,r))}touchstart(r){return this._firePreventable(new aa(r.type,this._map,r))}touchmove(r){this._map.fire(new aa(r.type,this._map,r))}touchend(r){this._map.fire(new aa(r.type,this._map,r))}touchcancel(r){this._map.fire(new aa(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vr{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Qr(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Qr(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class go{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(l.P.convert(r),this._map.terrain)}}class Ni{constructor(r,u){this._map=r,this._tr=new go(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(M.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=M.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const y=Math.min(m.x,f.x),S=Math.max(m.x,f.x),P=Math.min(m.y,f.y),E=Math.max(m.y,f.y);M.setTransform(this._box,`translate(${y}px,${P}px)`),this._box.style.width=S-y+"px",this._box.style.height=E-P+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const f=this._startPos,m=u;if(this.reset(),M.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.k(r,{originalEvent:u}))}}function tu(v,r){if(v.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${r.length}`);const u={};for(let f=0;f<v.length;f++)u[v[f].identifier]=r[f];return u}class vd{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const y=new l.P(0,0);for(const S of m)y._add(S);return y.div(m.length)}(u),this.touches=tu(f,u)))}touchmove(r,u,f){if(this.aborted||!this.centroid)return;const m=tu(f,u);for(const y in this.touches){const S=m[y];(!S||S.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(r,u,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class fc{constructor(r){this.singleTap=new vd(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,f){this.singleTap.touchstart(r,u,f)}touchmove(r,u,f){this.singleTap.touchmove(r,u,f)}touchend(r,u,f){const m=this.singleTap.touchend(r,u,f);if(m){const y=r.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(m)<30;if(y&&S||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Ga{constructor(r){this._tr=new go(r),this._zoomIn=new fc({numTouches:1,numTaps:2}),this._zoomOut=new fc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,f){this._zoomIn.touchstart(r,u,f),this._zoomOut.touchstart(r,u,f)}touchmove(r,u,f){this._zoomIn.touchmove(r,u,f),this._zoomOut.touchmove(r,u,f)}touchend(r,u,f){const m=this._zoomIn.touchend(r,u,f),y=this._zoomOut.touchend(r,u,f),S=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(m)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class us{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=u.length?u[0]:u;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&M.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const _d={0:1,2:2};class mc{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=M.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,f){const m=_d[f];return u.buttons===void 0||(u.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return M.mouseButton(r)===this._eventButton}}class xd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const gc=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=r=>{r.preventDefault()}},bd=({enable:v,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const f=new mc({checkCorrectEvent:m=>M.mouseButton(m)===0&&m.ctrlKey||M.mouseButton(m)===2});return new us({clickTolerance:r,move:(m,y)=>({bearingDelta:(y.x-m.x)*u}),moveStateManager:f,enable:v,assignEvents:gc})},wd=({enable:v,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new mc({checkCorrectEvent:m=>M.mouseButton(m)===0&&m.ctrlKey||M.mouseButton(m)===2});return new us({clickTolerance:r,move:(m,y)=>({pitchDelta:(y.y-m.y)*u}),moveStateManager:f,enable:v,assignEvents:gc})};class la{constructor(r,u){this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,u,f){return this._calculateTransform(r,u,f)}touchmove(r,u,f){if(this._active){if(!this._shouldBePrevented(f.length))return r.preventDefault(),this._calculateTransform(r,u,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,u,f){this._calculateTransform(r,u,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,f){f.length>0&&(this._active=!0);const m=tu(f,u),y=new l.P(0,0),S=new l.P(0,0);let P=0;for(const z in m){const O=m[z],F=this._touches[z];F&&(y._add(O),S._add(O.sub(F)),P++,m[z]=O)}if(this._touches=m,this._shouldBePrevented(P)||!S.mag())return;const E=S.div(P);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(P),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,y]=this._firstTwoTouches,S=nu(f,u,m),P=nu(f,u,y);if(!S||!P)return;const E=this._aroundCenter?null:S.add(P).div(2);return this._move([S,P],E,r)}touchend(r,u,f){if(!this._firstTwoTouches)return;const[m,y]=this._firstTwoTouches,S=nu(f,u,m),P=nu(f,u,y);S&&P||(this._active&&M.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function nu(v,r,u){for(let f=0;f<v.length;f++)if(v[f].identifier===u)return r[f]}function Sd(v,r){return Math.log(v/r)/Math.LN2}class Cd extends yc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Sd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sd(this._distance,f),pinchAround:u}}}function Td(v,r){return 180*v.angleWith(r)/Math.PI}class Pd extends yc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u,f){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Td(this._vector,m),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,f=Td(r,this._startVector);return Math.abs(f)<u}}function vc(v){return Math.abs(v.y)>Math.abs(v.x)}class ru extends yc{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,f){super.touchstart(r,u,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,vc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,y=u.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const S=r.y>0==u.y>0;return vc(r)&&vc(u)&&S}}const ym={panStep:100,bearingStep:15,pitchStep:10};class Yi{constructor(r){this._tr=new go(r);const u=ym;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,f=0,m=0,y=0,S=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),S=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:P=>{const E=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Bo,zoom:u?Math.round(E.zoom)+u*(r.shiftKey?2:1):E.zoom,bearing:E.bearing+f*this._bearingStep,pitch:E.pitch+m*this._pitchStep,offset:[-y*this._panStep,-S*this._panStep],center:E.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bo(v){return v*(2-v)}const kd=4.000244140625;class yo{constructor(r,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new go(r),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=I.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%kd==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=M.mousePos(this._map.getCanvas(),r),f=this._tr;this._around=u.y>f.transform.height/2-f.transform.getHorizon()?l.N.convert(this._aroundCenter?f.center:f.unproject(u)):l.N.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>kd?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&z!==0&&(z=1/z);const O=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(O*z))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let y,S=!1;const P=I.now()-this._lastWheelEventTime;if(this._type==="wheel"&&f&&m&&P){const E=Math.min(P/200,1),z=m(E);y=l.y.number(f,u,z),E<1?this._frameId||(this._frameId=!0):S=!0}else y=u,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.b9;if(this._prevEase){const f=this._prevEase,m=(I.now()-f.start)/f.duration,y=f.easing(m+.01)-f.easing(m),S=.27/Math.sqrt(y*y+1e-4)*.01,P=Math.sqrt(.0729-S*S);u=l.b8(S,P,.25,1)}return this._prevEase={start:I.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ua{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class __{constructor(r){this._tr=new go(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class x_{constructor(){this._tap=new fc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,f){if(!this._swipePoint)if(this._tapTime){const m=u[0],y=r.timeStamp-this._tapTime<500,S=this._tapPoint.dist(m)<30;y&&S?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,u,f)}touchmove(r,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=u[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,u,f)}touchend(r,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,u,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vm{constructor(r,u,f){this._el=r,this._mousePan=u,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class _m{constructor(r,u,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ed{constructor(r,u,f,m){this._el=r,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Za{constructor(r,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=M.create("div","maplibregl-cooperative-gesture-screen",r);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=u,this._container.appendChild(m);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=f,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(M.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,u){this._enabled&&(this._map.fire(new l.k("cooperativegestureprevented",{gestureType:r,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Ji=v=>v.zoom||v.drag||v.pitch||v.rotate;class Pt extends l.k{}function _c(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Id{constructor(r,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,y)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=m.type==="renderFrame"?void 0:m,P={needsRenderFrame:!1},E={},z={},O=m.touches,F=O?this._getMapTouches(O):void 0,X=F?M.touchPos(this._map.getCanvas(),F):M.mousePos(this._map.getCanvas(),m);for(const{handlerName:ce,handler:pe,allowed:fe}of this._handlers){if(!pe.isEnabled())continue;let ve;this._blockedByActive(z,fe,ce)?pe.reset():pe[y||m.type]&&(ve=pe[y||m.type](m,X,F),this.mergeHandlerResult(P,E,ve,ce,S),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()),(ve||pe.isActive())&&(z[ce]=pe)}const te={};for(const ce in this._previousActiveHandlers)z[ce]||(te[ce]=S);this._previousActiveHandlers=z,(Object.keys(te).length||_c(P))&&(this._changes.push([P,E,te]),this._triggerRenderFrame()),(Object.keys(z).length||_c(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:oe}=P;oe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],oe(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yd(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,y,S]of this._listeners)M.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[r,u,f]of this._listeners)M.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new gm(u,r));const m=u.boxZoom=new Ni(u,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const y=u.cooperativeGestures=new Za(u,r.cooperativeGestures);this._add("cooperativeGestures",y),r.cooperativeGestures&&y.enable();const S=new Ga(u),P=new __(u);u.doubleClickZoom=new ua(P,S),this._add("tapZoom",S),this._add("clickZoom",P),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const E=new x_;this._add("tapDragZoom",E);const z=u.touchPitch=new ru(u);this._add("touchPitch",z),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const O=bd(r),F=wd(r);u.dragRotate=new _m(r,O,F),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const X=(({enable:ve,clickTolerance:le})=>{const Se=new mc({checkCorrectEvent:Pe=>M.mouseButton(Pe)===0&&!Pe.ctrlKey});return new us({clickTolerance:le,move:(Pe,De)=>({around:De,panDelta:De.sub(Pe)}),activateOnStart:!0,moveStateManager:Se,enable:ve,assignEvents:gc})})(r),te=new la(r,u);u.dragPan=new vm(f,X,te),this._add("mousePan",X),this._add("touchPan",te,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const oe=new Pd,ce=new Cd;u.touchZoomRotate=new Ed(f,ce,oe,E),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const pe=u.scrollZoom=new yo(u,()=>this._triggerRenderFrame());this._add("scrollZoom",pe,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const fe=u.keyboard=new Yi(u);this._add("keyboard",fe),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new vr(u))}_add(r,u,f){this._handlers.push({handlerName:r,handler:u,allowed:f}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ji(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,f){for(const m in r)if(m!==f&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const f of r)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(r,u,f,m,y){if(!f)return;l.e(r,f);const S={handlerName:m,originalEvent:f.originalEvent||y};f.zoomDelta!==void 0&&(u.zoom=S),f.panDelta!==void 0&&(u.drag=S),f.pitchDelta!==void 0&&(u.pitch=S),f.bearingDelta!==void 0&&(u.rotate=S)}_applyChanges(){const r={},u={},f={};for(const[m,y,S]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),l.e(u,y),l.e(f,S);this._updateMapTransform(r,u,f),this._changes=[]}_updateMapTransform(r,u,f){const m=this._map,y=m._getTransformForUpdate(),S=m.terrain;if(!(_c(r)||S&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:P,zoomDelta:E,bearingDelta:z,pitchDelta:O,around:F,pinchAround:X}=r;X!==void 0&&(F=X),m._stop(!0),F=F||m.transform.centerPoint;const te=y.pointLocation(P?F.sub(P):F);z&&(y.bearing+=z),O&&(y.pitch+=O),E&&(y.zoom+=E),S?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(P)):y.setLocationAtPoint(te,F):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(te,F)):y.setLocationAtPoint(te,F),m._applyUpdatedTransform(y),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,f,!0)}_fireEvents(r,u,f){const m=Ji(this._eventsInProgress),y=Ji(r),S={};for(const F in r){const{originalEvent:X}=r[F];this._eventsInProgress[F]||(S[`${F}start`]=X),this._eventsInProgress[F]=r[F]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(const F in S)this._fireEvent(F,S[F]);y&&this._fireEvent("move",y.originalEvent);for(const F in r){const{originalEvent:X}=r[F];this._fireEvent(F,X)}const P={};let E;for(const F in this._eventsInProgress){const{handlerName:X,originalEvent:te}=this._eventsInProgress[F];this._handlersById[X].isActive()||(delete this._eventsInProgress[F],E=u[X]||te,P[`${F}end`]=E)}for(const F in P)this._fireEvent(F,P[F]);const z=Ji(this._eventsInProgress),O=(m||y)&&!z;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const F=this._map._getTransformForUpdate();F.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(F)}if(f&&O){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;!F||!F.essential&&I.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:E})),X(this._map.getBearing())&&this._map.resetNorth()):(X(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.k(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Pt("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class xm extends l.E{constructor(r,u){super(),this._renderFrameCallback=()=>{const f=Math.min((I.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,f){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},u),f)}panTo(r,u,f){return this.easeTo(l.e({center:r},u),f)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,f){return this.easeTo(l.e({zoom:r},u),f)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,f){return this.easeTo(l.e({bearing:r},u),f)}resetNorth(r,u){return this.rotateTo(0,l.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=Ce.convert(r).adjustAntiMeridian();const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,u)}_cameraForBoxAndBearing(r,u,f,m){const y={top:0,bottom:0,right:0,left:0};if(typeof(m=l.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const lt=m.padding;m.padding={top:lt,bottom:lt,right:lt,left:lt}}m.padding=l.e(y,m.padding);const S=this.transform,P=S.padding,E=new Ce(r,u),z=S.project(E.getNorthWest()),O=S.project(E.getNorthEast()),F=S.project(E.getSouthEast()),X=S.project(E.getSouthWest()),te=l.ba(-f),oe=z.rotate(te),ce=O.rotate(te),pe=F.rotate(te),fe=X.rotate(te),ve=new l.P(Math.max(oe.x,ce.x,fe.x,pe.x),Math.max(oe.y,ce.y,fe.y,pe.y)),le=new l.P(Math.min(oe.x,ce.x,fe.x,pe.x),Math.min(oe.y,ce.y,fe.y,pe.y)),Se=ve.sub(le),Pe=(S.width-(P.left+P.right+m.padding.left+m.padding.right))/Se.x,De=(S.height-(P.top+P.bottom+m.padding.top+m.padding.bottom))/Se.y;if(De<0||Pe<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ke=Math.min(S.scaleZoom(S.scale*Math.min(Pe,De)),m.maxZoom),et=l.P.convert(m.offset),pt=new l.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(l.ba(f)),St=et.add(pt).mult(S.scale/S.zoomScale(Ke));return{center:S.unproject(z.add(F).div(2).sub(St)),zoom:Ke,bearing:f}}fitBounds(r,u,f){return this._fitInternal(this.cameraForBounds(r,u),u,f)}fitScreenCoordinates(r,u,f,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(r)),this.transform.pointLocation(l.P.convert(u)),f,m),m,y)}_fitInternal(r,u,f){return r?(delete(u=l.e(r,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(r,u){this.stop();const f=this._getTransformForUpdate();let m=!1,y=!1,S=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=l.N.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(y=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(S=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),m&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),y&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),S&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(r,u,f,m=0){const y=l.Z.fromLngLat(r,u),S=l.Z.fromLngLat(f,m),P=S.x-y.x,E=S.y-y.y,z=S.z-y.z,O=Math.hypot(P,E,z);if(O===0)throw new Error("Can't calculate camera options with same From and To");const F=Math.hypot(P,E),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/O/this.transform.tileSize),te=180*Math.atan2(P,-E)/Math.PI;let oe=180*Math.acos(F/O)/Math.PI;return oe=z<0?90-oe:90+oe,{center:S.toLngLat(),zoom:X,pitch:oe,bearing:te}}easeTo(r,u){var f;this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.b9},r)).animate===!1||!r.essential&&I.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),y=m.zoom,S=m.bearing,P=m.pitch,E=m.padding,z="bearing"in r?this._normalizeBearing(r.bearing,S):S,O="pitch"in r?+r.pitch:P,F="padding"in r?r.padding:m.padding,X=l.P.convert(r.offset);let te=m.centerPoint.add(X);const oe=m.pointLocation(te),{center:ce,zoom:pe}=m.getConstrained(l.N.convert(r.center||oe),(f=r.zoom)!==null&&f!==void 0?f:y);this._normalizeCenter(ce,m);const fe=m.project(oe),ve=m.project(ce).sub(fe),le=m.zoomScale(pe-y);let Se,Pe;r.around&&(Se=l.N.convert(r.around),Pe=m.locationPoint(Se));const De={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||pe!==y,this._rotating=this._rotating||S!==z,this._pitching=this._pitching||O!==P,this._padding=!m.isPaddingEqual(F),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,De),this.terrain&&this._prepareElevation(ce),this._ease(Ke=>{if(this._zooming&&(m.zoom=l.y.number(y,pe,Ke)),this._rotating&&(m.bearing=l.y.number(S,z,Ke)),this._pitching&&(m.pitch=l.y.number(P,O,Ke)),this._padding&&(m.interpolatePadding(E,F,Ke),te=m.centerPoint.add(X)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ke),Se)m.setLocationAtPoint(Se,Pe);else{const et=m.zoomScale(m.zoom-y),pt=pe>y?Math.min(2,le):Math.max(.5,le),St=Math.pow(pt,1-Ke),lt=m.unproject(fe.add(ve.mult(Ke*St)).mult(et));m.setLocationAtPoint(m.renderWorldCopies?lt.wrap():lt,te)}this._applyUpdatedTransform(m),this._fireMoveEvents(u)},Ke=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u,Ke)},r),this}_prepareEase(r,u,f={}){this._moving=!0,u||f.moving||this.fire(new l.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new l.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new l.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new l.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(u-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=l.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){const u=r.getCameraPosition(),f=this.terrain.getElevationForLngLatZoom(u.lngLat,r.zoom);if(u.altitude<f){const m=this.calculateCameraOptionsFromTo(u.lngLat,f,r.center,r.elevation);return{pitch:m.pitch,zoom:m.zoom}}return{}}_applyUpdatedTransform(r){const u=[];if(this.terrain&&u.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&u.push(m=>this.transformCameraUpdate(m)),!u.length)return;const f=r.clone();for(const m of u){const y=f.clone(),{center:S,zoom:P,pitch:E,bearing:z,elevation:O}=m(y);S&&(y.center=S),P!==void 0&&(y.zoom=P),E!==void 0&&(y.pitch=E),z!==void 0&&(y.bearing=z),O!==void 0&&(y.elevation=O),f.apply(y)}this.transform.apply(f)}_fireMoveEvents(r){this.fire(new l.k("move",r)),this._zooming&&this.fire(new l.k("zoom",r)),this._rotating&&this.fire(new l.k("rotate",r)),this._pitching&&this.fire(new l.k("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,m=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.k("zoomend",r)),m&&this.fire(new l.k("rotateend",r)),y&&this.fire(new l.k("pitchend",r)),this.fire(new l.k("moveend",r))}flyTo(r,u){var f;if(!r.essential&&I.prefersReducedMotion){const xt=l.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(xt,u)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b9},r);const m=this._getTransformForUpdate(),y=m.zoom,S=m.bearing,P=m.pitch,E=m.padding,z="bearing"in r?this._normalizeBearing(r.bearing,S):S,O="pitch"in r?+r.pitch:P,F="padding"in r?r.padding:m.padding,X=l.P.convert(r.offset);let te=m.centerPoint.add(X);const oe=m.pointLocation(te),{center:ce,zoom:pe}=m.getConstrained(l.N.convert(r.center||oe),(f=r.zoom)!==null&&f!==void 0?f:y);this._normalizeCenter(ce,m);const fe=m.zoomScale(pe-y),ve=m.project(oe),le=m.project(ce).sub(ve);let Se=r.curve;const Pe=Math.max(m.width,m.height),De=Pe/fe,Ke=le.mag();if("minZoom"in r){const xt=l.ac(Math.min(r.minZoom,y,pe),m.minZoom,m.maxZoom),sn=Pe/m.zoomScale(xt-y);Se=Math.sqrt(sn/Ke*2)}const et=Se*Se;function pt(xt){const sn=(De*De-Pe*Pe+(xt?-1:1)*et*et*Ke*Ke)/(2*(xt?De:Pe)*et*Ke);return Math.log(Math.sqrt(sn*sn+1)-sn)}function St(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function lt(xt){return(Math.exp(xt)+Math.exp(-xt))/2}const at=pt(!1);let Rt=function(xt){return lt(at)/lt(at+Se*xt)},ln=function(xt){return Pe*((lt(at)*(St(sn=at+Se*xt)/lt(sn))-St(at))/et)/Ke;var sn},ct=(pt(!0)-at)/Se;if(Math.abs(Ke)<1e-6||!isFinite(ct)){if(Math.abs(Pe-De)<1e-6)return this.easeTo(r,u);const xt=De<Pe?-1:1;ct=Math.abs(Math.log(De/Pe))/Se,ln=()=>0,Rt=sn=>Math.exp(xt*Se*sn)}return r.duration="duration"in r?+r.duration:1e3*ct/("screenSpeed"in r?+r.screenSpeed/Se:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=S!==z,this._pitching=O!==P,this._padding=!m.isPaddingEqual(F),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ce),this._ease(xt=>{const sn=xt*ct,ir=1/Rt(sn);m.zoom=xt===1?pe:y+m.scaleZoom(ir),this._rotating&&(m.bearing=l.y.number(S,z,xt)),this._pitching&&(m.pitch=l.y.number(P,O,xt)),this._padding&&(m.interpolatePadding(E,F,xt),te=m.centerPoint.add(X)),this.terrain&&!r.freezeElevation&&this._updateElevation(xt);const _n=xt===1?ce:m.unproject(ve.add(le.mult(ln(sn))).mult(ir));m.setLocationAtPoint(m.renderWorldCopies?_n.wrap():_n,te),this._applyUpdatedTransform(m),this._fireMoveEvents(u)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}return r||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(r,u,f){f.animate===!1||f.duration===0?(r(1),u()):(this._easeStart=I.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=l.b3(r,-180,180);const f=Math.abs(r-u);return Math.abs(r-360-u)<f&&(r-=360),Math.abs(r+360-u)<f&&(r+=360),r}_normalizeCenter(r,u){if(!u.renderWorldCopies||u.lngRange)return;const f=r.lng-u.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const Ka={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Xa{constructor(r=Ka){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=M.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=M.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const f=this._map._getUIString(`AttributionControl.${u}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const y=u[m];if(y.used||y.usedForTerrain){const S=y.getSource();S.attribution&&r.indexOf(S.attribution)<0&&r.push(S.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,y)=>m.length-y.length),r=r.filter((m,y)=>{for(let S=y+1;S<r.length;S++)if(r[S].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ad{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=M.create("div","maplibregl-ctrl");const u=M.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){M.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class kn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Md=l.Y([{name:"a_pos3d",type:"Int16",components:3}]);class b_ extends l.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.aP(m.posMatrix,0,l.X,0,l.X,0,1),this._tiles[m.key]=new hn(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const u in this._tiles){const f=this._tiles[u];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16),l.aP(y.posMatrix,0,l.X,0,l.X,0,1),u[f]=y}else if(m.canonical.isChildOf(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const S=m.canonical.z-r.canonical.z,P=m.canonical.x-(m.canonical.x>>S<<S),E=m.canonical.y-(m.canonical.y>>S<<S),z=l.X>>S;l.aP(y.posMatrix,0,z,0,z,0,1),l.J(y.posMatrix,y.posMatrix,[-P*z,-E*z,0]),u[f]=y}else if(r.canonical.isChildOf(m.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const S=r.canonical.z-m.canonical.z,P=r.canonical.x-(r.canonical.x>>S<<S),E=r.canonical.y-(r.canonical.y>>S<<S),z=l.X>>S;l.aP(y.posMatrix,0,l.X,0,l.X,0,1),l.J(y.posMatrix,y.posMatrix,[P*z,E*z,0]),l.K(y.posMatrix,y.posMatrix,[1/2**S,1/2**S,0]),u[f]=y}}return u}getSourceTile(r,u){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!y||!y.dem)&&u)for(;m>=f.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(r.scaledTo(m--).key);return y}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class Rd{constructor(r,u,f){this.painter=r,this.sourceCache=new b_(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,f,m=l.X){var y;if(!(u>=0&&u<m&&f>=0&&f<m))return 0;const S=this.getTerrainData(r),P=(y=S.tile)===null||y===void 0?void 0:y.dem;if(!P)return 0;const E=function(oe,ce,pe){var fe=ce[0],ve=ce[1];return oe[0]=pe[0]*fe+pe[4]*ve+pe[12],oe[1]=pe[1]*fe+pe[5]*ve+pe[13],oe}([],[u/m*l.X,f/m*l.X],S.u_terrain_matrix),z=[E[0]*P.dim,E[1]*P.dim],O=Math.floor(z[0]),F=Math.floor(z[1]),X=z[0]-O,te=z[1]-F;return P.get(O,F)*(1-X)*(1-te)+P.get(O+1,F)*X*(1-te)+P.get(O,F+1)*(1-X)*te+P.get(O+1,F+1)*X*te}getElevationForLngLatZoom(r,u){if(!l.bb(u,r.wrap()))return 0;const{tileID:f,mercatorX:m,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(f,m%l.X,y%l.X,l.X)}getElevation(r,u,f,m=l.X){return this.getDEMElevation(r,u,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,y=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Re(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Re(m,new l.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.an([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new Re(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let y=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?y=r.canonical.z-m:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=r.canonical.x-(r.canonical.x>>y<<y),P=r.canonical.y-(r.canonical.y>>y<<y),E=l.bc(new Float64Array(16),[1/(l.X<<y),1/(l.X<<y),0]);l.J(E,E,[S*l.X,P*l.X,0]),this._demMatrixCache[r.key]={matrix:E,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,f=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Re(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Re(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,S=0;y<this._coordsTextureSize;y++)for(let P=0;P<this._coordsTextureSize;P++,S+=4)u[S+0]=255&P,u[S+1]=255&y,u[S+2]=P>>8<<4|y>>8,u[S+3]=0;const f=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new Re(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),f=this.painter.context,m=f.gl,y=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(y,P-S-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const E=u[0]+(u[2]>>4<<8),z=u[1]+((15&u[2])<<8),O=this.coordsIndex[255-u[3]],F=O&&this.sourceCache.getTileByID(O);if(!F)return null;const X=this._coordsTextureSize,te=(1<<F.tileID.canonical.z)*X;return new l.Z((F.tileID.canonical.x*X+E)/te+F.tileID.wrap,(F.tileID.canonical.y*X+z)/te,this.getElevation(F.tileID,E,z,X))}depthAtPoint(r){const u=new Uint8Array(4),f=this.painter.context,m=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new l.bd,f=new l.aY,m=this.meshSize,y=l.X/m,S=m*m;for(let F=0;F<=m;F++)for(let X=0;X<=m;X++)u.emplaceBack(X*y,F*y,0);for(let F=0;F<S;F+=m+1)for(let X=0;X<m;X++)f.emplaceBack(X+F,m+X+F+1,m+X+F+2),f.emplaceBack(X+F,m+X+F+2,X+F+1);const P=u.length,E=P+2*(m+1);for(const F of[0,1])for(let X=0;X<=m;X++)for(const te of[0,1])u.emplaceBack(X*y,F*l.X,te);for(let F=0;F<2*m;F+=2)f.emplaceBack(E+F,E+F+1,E+F+3),f.emplaceBack(E+F,E+F+3,E+F+2),f.emplaceBack(P+F,P+F+3,P+F+1),f.emplaceBack(P+F,P+F+2,P+F+3);const z=u.length,O=z+2*(m+1);for(const F of[0,1])for(let X=0;X<=m;X++)for(const te of[0,1])u.emplaceBack(F*l.X,X*y,te);for(let F=0;F<2*m;F+=2)f.emplaceBack(z+F,z+F+1,z+F+3),f.emplaceBack(z+F,z+F+3,z+F+2),f.emplaceBack(O+F,O+F+3,O+F+1),f.emplaceBack(O+F,O+F+2,O+F+3);return this._mesh=new uc(r.createVertexBuffer(u,Md.members),r.createIndexBuffer(f),l.a0.simpleSegment(0,0,u.length,f.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*l.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,u){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,u){const f=l.Z.fromLngLat(r.wrap()),m=(1<<u)*l.X,y=f.x*m,S=f.y*m,P=Math.floor(y/l.X),E=Math.floor(S/l.X);return{tileID:new l.S(u,0,u,P,E),mercatorX:y,mercatorY:S}}}class w_{constructor(r,u,f){this._context=r,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Re(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:r,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Ya={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class bm{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new w_(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const y of m){const S=this.terrain.sourceCache.getTerrainCoords(y);for(const P in S)this._coordsDescendingInv[f][P]||(this._coordsDescendingInv[f][P]=[]),this._coordsDescendingInv[f][P].push(S[P])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],y=m.source;if(Ya[m.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const S in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][S]=this._coordsDescendingInv[y][S].map(P=>P.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[m][f.tileID.key];y&&y!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ya[u]&&(this._prevType&&Ya[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(Ya[this._prevType]||Ya[u]&&m){this._prevType=u;const y=this._stacks.length-1,S=this._stacks[y]||[];for(const P of this._renderableTiles){if(this.pool.isFull()&&(pm(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(P),P.rtt[y]){const z=this.pool.getObjectForId(P.rtt[y].id);if(z.stamp===P.rtt[y].stamp){this.pool.useObject(z);continue}}const E=this.pool.getOrCreateFreeObject();this.pool.useObject(E),this.pool.stampObject(E),P.rtt[y]={id:E.id,stamp:E.stamp},f.context.bindFramebuffer.set(E.fbo.framebuffer),f.context.clear({color:l.aM.transparent,stencil:0}),f.currentStencilSource=void 0;for(let z=0;z<S.length;z++){const O=f.style._layers[S[z]],F=O.source?this._coordsDescendingInv[O.source][P.tileID.key]:[P.tileID];f.context.viewport.set([0,0,E.fbo.width,E.fbo.height]),f._renderTileClippingMasks(O,F),f.renderLayer(f,f.style.sourceCaches[O.source],O,F),O.source&&(P.rttCoords[O.source]=this._coordsDescendingInvStr[O.source][P.tileID.key])}}return pm(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ya[u]}return!1}}const zd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},wm=b,S_={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ka,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Ld=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},C_={showCompass:!0,showZoom:!0,visualizePitch:!1};class T_{constructor(r,u,f=!1){this.mousedown=S=>{this.startMouse(l.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),M.mousePos(this.element,S)),M.addEventListener(window,"mousemove",this.mousemove),M.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,M.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),M.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),y=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=bd({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:P,bearingDegreesPerPixelMoved:E=.8})=>{const z=new xd;return new us({clickTolerance:P,move:(O,F)=>({bearingDelta:(F.x-O.x)*E}),moveStateManager:z,enable:S,assignEvents:Ld})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=wd({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:P,pitchDegreesPerPixelMoved:E=-.5})=>{const z=new xd;return new us({clickTolerance:P,move:(O,F)=>({pitchDelta:(F.y-O.y)*E}),moveStateManager:z,enable:S,assignEvents:Ld})})({clickTolerance:y,enable:!0})),M.addEventListener(u,"mousedown",this.mousedown),M.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),M.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),M.disableDrag()}moveMouse(r,u){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(r,u)||{};y&&f.setPitch(f.getPitch()+y)}}moveTouch(r,u){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(r,u)||{};y&&f.setPitch(f.getPitch()+y)}}off(){const r=this.element;M.removeEventListener(r,"mousedown",this.mousedown),M.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend),M.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){M.enableDrag(),M.removeEventListener(window,"mousemove",this.mousemove),M.removeEventListener(window,"mouseup",this.mouseup),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend)}}let Vi;function rr(v,r,u){const f=new l.N(v.lng,v.lat);if(v=new l.N(v.lng,v.lat),r){const m=new l.N(v.lng-360,v.lat),y=new l.N(v.lng+360,v.lat),S=u.locationPoint(v).distSqr(r);u.locationPoint(m).distSqr(r)<S?v=m:u.locationPoint(y).distSqr(r)<S&&(v=y)}for(;Math.abs(v.lng-u.center.lng)>180;){const m=u.locationPoint(v);if(m.x>=0&&m.y>=0&&m.x<=u.width&&m.y<=u.height)break;v.lng>u.center.lng?v.lng-=360:v.lng+=360}return v.lng!==f.lng&&u.locationPoint(v).y>u.height/2-u.getHorizon()?v:f}const Ja={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function xc(v,r,u){const f=v.classList;for(const m in Ja)f.remove(`maplibregl-${u}-anchor-${m}`);f.add(`maplibregl-${u}-anchor-${r}`)}class bc extends l.E{constructor(r){if(super(),this._onKeyPress=u=>{const f=u.code,m=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=u=>{var f;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?rr(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,`${Ja[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${y}`),I.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div");const u=M.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const y=M.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const S=M.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const P=M.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const fe of E){const ve=M.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",fe.rx),ve.setAttributeNS(null,"ry",fe.ry),P.appendChild(ve)}const z=M.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const O=M.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(O);const F=M.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");const X=M.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(X);const te=M.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");const oe=M.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ce=M.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");const pe=M.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),oe.appendChild(ce),oe.appendChild(pe),S.appendChild(P),S.appendChild(z),S.appendChild(F),S.appendChild(te),S.appendChild(oe),u.appendChild(S),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),xc(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var u,f;if(!(!((u=this._map)===null||u===void 0)&&u.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,y=m.terrain.depthAtPoint(this._pos),S=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,S)-y<.006)return void(this._element.style.opacity=this._opacity);const P=-this._offset.y/m.transform._pixelPerMeter,E=Math.sin(m.getPitch()*Math.PI/180)*P,z=m.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),O=m.transform.lngLatToCameraDepth(this._lngLat,S+E)-z>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&O&&this._popup.remove(),this._element.style.opacity=O?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,u){return r===void 0&&u===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const Sm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let iu=0,ou=!1;const $o={maxWidth:100,unit:"metric"};function su(v,r,u){const f=u&&u.maxWidth||100,m=v._container.clientHeight/2,y=v.unproject([0,m]),S=v.unproject([f,m]),P=y.distanceTo(S);if(u&&u.unit==="imperial"){const E=3.2808*P;E>5280?Mt(r,f,E/5280,v._getUIString("ScaleControl.Miles")):Mt(r,f,E,v._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Mt(r,f,P/1852,v._getUIString("ScaleControl.NauticalMiles")):P>=1e3?Mt(r,f,P/1e3,v._getUIString("ScaleControl.Kilometers")):Mt(r,f,P,v._getUIString("ScaleControl.Meters"))}function Mt(v,r,u,f){const m=function(y){const S=Math.pow(10,`${Math.floor(y)}`.length-1);let P=y/S;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(E){const z=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*z)/z}(P),S*P}(u);v.style.width=r*(m/u)+"px",v.innerHTML=`${m}&nbsp;${f}`}const tn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},wc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Sc(v){if(v){if(typeof v=="number"){const r=Math.round(Math.abs(v)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,v),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-v),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(v,0),right:new l.P(-v,0)}}if(v instanceof l.P||Array.isArray(v)){const r=l.P.convert(v);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(v.center||[0,0]),top:l.P.convert(v.top||[0,0]),"top-left":l.P.convert(v["top-left"]||[0,0]),"top-right":l.P.convert(v["top-right"]||[0,0]),bottom:l.P.convert(v.bottom||[0,0]),"bottom-left":l.P.convert(v["bottom-left"]||[0,0]),"bottom-right":l.P.convert(v["bottom-right"]||[0,0]),left:l.P.convert(v.left||[0,0]),right:l.P.convert(v.right||[0,0])}}return Sc(new l.P(0,0))}const Dd=b;p.AJAXError=l.bh,p.Evented=l.E,p.LngLat=l.N,p.MercatorCoordinate=l.Z,p.Point=l.P,p.addProtocol=l.bi,p.config=l.a,p.removeProtocol=l.bj,p.AttributionControl=Xa,p.BoxZoomHandler=Ni,p.CanvasSource=qe,p.CooperativeGesturesHandler=Za,p.DoubleClickZoomHandler=ua,p.DragPanHandler=vm,p.DragRotateHandler=_m,p.EdgeInsets=Ha,p.FullscreenControl=class extends l.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var r;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=u==null?void 0:u.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){M.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=M.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);M.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},p.GeoJSONSource=gn,p.GeolocateControl=class extends l.E{constructor(v){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new l.N(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),y=l.e({bearing:m},this.options.fitBoundsOptions),S=Ce.fromLngLat(u,f);this._map.fitBounds(S,y,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new l.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&ou)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=M.create("button","maplibregl-ctrl-geolocate",this._container),M.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new bc({element:this._dotElement}),this._circleElement=M.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new bc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")),this.fire(new l.k("userlocationlostfocus")))})}},this.options=l.e({},Sm,v)}onAdd(v){return this._map=v,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return l._(this,arguments,void 0,function*(r=!1){if(Vi!==void 0&&!r)return Vi;if(window.navigator.permissions===void 0)return Vi=!!window.navigator.geolocation,Vi;try{Vi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Vi=!!window.navigator.geolocation}return Vi})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,iu=0,ou=!1}_isOutOfMapMaxBounds(v){const r=this._map.getMaxBounds(),u=v.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),r=v.getSouthEast(),u=v.getNorthEast(),f=r.distanceTo(u),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":iu--,ou=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart")),this.fire(new l.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),iu++,iu>1?(v={maximumAge:6e5,timeout:0},ou=!0):(v=this.options.positionOptions,ou=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},p.Hash=hc,p.ImageSource=Rn,p.KeyboardHandler=Yi,p.LngLatBounds=Ce,p.LogoControl=Ad,p.Map=class extends xm{constructor(v){l.bf.mark(l.bg.create);const r=Object.assign(Object.assign({},S_),v);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new qa(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new kn,this._controls=[],this._mapId=l.a4(),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},zd),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=B.addThrottleControl(()=>this.isMoving()),this._requestManager=new G(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const f=Jl(m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())},50);this._resizeObserver=new ResizeObserver(m=>{u?f(m):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Id(this,r),this._hash=r.hash&&new hc(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,l.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new Xa(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Ad,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new l.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new l.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new l.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(v,r){if(r===void 0&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=v.onAdd(this);this._controls.push(v);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,r,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,r,u,f)}resize(v){var r;const u=this._containerDimensions(),f=u[0],m=u[1],y=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,y),this.painter.resize(f,m,y),this.painter.overLimit()){const P=this.painter.context.gl;this._maxCanvasSize=[P.drawingBufferWidth,P.drawingBufferHeight];const E=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,E),this.painter.resize(f,m,E)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const S=!this._moving;return S&&(this.stop(),this.fire(new l.k("movestart",v)).fire(new l.k("move",v))),this.fire(new l.k("resize",v)),S&&this.fire(new l.k("moveend",v)),this}_getClampedPixelRatio(v,r){const{0:u,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),y=v*m,S=r*m;return Math.min(y>u?u/y:1,S>f?f/S:1)*m}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Ce.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(l.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(l.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,r,u){if(v==="mouseenter"||v==="mouseover"){let f=!1;return{layers:r,listener:u,delegates:{mousemove:y=>{const S=r.filter(E=>this.getLayer(E)),P=S.length!==0?this.queryRenderedFeatures(y.point,{layers:S}):[];P.length?f||(f=!0,u.call(this,new Qr(v,this,y.originalEvent,{features:P}))):f=!1},mouseout:()=>{f=!1}}}}if(v==="mouseleave"||v==="mouseout"){let f=!1;return{layers:r,listener:u,delegates:{mousemove:S=>{const P=r.filter(E=>this.getLayer(E));(P.length!==0?this.queryRenderedFeatures(S.point,{layers:P}):[]).length?f=!0:f&&(f=!1,u.call(this,new Qr(v,this,S.originalEvent)))},mouseout:S=>{f&&(f=!1,u.call(this,new Qr(v,this,S.originalEvent)))}}}}{const f=m=>{const y=r.filter(P=>this.getLayer(P)),S=y.length!==0?this.queryRenderedFeatures(m.point,{layers:y}):[];S.length&&(m.features=S,u.call(this,m),delete m.features)};return{layers:r,listener:u,delegates:{[v]:f}}}}_saveDelegatedListener(v,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(r)}_removeDelegatedListener(v,r,u){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const f=this._delegatedListeners[v];for(let m=0;m<f.length;m++){const y=f[m];if(y.listener===u&&y.layers.length===r.length&&y.layers.every(S=>r.includes(S))){for(const S in y.delegates)this.off(S,y.delegates[S]);return void f.splice(m,1)}}}on(v,r,u){if(u===void 0)return super.on(v,r);const f=this._createDelegatedListener(v,typeof r=="string"?[r]:r,u);this._saveDelegatedListener(v,f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(v,r,u){if(u===void 0)return super.once(v,r);const f=typeof r=="string"?[r]:r,m=this._createDelegatedListener(v,f,u);for(const y in m.delegates){const S=m.delegates[y];m.delegates[y]=(...P)=>{this._removeDelegatedListener(v,f,u),S(...P)}}this._saveDelegatedListener(v,m);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(v,r,u){return u===void 0?super.off(v,r):(this._removeDelegatedListener(v,typeof r=="string"?[r]:r,u),this)}queryRenderedFeatures(v,r){if(!this.style)return[];let u;const f=v instanceof l.P||Array.isArray(v),m=f?v:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:v)||{},m instanceof l.P||typeof m[0]=="number")u=[l.P.convert(m)];else{const y=l.P.convert(m[0]),S=l.P.convert(m[1]);u=[y,new l.P(S.x,y.y),S,new l.P(y.x,S.y),y]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(v,r){return this.style.querySourceFeatures(v,r)}setStyle(v,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(v,r))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const r=this._locale[v];if(r==null)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Zu(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,r,u):this.style.loadJSON(v,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Zu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,r){if(typeof v=="string"){const u=this._requestManager.transformRequest(v,"Style");l.h(u,new AbortController).then(f=>{this._updateDiff(f.data,r)}).catch(f=>{f&&this.fire(new l.j(f))})}else typeof v=="object"&&this._updateDiff(v,r)}_updateDiff(v,r){try{this.style.setState(v,r)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(v,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(v,r){return this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)}isSourceLoaded(v){const r=this.style&&this.style.sourceCaches[v];if(r!==void 0)return r.loaded();this.fire(new l.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const r=this.style.sourceCaches[v.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&r.reload();for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===v.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Rd(this.painter,r,v),this.painter.renderToTexture=new bm(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:v})),this}getTerrain(){var v,r;return(r=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const r in v){const u=v[r]._tiles;for(const f in u){const m=u[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,r,u={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:y,stretchY:S,content:P,textFitWidth:E,textFitHeight:z}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:F,data:X}=r,te=r;return this.style.addImage(v,{data:new l.R({width:O,height:F},new Uint8Array(X)),pixelRatio:f,stretchX:y,stretchY:S,content:P,textFitWidth:E,textFitHeight:z,sdf:m,version:0,userImage:te}),te.onAdd&&te.onAdd(this,v),this}}{const{width:O,height:F,data:X}=I.getImageData(r);this.style.addImage(v,{data:new l.R({width:O,height:F},X),pixelRatio:f,stretchX:y,stretchY:S,content:P,textFitWidth:E,textFitHeight:z,sdf:m,version:0})}}updateImage(v,r){const u=this.style.getImage(v);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||l.b(r)?I.getImageData(r):r,{width:m,height:y,data:S}=f;if(m===void 0||y===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||y!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(r instanceof HTMLImageElement||l.b(r));return u.data.replace(S,P),this.style.updateImage(v,u),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return B.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,r){return this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)}moveLayer(v,r){return this.style.moveLayer(v,r),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,r,u){return this.style.setLayerZoomRange(v,r,u),this._update(!0)}setFilter(v,r,u={}){return this.style.setFilter(v,r,u),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,r,u,f={}){return this.style.setPaintProperty(v,r,u,f),this._update(!0)}getPaintProperty(v,r){return this.style.getPaintProperty(v,r)}setLayoutProperty(v,r,u,f={}){return this.style.setLayoutProperty(v,r,u,f),this._update(!0)}getLayoutProperty(v,r){return this.style.getLayoutProperty(v,r)}setGlyphs(v,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,r,u,f=>{f||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,r,u=>{u||this._update(!0)}),this}setLight(v,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,r){return this.style.setFeatureState(v,r),this._update()}removeFeatureState(v,r){return this.style.removeFeatureState(v,r),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,r=0;return this._container&&(v=this._container.clientWidth||400,r=this._container.clientHeight||300),[v,r]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const r=this._canvasContainer=M.create("div","maplibregl-canvas-container",v);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=M.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const m=this._controlContainer=M.create("div","maplibregl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{y[S]=M.create("div",`maplibregl-ctrl-${S} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r,u){this._canvas.width=Math.floor(u*v),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:v},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!u){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new cc(u,this.transform),D.testSupport(u)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,y=I.now();this.style.zoomHistory.update(m,y);const S=new l.z(m,{now:y,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=S.crossFadingFactor();P===1&&P===this._crossFadingFactor||(u=!0,this._crossFadingFactor=P),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bf.mark(l.bg.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,l.bf.mark(l.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),B.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),M.remove(this._canvasContainer),M.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.bf.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,I.frameAsync(this._frameRequest).then(v=>{l.bf.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return wm}getCameraTargetElevation(){return this.transform.elevation}},p.MapMouseEvent=Qr,p.MapTouchEvent=aa,p.MapWheelEvent=mm,p.Marker=bc,p.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);r.title=f,r.setAttribute("aria-label",f)},this.options=l.e({},C_,v),this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),M.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),M.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=M.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new T_(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,r){const u=M.create("button",v,this._container);return u.type="button",u.addEventListener("click",r),u}},p.Popup=class extends l.E{constructor(v){super(),this.remove=()=>(this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var u;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=M.create("div","maplibregl-popup",this._map.getContainer()),this._tip=M.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?rr(this._lngLat,this._flatPos,this._map.transform):(u=this._lngLat)===null||u===void 0?void 0:u.wrap(),this._trackPointer&&!r)return;const f=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const y=Sc(this.options.offset);if(!m){const P=this._container.offsetWidth,E=this._container.offsetHeight;let z;z=f.y+y.bottom.y<E?["top"]:f.y>this._map.transform.height-E?["bottom"]:[],f.x<P/2?z.push("left"):f.x>this._map.transform.width-P/2&&z.push("right"),m=z.length===0?"bottom":z.join("-")}let S=f.add(y[m]);this.options.subpixelPositioning||(S=S.round()),M.setTransform(this._container,`${Ja[m]} translate(${S.x}px,${S.y}px)`),xc(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(tn),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=l.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const r=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=v;f=u.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=M.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(wc);v&&v.focus()}},p.RasterDEMTileSource=yt,p.RasterTileSource=Yt,p.ScaleControl=class{constructor(v){this._onMove=()=>{su(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,su(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},$o),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},p.ScrollZoomHandler=yo,p.Style=Zu,p.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=M.create("button","maplibregl-ctrl-terrain",this._container),M.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){M.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},p.TwoFingersTouchPitchHandler=ru,p.TwoFingersTouchRotateHandler=Pd,p.TwoFingersTouchZoomHandler=Cd,p.TwoFingersTouchZoomRotateHandler=Ed,p.VectorTileSource=mt,p.VideoSource=bn,p.addSourceType=(v,r)=>l._(void 0,void 0,void 0,function*(){if(It(v))throw new Error(`A source type called "${v}" already exists.`);((u,f)=>{nt[u]=f})(v,r)}),p.clearPrewarmedResources=function(){const v=kt;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Vt),kt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},p.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},p.getRTLTextPluginStatus=function(){return ot().getRTLTextPluginStatus()},p.getVersion=function(){return Dd},p.getWorkerCount=function(){return tt.workerCount},p.getWorkerUrl=function(){return l.a.WORKER_URL},p.importScriptInWorkers=function(v){return Qt().broadcast("IS",v)},p.prewarm=function(){jt().acquire(Vt)},p.setMaxParallelImageRequests=function(v){l.a.MAX_PARALLEL_IMAGE_REQUESTS=v},p.setRTLTextPlugin=function(v,r){return ot().setRTLTextPlugin(v,r)},p.setWorkerCount=function(v){tt.workerCount=v},p.setWorkerUrl=function(v){l.a.WORKER_URL=v}});var d=n;return d})})(ZR);var mh=ZR.exports;const rH=Yb(mh),iH=$k({__proto__:null,default:rH},[mh]);function oH(){const{current:e}=q1(),[t,n]=W.useState(null),[s,c]=W.useState(null),[d,p]=W.useState([]),[l,b]=W.useState([]),[T,k]=W.useState(!1),I=W.useRef(null),M=W.useRef(null),D=W.useRef(null),H=W.useCallback((q,J)=>{I.current&&clearTimeout(I.current),I.current=setTimeout(async()=>{const $=await NO(q);J($)},250)},[]);return W.useEffect(()=>{var J,$;if(!e)return;const q=e.getMap();if((J=M.current)==null||J.remove(),($=D.current)==null||$.remove(),M.current=null,D.current=null,T)t!=null&&t.coordinates&&(M.current=new mh.Marker({color:"orange"}).setLngLat(t.coordinates).addTo(q),e.flyTo({center:t.coordinates,zoom:10}));else if(t!=null&&t.coordinates&&(M.current=new mh.Marker({color:"green"}).setLngLat(t.coordinates).addTo(q)),s!=null&&s.coordinates&&(D.current=new mh.Marker({color:"red"}).setLngLat(s.coordinates).addTo(q)),t!=null&&t.coordinates&&(s!=null&&s.coordinates)&&(t.coordinates[0]!==s.coordinates[0]||t.coordinates[1]!==s.coordinates[1])){const V=new mh.LngLatBounds(t.coordinates,t.coordinates);V.extend(s.coordinates),e.fitBounds(V,{padding:50,duration:800})}else t!=null&&t.coordinates?e.flyTo({center:t.coordinates,zoom:10}):s!=null&&s.coordinates&&e.flyTo({center:s.coordinates,zoom:10})},[t,s,T,e]),W.useEffect(()=>()=>{var q,J;(q=M.current)==null||q.remove(),(J=D.current)==null||J.remove()},[]),ye.jsxs(Ib,{children:[ye.jsx(jp,{children:ye.jsx(uP,{id:"start",sx:{width:"100%"},options:d,value:t,getOptionLabel:q=>q.name,isOptionEqualToValue:(q,J)=>q.id===J.id,filterOptions:q=>q,renderOption:(q,J)=>W.createElement("li",{...q,key:J.id},J.name),onInputChange:(q,J)=>H(J,p),onChange:(q,J)=>n(J),renderInput:q=>ye.jsx(Ly,{...q,label:"Start"}),noOptionsText:"Type something!"})}),ye.jsx(sR,{children:!T&&ye.jsx(GR.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:ye.jsx(jp,{children:ye.jsx(uP,{id:"end",sx:{width:"100%"},options:l,value:s,getOptionLabel:q=>q.name,isOptionEqualToValue:(q,J)=>q.id===J.id,filterOptions:q=>q,renderOption:(q,J)=>W.createElement("li",{...q,key:J.id},J.name),onInputChange:(q,J)=>H(J,b),onChange:(q,J)=>c(J),renderInput:q=>ye.jsx(Ly,{...q,label:"End"}),noOptionsText:"Type something!"})})},"end-autocomplete")}),ye.jsx(jp,{children:ye.jsx(bV,{control:ye.jsx($6,{checked:T,onChange:q=>k(q.target.checked)}),label:"Loop"})})]})}const sH=ws(ye.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),aH=ws(ye.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}));function lH(){const[e,t]=W.useState([$g,Ng]),[n,s]=W.useState(!0);return ye.jsxs(ye.Fragment,{children:[ye.jsx(mw,{onClick:()=>s(c=>!c),sx:{position:"absolute",top:16,left:n?350:16,backgroundColor:"white",borderRadius:2,width:32,height:32,boxShadow:1,"&:hover":{backgroundColor:"white",boxShadow:3}},children:n?ye.jsx(sH,{}):ye.jsx(aH,{})}),ye.jsx(sR,{children:n&&ye.jsx(GR.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:320},exit:{opacity:0,width:0},transition:{duration:.25},style:{position:"absolute",top:16,left:16,bottom:16,overflow:"hidden"},children:ye.jsx(x6,{sx:{height:"100%"},children:ye.jsxs(C6,{children:[ye.jsx(oH,{}),ye.jsx(jp,{children:ye.jsx(nH,{range:e,setRange:t})}),ye.jsx(My,{}),ye.jsx(jp,{children:ye.jsx(tH,{})}),ye.jsx(My,{})]})})},"left-card")})]})}function uH(){return ye.jsx(ye.Fragment,{children:ye.jsxs(IO,{initialViewState:{longitude:by[0],latitude:by[1],zoom:2},mapStyle:"https://tiles.openfreemap.org/styles/liberty",children:[ye.jsx(VO,{}),ye.jsx(lH,{})]})})}JI(document.getElementById("root")).render(ye.jsx(uH,{}));
